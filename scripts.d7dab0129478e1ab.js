var Cg=Object.defineProperty,Lu=Object.getOwnPropertySymbols,vp=Object.prototype.hasOwnProperty,gp=Object.prototype.propertyIsEnumerable,dp=(J,ae,ce)=>ae in J?Cg(J,ae,{enumerable:!0,configurable:!0,writable:!0,value:ce}):J[ae]=ce,Iu=(J,ae)=>{for(var ce in ae||(ae={}))vp.call(ae,ce)&&dp(J,ce,ae[ce]);if(Lu)for(var ce of Lu(ae))gp.call(ae,ce)&&dp(J,ce,ae[ce]);return J},yp=(J,ae)=>{var ce={};for(var q in J)vp.call(J,q)&&ae.indexOf(q)<0&&(ce[q]=J[q]);if(null!=J&&Lu)for(var q of Lu(J))ae.indexOf(q)<0&&gp.call(J,q)&&(ce[q]=J[q]);return ce};function dateConverter(J){const ae=1721425.5,q=["So","Mo","Di","Mi","Do","Fr","Sa"],h={GREGORIAN:["ZERO","Jan","Feb","M\xe4rz","Apr","Mai","Juni","Juli","Aug","Sep","Okt","Nov","Dez"],JULIAN:["ZERO","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JEWISH:["ZERO","Tishri","Heshvan","Kislev","Tevet","Shevat","AdarI","AdarII","Nisan","Iyyar","Sivan","Tammuz","Av","Elul"],FRENCH:["ZERO","Vendemiaire","Brumaire","Frimaire","Nivose","Pluviose","Ventose","Germinal","Floreal","Prairial","Messidor","Thermidor","Fructidor","Extra"]};function F(x,a){return x-a*Math.floor(x/a)}function e(x){return(x=parseInt(x))%4==0&&!(x%100==0&&x%400!=0)}function o(x,a,b){return ae-1+365*(x-1)+Math.floor((x-1)/4)+-Math.floor((x-1)/100)+Math.floor((x-1)/400)+Math.floor((367*a-362)/12+(a<=2?0:e(x)?-1:-2)+b)}function l(x,a){x=parseInt(x);const b={};let A;switch(a){case"GREGORIAN":case"gregorian":A=function f(x){let a,b,A,T,B,N,P,L,Q,j,V,W,R,Z;return a=Math.floor(x-.5)+.5,b=a-ae,A=Math.floor(b/146097),T=F(b,146097),B=Math.floor(T/36524),N=F(T,36524),P=Math.floor(N/1461),L=F(N,1461),Q=Math.floor(L/365),j=400*A+100*B+4*P+Q,4==B||4==Q||j++,V=a-o(j,1,1),W=a<o(j,3,1)?0:e(j)?1:2,R=Math.floor((12*(V+W)+373)/367),Z=a-o(j,R,1)+1,j<=0&&j--,new Array(j,R,Z)}(x);break;case"JULIAN":case"julian":A=S.jd_to_julian(x);break;case"JEWISH":case"jewish":A=S.jd_to_hebrew(x);break;case"FRENCH":case"french":A=S.jd_to_french_revolutionary(x)}return b.year=A[0],b.month=A[1],b.day=A[2],b.weekday=function m(x){return x=Number(x),F(Math.floor(x+1.5),7)}(x),b}const y=l(J.dateval1,J.calendar),s=l(J.dateval2,J.calendar);let v="";if(J.dateprecision1==J.dateprecision2)switch(J.dateprecision1){case"DAY":v=y.year===s.year&&y.month===s.month&&y.day===s.day?"["+q[y.weekday]+"] "+y.day+". "+h[J.calendar][y.month]+" "+y.year:"["+q[y.weekday]+"] "+y.day+". "+h[J.calendar][y.month]+" "+y.year+" \u2013 ["+q[s.weekday]+"] "+s.day+". "+h[J.calendar][s.month]+" "+s.year;break;case"MONTH":v=y.year===s.year&&y.month===s.month?h[J.calendar][y.month]+" "+y.year:h[J.calendar][y.month]+" "+y.year+" \u2013 "+h[J.calendar][s.month]+" "+s.year;break;case"YEAR":v=y.year===s.year?y.year:y.year+"\u2013"+s.year}else{switch(J.dateprecision1){case"DAY":v="["+q[y.weekday]+"] "+y.day+". "+h[J.calendar][y.month]+" "+y.year;break;case"MONTH":v=h[J.calendar][y.month]+" "+y.year;break;case"YEAR":v=y.year}switch(v+=" \u2013 ",J.dateprecision2){case"DAY":v+="["+q[s.weekday]+"] "+s.day+". "+h[J.calendar][s.month]+" "+s.year;break;case"MONTH":v+=h[J.calendar][s.month]+" "+s.year;break;case"YEAR":v+=s.year}}return v+=" ("+{GREGORIAN:{name:"Gregorian",short:"G",n_months:12},JULIAN:{name:"Julian",short:"Ju",n_months:12},JEWISH:{name:"Jewish",short:"Je",n_months:13},FRENCH:{name:"Revol.",short:"R",n_months:13}}[J.calendar].short+")",v}function htmlConverter(J,ae){let q,h,F,m,e,o,f,l,y,s,ce="";const v={p:0,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,ol:0,ul:0,li:1,a:2,strong:3,u:3,s:3,em:3,span:3,sup:3,sub:3},x={settings:{utf8str:"",textattr:{},css:{width:"100%",minHeight:"30px"},matching:{strong:"bold",u:"underline",s:"strikethrough",em:"italic",a:"_link",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",ol:"ol",ul:"ul",li:"li",span:"style",p:"p",sup:"sup",sub:"sub"}}},a={};for(let A in x.settings.matching)a[x.settings.matching[A]]=A;const b=Object.keys(J);b.sort(function(A,T){return v[a[A]]-v[a[T]]}),q=[];for(let A in b)for(f in o=b[A],J[o])F=J[o][f].start,void 0===q[F]&&(q[F]=[]),q[F].push({propname:o,proptype:"start"}),"_link"==q[F][q[F].length-1].propname?(q[F][q[F].length-1].href=J[o][f].href,void 0!==J[o][f].resid&&(q[F][q[F].length-1].resid=J[o][f].resid)):"style"==q[F][q[F].length-1].propname&&(q[F][q[F].length-1].css=J[o][f].css),F=J[o][f].end,void 0===q[F]&&(q[F]=[]),q[F].push({propname:o,proptype:"end"});for(h=[],l=0;l<=ae.length;l++){if(void 0!==q[l]){for(e=[],s=[],y=q[l].length-1;y>=0;y--)if("end"==q[l][y].proptype&&"linebreak"!=q[l][y].propname){for(;void 0!==(m=h.pop())&&(ce+="</"+a[m]+">",m!=q[l][y].propname);)e.push(m);for(;void 0!==(m=e.pop());)h.push(m),ce+="<"+a[m]+">"}for(y in q[l])if("start"==q[l][y].proptype)if("linebreak"==q[l][y].propname)ce+="<br/>";else if("_link"==q[l][y].propname){h.push(q[l][y].propname);let A=q[l][y].href;void 0===A&&void 0!==q[l][y].resid&&(A="https://www.salsah.org/api/resources/"+q[l][y].resid),ce+="<"+a[q[l][y].propname]+' href="'+A,void 0!==q[l][y].resid?ce+='" class="salsah-link">':ce+='">'}else"style"==q[l][y].propname?(h.push(q[l][y].propname),ce+="<"+a[q[l][y].propname]+' style="'+q[l][y].css+'">'):(h.push(q[l][y].propname),ce+="<"+a[q[l][y].propname]+">")}l<ae.length&&(ce+=ae.charAt(l))}return ce=ce.replace(/\n/g,"<br/>"),ce=ce.replace(/\r/g,""),ce}(function(J){var ae,ce,q="0.5.0",h="hasOwnProperty",F=/[\.\/]/,m=/\s*,\s*/,o=function(a,b){return a-b},f={n:{}},l=function(){for(var a=0,b=this.length;b>a;a++)if(void 0!==this[a])return this[a]},y=function(){for(var a=this.length;--a;)if(void 0!==this[a])return this[a]},s=Object.prototype.toString,v=String,x=Array.isArray||function(a){return a instanceof Array||"[object Array]"==s.call(a)};eve=function(a,b){var A,T=ce,B=Array.prototype.slice.call(arguments,2),N=eve.listeners(a),P=0,L=[],Q={},j=[],V=ae;j.firstDefined=l,j.lastDefined=y,ae=a,ce=0;for(var W=0,R=N.length;R>W;W++)"zIndex"in N[W]&&(L.push(N[W].zIndex),N[W].zIndex<0&&(Q[N[W].zIndex]=N[W]));for(L.sort(o);L[P]<0;)if(A=Q[L[P++]],j.push(A.apply(b,B)),ce)return ce=T,j;for(W=0;R>W;W++)if("zIndex"in(A=N[W]))if(A.zIndex==L[P]){if(j.push(A.apply(b,B)),ce)break;do{if((A=Q[L[++P]])&&j.push(A.apply(b,B)),ce)break}while(A)}else Q[A.zIndex]=A;else if(j.push(A.apply(b,B)),ce)break;return ce=T,ae=V,j},eve._events=f,eve.listeners=function(a){var b,A,T,B,N,P,L,Q,j=x(a)?a:a.split(F),V=f,W=[V],R=[];for(B=0,N=j.length;N>B;B++){for(Q=[],P=0,L=W.length;L>P;P++)for(A=[(V=W[P].n)[j[B]],V["*"]],T=2;T--;)(b=A[T])&&(Q.push(b),R=R.concat(b.f||[]));W=Q}return R},eve.separator=function(a){a?(a="["+(a=v(a).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",F=new RegExp(a)):F=/[\.\/]/},eve.on=function(a,b){if("function"!=typeof b)return function(){};for(var A=x(a)?x(a[0])?a:[a]:v(a).split(m),T=0,B=A.length;B>T;T++)!function(N){for(var P,L=x(N)?N:v(N).split(F),Q=f,j=0,V=L.length;V>j;j++)Q=(Q=Q.n).hasOwnProperty(L[j])&&Q[L[j]]||(Q[L[j]]={n:{}});for(Q.f=Q.f||[],j=0,V=Q.f.length;V>j;j++)if(Q.f[j]==b){P=!0;break}!P&&Q.f.push(b)}(A[T]);return function(N){+N==+N&&(b.zIndex=+N)}},eve.f=function(a){var b=[].slice.call(arguments,1);return function(){eve.apply(null,[a,null].concat(b).concat([].slice.call(arguments,0)))}},eve.stop=function(){ce=1},eve.nt=function(a){var b=x(ae)?ae.join("."):ae;return a?new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)").test(b):b},eve.nts=function(){return x(ae)?ae:ae.split(F)},eve.off=eve.unbind=function(a,b){if(a){var A=x(a)?x(a[0])?a:[a]:v(a).split(m);if(A.length>1)for(var T=0,B=A.length;B>T;T++)eve.off(A[T],b);else{A=x(a)?a:v(a).split(F);var N,P,L,Q,j,V=[f],W=[];for(T=0,B=A.length;B>T;T++)for(Q=0;Q<V.length;Q+=L.length-2){if(L=[Q,1],N=V[Q].n,"*"!=A[T])N[A[T]]&&(L.push(N[A[T]]),W.unshift({n:N,name:A[T]}));else for(P in N)N[h](P)&&(L.push(N[P]),W.unshift({n:N,name:P}));V.splice.apply(V,L)}for(T=0,B=V.length;B>T;T++)for(N=V[T];N.n;){if(b){if(N.f){for(Q=0,j=N.f.length;j>Q;Q++)if(N.f[Q]==b){N.f.splice(Q,1);break}!N.f.length&&delete N.f}for(P in N.n)if(N.n[h](P)&&N.n[P].f){var R=N.n[P].f;for(Q=0,j=R.length;j>Q;Q++)if(R[Q]==b){R.splice(Q,1);break}!R.length&&delete N.n[P].f}}else for(P in delete N.f,N.n)N.n[h](P)&&N.n[P].f&&delete N.n[P].f;N=N.n}e:for(T=0,B=W.length;B>T;T++){for(P in(N=W[T]).n[N.name].f)continue e;for(P in N.n[N.name].n)continue e;delete N.n[N.name]}}}else eve._events=f={n:{}}},eve.once=function(a,b){var A=function(){return eve.off(a,A),b.apply(this,arguments)};return eve.on(a,A)},eve.version=q,eve.toString=function(){return"You are running Eve "+q},"undefined"!=typeof module&&module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],function(){return eve}):J.eve=eve})(this),function(J,ae){if("function"==typeof define&&define.amd)define(["eve"],function(q){return ae(J,q)});else if("undefined"!=typeof exports){var ce=require("eve");module.exports=ae(J,ce)}else ae(J,J.eve)}(window||this,function(J,ae){var h,F,m,e,o,f,l,s,v,x,a,b,A,T,B,N,P,ce=(h=void 0===ae?function(){}:ae,m={},e=J.requestAnimationFrame||J.webkitRequestAnimationFrame||J.mozRequestAnimationFrame||J.oRequestAnimationFrame||J.msRequestAnimationFrame||function(L){return setTimeout(L,16,(new Date).getTime()),!0},o=Array.isArray||function(L){return L instanceof Array||"[object Array]"==Object.prototype.toString.call(L)},f=0,l="M"+(+new Date).toString(36),s=Date.now||function(){return+new Date},v=function(L){var Q=this;if(null==L)return Q.s;var j=Q.s-L;Q.b+=Q.dur*j,Q.B+=Q.dur*j,Q.s=L},x=function(L){return null==L?this.spd:void(this.spd=L)},a=function(L){var Q=this;return null==L?Q.dur:(Q.s=Q.s*L/Q.dur,void(Q.dur=L))},b=function(){var L=this;delete m[L.id],L.update(),h("mina.stop."+L.id,L)},A=function(){var L=this;L.pdif||(delete m[L.id],L.update(),L.pdif=L.get()-L.b)},T=function(){var L=this;L.pdif&&(L.b=L.get()-L.pdif,delete L.pdif,m[L.id]=L,N())},B=function(){var L,Q=this;if(o(Q.start)){L=[];for(var j=0,V=Q.start.length;V>j;j++)L[j]=+Q.start[j]+(Q.end[j]-Q.start[j])*Q.easing(Q.s)}else L=+Q.start+(Q.end-Q.start)*Q.easing(Q.s);Q.set(L)},N=function(L){if(L){var Q=0;for(var j in m)if(m.hasOwnProperty(j)){var V=m[j],W=V.get();Q++,V.s=(W-V.b)/(V.dur/V.spd),V.s>=1&&(delete m[j],V.s=1,Q--,function(R){setTimeout(function(){h("mina.finish."+R.id,R)})}(V)),V.update()}F=!!Q&&e(N)}else F||(F=e(N))},(P=function(L,Q,j,V,W,R,Z){var ee={id:l+(f++).toString(36),start:L,end:Q,b:j,s:0,dur:V-j,spd:1,get:W,set:R,easing:Z||P.linear,status:v,speed:x,duration:a,stop:b,pause:A,resume:T,update:B};m[ee.id]=ee;var le,te=0;for(le in m)if(m.hasOwnProperty(le)&&2==++te)break;return 1==te&&N(),ee}).time=s,P.getById=function(L){return m[L]||null},P.linear=function(L){return L},P.easeout=function(L){return Math.pow(L,1.7)},P.easein=function(L){return Math.pow(L,.48)},P.easeinout=function(L){if(1==L)return 1;if(0==L)return 0;var Q=.48-L/1.04,j=Math.sqrt(.1734+Q*Q),V=j-Q,R=-j-Q,ee=Math.pow(Math.abs(V),1/3)*(0>V?-1:1)+Math.pow(Math.abs(R),1/3)*(0>R?-1:1)+.5;return 3*(1-ee)*ee*ee+ee*ee*ee},P.backin=function(L){if(1==L)return 1;var Q=1.70158;return L*L*((Q+1)*L-Q)},P.backout=function(L){if(0==L)return 0;var Q=1.70158;return(L-=1)*L*((Q+1)*L+Q)+1},P.elastic=function(L){return L==!!L?L:Math.pow(2,-10*L)*Math.sin((L-.075)*(2*Math.PI)/.3)+1},P.bounce=function(L){var j=7.5625,V=2.75;return 1/V>L?j*L*L:2/V>L?j*(L-=1.5/V)*L+.75:2.5/V>L?j*(L-=2.25/V)*L+.9375:j*(L-=2.625/V)*L+.984375},J.mina=P,P),q=function(h){function F(Y,he){if(Y){if(Y.nodeType)return j(Y);if(e(Y,"array")&&F.set)return F.set.apply(F,Y);if(Y instanceof N)return Y;if(null==he)return j(Y=W.doc.querySelector(String(Y)))}return new Q(Y=null==Y?"100%":Y,he=null==he?"100%":he)}function m(Y,he){if(he){if("#text"==Y&&(Y=W.doc.createTextNode(he.text||he["#text"]||"")),"#comment"==Y&&(Y=W.doc.createComment(he.text||he["#text"]||"")),"string"==typeof Y&&(Y=m(Y)),"string"==typeof he)return 1==Y.nodeType?"xlink:"==he.substring(0,6)?Y.getAttributeNS(xe,he.substring(6)):"xml:"==he.substring(0,4)?Y.getAttributeNS(Re,he.substring(4)):Y.getAttribute(he):"text"==he?Y.nodeValue:null;if(1==Y.nodeType){for(var ve in he)if(he[R](ve)){var me=Z(he[ve]);me?"xlink:"==ve.substring(0,6)?Y.setAttributeNS(xe,ve.substring(6),me):"xml:"==ve.substring(0,4)?Y.setAttributeNS(Re,ve.substring(4),me):Y.setAttribute(ve,me):Y.removeAttribute(ve)}}else"text"in he&&(Y.nodeValue=he.text)}else Y=W.doc.createElementNS(Re,Y);return Y}function e(Y,he){return"finite"==(he=Z.prototype.toLowerCase.call(he))?isFinite(Y):!("array"!=he||!(Y instanceof Array||Array.isArray&&Array.isArray(Y)))||("null"==he&&null===Y||he==typeof Y&&null!==Y||"object"==he&&Y===Object(Y)||Fe.call(Y).slice(8,-1).toLowerCase()==he)}function f(Y,he){for(var ve=0,me=Y.length;me>ve;ve++)if(Y[ve]===he)return Y.push(Y.splice(ve,1)[0])}function l(Y,he,ve){return function me(){var _e=Array.prototype.slice.call(arguments,0),Ce=_e.join("\u2400"),Oe=me.cache=me.cache||{},Pe=me.count=me.count||[];return Oe[R](Ce)?(f(Pe,Ce),ve?ve(Oe[Ce]):Oe[Ce]):(Pe.length>=1e3&&delete Oe[Pe.shift()],Pe.push(Ce),Oe[Ce]=Y.apply(he,_e),ve?ve(Oe[Ce]):Oe[Ce])}}function s(Y){return Y%360*we/180}function A(Y){return Y.node.ownerSVGElement&&j(Y.node.ownerSVGElement)||F.select("svg")}function B(Y){e(Y,"array")||(Y=Array.prototype.slice.call(arguments,0));for(var he=0,ve=0,me=this.node;this[he];)delete this[he++];for(he=0;he<Y.length;he++)"set"==Y[he].type?Y[he].forEach(function(Ce){me.appendChild(Ce.node)}):me.appendChild(Y[he].node);var _e=me.childNodes;for(he=0;he<_e.length;he++)this[ve++]=j(_e[he]);return this}function N(Y){if(Y.snap in He)return He[Y.snap];var he;try{he=Y.ownerSVGElement}catch(_e){}this.node=Y,he&&(this.paper=new Q(he)),this.type=Y.tagName||Y.nodeName;var ve=this.id=ge(this);if(this.anims={},this._={transform:[]},Y.snap=ve,He[ve]=this,"g"==this.type&&(this.add=B),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var me in Q.prototype)Q.prototype[R](me)&&(this[me]=Q.prototype[me])}function P(Y){this.node=Y}function L(Y,he){var ve=m(Y);return he.appendChild(ve),j(ve)}function Q(Y,he){var ve,me,_e,Ce=Q.prototype;if(Y&&Y.tagName&&"svg"==Y.tagName.toLowerCase()){if(Y.snap in He)return He[Y.snap];var Oe=Y.ownerDocument;for(var Pe in ve=new N(Y),me=Y.getElementsByTagName("desc")[0],_e=Y.getElementsByTagName("defs")[0],me||((me=m("desc")).appendChild(Oe.createTextNode("Created with Snap")),ve.node.appendChild(me)),_e||(_e=m("defs"),ve.node.appendChild(_e)),ve.defs=_e,Ce)Ce[R](Pe)&&(ve[Pe]=Ce[Pe]);ve.paper=ve.root=ve}else m((ve=L("svg",W.doc.body)).node,{height:he,version:1.1,width:Y,xmlns:Re});return ve}function j(Y){return Y&&(Y instanceof N||Y instanceof P?Y:Y.tagName&&"svg"==Y.tagName.toLowerCase()?new Q(Y):Y.tagName&&"object"==Y.tagName.toLowerCase()&&"image/svg+xml"==Y.type?new Q(Y.contentDocument.getElementsByTagName("svg")[0]):new N(Y))}function V(Y,he){for(var ve=0,me=Y.length;me>ve;ve++){var _e={type:Y[ve].type,attr:Y[ve].attr()},Ce=Y[ve].children();he.push(_e),Ce.length&&V(Ce,_e.childNodes=[])}}F.version="0.5.1",F.toString=function(){return"Snap v"+this.version},F._={};var W={win:h.window,doc:h.window.document};F._.glob=W;var Y,he,R="hasOwnProperty",Z=String,ee=parseFloat,le=parseInt,te=Math,oe=te.max,ie=te.min,pe=te.abs,we=(te.pow,te.PI),Te=(te.round,""),Fe=Object.prototype.toString,ke=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,de=(F._.separator=/[,\s]+/,/[\s]*,[\s]*/),Le={hs:1,rg:1},Me=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,Ze=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,H=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,z=0,ne="S"+(+new Date).toString(36),ge=function(Y){return(Y&&Y.type?Y.type:Te)+ne+(z++).toString(36)},xe="http://www.w3.org/1999/xlink",Re="http://www.w3.org/2000/svg",He={};F.url=function(Y){return"url('#"+Y+"')"},F._.$=m,F._.id=ge,F.format=(Y=/\{([^\}]+)\}/g,he=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(me,_e){return Z(me).replace(Y,function(Ce,Oe){return function(me,_e,Ce){var Oe=Ce;return _e.replace(he,function(Pe,Ge,$e,Xe,Ve){Ge=Ge||Xe,Oe&&(Ge in Oe&&(Oe=Oe[Ge]),"function"==typeof Oe&&Ve&&(Oe=Oe()))}),Oe=(null==Oe||Oe==Ce?me:Oe)+""}(Ce,Oe,_e)})}),F._.clone=function o(Y){if("function"==typeof Y||Object(Y)!==Y)return Y;var he=new Y.constructor;for(var ve in Y)Y[R](ve)&&(he[ve]=o(Y[ve]));return he},F._.cacher=l,F.rad=s,F.deg=function v(Y){return 180*Y/we%360},F.sin=function(Y){return te.sin(F.rad(Y))},F.tan=function(Y){return te.tan(F.rad(Y))},F.cos=function(Y){return te.cos(F.rad(Y))},F.asin=function(Y){return F.deg(te.asin(Y))},F.acos=function(Y){return F.deg(te.acos(Y))},F.atan=function(Y){return F.deg(te.atan(Y))},F.atan2=function(Y){return F.deg(te.atan2(Y))},F.angle=function y(Y,he,ve,me,_e,Ce){if(null==_e){var Oe=Y-ve,Pe=he-me;return Oe||Pe?(180+180*te.atan2(-Pe,-Oe)/we+360)%360:0}return y(Y,he,_e,Ce)-y(ve,me,_e,Ce)},F.len=function(Y,he,ve,me){return Math.sqrt(F.len2(Y,he,ve,me))},F.len2=function(Y,he,ve,me){return(Y-ve)*(Y-ve)+(he-me)*(he-me)},F.closestPoint=function(Y,he,ve){function me(Lt){var Ot=Lt.x-he,At=Lt.y-ve;return Ot*Ot+At*At}for(var _e,Ce,Oe,Pe,Ge=Y.node,$e=Ge.getTotalLength(),Xe=$e/Ge.pathSegList.numberOfItems*.125,Ve=1/0,ct=0;$e>=ct;ct+=Xe)(Pe=me(Oe=Ge.getPointAtLength(ct)))<Ve&&(_e=Oe,Ce=ct,Ve=Pe);for(Xe*=.5;Xe>.5;){var dt,ht,Ct,kt,vt,it;(Ct=Ce-Xe)>=0&&(vt=me(dt=Ge.getPointAtLength(Ct)))<Ve?(_e=dt,Ce=Ct,Ve=vt):(kt=Ce+Xe)<=$e&&(it=me(ht=Ge.getPointAtLength(kt)))<Ve?(_e=ht,Ce=kt,Ve=it):Xe*=.5}return{x:_e.x,y:_e.y,length:Ce,distance:Math.sqrt(Ve)}},F.is=e,F.snapTo=function(Y,he,ve){if(ve=e(ve,"finite")?ve:10,e(Y,"array")){for(var me=Y.length;me--;)if(pe(Y[me]-he)<=ve)return Y[me]}else{var _e=he%(Y=+Y);if(ve>_e)return he-_e;if(_e>Y-ve)return he-_e+Y}return he},F.getRGB=l(function(Y){if(!Y||(Y=Z(Y)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:yt};if("none"==Y)return{r:-1,g:-1,b:-1,hex:"none",toString:yt};if(!(Le[R](Y.toLowerCase().substring(0,2))||"#"==Y.charAt())&&(Y=We(Y)),!Y)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:yt};var he,ve,me,_e,Ce,Oe,Pe=Y.match(ke);return Pe?(Pe[2]&&(me=le(Pe[2].substring(5),16),ve=le(Pe[2].substring(3,5),16),he=le(Pe[2].substring(1,3),16)),Pe[3]&&(me=le((Ce=Pe[3].charAt(3))+Ce,16),ve=le((Ce=Pe[3].charAt(2))+Ce,16),he=le((Ce=Pe[3].charAt(1))+Ce,16)),Pe[4]&&(Oe=Pe[4].split(de),he=ee(Oe[0]),"%"==Oe[0].slice(-1)&&(he*=2.55),ve=ee(Oe[1]),"%"==Oe[1].slice(-1)&&(ve*=2.55),me=ee(Oe[2]),"%"==Oe[2].slice(-1)&&(me*=2.55),"rgba"==Pe[1].toLowerCase().slice(0,4)&&(_e=ee(Oe[3])),Oe[3]&&"%"==Oe[3].slice(-1)&&(_e/=100)),Pe[5]?(Oe=Pe[5].split(de),he=ee(Oe[0]),"%"==Oe[0].slice(-1)&&(he/=100),ve=ee(Oe[1]),"%"==Oe[1].slice(-1)&&(ve/=100),me=ee(Oe[2]),"%"==Oe[2].slice(-1)&&(me/=100),("deg"==Oe[0].slice(-3)||"\xb0"==Oe[0].slice(-1))&&(he/=360),"hsba"==Pe[1].toLowerCase().slice(0,4)&&(_e=ee(Oe[3])),Oe[3]&&"%"==Oe[3].slice(-1)&&(_e/=100),F.hsb2rgb(he,ve,me,_e)):Pe[6]?(Oe=Pe[6].split(de),he=ee(Oe[0]),"%"==Oe[0].slice(-1)&&(he/=100),ve=ee(Oe[1]),"%"==Oe[1].slice(-1)&&(ve/=100),me=ee(Oe[2]),"%"==Oe[2].slice(-1)&&(me/=100),("deg"==Oe[0].slice(-3)||"\xb0"==Oe[0].slice(-1))&&(he/=360),"hsla"==Pe[1].toLowerCase().slice(0,4)&&(_e=ee(Oe[3])),Oe[3]&&"%"==Oe[3].slice(-1)&&(_e/=100),F.hsl2rgb(he,ve,me,_e)):(he=ie(te.round(he),255),ve=ie(te.round(ve),255),me=ie(te.round(me),255),_e=ie(oe(_e,0),1),(Pe={r:he,g:ve,b:me,toString:yt}).hex="#"+(16777216|me|ve<<8|he<<16).toString(16).slice(1),Pe.opacity=e(_e,"finite")?_e:1,Pe)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:yt}},F),F.hsb=l(function(Y,he,ve){return F.hsb2rgb(Y,he,ve).hex}),F.hsl=l(function(Y,he,ve){return F.hsl2rgb(Y,he,ve).hex}),F.rgb=l(function(Y,he,ve,me){if(e(me,"finite")){var _e=te.round;return"rgba("+[_e(Y),_e(he),_e(ve),+me.toFixed(2)]+")"}return"#"+(16777216|ve|he<<8|Y<<16).toString(16).slice(1)});var We=function(Y){var he=W.doc.getElementsByTagName("head")[0]||W.doc.getElementsByTagName("svg")[0],ve="rgb(255, 0, 0)";return(We=l(function(me){if("red"==me.toLowerCase())return ve;he.style.color=ve,he.style.color=me;var _e=W.doc.defaultView.getComputedStyle(he,Te).getPropertyValue("color");return _e==ve?null:_e}))(Y)},Ke=function(){return"hsb("+[this.h,this.s,this.b]+")"},mt=function(){return"hsl("+[this.h,this.s,this.l]+")"},yt=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},Mt=function(Y,he,ve){if(null==he&&e(Y,"object")&&"r"in Y&&"g"in Y&&"b"in Y&&(ve=Y.b,he=Y.g,Y=Y.r),null==he&&e(Y,string)){var me=F.getRGB(Y);Y=me.r,he=me.g,ve=me.b}return(Y>1||he>1||ve>1)&&(Y/=255,he/=255,ve/=255),[Y,he,ve]},Yt=function(Y,he,ve,me){var _e={r:Y=te.round(255*Y),g:he=te.round(255*he),b:ve=te.round(255*ve),opacity:e(me,"finite")?me:1,hex:F.rgb(Y,he,ve),toString:yt};return e(me,"finite")&&(_e.opacity=me),_e};F.color=function(Y){var he;return e(Y,"object")&&"h"in Y&&"s"in Y&&"b"in Y?(he=F.hsb2rgb(Y),Y.r=he.r,Y.g=he.g,Y.b=he.b,Y.opacity=1,Y.hex=he.hex):e(Y,"object")&&"h"in Y&&"s"in Y&&"l"in Y?(he=F.hsl2rgb(Y),Y.r=he.r,Y.g=he.g,Y.b=he.b,Y.opacity=1,Y.hex=he.hex):(e(Y,"string")&&(Y=F.getRGB(Y)),e(Y,"object")&&"r"in Y&&"g"in Y&&"b"in Y&&!("error"in Y)?(he=F.rgb2hsl(Y),Y.h=he.h,Y.s=he.s,Y.l=he.l,he=F.rgb2hsb(Y),Y.v=he.b):((Y={hex:"none"}).r=Y.g=Y.b=Y.h=Y.s=Y.v=Y.l=-1,Y.error=1)),Y.toString=yt,Y},F.hsb2rgb=function(Y,he,ve,me){var _e,Ce,Oe,Pe,Ge;return e(Y,"object")&&"h"in Y&&"s"in Y&&"b"in Y&&(ve=Y.b,he=Y.s,me=Y.o,Y=Y.h),_e=Ce=Oe=ve-(Ge=ve*he),_e+=[Ge,Pe=Ge*(1-pe((Y=(Y*=360)%360/60)%2-1)),0,0,Pe,Ge][Y=~~Y],Ce+=[Pe,Ge,Ge,Pe,0,0][Y],Oe+=[0,0,Pe,Ge,Ge,Pe][Y],Yt(_e,Ce,Oe,me)},F.hsl2rgb=function(Y,he,ve,me){var _e,Ce,Oe,Pe,Ge;return e(Y,"object")&&"h"in Y&&"s"in Y&&"l"in Y&&(ve=Y.l,he=Y.s,Y=Y.h),(Y>1||he>1||ve>1)&&(Y/=360,he/=100,ve/=100),_e=Ce=Oe=ve-(Ge=2*he*(.5>ve?ve:1-ve))/2,_e+=[Ge,Pe=Ge*(1-pe((Y=(Y*=360)%360/60)%2-1)),0,0,Pe,Ge][Y=~~Y],Ce+=[Pe,Ge,Ge,Pe,0,0][Y],Oe+=[0,0,Pe,Ge,Ge,Pe][Y],Yt(_e,Ce,Oe,me)},F.rgb2hsb=function(Y,he,ve){var Ce,Oe;return Y=(ve=Mt(Y,he,ve))[0],he=ve[1],ve=ve[2],{h:((0==(Oe=(Ce=oe(Y,he,ve))-ie(Y,he,ve))?null:Ce==Y?(he-ve)/Oe:Ce==he?(ve-Y)/Oe+2:(Y-he)/Oe+4)+360)%6*60/360,s:0==Oe?0:Oe/Ce,b:Ce,toString:Ke}},F.rgb2hsl=function(Y,he,ve){var Ce,Oe,Pe,Ge;return Y=(ve=Mt(Y,he,ve))[0],he=ve[1],ve=ve[2],Ce=((Oe=oe(Y,he,ve))+(Pe=ie(Y,he,ve)))/2,{h:((0==(Ge=Oe-Pe)?null:Oe==Y?(he-ve)/Ge:Oe==he?(ve-Y)/Ge+2:(Y-he)/Ge+4)+360)%6*60/360,s:0==Ge?0:.5>Ce?Ge/(2*Ce):Ge/(2-2*Ce),l:Ce,toString:mt}},F.parsePathString=function(Y){if(!Y)return null;var he=F.path(Y);if(he.arr)return F.path.clone(he.arr);var ve={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},me=[];return e(Y,"array")&&e(Y[0],"array")&&(me=F.path.clone(Y)),me.length||Z(Y).replace(Me,function(_e,Ce,Oe){var Pe=[],Ge=Ce.toLowerCase();if(Oe.replace(H,function($e,Xe){Xe&&Pe.push(+Xe)}),"m"==Ge&&Pe.length>2&&(me.push([Ce].concat(Pe.splice(0,2))),Ge="l",Ce="m"==Ce?"l":"L"),"o"==Ge&&1==Pe.length&&me.push([Ce,Pe[0]]),"r"==Ge)me.push([Ce].concat(Pe));else for(;Pe.length>=ve[Ge]&&(me.push([Ce].concat(Pe.splice(0,ve[Ge]))),ve[Ge]););}),me.toString=F.path.toString,he.arr=F.path.clone(me),me};var Se=F.parseTransformString=function(Y){if(!Y)return null;var he=[];return e(Y,"array")&&e(Y[0],"array")&&(he=F.path.clone(Y)),he.length||Z(Y).replace(Ze,function(ve,me,_e){var Ce=[];me.toLowerCase(),_e.replace(H,function(Oe,Pe){Pe&&Ce.push(+Pe)}),he.push([me].concat(Ce))}),he.toString=F.path.toString,he};F._.svgTransform2string=function x(Y){var he=[];return Y=Y.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(ve,me,_e){return _e=_e.split(/\s*,\s*|\s+/),"rotate"==me&&1==_e.length&&_e.push(0,0),"scale"==me&&(_e.length>2?_e=_e.slice(0,2):2==_e.length&&_e.push(0,0),1==_e.length&&_e.push(_e[0],0,0)),"skewX"==me?he.push(["m",1,0,te.tan(s(_e[0])),1,0,0]):"skewY"==me?he.push(["m",1,te.tan(s(_e[0])),0,1,0,0]):he.push([me.charAt(0)].concat(_e)),ve}),he},F._.rgTransform=/^[a-z][\s]*-?\.?\d/i,F._.transform2matrix=function a(Y,he){var ve=Se(Y),me=new F.Matrix;if(ve)for(var _e=0,Ce=ve.length;Ce>_e;_e++){var Oe,Pe,Ge,$e,Xe,Ve=ve[_e],ct=Ve.length,dt=Z(Ve[0]).toLowerCase(),ht=Ve[0]!=dt,Ct=ht?me.invert():0;"t"==dt&&2==ct?me.translate(Ve[1],0):"t"==dt&&3==ct?ht?(Oe=Ct.x(0,0),Pe=Ct.y(0,0),Ge=Ct.x(Ve[1],Ve[2]),$e=Ct.y(Ve[1],Ve[2]),me.translate(Ge-Oe,$e-Pe)):me.translate(Ve[1],Ve[2]):"r"==dt?2==ct?(Xe=Xe||he,me.rotate(Ve[1],Xe.x+Xe.width/2,Xe.y+Xe.height/2)):4==ct&&(ht?(Ge=Ct.x(Ve[2],Ve[3]),$e=Ct.y(Ve[2],Ve[3]),me.rotate(Ve[1],Ge,$e)):me.rotate(Ve[1],Ve[2],Ve[3])):"s"==dt?2==ct||3==ct?(Xe=Xe||he,me.scale(Ve[1],Ve[ct-1],Xe.x+Xe.width/2,Xe.y+Xe.height/2)):4==ct?ht?(Ge=Ct.x(Ve[2],Ve[3]),$e=Ct.y(Ve[2],Ve[3]),me.scale(Ve[1],Ve[1],Ge,$e)):me.scale(Ve[1],Ve[1],Ve[2],Ve[3]):5==ct&&(ht?(Ge=Ct.x(Ve[3],Ve[4]),$e=Ct.y(Ve[3],Ve[4]),me.scale(Ve[1],Ve[2],Ge,$e)):me.scale(Ve[1],Ve[2],Ve[3],Ve[4])):"m"==dt&&7==ct&&me.add(Ve[1],Ve[2],Ve[3],Ve[4],Ve[5],Ve[6])}return me},F._unit2px=function T(Y,he,ve){function me($e){if(null==$e)return Te;if($e==+$e)return $e;m(Ge,{width:$e});try{return Ge.getBBox().width}catch(Xe){return 0}}function _e($e){if(null==$e)return Te;if($e==+$e)return $e;m(Ge,{height:$e});try{return Ge.getBBox().height}catch(Xe){return 0}}function Ce($e,Xe){null==he?Pe[$e]=Xe(Y.attr($e)||0):$e==he&&(Pe=Xe(null==ve?Y.attr($e)||0:ve))}var Oe=A(Y).node,Pe={},Ge=Oe.querySelector(".svg---mgr");switch(Ge||(Ge=m("rect"),m(Ge,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),Oe.appendChild(Ge)),Y.type){case"rect":Ce("rx",me),Ce("ry",_e);case"image":Ce("width",me),Ce("height",_e);case"text":Ce("x",me),Ce("y",_e);break;case"circle":Ce("cx",me),Ce("cy",_e),Ce("r",me);break;case"ellipse":Ce("cx",me),Ce("cy",_e),Ce("rx",me),Ce("ry",_e);break;case"line":Ce("x1",me),Ce("x2",me),Ce("y1",_e),Ce("y2",_e);break;case"marker":Ce("refX",me),Ce("markerWidth",me),Ce("refY",_e),Ce("markerHeight",_e);break;case"radialGradient":Ce("fx",me),Ce("fy",_e);break;case"tspan":Ce("dx",me),Ce("dy",_e);break;default:Ce(he,me)}return Oe.removeChild(Ge),Pe},W.doc.contains||W.doc.compareDocumentPosition,F._.getSomeDefs=function b(Y){var he=Y.node.ownerSVGElement&&j(Y.node.ownerSVGElement)||Y.node.parentNode&&j(Y.node.parentNode)||F.select("svg")||F(0,0),ve=he.select("defs"),me=null!=ve&&ve.node;return me||(me=L("defs",he.node).node),me},F._.getSomeSVG=A,F.select=function(Y){return Y=Z(Y).replace(/([^\\]):/g,"$1\\:"),j(W.doc.querySelector(Y))},F.selectAll=function(Y){for(var he=W.doc.querySelectorAll(Y),ve=(F.set||Array)(),me=0;me<he.length;me++)ve.push(j(he[me]));return ve},setInterval(function(){for(var Y in He)if(He[R](Y)){var he=He[Y],ve=he.node;("svg"!=he.type&&!ve.ownerSVGElement||"svg"==he.type&&(!ve.parentNode||"ownerSVGElement"in ve.parentNode&&!ve.ownerSVGElement))&&delete He[Y]}},1e4),N.prototype.attr=function(Y,he){var ve=this,me=ve.node;if(!Y){if(1!=me.nodeType)return{text:me.nodeValue};for(var _e=me.attributes,Ce={},Oe=0,Pe=_e.length;Pe>Oe;Oe++)Ce[_e[Oe].nodeName]=_e[Oe].nodeValue;return Ce}if(e(Y,"string")){if(!(arguments.length>1))return ae("snap.util.getattr."+Y,ve).firstDefined();var Ge={};Ge[Y]=he,Y=Ge}for(var $e in Y)Y[R]($e)&&ae("snap.util.attr."+$e,ve,Y[$e]);return ve},F.parse=function(Y){var he=W.doc.createDocumentFragment(),ve=!0,me=W.doc.createElement("div");if((Y=Z(Y)).match(/^\s*<\s*svg(?:\s|>)/)||(Y="<svg>"+Y+"</svg>",ve=!1),me.innerHTML=Y,Y=me.getElementsByTagName("svg")[0])if(ve)he=Y;else for(;Y.firstChild;)he.appendChild(Y.firstChild);return new P(he)},F.fragment=function(){for(var Y=Array.prototype.slice.call(arguments,0),he=W.doc.createDocumentFragment(),ve=0,me=Y.length;me>ve;ve++){var _e=Y[ve];_e.node&&_e.node.nodeType&&he.appendChild(_e.node),_e.nodeType&&he.appendChild(_e),"string"==typeof _e&&he.appendChild(F.parse(_e).node)}return new P(he)},F._.make=L,F._.wrap=j,Q.prototype.el=function(Y,he){var ve=L(Y,this.node);return he&&ve.attr(he),ve},N.prototype.children=function(){for(var Y=[],he=this.node.childNodes,ve=0,me=he.length;me>ve;ve++)Y[ve]=F(he[ve]);return Y},N.prototype.toJSON=function(){var Y=[];return V([this],Y),Y[0]},ae.on("snap.util.getattr",function(){var Y=ae.nt(),he=(Y=Y.substring(Y.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(ve){return"-"+ve.toLowerCase()});return Ie[R](he)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(he):m(this.node,Y)});var Ie={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};ae.on("snap.util.attr",function(Y){var he=ae.nt(),ve={};ve[he=he.substring(he.lastIndexOf(".")+1)]=Y;var me=he.replace(/-(\w)/gi,function(Ce,Oe){return Oe.toUpperCase()}),_e=he.replace(/[A-Z]/g,function(Ce){return"-"+Ce.toLowerCase()});Ie[R](_e)?this.node.style[me]=null==Y?Te:Y:m(this.node,ve)}),Q.prototype,F.ajax=function(Y,he,ve,me){var _e=new XMLHttpRequest,Ce=ge();if(_e){if(e(he,"function"))me=ve,ve=he,he=null;else if(e(he,"object")){var Oe=[];for(var Pe in he)he.hasOwnProperty(Pe)&&Oe.push(encodeURIComponent(Pe)+"="+encodeURIComponent(he[Pe]));he=Oe.join("&")}return _e.open(he?"POST":"GET",Y,!0),he&&(_e.setRequestHeader("X-Requested-With","XMLHttpRequest"),_e.setRequestHeader("Content-type","application/x-www-form-urlencoded")),ve&&(ae.once("snap.ajax."+Ce+".0",ve),ae.once("snap.ajax."+Ce+".200",ve),ae.once("snap.ajax."+Ce+".304",ve)),_e.onreadystatechange=function(){4==_e.readyState&&ae("snap.ajax."+Ce+"."+_e.status,me,_e)},4==_e.readyState||_e.send(he),_e}},F.load=function(Y,he,ve){F.ajax(Y,function(me){var _e=F.parse(me.responseText);ve?he.call(ve,_e):he(_e)})};return F.getElementByPoint=function(Y,he){var me=(this.canvas,W.doc.elementFromPoint(Y,he));if(W.win.opera&&"svg"==me.tagName){var _e=function(Y){var he=Y.getBoundingClientRect(),ve=Y.ownerDocument,me=ve.body,_e=ve.documentElement,Ce=_e.clientTop||me.clientTop||0,Oe=_e.clientLeft||me.clientLeft||0;return{y:he.top+(g.win.pageYOffset||_e.scrollTop||me.scrollTop)-Ce,x:he.left+(g.win.pageXOffset||_e.scrollLeft||me.scrollLeft)-Oe}}(me),Ce=me.createSVGRect();Ce.x=Y-_e.x,Ce.y=he-_e.y,Ce.width=Ce.height=1;var Oe=me.getIntersectionList(Ce,null);Oe.length&&(me=Oe[Oe.length-1])}return me?j(me):null},F.plugin=function(Y){Y(F,N,Q,W,P)},W.win.Snap=F,F}(J||this);return q.plugin(function(h,F,m,e,o){function f(Q,j){if(null==j){var V=!0;if(!(j="linearGradient"==Q.type||"radialGradient"==Q.type?Q.node.getAttribute("gradientTransform"):"pattern"==Q.type?Q.node.getAttribute("patternTransform"):Q.node.getAttribute("transform")))return new h.Matrix;j=h._.svgTransform2string(j)}else j=h._.rgTransform.test(j)?x(j).replace(/\.{3}|\u2026/g,Q._.transform||""):h._.svgTransform2string(j),v(j,"array")&&(j=h.path?h.path.toString.call(j):x(j)),Q._.transform=j;var W=h._.transform2matrix(j,Q.getBBox(1));return V?W:void(Q.matrix=W)}function y(Q){return function(){var j=Q?"<"+this.type:"",V=this.node.attributes,W=this.node.childNodes;if(Q)for(var R=0,Z=V.length;Z>R;R++)j+=" "+V[R].name+'="'+V[R].value.replace(/"/g,'\\"')+'"';if(W.length){for(Q&&(j+=">"),R=0,Z=W.length;Z>R;R++)3==W[R].nodeType?j+=W[R].nodeValue:1==W[R].nodeType&&(j+=N(W[R]).toString());Q&&(j+="</"+this.type+">")}else Q&&(j+="/>");return j}}var s=F.prototype,v=h.is,x=String,a=h._unit2px,b=h._.$,A=h._.make,T=h._.getSomeDefs,B="hasOwnProperty",N=h._.wrap;s.getBBox=function(Q){if("tspan"==this.type)return h._.box(this.node.getClientRects().item(0));if(!h.Matrix||!h.path)return this.node.getBBox();var j=this,V=new h.Matrix;if(j.removed)return h._.box();for(;"use"==j.type;)if(Q||(V=V.add(j.transform().localMatrix.translate(j.attr("x")||0,j.attr("y")||0))),j.original)j=j.original;else{var W=j.attr("xlink:href");j=j.original=j.node.ownerDocument.getElementById(W.substring(W.indexOf("#")+1))}var R=j._,Z=h.path.get[j.type]||h.path.get.deflt;try{return Q?(R.bboxwt=Z?h.path.getBBox(j.realPath=Z(j)):h._.box(j.node.getBBox()),h._.box(R.bboxwt)):(j.realPath=Z(j),j.matrix=j.transform().localMatrix,R.bbox=h.path.getBBox(h.path.map(j.realPath,V.add(j.matrix))),h._.box(R.bbox))}catch(ee){return h._.box()}};var P=function(){return this.string};s.transform=function(Q){var j=this._;if(null==Q){for(var V,W=this,R=new h.Matrix(this.node.getCTM()),Z=f(this),ee=[Z],le=new h.Matrix,te=Z.toTransformString(),oe=x(Z)==x(this.matrix)?x(j.transform):te;"svg"!=W.type&&(W=W.parent());)ee.push(f(W));for(V=ee.length;V--;)le.add(ee[V]);return{string:oe,globalMatrix:R,totalMatrix:le,localMatrix:Z,diffMatrix:R.clone().add(Z.invert()),global:R.toTransformString(),total:le.toTransformString(),local:te,toString:P}}return Q instanceof h.Matrix?(this.matrix=Q,this._.transform=Q.toTransformString()):f(this,Q),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?b(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?b(this.node,{patternTransform:this.matrix}):b(this.node,{transform:this.matrix})),this},s.parent=function(){return N(this.node.parentNode)},s.append=s.add=function(Q){if(Q){if("set"==Q.type){var j=this;return Q.forEach(function(V){j.add(V)}),this}Q=N(Q),this.node.appendChild(Q.node),Q.paper=this.paper}return this},s.appendTo=function(Q){return Q&&(Q=N(Q)).append(this),this},s.prepend=function(Q){if(Q){if("set"==Q.type){var j,V=this;return Q.forEach(function(R){j?j.after(R):V.prepend(R),j=R}),this}var W=(Q=N(Q)).parent();this.node.insertBefore(Q.node,this.node.firstChild),this.add&&this.add(),Q.paper=this.paper,this.parent()&&this.parent().add(),W&&W.add()}return this},s.prependTo=function(Q){return(Q=N(Q)).prepend(this),this},s.before=function(Q){if("set"==Q.type){var j=this;return Q.forEach(function(W){var R=W.parent();j.node.parentNode.insertBefore(W.node,j.node),R&&R.add()}),this.parent().add(),this}var V=(Q=N(Q)).parent();return this.node.parentNode.insertBefore(Q.node,this.node),this.parent()&&this.parent().add(),V&&V.add(),Q.paper=this.paper,this},s.after=function(Q){var j=(Q=N(Q)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(Q.node,this.node.nextSibling):this.node.parentNode.appendChild(Q.node),this.parent()&&this.parent().add(),j&&j.add(),Q.paper=this.paper,this},s.insertBefore=function(Q){Q=N(Q);var j=this.parent();return Q.node.parentNode.insertBefore(this.node,Q.node),this.paper=Q.paper,j&&j.add(),Q.parent()&&Q.parent().add(),this},s.insertAfter=function(Q){Q=N(Q);var j=this.parent();return Q.node.parentNode.insertBefore(this.node,Q.node.nextSibling),this.paper=Q.paper,j&&j.add(),Q.parent()&&Q.parent().add(),this},s.remove=function(){var Q=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,Q&&Q.add(),this},s.select=function(Q){return N(this.node.querySelector(Q))},s.selectAll=function(Q){for(var j=this.node.querySelectorAll(Q),V=(h.set||Array)(),W=0;W<j.length;W++)V.push(N(j[W]));return V},s.asPX=function(Q,j){return null==j&&(j=this.attr(Q)),+a(this,Q,j)},s.use=function(){var Q,j=this.node.id;return j||(j=this.id,b(this.node,{id:j})),Q="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?A(this.type,this.node.parentNode):A("use",this.node.parentNode),b(Q.node,{"xlink:href":"#"+j}),Q.original=this,Q},s.clone=function(){var Q=N(this.node.cloneNode(!0));return b(Q.node,"id")&&b(Q.node,{id:Q.id}),function l(Q){function j(Fe,ke){var de=b(Fe.node,ke);(de=(de=de&&de.match(Z))&&de[2])&&"#"==de.charAt()&&(de=de.substring(1))&&(le[de]=(le[de]||[]).concat(function(Le){var Me={};Me[ke]=h.url(Le),b(Fe.node,Me)}))}function V(Fe){var ke=b(Fe.node,"xlink:href");ke&&"#"==ke.charAt()&&(ke=ke.substring(1))&&(le[ke]=(le[ke]||[]).concat(function(de){Fe.attr("xlink:href","#"+de)}))}for(var W,R=Q.selectAll("*"),Z=/^\s*url\(("|'|)(.*)\1\)\s*$/,ee=[],le={},te=0,oe=R.length;oe>te;te++){j(W=R[te],"fill"),j(W,"stroke"),j(W,"filter"),j(W,"mask"),j(W,"clip-path"),V(W);var ie=b(W.node,"id");ie&&(b(W.node,{id:W.id}),ee.push({old:ie,id:W.id}))}for(te=0,oe=ee.length;oe>te;te++){var pe=le[ee[te].old];if(pe)for(var we=0,Te=pe.length;Te>we;we++)pe[we](ee[te].id)}}(Q),Q.insertAfter(this),Q},s.toDefs=function(){return T(this).appendChild(this.node),this},s.pattern=s.toPattern=function(Q,j,V,W){var R=A("pattern",T(this));return null==Q&&(Q=this.getBBox()),v(Q,"object")&&"x"in Q&&(j=Q.y,V=Q.width,W=Q.height,Q=Q.x),b(R.node,{x:Q,y:j,width:V,height:W,patternUnits:"userSpaceOnUse",id:R.id,viewBox:[Q,j,V,W].join(" ")}),R.node.appendChild(this.node),R},s.marker=function(Q,j,V,W,R,Z){var ee=A("marker",T(this));return null==Q&&(Q=this.getBBox()),v(Q,"object")&&"x"in Q&&(j=Q.y,V=Q.width,W=Q.height,R=Q.refX||Q.cx,Z=Q.refY||Q.cy,Q=Q.x),b(ee.node,{viewBox:[Q,j,V,W].join(" "),markerWidth:V,markerHeight:W,orient:"auto",refX:R||0,refY:Z||0,id:ee.id}),ee.node.appendChild(this.node),ee};var L={};s.data=function(Q,j){var V=L[this.id]=L[this.id]||{};if(0==arguments.length)return ae("snap.data.get."+this.id,this,V,null),V;if(1==arguments.length){if(h.is(Q,"object")){for(var W in Q)Q[B](W)&&this.data(W,Q[W]);return this}return ae("snap.data.get."+this.id,this,V[Q],Q),V[Q]}return V[Q]=j,ae("snap.data.set."+this.id,this,j,Q),this},s.removeData=function(Q){return null==Q?L[this.id]={}:L[this.id]&&delete L[this.id][Q],this},s.outerSVG=s.toString=y(1),s.innerSVG=y(),s.toDataURL=function(){if(J&&J.btoa){var Q=this.getBBox(),j=h.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+Q.x.toFixed(3),y:+Q.y.toFixed(3),width:+Q.width.toFixed(3),height:+Q.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(j)))}},o.prototype.select=s.select,o.prototype.selectAll=s.selectAll}),q.plugin(function(h,F,m,e,o){function f(a,b,A){return function(T){var B=T.slice(a,b);return 1==B.length&&(B=B[0]),A?A(B):B}}var l=F.prototype,y=h.is,s=String,v="hasOwnProperty",x=function(a,b,A,T){"function"!=typeof A||A.length||(T=A,A=ce.linear),this.attr=a,this.dur=b,A&&(this.easing=A),T&&(this.callback=T)};h._.Animation=x,h.animation=function(a,b,A,T){return new x(a,b,A,T)},l.inAnim=function(){var a=this,b=[];for(var A in a.anims)a.anims[v](A)&&function(T){b.push({anim:new x(T._attrs,T.dur,T.easing,T._callback),mina:T,curStatus:T.status(),status:function(B){return T.status(B)},stop:function(){T.stop()}})}(a.anims[A]);return b},h.animate=function(a,b,A,T,B,N){"function"!=typeof B||B.length||(N=B,B=ce.linear);var P=ce.time(),L=ce(a,b,P,P+T,ce.time,A,B);return N&&ae.once("mina.finish."+L.id,N),L},l.stop=function(){for(var a=this.inAnim(),b=0,A=a.length;A>b;b++)a[b].stop();return this},l.animate=function(a,b,A,T){"function"!=typeof A||A.length||(T=A,A=ce.linear),a instanceof x&&(T=a.callback,A=a.easing,b=a.dur,a=a.attr);var B,N,P,L,Q=[],j=[],V={},W=this;for(var R in a)if(a[v](R)){W.equal?(B=(L=W.equal(R,s(a[R]))).from,N=L.to,P=L.f):(B=+W.attr(R),N=+a[R]);var Z=y(B,"array")?B.length:1;V[R]=f(Q.length,Q.length+Z,P),Q=Q.concat(B),j=j.concat(N)}var ee=ce.time(),le=ce(Q,j,ee,ee+b,ce.time,function(te){var oe={};for(var ie in V)V[v](ie)&&(oe[ie]=V[ie](te));W.attr(oe)},A);return W.anims[le.id]=le,le._attrs=a,le._callback=T,ae("snap.animcreated."+W.id,le),ae.once("mina.finish."+le.id,function(){ae.off("mina.*."+le.id),delete W.anims[le.id],T&&T.call(W)}),ae.once("mina.stop."+le.id,function(){ae.off("mina.*."+le.id),delete W.anims[le.id]}),W}}),q.plugin(function(h,F,m,e,o){function f(x,a,b,A,T,B){return null==a&&"[object SVGMatrix]"==l.call(x)?(this.a=x.a,this.b=x.b,this.c=x.c,this.d=x.d,this.e=x.e,void(this.f=x.f)):void(null!=x?(this.a=+x,this.b=+a,this.c=+b,this.d=+A,this.e=+T,this.f=+B):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var l=Object.prototype.toString,y=String,s=Math;(function(x){function a(A){return A[0]*A[0]+A[1]*A[1]}function b(A){var T=s.sqrt(a(A));A[0]&&(A[0]/=T),A[1]&&(A[1]/=T)}x.add=function(A,T,B,N,P,L){if(A&&A instanceof f)return this.add(A.a,A.b,A.c,A.d,A.e,A.f);var Q=A*this.a+T*this.c,j=A*this.b+T*this.d;return this.e+=P*this.a+L*this.c,this.f+=P*this.b+L*this.d,this.c=B*this.a+N*this.c,this.d=B*this.b+N*this.d,this.a=Q,this.b=j,this},f.prototype.multLeft=function(A,T,B,N,P,L){if(A&&A instanceof f)return this.multLeft(A.a,A.b,A.c,A.d,A.e,A.f);var Q=A*this.a+B*this.b,j=A*this.c+B*this.d,V=A*this.e+B*this.f+P;return this.b=T*this.a+N*this.b,this.d=T*this.c+N*this.d,this.f=T*this.e+N*this.f+L,this.a=Q,this.c=j,this.e=V,this},x.invert=function(){var A=this,T=A.a*A.d-A.b*A.c;return new f(A.d/T,-A.b/T,-A.c/T,A.a/T,(A.c*A.f-A.d*A.e)/T,(A.b*A.e-A.a*A.f)/T)},x.clone=function(){return new f(this.a,this.b,this.c,this.d,this.e,this.f)},x.translate=function(A,T){return this.e+=A*this.a+T*this.c,this.f+=A*this.b+T*this.d,this},x.scale=function(A,T,B,N){return null==T&&(T=A),(B||N)&&this.translate(B,N),this.a*=A,this.b*=A,this.c*=T,this.d*=T,(B||N)&&this.translate(-B,-N),this},x.rotate=function(A,T,B){A=h.rad(A),T=T||0,B=B||0;var N=+s.cos(A).toFixed(9),P=+s.sin(A).toFixed(9);return this.add(N,P,-P,N,T,B),this.add(1,0,0,1,-T,-B)},x.skewX=function(A){return this.skew(A,0)},x.skewY=function(A){return this.skew(0,A)},x.skew=function(A,T){A=A||0,T=T||0,A=h.rad(A),T=h.rad(T);var B=s.tan(A).toFixed(9),N=s.tan(T).toFixed(9);return this.add(1,N,B,1,0,0)},x.x=function(A,T){return A*this.a+T*this.c+this.e},x.y=function(A,T){return A*this.b+T*this.d+this.f},x.get=function(A){return+this[y.fromCharCode(97+A)].toFixed(4)},x.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},x.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},x.determinant=function(){return this.a*this.d-this.b*this.c},x.split=function(){var A={};A.dx=this.e,A.dy=this.f;var T=[[this.a,this.b],[this.c,this.d]];A.scalex=s.sqrt(a(T[0])),b(T[0]),A.shear=T[0][0]*T[1][0]+T[0][1]*T[1][1],T[1]=[T[1][0]-T[0][0]*A.shear,T[1][1]-T[0][1]*A.shear],A.scaley=s.sqrt(a(T[1])),b(T[1]),A.shear/=A.scaley,this.determinant()<0&&(A.scalex=-A.scalex);var B=T[0][1],N=T[1][1];return 0>N?(A.rotate=h.deg(s.acos(N)),0>B&&(A.rotate=360-A.rotate)):A.rotate=h.deg(s.asin(B)),A.isSimple=!(+A.shear.toFixed(9)||A.scalex.toFixed(9)!=A.scaley.toFixed(9)&&A.rotate),A.isSuperSimple=!+A.shear.toFixed(9)&&A.scalex.toFixed(9)==A.scaley.toFixed(9)&&!A.rotate,A.noRotation=!+A.shear.toFixed(9)&&!A.rotate,A},x.toTransformString=function(A){var T=A||this.split();return+T.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(T.scalex=+T.scalex.toFixed(4),T.scaley=+T.scaley.toFixed(4),T.rotate=+T.rotate.toFixed(4),(T.dx||T.dy?"t"+[+T.dx.toFixed(4),+T.dy.toFixed(4)]:"")+(T.rotate?"r"+[+T.rotate.toFixed(4),0,0]:"")+(1!=T.scalex||1!=T.scaley?"s"+[T.scalex,T.scaley,0,0]:""))}})(f.prototype),h.Matrix=f,h.matrix=function(x,a,b,A,T,B){return new f(x,a,b,A,T,B)}}),q.plugin(function(h,F,m,e,o){function f(j){return function(V){if(ae.stop(),V instanceof o&&1==V.node.childNodes.length&&("radialGradient"==V.node.firstChild.tagName||"linearGradient"==V.node.firstChild.tagName||"pattern"==V.node.firstChild.tagName)&&(V=V.node.firstChild,b(this).appendChild(V),V=x(V)),V instanceof F)if("radialGradient"==V.type||"linearGradient"==V.type||"pattern"==V.type){V.node.id||T(V.node,{id:V.id});var W=B(V.node.id)}else W=V.attr(j);else if((W=h.color(V)).error){var R=h(b(this).ownerSVGElement).gradient(V);R?(R.node.id||T(R.node,{id:R.id}),W=B(R.node.id)):W=V}else W=N(W);var Z={};Z[j]=W,T(this.node,Z),this.node.style[j]=L}}function l(j){ae.stop(),j==+j&&(j+="px"),this.node.style.fontSize=j}function y(j){for(var V=[],W=j.childNodes,R=0,Z=W.length;Z>R;R++){var ee=W[R];3==ee.nodeType&&V.push(ee.nodeValue),"tspan"==ee.tagName&&(1==ee.childNodes.length&&3==ee.firstChild.nodeType?V.push(ee.firstChild.nodeValue):V.push(y(ee)))}return V}function s(){return ae.stop(),this.node.style.fontSize}var j,v=h._.make,x=h._.wrap,a=h.is,b=h._.getSomeDefs,A=/^url\((['"]?)([^)]+)\1\)$/,T=h._.$,B=h.url,N=String,P=h._.separator,L="";h.deurl=function(j){var V=String(j).match(A);return V?V[2]:j},ae.on("snap.util.attr.mask",function(j){if(j instanceof F||j instanceof o){if(ae.stop(),j instanceof o&&1==j.node.childNodes.length&&(j=j.node.firstChild,b(this).appendChild(j),j=x(j)),"mask"==j.type)var V=j;else(V=v("mask",b(this))).node.appendChild(j.node);!V.node.id&&T(V.node,{id:V.id}),T(this.node,{mask:B(V.id)})}}),j=function(j){if(j instanceof F||j instanceof o){ae.stop();for(var V,W=j.node;W;){if("clipPath"===W.nodeName){V=new F(W);break}if("svg"===W.nodeName){V=void 0;break}W=W.parentNode}V||((V=v("clipPath",b(this))).node.appendChild(j.node),!V.node.id&&T(V.node,{id:V.id})),T(this.node,{"clip-path":B(V.node.id||V.id)})}},ae.on("snap.util.attr.clip",j),ae.on("snap.util.attr.clip-path",j),ae.on("snap.util.attr.clipPath",j),ae.on("snap.util.attr.fill",f("fill")),ae.on("snap.util.attr.stroke",f("stroke"));var Q=/^([lr])(?:\(([^)]*)\))?(.*)$/i;ae.on("snap.util.grad.parse",function(j){function V(pe,we){for(var Te=(we-te)/(pe-oe),Fe=oe;pe>Fe;Fe++)ee[Fe].offset=+(+te+Te*(Fe-oe)).toFixed(2);oe=pe,te=we}var W=(j=N(j)).match(Q);if(!W)return null;var R=W[1],Z=W[2],ee=W[3];1==(Z=Z.split(/\s*,\s*/).map(function(pe){return+pe==pe?+pe:pe})).length&&0==Z[0]&&(Z=[]);var le=(ee=(ee=ee.split("-")).map(function(pe){var we={color:(pe=pe.split(":"))[0]};return pe[1]&&(we.offset=parseFloat(pe[1])),we})).length,te=0,oe=0;le--;for(var ie=0;le>ie;ie++)"offset"in ee[ie]&&V(ie,ee[ie].offset);return ee[le].offset=ee[le].offset||100,V(le,ee[le].offset),{type:R,params:Z,stops:ee}}),ae.on("snap.util.attr.d",function(j){ae.stop(),a(j,"array")&&a(j[0],"array")&&(j=h.path.toString.call(j)),(j=N(j)).match(/[ruo]/i)&&(j=h.path.toAbsolute(j)),T(this.node,{d:j})})(-1),ae.on("snap.util.attr.#text",function(j){ae.stop(),j=N(j);for(var V=e.doc.createTextNode(j);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(V)})(-1),ae.on("snap.util.attr.path",function(j){ae.stop(),this.attr({d:j})})(-1),ae.on("snap.util.attr.class",function(j){ae.stop(),this.node.className.baseVal=j})(-1),ae.on("snap.util.attr.viewBox",function(j){var V;V=a(j,"object")&&"x"in j?[j.x,j.y,j.width,j.height].join(" "):a(j,"array")?j.join(" "):j,T(this.node,{viewBox:V}),ae.stop()})(-1),ae.on("snap.util.attr.transform",function(j){this.transform(j),ae.stop()})(-1),ae.on("snap.util.attr.r",function(j){"rect"==this.type&&(ae.stop(),T(this.node,{rx:j,ry:j}))})(-1),ae.on("snap.util.attr.textpath",function(j){if(ae.stop(),"text"==this.type){var V,W,R;if(!j&&this.textPath){for(W=this.textPath;W.node.firstChild;)this.node.appendChild(W.node.firstChild);return W.remove(),void delete this.textPath}if(a(j,"string")){var Z=b(this),ee=x(Z.parentNode).path(j);Z.appendChild(ee.node),V=ee.id,ee.attr({id:V})}else(j=x(j))instanceof F&&((V=j.attr("id"))||(V=j.id,j.attr({id:V})));if(V)if(W=this.textPath,R=this.node,W)W.attr({"xlink:href":"#"+V});else{for(W=T("textPath",{"xlink:href":"#"+V});R.firstChild;)W.appendChild(R.firstChild);R.appendChild(W),this.textPath=x(W)}}})(-1),ae.on("snap.util.attr.text",function(j){if("text"==this.type){for(var V=this.node,W=function(Z){var ee=T("tspan");if(a(Z,"array"))for(var le=0;le<Z.length;le++)ee.appendChild(W(Z[le]));else ee.appendChild(e.doc.createTextNode(Z));return ee.normalize&&ee.normalize(),ee};V.firstChild;)V.removeChild(V.firstChild);for(var R=W(j);R.firstChild;)V.appendChild(R.firstChild)}ae.stop()})(-1),ae.on("snap.util.attr.fontSize",l)(-1),ae.on("snap.util.attr.font-size",l)(-1),ae.on("snap.util.getattr.transform",function(){return ae.stop(),this.transform()})(-1),ae.on("snap.util.getattr.textpath",function(){return ae.stop(),this.textPath})(-1),function(){function j(W){return function(){ae.stop();var R=e.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+W);return"none"==R?R:h(e.doc.getElementById(R.match(A)[1]))}}function V(W){return function(R){ae.stop();var Z="marker"+W.charAt(0).toUpperCase()+W.substring(1);if(""!=R&&R){if("marker"==R.type){var ee=R.node.id;return ee||T(R.node,{id:R.id}),void(this.node.style[Z]=B(ee))}}else this.node.style[Z]="none"}}ae.on("snap.util.getattr.marker-end",j("end"))(-1),ae.on("snap.util.getattr.markerEnd",j("end"))(-1),ae.on("snap.util.getattr.marker-start",j("start"))(-1),ae.on("snap.util.getattr.markerStart",j("start"))(-1),ae.on("snap.util.getattr.marker-mid",j("mid"))(-1),ae.on("snap.util.getattr.markerMid",j("mid"))(-1),ae.on("snap.util.attr.marker-end",V("end"))(-1),ae.on("snap.util.attr.markerEnd",V("end"))(-1),ae.on("snap.util.attr.marker-start",V("start"))(-1),ae.on("snap.util.attr.markerStart",V("start"))(-1),ae.on("snap.util.attr.marker-mid",V("mid"))(-1),ae.on("snap.util.attr.markerMid",V("mid"))(-1)}(),ae.on("snap.util.getattr.r",function(){return"rect"==this.type&&T(this.node,"rx")==T(this.node,"ry")?(ae.stop(),T(this.node,"rx")):void 0})(-1),ae.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){ae.stop();var j=y(this.node);return 1==j.length?j[0]:j}})(-1),ae.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),ae.on("snap.util.getattr.fill",function(j){if(!j){ae.stop();var V=ae("snap.util.getattr.fill",this,!0).firstDefined();return h(h.deurl(V))||V}})(-1),ae.on("snap.util.getattr.stroke",function(j){if(!j){ae.stop();var V=ae("snap.util.getattr.stroke",this,!0).firstDefined();return h(h.deurl(V))||V}})(-1),ae.on("snap.util.getattr.viewBox",function(){ae.stop();var j=T(this.node,"viewBox");return j?(j=j.split(P),h._.box(+j[0],+j[1],+j[2],+j[3])):void 0})(-1),ae.on("snap.util.getattr.points",function(){var j=T(this.node,"points");return ae.stop(),j?j.split(P):void 0})(-1),ae.on("snap.util.getattr.path",function(){var j=T(this.node,"d");return ae.stop(),j})(-1),ae.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),ae.on("snap.util.getattr.fontSize",s)(-1),ae.on("snap.util.getattr.font-size",s)(-1)}),q.plugin(function(h,F,m,e,o){var f=/\S+/g,l=String,y=F.prototype;y.addClass=function(s){var v,a,b,A=l(s||"").match(f)||[],T=this.node,B=T.className.baseVal,N=B.match(f)||[];if(A.length){for(v=0;a=A[v++];)~N.indexOf(a)||N.push(a);B!=(b=N.join(" "))&&(T.className.baseVal=b)}return this},y.removeClass=function(s){var v,x,a,b,A=l(s||"").match(f)||[],T=this.node,B=T.className.baseVal,N=B.match(f)||[];if(N.length){for(v=0;a=A[v++];)~(x=N.indexOf(a))&&N.splice(x,1);B!=(b=N.join(" "))&&(T.className.baseVal=b)}return this},y.hasClass=function(s){return!!~(this.node.className.baseVal.match(f)||[]).indexOf(s)},y.toggleClass=function(s,v){if(null!=v)return v?this.addClass(s):this.removeClass(s);var x,a,b,A,T=(s||"").match(f)||[],B=this.node,N=B.className.baseVal,P=N.match(f)||[];for(x=0;b=T[x++];)~(a=P.indexOf(b))?P.splice(a,1):P.push(b);return N!=(A=P.join(" "))&&(B.className.baseVal=A),this}}),q.plugin(function(h,F,m,e,o){function f(a){return a}function l(a){return function(b){return+b.toFixed(3)+a}}var y={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"/":function(a,b){return a/b},"*":function(a,b){return a*b}},s=String,v=/[a-z]+$/i,x=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;ae.on("snap.util.attr",function(a){var b=s(a).match(x);if(b){var A=ae.nt(),T=A.substring(A.lastIndexOf(".")+1),B=this.attr(T),N={};ae.stop();var P=b[3]||"",L=B.match(v),Q=y[b[1]];if(L&&L==P?a=Q(parseFloat(B),+b[2]):(B=this.asPX(T),a=Q(this.asPX(T),this.asPX(T,b[2]+P))),isNaN(B)||isNaN(a))return;N[T]=a,this.attr(N)}})(-10),ae.on("snap.util.equal",function(a,b){var A=s(this.attr(a)||""),T=s(b).match(x);if(T){ae.stop();var B=T[3]||"",N=A.match(v),P=y[T[1]];return N&&N==B?{from:parseFloat(A),to:P(parseFloat(A),+T[2]),f:l(N)}:{from:A=this.asPX(a),to:P(A,this.asPX(a,T[2]+B)),f}}})(-10)}),q.plugin(function(h,F,m,e,o){var f=m.prototype,l=h.is;f.rect=function(s,v,x,a,b,A){var T;return null==A&&(A=b),l(s,"object")&&"[object Object]"==s?T=s:null!=s&&(T={x:s,y:v,width:x,height:a},null!=b&&(T.rx=b,T.ry=A)),this.el("rect",T)},f.circle=function(s,v,x){var a;return l(s,"object")&&"[object Object]"==s?a=s:null!=s&&(a={cx:s,cy:v,r:x}),this.el("circle",a)};var y=function(){function s(){this.parentNode.removeChild(this)}return function(v,x){var a=e.doc.createElement("img"),b=e.doc.body;a.style.cssText="position:absolute;left:-9999em;top:-9999em",a.onload=function(){x.call(a),a.onload=a.onerror=null,b.removeChild(a)},a.onerror=s,b.appendChild(a),a.src=v}}();f.image=function(s,v,x,a,b){var A=this.el("image");if(l(s,"object")&&"src"in s)A.attr(s);else if(null!=s){var T={"xlink:href":s,preserveAspectRatio:"none"};null!=v&&null!=x&&(T.x=v,T.y=x),null!=a&&null!=b?(T.width=a,T.height=b):y(s,function(){h._.$(A.node,{width:this.offsetWidth,height:this.offsetHeight})}),h._.$(A.node,T)}return A},f.ellipse=function(s,v,x,a){var b;return l(s,"object")&&"[object Object]"==s?b=s:null!=s&&(b={cx:s,cy:v,rx:x,ry:a}),this.el("ellipse",b)},f.path=function(s){var v;return l(s,"object")&&!l(s,"array")?v=s:s&&(v={d:s}),this.el("path",v)},f.group=f.g=function(s){var v=this.el("g");return 1==arguments.length&&s&&!s.type?v.attr(s):arguments.length&&v.add(Array.prototype.slice.call(arguments,0)),v},f.svg=function(s,v,x,a,b,A,T,B){var N={};return l(s,"object")&&null==v?N=s:(null!=s&&(N.x=s),null!=v&&(N.y=v),null!=x&&(N.width=x),null!=a&&(N.height=a),null!=b&&null!=A&&null!=T&&null!=B&&(N.viewBox=[b,A,T,B])),this.el("svg",N)},f.mask=function(s){var v=this.el("mask");return 1==arguments.length&&s&&!s.type?v.attr(s):arguments.length&&v.add(Array.prototype.slice.call(arguments,0)),v},f.ptrn=function(s,v,x,a,b,A,T,B){if(l(s,"object"))var N=s;else N={patternUnits:"userSpaceOnUse"},s&&(N.x=s),v&&(N.y=v),null!=x&&(N.width=x),null!=a&&(N.height=a),N.viewBox=null!=b&&null!=A&&null!=T&&null!=B?[b,A,T,B]:[s||0,v||0,x||0,a||0];return this.el("pattern",N)},f.use=function(s){return null!=s?(s instanceof F&&(s.attr("id")||s.attr({id:h._.id(s)}),s=s.attr("id")),"#"==String(s).charAt()&&(s=s.substring(1)),this.el("use",{"xlink:href":"#"+s})):F.prototype.use.call(this)},f.symbol=function(s,v,x,a){var b={};return null!=s&&null!=v&&null!=x&&null!=a&&(b.viewBox=[s,v,x,a]),this.el("symbol",b)},f.text=function(s,v,x){var a={};return l(s,"object")?a=s:null!=s&&(a={x:s,y:v,text:x||""}),this.el("text",a)},f.line=function(s,v,x,a){var b={};return l(s,"object")?b=s:null!=s&&(b={x1:s,x2:x,y1:v,y2:a}),this.el("line",b)},f.polyline=function(s){arguments.length>1&&(s=Array.prototype.slice.call(arguments,0));var v={};return l(s,"object")&&!l(s,"array")?v=s:null!=s&&(v={points:s}),this.el("polyline",v)},f.polygon=function(s){arguments.length>1&&(s=Array.prototype.slice.call(arguments,0));var v={};return l(s,"object")&&!l(s,"array")?v=s:null!=s&&(v={points:s}),this.el("polygon",v)},function(){function s(){return this.selectAll("stop")}function v(N,P){var L=B("stop"),Q={offset:+P+"%"};N=h.color(N),Q["stop-color"]=N.hex,N.opacity<1&&(Q["stop-opacity"]=N.opacity),B(L,Q);for(var j,V=this.stops(),W=0;W<V.length;W++){if(parseFloat(V[W].attr("offset"))>P){this.node.insertBefore(L,V[W].node),j=!0;break}}return j||this.node.appendChild(L),this}function x(){if("linearGradient"==this.type){var N=B(this.node,"x1")||0,P=B(this.node,"x2")||1,L=B(this.node,"y1")||0,Q=B(this.node,"y2")||0;return h._.box(N,L,math.abs(P-N),math.abs(Q-L))}var j=this.node.cx||.5,V=this.node.cy||.5,W=this.node.r||0;return h._.box(j-W,V-W,2*W,2*W)}function a(N){var P=N,L=this.stops();if("string"==typeof N&&(P=ae("snap.util.grad.parse",null,"l(0,0,0,1)"+N).firstDefined().stops),h.is(P,"array")){for(var Q=0;Q<L.length;Q++)if(P[Q]){var j=h.color(P[Q].color),V={offset:P[Q].offset+"%"};V["stop-color"]=j.hex,j.opacity<1&&(V["stop-opacity"]=j.opacity),L[Q].attr(V)}else L[Q].remove();for(Q=L.length;Q<P.length;Q++)this.addStop(P[Q].color,P[Q].offset);return this}}function A(N,P,L,Q,j){var V=h._.make("linearGradient",N);return V.stops=s,V.addStop=v,V.getBBox=x,V.setStops=a,null!=P&&B(V.node,{x1:P,y1:L,x2:Q,y2:j}),V}function T(N,P,L,Q,j,V){var W=h._.make("radialGradient",N);return W.stops=s,W.addStop=v,W.getBBox=x,null!=P&&B(W.node,{cx:P,cy:L,r:Q}),null!=j&&null!=V&&B(W.node,{fx:j,fy:V}),W}var B=h._.$;f.gradient=function(N){return function b(N,P){var L,Q=ae("snap.util.grad.parse",null,P).firstDefined();if(!Q)return null;Q.params.unshift(N),L="l"==Q.type.toLowerCase()?A.apply(0,Q.params):T.apply(0,Q.params),Q.type!=Q.type.toLowerCase()&&B(L.node,{gradientUnits:"userSpaceOnUse"});for(var j=Q.stops,V=j.length,W=0;V>W;W++){var R=j[W];L.addStop(R.color,R.offset)}return L}(this.defs,N)},f.gradientLinear=function(N,P,L,Q){return A(this.defs,N,P,L,Q)},f.gradientRadial=function(N,P,L,Q,j){return T(this.defs,N,P,L,Q,j)},f.toString=function(){var N,P=this.node.ownerDocument,L=P.createDocumentFragment(),Q=P.createElement("div"),j=this.node.cloneNode(!0);return L.appendChild(Q),Q.appendChild(j),h._.$(j,{xmlns:"http://www.w3.org/2000/svg"}),N=Q.innerHTML,L.removeChild(L.firstChild),N},f.toDataURL=function(){return J&&J.btoa?"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this))):void 0},f.clear=function(){for(var N,P=this.node.firstChild;P;)N=P.nextSibling,"defs"!=P.tagName?P.parentNode.removeChild(P):f.clear.call({node:P}),P=N}}()}),q.plugin(function(h,F,m,e){function o(Se){var Ie=o.ps=o.ps||{};return Ie[Se]?Ie[Se].sleep=100:Ie[Se]={sleep:100},setTimeout(function(){for(var Ne in Ie)Ie[Ze](Ne)&&Ne!=Se&&(Ie[Ne].sleep--,!Ie[Ne].sleep&&delete Ie[Ne])}),Ie[Se]}function f(Se,Ie,Ne,Y){return null==Se&&(Se=Ie=Ne=Y=0),null==Ie&&(Ie=Se.y,Ne=Se.width,Y=Se.height,Se=Se.x),{x:Se,y:Ie,width:Ne,w:Ne,height:Y,h:Y,x2:Se+Ne,y2:Ie+Y,cx:Se+Ne/2,cy:Ie+Y/2,r1:ne.min(Ne,Y)/2,r2:ne.max(Ne,Y)/2,r0:ne.sqrt(Ne*Ne+Y*Y)/2,path:Z(Se,Ie,Ne,Y),vb:[Se,Ie,Ne,Y].join(" ")}}function l(){return this.join(",").replace(H,"$1")}function y(Se){var Ie=Me(Se);return Ie.toString=l,Ie}function s(Se,Ie,Ne,Y,he,ve,me,_e,Ce){return null==Ce?B(Se,Ie,Ne,Y,he,ve,me,_e):x(Se,Ie,Ne,Y,he,ve,me,_e,function N(Se,Ie,Ne,Y,he,ve,me,_e,Ce){if(!(0>Ce||B(Se,Ie,Ne,Y,he,ve,me,_e)<Ce)){var Oe,Pe=1,Ge=Pe/2,$e=Pe-Ge,Xe=.01;for(Oe=B(Se,Ie,Ne,Y,he,ve,me,_e,$e);We(Oe-Ce)>Xe;)Oe=B(Se,Ie,Ne,Y,he,ve,me,_e,$e+=(Ce>Oe?1:-1)*(Ge/=2));return $e}}(Se,Ie,Ne,Y,he,ve,me,_e,Ce))}function v(Se,Ie){function Ne(Y){return+(+Y).toFixed(3)}return h._.cacher(function(Y,he,ve){Y instanceof F&&(Y=Y.attr("d"));for(var me,_e,Ce,Oe,Pe,Ge="",$e={},Xe=0,Ve=0,ct=(Y=Te(Y)).length;ct>Ve;Ve++){if("M"==(Ce=Y[Ve])[0])me=+Ce[1],_e=+Ce[2];else{if(Xe+(Oe=s(me,_e,Ce[1],Ce[2],Ce[3],Ce[4],Ce[5],Ce[6]))>he){if(Ie&&!$e.start){if(Ge+=["C"+Ne((Pe=s(me,_e,Ce[1],Ce[2],Ce[3],Ce[4],Ce[5],Ce[6],he-Xe)).start.x),Ne(Pe.start.y),Ne(Pe.m.x),Ne(Pe.m.y),Ne(Pe.x),Ne(Pe.y)],ve)return Ge;$e.start=Ge,Ge=["M"+Ne(Pe.x),Ne(Pe.y)+"C"+Ne(Pe.n.x),Ne(Pe.n.y),Ne(Pe.end.x),Ne(Pe.end.y),Ne(Ce[5]),Ne(Ce[6])].join(),Xe+=Oe,me=+Ce[5],_e=+Ce[6];continue}if(!Se&&!Ie)return s(me,_e,Ce[1],Ce[2],Ce[3],Ce[4],Ce[5],Ce[6],he-Xe)}Xe+=Oe,me=+Ce[5],_e=+Ce[6]}Ge+=Ce.shift()+Ce}return $e.end=Ge,Se?Xe:Ie?$e:x(me,_e,Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5],1)},null,h._.clone)}function x(Se,Ie,Ne,Y,he,ve,me,_e,Ce){var Oe=1-Ce,Pe=He(Oe,3),Ge=He(Oe,2),$e=Ce*Ce,Xe=$e*Ce,dt=Se+2*Ce*(Ne-Se)+$e*(he-2*Ne+Se),ht=Ie+2*Ce*(Y-Ie)+$e*(ve-2*Y+Ie),Ct=Ne+2*Ce*(he-Ne)+$e*(me-2*he+Ne),kt=Y+2*Ce*(ve-Y)+$e*(_e-2*ve+Y);return{x:Pe*Se+3*Ge*Ce*Ne+3*Oe*Ce*Ce*he+Xe*me,y:Pe*Ie+3*Ge*Ce*Y+3*Oe*Ce*Ce*ve+Xe*_e,m:{x:dt,y:ht},n:{x:Ct,y:kt},start:{x:Oe*Se+Ce*Ne,y:Oe*Ie+Ce*Y},end:{x:Oe*he+Ce*me,y:Oe*ve+Ce*_e},alpha:90-180*ne.atan2(dt-Ct,ht-kt)/ge}}function a(Se,Ie,Ne,Y,he,ve,me,_e){h.is(Se,"array")||(Se=[Se,Ie,Ne,Y,he,ve,me,_e]);var Ce=we.apply(null,Se);return f(Ce.min.x,Ce.min.y,Ce.max.x-Ce.min.x,Ce.max.y-Ce.min.y)}function b(Se,Ie,Ne){return Ie>=Se.x&&Ie<=Se.x+Se.width&&Ne>=Se.y&&Ne<=Se.y+Se.height}function A(Se,Ie){return Se=f(Se),b(Ie=f(Ie),Se.x,Se.y)||b(Ie,Se.x2,Se.y)||b(Ie,Se.x,Se.y2)||b(Ie,Se.x2,Se.y2)||b(Se,Ie.x,Ie.y)||b(Se,Ie.x2,Ie.y)||b(Se,Ie.x,Ie.y2)||b(Se,Ie.x2,Ie.y2)||(Se.x<Ie.x2&&Se.x>Ie.x||Ie.x<Se.x2&&Ie.x>Se.x)&&(Se.y<Ie.y2&&Se.y>Ie.y||Ie.y<Se.y2&&Ie.y>Se.y)}function T(Se,Ie,Ne,Y,he){return Se*(Se*(-3*Ie+9*Ne-9*Y+3*he)+6*Ie-12*Ne+6*Y)-3*Ie+3*Ne}function B(Se,Ie,Ne,Y,he,ve,me,_e,Ce){null==Ce&&(Ce=1);for(var Oe=(Ce=Ce>1?1:0>Ce?0:Ce)/2,Ge=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],$e=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Xe=0,Ve=0;12>Ve;Ve++){var ct=Oe*Ge[Ve]+Oe,dt=T(ct,Se,Ne,he,me),ht=T(ct,Ie,Y,ve,_e),Ct=dt*dt+ht*ht;Xe+=$e[Ve]*ne.sqrt(Ct)}return Oe*Xe}function P(Se,Ie,Ne,Y,he,ve,me,_e){if(!(Re(Se,Ne)<xe(he,me)||xe(Se,Ne)>Re(he,me)||Re(Ie,Y)<xe(ve,_e)||xe(Ie,Y)>Re(ve,_e))){var Pe=(Se-Ne)*(ve-_e)-(Ie-Y)*(he-me);if(Pe){var Ge=((Se*Y-Ie*Ne)*(he-me)-(Se-Ne)*(he*_e-ve*me))/Pe,$e=((Se*Y-Ie*Ne)*(ve-_e)-(Ie-Y)*(he*_e-ve*me))/Pe,Xe=+Ge.toFixed(2),Ve=+$e.toFixed(2);if(!(Xe<+xe(Se,Ne).toFixed(2)||Xe>+Re(Se,Ne).toFixed(2)||Xe<+xe(he,me).toFixed(2)||Xe>+Re(he,me).toFixed(2)||Ve<+xe(Ie,Y).toFixed(2)||Ve>+Re(Ie,Y).toFixed(2)||Ve<+xe(ve,_e).toFixed(2)||Ve>+Re(ve,_e).toFixed(2)))return{x:Ge,y:$e}}}}function L(Se,Ie,Ne){if(!A(a(Se),a(Ie)))return Ne?0:[];for(var _e=~~(B.apply(0,Se)/8),Ce=~~(B.apply(0,Ie)/8),Oe=[],Pe=[],Ge={},$e=Ne?0:[],Xe=0;_e+1>Xe;Xe++){var Ve=x.apply(0,Se.concat(Xe/_e));Oe.push({x:Ve.x,y:Ve.y,t:Xe/_e})}for(Xe=0;Ce+1>Xe;Xe++)Ve=x.apply(0,Ie.concat(Xe/Ce)),Pe.push({x:Ve.x,y:Ve.y,t:Xe/Ce});for(Xe=0;_e>Xe;Xe++)for(var ct=0;Ce>ct;ct++){var dt=Oe[Xe],ht=Oe[Xe+1],Ct=Pe[ct],kt=Pe[ct+1],vt=We(ht.x-dt.x)<.001?"y":"x",it=We(kt.x-Ct.x)<.001?"y":"x",Lt=P(dt.x,dt.y,ht.x,ht.y,Ct.x,Ct.y,kt.x,kt.y);if(Lt){if(Ge[Lt.x.toFixed(4)]==Lt.y.toFixed(4))continue;Ge[Lt.x.toFixed(4)]=Lt.y.toFixed(4);var Ot=dt.t+We((Lt[vt]-dt[vt])/(ht[vt]-dt[vt]))*(ht.t-dt.t),At=Ct.t+We((Lt[it]-Ct[it])/(kt[it]-Ct[it]))*(kt.t-Ct.t);Ot>=0&&1>=Ot&&At>=0&&1>=At&&(Ne?$e++:$e.push({x:Lt.x,y:Lt.y,t1:Ot,t2:At}))}}return $e}function V(Se,Ie,Ne){Se=Te(Se),Ie=Te(Ie);for(var Y,he,ve,me,_e,Ce,Oe,Pe,Ge,$e,Xe=Ne?0:[],Ve=0,ct=Se.length;ct>Ve;Ve++){var dt=Se[Ve];if("M"==dt[0])Y=_e=dt[1],he=Ce=dt[2];else{"C"==dt[0]?(Ge=[Y,he].concat(dt.slice(1)),Y=Ge[6],he=Ge[7]):(Ge=[Y,he,Y,he,_e,Ce,_e,Ce],Y=_e,he=Ce);for(var ht=0,Ct=Ie.length;Ct>ht;ht++){var kt=Ie[ht];if("M"==kt[0])ve=Oe=kt[1],me=Pe=kt[2];else{"C"==kt[0]?($e=[ve,me].concat(kt.slice(1)),ve=$e[6],me=$e[7]):($e=[ve,me,ve,me,Oe,Pe,Oe,Pe],ve=Oe,me=Pe);var vt=L(Ge,$e,Ne);if(Ne)Xe+=vt;else{for(var it=0,Lt=vt.length;Lt>it;it++)vt[it].segment1=Ve,vt[it].segment2=ht,vt[it].bez1=Ge,vt[it].bez2=$e;Xe=Xe.concat(vt)}}}}}return Xe}function R(Se){var Ie=o(Se);if(Ie.bbox)return Me(Ie.bbox);if(!Se)return f();for(var Ne,Y=0,he=0,ve=[],me=[],_e=0,Ce=(Se=Te(Se)).length;Ce>_e;_e++)if("M"==(Ne=Se[_e])[0])Y=Ne[1],he=Ne[2],ve.push(Y),me.push(he);else{var Oe=we(Y,he,Ne[1],Ne[2],Ne[3],Ne[4],Ne[5],Ne[6]);ve=ve.concat(Oe.min.x,Oe.max.x),me=me.concat(Oe.min.y,Oe.max.y),Y=Ne[5],he=Ne[6]}var Pe=xe.apply(0,ve),Ge=xe.apply(0,me),Ve=f(Pe,Ge,Re.apply(0,ve)-Pe,Re.apply(0,me)-Ge);return Ie.bbox=Me(Ve),Ve}function Z(Se,Ie,Ne,Y,he){if(he)return[["M",+Se+ +he,Ie],["l",Ne-2*he,0],["a",he,he,0,0,1,he,he],["l",0,Y-2*he],["a",he,he,0,0,1,-he,he],["l",2*he-Ne,0],["a",he,he,0,0,1,-he,-he],["l",0,2*he-Y],["a",he,he,0,0,1,he,-he],["z"]];var ve=[["M",Se,Ie],["l",Ne,0],["l",0,Y],["l",-Ne,0],["z"]];return ve.toString=l,ve}function ee(Se,Ie,Ne,Y,he){if(null==he&&null==Y&&(Y=Ne),Se=+Se,Ie=+Ie,Ne=+Ne,Y=+Y,null!=he)var ve=Math.PI/180,me=Se+Ne*Math.cos(-Y*ve),_e=Se+Ne*Math.cos(-he*ve),Pe=[["M",me,Ie+Ne*Math.sin(-Y*ve)],["A",Ne,Ne,0,+(he-Y>180),0,_e,Ie+Ne*Math.sin(-he*ve)]];else Pe=[["M",Se,Ie],["m",0,-Y],["a",Ne,Y,0,1,1,0,2*Y],["a",Ne,Y,0,1,1,0,-2*Y],["z"]];return Pe.toString=l,Pe}function te(Se){var Ie=o(Se);if(Ie.abs)return y(Ie.abs);if(Le(Se,"array")&&Le(Se&&Se[0],"array")||(Se=h.parsePathString(Se)),!Se||!Se.length)return[["M",0,0]];var Ne,Y=[],he=0,ve=0,me=0,_e=0,Ce=0;"M"==Se[0][0]&&(me=he=+Se[0][1],_e=ve=+Se[0][2],Ce++,Y[0]=["M",he,ve]);for(var Oe,Pe,Ge=3==Se.length&&"M"==Se[0][0]&&"R"==Se[1][0].toUpperCase()&&"Z"==Se[2][0].toUpperCase(),$e=Ce,Xe=Se.length;Xe>$e;$e++){if(Y.push(Oe=[]),(Ne=(Pe=Se[$e])[0])!=Ne.toUpperCase())switch(Oe[0]=Ne.toUpperCase(),Oe[0]){case"A":Oe[1]=Pe[1],Oe[2]=Pe[2],Oe[3]=Pe[3],Oe[4]=Pe[4],Oe[5]=Pe[5],Oe[6]=+Pe[6]+he,Oe[7]=+Pe[7]+ve;break;case"V":Oe[1]=+Pe[1]+ve;break;case"H":Oe[1]=+Pe[1]+he;break;case"R":for(var Ve=[he,ve].concat(Pe.slice(1)),ct=2,dt=Ve.length;dt>ct;ct++)Ve[ct]=+Ve[ct]+he,Ve[++ct]=+Ve[ct]+ve;Y.pop(),Y=Y.concat(ke(Ve,Ge));break;case"O":Y.pop(),(Ve=ee(he,ve,Pe[1],Pe[2])).push(Ve[0]),Y=Y.concat(Ve);break;case"U":Y.pop(),Y=Y.concat(ee(he,ve,Pe[1],Pe[2],Pe[3])),Oe=["U"].concat(Y[Y.length-1].slice(-2));break;case"M":me=+Pe[1]+he,_e=+Pe[2]+ve;default:for(ct=1,dt=Pe.length;dt>ct;ct++)Oe[ct]=+Pe[ct]+(ct%2?he:ve)}else if("R"==Ne)Ve=[he,ve].concat(Pe.slice(1)),Y.pop(),Y=Y.concat(ke(Ve,Ge)),Oe=["R"].concat(Pe.slice(-2));else if("O"==Ne)Y.pop(),(Ve=ee(he,ve,Pe[1],Pe[2])).push(Ve[0]),Y=Y.concat(Ve);else if("U"==Ne)Y.pop(),Y=Y.concat(ee(he,ve,Pe[1],Pe[2],Pe[3])),Oe=["U"].concat(Y[Y.length-1].slice(-2));else for(var ht=0,Ct=Pe.length;Ct>ht;ht++)Oe[ht]=Pe[ht];if("O"!=(Ne=Ne.toUpperCase()))switch(Oe[0]){case"Z":he=+me,ve=+_e;break;case"H":he=Oe[1];break;case"V":ve=Oe[1];break;case"M":me=Oe[Oe.length-2],_e=Oe[Oe.length-1];default:he=Oe[Oe.length-2],ve=Oe[Oe.length-1]}}return Y.toString=l,Ie.abs=y(Y),Y}function oe(Se,Ie,Ne,Y){return[Se,Ie,Ne,Y,Ne,Y]}function ie(Se,Ie,Ne,Y,he,ve){var me=.3333333333333333,_e=2/3;return[me*Se+_e*Ne,me*Ie+_e*Y,me*he+_e*Ne,me*ve+_e*Y,he,ve]}function pe(Se,Ie,Ne,Y,he,ve,me,_e,Ce,Oe){var Pe,Ge=120*ge/180,$e=ge/180*(+he||0),Xe=[],Ve=h._.cacher(function(zr,xo,Tr){return{x:zr*ne.cos(Tr)-xo*ne.sin(Tr),y:zr*ne.sin(Tr)+xo*ne.cos(Tr)}});if(!Ne||!Y)return[Se,Ie,_e,Ce,_e,Ce];if(Oe)Ot=Oe[0],At=Oe[1],it=Oe[2],Lt=Oe[3];else{Se=(Pe=Ve(Se,Ie,-$e)).x,Ie=Pe.y,_e=(Pe=Ve(_e,Ce,-$e)).x,Ce=Pe.y;var ct=(ne.cos(ge/180*he),ne.sin(ge/180*he),(Se-_e)/2),dt=(Ie-Ce)/2,ht=ct*ct/(Ne*Ne)+dt*dt/(Y*Y);ht>1&&(Ne*=ht=ne.sqrt(ht),Y*=ht);var Ct=Ne*Ne,kt=Y*Y,vt=(ve==me?-1:1)*ne.sqrt(We((Ct*kt-Ct*dt*dt-kt*ct*ct)/(Ct*dt*dt+kt*ct*ct))),it=vt*Ne*dt/Y+(Se+_e)/2,Lt=vt*-Y*ct/Ne+(Ie+Ce)/2,Ot=ne.asin(((Ie-Lt)/Y).toFixed(9)),At=ne.asin(((Ce-Lt)/Y).toFixed(9));0>(Ot=it>Se?ge-Ot:Ot)&&(Ot=2*ge+Ot),0>(At=it>_e?ge-At:At)&&(At=2*ge+At),me&&Ot>At&&(Ot-=2*ge),!me&&At>Ot&&(At-=2*ge)}var Nn=At-Ot;if(We(Nn)>Ge){var Oi=At,ls=_e,Ri=Ce;At=Ot+Ge*(me&&At>Ot?1:-1),Xe=pe(_e=it+Ne*ne.cos(At),Ce=Lt+Y*ne.sin(At),Ne,Y,he,0,me,ls,Ri,[At,Oi,it,Lt])}Nn=At-Ot;var us=ne.cos(Ot),Di=ne.sin(Ot),fs=ne.cos(At),Hr=ne.sin(At),ai=ne.tan(Nn/4),rn=4/3*Ne*ai,cn=4/3*Y*ai,mo=[Se,Ie],Wr=[Se+rn*Di,Ie-cn*us],nn=[_e+rn*Hr,Ce-cn*fs],ji=[_e,Ce];if(Wr[0]=2*mo[0]-Wr[0],Wr[1]=2*mo[1]-Wr[1],Oe)return[Wr,nn,ji].concat(Xe);for(var bo=[],Er=0,Mi=(Xe=[Wr,nn,ji].concat(Xe).join().split(",")).length;Mi>Er;Er++)bo[Er]=Er%2?Ve(Xe[Er-1],Xe[Er],$e).y:Ve(Xe[Er],Xe[Er+1],$e).x;return bo}function we(Se,Ie,Ne,Y,he,ve,me,_e){for(var Ce,Oe,Pe,Ge,$e,Xe,Ve,ct,dt=[],ht=[[],[]],Ct=0;2>Ct;++Ct)if(0==Ct?(Oe=6*Se-12*Ne+6*he,Ce=-3*Se+9*Ne-9*he+3*me,Pe=3*Ne-3*Se):(Oe=6*Ie-12*Y+6*ve,Ce=-3*Ie+9*Y-9*ve+3*_e,Pe=3*Y-3*Ie),We(Ce)<1e-12){if(We(Oe)<1e-12)continue;(Ge=-Pe/Oe)>0&&1>Ge&&dt.push(Ge)}else Ve=Oe*Oe-4*Pe*Ce,ct=ne.sqrt(Ve),0>Ve||(($e=(-Oe+ct)/(2*Ce))>0&&1>$e&&dt.push($e),(Xe=(-Oe-ct)/(2*Ce))>0&&1>Xe&&dt.push(Xe));for(var kt,vt=dt.length,it=vt;vt--;)kt=1-(Ge=dt[vt]),ht[0][vt]=kt*kt*kt*Se+3*kt*kt*Ge*Ne+3*kt*Ge*Ge*he+Ge*Ge*Ge*me,ht[1][vt]=kt*kt*kt*Ie+3*kt*kt*Ge*Y+3*kt*Ge*Ge*ve+Ge*Ge*Ge*_e;return ht[0][it]=Se,ht[1][it]=Ie,ht[0][it+1]=me,ht[1][it+1]=_e,ht[0].length=ht[1].length=it+2,{min:{x:xe.apply(0,ht[0]),y:xe.apply(0,ht[1])},max:{x:Re.apply(0,ht[0]),y:Re.apply(0,ht[1])}}}function Te(Se,Ie){var Ne=!Ie&&o(Se);if(!Ie&&Ne.curve)return y(Ne.curve);for(var Y=te(Se),he=Ie&&te(Ie),ve={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},me={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},_e=function(vt,it,Lt){var Ot,At;if(!vt)return["C",it.x,it.y,it.x,it.y,it.x,it.y];switch(!(vt[0]in{T:1,Q:1})&&(it.qx=it.qy=null),vt[0]){case"M":it.X=vt[1],it.Y=vt[2];break;case"A":vt=["C"].concat(pe.apply(0,[it.x,it.y].concat(vt.slice(1))));break;case"S":"C"==Lt||"S"==Lt?(Ot=2*it.x-it.bx,At=2*it.y-it.by):(Ot=it.x,At=it.y),vt=["C",Ot,At].concat(vt.slice(1));break;case"T":"Q"==Lt||"T"==Lt?(it.qx=2*it.x-it.qx,it.qy=2*it.y-it.qy):(it.qx=it.x,it.qy=it.y),vt=["C"].concat(ie(it.x,it.y,it.qx,it.qy,vt[1],vt[2]));break;case"Q":it.qx=vt[1],it.qy=vt[2],vt=["C"].concat(ie(it.x,it.y,vt[1],vt[2],vt[3],vt[4]));break;case"L":vt=["C"].concat(oe(it.x,it.y,vt[1],vt[2]));break;case"H":vt=["C"].concat(oe(it.x,it.y,vt[1],it.y));break;case"V":vt=["C"].concat(oe(it.x,it.y,it.x,vt[1]));break;case"Z":vt=["C"].concat(oe(it.x,it.y,it.X,it.Y))}return vt},Ce=function(vt,it){if(vt[it].length>7){vt[it].shift();for(var Lt=vt[it];Lt.length;)Pe[it]="A",he&&(Ge[it]="A"),vt.splice(it++,0,["C"].concat(Lt.splice(0,6)));vt.splice(it,1),ct=Re(Y.length,he&&he.length||0)}},Oe=function(vt,it,Lt,Ot,At){vt&&it&&"M"==vt[At][0]&&"M"!=it[At][0]&&(it.splice(At,0,["M",Ot.x,Ot.y]),Lt.bx=0,Lt.by=0,Lt.x=vt[At][1],Lt.y=vt[At][2],ct=Re(Y.length,he&&he.length||0))},Pe=[],Ge=[],$e="",Xe="",Ve=0,ct=Re(Y.length,he&&he.length||0);ct>Ve;Ve++){Y[Ve]&&($e=Y[Ve][0]),"C"!=$e&&(Pe[Ve]=$e,Ve&&(Xe=Pe[Ve-1])),Y[Ve]=_e(Y[Ve],ve,Xe),"A"!=Pe[Ve]&&"C"==$e&&(Pe[Ve]="C"),Ce(Y,Ve),he&&(he[Ve]&&($e=he[Ve][0]),"C"!=$e&&(Ge[Ve]=$e,Ve&&(Xe=Ge[Ve-1])),he[Ve]=_e(he[Ve],me,Xe),"A"!=Ge[Ve]&&"C"==$e&&(Ge[Ve]="C"),Ce(he,Ve)),Oe(Y,he,ve,me,Ve),Oe(he,Y,me,ve,Ve);var dt=Y[Ve],ht=he&&he[Ve],Ct=dt.length,kt=he&&ht.length;ve.x=dt[Ct-2],ve.y=dt[Ct-1],ve.bx=z(dt[Ct-4])||ve.x,ve.by=z(dt[Ct-3])||ve.y,me.bx=he&&(z(ht[kt-4])||me.x),me.by=he&&(z(ht[kt-3])||me.y),me.x=he&&ht[kt-2],me.y=he&&ht[kt-1]}return he||(Ne.curve=y(Y)),he?[Y,he]:Y}function ke(Se,Ie){for(var Ne=[],Y=0,he=Se.length;he-2*!Ie>Y;Y+=2){var ve=[{x:+Se[Y-2],y:+Se[Y-1]},{x:+Se[Y],y:+Se[Y+1]},{x:+Se[Y+2],y:+Se[Y+3]},{x:+Se[Y+4],y:+Se[Y+5]}];Ie?Y?he-4==Y?ve[3]={x:+Se[0],y:+Se[1]}:he-2==Y&&(ve[2]={x:+Se[0],y:+Se[1]},ve[3]={x:+Se[2],y:+Se[3]}):ve[0]={x:+Se[he-2],y:+Se[he-1]}:he-4==Y?ve[3]=ve[2]:Y||(ve[0]={x:+Se[Y],y:+Se[Y+1]}),Ne.push(["C",(-ve[0].x+6*ve[1].x+ve[2].x)/6,(-ve[0].y+6*ve[1].y+ve[2].y)/6,(ve[1].x+6*ve[2].x-ve[3].x)/6,(ve[1].y+6*ve[2].y-ve[3].y)/6,ve[2].x,ve[2].y])}return Ne}var de=F.prototype,Le=h.is,Me=h._.clone,Ze="hasOwnProperty",H=/,?([a-z]),?/gi,z=parseFloat,ne=Math,ge=ne.PI,xe=ne.min,Re=ne.max,He=ne.pow,We=ne.abs,Ke=v(1),mt=v(),yt=v(0,1),Mt=h._unit2px,Yt={path:function(Se){return Se.attr("path")},circle:function(Se){var Ie=Mt(Se);return ee(Ie.cx,Ie.cy,Ie.r)},ellipse:function(Se){var Ie=Mt(Se);return ee(Ie.cx||0,Ie.cy||0,Ie.rx,Ie.ry)},rect:function(Se){var Ie=Mt(Se);return Z(Ie.x||0,Ie.y||0,Ie.width,Ie.height,Ie.rx,Ie.ry)},image:function(Se){var Ie=Mt(Se);return Z(Ie.x||0,Ie.y||0,Ie.width,Ie.height)},line:function(Se){return"M"+[Se.attr("x1")||0,Se.attr("y1")||0,Se.attr("x2"),Se.attr("y2")]},polyline:function(Se){return"M"+Se.attr("points")},polygon:function(Se){return"M"+Se.attr("points")+"z"},deflt:function(Se){var Ie=Se.node.getBBox();return Z(Ie.x,Ie.y,Ie.width,Ie.height)}};h.path=o,h.path.getTotalLength=Ke,h.path.getPointAtLength=mt,h.path.getSubpath=function(Se,Ie,Ne){if(this.getTotalLength(Se)-Ne<1e-6)return yt(Se,Ie).end;var Y=yt(Se,Ne,1);return Ie?yt(Y,Ie).end:Y},de.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},de.getPointAtLength=function(Se){return mt(this.attr("d"),Se)},de.getSubpath=function(Se,Ie){return h.path.getSubpath(this.attr("d"),Se,Ie)},h._.box=f,h.path.findDotsAtSegment=x,h.path.bezierBBox=a,h.path.isPointInsideBBox=b,h.closest=function(Se,Ie,Ne,Y){for(var he=100,ve=f(Se-he/2,Ie-he/2,he,he),me=[],_e=Ne[0].hasOwnProperty("x")?function(ct){return{x:Ne[ct].x,y:Ne[ct].y}}:function(ct){return{x:Ne[ct],y:Y[ct]}},Ce=0;1e6>=he&&!Ce;){for(var Oe=0,Pe=Ne.length;Pe>Oe;Oe++){var Ge=_e(Oe);if(b(ve,Ge.x,Ge.y)){Ce++,me.push(Ge);break}}Ce||(ve=f(Se-(he*=2)/2,Ie-he/2,he,he))}if(1e6!=he){var $e,Xe=1/0;for(Oe=0,Pe=me.length;Pe>Oe;Oe++){var Ve=h.len(Se,Ie,me[Oe].x,me[Oe].y);Xe>Ve&&(Xe=Ve,me[Oe].len=Ve,$e=me[Oe])}return $e}},h.path.isBBoxIntersect=A,h.path.intersection=function Q(Se,Ie){return V(Se,Ie)},h.path.intersectionNumber=function j(Se,Ie){return V(Se,Ie,1)},h.path.isPointInside=function W(Se,Ie,Ne){var Y=R(Se);return b(Y,Ie,Ne)&&V(Se,[["M",Ie,Ne],["H",Y.x2+10]],1)%2==1},h.path.getBBox=R,h.path.get=Yt,h.path.toRelative=function le(Se){var Ie=o(Se),Ne=String.prototype.toLowerCase;if(Ie.rel)return y(Ie.rel);h.is(Se,"array")&&h.is(Se&&Se[0],"array")||(Se=h.parsePathString(Se));var Y=[],he=0,ve=0,me=0,_e=0,Ce=0;"M"==Se[0][0]&&(me=he=Se[0][1],_e=ve=Se[0][2],Ce++,Y.push(["M",he,ve]));for(var Oe=Ce,Pe=Se.length;Pe>Oe;Oe++){var Ge=Y[Oe]=[],$e=Se[Oe];if($e[0]!=Ne.call($e[0]))switch(Ge[0]=Ne.call($e[0]),Ge[0]){case"a":Ge[1]=$e[1],Ge[2]=$e[2],Ge[3]=$e[3],Ge[4]=$e[4],Ge[5]=$e[5],Ge[6]=+($e[6]-he).toFixed(3),Ge[7]=+($e[7]-ve).toFixed(3);break;case"v":Ge[1]=+($e[1]-ve).toFixed(3);break;case"m":me=$e[1],_e=$e[2];default:for(var Xe=1,Ve=$e.length;Ve>Xe;Xe++)Ge[Xe]=+($e[Xe]-(Xe%2?he:ve)).toFixed(3)}else{Ge=Y[Oe]=[],"m"==$e[0]&&(me=$e[1]+he,_e=$e[2]+ve);for(var ct=0,dt=$e.length;dt>ct;ct++)Y[Oe][ct]=$e[ct]}var ht=Y[Oe].length;switch(Y[Oe][0]){case"z":he=me,ve=_e;break;case"h":he+=+Y[Oe][ht-1];break;case"v":ve+=+Y[Oe][ht-1];break;default:he+=+Y[Oe][ht-2],ve+=+Y[Oe][ht-1]}}return Y.toString=l,Ie.rel=y(Y),Y},h.path.toAbsolute=te,h.path.toCubic=Te,h.path.map=function Fe(Se,Ie){if(!Ie)return Se;var Ne,Y,he,ve,me,_e,Ce;for(he=0,me=(Se=Te(Se)).length;me>he;he++)for(ve=1,_e=(Ce=Se[he]).length;_e>ve;ve+=2)Ne=Ie.x(Ce[ve],Ce[ve+1]),Y=Ie.y(Ce[ve],Ce[ve+1]),Ce[ve]=Ne,Ce[ve+1]=Y;return Se},h.path.toString=l,h.path.clone=y}),q.plugin(function(h,F,m,e){var o=Math.max,f=Math.min,l=function(s){if(this.items=[],this.bindings={},this.length=0,this.type="set",s)for(var v=0,x=s.length;x>v;v++)s[v]&&(this[this.items.length]=this.items[this.items.length]=s[v],this.length++)},y=l.prototype;y.push=function(){for(var s,v,x=0,a=arguments.length;a>x;x++)(s=arguments[x])&&(this[v=this.items.length]=this.items[v]=s,this.length++);return this},y.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},y.forEach=function(s,v){for(var x=0,a=this.items.length;a>x;x++)if(!1===s.call(v,this.items[x],x))return this;return this},y.animate=function(s,v,x,a){"function"!=typeof x||x.length||(a=x,x=ce.linear),s instanceof h._.Animation&&(a=s.callback,x=s.easing,v=x.dur,s=s.attr);var b=arguments;if(h.is(s,"array")&&h.is(b[b.length-1],"array"))var A=!0;var T,B=function(){T?this.b=T:T=this.b},N=0,P=this,L=a&&function(){++N==P.length&&a.call(this)};return this.forEach(function(Q,j){ae.once("snap.animcreated."+Q.id,B),A?b[j]&&Q.animate.apply(Q,b[j]):Q.animate(s,v,x,L)})},y.remove=function(){for(;this.length;)this.pop().remove();return this},y.bind=function(s,v,x){var a={};if("function"==typeof v)this.bindings[s]=v;else{var b=x||s;this.bindings[s]=function(A){a[b]=A,v.attr(a)}}return this},y.attr=function(s){var v={};for(var x in s)this.bindings[x]?this.bindings[x](s[x]):v[x]=s[x];for(var a=0,b=this.items.length;b>a;a++)this.items[a].attr(v);return this},y.clear=function(){for(;this.length;)this.pop()},y.splice=function(s,v,x){s=0>s?o(this.length+s,0):s,v=o(0,f(this.length-s,v));var a,b=[],A=[],T=[];for(a=2;a<arguments.length;a++)T.push(arguments[a]);for(a=0;v>a;a++)A.push(this[s+a]);for(;a<this.length-s;a++)b.push(this[s+a]);var B=T.length;for(a=0;a<B+b.length;a++)this.items[s+a]=this[s+a]=B>a?T[a]:b[a-B];for(a=this.items.length=this.length-=v-B;this[a];)delete this[a++];return new l(A)},y.exclude=function(s){for(var v=0,x=this.length;x>v;v++)if(this[v]==s)return this.splice(v,1),!0;return!1},y.insertAfter=function(s){for(var v=this.items.length;v--;)this.items[v].insertAfter(s);return this},y.getBBox=function(){for(var s=[],v=[],x=[],a=[],b=this.items.length;b--;)if(!this.items[b].removed){var A=this.items[b].getBBox();s.push(A.x),v.push(A.y),x.push(A.x+A.width),a.push(A.y+A.height)}return{x:s=f.apply(0,s),y:v=f.apply(0,v),x2:x=o.apply(0,x),y2:a=o.apply(0,a),width:x-s,height:a-v,cx:s+(x-s)/2,cy:v+(a-v)/2}},y.clone=function(s){s=new l;for(var v=0,x=this.items.length;x>v;v++)s.push(this.items[v].clone());return s},y.toString=function(){return"Snap\u2018s set"},y.type="set",h.Set=l,h.set=function(){var s=new l;return arguments.length&&s.push.apply(s,Array.prototype.slice.call(arguments,0)),s}}),q.plugin(function(h,F,m,e){function o(P){var L=P[0];switch(L.toLowerCase()){case"t":return[L,0,0];case"m":return[L,1,0,0,1,0,0];case"r":return 4==P.length?[L,0,P[2],P[3]]:[L,0];case"s":return 5==P.length?[L,1,1,P[3],P[4]]:3==P.length?[L,1,1]:[L,1]}}function l(P){return P}function y(P){return function(L){return+L.toFixed(3)+P}}function s(P){return P.join(" ")}function v(P){return h.rgb(P[0],P[1],P[2],P[3])}function x(P){var L,Q,j,V,W,R,Z=0,ee=[];for(L=0,Q=P.length;Q>L;L++){for(W="[",R=['"'+P[L][0]+'"'],j=1,V=P[L].length;V>j;j++)R[j]="val["+Z+++"]";W+=R+"]",ee[L]=W}return Function("val","return Snap.path.toString.call(["+ee+"])")}function a(P){for(var L=[],Q=0,j=P.length;j>Q;Q++)for(var V=1,W=P[Q].length;W>V;V++)L.push(P[Q][V]);return L}function b(P){return isFinite(P)}var T={},B=/[%a-z]+$/i,N=String;T.stroke=T.fill="colour",F.prototype.equal=function(P,L){return ae("snap.util.equal",this,P,L).firstDefined()},ae.on("snap.util.equal",function(P,L){var Q,j,V=N(this.attr(P)||""),W=this;if("colour"==T[P])return Q=h.color(V),j=h.color(L),{from:[Q.r,Q.g,Q.b,Q.opacity],to:[j.r,j.g,j.b,j.opacity],f:v};if("viewBox"==P)return{from:Q=this.attr(P).vb.split(" ").map(Number),to:j=L.split(" ").map(Number),f:s};if("transform"==P||"gradientTransform"==P||"patternTransform"==P)return"string"==typeof L&&(L=N(L).replace(/\.{3}|\u2026/g,V)),function f(P,L,Q){P=P||new h.Matrix,L=L||new h.Matrix,P=h.parseTransformString(P.toTransformString())||[],L=h.parseTransformString(L.toTransformString())||[];for(var j,V,W,R,Z=Math.max(P.length,L.length),ee=[],le=[],te=0;Z>te;te++){if(W=P[te]||o(L[te]),R=L[te]||o(W),W[0]!=R[0]||"r"==W[0].toLowerCase()&&(W[2]!=R[2]||W[3]!=R[3])||"s"==W[0].toLowerCase()&&(W[3]!=R[3]||W[4]!=R[4])){P=h._.transform2matrix(P,Q()),L=h._.transform2matrix(L,Q()),ee=[["m",P.a,P.b,P.c,P.d,P.e,P.f]],le=[["m",L.a,L.b,L.c,L.d,L.e,L.f]];break}for(ee[te]=[],le[te]=[],j=0,V=Math.max(W.length,R.length);V>j;j++)j in W&&(ee[te][j]=W[j]),j in R&&(le[te][j]=R[j])}return{from:a(ee),to:a(le),f:x(ee)}}(V=this.matrix,L=h._.rgTransform.test(L)?h._.transform2matrix(L,this.getBBox()):h._.transform2matrix(h._.svgTransform2string(L),this.getBBox()),function(){return W.getBBox(1)});if("d"==P||"path"==P)return{from:a((Q=h.path.toCubic(V,L))[0]),to:a(Q[1]),f:x(Q[0])};if("points"==P)return{from:Q=N(V).split(h._.separator),to:j=N(L).split(h._.separator),f:function(ee){return ee}};if(b(V)&&b(L))return{from:parseFloat(V),to:parseFloat(L),f:l};var R=V.match(B),Z=N(L).match(B);return R&&function A(P,L){return!(!h.is(P,"array")||!h.is(L,"array"))&&P.toString()==L.toString()}(R,Z)?{from:parseFloat(V),to:parseFloat(L),f:y(R)}:{from:this.asPX(P),to:this.asPX(P,L),f:l}})}),q.plugin(function(h,F,m,e){for(var o=F.prototype,l=("createTouch"in e.doc),y=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],s={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},v=function(L,Q){var j="y"==L?"scrollTop":"scrollLeft",V=Q&&Q.node?Q.node.ownerDocument:e.doc;return V[j in V.documentElement?"documentElement":"body"][j]},x=function(){return this.originalEvent.preventDefault()},a=function(){return this.originalEvent.stopPropagation()},b=function(L,Q,j,V){var W=l&&s[Q]?s[Q]:Q,R=function(Z){var ee=v("y",V),le=v("x",V);if(l&&s.hasOwnProperty(Q))for(var te=0,oe=Z.targetTouches&&Z.targetTouches.length;oe>te;te++)if(Z.targetTouches[te].target==L||L.contains(Z.targetTouches[te].target)){var ie=Z;(Z=Z.targetTouches[te]).originalEvent=ie,Z.preventDefault=x,Z.stopPropagation=a;break}var pe=Z.clientX+le,we=Z.clientY+ee;return j.call(V,Z,pe,we)};return Q!==W&&L.addEventListener(Q,R,!1),L.addEventListener(W,R,!1),function(){return Q!==W&&L.removeEventListener(Q,R,!1),L.removeEventListener(W,R,!1),!0}},A=[],T=function(L){for(var Q,j=L.clientX,V=L.clientY,W=v("y"),R=v("x"),Z=A.length;Z--;){if(Q=A[Z],l){for(var ee,le=L.touches&&L.touches.length;le--;)if((ee=L.touches[le]).identifier==Q.el._drag.id||Q.el.node.contains(ee.target)){j=ee.clientX,V=ee.clientY,(L.originalEvent?L.originalEvent:L).preventDefault();break}}else L.preventDefault();var te=Q.el.node;te.nextSibling,te.parentNode,te.style.display,j+=R,V+=W,ae("snap.drag.move."+Q.el.id,Q.move_scope||Q.el,j-Q.el._drag.x,V-Q.el._drag.y,j,V,L)}},B=function(L){h.unmousemove(T).unmouseup(B);for(var Q,j=A.length;j--;)(Q=A[j]).el._drag={},ae("snap.drag.end."+Q.el.id,Q.end_scope||Q.start_scope||Q.move_scope||Q.el,L),ae.off("snap.drag.*."+Q.el.id);A=[]},N=y.length;N--;)!function(L){h[L]=o[L]=function(Q,j){if(h.is(Q,"function"))this.events=this.events||[],this.events.push({name:L,f:Q,unbind:b(this.node||document,L,Q,j||this)});else for(var V=0,W=this.events.length;W>V;V++)if(this.events[V].name==L)try{this.events[V].f.call(this)}catch(R){}return this},h["un"+L]=o["un"+L]=function(Q){for(var j=this.events||[],V=j.length;V--;)if(j[V].name==L&&(j[V].f==Q||!Q))return j[V].unbind(),j.splice(V,1),!j.length&&delete this.events,this;return this}}(y[N]);o.hover=function(L,Q,j,V){return this.mouseover(L,j).mouseout(Q,V||j)},o.unhover=function(L,Q){return this.unmouseover(L).unmouseout(Q)};var P=[];o.drag=function(L,Q,j,V,W,R){function Z(oe,ie,pe){(oe.originalEvent||oe).preventDefault(),le._drag.x=ie,le._drag.y=pe,le._drag.id=oe.identifier,!A.length&&h.mousemove(T).mouseup(B),A.push({el:le,move_scope:V,start_scope:W,end_scope:R}),Q&&ae.on("snap.drag.start."+le.id,Q),L&&ae.on("snap.drag.move."+le.id,L),j&&ae.on("snap.drag.end."+le.id,j),ae("snap.drag.start."+le.id,W||V||le,ie,pe,oe)}function ee(oe,ie,pe){ae("snap.draginit."+le.id,le,oe,ie,pe)}var te,le=this;return arguments.length?(ae.on("snap.draginit."+le.id,Z),le._drag={},P.push({el:le,start:Z,init:ee}),le.mousedown(ee),le):le.drag(function(oe,ie){this.attr({transform:te+(te?"T":"t")+[oe,ie]})},function(){te=this.transform().local})},o.undrag=function(){for(var L=P.length;L--;)P[L].el==this&&(this.unmousedown(P[L].init),P.splice(L,1),ae.unbind("snap.drag.*."+this.id),ae.unbind("snap.draginit."+this.id));return!P.length&&h.unmousemove(T).unmouseup(B),this}}),q.plugin(function(h,F,m,e){var o=(F.prototype,m.prototype),f=/^\s*url\((.+)\)/,l=String,y=h._.$;h.filter={},o.filter=function(s){var v=this;"svg"!=v.type&&(v=v.paper);var x=h.parse(l(s)),a=h._.id(),b=(v.node.offsetWidth,v.node.offsetHeight,y("filter"));return y(b,{id:a,filterUnits:"userSpaceOnUse"}),b.appendChild(x.node),v.defs.appendChild(b),new F(b)},ae.on("snap.util.getattr.filter",function(){ae.stop();var s=y(this.node,"filter");if(s){var v=l(s).match(f);return v&&h.select(v[1])}}),ae.on("snap.util.attr.filter",function(s){if(s instanceof F&&"filter"==s.type){ae.stop();var v=s.node.id;v||(y(s.node,{id:s.id}),v=s.id),y(this.node,{filter:h.url(v)})}s&&"none"!=s||(ae.stop(),this.node.removeAttribute("filter"))}),h.filter.blur=function(s,v){null==s&&(s=2);var x=null==v?s:[s,v];return h.format('<feGaussianBlur stdDeviation="{def}"/>',{def:x})},h.filter.blur.toString=function(){return this()},h.filter.shadow=function(s,v,x,a,b){return null==b&&(null==a?(b=x,x=4,a="#000"):(b=a,a=x,x=4)),null==x&&(x=4),null==b&&(b=1),null==s&&(s=0,v=2),null==v&&(v=s),a=h.color(a),h.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:a,dx:s,dy:v,blur:x,opacity:b})},h.filter.shadow.toString=function(){return this()},h.filter.grayscale=function(s){return null==s&&(s=1),h.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-s),b:.7152-.7152*(1-s),c:.0722-.0722*(1-s),d:.2126-.2126*(1-s),e:.7152+.2848*(1-s),f:.0722-.0722*(1-s),g:.2126-.2126*(1-s),h:.0722+.9278*(1-s)})},h.filter.grayscale.toString=function(){return this()},h.filter.sepia=function(s){return null==s&&(s=1),h.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-s),b:.769-.769*(1-s),c:.189-.189*(1-s),d:.349-.349*(1-s),e:.686+.314*(1-s),f:.168-.168*(1-s),g:.272-.272*(1-s),h:.534-.534*(1-s),i:.131+.869*(1-s)})},h.filter.sepia.toString=function(){return this()},h.filter.saturate=function(s){return null==s&&(s=1),h.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-s})},h.filter.saturate.toString=function(){return this()},h.filter.hueRotate=function(s){return s=s||0,h.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:s})},h.filter.hueRotate.toString=function(){return this()},h.filter.invert=function(s){return null==s&&(s=1),h.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:s,amount2:1-s})},h.filter.invert.toString=function(){return this()},h.filter.brightness=function(s){return null==s&&(s=1),h.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:s})},h.filter.brightness.toString=function(){return this()},h.filter.contrast=function(s){return null==s&&(s=1),h.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:s,amount2:.5-s/2})},h.filter.contrast.toString=function(){return this()}}),q.plugin(function(h,F,m,e,o){var f=h._.box,l=h.is,y=/^[^a-z]*([tbmlrc])/i,s=function(){return"T"+this.dx+","+this.dy};F.prototype.getAlign=function(v,x){null==x&&l(v,"string")&&(x=v,v=null);var a=(v=v||this.paper).getBBox?v.getBBox():f(v),b=this.getBBox(),A={};switch(x=(x=x&&x.match(y))?x[1].toLowerCase():"c"){case"t":A.dx=0,A.dy=a.y-b.y;break;case"b":A.dx=0,A.dy=a.y2-b.y2;break;case"m":A.dx=0,A.dy=a.cy-b.cy;break;case"l":A.dx=a.x-b.x,A.dy=0;break;case"r":A.dx=a.x2-b.x2,A.dy=0;break;default:A.dx=a.cx-b.cx,A.dy=0}return A.toString=s,A},F.prototype.align=function(v,x){return this.transform("..."+this.getAlign(v,x))}}),q.plugin(function(h,F,m,e){function o(Z){Z=Z.split(/(?=#)/);var ee=new String(Z[5]);return ee[50]=Z[0],ee[100]=Z[1],ee[200]=Z[2],ee[300]=Z[3],ee[400]=Z[4],ee[500]=Z[5],ee[600]=Z[6],ee[700]=Z[7],ee[800]=Z[8],ee[900]=Z[9],Z[10]&&(ee.A100=Z[10],ee.A200=Z[11],ee.A400=Z[12],ee.A700=Z[13]),ee}h.mui={},h.flat={},h.mui.red=o("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),h.mui.pink=o("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),h.mui.purple=o("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),h.mui.deeppurple=o("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),h.mui.indigo=o("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),h.mui.blue=o("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),h.mui.lightblue=o("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),h.mui.cyan=o("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),h.mui.teal=o("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),h.mui.green=o("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),h.mui.lightgreen=o("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),h.mui.lime=o("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),h.mui.yellow=o("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),h.mui.amber=o("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),h.mui.orange=o("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),h.mui.deeporange=o("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),h.mui.brown=o("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),h.mui.grey=o("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),h.mui.bluegrey=o("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),h.flat.turquoise="#1abc9c",h.flat.greensea="#16a085",h.flat.sunflower="#f1c40f",h.flat.orange="#f39c12",h.flat.emerland="#2ecc71",h.flat.nephritis="#27ae60",h.flat.carrot="#e67e22",h.flat.pumpkin="#d35400",h.flat.peterriver="#3498db",h.flat.belizehole="#2980b9",h.flat.alizarin="#e74c3c",h.flat.pomegranate="#c0392b",h.flat.amethyst="#9b59b6",h.flat.wisteria="#8e44ad",h.flat.clouds="#ecf0f1",h.flat.silver="#bdc3c7",h.flat.wetasphalt="#34495e",h.flat.midnightblue="#2c3e50",h.flat.concrete="#95a5a6",h.flat.asbestos="#7f8c8d",h.importMUIColors=function(){for(var Z in h.mui)h.mui.hasOwnProperty(Z)&&(J[Z]=h.mui[Z])}}),q}),function(J){"object"==typeof exports&&"undefined"!=typeof module?module.exports=J():"function"==typeof define&&define.amd?define([],J):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).rdfstore=J()}(function(){var define,module,exports;return function J(ae,ce,q){function h(e,o){if(!ce[e]){if(!ae[e]){var f="function"==typeof require&&require;if(!o&&f)return f(e,!0);if(F)return F(e,!0);var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}var y=ce[e]={exports:{}};ae[e][0].call(y.exports,function(s){return h(ae[e][1][s]||s)},y,y.exports,J,ae,ce,q)}return ce[e].exports}for(var F="function"==typeof require&&require,m=0;m<q.length;m++)h(q[m]);return h}({1:[function(J,ae,ce){(function(q){(function(){"use strict";var h=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],F="undefined"==typeof globalThis?q:globalThis;ae.exports=function(){for(var m=[],e=0;e<h.length;e++)"function"==typeof F[h[e]]&&(m[m.length]=h[e]);return m}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(J,ae,ce){"use strict";ce.byteLength=function(y){var s=f(y),v=s[0],x=s[1];return 3*(v+x)/4-x},ce.toByteArray=function(y){var s,v,L,x=f(y),a=x[0],b=x[1],A=new F(3*(a+(L=b))/4-L),T=0,B=b>0?a-4:a;for(v=0;v<B;v+=4)s=h[y.charCodeAt(v)]<<18|h[y.charCodeAt(v+1)]<<12|h[y.charCodeAt(v+2)]<<6|h[y.charCodeAt(v+3)],A[T++]=s>>16&255,A[T++]=s>>8&255,A[T++]=255&s;return 2===b&&(s=h[y.charCodeAt(v)]<<2|h[y.charCodeAt(v+1)]>>4,A[T++]=255&s),1===b&&(s=h[y.charCodeAt(v)]<<10|h[y.charCodeAt(v+1)]<<4|h[y.charCodeAt(v+2)]>>2,A[T++]=s>>8&255,A[T++]=255&s),A},ce.fromByteArray=function(y){for(var s,v=y.length,x=v%3,a=[],b=0,A=v-x;b<A;b+=16383)a.push(l(y,b,b+16383>A?A:b+16383));return 1===x?(s=y[v-1],a.push(q[s>>2]+q[s<<4&63]+"==")):2===x&&(s=(y[v-2]<<8)+y[v-1],a.push(q[s>>10]+q[s>>4&63]+q[s<<2&63]+"=")),a.join("")};for(var q=[],h=[],F="undefined"!=typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,o=m.length;e<o;++e)q[e]=m[e],h[m.charCodeAt(e)]=e;function f(y){var s=y.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=y.indexOf("=");return-1===v&&(v=s),[v,v===s?0:4-v%4]}function l(y,s,v){for(var x,a,b=[],A=s;A<v;A+=3)x=(y[A]<<16&16711680)+(y[A+1]<<8&65280)+(255&y[A+2]),b.push(q[(a=x)>>18&63]+q[a>>12&63]+q[a>>6&63]+q[63&a]);return b.join("")}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},{}],3:[function(J,ae,ce){},{}],4:[function(J,ae,ce){arguments[4][3][0].apply(ce,arguments)},{dup:3}],5:[function(J,ae,ce){(function(q){(function(){!function(h){var F="object"==typeof ce&&ce&&!ce.nodeType&&ce,m="object"==typeof ae&&ae&&!ae.nodeType&&ae,e="object"==typeof q&&q;e.global!==e&&e.window!==e&&e.self!==e||(h=e);var o,f,l=2147483647,y=36,B=/^xn--/,N=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=Math.floor,V=String.fromCharCode;function W(we){throw new RangeError(L[we])}function R(we,Te){for(var Fe=we.length,ke=[];Fe--;)ke[Fe]=Te(we[Fe]);return ke}function Z(we,Te){var Fe=we.split("@"),ke="";return Fe.length>1&&(ke=Fe[0]+"@",we=Fe[1]),ke+R((we=we.replace(P,".")).split("."),Te).join(".")}function ee(we){for(var Te,Fe,ke=[],de=0,Le=we.length;de<Le;)(Te=we.charCodeAt(de++))>=55296&&Te<=56319&&de<Le?56320==(64512&(Fe=we.charCodeAt(de++)))?ke.push(((1023&Te)<<10)+(1023&Fe)+65536):(ke.push(Te),de--):ke.push(Te);return ke}function le(we){return R(we,function(Te){var Fe="";return Te>65535&&(Fe+=V((Te-=65536)>>>10&1023|55296),Te=56320|1023&Te),Fe+V(Te)}).join("")}function te(we,Te){return we+22+75*(we<26)-((0!=Te)<<5)}function oe(we,Te,Fe){var ke=0;for(we=Fe?j(we/700):we>>1,we+=j(we/Te);we>455;ke+=y)we=j(we/35);return j(ke+36*we/(we+38))}function ie(we){var Te,Fe,ke,de,Le,Me,Ze,H,z,ne,ge,xe=[],Re=we.length,He=0,We=128,Ke=72;for((Fe=we.lastIndexOf("-"))<0&&(Fe=0),ke=0;ke<Fe;++ke)we.charCodeAt(ke)>=128&&W("not-basic"),xe.push(we.charCodeAt(ke));for(de=Fe>0?Fe+1:0;de<Re;){for(Le=He,Me=1,Ze=y;de>=Re&&W("invalid-input"),((H=(ge=we.charCodeAt(de++))-48<10?ge-22:ge-65<26?ge-65:ge-97<26?ge-97:y)>=y||H>j((l-He)/Me))&&W("overflow"),He+=H*Me,!(H<(z=Ze<=Ke?1:Ze>=Ke+26?26:Ze-Ke));Ze+=y)Me>j(l/(ne=y-z))&&W("overflow"),Me*=ne;Ke=oe(He-Le,Te=xe.length+1,0==Le),j(He/Te)>l-We&&W("overflow"),We+=j(He/Te),He%=Te,xe.splice(He++,0,We)}return le(xe)}function pe(we){var Te,Fe,ke,de,Le,Me,Ze,H,z,ne,ge,xe,Re,He,We,Ke=[];for(xe=(we=ee(we)).length,Te=128,Fe=0,Le=72,Me=0;Me<xe;++Me)(ge=we[Me])<128&&Ke.push(V(ge));for(ke=de=Ke.length,de&&Ke.push("-");ke<xe;){for(Ze=l,Me=0;Me<xe;++Me)(ge=we[Me])>=Te&&ge<Ze&&(Ze=ge);for(Ze-Te>j((l-Fe)/(Re=ke+1))&&W("overflow"),Fe+=(Ze-Te)*Re,Te=Ze,Me=0;Me<xe;++Me)if((ge=we[Me])<Te&&++Fe>l&&W("overflow"),ge==Te){for(H=Fe,z=y;!(H<(ne=z<=Le?1:z>=Le+26?26:z-Le));z+=y)We=H-ne,He=y-ne,Ke.push(V(te(ne+We%He,0))),H=j(We/He);Ke.push(V(te(H,0))),Le=oe(Fe,Re,ke==de),Fe=0,++ke}++Fe,++Te}return Ke.join("")}if(o={version:"1.4.1",ucs2:{decode:ee,encode:le},decode:ie,encode:pe,toASCII:function(we){return Z(we,function(Te){return N.test(Te)?"xn--"+pe(Te):Te})},toUnicode:function(we){return Z(we,function(Te){return B.test(Te)?ie(Te.slice(4).toLowerCase()):Te})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return o});else if(F&&m)if(ae.exports==F)m.exports=o;else for(f in o)o.hasOwnProperty(f)&&(F[f]=o[f]);else h.punycode=o}(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(J,ae,ce){ae.exports=function(q){return q&&"object"==typeof q&&"function"==typeof q.copy&&"function"==typeof q.fill&&"function"==typeof q.readUInt8}},{}],7:[function(J,ae,ce){"use strict";var q=J("is-arguments"),h=J("is-generator-function"),F=J("which-typed-array"),m=J("is-typed-array");function e(ie){return ie.call.bind(ie)}var o="undefined"!=typeof BigInt,f="undefined"!=typeof Symbol,l=e(Object.prototype.toString),y=e(Number.prototype.valueOf),s=e(String.prototype.valueOf),v=e(Boolean.prototype.valueOf);if(o)var x=e(BigInt.prototype.valueOf);if(f)var a=e(Symbol.prototype.valueOf);function b(ie,pe){if("object"!=typeof ie)return!1;try{return pe(ie),!0}catch(we){return!1}}function A(ie){return"[object Map]"===l(ie)}function T(ie){return"[object Set]"===l(ie)}function B(ie){return"[object WeakMap]"===l(ie)}function N(ie){return"[object WeakSet]"===l(ie)}function P(ie){return"[object ArrayBuffer]"===l(ie)}function L(ie){return"undefined"!=typeof ArrayBuffer&&(P.working?P(ie):ie instanceof ArrayBuffer)}function Q(ie){return"[object DataView]"===l(ie)}function j(ie){return"undefined"!=typeof DataView&&(Q.working?Q(ie):ie instanceof DataView)}ce.isArgumentsObject=q,ce.isGeneratorFunction=h,ce.isTypedArray=m,ce.isPromise=function(ie){return"undefined"!=typeof Promise&&ie instanceof Promise||null!==ie&&"object"==typeof ie&&"function"==typeof ie.then&&"function"==typeof ie.catch},ce.isArrayBufferView=function(ie){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(ie):m(ie)||j(ie)},ce.isUint8Array=function(ie){return"Uint8Array"===F(ie)},ce.isUint8ClampedArray=function(ie){return"Uint8ClampedArray"===F(ie)},ce.isUint16Array=function(ie){return"Uint16Array"===F(ie)},ce.isUint32Array=function(ie){return"Uint32Array"===F(ie)},ce.isInt8Array=function(ie){return"Int8Array"===F(ie)},ce.isInt16Array=function(ie){return"Int16Array"===F(ie)},ce.isInt32Array=function(ie){return"Int32Array"===F(ie)},ce.isFloat32Array=function(ie){return"Float32Array"===F(ie)},ce.isFloat64Array=function(ie){return"Float64Array"===F(ie)},ce.isBigInt64Array=function(ie){return"BigInt64Array"===F(ie)},ce.isBigUint64Array=function(ie){return"BigUint64Array"===F(ie)},A.working="undefined"!=typeof Map&&A(new Map),ce.isMap=function(ie){return"undefined"!=typeof Map&&(A.working?A(ie):ie instanceof Map)},T.working="undefined"!=typeof Set&&T(new Set),ce.isSet=function(ie){return"undefined"!=typeof Set&&(T.working?T(ie):ie instanceof Set)},B.working="undefined"!=typeof WeakMap&&B(new WeakMap),ce.isWeakMap=function(ie){return"undefined"!=typeof WeakMap&&(B.working?B(ie):ie instanceof WeakMap)},N.working="undefined"!=typeof WeakSet&&N(new WeakSet),ce.isWeakSet=function(ie){return N(ie)},P.working="undefined"!=typeof ArrayBuffer&&P(new ArrayBuffer),ce.isArrayBuffer=L,Q.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&Q(new DataView(new ArrayBuffer(1),0,1)),ce.isDataView=j;var V="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function W(ie){return"[object SharedArrayBuffer]"===l(ie)}function R(ie){return void 0!==V&&(void 0===W.working&&(W.working=W(new V)),W.working?W(ie):ie instanceof V)}function Z(ie){return b(ie,y)}function ee(ie){return b(ie,s)}function le(ie){return b(ie,v)}function te(ie){return o&&b(ie,x)}function oe(ie){return f&&b(ie,a)}ce.isSharedArrayBuffer=R,ce.isAsyncFunction=function(ie){return"[object AsyncFunction]"===l(ie)},ce.isMapIterator=function(ie){return"[object Map Iterator]"===l(ie)},ce.isSetIterator=function(ie){return"[object Set Iterator]"===l(ie)},ce.isGeneratorObject=function(ie){return"[object Generator]"===l(ie)},ce.isWebAssemblyCompiledModule=function(ie){return"[object WebAssembly.Module]"===l(ie)},ce.isNumberObject=Z,ce.isStringObject=ee,ce.isBooleanObject=le,ce.isBigIntObject=te,ce.isSymbolObject=oe,ce.isBoxedPrimitive=function(ie){return Z(ie)||ee(ie)||le(ie)||te(ie)||oe(ie)},ce.isAnyArrayBuffer=function(ie){return"undefined"!=typeof Uint8Array&&(L(ie)||R(ie))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ie){Object.defineProperty(ce,ie,{enumerable:!1,value:function(){throw new Error(ie+" is not supported in userland")}})})},{"is-arguments":27,"is-generator-function":29,"is-typed-array":30,"which-typed-array":127}],8:[function(J,ae,ce){(function(q){(function(){var h=Object.getOwnPropertyDescriptors||function(te){for(var oe=Object.keys(te),ie={},pe=0;pe<oe.length;pe++)ie[oe[pe]]=Object.getOwnPropertyDescriptor(te,oe[pe]);return ie},F=/%[sdj%]/g;ce.format=function(te){if(!B(te)){for(var oe=[],ie=0;ie<arguments.length;ie++)oe.push(f(arguments[ie]));return oe.join(" ")}ie=1;for(var pe=arguments,we=pe.length,Te=String(te).replace(F,function(ke){if("%%"===ke)return"%";if(ie>=we)return ke;switch(ke){case"%s":return String(pe[ie++]);case"%d":return Number(pe[ie++]);case"%j":try{return JSON.stringify(pe[ie++])}catch(de){return"[Circular]"}default:return ke}}),Fe=pe[ie];ie<we;Fe=pe[++ie])A(Fe)||!L(Fe)?Te+=" "+Fe:Te+=" "+f(Fe);return Te},ce.deprecate=function(te,oe){if(void 0!==q&&!0===q.noDeprecation)return te;if(void 0===q)return function(){return ce.deprecate(te,oe).apply(this,arguments)};var ie=!1;return function(){if(!ie){if(q.throwDeprecation)throw new Error(oe);q.traceDeprecation?console.trace(oe):console.error(oe),ie=!0}return te.apply(this,arguments)}};var m={},e=/^$/;if(q.env.NODE_DEBUG){var o=q.env.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),e=new RegExp("^"+o+"$","i")}function f(te,oe){var ie={seen:[],stylize:y};return arguments.length>=3&&(ie.depth=arguments[2]),arguments.length>=4&&(ie.colors=arguments[3]),b(oe)?ie.showHidden=oe:oe&&ce._extend(ie,oe),N(ie.showHidden)&&(ie.showHidden=!1),N(ie.depth)&&(ie.depth=2),N(ie.colors)&&(ie.colors=!1),N(ie.customInspect)&&(ie.customInspect=!0),ie.colors&&(ie.stylize=l),s(ie,te,ie.depth)}function l(te,oe){var ie=f.styles[oe];return ie?"\x1b["+f.colors[ie][0]+"m"+te+"\x1b["+f.colors[ie][1]+"m":te}function y(te,oe){return te}function s(te,oe,ie){if(te.customInspect&&oe&&V(oe.inspect)&&oe.inspect!==ce.inspect&&(!oe.constructor||oe.constructor.prototype!==oe)){var pe=oe.inspect(ie,te);return B(pe)||(pe=s(te,pe,ie)),pe}var we=function(H,z){if(N(z))return H.stylize("undefined","undefined");if(B(z)){var ne="'"+JSON.stringify(z).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return H.stylize(ne,"string")}return T(z)?H.stylize(""+z,"number"):b(z)?H.stylize(""+z,"boolean"):A(z)?H.stylize("null","null"):void 0}(te,oe);if(we)return we;var z,Te=Object.keys(oe),Fe=(z={},Te.forEach(function(ne,ge){z[ne]=!0}),z);if(te.showHidden&&(Te=Object.getOwnPropertyNames(oe)),j(oe)&&(Te.indexOf("message")>=0||Te.indexOf("description")>=0))return v(oe);if(0===Te.length){if(V(oe)){var ke=oe.name?": "+oe.name:"";return te.stylize("[Function"+ke+"]","special")}if(P(oe))return te.stylize(RegExp.prototype.toString.call(oe),"regexp");if(Q(oe))return te.stylize(Date.prototype.toString.call(oe),"date");if(j(oe))return v(oe)}var de,Le="",Me=!1,Ze=["{","}"];return a(oe)&&(Me=!0,Ze=["[","]"]),V(oe)&&(Le=" [Function"+(oe.name?": "+oe.name:"")+"]"),P(oe)&&(Le=" "+RegExp.prototype.toString.call(oe)),Q(oe)&&(Le=" "+Date.prototype.toUTCString.call(oe)),j(oe)&&(Le=" "+v(oe)),0!==Te.length||Me&&0!=oe.length?ie<0?P(oe)?te.stylize(RegExp.prototype.toString.call(oe),"regexp"):te.stylize("[Object]","special"):(te.seen.push(oe),de=Me?function(H,z,ne,ge,xe){for(var Re=[],He=0,We=z.length;He<We;++He)ee(z,String(He))?Re.push(x(H,z,ne,ge,String(He),!0)):Re.push("");return xe.forEach(function(Ke){Ke.match(/^\d+$/)||Re.push(x(H,z,ne,ge,Ke,!0))}),Re}(te,oe,ie,Fe,Te):Te.map(function(H){return x(te,oe,ie,Fe,H,Me)}),te.seen.pop(),function(H,z,ne){return H.reduce(function(ge,xe){return xe.indexOf("\n"),ge+xe.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?ne[0]+(""===z?"":z+"\n ")+" "+H.join(",\n  ")+" "+ne[1]:ne[0]+z+" "+H.join(", ")+" "+ne[1]}(de,Le,Ze)):Ze[0]+Le+Ze[1]}function v(te){return"["+Error.prototype.toString.call(te)+"]"}function x(te,oe,ie,pe,we,Te){var Fe,ke,de;if((de=Object.getOwnPropertyDescriptor(oe,we)||{value:oe[we]}).get?ke=de.set?te.stylize("[Getter/Setter]","special"):te.stylize("[Getter]","special"):de.set&&(ke=te.stylize("[Setter]","special")),ee(pe,we)||(Fe="["+we+"]"),ke||(te.seen.indexOf(de.value)<0?(ke=A(ie)?s(te,de.value,null):s(te,de.value,ie-1)).indexOf("\n")>-1&&(ke=Te?ke.split("\n").map(function(Le){return"  "+Le}).join("\n").substr(2):"\n"+ke.split("\n").map(function(Le){return"   "+Le}).join("\n")):ke=te.stylize("[Circular]","special")),N(Fe)){if(Te&&we.match(/^\d+$/))return ke;(Fe=JSON.stringify(""+we)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Fe=Fe.substr(1,Fe.length-2),Fe=te.stylize(Fe,"name")):(Fe=Fe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Fe=te.stylize(Fe,"string"))}return Fe+": "+ke}function a(te){return Array.isArray(te)}function b(te){return"boolean"==typeof te}function A(te){return null===te}function T(te){return"number"==typeof te}function B(te){return"string"==typeof te}function N(te){return void 0===te}function P(te){return L(te)&&"[object RegExp]"===W(te)}function L(te){return"object"==typeof te&&null!==te}function Q(te){return L(te)&&"[object Date]"===W(te)}function j(te){return L(te)&&("[object Error]"===W(te)||te instanceof Error)}function V(te){return"function"==typeof te}function W(te){return Object.prototype.toString.call(te)}function R(te){return te<10?"0"+te.toString(10):te.toString(10)}ce.debuglog=function(te){if(te=te.toUpperCase(),!m[te])if(e.test(te)){var oe=q.pid;m[te]=function(){var ie=ce.format.apply(ce,arguments);console.error("%s %d: %s",te,oe,ie)}}else m[te]=function(){};return m[te]},ce.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ce.types=J("./support/types"),ce.isArray=a,ce.isBoolean=b,ce.isNull=A,ce.isNullOrUndefined=function(te){return null==te},ce.isNumber=T,ce.isString=B,ce.isSymbol=function(te){return"symbol"==typeof te},ce.isUndefined=N,ce.isRegExp=P,ce.types.isRegExp=P,ce.isObject=L,ce.isDate=Q,ce.types.isDate=Q,ce.isError=j,ce.types.isNativeError=j,ce.isFunction=V,ce.isPrimitive=function(te){return null===te||"boolean"==typeof te||"number"==typeof te||"string"==typeof te||"symbol"==typeof te||void 0===te},ce.isBuffer=J("./support/isBuffer");var Z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ee(te,oe){return Object.prototype.hasOwnProperty.call(te,oe)}ce.log=function(){var te,oe;console.log("%s - %s",(oe=[R((te=new Date).getHours()),R(te.getMinutes()),R(te.getSeconds())].join(":"),[te.getDate(),Z[te.getMonth()],oe].join(" ")),ce.format.apply(ce,arguments))},ce.inherits=J("inherits"),ce._extend=function(te,oe){if(!oe||!L(oe))return te;for(var ie=Object.keys(oe),pe=ie.length;pe--;)te[ie[pe]]=oe[ie[pe]];return te};var le="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;ce.promisify=function(te){if("function"!=typeof te)throw new TypeError('The "original" argument must be of type Function');if(le&&te[le]){var oe;if("function"!=typeof(oe=te[le]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(oe,le,{value:oe,enumerable:!1,writable:!1,configurable:!0}),oe}function oe(){for(var ie,pe,we=new Promise(function(ke,de){ie=ke,pe=de}),Te=[],Fe=0;Fe<arguments.length;Fe++)Te.push(arguments[Fe]);Te.push(function(ke,de){ke?pe(ke):ie(de)});try{te.apply(this,Te)}catch(ke){pe(ke)}return we}return Object.setPrototypeOf(oe,Object.getPrototypeOf(te)),le&&Object.defineProperty(oe,le,{value:oe,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(oe,h(te))},ce.promisify.custom=le,ce.callbackify=function(te){if("function"!=typeof te)throw new TypeError('The "original" argument must be of type Function');function oe(){for(var ie=[],pe=0;pe<arguments.length;pe++)ie.push(arguments[pe]);var we=ie.pop();if("function"!=typeof we)throw new TypeError("The last argument must be of type Function");var Te=this,Fe=function(){return we.apply(Te,arguments)};te.apply(this,ie).then(function(ke){q.nextTick(Fe.bind(null,null,ke))},function(ke){q.nextTick(function(de,Le){if(!de){var Me=new Error("Promise was rejected with a falsy value");Me.reason=de,de=Me}return Le(de)}.bind(null,ke,Fe))})}return Object.setPrototypeOf(oe,Object.getPrototypeOf(te)),Object.defineProperties(oe,h(te)),oe}}).call(this)}).call(this,J("_process"))},{"./support/isBuffer":6,"./support/types":7,_process:71,inherits:26}],9:[function(J,ae,ce){(function(q){(function(){"use strict";var h=J("base64-js"),F=J("ieee754");ce.Buffer=o,ce.SlowBuffer=function(H){return+H!=H&&(H=0),o.alloc(+H)},ce.INSPECT_MAX_BYTES=50;var m=2147483647;function e(H){if(H>m)throw new RangeError('The value "'+H+'" is invalid for option "size"');var z=new Uint8Array(H);return z.__proto__=o.prototype,z}function o(H,z,ne){if("number"==typeof H){if("string"==typeof z)throw new TypeError('The "string" argument must be of type string. Received type number');return y(H)}return f(H,z,ne)}function f(H,z,ne){if("string"==typeof H)return function(Re,He){if("string"==typeof He&&""!==He||(He="utf8"),!o.isEncoding(He))throw new TypeError("Unknown encoding: "+He);var We=0|x(Re,He),Ke=e(We),mt=Ke.write(Re,He);return mt!==We&&(Ke=Ke.slice(0,mt)),Ke}(H,z);if(ArrayBuffer.isView(H))return s(H);if(null==H)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(Me(H,ArrayBuffer)||H&&Me(H.buffer,ArrayBuffer))return function(Re,He,We){if(He<0||Re.byteLength<He)throw new RangeError('"offset" is outside of buffer bounds');if(Re.byteLength<He+(We||0))throw new RangeError('"length" is outside of buffer bounds');var Ke;return(Ke=void 0===He&&void 0===We?new Uint8Array(Re):void 0===We?new Uint8Array(Re,He):new Uint8Array(Re,He,We)).__proto__=o.prototype,Ke}(H,z,ne);if("number"==typeof H)throw new TypeError('The "value" argument must not be of type number. Received type number');var ge=H.valueOf&&H.valueOf();if(null!=ge&&ge!==H)return o.from(ge,z,ne);var xe=function(Re){if(o.isBuffer(Re)){var He=0|v(Re.length),We=e(He);return 0===We.length||Re.copy(We,0,0,He),We}return void 0!==Re.length?"number"!=typeof Re.length||Ze(Re.length)?e(0):s(Re):"Buffer"===Re.type&&Array.isArray(Re.data)?s(Re.data):void 0}(H);if(xe)return xe;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof H[Symbol.toPrimitive])return o.from(H[Symbol.toPrimitive]("string"),z,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}function l(H){if("number"!=typeof H)throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function y(H){return l(H),e(H<0?0:0|v(H))}function s(H){for(var z=H.length<0?0:0|v(H.length),ne=e(z),ge=0;ge<z;ge+=1)ne[ge]=255&H[ge];return ne}function v(H){if(H>=m)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+m.toString(16)+" bytes");return 0|H}function x(H,z){if(o.isBuffer(H))return H.length;if(ArrayBuffer.isView(H)||Me(H,ArrayBuffer))return H.byteLength;if("string"!=typeof H)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);var ne=H.length,ge=arguments.length>2&&!0===arguments[2];if(!ge&&0===ne)return 0;for(var xe=!1;;)switch(z){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return ke(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ne;case"hex":return ne>>>1;case"base64":return de(H).length;default:if(xe)return ge?-1:ke(H).length;z=(""+z).toLowerCase(),xe=!0}}function a(H,z,ne){var ge=H[z];H[z]=H[ne],H[ne]=ge}function b(H,z,ne,ge,xe){if(0===H.length)return-1;if("string"==typeof ne?(ge=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),Ze(ne=+ne)&&(ne=xe?0:H.length-1),ne<0&&(ne=H.length+ne),ne>=H.length){if(xe)return-1;ne=H.length-1}else if(ne<0){if(!xe)return-1;ne=0}if("string"==typeof z&&(z=o.from(z,ge)),o.isBuffer(z))return 0===z.length?-1:A(H,z,ne,ge,xe);if("number"==typeof z)return z&=255,"function"==typeof Uint8Array.prototype.indexOf?xe?Uint8Array.prototype.indexOf.call(H,z,ne):Uint8Array.prototype.lastIndexOf.call(H,z,ne):A(H,[z],ne,ge,xe);throw new TypeError("val must be string, number or Buffer")}function A(H,z,ne,ge,xe){var Re,He=1,We=H.length,Ke=z.length;if(void 0!==ge&&("ucs2"===(ge=String(ge).toLowerCase())||"ucs-2"===ge||"utf16le"===ge||"utf-16le"===ge)){if(H.length<2||z.length<2)return-1;He=2,We/=2,Ke/=2,ne/=2}function mt(Se,Ie){return 1===He?Se[Ie]:Se.readUInt16BE(Ie*He)}if(xe){var yt=-1;for(Re=ne;Re<We;Re++)if(mt(H,Re)===mt(z,-1===yt?0:Re-yt)){if(-1===yt&&(yt=Re),Re-yt+1===Ke)return yt*He}else-1!==yt&&(Re-=Re-yt),yt=-1}else for(ne+Ke>We&&(ne=We-Ke),Re=ne;Re>=0;Re--){for(var Mt=!0,Yt=0;Yt<Ke;Yt++)if(mt(H,Re+Yt)!==mt(z,Yt)){Mt=!1;break}if(Mt)return Re}return-1}function T(H,z,ne,ge){ne=Number(ne)||0;var xe=H.length-ne;ge?(ge=Number(ge))>xe&&(ge=xe):ge=xe;var Re=z.length;ge>Re/2&&(ge=Re/2);for(var He=0;He<ge;++He){var We=parseInt(z.substr(2*He,2),16);if(Ze(We))return He;H[ne+He]=We}return He}function B(H,z,ne,ge){return Le(ke(z,H.length-ne),H,ne,ge)}function N(H,z,ne,ge){return Le(function(xe){for(var Re=[],He=0;He<xe.length;++He)Re.push(255&xe.charCodeAt(He));return Re}(z),H,ne,ge)}function P(H,z,ne,ge){return N(H,z,ne,ge)}function L(H,z,ne,ge){return Le(de(z),H,ne,ge)}function Q(H,z,ne,ge){return Le(function(xe,Re){for(var He,We,Ke,mt=[],yt=0;yt<xe.length&&!((Re-=2)<0);++yt)We=(He=xe.charCodeAt(yt))>>8,Ke=He%256,mt.push(Ke),mt.push(We);return mt}(z,H.length-ne),H,ne,ge)}function j(H,z,ne){return 0===z&&ne===H.length?h.fromByteArray(H):h.fromByteArray(H.slice(z,ne))}function V(H,z,ne){ne=Math.min(H.length,ne);for(var ge=[],xe=z;xe<ne;){var Re,He,We,Ke,mt=H[xe],yt=null,Mt=mt>239?4:mt>223?3:mt>191?2:1;if(xe+Mt<=ne)switch(Mt){case 1:mt<128&&(yt=mt);break;case 2:128==(192&(Re=H[xe+1]))&&(Ke=(31&mt)<<6|63&Re)>127&&(yt=Ke);break;case 3:Re=H[xe+1],He=H[xe+2],128==(192&Re)&&128==(192&He)&&(Ke=(15&mt)<<12|(63&Re)<<6|63&He)>2047&&(Ke<55296||Ke>57343)&&(yt=Ke);break;case 4:Re=H[xe+1],He=H[xe+2],We=H[xe+3],128==(192&Re)&&128==(192&He)&&128==(192&We)&&(Ke=(15&mt)<<18|(63&Re)<<12|(63&He)<<6|63&We)>65535&&Ke<1114112&&(yt=Ke)}null===yt?(yt=65533,Mt=1):yt>65535&&(yt-=65536,ge.push(yt>>>10&1023|55296),yt=56320|1023&yt),ge.push(yt),xe+=Mt}return function(Yt){var Se=Yt.length;if(Se<=W)return String.fromCharCode.apply(String,Yt);for(var Ie="",Ne=0;Ne<Se;)Ie+=String.fromCharCode.apply(String,Yt.slice(Ne,Ne+=W));return Ie}(ge)}ce.kMaxLength=m,o.TYPED_ARRAY_SUPPORT=function(){try{var H=new Uint8Array(1);return H.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===H.foo()}catch(z){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(H,z,ne){return f(H,z,ne)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(H,z,ne){return xe=z,Re=ne,l(ge=H),ge<=0?e(ge):void 0!==xe?"string"==typeof Re?e(ge).fill(xe,Re):e(ge).fill(xe):e(ge);var ge,xe,Re},o.allocUnsafe=function(H){return y(H)},o.allocUnsafeSlow=function(H){return y(H)},o.isBuffer=function(H){return null!=H&&!0===H._isBuffer&&H!==o.prototype},o.compare=function(H,z){if(Me(H,Uint8Array)&&(H=o.from(H,H.offset,H.byteLength)),Me(z,Uint8Array)&&(z=o.from(z,z.offset,z.byteLength)),!o.isBuffer(H)||!o.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===z)return 0;for(var ne=H.length,ge=z.length,xe=0,Re=Math.min(ne,ge);xe<Re;++xe)if(H[xe]!==z[xe]){ne=H[xe],ge=z[xe];break}return ne<ge?-1:ge<ne?1:0},o.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(H,z){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(0===H.length)return o.alloc(0);var ne;if(void 0===z)for(z=0,ne=0;ne<H.length;++ne)z+=H[ne].length;var ge=o.allocUnsafe(z),xe=0;for(ne=0;ne<H.length;++ne){var Re=H[ne];if(Me(Re,Uint8Array)&&(Re=o.from(Re)),!o.isBuffer(Re))throw new TypeError('"list" argument must be an Array of Buffers');Re.copy(ge,xe),xe+=Re.length}return ge},o.byteLength=x,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var H=this.length;if(H%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var z=0;z<H;z+=2)a(this,z,z+1);return this},o.prototype.swap32=function(){var H=this.length;if(H%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var z=0;z<H;z+=4)a(this,z,z+3),a(this,z+1,z+2);return this},o.prototype.swap64=function(){var H=this.length;if(H%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var z=0;z<H;z+=8)a(this,z,z+7),a(this,z+1,z+6),a(this,z+2,z+5),a(this,z+3,z+4);return this},o.prototype.toString=function(){var H=this.length;return 0===H?"":0===arguments.length?V(this,0,H):function(z,ne,ge){var xe=!1;if((void 0===ne||ne<0)&&(ne=0),ne>this.length||((void 0===ge||ge>this.length)&&(ge=this.length),ge<=0)||(ge>>>=0)<=(ne>>>=0))return"";for(z||(z="utf8");;)switch(z){case"hex":return ee(this,ne,ge);case"utf8":case"utf-8":return V(this,ne,ge);case"ascii":return R(this,ne,ge);case"latin1":case"binary":return Z(this,ne,ge);case"base64":return j(this,ne,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,ne,ge);default:if(xe)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),xe=!0}}.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(H){if(!o.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H||0===o.compare(this,H)},o.prototype.inspect=function(){var H="",z=ce.INSPECT_MAX_BYTES;return H=this.toString("hex",0,z).replace(/(.{2})/g,"$1 ").trim(),this.length>z&&(H+=" ... "),"<Buffer "+H+">"},o.prototype.compare=function(H,z,ne,ge,xe){if(Me(H,Uint8Array)&&(H=o.from(H,H.offset,H.byteLength)),!o.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(void 0===z&&(z=0),void 0===ne&&(ne=H?H.length:0),void 0===ge&&(ge=0),void 0===xe&&(xe=this.length),z<0||ne>H.length||ge<0||xe>this.length)throw new RangeError("out of range index");if(ge>=xe&&z>=ne)return 0;if(ge>=xe)return-1;if(z>=ne)return 1;if(this===H)return 0;for(var Re=(xe>>>=0)-(ge>>>=0),He=(ne>>>=0)-(z>>>=0),We=Math.min(Re,He),Ke=this.slice(ge,xe),mt=H.slice(z,ne),yt=0;yt<We;++yt)if(Ke[yt]!==mt[yt]){Re=Ke[yt],He=mt[yt];break}return Re<He?-1:He<Re?1:0},o.prototype.includes=function(H,z,ne){return-1!==this.indexOf(H,z,ne)},o.prototype.indexOf=function(H,z,ne){return b(this,H,z,ne,!0)},o.prototype.lastIndexOf=function(H,z,ne){return b(this,H,z,ne,!1)},o.prototype.write=function(H,z,ne,ge){if(void 0===z)ge="utf8",ne=this.length,z=0;else if(void 0===ne&&"string"==typeof z)ge=z,ne=this.length,z=0;else{if(!isFinite(z))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");z>>>=0,isFinite(ne)?(ne>>>=0,void 0===ge&&(ge="utf8")):(ge=ne,ne=void 0)}var xe=this.length-z;if((void 0===ne||ne>xe)&&(ne=xe),H.length>0&&(ne<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");ge||(ge="utf8");for(var Re=!1;;)switch(ge){case"hex":return T(this,H,z,ne);case"utf8":case"utf-8":return B(this,H,z,ne);case"ascii":return N(this,H,z,ne);case"latin1":case"binary":return P(this,H,z,ne);case"base64":return L(this,H,z,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,H,z,ne);default:if(Re)throw new TypeError("Unknown encoding: "+ge);ge=(""+ge).toLowerCase(),Re=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var W=4096;function R(H,z,ne){var ge="";ne=Math.min(H.length,ne);for(var xe=z;xe<ne;++xe)ge+=String.fromCharCode(127&H[xe]);return ge}function Z(H,z,ne){var ge="";ne=Math.min(H.length,ne);for(var xe=z;xe<ne;++xe)ge+=String.fromCharCode(H[xe]);return ge}function ee(H,z,ne){var ge=H.length;(!z||z<0)&&(z=0),(!ne||ne<0||ne>ge)&&(ne=ge);for(var xe="",Re=z;Re<ne;++Re)xe+=Fe(H[Re]);return xe}function le(H,z,ne){for(var ge=H.slice(z,ne),xe="",Re=0;Re<ge.length;Re+=2)xe+=String.fromCharCode(ge[Re]+256*ge[Re+1]);return xe}function te(H,z,ne){if(H%1!=0||H<0)throw new RangeError("offset is not uint");if(H+z>ne)throw new RangeError("Trying to access beyond buffer length")}function oe(H,z,ne,ge,xe,Re){if(!o.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>xe||z<Re)throw new RangeError('"value" argument is out of bounds');if(ne+ge>H.length)throw new RangeError("Index out of range")}function ie(H,z,ne,ge,xe,Re){if(ne+ge>H.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function pe(H,z,ne,ge,xe){return z=+z,ne>>>=0,xe||ie(H,0,ne,4),F.write(H,z,ne,ge,23,4),ne+4}function we(H,z,ne,ge,xe){return z=+z,ne>>>=0,xe||ie(H,0,ne,8),F.write(H,z,ne,ge,52,8),ne+8}o.prototype.slice=function(H,z){var ne=this.length;(H=~~H)<0?(H+=ne)<0&&(H=0):H>ne&&(H=ne),(z=void 0===z?ne:~~z)<0?(z+=ne)<0&&(z=0):z>ne&&(z=ne),z<H&&(z=H);var ge=this.subarray(H,z);return ge.__proto__=o.prototype,ge},o.prototype.readUIntLE=function(H,z,ne){H>>>=0,z>>>=0,ne||te(H,z,this.length);for(var ge=this[H],xe=1,Re=0;++Re<z&&(xe*=256);)ge+=this[H+Re]*xe;return ge},o.prototype.readUIntBE=function(H,z,ne){H>>>=0,z>>>=0,ne||te(H,z,this.length);for(var ge=this[H+--z],xe=1;z>0&&(xe*=256);)ge+=this[H+--z]*xe;return ge},o.prototype.readUInt8=function(H,z){return H>>>=0,z||te(H,1,this.length),this[H]},o.prototype.readUInt16LE=function(H,z){return H>>>=0,z||te(H,2,this.length),this[H]|this[H+1]<<8},o.prototype.readUInt16BE=function(H,z){return H>>>=0,z||te(H,2,this.length),this[H]<<8|this[H+1]},o.prototype.readUInt32LE=function(H,z){return H>>>=0,z||te(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+16777216*this[H+3]},o.prototype.readUInt32BE=function(H,z){return H>>>=0,z||te(H,4,this.length),16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])},o.prototype.readIntLE=function(H,z,ne){H>>>=0,z>>>=0,ne||te(H,z,this.length);for(var ge=this[H],xe=1,Re=0;++Re<z&&(xe*=256);)ge+=this[H+Re]*xe;return ge>=(xe*=128)&&(ge-=Math.pow(2,8*z)),ge},o.prototype.readIntBE=function(H,z,ne){H>>>=0,z>>>=0,ne||te(H,z,this.length);for(var ge=z,xe=1,Re=this[H+--ge];ge>0&&(xe*=256);)Re+=this[H+--ge]*xe;return Re>=(xe*=128)&&(Re-=Math.pow(2,8*z)),Re},o.prototype.readInt8=function(H,z){return H>>>=0,z||te(H,1,this.length),128&this[H]?-1*(255-this[H]+1):this[H]},o.prototype.readInt16LE=function(H,z){H>>>=0,z||te(H,2,this.length);var ne=this[H]|this[H+1]<<8;return 32768&ne?4294901760|ne:ne},o.prototype.readInt16BE=function(H,z){H>>>=0,z||te(H,2,this.length);var ne=this[H+1]|this[H]<<8;return 32768&ne?4294901760|ne:ne},o.prototype.readInt32LE=function(H,z){return H>>>=0,z||te(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},o.prototype.readInt32BE=function(H,z){return H>>>=0,z||te(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},o.prototype.readFloatLE=function(H,z){return H>>>=0,z||te(H,4,this.length),F.read(this,H,!0,23,4)},o.prototype.readFloatBE=function(H,z){return H>>>=0,z||te(H,4,this.length),F.read(this,H,!1,23,4)},o.prototype.readDoubleLE=function(H,z){return H>>>=0,z||te(H,8,this.length),F.read(this,H,!0,52,8)},o.prototype.readDoubleBE=function(H,z){return H>>>=0,z||te(H,8,this.length),F.read(this,H,!1,52,8)},o.prototype.writeUIntLE=function(H,z,ne,ge){H=+H,z>>>=0,ne>>>=0,ge||oe(this,H,z,ne,Math.pow(2,8*ne)-1,0);var xe=1,Re=0;for(this[z]=255&H;++Re<ne&&(xe*=256);)this[z+Re]=H/xe&255;return z+ne},o.prototype.writeUIntBE=function(H,z,ne,ge){H=+H,z>>>=0,ne>>>=0,ge||oe(this,H,z,ne,Math.pow(2,8*ne)-1,0);var xe=ne-1,Re=1;for(this[z+xe]=255&H;--xe>=0&&(Re*=256);)this[z+xe]=H/Re&255;return z+ne},o.prototype.writeUInt8=function(H,z,ne){return H=+H,z>>>=0,ne||oe(this,H,z,1,255,0),this[z]=255&H,z+1},o.prototype.writeUInt16LE=function(H,z,ne){return H=+H,z>>>=0,ne||oe(this,H,z,2,65535,0),this[z]=255&H,this[z+1]=H>>>8,z+2},o.prototype.writeUInt16BE=function(H,z,ne){return H=+H,z>>>=0,ne||oe(this,H,z,2,65535,0),this[z]=H>>>8,this[z+1]=255&H,z+2},o.prototype.writeUInt32LE=function(H,z,ne){return H=+H,z>>>=0,ne||oe(this,H,z,4,4294967295,0),this[z+3]=H>>>24,this[z+2]=H>>>16,this[z+1]=H>>>8,this[z]=255&H,z+4},o.prototype.writeUInt32BE=function(H,z,ne){return H=+H,z>>>=0,ne||oe(this,H,z,4,4294967295,0),this[z]=H>>>24,this[z+1]=H>>>16,this[z+2]=H>>>8,this[z+3]=255&H,z+4},o.prototype.writeIntLE=function(H,z,ne,ge){if(H=+H,z>>>=0,!ge){var xe=Math.pow(2,8*ne-1);oe(this,H,z,ne,xe-1,-xe)}var Re=0,He=1,We=0;for(this[z]=255&H;++Re<ne&&(He*=256);)H<0&&0===We&&0!==this[z+Re-1]&&(We=1),this[z+Re]=(H/He>>0)-We&255;return z+ne},o.prototype.writeIntBE=function(H,z,ne,ge){if(H=+H,z>>>=0,!ge){var xe=Math.pow(2,8*ne-1);oe(this,H,z,ne,xe-1,-xe)}var Re=ne-1,He=1,We=0;for(this[z+Re]=255&H;--Re>=0&&(He*=256);)H<0&&0===We&&0!==this[z+Re+1]&&(We=1),this[z+Re]=(H/He>>0)-We&255;return z+ne},o.prototype.writeInt8=function(H,z,ne){return H=+H,z>>>=0,ne||oe(this,H,z,1,127,-128),H<0&&(H=255+H+1),this[z]=255&H,z+1},o.prototype.writeInt16LE=function(H,z,ne){return H=+H,z>>>=0,ne||oe(this,H,z,2,32767,-32768),this[z]=255&H,this[z+1]=H>>>8,z+2},o.prototype.writeInt16BE=function(H,z,ne){return H=+H,z>>>=0,ne||oe(this,H,z,2,32767,-32768),this[z]=H>>>8,this[z+1]=255&H,z+2},o.prototype.writeInt32LE=function(H,z,ne){return H=+H,z>>>=0,ne||oe(this,H,z,4,2147483647,-2147483648),this[z]=255&H,this[z+1]=H>>>8,this[z+2]=H>>>16,this[z+3]=H>>>24,z+4},o.prototype.writeInt32BE=function(H,z,ne){return H=+H,z>>>=0,ne||oe(this,H,z,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[z]=H>>>24,this[z+1]=H>>>16,this[z+2]=H>>>8,this[z+3]=255&H,z+4},o.prototype.writeFloatLE=function(H,z,ne){return pe(this,H,z,!0,ne)},o.prototype.writeFloatBE=function(H,z,ne){return pe(this,H,z,!1,ne)},o.prototype.writeDoubleLE=function(H,z,ne){return we(this,H,z,!0,ne)},o.prototype.writeDoubleBE=function(H,z,ne){return we(this,H,z,!1,ne)},o.prototype.copy=function(H,z,ne,ge){if(!o.isBuffer(H))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),ge||0===ge||(ge=this.length),z>=H.length&&(z=H.length),z||(z=0),ge>0&&ge<ne&&(ge=ne),ge===ne||0===H.length||0===this.length)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("sourceEnd out of bounds");ge>this.length&&(ge=this.length),H.length-z<ge-ne&&(ge=H.length-z+ne);var xe=ge-ne;if(this===H&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(z,ne,ge);else if(this===H&&ne<z&&z<ge)for(var Re=xe-1;Re>=0;--Re)H[Re+z]=this[Re+ne];else Uint8Array.prototype.set.call(H,this.subarray(ne,ge),z);return xe},o.prototype.fill=function(H,z,ne,ge){if("string"==typeof H){if("string"==typeof z?(ge=z,z=0,ne=this.length):"string"==typeof ne&&(ge=ne,ne=this.length),void 0!==ge&&"string"!=typeof ge)throw new TypeError("encoding must be a string");if("string"==typeof ge&&!o.isEncoding(ge))throw new TypeError("Unknown encoding: "+ge);if(1===H.length){var xe=H.charCodeAt(0);("utf8"===ge&&xe<128||"latin1"===ge)&&(H=xe)}}else"number"==typeof H&&(H&=255);if(z<0||this.length<z||this.length<ne)throw new RangeError("Out of range index");if(ne<=z)return this;var Re;if(z>>>=0,ne=void 0===ne?this.length:ne>>>0,H||(H=0),"number"==typeof H)for(Re=z;Re<ne;++Re)this[Re]=H;else{var He=o.isBuffer(H)?H:o.from(H,ge),We=He.length;if(0===We)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(Re=0;Re<ne-z;++Re)this[Re+z]=He[Re%We]}return this};var Te=/[^+/0-9A-Za-z-_]/g;function Fe(H){return H<16?"0"+H.toString(16):H.toString(16)}function ke(H,z){var ne;z=z||1/0;for(var ge=H.length,xe=null,Re=[],He=0;He<ge;++He){if((ne=H.charCodeAt(He))>55295&&ne<57344){if(!xe){if(ne>56319){(z-=3)>-1&&Re.push(239,191,189);continue}if(He+1===ge){(z-=3)>-1&&Re.push(239,191,189);continue}xe=ne;continue}if(ne<56320){(z-=3)>-1&&Re.push(239,191,189),xe=ne;continue}ne=65536+(xe-55296<<10|ne-56320)}else xe&&(z-=3)>-1&&Re.push(239,191,189);if(xe=null,ne<128){if((z-=1)<0)break;Re.push(ne)}else if(ne<2048){if((z-=2)<0)break;Re.push(ne>>6|192,63&ne|128)}else if(ne<65536){if((z-=3)<0)break;Re.push(ne>>12|224,ne>>6&63|128,63&ne|128)}else{if(!(ne<1114112))throw new Error("Invalid code point");if((z-=4)<0)break;Re.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,63&ne|128)}}return Re}function de(H){return h.toByteArray(function(z){if((z=(z=z.split("=")[0]).trim().replace(Te,"")).length<2)return"";for(;z.length%4!=0;)z+="=";return z}(H))}function Le(H,z,ne,ge){for(var xe=0;xe<ge&&!(xe+ne>=z.length||xe>=H.length);++xe)z[xe+ne]=H[xe];return xe}function Me(H,z){return H instanceof z||null!=H&&null!=H.constructor&&null!=H.constructor.name&&H.constructor.name===z.name}function Ze(H){return H!=H}}).call(this)}).call(this,J("buffer").Buffer)},{"base64-js":2,buffer:9,ieee754:25}],10:[function(J,ae,ce){ae.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],11:[function(J,ae,ce){"use strict";var q=J("get-intrinsic"),h=J("./"),F=h(q("String.prototype.indexOf"));ae.exports=function(m,e){var o=q(m,!!e);return"function"==typeof o&&F(m,".prototype.")>-1?h(o):o}},{"./":12,"get-intrinsic":19}],12:[function(J,ae,ce){"use strict";var q=J("function-bind"),h=J("get-intrinsic"),F=h("%Function.prototype.apply%"),m=h("%Function.prototype.call%"),e=h("%Reflect.apply%",!0)||q.call(m,F),o=h("%Object.getOwnPropertyDescriptor%",!0),f=h("%Object.defineProperty%",!0),l=h("%Math.max%");if(f)try{f({},"a",{value:1})}catch(s){f=null}ae.exports=function(s){var v=e(q,m,arguments);return o&&f&&o(v,"length").configurable&&f(v,"length",{value:1+l(0,s.length-(arguments.length-1))}),v};var y=function(){return e(q,F,arguments)};f?f(ae.exports,"apply",{value:y}):ae.exports.apply=y},{"function-bind":18,"get-intrinsic":19}],13:[function(J,ae,ce){"use strict";ae.exports=function q(h){return null===h||"object"!=typeof h||null!=h.toJSON?JSON.stringify(h):Array.isArray(h)?"["+h.reduce((F,m,e)=>F+(0===e?"":",")+q(void 0===m||"symbol"==typeof m?null:m),"")+"]":"{"+Object.keys(h).sort().reduce((F,m,e)=>void 0===h[m]||"symbol"==typeof h[m]?F:F+(0===F.length?"":",")+q(m)+":"+q(h[m]),"")+"}"}},{}],14:[function(J,ae,ce){"use strict";var q=J("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if(q)try{q([],"length")}catch(h){q=null}ae.exports=q},{"get-intrinsic":19}],15:[function(J,ae,ce){"use strict";var q,h="object"==typeof Reflect?Reflect:null,F=h&&"function"==typeof h.apply?h.apply:function(A,T,B){return Function.prototype.apply.call(A,T,B)};q=h&&"function"==typeof h.ownKeys?h.ownKeys:Object.getOwnPropertySymbols?function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:function(A){return Object.getOwnPropertyNames(A)};var m=Number.isNaN||function(A){return A!=A};function e(){e.init.call(this)}ae.exports=e,ae.exports.once=function(A,T){return new Promise(function(B,N){function P(Q){A.removeListener(T,L),N(Q)}function L(){"function"==typeof A.removeListener&&A.removeListener("error",P),B([].slice.call(arguments))}var Q,j;b(A,T,L,{once:!0}),"error"!==T&&(j=P,"function"==typeof(Q=A).on&&b(Q,"error",j,{once:!0}))})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var o=10;function f(A){if("function"!=typeof A)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}function l(A){return void 0===A._maxListeners?e.defaultMaxListeners:A._maxListeners}function y(A,T,B,N){var P,L,Q,j;if(f(B),void 0===(L=A._events)?(L=A._events=Object.create(null),A._eventsCount=0):(void 0!==L.newListener&&(A.emit("newListener",T,B.listener?B.listener:B),L=A._events),Q=L[T]),void 0===Q)Q=L[T]=B,++A._eventsCount;else if("function"==typeof Q?Q=L[T]=N?[B,Q]:[Q,B]:N?Q.unshift(B):Q.push(B),(P=l(A))>0&&Q.length>P&&!Q.warned){Q.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+Q.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");V.name="MaxListenersExceededWarning",V.emitter=A,V.type=T,V.count=Q.length,j=V,console&&console.warn&&console.warn(j)}return A}function s(A,T,B){var N={fired:!1,wrapFn:void 0,target:A,type:T,listener:B},P=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(N);return P.listener=B,N.wrapFn=P,P}function v(A,T,B){var N=A._events;if(void 0===N)return[];var P=N[T];return void 0===P?[]:"function"==typeof P?B?[P.listener||P]:[P]:B?function(L){for(var Q=new Array(L.length),j=0;j<Q.length;++j)Q[j]=L[j].listener||L[j];return Q}(P):a(P,P.length)}function x(A){var T=this._events;if(void 0!==T){var B=T[A];if("function"==typeof B)return 1;if(void 0!==B)return B.length}return 0}function a(A,T){for(var B=new Array(T),N=0;N<T;++N)B[N]=A[N];return B}function b(A,T,B,N){if("function"==typeof A.on)N.once?A.once(T,B):A.on(T,B);else{if("function"!=typeof A.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A);A.addEventListener(T,function P(L){N.once&&A.removeEventListener(T,P),B(L)})}}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(A){if("number"!=typeof A||A<0||m(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");o=A}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(A){if("number"!=typeof A||A<0||m(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this},e.prototype.getMaxListeners=function(){return l(this)},e.prototype.emit=function(A){for(var T=[],B=1;B<arguments.length;B++)T.push(arguments[B]);var N="error"===A,P=this._events;if(void 0!==P)N=N&&void 0===P.error;else if(!N)return!1;if(N){var L;if(T.length>0&&(L=T[0]),L instanceof Error)throw L;var Q=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw Q.context=L,Q}var j=P[A];if(void 0===j)return!1;if("function"==typeof j)F(j,this,T);else{var V=j.length,W=a(j,V);for(B=0;B<V;++B)F(W[B],this,T)}return!0},e.prototype.addListener=function(A,T){return y(this,A,T,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(A,T){return y(this,A,T,!0)},e.prototype.once=function(A,T){return f(T),this.on(A,s(this,A,T)),this},e.prototype.prependOnceListener=function(A,T){return f(T),this.prependListener(A,s(this,A,T)),this},e.prototype.removeListener=function(A,T){var B,N,P,L,Q;if(f(T),void 0===(N=this._events))return this;if(void 0===(B=N[A]))return this;if(B===T||B.listener===T)0==--this._eventsCount?this._events=Object.create(null):(delete N[A],N.removeListener&&this.emit("removeListener",A,B.listener||T));else if("function"!=typeof B){for(P=-1,L=B.length-1;L>=0;L--)if(B[L]===T||B[L].listener===T){Q=B[L].listener,P=L;break}if(P<0)return this;0===P?B.shift():function(j,V){for(;V+1<j.length;V++)j[V]=j[V+1];j.pop()}(B,P),1===B.length&&(N[A]=B[0]),void 0!==N.removeListener&&this.emit("removeListener",A,Q||T)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(A){var T,B,N;if(void 0===(B=this._events))return this;if(void 0===B.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==B[A]&&(0==--this._eventsCount?this._events=Object.create(null):delete B[A]),this;if(0===arguments.length){var P,L=Object.keys(B);for(N=0;N<L.length;++N)"removeListener"!==(P=L[N])&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(T=B[A]))this.removeListener(A,T);else if(void 0!==T)for(N=T.length-1;N>=0;N--)this.removeListener(A,T[N]);return this},e.prototype.listeners=function(A){return v(this,A,!0)},e.prototype.rawListeners=function(A){return v(this,A,!1)},e.listenerCount=function(A,T){return"function"==typeof A.listenerCount?A.listenerCount(T):x.call(A,T)},e.prototype.listenerCount=x,e.prototype.eventNames=function(){return this._eventsCount>0?q(this._events):[]}},{}],16:[function(J,ae,ce){"use strict";var q=J("is-callable"),h=Object.prototype.toString,F=Object.prototype.hasOwnProperty;ae.exports=function(m,e,o){if(!q(e))throw new TypeError("iterator must be a function");var f;arguments.length>=3&&(f=o),"[object Array]"===h.call(m)?function(l,y,s){for(var v=0,x=l.length;v<x;v++)F.call(l,v)&&(null==s?y(l[v],v,l):y.call(s,l[v],v,l))}(m,e,f):"string"==typeof m?function(l,y,s){for(var v=0,x=l.length;v<x;v++)null==s?y(l.charAt(v),v,l):y.call(s,l.charAt(v),v,l)}(m,e,f):function(l,y,s){for(var v in l)F.call(l,v)&&(null==s?y(l[v],v,l):y.call(s,l[v],v,l))}(m,e,f)}},{"is-callable":28}],17:[function(J,ae,ce){"use strict";var q=Array.prototype.slice,h=Object.prototype.toString;ae.exports=function(F){var m=this;if("function"!=typeof m||"[object Function]"!==h.call(m))throw new TypeError("Function.prototype.bind called on incompatible "+m);for(var e,o=q.call(arguments,1),f=Math.max(0,m.length-o.length),l=[],y=0;y<f;y++)l.push("$"+y);if(e=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof e){var v=m.apply(this,o.concat(q.call(arguments)));return Object(v)===v?v:this}return m.apply(F,o.concat(q.call(arguments)))}),m.prototype){var s=function(){};s.prototype=m.prototype,e.prototype=new s,s.prototype=null}return e}},{}],18:[function(J,ae,ce){"use strict";var q=J("./implementation");ae.exports=Function.prototype.bind||q},{"./implementation":17}],19:[function(J,ae,ce){"use strict";var q=SyntaxError,h=Function,F=TypeError,m=function(W){try{return h('"use strict"; return ('+W+").constructor;")()}catch(R){}},e=Object.getOwnPropertyDescriptor;if(e)try{e({},"")}catch(W){e=null}var o=function(){throw new F},f=e?function(){try{return arguments.callee,o}catch(W){try{return e(arguments,"callee").get}catch(R){return o}}}():o,l=J("has-symbols")(),y=Object.getPrototypeOf||function(W){return W.__proto__},s={},v="undefined"==typeof Uint8Array?void 0:y(Uint8Array),x={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":l?y([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":s,"%AsyncGenerator%":s,"%AsyncGeneratorFunction%":s,"%AsyncIteratorPrototype%":s,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":h,"%GeneratorFunction%":s,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?y(y([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&l?y((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&l?y((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":l?y(""[Symbol.iterator]()):void 0,"%Symbol%":l?Symbol:void 0,"%SyntaxError%":q,"%ThrowTypeError%":f,"%TypedArray%":v,"%TypeError%":F,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},a={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=J("function-bind"),A=J("has"),T=b.call(Function.call,Array.prototype.concat),B=b.call(Function.apply,Array.prototype.splice),N=b.call(Function.call,String.prototype.replace),P=b.call(Function.call,String.prototype.slice),L=b.call(Function.call,RegExp.prototype.exec),Q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,j=/\\(\\)?/g,V=function(W,R){var Z,ee=W;if(A(a,ee)&&(ee="%"+(Z=a[ee])[0]+"%"),A(x,ee)){var le=x[ee];if(le===s&&(le=function te(oe){var ie;if("%AsyncFunction%"===oe)ie=m("async function () {}");else if("%GeneratorFunction%"===oe)ie=m("function* () {}");else if("%AsyncGeneratorFunction%"===oe)ie=m("async function* () {}");else if("%AsyncGenerator%"===oe){var pe=te("%AsyncGeneratorFunction%");pe&&(ie=pe.prototype)}else if("%AsyncIteratorPrototype%"===oe){var we=te("%AsyncGenerator%");we&&(ie=y(we.prototype))}return x[oe]=ie,ie}(ee)),void 0===le&&!R)throw new F("intrinsic "+W+" exists, but is not available. Please file an issue!");return{alias:Z,name:ee,value:le}}throw new q("intrinsic "+W+" does not exist!")};ae.exports=function(W,R){if("string"!=typeof W||0===W.length)throw new F("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof R)throw new F('"allowMissing" argument must be a boolean');if(null===L(/^%?[^%]*%?$/g,W))throw new q("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Z=function(Me){var Ze=P(Me,0,1),H=P(Me,-1);if("%"===Ze&&"%"!==H)throw new q("invalid intrinsic syntax, expected closing `%`");if("%"===H&&"%"!==Ze)throw new q("invalid intrinsic syntax, expected opening `%`");var z=[];return N(Me,Q,function(ne,ge,xe,Re){z[z.length]=xe?N(Re,j,"$1"):ge||ne}),z}(W),ee=Z.length>0?Z[0]:"",le=V("%"+ee+"%",R),te=le.name,oe=le.value,ie=!1,pe=le.alias;pe&&(ee=pe[0],B(Z,T([0,1],pe)));for(var we=1,Te=!0;we<Z.length;we+=1){var Fe=Z[we],ke=P(Fe,0,1),de=P(Fe,-1);if(('"'===ke||"'"===ke||"`"===ke||'"'===de||"'"===de||"`"===de)&&ke!==de)throw new q("property names with quotes must have matching quotes");if("constructor"!==Fe&&Te||(ie=!0),A(x,te="%"+(ee+="."+Fe)+"%"))oe=x[te];else if(null!=oe){if(!(Fe in oe)){if(!R)throw new F("base intrinsic for "+W+" exists, but the property is not available.");return}if(e&&we+1>=Z.length){var Le=e(oe,Fe);oe=(Te=!!Le)&&"get"in Le&&!("originalValue"in Le.get)?Le.get:oe[Fe]}else Te=A(oe,Fe),oe=oe[Fe];Te&&!ie&&(x[te]=oe)}}return oe}},{"function-bind":18,has:23,"has-symbols":20}],20:[function(J,ae,ce){"use strict";var q="undefined"!=typeof Symbol&&Symbol,h=J("./shams");ae.exports=function(){return"function"==typeof q&&"function"==typeof Symbol&&"symbol"==typeof q("foo")&&"symbol"==typeof Symbol("bar")&&h()}},{"./shams":21}],21:[function(J,ae,ce){"use strict";ae.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var q={},h=Symbol("test"),F=Object(h);if("string"==typeof h||"[object Symbol]"!==Object.prototype.toString.call(h)||"[object Symbol]"!==Object.prototype.toString.call(F))return!1;for(h in q[h]=42,q)return!1;if("function"==typeof Object.keys&&0!==Object.keys(q).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(q).length)return!1;var m=Object.getOwnPropertySymbols(q);if(1!==m.length||m[0]!==h||!Object.prototype.propertyIsEnumerable.call(q,h))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var e=Object.getOwnPropertyDescriptor(q,h);if(42!==e.value||!0!==e.enumerable)return!1}return!0}},{}],22:[function(J,ae,ce){"use strict";var q=J("has-symbols/shams");ae.exports=function(){return q()&&!!Symbol.toStringTag}},{"has-symbols/shams":21}],23:[function(J,ae,ce){"use strict";var q=J("function-bind");ae.exports=q.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":18}],24:[function(J,ae,ce){var q=J("http"),h=J("url"),F=ae.exports;for(var m in q)q.hasOwnProperty(m)&&(F[m]=q[m]);function e(o){if("string"==typeof o&&(o=h.parse(o)),o.protocol||(o.protocol="https:"),"https:"!==o.protocol)throw new Error('Protocol "'+o.protocol+'" not supported. Expected "https:"');return o}F.request=function(o,f){return o=e(o),q.request.call(this,o,f)},F.get=function(o,f){return o=e(o),q.get.call(this,o,f)}},{http:103,url:124}],25:[function(J,ae,ce){ce.read=function(q,h,F,m,e){var o,f,l=8*e-m-1,y=(1<<l)-1,s=y>>1,v=-7,x=F?e-1:0,a=F?-1:1,b=q[h+x];for(x+=a,o=b&(1<<-v)-1,b>>=-v,v+=l;v>0;o=256*o+q[h+x],x+=a,v-=8);for(f=o&(1<<-v)-1,o>>=-v,v+=m;v>0;f=256*f+q[h+x],x+=a,v-=8);if(0===o)o=1-s;else{if(o===y)return f?NaN:1/0*(b?-1:1);f+=Math.pow(2,m),o-=s}return(b?-1:1)*f*Math.pow(2,o-m)},ce.write=function(q,h,F,m,e,o){var f,l,y,s=8*o-e-1,v=(1<<s)-1,x=v>>1,a=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,b=m?0:o-1,A=m?1:-1,T=h<0||0===h&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(l=isNaN(h)?1:0,f=v):(f=Math.floor(Math.log(h)/Math.LN2),h*(y=Math.pow(2,-f))<1&&(f--,y*=2),(h+=f+x>=1?a/y:a*Math.pow(2,1-x))*y>=2&&(f++,y/=2),f+x>=v?(l=0,f=v):f+x>=1?(l=(h*y-1)*Math.pow(2,e),f+=x):(l=h*Math.pow(2,x-1)*Math.pow(2,e),f=0));e>=8;q[F+b]=255&l,b+=A,l/=256,e-=8);for(f=f<<e|l,s+=e;s>0;q[F+b]=255&f,b+=A,f/=256,s-=8);q[F+b-A]|=128*T}},{}],26:[function(J,ae,ce){"function"==typeof Object.create?ae.exports=function(q,h){h&&(q.super_=h,q.prototype=Object.create(h.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}))}:ae.exports=function(q,h){if(h){q.super_=h;var F=function(){};F.prototype=h.prototype,q.prototype=new F,q.prototype.constructor=q}}},{}],27:[function(J,ae,ce){"use strict";var q=J("has-tostringtag/shams")(),h=J("call-bind/callBound")("Object.prototype.toString"),F=function(o){return!(q&&o&&"object"==typeof o&&Symbol.toStringTag in o)&&"[object Arguments]"===h(o)},m=function(o){return!!F(o)||null!==o&&"object"==typeof o&&"number"==typeof o.length&&o.length>=0&&"[object Array]"!==h(o)&&"[object Function]"===h(o.callee)},e=function(){return F(arguments)}();F.isLegacyArguments=m,ae.exports=e?F:m},{"call-bind/callBound":11,"has-tostringtag/shams":22}],28:[function(J,ae,ce){"use strict";var q,h,F=Function.prototype.toString,m="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof m&&"function"==typeof Object.defineProperty)try{q=Object.defineProperty({},"length",{get:function(){throw h}}),h={},m(function(){throw 42},null,q)}catch(s){s!==h&&(m=null)}else m=null;var e=/^\s*class\b/,o=function(s){try{var v=F.call(s);return e.test(v)}catch(x){return!1}},f=Object.prototype.toString,l="function"==typeof Symbol&&!!Symbol.toStringTag,y="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};ae.exports=m?function(s){if(s===y)return!0;if(!s||"function"!=typeof s&&"object"!=typeof s)return!1;if("function"==typeof s&&!s.prototype)return!0;try{m(s,null,q)}catch(v){if(v!==h)return!1}return!o(s)}:function(s){if(s===y)return!0;if(!s||"function"!=typeof s&&"object"!=typeof s)return!1;if("function"==typeof s&&!s.prototype)return!0;if(l)return function(x){try{return!o(x)&&(F.call(x),!0)}catch(a){return!1}}(s);if(o(s))return!1;var v=f.call(s);return"[object Function]"===v||"[object GeneratorFunction]"===v}},{}],29:[function(J,ae,ce){"use strict";var q,h=Object.prototype.toString,F=Function.prototype.toString,m=/^\s*(?:function)?\*/,e=J("has-tostringtag/shams")(),o=Object.getPrototypeOf;ae.exports=function(f){if("function"!=typeof f)return!1;if(m.test(F.call(f)))return!0;if(!e)return"[object GeneratorFunction]"===h.call(f);if(!o)return!1;if(void 0===q){var l=function(){if(!e)return!1;try{return Function("return function*() {}")()}catch(y){}}();q=!!l&&o(l)}return o(f)===q}},{"has-tostringtag/shams":22}],30:[function(J,ae,ce){(function(q){(function(){"use strict";var h=J("for-each"),F=J("available-typed-arrays"),m=J("call-bind/callBound"),e=m("Object.prototype.toString"),o=J("has-tostringtag/shams")(),f="undefined"==typeof globalThis?q:globalThis,l=F(),y=m("Array.prototype.indexOf",!0)||function(b,A){for(var T=0;T<b.length;T+=1)if(b[T]===A)return T;return-1},s=m("String.prototype.slice"),v={},x=J("es-abstract/helpers/getOwnPropertyDescriptor"),a=Object.getPrototypeOf;o&&x&&a&&h(l,function(b){var A=new f[b];if(Symbol.toStringTag in A){var T=a(A),B=x(T,Symbol.toStringTag);if(!B){var N=a(T);B=x(N,Symbol.toStringTag)}v[b]=B.get}}),ae.exports=function(b){if(!b||"object"!=typeof b)return!1;if(!o||!(Symbol.toStringTag in b)){var A=s(e(b),8,-1);return y(l,A)>-1}return!!x&&(T=b,B=!1,h(v,function(N,P){if(!B)try{B=N.call(T)===P}catch(L){}}),B);var T,B}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":1,"call-bind/callBound":11,"es-abstract/helpers/getOwnPropertyDescriptor":14,"for-each":16,"has-tostringtag/shams":22}],31:[function(J,ae,ce){"use strict";const{isArray:q,isObject:h,isString:F}=J("./types"),{prependBase:m}=J("./url"),e=J("./JsonLdError"),o=J("./ResolvedContext");function f(l){throw new e("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:l})}ae.exports=class{constructor({sharedCache:l}){this.perOpCache=new Map,this.sharedCache=l}async resolve({context:l,documentLoader:y,base:s,cycles:v=new Set}){l&&h(l)&&l["@context"]&&(l=l["@context"]),q(l)||(l=[l]);const x=[];for(const a of l){if(F(a)){let T=this._get(a);T||(T=await this._resolveRemoteContext({url:a,documentLoader:y,base:s,cycles:v})),q(T)?x.push(...T):x.push(T);continue}if(null===a){x.push(new o({document:null}));continue}h(a)||f(l);const b=JSON.stringify(a);let A=this._get(b);A||(A=new o({document:a}),this._cacheResolvedContext({key:b,resolved:A,tag:"static"})),x.push(A)}return x}_get(l){let y=this.perOpCache.get(l);if(!y){const s=this.sharedCache.get(l);s&&(y=s.get("static"))&&this.perOpCache.set(l,y)}return y}_cacheResolvedContext({key:l,resolved:y,tag:s}){if(this.perOpCache.set(l,y),void 0!==s){let v=this.sharedCache.get(l);v||(v=new Map,this.sharedCache.set(l,v)),v.set(s,y)}return y}async _resolveRemoteContext({url:l,documentLoader:y,base:s,cycles:v}){l=m(s,l);const{context:x,remoteDoc:a}=await this._fetchContext({url:l,documentLoader:y,cycles:v});!function A({context:T,base:B}){if(!T)return;const N=T["@context"];if(F(N))T["@context"]=m(B,N);else if(q(N))for(let P=0;P<N.length;++P){const L=N[P];F(L)?N[P]=m(B,L):h(L)&&A({context:{"@context":L},base:B})}else if(h(N))for(const P in N)A({context:N[P],base:B})}({context:x,base:s=a.documentUrl||l});const b=await this.resolve({context:x,documentLoader:y,base:s,cycles:v});return this._cacheResolvedContext({key:l,resolved:b,tag:a.tag}),b}async _fetchContext({url:l,documentLoader:y,cycles:s}){if(s.size>10)throw new e("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:10});if(s.has(l))throw new e("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:l});let v,x;s.add(l);try{v=(x=await y(l)).document||null,F(v)&&(v=JSON.parse(v))}catch(a){throw new e("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:l,cause:a})}if(!h(v))throw new e("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:l});return v="@context"in v?{"@context":v["@context"]}:{"@context":{}},x.contextUrl&&(q(v["@context"])||(v["@context"]=[v["@context"]]),v["@context"].push(x.contextUrl)),{context:v,remoteDoc:x}}}},{"./JsonLdError":32,"./ResolvedContext":37,"./types":51,"./url":52}],32:[function(J,ae,ce){"use strict";ae.exports=class extends Error{constructor(q="An unspecified JSON-LD error occurred.",h="jsonld.Error",F={}){super(q),this.name=h,this.message=q,this.details=F}}},{}],33:[function(J,ae,ce){"use strict";ae.exports=q=>{class h{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(h,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(h.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:h}),h.compact=function(F,m){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):q.compact(F,m)},h.expand=function(F){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):q.expand(F)},h.flatten=function(F){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):q.flatten(F)},h}},{}],34:[function(J,ae,ce){"use strict";ae.exports=J("rdf-canonize").NQuads},{"rdf-canonize":84}],35:[function(J,ae,ce){"use strict";const{RDF_LANGSTRING:q,RDF_PLAIN_LITERAL:h,RDF_OBJECT:F,RDF_XML_LITERAL:m,XSD_STRING:e}=J("./constants");let o;o="undefined"!=typeof Node?Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},ae.exports=class{parse(l){const y={"@default":[]},s=l.getSubjects();for(let v=0;v<s.length;++v){const x=s[v];if(null===x)continue;const a=l.getSubjectTriples(x);if(null===a)continue;const b=a.predicates;for(const A in b){const T=b[A].objects;for(let B=0;B<T.length;++B){const N=T[B],P={};0===x.indexOf("_:")?P.subject={type:"blank node",value:x}:P.subject={type:"IRI",value:x},0===A.indexOf("_:")?P.predicate={type:"blank node",value:A}:P.predicate={type:"IRI",value:A};let L=N.value;if(N.type===m){const Q=new("undefined"==typeof XMLSerializer?J("xmldom").XMLSerializer:XMLSerializer);L="";for(let j=0;j<N.value.length;j++)N.value[j].nodeType===o.ELEMENT_NODE?L+=Q.serializeToString(N.value[j]):N.value[j].nodeType===o.TEXT_NODE&&(L+=N.value[j].nodeValue)}P.object={},N.type===F?0===N.value.indexOf("_:")?P.object.type="blank node":P.object.type="IRI":(P.object.type="literal",N.type===h?N.language?(P.object.datatype=q,P.object.language=N.language):P.object.datatype=e:P.object.datatype=N.type),P.object.value=L,y["@default"].push(P)}}}return y}}},{"./constants":39,xmldom:4}],36:[function(J,ae,ce){"use strict";ae.exports=class{constructor(){this._requests={}}wrapLoader(q){const h=this;return h._loader=q,function(){return h.add.apply(h,arguments)}}async add(q){let h=this._requests[q];if(h)return Promise.resolve(h);h=this._requests[q]=this._loader(q);try{return await h}finally{delete this._requests[q]}}}},{}],37:[function(J,ae,ce){"use strict";const q=J("lru-cache");ae.exports=class{constructor({document:h}){this.document=h,this.cache=new q({max:10})}getProcessed(h){return this.cache.get(h)}setProcessed(h,F){this.cache.set(h,F)}}},{"lru-cache":54}],38:[function(J,ae,ce){"use strict";const q=J("./JsonLdError"),{isArray:h,isObject:F,isString:m,isUndefined:e}=J("./types"),{isList:o,isValue:f,isGraph:l,isSimpleGraph:y,isSubjectReference:s}=J("./graphTypes"),{expandIri:v,getContextValue:x,isKeyword:a,process:b,processingMode:A}=J("./context"),{removeBase:T}=J("./url"),{addValue:B,asArray:N,compareShortestLeast:P}=J("./util"),L={};function Q(j,V,W){if("@nest"!==v(j,V,{vocab:!0},W))throw new q("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}ae.exports=L,L.compact=async({activeCtx:j,activeProperty:V=null,element:W,options:R={},compactionMap:Z=(()=>{})})=>{if(h(W)){let le=[];for(let te=0;te<W.length;++te){let oe=await L.compact({activeCtx:j,activeProperty:V,element:W[te],options:R,compactionMap:Z});null===oe&&void 0===(oe=await Z({unmappedValue:W[te],activeCtx:j,activeProperty:V,parent:W,index:te,options:R}))||le.push(oe)}return R.compactArrays&&1===le.length&&0===(x(j,V,"@container")||[]).length&&(le=le[0]),le}const ee=x(j,V,"@context");if(e(ee)||(j=await b({activeCtx:j,localCtx:ee,propagate:!0,overrideProtected:!0,options:R})),F(W)){if(R.link&&"@id"in W&&R.link.hasOwnProperty(W["@id"])){const Fe=R.link[W["@id"]];for(let ke=0;ke<Fe.length;++ke)if(Fe[ke].expanded===W)return Fe[ke].compacted}if(f(W)||s(W)){const Fe=L.compactValue({activeCtx:j,activeProperty:V,value:W,options:R});return R.link&&s(W)&&(R.link.hasOwnProperty(W["@id"])||(R.link[W["@id"]]=[]),R.link[W["@id"]].push({expanded:W,compacted:Fe})),Fe}if(o(W)&&(x(j,V,"@container")||[]).includes("@list"))return L.compact({activeCtx:j,activeProperty:V,element:W["@list"],options:R,compactionMap:Z});const le="@reverse"===V,te={},oe=j;f(W)||s(W)||(j=j.revertToPreviousContext());const ie=x(oe,V,"@context");e(ie)||(j=await b({activeCtx:j,localCtx:ie,propagate:!0,overrideProtected:!0,options:R})),R.link&&"@id"in W&&(R.link.hasOwnProperty(W["@id"])||(R.link[W["@id"]]=[]),R.link[W["@id"]].push({expanded:W,compacted:te}));let pe=W["@type"]||[];pe.length>1&&(pe=Array.from(pe).sort());const we=j;for(const Fe of pe){const ke=L.compactIri({activeCtx:we,iri:Fe,relativeTo:{vocab:!0}}),de=x(oe,ke,"@context");e(de)||(j=await b({activeCtx:j,localCtx:de,options:R,propagate:!1}))}const Te=Object.keys(W).sort();for(const Fe of Te){const ke=W[Fe];if("@id"!==Fe)if("@type"!==Fe)if("@reverse"!==Fe)if("@preserve"!==Fe)if("@index"!==Fe)if("@graph"!==Fe&&"@list"!==Fe&&a(Fe)){const de=L.compactIri({activeCtx:j,iri:Fe,relativeTo:{vocab:!0}});B(te,de,ke)}else{if(!h(ke))throw new q("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===ke.length){const de=L.compactIri({activeCtx:j,iri:Fe,value:ke,relativeTo:{vocab:!0},reverse:le}),Le=j.mappings.has(de)?j.mappings.get(de)["@nest"]:null;let Me=te;Le&&(Q(j,Le,R),F(te[Le])||(te[Le]={}),Me=te[Le]),B(Me,de,ke,{propertyIsArray:!0})}for(const de of ke){const Le=L.compactIri({activeCtx:j,iri:Fe,value:de,relativeTo:{vocab:!0},reverse:le}),Me=j.mappings.has(Le)?j.mappings.get(Le)["@nest"]:null;let Ze=te;Me&&(Q(j,Me,R),F(te[Me])||(te[Me]={}),Ze=te[Me]);const H=x(j,Le,"@container")||[],z=l(de),ne=o(de);let ge;ne?ge=de["@list"]:z&&(ge=de["@graph"]);let xe=await L.compact({activeCtx:j,activeProperty:Le,element:ne||z?ge:de,options:R,compactionMap:Z});if(ne){if(h(xe)||(xe=[xe]),H.includes("@list")){B(Ze,Le,xe,{valueIsArray:!0,allowDuplicate:!0});continue}xe={[L.compactIri({activeCtx:j,iri:"@list",relativeTo:{vocab:!0}})]:xe},"@index"in de&&(xe[L.compactIri({activeCtx:j,iri:"@index",relativeTo:{vocab:!0}})]=de["@index"])}if(z)if(H.includes("@graph")&&(H.includes("@id")||H.includes("@index")&&y(de))){let Re;Ze.hasOwnProperty(Le)?Re=Ze[Le]:Ze[Le]=Re={};const He=(H.includes("@id")?de["@id"]:de["@index"])||L.compactIri({activeCtx:j,iri:"@none",vocab:!0});B(Re,He,xe,{propertyIsArray:!R.compactArrays||H.includes("@set")})}else H.includes("@graph")&&y(de)?(h(xe)&&xe.length>1&&(xe={"@included":xe}),B(Ze,Le,xe,{propertyIsArray:!R.compactArrays||H.includes("@set")})):(h(xe)&&1===xe.length&&R.compactArrays&&(xe=xe[0]),xe={[L.compactIri({activeCtx:j,iri:"@graph",relativeTo:{vocab:!0}})]:xe},"@id"in de&&(xe[L.compactIri({activeCtx:j,iri:"@id",relativeTo:{vocab:!0}})]=de["@id"]),"@index"in de&&(xe[L.compactIri({activeCtx:j,iri:"@index",relativeTo:{vocab:!0}})]=de["@index"]),B(Ze,Le,xe,{propertyIsArray:!R.compactArrays||H.includes("@set")}));else if(H.includes("@language")||H.includes("@index")||H.includes("@id")||H.includes("@type")){let Re,He;if(Ze.hasOwnProperty(Le)?Re=Ze[Le]:Ze[Le]=Re={},H.includes("@language"))f(xe)&&(xe=xe["@value"]),He=de["@language"];else if(H.includes("@index")){const We=x(j,Le,"@index")||"@index",Ke=L.compactIri({activeCtx:j,iri:We,vocab:!0});if("@index"===We)He=de["@index"],delete xe[Ke];else{let mt;if([He,...mt]=N(xe[We]||[]),m(He))switch(mt.length){case 0:delete xe[We];break;case 1:xe[We]=mt[0];break;default:xe[We]=mt}else He=null}}else if(H.includes("@id")){const We=L.compactIri({activeCtx:j,iri:"@id",vocab:!0});He=xe[We],delete xe[We]}else if(H.includes("@type")){const We=L.compactIri({activeCtx:j,iri:"@type",vocab:!0});let Ke;switch([He,...Ke]=N(xe[We]||[]),Ke.length){case 0:delete xe[We];break;case 1:xe[We]=Ke[0];break;default:xe[We]=Ke}1===Object.keys(xe).length&&"@id"in de&&(xe=await L.compact({activeCtx:j,activeProperty:Le,element:{"@id":de["@id"]},options:R,compactionMap:Z}))}He||(He=L.compactIri({activeCtx:j,iri:"@none",vocab:!0})),B(Re,He,xe,{propertyIsArray:H.includes("@set")})}else{const Re=!R.compactArrays||H.includes("@set")||H.includes("@list")||h(xe)&&0===xe.length||"@list"===Fe||"@graph"===Fe;B(Ze,Le,xe,{propertyIsArray:Re})}}}else{if((x(j,V,"@container")||[]).includes("@index"))continue;const de=L.compactIri({activeCtx:j,iri:Fe,relativeTo:{vocab:!0}});B(te,de,ke)}else{const de=await L.compact({activeCtx:j,activeProperty:V,element:ke,options:R,compactionMap:Z});h(de)&&0===de.length||B(te,Fe,de)}else{const de=await L.compact({activeCtx:j,activeProperty:"@reverse",element:ke,options:R,compactionMap:Z});for(const Le in de)if(j.mappings.has(Le)&&j.mappings.get(Le).reverse){const Me=de[Le],Ze=(x(j,Le,"@container")||[]).includes("@set")||!R.compactArrays;B(te,Le,Me,{propertyIsArray:Ze}),delete de[Le]}if(Object.keys(de).length>0){const Le=L.compactIri({activeCtx:j,iri:Fe,relativeTo:{vocab:!0}});B(te,Le,de)}}else{let de=N(ke).map(Ze=>L.compactIri({activeCtx:oe,iri:Ze,relativeTo:{vocab:!0}}));1===de.length&&(de=de[0]);const Le=L.compactIri({activeCtx:j,iri:"@type",relativeTo:{vocab:!0}}),Me=(x(j,Le,"@container")||[]).includes("@set")&&A(j,1.1)||h(de)&&0===ke.length;B(te,Le,de,{propertyIsArray:Me})}else{let de=N(ke).map(Le=>L.compactIri({activeCtx:j,iri:Le,relativeTo:{vocab:!1}}));1===de.length&&(de=de[0]),te[L.compactIri({activeCtx:j,iri:"@id",relativeTo:{vocab:!0}})]=de}}return te}return W},L.compactIri=({activeCtx:j,iri:V,value:W=null,relativeTo:R={vocab:!1},reverse:Z=!1})=>{if(null===V)return V;j.isPropertyTermScoped&&j.previousContext&&(j=j.previousContext);const ee=j.getInverse();if(a(V)&&V in ee&&"@none"in ee[V]&&"@type"in ee[V]["@none"]&&"@none"in ee[V]["@none"]["@type"])return ee[V]["@none"]["@type"]["@none"];if(R.vocab&&V in ee){const pe=j["@language"]||"@none",we=[];F(W)&&"@index"in W&&!("@graph"in W)&&we.push("@index","@index@set"),F(W)&&"@preserve"in W&&(W=W["@preserve"][0]),l(W)?("@index"in W&&we.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in W&&we.push("@graph@id","@graph@id@set"),we.push("@graph","@graph@set","@set"),"@index"in W||we.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in W||we.push("@graph@id","@graph@id@set")):F(W)&&!f(W)&&we.push("@id","@id@set","@type","@set@type");let Te="@language",Fe="@null";if(Z)Te="@type",Fe="@reverse",we.push("@set");else if(o(W)){"@index"in W||we.push("@list");const de=W["@list"];if(0===de.length)Te="@any",Fe="@none";else{let Le=0===de.length?pe:null,Me=null;for(let Ze=0;Ze<de.length;++Ze){const H=de[Ze];let z="@none",ne="@none";if(f(H)?"@language"in H?z=H["@language"]:"@type"in H?ne=H["@type"]:z="@null":ne="@id",null===Le?Le=z:z!==Le&&f(H)&&(Le="@none"),null===Me?Me=ne:ne!==Me&&(Me="@none"),"@none"===Le&&"@none"===Me)break}Le=Le||"@none","@none"!==(Me=Me||"@none")?(Te="@type",Fe=Me):Fe=Le}}else f(W)?"@language"in W&&!("@index"in W)?(we.push("@language","@language@set"),Fe=W["@language"]):"@type"in W&&(Te="@type",Fe=W["@type"]):(Te="@type",Fe="@id"),we.push("@set");we.push("@none"),!F(W)||"@index"in W||we.push("@index","@index@set"),f(W)&&1===Object.keys(W).length&&we.push("@language","@language@set");const ke=function(de,Le,Me,Ze,H,z){null===z&&(z="@null");const ne=[];if(("@id"===z||"@reverse"===z)&&F(Me)&&"@id"in Me){"@reverse"===z&&ne.push("@reverse");const xe=L.compactIri({activeCtx:de,iri:Me["@id"],relativeTo:{vocab:!0}});de.mappings.has(xe)&&de.mappings.get(xe)&&de.mappings.get(xe)["@id"]===Me["@id"]?ne.push.apply(ne,["@vocab","@id"]):ne.push.apply(ne,["@id","@vocab"])}else ne.push(z);ne.push("@none");const ge=de.inverse[Le];for(const xe of Ze){if(!(xe in ge))continue;const Re=ge[xe][H];for(const He of ne)if(He in Re)return Re[He]}return null}(j,V,W,we,Te,Fe);if(null!==ke)return ke}if(R.vocab&&"@vocab"in j){const pe=j["@vocab"];if(0===V.indexOf(pe)&&V!==pe){const we=V.substr(pe.length);if(!j.mappings.has(we))return we}}let le=null;const te=[];let oe=j.fastCurieMap;const ie=V.length-1;for(let pe=0;pe<ie&&V[pe]in oe;++pe)""in(oe=oe[V[pe]])&&te.push(oe[""][0]);for(let pe=te.length-1;pe>=0;--pe){const we=te[pe],Te=we.terms;for(const Fe of Te){const ke=Fe+":"+V.substr(we.iri.length);j.mappings.get(Fe)._prefix&&(!j.mappings.has(ke)||null===W&&j.mappings.get(ke)["@id"]===V)&&(null===le||P(ke,le)<0)&&(le=ke)}}if(null!==le)return le;for(const[pe,we]of j.mappings)if(we&&we._prefix&&V.startsWith(pe+":"))throw new q(`Absolute IRI "${V}" confused with prefix "${pe}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:j});return R.vocab?V:T(j["@base"],V)},L.compactValue=({activeCtx:j,activeProperty:V,value:W,options:R})=>{if(f(W)){const te=x(j,V,"@type"),oe=x(j,V,"@language"),ie=x(j,V,"@container")||[],pe="@index"in W&&!ie.includes("@index");if(!pe&&"@none"!==te&&(W["@type"]===te||W["@language"]===oe))return W["@value"];const we=Object.keys(W).length,Te=1===we||2===we&&"@index"in W&&!pe,Fe="@language"in j,ke=m(W["@value"]),de=j.mappings.has(V)&&null===j.mappings.get(V)["@language"];if(Te&&"@none"!==te&&(!Fe||!ke||de))return W["@value"];const Le={};return pe&&(Le[L.compactIri({activeCtx:j,iri:"@index",relativeTo:{vocab:!0}})]=W["@index"]),"@type"in W?Le[L.compactIri({activeCtx:j,iri:"@type",relativeTo:{vocab:!0}})]=L.compactIri({activeCtx:j,iri:W["@type"],relativeTo:{vocab:!0}}):"@language"in W&&(Le[L.compactIri({activeCtx:j,iri:"@language",relativeTo:{vocab:!0}})]=W["@language"]),Le[L.compactIri({activeCtx:j,iri:"@value",relativeTo:{vocab:!0}})]=W["@value"],Le}const Z=v(j,V,{vocab:!0},R),ee=x(j,V,"@type"),le=L.compactIri({activeCtx:j,iri:W["@id"],relativeTo:{vocab:"@vocab"===ee}});return"@id"===ee||"@vocab"===ee||"@graph"===Z?le:{[L.compactIri({activeCtx:j,iri:"@id",relativeTo:{vocab:!0}})]:le}},L.removePreserve=(j,V,W)=>{if(h(V)){const R=[];for(let Z=0;Z<V.length;++Z){const ee=L.removePreserve(j,V[Z],W);null!==ee&&R.push(ee)}V=R}else if(F(V)){if("@preserve"in V)return"@null"===V["@preserve"]?null:V["@preserve"];if(f(V))return V;if(o(V))return V["@list"]=L.removePreserve(j,V["@list"],W),V;const R=L.compactIri({activeCtx:j,iri:"@id",relativeTo:{vocab:!0}});if(V.hasOwnProperty(R)){const ee=V[R];if(W.link.hasOwnProperty(ee)){const le=W.link[ee].indexOf(V);if(-1!==le)return W.link[ee][le];W.link[ee].push(V)}else W.link[ee]=[V]}const Z=L.compactIri({activeCtx:j,iri:"@graph",relativeTo:{vocab:!0}});for(const ee in V){if(ee===R&&W.bnodesToClear.includes(V[ee])){delete V[R];continue}let le=L.removePreserve(j,V[ee],W);const te=x(j,ee,"@container")||[];W.compactArrays&&h(le)&&1===le.length&&0===te.length&&ee!==Z&&(le=le[0]),V[ee]=le}}return V}},{"./JsonLdError":32,"./context":40,"./graphTypes":47,"./types":51,"./url":52,"./util":53}],39:[function(J,ae,ce){"use strict";const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#",h="http://www.w3.org/2001/XMLSchema#";ae.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",RDF:q,RDF_LIST:q+"List",RDF_FIRST:q+"first",RDF_REST:q+"rest",RDF_NIL:q+"nil",RDF_TYPE:q+"type",RDF_PLAIN_LITERAL:q+"PlainLiteral",RDF_XML_LITERAL:q+"XMLLiteral",RDF_JSON_LITERAL:q+"JSON",RDF_OBJECT:q+"object",RDF_LANGSTRING:q+"langString",XSD:h,XSD_BOOLEAN:h+"boolean",XSD_DOUBLE:h+"double",XSD_INTEGER:h+"integer",XSD_STRING:h+"string"}},{}],40:[function(J,ae,ce){"use strict";const q=J("./util"),h=J("./JsonLdError"),{isArray:F,isObject:m,isString:e,isUndefined:o}=J("./types"),{isAbsolute:f,isRelative:l,prependBase:y,parse:s}=J("./url"),{asArray:v,compareShortestLeast:x}=J("./util"),a=new Map,b={};function A(T,B,N,P,L,Q){if(null===B||!e(B)||b.isKeyword(B))return B;if(P&&P.hasOwnProperty(B)&&!0!==L.get(B)&&b.createTermDefinition({activeCtx:T,localCtx:P,term:B,defined:L,options:Q}),(N=N||{}).vocab){const V=T.mappings.get(B);if(null===V)return null;if(V)return V["@id"]}const j=B.indexOf(":");if(j>0){const V=B.substr(0,j),W=B.substr(j+1);if("_"===V||0===W.indexOf("//"))return B;P&&P.hasOwnProperty(V)&&b.createTermDefinition({activeCtx:T,localCtx:P,term:V,defined:L,options:Q});const R=T.mappings.get(V);if(R&&R._prefix)return R["@id"]+W;if(f(B))return B}return N.vocab&&"@vocab"in T?T["@vocab"]+B:N.base?y(T["@base"],B):B}ae.exports=b,b.process=async({activeCtx:T,localCtx:B,options:N,propagate:P=!0,overrideProtected:L=!1})=>{if(m(B)&&"@context"in B&&F(B["@context"])&&(B=B["@context"]),0===v(B).length)return T;const Q=await N.contextResolver.resolve({context:B,documentLoader:N.documentLoader,base:N.base});m(Q[0].document)&&"boolean"==typeof Q[0].document["@propagate"]&&(P=Q[0].document["@propagate"]);let j=T;P||j.previousContext||((j=j.clone()).previousContext=T);for(const V of Q){let{document:W}=V;if(T=j,null===W){if(!L&&0!==Object.keys(T.protected).length){const ee=N&&N.protectedMode||"error";if("error"===ee)throw new h("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===ee){console.warn("WARNING: invalid context nullification");const le=T;j=T=b.getInitialContext(N).clone();for(const[te,oe]of Object.entries(le.protected))oe&&(T.mappings[te]=q.clone(le.mappings[te]));T.protected=q.clone(le.protected),V.setProcessed(le,j);continue}throw new h("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:B,protectedMode:ee})}j=T=b.getInitialContext(N).clone();continue}const R=V.getProcessed(T);if(R){j=T=R;continue}if(m(W)&&"@context"in W&&(W=W["@context"]),!m(W))throw new h("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:W});j=j.clone();const Z=new Map;if("@version"in W){if(1.1!==W["@version"])throw new h("Unsupported JSON-LD version: "+W["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:W});if(T.processingMode&&"json-ld-1.0"===T.processingMode)throw new h("@version: "+W["@version"]+" not compatible with "+T.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:W});j.processingMode="json-ld-1.1",j["@version"]=W["@version"],Z.set("@version",!0)}if(j.processingMode=j.processingMode||T.processingMode,"@base"in W){let ee=W["@base"];if(null!==ee)if(f(ee))ee=s(ee);else{if(!l(ee))throw new h('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:W});ee=s(y(j["@base"].href,ee))}j["@base"]=ee,Z.set("@base",!0)}if("@vocab"in W){const ee=W["@vocab"];if(null===ee)delete j["@vocab"];else{if(!e(ee))throw new h('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:W});if(!f(ee)&&b.processingMode(j,1))throw new h('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:W});j["@vocab"]=A(j,ee,{vocab:!0,base:!0},void 0,void 0,N)}Z.set("@vocab",!0)}if("@language"in W){const ee=W["@language"];if(null===ee)delete j["@language"];else{if(!e(ee))throw new h('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:W});j["@language"]=ee.toLowerCase()}Z.set("@language",!0)}if("@propagate"in W){const ee=W["@propagate"];if("json-ld-1.0"===T.processingMode)throw new h("Invalid JSON-LD syntax; @propagate not compatible with "+T.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:W});if("boolean"!=typeof ee)throw new h("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:B});Z.set("@propagate",!0)}Z.set("@protected",W["@protected"]||!1);for(const ee in W)b.createTermDefinition({activeCtx:j,localCtx:W,term:ee,defined:Z,options:N,overrideProtected:L});V.setProcessed(T,j)}return j},b.createTermDefinition=({activeCtx:T,localCtx:B,term:N,defined:P,options:L,overrideProtected:Q=!1})=>{if(P.has(N)){if(P.get(N))return;throw new h("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:B,term:N})}let j;if(P.set(N,!1),B.hasOwnProperty(N)&&(j=B[N]),"@type"===N&&m(j)&&"@set"===j["@container"]&&b.processingMode(T,1.1)){const te=["@container","@id","@protected"];if(Object.keys(j).some(oe=>!te.includes(oe)))throw new h("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:B,term:N})}else{if(b.isKeyword(N))throw new h("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:B,term:N});if(""===N)throw new h("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:B})}const V=T.mappings.get(N);if(T.mappings.has(N)&&T.mappings.delete(N),null===j||m(j)&&null===j["@id"])return T.mappings.set(N,null),void P.set(N,!0);let W=!1;if(e(j)&&(W=!0,j={"@id":j}),!m(j))throw new h("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:B});const R={};T.mappings.set(N,R),R.reverse=!1;const Z=["@container","@id","@language","@reverse","@type"];b.processingMode(T,1.1)&&Z.push("@context","@index","@nest","@prefix","@protected");for(const te in j)if(!Z.includes(te))throw new h("Invalid JSON-LD syntax; a term definition must not contain "+te,"jsonld.SyntaxError",{code:"invalid term definition",context:B});const ee=N.indexOf(":");if(R._termHasColon=ee>0,"@reverse"in j){if("@id"in j)throw new h("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});if("@nest"in j)throw new h("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});const te=j["@reverse"];if(!e(te))throw new h("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});const oe=A(T,te,{vocab:!0,base:!1},B,P,L);if(!f(oe))throw new h("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});R["@id"]=oe,R.reverse=!0}else if("@id"in j){let te=j["@id"];if(!e(te))throw new h("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(te!==N){if(te=A(T,te,{vocab:!0,base:!1},B,P,L),!f(te)&&!b.isKeyword(te))throw new h("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});R["@id"]=te,R._prefix=W&&!R._termHasColon&&te.match(/[:\/\?#\[\]@]$/)}}if(!("@id"in R))if(R._termHasColon){const te=N.substr(0,ee);if(B.hasOwnProperty(te)&&b.createTermDefinition({activeCtx:T,localCtx:B,term:te,defined:P,options:L}),T.mappings.has(te)){const oe=N.substr(ee+1);R["@id"]=T.mappings.get(te)["@id"]+oe}else R["@id"]=N}else if("@type"==N)R["@id"]=N;else{if(!("@vocab"in T))throw new h("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B,term:N});R["@id"]=T["@vocab"]+N}if((!0===j["@protected"]||!0===P.get("@protected")&&!1!==j["@protected"])&&(T.protected[N]=!0,R.protected=!0),P.set(N,!0),"@type"in j){let te=j["@type"];if(!e(te))throw new h("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:B});if("@json"===te||"@none"===te){if(b.processingMode(T,1))throw new h(`Invalid JSON-LD syntax; an @context @type value must not be "${te}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:B})}else if("@id"!==te&&"@vocab"!==te){if(te=A(T,te,{vocab:!0,base:!1},B,P,L),!f(te))throw new h("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:B});if(0===te.indexOf("_:"))throw new h("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:B})}R["@type"]=te}if("@container"in j){const te=e(j["@container"])?[j["@container"]]:j["@container"]||[],oe=["@list","@set","@index","@language"];let ie=!0;const pe=te.includes("@set");if(b.processingMode(T,1.1)){if(oe.push("@graph","@id","@type"),te.includes("@list")){if(1!==te.length)throw new h("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:B})}else if(te.includes("@graph")){if(te.some(we=>"@graph"!==we&&"@id"!==we&&"@index"!==we&&"@set"!==we))throw new h("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:B})}else ie&=te.length<=(pe?2:1);if(te.includes("@type")&&(R["@type"]=R["@type"]||"@id",!["@id","@vocab"].includes(R["@type"])))throw new h("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:B})}else ie&=!F(j["@container"]),ie&=te.length<=1;if(ie&=te.every(we=>oe.includes(we)),!(ie&=!(pe&&te.includes("@list"))))throw new h("Invalid JSON-LD syntax; @context @container value must be one of the following: "+oe.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:B});if(R.reverse&&!te.every(we=>["@index","@set"].includes(we)))throw new h("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});R["@container"]=te}if("@index"in j){if(!("@container"in j)||!R["@container"].includes("@index"))throw new h(`Invalid JSON-LD syntax; @index without @index in @container: "${j["@index"]}" on term "${N}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:B});if(!e(j["@index"])||0===j["@index"].indexOf("@"))throw new h(`Invalid JSON-LD syntax; @index must expand to an IRI: "${j["@index"]}" on term "${N}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:B});R["@index"]=j["@index"]}if("@context"in j&&(R["@context"]=j["@context"]),"@language"in j&&!("@type"in j)){let te=j["@language"];if(null!==te&&!e(te))throw new h("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:B});null!==te&&(te=te.toLowerCase()),R["@language"]=te}if("@prefix"in j){if(R._termHasColon)throw new h("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:B});if("boolean"!=typeof j["@prefix"])throw new h("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:B});R._prefix=!0===j["@prefix"]}if("@nest"in j){const te=j["@nest"];if(!e(te)||"@nest"!==te&&0===te.indexOf("@"))throw new h("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:B});R["@nest"]=te}const le=R["@id"];if("@context"===le||"@preserve"===le)throw new h("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:B});if(V&&V.protected&&!Q&&(T.protected[N]=!0,R.protected=!0,!function te(oe,ie){if(!oe||"object"!=typeof oe||!ie||"object"!=typeof ie)return oe===ie;const pe=Array.isArray(oe);if(pe!==Array.isArray(ie))return!1;if(pe){if(oe.length!==ie.length)return!1;for(let Fe=0;Fe<oe.length;++Fe)if(!te(oe[Fe],ie[Fe]))return!1;return!0}const we=Object.keys(oe),Te=Object.keys(ie);if(we.length!==Te.length)return!1;for(const Fe in oe){let ke=oe[Fe],de=ie[Fe];if("@container"===Fe&&Array.isArray(ke)&&Array.isArray(de)&&(ke=ke.slice().sort(),de=de.slice().sort()),!te(ke,de))return!1}return!0}(V,R))){const te=L&&L.protectedMode||"error";if("error"===te)throw new h("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:B,term:N});if("warn"===te)return void console.warn("WARNING: protected term redefinition",{term:N});throw new h("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:B,term:N,protectedMode:te})}},b.expandIri=(T,B,N,P)=>A(T,B,N,void 0,void 0,P),b.getInitialContext=T=>{const B=s(T.base||""),N=JSON.stringify({base:B,processingMode:T.processingMode}),P=a.get(N);if(P)return P;const L={"@base":B,processingMode:T.processingMode,mappings:new Map,inverse:null,getInverse:function(){const V=this;if(V.inverse)return V.inverse;const W=V.inverse={},R=V.fastCurieMap={},Z={},ee=V["@language"]||"@none",le=V.mappings,te=[...le.keys()].sort(x);for(const oe of te){const ie=le.get(oe);if(null===ie)continue;let pe=ie["@container"]||"@none";pe=[].concat(pe).sort().join("");const we=v(ie["@id"]);for(const Te of we){let Fe=W[Te];const ke=b.isKeyword(Te);if(Fe)ke||ie._termHasColon||Z[Te].push(oe);else if(W[Te]=Fe={},!ke&&!ie._termHasColon){Z[Te]=[oe];const de={iri:Te,terms:Z[Te]};Te[0]in R?R[Te[0]].push(de):R[Te[0]]=[de]}if(Fe[pe]||(Fe[pe]={"@language":{},"@type":{},"@any":{}}),Fe=Fe[pe],j(oe,Fe["@any"],"@none"),ie.reverse)j(oe,Fe["@type"],"@reverse");else if("@none"===ie["@type"])j(oe,Fe["@any"],"@none"),j(oe,Fe["@language"],"@none"),j(oe,Fe["@type"],"@none");else if("@type"in ie)j(oe,Fe["@type"],ie["@type"]);else if("@language"in ie){const de=ie["@language"]||"@null";j(oe,Fe["@language"],de)}else j(oe,Fe["@language"],ee),j(oe,Fe["@type"],"@none"),j(oe,Fe["@language"],"@none")}}for(const oe in R)Q(R,oe,1);return W},clone:function(){const V={};return V["@base"]=this["@base"],V.mappings=q.clone(this.mappings),V.clone=this.clone,V.inverse=null,V.getInverse=this.getInverse,V.protected=q.clone(this.protected),this.previousContext&&(V.previousContext=this.previousContext.clone()),V.revertToPreviousContext=this.revertToPreviousContext,"@language"in this&&(V["@language"]=this["@language"]),"@vocab"in this&&(V["@vocab"]=this["@vocab"]),V},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===a.size&&a.clear(),a.set(N,L),L;function Q(V,W,R){const Z=V[W],ee=V[W]={};let le,te;for(const oe of Z)(te=R>=(le=oe.iri).length?"":le[R])in ee?ee[te].push(oe):ee[te]=[oe];for(const oe in ee)""!==oe&&Q(ee,oe,R+1)}function j(V,W,R){W.hasOwnProperty(R)||(W[R]=V)}},b.getContextValue=(T,B,N)=>{if(null===B)return"@context"===N?void 0:null;if(T.mappings.has(B)){const P=T.mappings.get(B);if(o(N))return P;if(P.hasOwnProperty(N))return P[N]}return"@language"===N&&T.hasOwnProperty(N)?T[N]:"@context"!==N?null:void 0},b.processingMode=(T,B)=>B.toString()>="1.1"?!T.processingMode||T.processingMode>="json-ld-"+B.toString():"json-ld-1.0"===T.processingMode,b.isKeyword=T=>{if(!e(T)||"@"!==T[0])return!1;switch(T){case"@base":case"@container":case"@context":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":32,"./types":51,"./url":52,"./util":53}],41:[function(J,ae,ce){"use strict";const{parseLinkHeader:q,buildHeaders:h}=J("../util"),{LINK_HEADER_REL:F}=J("../constants"),m=J("../JsonLdError"),e=J("../RequestQueue");ae.exports=({secure:o,strictSSL:f=!0,maxRedirects:l=-1,request:y,headers:s={}}={strictSSL:!0,maxRedirects:-1,headers:{}})=>{s=h(s),y=y||J("request");const v=J("http");return(new e).wrapLoader(function(x){return async function a(b,A){if(0!==b.indexOf("http:")&&0!==b.indexOf("https:"))throw new m('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:b});if(o&&0!==b.indexOf("https"))throw new m('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:b});let B,T=null;if(null!==T)return T;try{B=await(Q=y,j={url:b,headers:s,strictSSL:f,followRedirect:!1},new Promise((V,W)=>{Q(j,(R,Z,ee)=>{R?W(R):V({res:Z,body:ee})})}))}catch(Q){throw new m("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:b,cause:Q})}var Q,j;const{res:N,body:P}=B;T={contextUrl:null,documentUrl:b,document:P||null};const L=v.STATUS_CODES[N.statusCode];if(N.statusCode>=400)throw new m(`URL "${b}" could not be dereferenced: ${L}`,"jsonld.InvalidUrl",{code:"loading document failed",url:b,httpStatusCode:N.statusCode});if(N.headers.link&&"application/ld+json"!==N.headers["content-type"]){const Q=q(N.headers.link)[F];if(Array.isArray(Q))throw new m("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:b});Q&&(T.contextUrl=Q.target)}if(N.statusCode>=300&&N.statusCode<400&&N.headers.location){if(A.length===l)throw new m("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:b,httpStatusCode:N.statusCode,redirects:A});if(-1!==A.indexOf(b))throw new m("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:b,httpStatusCode:N.statusCode,redirects:A});return A.push(b),a(N.headers.location,A)}return A.push(b),T}(x,[])})}},{"../JsonLdError":32,"../RequestQueue":36,"../constants":39,"../util":53,http:4,request:4}],42:[function(J,ae,ce){"use strict";const{parseLinkHeader:q,buildHeaders:h}=J("../util"),{LINK_HEADER_REL:F}=J("../constants"),m=J("../JsonLdError"),e=J("../RequestQueue"),o=/(^|(\r\n))link:/i;ae.exports=({secure:f,headers:l={},xhr:y}={headers:{}})=>(l=h(l),(new e).wrapLoader(async function(s){if(0!==s.indexOf("http:")&&0!==s.indexOf("https:"))throw new m('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:s});if(f&&0!==s.indexOf("https"))throw new m('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:s});let v;try{v=await function(A,T,B){const N=new(A=A||XMLHttpRequest);return new Promise((P,L)=>{N.onload=()=>P(N),N.onerror=Q=>L(Q),N.open("GET",T,!0);for(const Q in B)N.setRequestHeader(Q,B[Q]);N.send()})}(y,s,l)}catch(A){throw new m("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:s,cause:A})}if(v.status>=400)throw new m("URL could not be dereferenced: "+v.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:s,httpStatusCode:v.status});const x={contextUrl:null,documentUrl:s,document:v.response},a=v.getResponseHeader("Content-Type");let b;if(o.test(v.getAllResponseHeaders())&&(b=v.getResponseHeader("Link")),b&&"application/ld+json"!==a){if(b=q(b)[F],Array.isArray(b))throw new m("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:s});b&&(x.contextUrl=b.target)}return x}))},{"../JsonLdError":32,"../RequestQueue":36,"../constants":39,"../util":53}],43:[function(J,ae,ce){"use strict";const q=J("./JsonLdError"),{isArray:h,isObject:F,isEmptyObject:m,isString:e,isUndefined:o}=J("./types"),{isList:f,isValue:l,isGraph:y}=J("./graphTypes"),{expandIri:s,getContextValue:v,isKeyword:x,process:a,processingMode:b}=J("./context"),{isAbsolute:A}=J("./url"),{addValue:T,asArray:B,getValues:N,validateTypeValue:P}=J("./util"),L={};function Q({activeCtx:W,activeProperty:R,value:Z,options:ee}){if(null==Z)return null;const le=s(W,R,{vocab:!0},ee);if("@id"===le)return s(W,Z,{base:!0},ee);if("@type"===le)return s(W,Z,{vocab:!0,base:!0},ee);const te=v(W,R,"@type");if(("@id"===te||"@graph"===le)&&e(Z))return{"@id":s(W,Z,{base:!0},ee)};if("@vocab"===te&&e(Z))return{"@id":s(W,Z,{vocab:!0,base:!0},ee)};if(x(le))return Z;const oe={};if(te&&!["@id","@vocab","@none"].includes(te))oe["@type"]=te;else if(e(Z)){const ie=v(W,R,"@language");null!==ie&&(oe["@language"]=ie)}return["boolean","number","string"].includes(typeof Z)||(Z=Z.toString()),oe["@value"]=Z,oe}function j(W,R,Z){const ee=[],le=Object.keys(R).sort();for(const te of le){const oe=s(W,te,{vocab:!0},Z);let ie=R[te];h(ie)||(ie=[ie]);for(const pe of ie){if(null===pe)continue;if(!e(pe))throw new q("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:R});const we={"@value":pe};"@none"!==oe&&(we["@language"]=te.toLowerCase()),ee.push(we)}}return ee}async function V({activeCtx:W,options:R,activeProperty:Z,value:ee,expansionMap:le,asGraph:te,indexKey:oe,propertyIndex:ie}){const pe=[],we=Object.keys(ee).sort(),Te="@type"===oe;for(let Fe of we){if(Te){const Le=v(W,Fe,"@context");o(Le)||(W=await a({activeCtx:W,localCtx:Le,propagate:!1,options:R}))}let ke,de=ee[Fe];h(de)||(de=[de]),de=await L.expand({activeCtx:W,activeProperty:Z,element:de,options:R,insideList:!1,insideIndex:!0,expansionMap:le}),ke=ie?"@none"===Fe?"@none":Q({activeCtx:W,activeProperty:oe,value:Fe,options:R}):s(W,Fe,{vocab:!0},R),"@id"===oe?Fe=s(W,Fe,{base:!0},R):Te&&(Fe=ke);for(let Le of de){if(te&&!y(Le)&&(Le={"@graph":[Le]}),"@type"===oe)"@none"===ke||(Le["@type"]?Le["@type"]=[Fe].concat(Le["@type"]):Le["@type"]=[Fe]);else{if(l(Le)&&!["@language","@type","@index"].includes(oe))throw new q(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${oe}".`,"jsonld.SyntaxError",{code:"invalid value object",value:Le});ie?"@none"!==ke&&T(Le,ie,ke,{propertyIsArray:!0,prependValue:!0}):"@none"===ke||oe in Le||(Le[oe]=Fe)}pe.push(Le)}}return pe}ae.exports=L,L.expand=async({activeCtx:W,activeProperty:R=null,element:Z,options:ee={},insideList:le=!1,insideIndex:te=!1,typeScopedContext:oe=null,expansionMap:ie=(()=>{})})=>{if(null==Z)return null;if("@default"===R&&(ee=Object.assign({},ee,{isFrame:!1})),!h(Z)&&!F(Z)){if(!le&&(null===R||"@graph"===s(W,R,{vocab:!0},ee))){const Me=await ie({unmappedValue:Z,activeCtx:W,activeProperty:R,options:ee,insideList:le});return void 0===Me?null:Me}return Q({activeCtx:W,activeProperty:R,value:Z,options:ee})}if(h(Z)){let Me=[];const Ze=v(W,R,"@container")||[];le=le||Ze.includes("@list");for(let H=0;H<Z.length;++H){let z=await L.expand({activeCtx:W,activeProperty:R,element:Z[H],options:ee,expansionMap:ie,insideIndex:te,typeScopedContext:oe});le&&h(z)&&(z={"@list":z}),null===z&&void 0===(z=await ie({unmappedValue:Z[H],activeCtx:W,activeProperty:R,parent:Z,index:H,options:ee,expandedParent:Me,insideList:le}))||(h(z)?Me=Me.concat(z):Me.push(z))}return Me}const pe=s(W,R,{vocab:!0},ee),we=v(W,R,"@context");oe=oe||(W.previousContext?W:null);let Te=Object.keys(Z).sort(),Fe=!te;if(Fe&&oe&&Te.length<=2&&!Te.includes("@context"))for(const Me of Te){const Ze=s(oe,Me,{vocab:!0},ee);if("@value"===Ze){Fe=!1,W=oe;break}if("@id"===Ze&&1===Te.length){Fe=!1;break}}Fe&&(W=W.revertToPreviousContext()),o(we)||(W=await a({activeCtx:W,localCtx:we,propagate:!0,overrideProtected:!0,options:ee})),"@context"in Z&&(W=await a({activeCtx:W,localCtx:Z["@context"],options:ee})),oe=W;let ke=null;for(const Me of Te)if("@type"===s(W,Me,{vocab:!0},ee)){ke=ke||Me;const Ze=Z[Me],H=Array.isArray(Ze)?Ze.length>1?Ze.slice().sort():Ze:[Ze];for(const z of H){const ne=v(oe,z,"@context");o(ne)||(W=await a({activeCtx:W,localCtx:ne,options:ee,propagate:!1}))}}let de={};await async function Me({activeCtx:Ze,activeProperty:H,expandedActiveProperty:z,element:ne,expandedParent:ge,options:xe={},insideList:Re,typeScopedContext:He,typeKey:We,expansionMap:Ke}){const mt=Object.keys(ne).sort(),yt=[];let Mt;const Yt=ne[We]&&"@json"==s(Ze,h(ne[We])?ne[We][0]:ne[We],{vocab:!0},xe);for(const Se of mt){let Ie,Ne=ne[Se];if("@context"===Se)continue;let Y=s(Ze,Se,{vocab:!0},xe);if((null===Y||!A(Y)&&!x(Y))&&void 0===(Y=Ke({unmappedProperty:Se,activeCtx:Ze,activeProperty:H,parent:ne,options:xe,insideList:Re,value:Ne,expandedParent:ge})))continue;if(x(Y)){if("@reverse"===z)throw new q("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Ne});if(Y in ge)throw new q("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:Y})}if("@id"===Y){if(!e(Ne)){if(!xe.isFrame)throw new q('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Ne});if(F(Ne)){if(!m(Ne))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ne})}else{if(!h(Ne))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ne});if(!Ne.every(_e=>e(_e)))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Ne})}}T(ge,"@id",B(Ne).map(_e=>e(_e)?s(Ze,_e,{base:!0},xe):_e),{propertyIsArray:xe.isFrame});continue}if("@type"===Y){P(Ne),T(ge,"@type",B(Ne).map(_e=>e(_e)?s(He,_e,{base:!0,vocab:!0},xe):_e),{propertyIsArray:xe.isFrame});continue}if("@graph"===Y&&!F(Ne)&&!h(Ne))throw new q('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Ne});if("@value"===Y){Mt=Ne,Yt&&b(Ze,1.1)?ge["@value"]=Ne:T(ge,"@value",Ne,{propertyIsArray:xe.isFrame});continue}if("@language"===Y){if(null===Ne)continue;if(!e(Ne)&&!xe.isFrame)throw new q('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Ne});Ne=B(Ne).map(_e=>e(_e)?_e.toLowerCase():_e),T(ge,"@language",Ne,{propertyIsArray:xe.isFrame});continue}if("@index"===Y){if(!e(Ne))throw new q('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Ne});T(ge,"@index",Ne);continue}if("@reverse"===Y){if(!F(Ne))throw new q('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Ne});if("@reverse"in(Ie=await L.expand({activeCtx:Ze,activeProperty:"@reverse",element:Ne,options:xe,expansionMap:Ke})))for(const Ce in Ie["@reverse"])T(ge,Ce,Ie["@reverse"][Ce],{propertyIsArray:!0});let _e=ge["@reverse"]||null;for(const Ce in Ie){if("@reverse"===Ce)continue;null===_e&&(_e=ge["@reverse"]={}),T(_e,Ce,[],{propertyIsArray:!0});const Oe=Ie[Ce];for(let Pe=0;Pe<Oe.length;++Pe){const Ge=Oe[Pe];if(l(Ge)||f(Ge))throw new q('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ie});T(_e,Ce,Ge,{propertyIsArray:!0})}}continue}if("@nest"===Y){yt.push(Se);continue}let he=Ze;const ve=v(Ze,Se,"@context");o(ve)||(he=await a({activeCtx:Ze,localCtx:ve,propagate:!0,overrideProtected:!0,options:xe}));const me=v(he,Se,"@container")||[];if(me.includes("@language")&&F(Ne))Ie=j(he,Ne,xe);else if(me.includes("@index")&&F(Ne)){const _e=me.includes("@graph"),Ce=v(he,Se,"@index")||"@index",Oe="@index"!==Ce&&s(Ze,Ce,{vocab:!0},xe);Ie=await V({activeCtx:he,options:xe,activeProperty:Se,value:Ne,expansionMap:Ke,asGraph:_e,indexKey:Ce,propertyIndex:Oe})}else if(me.includes("@id")&&F(Ne)){const _e=me.includes("@graph");Ie=await V({activeCtx:he,options:xe,activeProperty:Se,value:Ne,expansionMap:Ke,asGraph:_e,indexKey:"@id"})}else if(me.includes("@type")&&F(Ne))Ie=await V({activeCtx:he.revertToPreviousContext(),options:xe,activeProperty:Se,value:Ne,expansionMap:Ke,asGraph:!1,indexKey:"@type"});else{const _e="@list"===Y;if(_e||"@set"===Y){let Ce=H;_e&&"@graph"===z&&(Ce=null),Ie=await L.expand({activeCtx:he,activeProperty:Ce,element:Ne,options:xe,insideList:_e,expansionMap:Ke})}else Ie="@json"===v(Ze,Se,"@type")?{"@type":"@json","@value":Ne}:await L.expand({activeCtx:he,activeProperty:Se,element:Ne,options:xe,insideList:!1,expansionMap:Ke})}if(null!==Ie||"@value"===Y||void 0!==(Ie=Ke({unmappedValue:Ne,expandedProperty:Y,activeCtx:he,activeProperty:H,parent:ne,options:xe,insideList:Re,key:Se,expandedParent:ge})))if("@list"!==Y&&!f(Ie)&&me.includes("@list")&&(Ie={"@list":B(Ie)}),me.includes("@graph")&&!me.some(_e=>"@id"===_e||"@index"===_e)&&(Ie=B(Ie).map(_e=>({"@graph":B(_e)}))),he.mappings.has(Se)&&he.mappings.get(Se).reverse){const _e=ge["@reverse"]=ge["@reverse"]||{};Ie=B(Ie);for(let Ce=0;Ce<Ie.length;++Ce){const Oe=Ie[Ce];if(l(Oe)||f(Oe))throw new q('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ie});T(_e,Y,Oe,{propertyIsArray:!0})}}else T(ge,Y,Ie,{propertyIsArray:!0})}if("@value"in ge&&("@json"!==ge["@type"]||!b(Ze,1.1))&&(F(Mt)||h(Mt))&&!xe.isFrame)throw new q('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Mt});for(const Se of yt){const Ie=h(ne[Se])?ne[Se]:[ne[Se]];for(const Ne of Ie){if(!F(Ne)||Object.keys(Ne).some(Y=>"@value"===s(Ze,Y,{vocab:!0},xe)))throw new q("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Ne});await Me({activeCtx:Ze,activeProperty:H,expandedActiveProperty:z,element:Ne,expandedParent:ge,options:xe,insideList:Re,typeKey:We,expansionMap:Ke})}}}({activeCtx:W,activeProperty:R,expandedActiveProperty:pe,element:Z,expandedParent:de,options:ee,insideList:le,typeScopedContext:oe,typeKey:ke,expansionMap:ie});let Le=(Te=Object.keys(de)).length;if("@value"in de){if("@type"in de&&"@language"in de)throw new q('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:de});let Me=Le-1;if("@type"in de&&(Me-=1),"@index"in de&&(Me-=1),"@language"in de&&(Me-=1),0!==Me)throw new q('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:de});const Ze=null===de["@value"]?[]:B(de["@value"]),H=N(de,"@type");if(!b(W,1.1)||!H.includes("@json")||1!==H.length)if(0===Ze.length){const z=await ie({unmappedValue:de,activeCtx:W,activeProperty:R,element:Z,options:ee,insideList:le});de=void 0!==z?z:null}else{if(!Ze.every(z=>e(z)||m(z))&&"@language"in de)throw new q("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:de});if(!H.every(z=>A(z)&&!(e(z)&&0===z.indexOf("_:"))||m(z)))throw new q('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:de})}}else if("@type"in de&&!h(de["@type"]))de["@type"]=[de["@type"]];else if("@set"in de||"@list"in de){if(Le>1&&(2!==Le||!("@index"in de)))throw new q('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:de});"@set"in de&&(de=de["@set"],Le=(Te=Object.keys(de)).length)}else if(1===Le&&"@language"in de){const Me=await ie(de,{unmappedValue:de,activeCtx:W,activeProperty:R,element:Z,options:ee,insideList:le});de=void 0!==Me?Me:null}if(F(de)&&!ee.keepFreeFloatingNodes&&!le&&(null===R||"@graph"===pe)&&(0===Le||"@value"in de||"@list"in de||1===Le&&"@id"in de)){const Me=await ie({unmappedValue:de,activeCtx:W,activeProperty:R,element:Z,options:ee,insideList:le});de=void 0!==Me?Me:null}return de}},{"./JsonLdError":32,"./context":40,"./graphTypes":47,"./types":51,"./url":52,"./util":53}],44:[function(J,ae,ce){"use strict";const{isSubjectReference:q}=J("./graphTypes"),{createMergedNodeMap:h}=J("./nodeMap"),F={};ae.exports=F,F.flatten=m=>{const e=h(m),o=[],f=Object.keys(e).sort();for(let l=0;l<f.length;++l){const y=e[f[l]];q(y)||o.push(y)}return o}},{"./graphTypes":47,"./nodeMap":49}],45:[function(J,ae,ce){"use strict";const{isKeyword:q}=J("./context"),h=J("./graphTypes"),F=J("./types"),m=J("./util"),e=J("./JsonLdError"),{createNodeMap:o,mergeNodeMapGraphs:f}=J("./nodeMap"),l={};function y(N){const P={};for(const L in N)void 0!==N[L]&&(P["@"+L]=[N[L]]);return[P]}function s(N,P,L){for(let Q=L.length-1;Q>=0;--Q){const j=L[Q];if(j.graph===P&&j.subject["@id"]===N["@id"])return!0}return!1}function v(N,P,L){const Q="@"+L;let j=Q in N?N[Q][0]:P[L];return"embed"===L&&(!0===j?j="@last":!1===j?j="@never":"@always"!==j&&"@never"!==j&&"@link"!==j&&(j="@last")),j}function x(N){if(!F.isArray(N)||1!==N.length||!F.isObject(N[0]))throw new e("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:N})}function a(N,P,L,Q){let j=!0,V=!1;for(const W in L){let R=!1;const Z=m.getValues(P,W),ee=0===m.getValues(L,W).length;if(q(W)){if("@id"!==W&&"@type"!==W)continue;if(j=!1,"@id"===W){if(L["@id"].length>=0&&!F.isEmptyObject(L["@id"][0]))return L["@id"].includes(Z[0]);R=!0;continue}if("@type"in L)if(ee){if(Z.length>0)return!1;R=!0}else{if(1!==L["@type"].length||!F.isEmptyObject(L["@type"][0])){for(const oe of L["@type"])if(Z.some(ie=>ie===oe))return!0;return!1}R=Z.length>0}}const le=m.getValues(L,W)[0];let te=!1;if(le&&(x([le]),te="@default"in le),j=!1,0!==Z.length||!te){if(Z.length>0&&ee)return!1;if(void 0===le){if(Z.length>0)return!1;R=!0}else if(F.isObject(le))R=Z.length>0;else if(h.isValue(le))R=Z.some(oe=>B(le,oe));else if(h.isSubject(le)||h.isSubjectReference(le))R=Z.some(oe=>T(N,le,oe,Q));else if(h.isList(le)){const oe=le["@list"][0];if(h.isList(Z[0])){const ie=Z[0]["@list"];h.isValue(oe)?R=ie.some(pe=>B(oe,pe)):(h.isSubject(oe)||h.isSubjectReference(oe))&&(R=ie.some(pe=>T(N,oe,pe,Q)))}else R=!1}if(!R&&Q.requireAll)return!1;V=V||R}}return j||V}function b(N,P){const L=N.uniqueEmbeds[N.graph],Q=L[P],j=Q.parent,V=Q.property,W={"@id":P};if(F.isArray(j)){for(let Z=0;Z<j.length;++Z)if(m.compareValues(j[Z],W)){j[Z]=W;break}}else{const Z=F.isArray(j[V]);m.removeValue(j,V,W,{propertyIsArray:Z}),m.addValue(j,V,W,{propertyIsArray:Z})}const R=Z=>{const ee=Object.keys(L);for(const le of ee)le in L&&F.isObject(L[le].parent)&&L[le].parent["@id"]===Z&&(delete L[le],R(le))};R(P)}function A(N,P,L){F.isObject(N)?m.addValue(N,P,L,{propertyIsArray:!0}):N.push(L)}function T(N,P,L,Q){if(!("@id"in L))return!1;const j=N.subjects[L["@id"]];return j&&a(N,j,P,Q)}function B(N,P){const L=P["@value"],Q=P["@type"],j=P["@language"],V=N["@value"]?F.isArray(N["@value"])?N["@value"]:[N["@value"]]:[],W=N["@type"]?F.isArray(N["@type"])?N["@type"]:[N["@type"]]:[],R=N["@language"]?F.isArray(N["@language"])?N["@language"]:[N["@language"]]:[];return 0===V.length&&0===W.length&&0===R.length||!(!V.includes(L)&&!F.isEmptyObject(V[0]))&&!!(!Q&&0===W.length||W.includes(Q)||Q&&F.isEmptyObject(W[0]))&&!!(!j&&0===R.length||R.includes(j)||j&&F.isEmptyObject(R[0]))}ae.exports=l,l.frameMergedOrDefault=(N,P,L)=>{const Q={options:L,graph:"@default",graphMap:{"@default":{}},graphStack:[],subjectStack:[],link:{},bnodeMap:{}},j=new m.IdentifierIssuer("_:b");o(N,Q.graphMap,"@default",j),L.merged&&(Q.graphMap["@merged"]=f(Q.graphMap),Q.graph="@merged"),Q.subjects=Q.graphMap[Q.graph];const V=[];return l.frame(Q,Object.keys(Q.subjects).sort(),P,V),L.pruneBlankNodeIdentifiers&&(L.bnodesToClear=Object.keys(Q.bnodeMap).filter(W=>1===Q.bnodeMap[W].length)),V},l.frame=(N,P,L,Q,j=null)=>{x(L),L=L[0];const V=N.options,W={embed:v(L,V,"embed"),explicit:v(L,V,"explicit"),requireAll:v(L,V,"requireAll")},R=function(ee,le,te,oe){const ie={};for(const pe of le){const we=ee.graphMap[ee.graph][pe];a(ee,we,te,oe)&&(ie[pe]=we)}return ie}(N,P,L,W),Z=Object.keys(R).sort();for(const ee of Z){const le=R[ee];if("@link"===W.embed&&ee in N.link){A(Q,j,N.link[ee]);continue}null===j?N.uniqueEmbeds={[N.graph]:{}}:N.uniqueEmbeds[N.graph]=N.uniqueEmbeds[N.graph]||{};const te={};if(te["@id"]=ee,0===ee.indexOf("_:")&&m.addValue(N.bnodeMap,ee,te,{propertyIsArray:!0}),N.link[ee]=te,"@never"===W.embed||s(le,N.graph,N.subjectStack))A(Q,j,te);else{if("@last"===W.embed&&(ee in N.uniqueEmbeds[N.graph]&&b(N,ee),N.uniqueEmbeds[N.graph][ee]={parent:Q,property:j}),N.subjectStack.push({subject:le,graph:N.graph}),ee in N.graphMap){let oe=!1,ie=null;"@graph"in L?(ie=L["@graph"][0],F.isObject(ie)||(ie={}),oe=!("@merged"===ee||"@default"===ee)):(oe="@merged"!==N.graph,ie={}),oe&&(N.graphStack.push(N.graph),N.graph=ee,l.frame(N,Object.keys(N.graphMap[ee]).sort(),[ie],te,"@graph"),N.graph=N.graphStack.pop)}for(const oe of Object.keys(le).sort())if(q(oe)){if(te[oe]=m.clone(le[oe]),"@type"===oe)for(const ie of le["@type"])0===ie.indexOf("_:")&&m.addValue(N.bnodeMap,ie,te,{propertyIsArray:!0})}else if(!W.explicit||oe in L)for(let ie of le[oe]){const pe=oe in L?L[oe]:y(W);if(h.isList(ie)){const we={"@list":[]};A(te,oe,we);const Te=ie["@list"];for(const Fe in Te)if(ie=Te[Fe],h.isSubjectReference(ie)){const ke=oe in L?L[oe][0]["@list"]:y(W);l.frame(N,[ie["@id"]],ke,we,"@list")}else A(we,"@list",m.clone(ie))}else h.isSubjectReference(ie)?l.frame(N,[ie["@id"]],pe,te,oe):B(pe[0],ie)&&A(te,oe,m.clone(ie))}for(const oe of Object.keys(L).sort()){if(q(oe))continue;const ie=L[oe][0]||{};if(!v(ie,V,"omitDefault")&&!(oe in te)){let pe="@null";"@default"in ie&&(pe=m.clone(ie["@default"])),F.isArray(pe)||(pe=[pe]),te[oe]=[{"@preserve":pe}]}}if("@reverse"in L)for(const oe of Object.keys(L["@reverse"]).sort()){const ie=L["@reverse"][oe];for(const pe of Object.keys(N.subjects))m.getValues(N.subjects[pe],oe).some(we=>we["@id"]===ee)&&(te["@reverse"]=te["@reverse"]||{},m.addValue(te["@reverse"],oe,[],{propertyIsArray:!0}),l.frame(N,[pe],ie,te["@reverse"][oe],j))}A(Q,j,te),N.subjectStack.pop()}}}},{"./JsonLdError":32,"./context":40,"./graphTypes":47,"./nodeMap":49,"./types":51,"./util":53}],46:[function(J,ae,ce){"use strict";const q=J("./JsonLdError"),h=J("./graphTypes"),F=J("./types"),m=J("./util"),{RDF_LIST:e,RDF_FIRST:o,RDF_REST:f,RDF_NIL:l,RDF_TYPE:y,RDF_JSON_LITERAL:s,XSD_BOOLEAN:v,XSD_DOUBLE:x,XSD_INTEGER:a,XSD_STRING:b}=J("./constants"),A={};function T(B,N){if(B.termType.endsWith("Node"))return{"@id":B.value};const P={"@value":B.value};if(B.language)P["@language"]=B.language;else{let L=B.datatype.value;if(L||(L=b),L===s){L="@json";try{P["@value"]=JSON.parse(P["@value"])}catch(Q){throw new q("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:P["@value"],cause:Q})}}if(N){if(L===v)"true"===P["@value"]?P["@value"]=!0:"false"===P["@value"]&&(P["@value"]=!1);else if(F.isNumeric(P["@value"]))if(L===a){const Q=parseInt(P["@value"],10);Q.toFixed(0)===P["@value"]&&(P["@value"]=Q)}else L===x&&(P["@value"]=parseFloat(P["@value"]));[v,a,x,b].includes(L)||(P["@type"]=L)}else L!==b&&(P["@type"]=L)}return P}ae.exports=A,A.fromRDF=async(B,{useRdfType:N=!1,useNativeTypes:P=!1})=>{const L={},Q={"@default":L},j={};for(const R of B){const Z="DefaultGraph"===R.graph.termType?"@default":R.graph.value;Z in Q||(Q[Z]={}),"@default"===Z||Z in L||(L[Z]={"@id":Z});const ee=Q[Z],le=R.subject.value,te=R.predicate.value,oe=R.object;le in ee||(ee[le]={"@id":le});const ie=ee[le],pe=oe.termType.endsWith("Node");if(!pe||oe.value in ee||(ee[oe.value]={"@id":oe.value}),te===y&&!N&&pe){m.addValue(ie,"@type",oe.value,{propertyIsArray:!0});continue}const we=T(oe,P);if(m.addValue(ie,te,we,{propertyIsArray:!0}),pe)if(oe.value===l){const Te=ee[oe.value];"usages"in Te||(Te.usages=[]),Te.usages.push({node:ie,property:te,value:we})}else oe.value in j?j[oe.value]=!1:j[oe.value]={node:ie,property:te,value:we}}for(const R in Q){const Z=Q[R];if(!(l in Z))continue;const ee=Z[l];if(ee.usages){for(let le of ee.usages){let te=le.node,oe=le.property,ie=le.value;const pe=[],we=[];let Te=Object.keys(te).length;for(;oe===f&&F.isObject(j[te["@id"]])&&F.isArray(te[o])&&1===te[o].length&&F.isArray(te[f])&&1===te[f].length&&(3===Te||4===Te&&F.isArray(te["@type"])&&1===te["@type"].length&&te["@type"][0]===e)&&(pe.push(te[o][0]),we.push(te["@id"]),te=(le=j[te["@id"]]).node,oe=le.property,ie=le.value,Te=Object.keys(te).length,h.isBlankNode(te)););delete ie["@id"],ie["@list"]=pe.reverse();for(const Fe of we)delete Z[Fe]}delete ee.usages}}const V=[],W=Object.keys(L).sort();for(const R of W){const Z=L[R];if(R in Q){const ee=Z["@graph"]=[],le=Q[R],te=Object.keys(le).sort();for(const oe of te){const ie=le[oe];h.isSubjectReference(ie)||ee.push(ie)}}h.isSubjectReference(Z)||V.push(Z)}return V}},{"./JsonLdError":32,"./constants":39,"./graphTypes":47,"./types":51,"./util":53}],47:[function(J,ae,ce){"use strict";const q=J("./types"),h={};ae.exports=h,h.isSubject=F=>!(!q.isObject(F)||"@value"in F||"@set"in F||"@list"in F)&&(Object.keys(F).length>1||!("@id"in F)),h.isSubjectReference=F=>q.isObject(F)&&1===Object.keys(F).length&&"@id"in F,h.isValue=F=>q.isObject(F)&&"@value"in F,h.isList=F=>q.isObject(F)&&"@list"in F,h.isGraph=F=>q.isObject(F)&&"@graph"in F&&1===Object.keys(F).filter(m=>"@id"!==m&&"@index"!==m).length,h.isSimpleGraph=F=>h.isGraph(F)&&!("@id"in F),h.isBlankNode=F=>!!q.isObject(F)&&("@id"in F?0===F["@id"].indexOf("_:"):0===Object.keys(F).length||!("@value"in F||"@set"in F||"@list"in F))},{"./types":51}],48:[function(J,ae,ce){(function(q,h){(function(){const F=J("rdf-canonize"),m=J("./util"),e=J("./ContextResolver"),o=m.IdentifierIssuer,f=J("./JsonLdError"),l=J("lru-cache"),y=J("./NQuads"),s=J("./Rdfa"),{expand:v}=J("./expand"),{flatten:x}=J("./flatten"),{fromRDF:a}=J("./fromRdf"),{toRDF:b}=J("./toRdf"),{frameMergedOrDefault:A}=J("./frame"),{isArray:T,isObject:B,isString:N}=J("./types"),{isSubjectReference:P}=J("./graphTypes"),{getInitialContext:L,process:Q}=J("./context"),{compact:j,compactIri:V,removePreserve:W}=J("./compact"),{createNodeMap:R,createMergedNodeMap:Z,mergeNodeMaps:ee}=J("./nodeMap"),le=void 0!==q&&q.versions&&q.versions.node,te=!le&&("undefined"!=typeof window||"undefined"!=typeof self),oe=function(pe){const we={},Te=new l({max:100});function Fe(ke,Me){var Ze=Me,{documentLoader:de=pe.documentLoader}=Ze,Le=yp(Ze,["documentLoader"]);return Object.assign({},{documentLoader:de},Le,ke)}return pe.compact=async function(ke,de,Le){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===de)throw new f("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===ke)return null;let Me;(Le=Fe(Le,{base:N(ke)?ke:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new o("_:b"),contextResolver:new e({sharedCache:Te})})).link&&(Le.skipExpansion=!0),Le.compactToRelative||delete Le.base,Me=Le.skipExpansion?ke:await pe.expand(ke,Le);const Ze=await pe.processContext(L(Le),de,Le);let H=await j({activeCtx:Ze,element:Me,options:Le,compactionMap:Le.compactionMap});Le.compactArrays&&!Le.graph&&T(H)?1===H.length?H=H[0]:0===H.length&&(H={}):Le.graph&&B(H)&&(H=[H]),B(de)&&"@context"in de&&(de=de["@context"]),de=m.clone(de),T(de)||(de=[de]);const z=de;de=[];for(let ge=0;ge<z.length;++ge)(!B(z[ge])||Object.keys(z[ge]).length>0)&&de.push(z[ge]);const ne=de.length>0;if(1===de.length&&(de=de[0]),T(H)){const ge=V({activeCtx:Ze,iri:"@graph",relativeTo:{vocab:!0}}),xe=H;H={},ne&&(H["@context"]=de),H[ge]=xe}else if(B(H)&&ne){const ge=H;H={"@context":de};for(const xe in ge)H[xe]=ge[xe]}if(Le.framing){const ge=V({activeCtx:Ze,iri:"@graph",relativeTo:{vocab:!0}});Le.link={},H[ge]=W(Ze,H[ge],Le)}return H},pe.expand=async function(ke,de){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(de=Fe(de,{keepFreeFloatingNodes:!1,contextResolver:new e({sharedCache:Te})})).expansionMap&&(de.expansionMap=void 0);const Le={},Me=[];if("expandContext"in de){const ne=m.clone(de.expandContext);B(ne)&&"@context"in ne?Le.expandContext=ne:Le.expandContext={"@context":ne},Me.push(Le.expandContext)}let Ze;if(N(ke)){const ne=await pe.get(ke,de);Ze=ne.documentUrl,Le.input=ne.document,ne.contextUrl&&(Le.remoteContext={"@context":ne.contextUrl},Me.push(Le.remoteContext))}else Le.input=m.clone(ke);"base"in de||(de.base=Ze||"");let H=L(de);for(const ne of Me)H=await Q({activeCtx:H,localCtx:ne,options:de});let z=await v({activeCtx:H,element:Le.input,options:de,expansionMap:de.expansionMap});return B(z)&&"@graph"in z&&1===Object.keys(z).length?z=z["@graph"]:null===z&&(z=[]),T(z)||(z=[z]),z},pe.flatten=async function(ke,de,Le){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");de="function"==typeof de?null:de||null,Le=Fe(Le,{base:N(ke)?ke:"",contextResolver:new e({sharedCache:Te})});const Me=await pe.expand(ke,Le),Ze=x(Me);return null===de?Ze:(Le.graph=!0,Le.skipExpansion=!0,await pe.compact(Ze,de,Le))},pe.frame=async function(ke,de,Le){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(Le=Fe(Le,{base:N(ke)?ke:"",embed:"@last",explicit:!1,requireAll:!0,omitDefault:!1,pruneBlankNodeIdentifiers:!0,bnodesToClear:[],contextResolver:new e({sharedCache:Te})}),N(de)){const ge=await pe.get(de,Le);if(de=ge.document,ge.contextUrl){let xe=de["@context"];xe?T(xe)?xe.push(ge.contextUrl):xe=[xe,ge.contextUrl]:xe=ge.contextUrl,de["@context"]=xe}}const Me=de&&de["@context"]||{},Ze=await pe.expand(ke,Le),H=Iu({},Le);H.isFrame=!0,H.keepFreeFloatingNodes=!0;const z=await pe.expand(de,H);H.merged=!("@graph"in de);const ne=A(Ze,z,H);return H.graph=!0,H.skipExpansion=!0,H.link={},H.framing=!0,await pe.compact(ne,Me,H)},pe.link=async function(ke,de,Le){const Me={};return de&&(Me["@context"]=de),Me["@embed"]="@link",pe.frame(ke,Me,Le)},pe.normalize=pe.canonize=async function(ke,de){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(de=Fe(de,{base:N(ke)?ke:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new e({sharedCache:Te})}))){if("application/n-quads"!==de.inputFormat&&"application/nquads"!==de.inputFormat)throw new f("Unknown canonicalization input format.","jsonld.CanonizeError");const Ze=y.parse(ke);return F.canonize(Ze,de)}const Le=Iu({},de);delete Le.format,Le.produceGeneralizedRdf=!1;const Me=await pe.toRDF(ke,Le);return F.canonize(Me,de)},pe.fromRDF=async function(ke,de){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");de=Fe(de,{format:N(ke)?"application/n-quads":void 0});const{format:Le}=de;let{rdfParser:Me}=de;if(Le){if(!(Me=Me||we[Le]))throw new f("Unknown input format.","jsonld.UnknownFormat",{format:Le})}else Me=()=>ke;const Ze=await Me(ke);return a(Ze,de)},pe.toRDF=async function(ke,de){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let Le;Le=(de=Fe(de,{base:N(ke)?ke:"",skipExpansion:!1,contextResolver:new e({sharedCache:Te})})).skipExpansion?ke:await pe.expand(ke,de);const Me=b(Le,de);if(de.format){if("application/n-quads"===de.format||"application/nquads"===de.format)return await y.serialize(Me);throw new f("Unknown output format.","jsonld.UnknownFormat",{format:de.format})}return Me},pe.createNodeMap=async function(ke,de){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");de=Fe(de,{base:N(ke)?ke:"",contextResolver:new e({sharedCache:Te})});const Le=await pe.expand(ke,de);return Z(Le,de)},pe.merge=async function(ke,de,Le){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!T(ke))throw new TypeError('Could not merge, "docs" must be an array.');de="function"==typeof de?null:de||null,Le=Fe(Le,{contextResolver:new e({sharedCache:Te})});const Me=await Promise.all(ke.map(Re=>{const He=Iu({},Le);return pe.expand(Re,He)}));let Ze=!0;"mergeNodes"in Le&&(Ze=Le.mergeNodes);const H=Le.issuer||new o("_:b"),z={"@default":{}};for(let Re=0;Re<Me.length;++Re){const He=m.relabelBlankNodes(Me[Re],{issuer:new o("_:b"+Re+"-")}),We=Ze||0===Re?z:{"@default":{}};if(R(He,We,"@default",H),We!==z)for(const Ke in We){const mt=We[Ke];if(!(Ke in z)){z[Ke]=mt;continue}const yt=z[Ke];for(const Mt in mt)Mt in yt||(yt[Mt]=mt[Mt])}}const ne=ee(z),ge=[],xe=Object.keys(ne).sort();for(let Re=0;Re<xe.length;++Re){const He=ne[xe[Re]];P(He)||ge.push(He)}return null===de?ge:(Le.graph=!0,Le.skipExpansion=!0,await pe.compact(ge,de,Le))},Object.defineProperty(pe,"documentLoader",{get:()=>pe._documentLoader,set:ke=>pe._documentLoader=ke}),pe.documentLoader=async ke=>{throw new f("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:ke})},pe.get=async function(ke,de){let Le;Le="function"==typeof de.documentLoader?de.documentLoader:pe.documentLoader;const Me=await Le(ke);try{if(!Me.document)throw new f("No remote document found at the given URL.","jsonld.NullRemoteDocument");N(Me.document)&&(Me.document=JSON.parse(Me.document))}catch(Ze){throw new f("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Ze,remoteDoc:Me})}return Me},pe.processContext=async function(ke,de,Le){return Le=Fe(Le,{base:"",contextResolver:new e({sharedCache:Te})}),null===de?L(Le):(de=m.clone(de),B(de)&&"@context"in de||(de={"@context":de}),Q({activeCtx:ke,localCtx:de,options:Le}))},pe.getContextValue=J("./context").getContextValue,pe.documentLoaders={},pe.documentLoaders.node=J("./documentLoaders/node"),pe.documentLoaders.xhr=J("./documentLoaders/xhr"),pe.useDocumentLoader=function(ke){if(!(ke in pe.documentLoaders))throw new f('Unknown document loader type: "'+ke+'"',"jsonld.UnknownDocumentLoader",{type:ke});pe.documentLoader=pe.documentLoaders[ke].apply(pe,Array.prototype.slice.call(arguments,1))},pe.registerRDFParser=function(ke,de){we[ke]=de},pe.unregisterRDFParser=function(ke){delete we[ke]},pe.registerRDFParser("application/n-quads",y.parse),pe.registerRDFParser("application/nquads",y.parse),pe.registerRDFParser("rdfa-api",s.parse),pe.url=J("./url"),pe.util=m,Object.assign(pe,m),pe.promises=pe,pe.RequestQueue=J("./RequestQueue"),pe.JsonLdProcessor=J("./JsonLdProcessor")(pe),te&&void 0===h.JsonLdProcessor&&Object.defineProperty(h,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:pe.JsonLdProcessor}),le?pe.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&pe.useDocumentLoader("xhr"),pe},ie=function(){return oe(function(){return ie()})};oe(ie),ae.exports=ie}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ContextResolver":31,"./JsonLdError":32,"./JsonLdProcessor":33,"./NQuads":34,"./Rdfa":35,"./RequestQueue":36,"./compact":38,"./context":40,"./documentLoaders/node":41,"./documentLoaders/xhr":42,"./expand":43,"./flatten":44,"./frame":45,"./fromRdf":46,"./graphTypes":47,"./nodeMap":49,"./toRdf":50,"./types":51,"./url":52,"./util":53,_process:71,"lru-cache":54,"rdf-canonize":84}],49:[function(J,ae,ce){"use strict";const{isKeyword:q}=J("./context"),h=J("./graphTypes"),F=J("./types"),m=J("./util"),e=J("./JsonLdError"),o={};ae.exports=o,o.createMergedNodeMap=(f,l)=>{const y=(l=l||{}).issuer||new m.IdentifierIssuer("_:b"),s={"@default":{}};return o.createNodeMap(f,s,"@default",y),o.mergeNodeMaps(s)},o.createNodeMap=(f,l,y,s,v,x)=>{if(F.isArray(f)){for(const T of f)o.createNodeMap(T,l,y,s,void 0,x);return}if(!F.isObject(f))return void(x&&x.push(f));if(h.isValue(f)){if("@type"in f){let T=f["@type"];0===T.indexOf("_:")&&(f["@type"]=T=s.getId(T))}return void(x&&x.push(f))}if(x&&h.isList(f)){const T=[];return o.createNodeMap(f["@list"],l,y,s,v,T),void x.push({"@list":T})}if("@type"in f){const T=f["@type"];for(const B of T)0===B.indexOf("_:")&&s.getId(B)}F.isUndefined(v)&&(v=h.isBlankNode(f)?s.getId(f["@id"]):f["@id"]),x&&x.push({"@id":v});const a=l[y],b=a[v]=a[v]||{};b["@id"]=v;const A=Object.keys(f).sort();for(let T of A){if("@id"===T)continue;if("@reverse"===T){const N={"@id":v},P=f["@reverse"];for(const L in P){const Q=P[L];for(const j of Q){let V=j["@id"];h.isBlankNode(j)&&(V=s.getId(V)),o.createNodeMap(j,l,y,s,V),m.addValue(a[V],L,N,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===T){v in l||(l[v]={}),o.createNodeMap(f[T],l,v,s);continue}if("@type"!==T&&q(T)){if("@index"===T&&T in b&&(f[T]!==b[T]||f[T]["@id"]!==b[T]["@id"]))throw new e("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:b});b[T]=f[T];continue}const B=f[T];if(0===T.indexOf("_:")&&(T=s.getId(T)),0!==B.length)for(let N of B)if("@type"===T&&(N=0===N.indexOf("_:")?s.getId(N):N),h.isSubject(N)||h.isSubjectReference(N)){const P=h.isBlankNode(N)?s.getId(N["@id"]):N["@id"];m.addValue(b,T,{"@id":P},{propertyIsArray:!0,allowDuplicate:!1}),o.createNodeMap(N,l,y,s,P)}else if(h.isValue(N))m.addValue(b,T,N,{propertyIsArray:!0,allowDuplicate:!1});else if(h.isList(N)){const P=[];o.createNodeMap(N["@list"],l,y,s,v,P),N={"@list":P},m.addValue(b,T,N,{propertyIsArray:!0,allowDuplicate:!1})}else o.createNodeMap(N,l,y,s,v),m.addValue(b,T,N,{propertyIsArray:!0,allowDuplicate:!1});else m.addValue(b,T,[],{propertyIsArray:!0})}},o.mergeNodeMapGraphs=f=>{const l={};for(const y of Object.keys(f).sort())for(const s of Object.keys(f[y]).sort()){const v=f[y][s];s in l||(l[s]={"@id":s});const x=l[s];for(const a of Object.keys(v).sort())if(q(a))x[a]=m.clone(v[a]);else for(const b of v[a])m.addValue(x,a,m.clone(b),{propertyIsArray:!0,allowDuplicate:!1})}return l},o.mergeNodeMaps=f=>{const l=f["@default"],y=Object.keys(f).sort();for(const s of y){if("@default"===s)continue;const v=f[s];let x=l[s];x?"@graph"in x||(x["@graph"]=[]):l[s]=x={"@id":s,"@graph":[]};const a=x["@graph"];for(const b of Object.keys(v).sort()){const A=v[b];h.isSubjectReference(A)||a.push(A)}}return l}},{"./JsonLdError":32,"./context":40,"./graphTypes":47,"./types":51,"./util":53}],50:[function(J,ae,ce){"use strict";const{createNodeMap:q}=J("./nodeMap"),{isKeyword:h}=J("./context"),F=J("./graphTypes"),m=J("canonicalize"),e=J("./types"),o=J("./util"),{RDF_FIRST:f,RDF_REST:l,RDF_NIL:y,RDF_TYPE:s,RDF_JSON_LITERAL:v,RDF_LANGSTRING:x,XSD_BOOLEAN:a,XSD_DOUBLE:b,XSD_INTEGER:A,XSD_STRING:T}=J("./constants"),{isAbsolute:B}=J("./url"),N={};function P(Q,j,V,W,R){const Z=Object.keys(j).sort();for(const ee of Z){const le=j[ee],te=Object.keys(le).sort();for(let oe of te){const ie=le[oe];if("@type"===oe)oe=s;else if(h(oe))continue;for(const pe of ie){const we={termType:ee.startsWith("_:")?"BlankNode":"NamedNode",value:ee};if(!B(ee))continue;const Te={termType:oe.startsWith("_:")?"BlankNode":"NamedNode",value:oe};if(!B(oe)||"BlankNode"===Te.termType&&!R.produceGeneralizedRdf)continue;const Fe=L(pe,W,Q,V);Fe&&Q.push({subject:we,predicate:Te,object:Fe,graph:V})}}}}function L(Q,j,V,W){const R={};if(F.isValue(Q)){R.termType="Literal",R.value=void 0,R.datatype={termType:"NamedNode"};let Z=Q["@value"];const ee=Q["@type"]||null;"@json"===ee?(R.value=m(Z),R.datatype.value=v):e.isBoolean(Z)?(R.value=Z.toString(),R.datatype.value=ee||a):e.isDouble(Z)||ee===b?(e.isDouble(Z)||(Z=parseFloat(Z)),R.value=Z.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),R.datatype.value=ee||b):e.isNumber(Z)?(R.value=Z.toFixed(0),R.datatype.value=ee||A):"@language"in Q?(R.value=Z,R.datatype.value=ee||x,R.language=Q["@language"]):(R.value=Z,R.datatype.value=ee||T)}else if(F.isList(Q)){const Z=function(ee,le,te,oe){const ie={termType:"NamedNode",value:f},pe={termType:"NamedNode",value:l},we={termType:"NamedNode",value:y},Te=ee.pop(),Fe=Te?{termType:"BlankNode",value:le.getId()}:we;let ke=Fe;for(const de of ee){const Le=L(de,le,te,oe),Me={termType:"BlankNode",value:le.getId()};te.push({subject:ke,predicate:ie,object:Le,graph:oe}),te.push({subject:ke,predicate:pe,object:Me,graph:oe}),ke=Me}if(Te){const de=L(Te,le,te,oe);te.push({subject:ke,predicate:ie,object:de,graph:oe}),te.push({subject:ke,predicate:pe,object:we,graph:oe})}return Fe}(Q["@list"],j,V,W);R.termType=Z.termType,R.value=Z.value}else{const Z=e.isObject(Q)?Q["@id"]:Q;R.termType=Z.startsWith("_:")?"BlankNode":"NamedNode",R.value=Z}return"NamedNode"!==R.termType||B(R.value)?R:null}ae.exports=N,N.toRDF=(Q,j)=>{const V=new o.IdentifierIssuer("_:b"),W={"@default":{}};q(Q,W,"@default",V);const R=[],Z=Object.keys(W).sort();for(const ee of Z){let le;if("@default"===ee)le={termType:"DefaultGraph",value:""};else{if(!B(ee))continue;(le=ee.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"}).value=ee}P(R,W[ee],le,V,j)}return R}},{"./constants":39,"./context":40,"./graphTypes":47,"./nodeMap":49,"./types":51,"./url":52,"./util":53,canonicalize:13}],51:[function(J,ae,ce){"use strict";const q={};ae.exports=q,q.isArray=Array.isArray,q.isBoolean=h=>"boolean"==typeof h||"[object Boolean]"===Object.prototype.toString.call(h),q.isDouble=h=>q.isNumber(h)&&-1!==String(h).indexOf("."),q.isEmptyObject=h=>q.isObject(h)&&0===Object.keys(h).length,q.isNumber=h=>"number"==typeof h||"[object Number]"===Object.prototype.toString.call(h),q.isNumeric=h=>!isNaN(parseFloat(h))&&isFinite(h),q.isObject=h=>"[object Object]"===Object.prototype.toString.call(h),q.isString=h=>"string"==typeof h||"[object String]"===Object.prototype.toString.call(h),q.isUndefined=h=>void 0===h},{}],52:[function(J,ae,ce){"use strict";const q=J("./types"),h={};ae.exports=h,h.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},h.parse=(m,e)=>{const o={},f=h.parsers[e||"full"],l=f.regex.exec(m);let y=f.keys.length;for(;y--;)o[f.keys[y]]=void 0===l[y]?null:l[y];return("https"===o.scheme&&"443"===o.port||"http"===o.scheme&&"80"===o.port)&&(o.href=o.href.replace(":"+o.port,""),o.authority=o.authority.replace(":"+o.port,""),o.port=null),o.normalizedPath=h.removeDotSegments(o.path),o},h.prependBase=(m,e)=>{if(null===m||h.isAbsolute(e))return e;q.isString(m)&&(m=h.parse(m||""));const o=h.parse(e),f={protocol:m.protocol||""};if(null!==o.authority)f.authority=o.authority,f.path=o.path,f.query=o.query;else if(f.authority=m.authority,""===o.path)f.path=m.path,null!==o.query?f.query=o.query:f.query=m.query;else{if(0===o.path.indexOf("/"))f.path=o.path;else{let y=m.path;(y=y.substr(0,y.lastIndexOf("/")+1)).length>0&&"/"!==y.substr(-1)&&(y+="/"),y+=o.path,f.path=y}f.query=o.query}""!==o.path&&(f.path=h.removeDotSegments(f.path));let l=f.protocol;return null!==f.authority&&(l+="//"+f.authority),l+=f.path,null!==f.query&&(l+="?"+f.query),null!==o.fragment&&(l+="#"+o.fragment),""===l&&(l="./"),l},h.removeBase=(m,e)=>{if(null===m)return e;q.isString(m)&&(m=h.parse(m||""));let o="";if(""!==m.href?o+=(m.protocol||"")+"//"+(m.authority||""):e.indexOf("//")&&(o+="//"),0!==e.indexOf(o))return e;const f=h.parse(e.substr(o.length)),l=m.normalizedPath.split("/"),y=f.normalizedPath.split("/"),s=f.fragment||f.query?0:1;for(;l.length>0&&y.length>s&&l[0]===y[0];)l.shift(),y.shift();let v="";if(l.length>0){l.pop();for(let x=0;x<l.length;++x)v+="../"}return v+=y.join("/"),null!==f.query&&(v+="?"+f.query),null!==f.fragment&&(v+="#"+f.fragment),""===v&&(v="./"),v},h.removeDotSegments=m=>{if(0===m.length)return"";const e=m.split("/"),o=[];for(;e.length>0;){const f=e.shift(),l=0===e.length;"."!==f?".."!==f?o.push(f):(o.pop(),l&&o.push("")):l&&o.push("")}return o.length>0&&""!==o[0]&&o.unshift(""),1===o.length&&""===o[0]?"/":o.join("/")};const F=/^([A-Za-z][A-Za-z0-9+-.]*|_):/;h.isAbsolute=m=>q.isString(m)&&F.test(m),h.isRelative=m=>q.isString(m)},{"./types":51}],53:[function(J,ae,ce){"use strict";const q=J("./graphTypes"),h=J("./types"),F=J("rdf-canonize").IdentifierIssuer,m=J("./JsonLdError"),e=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,o=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,f=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,l_accept="application/ld+json, application/json",y={};ae.exports=y,y.IdentifierIssuer=F,y.clone=function(s){if(s&&"object"==typeof s){let v;if(h.isArray(s)){v=[];for(let x=0;x<s.length;++x)v[x]=y.clone(s[x])}else if(s instanceof Map){v=new Map;for(const[x,a]of s)v.set(x,y.clone(a))}else if(s instanceof Set){v=new Set;for(const x of s)v.add(y.clone(x))}else if(h.isObject(s)){v={};for(const x in s)v[x]=y.clone(s[x])}else v=s.toString();return v}return s},y.asArray=function(s){return Array.isArray(s)?s:[s]},y.buildHeaders=(s={})=>{if(Object.keys(s).some(v=>"accept"===v.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+l_accept+'" is supported.');return Object.assign({Accept:l_accept},s)},y.parseLinkHeader=s=>{const v={},x=s.match(e);for(let a=0;a<x.length;++a){let b=x[a].match(o);if(!b)continue;const A={target:b[1]},T=b[2];for(;b=f.exec(T);)A[b[1]]=void 0===b[2]?b[3]:b[2];const B=A.rel||"";Array.isArray(v[B])?v[B].push(A):v.hasOwnProperty(B)?v[B]=[v[B],A]:v[B]=A}return v},y.validateTypeValue=s=>{if(h.isString(s)||h.isEmptyObject(s))return;let v=!1;if(h.isArray(s)){v=!0;for(let x=0;x<s.length;++x)if(!h.isString(s[x])){v=!1;break}}if(!v)throw new m('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:s})},y.hasProperty=(s,v)=>{if(s.hasOwnProperty(v)){const x=s[v];return!h.isArray(x)||x.length>0}return!1},y.hasValue=(s,v,x)=>{if(y.hasProperty(s,v)){let a=s[v];const b=q.isList(a);if(h.isArray(a)||b){b&&(a=a["@list"]);for(let A=0;A<a.length;++A)if(y.compareValues(x,a[A]))return!0}else if(!h.isArray(x))return y.compareValues(x,a)}return!1},y.addValue=(s,v,x,a)=>{if("propertyIsArray"in(a=a||{})||(a.propertyIsArray=!1),"valueIsArray"in a||(a.valueIsArray=!1),"allowDuplicate"in a||(a.allowDuplicate=!0),"prependValue"in a||(a.prependValue=!1),a.valueIsArray)s[v]=x;else if(h.isArray(x)){0===x.length&&a.propertyIsArray&&!s.hasOwnProperty(v)&&(s[v]=[]),a.prependValue&&(x=x.concat(s[v]),s[v]=[]);for(let b=0;b<x.length;++b)y.addValue(s,v,x[b],a)}else if(s.hasOwnProperty(v)){const b=!a.allowDuplicate&&y.hasValue(s,v,x);h.isArray(s[v])||b&&!a.propertyIsArray||(s[v]=[s[v]]),b||(a.prependValue?s[v].unshift(x):s[v].push(x))}else s[v]=a.propertyIsArray?[x]:x},y.getValues=(s,v)=>[].concat(s[v]||[]),y.removeProperty=(s,v)=>{delete s[v]},y.removeValue=(s,v,x,a)=>{"propertyIsArray"in(a=a||{})||(a.propertyIsArray=!1);const b=y.getValues(s,v).filter(A=>!y.compareValues(A,x));0===b.length?y.removeProperty(s,v):1!==b.length||a.propertyIsArray?s[v]=b:s[v]=b[0]},y.relabelBlankNodes=(s,v)=>function x(a,b){if(h.isArray(b))for(let A=0;A<b.length;++A)b[A]=x(a,b[A]);else if(q.isList(b))b["@list"]=x(a,b["@list"]);else if(h.isObject(b)){q.isBlankNode(b)&&(b["@id"]=a.getId(b["@id"]));const A=Object.keys(b).sort();for(let T=0;T<A.length;++T){const B=A[T];"@id"!==B&&(b[B]=x(a,b[B]))}}return b}((v=v||{}).issuer||new F("_:b"),s),y.compareValues=(s,v)=>s===v||!(!q.isValue(s)||!q.isValue(v)||s["@value"]!==v["@value"]||s["@type"]!==v["@type"]||s["@language"]!==v["@language"]||s["@index"]!==v["@index"])||!!(h.isObject(s)&&"@id"in s&&h.isObject(v)&&"@id"in v)&&s["@id"]===v["@id"],y.compareShortestLeast=(s,v)=>s.length<v.length?-1:v.length<s.length?1:s===v?0:s<v?-1:1},{"./JsonLdError":32,"./graphTypes":47,"./types":51,"rdf-canonize":84}],54:[function(J,ae,ce){"use strict";const q=J("yallist"),h=Symbol("max"),F=Symbol("length"),m=Symbol("lengthCalculator"),e=Symbol("allowStale"),o=Symbol("maxAge"),f=Symbol("dispose"),l=Symbol("noDisposeOnSet"),y=Symbol("lruList"),s=Symbol("cache"),v=Symbol("updateAgeOnGet"),x=()=>1,a=(P,L,Q)=>{const j=P[s].get(L);if(j){const V=j.value;if(b(P,V)){if(T(P,j),!P[e])return}else Q&&(P[v]&&(j.value.now=Date.now()),P[y].unshiftNode(j));return V.value}},b=(P,L)=>{if(!L||!L.maxAge&&!P[o])return!1;const Q=Date.now()-L.now;return L.maxAge?Q>L.maxAge:P[o]&&Q>P[o]},A=P=>{if(P[F]>P[h])for(let L=P[y].tail;P[F]>P[h]&&null!==L;){const Q=L.prev;T(P,L),L=Q}},T=(P,L)=>{if(L){const Q=L.value;P[f]&&P[f](Q.key,Q.value),P[F]-=Q.length,P[s].delete(Q.key),P[y].removeNode(L)}};class B{constructor(L,Q,j,V,W){this.key=L,this.value=Q,this.length=j,this.now=V,this.maxAge=W||0}}const N=(P,L,Q,j)=>{let V=Q.value;b(P,V)&&(T(P,Q),P[e]||(V=void 0)),V&&L.call(j,V.value,V.key,P)};ae.exports=class{constructor(P){if("number"==typeof P&&(P={max:P}),P||(P={}),P.max&&("number"!=typeof P.max||P.max<0))throw new TypeError("max must be a non-negative number");this[h]=P.max||1/0;const L=P.length||x;if(this[m]="function"!=typeof L?x:L,this[e]=P.stale||!1,P.maxAge&&"number"!=typeof P.maxAge)throw new TypeError("maxAge must be a number");this[o]=P.maxAge||0,this[f]=P.dispose,this[l]=P.noDisposeOnSet||!1,this[v]=P.updateAgeOnGet||!1,this.reset()}set max(P){if("number"!=typeof P||P<0)throw new TypeError("max must be a non-negative number");this[h]=P||1/0,A(this)}get max(){return this[h]}set allowStale(P){this[e]=!!P}get allowStale(){return this[e]}set maxAge(P){if("number"!=typeof P)throw new TypeError("maxAge must be a non-negative number");this[o]=P,A(this)}get maxAge(){return this[o]}set lengthCalculator(P){"function"!=typeof P&&(P=x),P!==this[m]&&(this[m]=P,this[F]=0,this[y].forEach(L=>{L.length=this[m](L.value,L.key),this[F]+=L.length})),A(this)}get lengthCalculator(){return this[m]}get length(){return this[F]}get itemCount(){return this[y].length}rforEach(P,L){L=L||this;for(let Q=this[y].tail;null!==Q;){const j=Q.prev;N(this,P,Q,L),Q=j}}forEach(P,L){L=L||this;for(let Q=this[y].head;null!==Q;){const j=Q.next;N(this,P,Q,L),Q=j}}keys(){return this[y].toArray().map(P=>P.key)}values(){return this[y].toArray().map(P=>P.value)}reset(){this[f]&&this[y]&&this[y].length&&this[y].forEach(P=>this[f](P.key,P.value)),this[s]=new Map,this[y]=new q,this[F]=0}dump(){return this[y].map(P=>!b(this,P)&&{k:P.key,v:P.value,e:P.now+(P.maxAge||0)}).toArray().filter(P=>P)}dumpLru(){return this[y]}set(P,L,Q){if((Q=Q||this[o])&&"number"!=typeof Q)throw new TypeError("maxAge must be a number");const j=Q?Date.now():0,V=this[m](L,P);if(this[s].has(P)){if(V>this[h])return T(this,this[s].get(P)),!1;const R=this[s].get(P).value;return this[f]&&(this[l]||this[f](P,R.value)),R.now=j,R.maxAge=Q,R.value=L,this[F]+=V-R.length,R.length=V,this.get(P),A(this),!0}const W=new B(P,L,V,j,Q);return W.length>this[h]?(this[f]&&this[f](P,L),!1):(this[F]+=W.length,this[y].unshift(W),this[s].set(P,this[y].head),A(this),!0)}has(P){if(!this[s].has(P))return!1;const L=this[s].get(P).value;return!b(this,L)}get(P){return a(this,P,!0)}peek(P){return a(this,P,!1)}pop(){const P=this[y].tail;return P?(T(this,P),P.value):null}del(P){T(this,this[s].get(P))}load(P){this.reset();const L=Date.now();for(let Q=P.length-1;Q>=0;Q--){const j=P[Q],V=j.e||0;if(0===V)this.set(j.k,j.v);else{const W=V-L;W>0&&this.set(j.k,j.v,W)}}}prune(){this[s].forEach((P,L)=>a(this,L,!1))}}},{yallist:56}],55:[function(J,ae,ce){"use strict";ae.exports=function(q){q.prototype[Symbol.iterator]=function*(){for(let h=this.head;h;h=h.next)yield h.value}}},{}],56:[function(J,ae,ce){"use strict";function q(o){var f=this;if(f instanceof q||(f=new q),f.tail=null,f.head=null,f.length=0,o&&"function"==typeof o.forEach)o.forEach(function(s){f.push(s)});else if(arguments.length>0)for(var l=0,y=arguments.length;l<y;l++)f.push(arguments[l]);return f}function h(o,f,l){var y=f===o.head?new e(l,null,f,o):new e(l,f,f.next,o);return null===y.next&&(o.tail=y),null===y.prev&&(o.head=y),o.length++,y}function F(o,f){o.tail=new e(f,o.tail,null,o),o.head||(o.head=o.tail),o.length++}function m(o,f){o.head=new e(f,null,o.head,o),o.tail||(o.tail=o.head),o.length++}function e(o,f,l,y){if(!(this instanceof e))return new e(o,f,l,y);this.list=y,this.value=o,f?(f.next=this,this.prev=f):this.prev=null,l?(l.prev=this,this.next=l):this.next=null}ae.exports=q,q.Node=e,q.create=q,q.prototype.removeNode=function(o){if(o.list!==this)throw new Error("removing node which does not belong to this list");var f=o.next,l=o.prev;return f&&(f.prev=l),l&&(l.next=f),o===this.head&&(this.head=f),o===this.tail&&(this.tail=l),o.list.length--,o.next=null,o.prev=null,o.list=null,f},q.prototype.unshiftNode=function(o){if(o!==this.head){o.list&&o.list.removeNode(o);var f=this.head;o.list=this,o.next=f,f&&(f.prev=o),this.head=o,this.tail||(this.tail=o),this.length++}},q.prototype.pushNode=function(o){if(o!==this.tail){o.list&&o.list.removeNode(o);var f=this.tail;o.list=this,o.prev=f,f&&(f.next=o),this.tail=o,this.head||(this.head=o),this.length++}},q.prototype.push=function(){for(var o=0,f=arguments.length;o<f;o++)F(this,arguments[o]);return this.length},q.prototype.unshift=function(){for(var o=0,f=arguments.length;o<f;o++)m(this,arguments[o]);return this.length},q.prototype.pop=function(){if(this.tail){var o=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,o}},q.prototype.shift=function(){if(this.head){var o=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,o}},q.prototype.forEach=function(o,f){f=f||this;for(var l=this.head,y=0;null!==l;y++)o.call(f,l.value,y,this),l=l.next},q.prototype.forEachReverse=function(o,f){f=f||this;for(var l=this.tail,y=this.length-1;null!==l;y--)o.call(f,l.value,y,this),l=l.prev},q.prototype.get=function(o){for(var f=0,l=this.head;null!==l&&f<o;f++)l=l.next;if(f===o&&null!==l)return l.value},q.prototype.getReverse=function(o){for(var f=0,l=this.tail;null!==l&&f<o;f++)l=l.prev;if(f===o&&null!==l)return l.value},q.prototype.map=function(o,f){f=f||this;for(var l=new q,y=this.head;null!==y;)l.push(o.call(f,y.value,this)),y=y.next;return l},q.prototype.mapReverse=function(o,f){f=f||this;for(var l=new q,y=this.tail;null!==y;)l.push(o.call(f,y.value,this)),y=y.prev;return l},q.prototype.reduce=function(o,f){var l,y=this.head;if(arguments.length>1)l=f;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");y=this.head.next,l=this.head.value}for(var s=0;null!==y;s++)l=o(l,y.value,s),y=y.next;return l},q.prototype.reduceReverse=function(o,f){var l,y=this.tail;if(arguments.length>1)l=f;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");y=this.tail.prev,l=this.tail.value}for(var s=this.length-1;null!==y;s--)l=o(l,y.value,s),y=y.prev;return l},q.prototype.toArray=function(){for(var o=new Array(this.length),f=0,l=this.head;null!==l;f++)o[f]=l.value,l=l.next;return o},q.prototype.toArrayReverse=function(){for(var o=new Array(this.length),f=0,l=this.tail;null!==l;f++)o[f]=l.value,l=l.prev;return o},q.prototype.slice=function(o,f){(f=f||this.length)<0&&(f+=this.length),(o=o||0)<0&&(o+=this.length);var l=new q;if(f<o||f<0)return l;o<0&&(o=0),f>this.length&&(f=this.length);for(var y=0,s=this.head;null!==s&&y<o;y++)s=s.next;for(;null!==s&&y<f;y++,s=s.next)l.push(s.value);return l},q.prototype.sliceReverse=function(o,f){(f=f||this.length)<0&&(f+=this.length),(o=o||0)<0&&(o+=this.length);var l=new q;if(f<o||f<0)return l;o<0&&(o=0),f>this.length&&(f=this.length);for(var y=this.length,s=this.tail;null!==s&&y>f;y--)s=s.prev;for(;null!==s&&y>o;y--,s=s.prev)l.push(s.value);return l},q.prototype.splice=function(o,f){o>this.length&&(o=this.length-1),o<0&&(o=this.length+o);for(var l=0,y=this.head;null!==y&&l<o;l++)y=y.next;var s=[];for(l=0;y&&l<f;l++)s.push(y.value),y=this.removeNode(y);for(null===y&&(y=this.tail),y!==this.head&&y!==this.tail&&(y=y.prev),l=2;l<arguments.length;l++)y=h(this,y,arguments[l]);return s},q.prototype.reverse=function(){for(var o=this.head,f=this.tail,l=o;null!==l;l=l.prev){var y=l.prev;l.prev=l.next,l.next=y}return this.head=f,this.tail=o,this};try{J("./iterator.js")(q)}catch(o){}},{"./iterator.js":55}],57:[function(J,ae,ce){var q=J;J=function(){},ce=ae.exports={Lexer:J("./lib/N3Lexer"),Parser:J("./lib/N3Parser"),Writer:J("./lib/N3Writer"),Store:J("./lib/N3Store"),StreamParser:J("./lib/N3StreamParser"),StreamWriter:J("./lib/N3StreamWriter"),Util:J("./lib/N3Util")},Object.keys(ce).forEach(function(h){Object.defineProperty(ce,h,{configurable:!0,enumerable:!0,get:function(){return delete ce[h],ce[h]=q("./lib/N3"+h)}})})},{"./lib/N3Lexer":58,"./lib/N3Parser":59,"./lib/N3Store":60,"./lib/N3StreamParser":61,"./lib/N3StreamWriter":62,"./lib/N3Util":63,"./lib/N3Writer":64}],58:[function(J,ae,ce){(function(q){(function(){var h=String.fromCharCode,F="function"==typeof q?q:function(l){setTimeout(l,0)},m=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,e={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},o=/[\x00-\x20<>\\"\{\}\|\^\`]/;function f(l){if(!(this instanceof f))return new f(l);if((l=l||{}).lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var y=this;this._tokenize=this.tokenize,this.tokenize=function(s,v){this._tokenize(s,function(x,a){!x&&/^(?:IRI|blank|literal|langcode|typeIRI|\.|eof)$/.test(a.type)?v&&v(x,a):v&&v(x||y._syntaxError(a.type,v=null))})}}this._n3Mode=!1!==l.n3,this._comments=!!l.comments}f.prototype={_iri:/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,_unescapedString:/^"[^"\\\r\n]+"/,_singleQuotedString:/^"(?:[^"\\\r\n]|\\.)*"(?=[^"])|^'(?:[^'\\\r\n]|\\.)*'(?=[^'])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<]))/,_variable:/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<]))/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/i,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_comment:/#([^\n\r]*)/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(l,y){for(var s=this._input,v=this._comments;;){for(var x,a;x=this._newline.exec(s);)v&&(a=this._comment.exec(x[0]))&&l(null,{line:this._line,type:"comment",value:a[1],prefix:""}),s=s.substr(x[0].length,s.length),this._line++;if((x=this._whitespace.exec(s))&&(s=s.substr(x[0].length,s.length)),this._endOfFile.test(s))return y&&(v&&(a=this._comment.exec(s))&&l(null,{line:this._line,type:"comment",value:a[1],prefix:""}),l(s=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=s;var b,A=this._line,T="",B="",N="",P=s[0],L=null,Q=0,j=!1;switch(P){case"^":if(s.length<3)break;if("^"!==s[1]){this._n3Mode&&(Q=1,T="^");break}if(this._previousMarker="^^","<"!==(s=s.substr(2))[0]){j=!0;break}case"<":if(L=this._unescapedIri.exec(s))T="IRI",B=L[1];else if(L=this._iri.exec(s)){if(null===(b=this._unescape(L[1]))||o.test(b))return W(this);T="IRI",B=b}else this._n3Mode&&s.length>1&&"="===s[1]&&(T="inverse",Q=2,B="http://www.w3.org/2000/10/swap/log#implies");break;case"_":((L=this._blank.exec(s))||y&&(L=this._blank.exec(s+" ")))&&(T="blank",N="_",B=L[1]);break;case'"':case"'":if(L=this._unescapedString.exec(s))T="literal",B=L[0];else if(L=this._singleQuotedString.exec(s)){if(null===(b=this._unescape(L[0])))return W(this);T="literal",B=b.replace(/^'|'$/g,'"')}else if(L=this._tripleQuotedString.exec(s)){if(b=L[1]||L[2],this._line+=b.split(/\r\n|\r|\n/).length-1,null===(b=this._unescape(b)))return W(this);T="literal",B=b.replace(/^'|'$/g,'"')}break;case"?":this._n3Mode&&(L=this._variable.exec(s))&&(T="var",B=L[0]);break;case"@":"literal"===this._previousMarker&&(L=this._langcode.exec(s))?(T="langcode",B=L[1]):(L=this._keyword.exec(s))&&(T=L[0]);break;case".":if(1===s.length?y:s[1]<"0"||s[1]>"9"){T=".",Q=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(L=this._number.exec(s)||y&&(L=this._number.exec(s+" ")))&&(T="literal",B='"'+L[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(L[1]?"double":/^[+\-]?\d+$/.test(L[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(L=this._sparqlKeyword.exec(s))?T=L[0].toUpperCase():j=!0;break;case"f":case"t":(L=this._boolean.exec(s))?(T="literal",B='"'+L[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):j=!0;break;case"a":(L=this._shortPredicates.exec(s))?(T="abbreviation",B="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):j=!0;break;case"=":this._n3Mode&&s.length>1&&(T="abbreviation",">"!==s[1]?(Q=1,B="http://www.w3.org/2002/07/owl#sameAs"):(Q=2,B="http://www.w3.org/2000/10/swap/log#implies"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":Q=1,T=P;break;default:j=!0}if(j&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(L=this._prefix.exec(s))?((L=this._prefixed.exec(s))||y&&(L=this._prefixed.exec(s+" ")))&&(T="prefixed",N=L[1]||"",B=this._unescape(L[2])):(T="prefix",B=L[1]||"")),"^^"===this._previousMarker)switch(T){case"prefixed":T="type";break;case"IRI":T="typeIRI";break;default:T=""}if(!T)return y||!/^'''|^"""/.test(s)&&/\n|\r/.test(s)?W(this):this._input=s;var V={line:A,type:T,value:B,prefix:N};l(null,V),this.previousToken=V,this._previousMarker=T,s=s.substr(Q||L[0].length,s.length)}function W(R){l(R._syntaxError(/^\S*/.exec(s)[0]))}},_unescape:function(l){try{return l.replace(m,function(y,s,v,x){var a;if(s){if(a=parseInt(s,16),isNaN(a))throw new Error;return h(a)}if(v){if(a=parseInt(v,16),isNaN(a))throw new Error;return a<=65535?h(a):h(55296+(a-=65536)/1024,56320+(1023&a))}var b=e[x];if(!b)throw new Error;return b})}catch(y){return null}},_syntaxError:function(l){this._input=null;var y=new Error('Unexpected "'+l+'" on line '+this._line+".");return y.context={token:void 0,line:this._line,previousToken:this.previousToken},y},tokenize:function(l,y){var s=this;if(this._line=1,"string"==typeof l){if(this._input=l,"function"!=typeof y){var v,x=[];if(this._tokenizeToEnd(function(a,b){a?v=a:x.push(b)},!0),v)throw v;return x}F(function(){s._tokenizeToEnd(y,!0)})}else this._input="","function"==typeof l.setEncoding&&l.setEncoding("utf8"),l.on("data",function(a){null!==s._input&&(s._input+=a,s._tokenizeToEnd(y,!1))}),l.on("end",function(){null!==s._input&&s._tokenizeToEnd(y,!0)}),l.on("error",y)}},ae.exports=f}).call(this)}).call(this,J("timers").setImmediate)},{timers:123}],59:[function(J,ae,ce){var q=J("./N3Lexer"),h="http://www.w3.org/1999/02/22-rdf-syntax-ns#",F=h+"nil",m=h+"first",e=h+"rest",o=/^[a-z][a-z0-9+.-]*:/i,f=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,l=/(?:^|\/)\.\.?(?:$|[\/#?])/,y=0,s=0;function v(a){if(!(this instanceof v))return new v(a);this._contextStack=[],this._graph=null,a=a||{},this._setBase(a.documentIRI);var b="string"==typeof a.format?a.format.match(/\w*$/)[0].toLowerCase():"",A="turtle"===b,T="trig"===b,B=/triple/.test(b),N=/quad/.test(b),P=this._n3Mode=/n3/.test(b),L=B||N;(this._supportsNamedGraphs=!(A||P))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(A||T||B||P),L&&(this._base="",this._resolveIRI=function(Q){return this._error("Disallowed relative IRI",Q),this._callback=x,this._subject=null}),this._blankNodePrefix="string"!=typeof a.blankNodePrefix?"":"_:"+a.blankNodePrefix.replace(/^_:/,""),this._lexer=a.lexer||new q({lineMode:L,n3:P}),this._explicitQuantifiers=!!a.explicitQuantifiers}function x(){}v._resetBlankNodeIds=function(){y=s=0},v.prototype={_setBase:function(a){if(a){var b=a.indexOf("#");b>=0&&(a=a.substr(0,b)),this._base=a,this._basePath=a.indexOf("/")<0?a:a.replace(/[^\/?]*(?:\?.*)?$/,""),a=a.match(f),this._baseRoot=a[0],this._baseScheme=a[1]}else this._base=null},_saveContext:function(a,b,A,T,B){var N=this._n3Mode;this._contextStack.push({subject:A,predicate:T,object:B,graph:b,type:a,inverse:!!N&&this._inversePredicate,blankPrefix:N?this._prefixes._:"",quantified:N?this._quantified:null}),N&&(this._inversePredicate=!1,this._prefixes._=this._graph+".",this._quantified=Object.create(this._quantified))},_restoreContext:function(){var a=this._contextStack.pop(),b=this._n3Mode;this._subject=a.subject,this._predicate=a.predicate,this._object=a.object,this._graph=a.graph,b&&(this._inversePredicate=a.inverse,this._prefixes._=a.blankPrefix,this._quantified=a.quantified)},_readInTopContext:function(a){switch(a.type){case"eof":return null!==this._graph?this._error("Unclosed graph",a):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(a)}},_readEntity:function(a,b){var A;switch(a.type){case"IRI":case"typeIRI":A=null===this._base||o.test(a.value)?a.value:this._resolveIRI(a);break;case"type":case"blank":case"prefixed":var T=this._prefixes[a.prefix];if(void 0===T)return this._error('Undefined prefix "'+a.prefix+':"',a);A=T+a.value;break;case"var":return a.value;default:return this._error("Expected entity but got "+a.type,a)}return!b&&this._n3Mode&&A in this._quantified&&(A=this._quantified[A]),A},_readSubject:function(a){switch(this._predicate=null,a.type){case"[":return this._saveContext("blank",this._graph,this._subject="_:b"+s++,null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,F,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph="_:b"+s++,null,null),this._readSubject):this._error("Unexpected graph",a);case"}":return this._readPunctuation(a);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forSome",this._quantifiedPrefix="_:b",this._readQuantifierList):this._error('Unexpected "@forSome"',a);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forAll",this._quantifiedPrefix="?b-",this._readQuantifierList):this._error('Unexpected "@forAll"',a);default:if(void 0===(this._subject=this._readEntity(a)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph},_readPredicate:function(a){var b=a.type;switch(b){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=a.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+b,a):(this._subject=null,"]"===b?this._readBlankNodeTail(a):this._readPunctuation(a));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",a);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",a);default:if(void 0===(this._predicate=this._readEntity(a)))return}return this._readObject},_readObject:function(a){switch(a.type){case"literal":return this._object=a.value,this._readDataTypeOrLang;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject="_:b"+s++),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,F),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph="_:b"+s++),this._readSubject):this._error("Unexpected graph",a);default:if(void 0===(this._object=this._readEntity(a)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()},_readPredicateOrNamedGraph:function(a){return"{"===a.type?this._readGraph(a):this._readPredicate(a)},_readGraph:function(a){return"{"!==a.type?this._error("Expected graph but got "+a.type,a):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(a){return"]"===a.type?(this._subject=null,this._readBlankNodeTail(a)):(this._predicate=null,this._readPredicate(a))},_readBlankNodeTail:function(a){if("]"!==a.type)return this._readBlankNodePunctuation(a);null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph);var b=null===this._predicate;return this._restoreContext(),null===this._object?b?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()},_readPredicateAfterBlank:function(a){return"."!==a.type||this._contextStack.length?this._readPredicate(a):(this._subject=null,this._readPunctuation(a))},_readListItem:function(a){var b=null,A=null,T=this._subject,B=this._contextStack,N=B[B.length-1],P=this._readListItem,L=!0;switch(a.type){case"[":this._saveContext("blank",this._graph,A="_:b"+s++,m,this._subject=b="_:b"+s++),P=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,A="_:b"+s++,m,F),this._subject=null;break;case")":if(this._restoreContext(),0!==B.length&&"list"===B[B.length-1].type&&this._triple(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(P=this._readPredicate,this._subject===F)return P}else if(P=this._getContextEndReader(),this._object===F)return P;A=F;break;case"literal":b=a.value,L=!1,P=this._readListItemDataTypeOrLang;break;default:if(void 0===(b=this._readEntity(a)))return}if(null===A&&(this._subject=A="_:b"+s++),null===T?null===N.predicate?N.subject=A:N.object=A:this._triple(T,e,A,this._graph),null!==b){if(this._n3Mode&&("IRI"===a.type||"prefixed"===a.type))return this._saveContext("item",this._graph,A,m,b),this._subject=b,this._predicate=null,this._getPathReader(this._readListItem);L?this._triple(A,m,b,this._graph):this._object=b}return P},_readDataTypeOrLang:function(a){return this._completeLiteral(a,!1)},_readListItemDataTypeOrLang:function(a){return this._completeLiteral(a,!0)},_completeLiteral:function(a,b){var A=!1;switch(a.type){case"type":case"typeIRI":var T=this._readEntity(a);if(void 0===T)return;A=!0,this._object+="^^"+T;break;case"langcode":A=!0,this._object+="@"+a.value.toLowerCase()}return b&&this._triple(this._subject,m,this._object,this._graph),A?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(a))},_readFormulaTail:function(a){return"}"!==a.type?this._readPunctuation(a):(null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())},_readPunctuation:function(a){var b,A=this._subject,T=this._graph,B=this._inversePredicate;switch(a.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",a);if(this._n3Mode)return this._readFormulaTail(a);this._graph=null;case".":this._subject=null,b=this._contextStack.length?this._readSubject:this._readInTopContext,B&&(this._inversePredicate=!1);break;case";":b=this._readPredicate;break;case",":b=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(T=this._readEntity(a))){b=this._readQuadPunctuation;break}return this._error('Expected punctuation to follow "'+this._object+'"',a)}if(null!==A){var N=this._predicate,P=this._object;B?this._triple(P,N,A,T):this._triple(A,N,P,T)}return b},_readBlankNodePunctuation:function(a){var b;switch(a.type){case";":b=this._readPredicate;break;case",":b=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',a)}return this._triple(this._subject,this._predicate,this._object,this._graph),b},_readQuadPunctuation:function(a){return"."!==a.type?this._error("Expected dot to follow quad",a):this._readInTopContext},_readPrefix:function(a){return"prefix"!==a.type?this._error("Expected prefix to follow @prefix",a):(this._prefix=a.value,this._readPrefixIRI)},_readPrefixIRI:function(a){if("IRI"!==a.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',a);var b=this._readEntity(a);return this._prefixes[this._prefix]=b,this._prefixCallback(this._prefix,b),this._readDeclarationPunctuation},_readBaseIRI:function(a){return"IRI"!==a.type?this._error("Expected IRI to follow base declaration",a):(this._setBase(null===this._base||o.test(a.value)?a.value:this._resolveIRI(a)),this._readDeclarationPunctuation)},_readNamedGraphLabel:function(a){switch(a.type){case"IRI":case"blank":case"prefixed":return this._readSubject(a),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",a)}},_readNamedGraphBlankLabel:function(a){return"]"!==a.type?this._error("Invalid graph label",a):(this._subject="_:b"+s++,this._readGraph)},_readDeclarationPunctuation:function(a){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(a)):"."!==a.type?this._error("Expected declaration to end with a dot",a):this._readInTopContext},_readQuantifierList:function(a){var b;switch(a.type){case"IRI":case"prefixed":if(void 0!==(b=this._readEntity(a,!0)))break;default:return this._error("Unexpected "+a.type,a)}return this._explicitQuantifiers?(null===this._subject?this._triple(this._graph||"",this._predicate,this._subject="_:b"+s++,"urn:n3:quantifiers"):this._triple(this._subject,e,this._subject="_:b"+s++,"urn:n3:quantifiers"),this._triple(this._subject,m,b,"urn:n3:quantifiers")):this._quantified[b]=this._quantifiedPrefix+s++,this._readQuantifierPunctuation},_readQuantifierPunctuation:function(a){return","===a.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._triple(this._subject,e,F,"urn:n3:quantifiers"),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(a))},_getPathReader:function(a){return this._afterPath=a,this._readPath},_readPath:function(a){switch(a.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:var b=this._contextStack,A=b.length&&b[b.length-1];if(A&&"item"===A.type){var T=this._subject;this._restoreContext(),this._triple(this._subject,m,T,this._graph)}return this._afterPath(a)}},_readForwardPath:function(a){var b,A,T="_:b"+s++;if(void 0!==(A=this._readEntity(a)))return null===this._predicate?(b=this._subject,this._subject=T):(b=this._object,this._object=T),this._triple(b,A,T,this._graph),this._readPath},_readBackwardPath:function(a){var b,A,T="_:b"+s++;if(void 0!==(b=this._readEntity(a)))return null===this._predicate?(A=this._subject,this._subject=T):(A=this._object,this._object=T),this._triple(T,b,A,this._graph),this._readPath},_getContextEndReader:function(){var a=this._contextStack;if(!a.length)return this._readPunctuation;switch(a[a.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail}},_triple:function(a,b,A,T){this._callback(null,{subject:a,predicate:b,object:A,graph:T||""})},_error:function(a,b){var A=new Error(a+" on line "+b.line+".");A.context={token:b,line:b.line,previousToken:this._lexer.previousToken},this._callback(A),this._callback=x},_resolveIRI:function(a){var b=a.value;switch(b[0]){case void 0:return this._base;case"#":return this._base+b;case"?":return this._base.replace(/(?:\?.*)?$/,b);case"/":return("/"===b[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(b);default:return this._removeDotSegments(this._basePath+b)}},_removeDotSegments:function(a){if(!l.test(a))return a;for(var b="",A=a.length,T=-1,B=-1,N=0,P="/";T<A;){switch(P){case":":if(B<0&&"/"===a[++T]&&"/"===a[++T])for(;(B=T+1)<A&&"/"!==a[B];)T=B;break;case"?":case"#":T=A;break;case"/":if("."===a[T+1])switch(P=a[1+ ++T]){case"/":b+=a.substring(N,T-1),N=T+1;break;case void 0:case"?":case"#":return b+a.substring(N,T)+a.substr(T+1);case".":if(void 0===(P=a[1+ ++T])||"/"===P||"?"===P||"#"===P){if((N=(b+=a.substring(N,T-2)).lastIndexOf("/"))>=B&&(b=b.substr(0,N)),"/"!==P)return b+"/"+a.substr(T+1);N=T+1}}}P=a[++T]}return b+a.substring(N)},parse:function(a,b,A){var T=this;if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+y+++"_",this._prefixCallback=A||x,this._inversePredicate=!1,this._quantified=Object.create(null),!b){var B,N=[];if(this._callback=function(P,L){P?B=P:L&&N.push(L)},this._lexer.tokenize(a).every(function(P){return T._readCallback=T._readCallback(P)}),B)throw B;return N}this._callback=b,this._lexer.tokenize(a,function(P,L){null!==P?(T._callback(P),T._callback=x):T._readCallback&&(T._readCallback=T._readCallback(L))})}},ae.exports=v},{"./N3Lexer":58}],60:[function(J,ae,ce){var q=J("./N3Util").expandPrefixedName;function h(m,e){if(!(this instanceof h))return new h(m,e);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,e||!m||m[0]||(e=m,m=null),e=e||{},this._prefixes=Object.create(null),e.prefixes&&this.addPrefixes(e.prefixes),m&&this.addTriples(m)}function F(m){return"string"==typeof m||m instanceof String}h.prototype={get size(){var m=this._size;if(null!==m)return m;m=0;var e,o,f=this._graphs;for(var l in f)for(var y in e=f[l].subjects)for(var s in o=e[y])m+=Object.keys(o[s]).length;return this._size=m},_addToIndex:function(m,e,o,f){var l=m[e]||(m[e]={}),y=l[o]||(l[o]={}),s=f in y;return s||(y[f]=null),!s},_removeFromIndex:function(m,e,o,f){var l,y=m[e],s=y[o];for(l in delete s[f],s)return;for(l in delete y[o],y)return;delete m[e]},_findInIndex:function(m,e,o,f,l,y,s,v,x,a){var b,A,T,B=!e+!o+!f>1?Object.keys(this._ids):this._entities;for(var N in e&&((b=m,m={})[e]=b[e]),m){var P=B[N];if(A=m[N])for(var L in o&&((b=A,A={})[o]=b[o]),A){var Q=B[L];if(T=A[L])for(var j=(f?f in T?[f]:[]:Object.keys(T)),V=j.length-1;V>=0;V--){var W={subject:"",predicate:"",object:"",graph:v};if(W[l]=P,W[y]=Q,W[s]=B[j[V]],a)a.push(W);else if(x(W))return!0}}}return a},_loop:function(m,e){for(var o in m)e(o)},_loopByKey0:function(m,e,o){var f,l;if(f=m[e])for(l in f)o(l)},_loopByKey1:function(m,e,o){var f;for(f in m)m[f][e]&&o(f)},_loopBy2Keys:function(m,e,o,f){var l,y,s;if((l=m[e])&&(y=l[o]))for(s in y)f(s)},_countInIndex:function(m,e,o,f){var l,y,s,v=0;for(var x in e&&((l=m,m={})[e]=l[e]),m)if(y=m[x])for(var a in o&&((l=y,y={})[o]=l[o]),y)(s=y[a])&&(f?f in s&&v++:v+=Object.keys(s).length);return v},_getGraphs:function(m){if(!F(m))return this._graphs;var e={};return e[m]=this._graphs[m],e},_uniqueEntities:function(m){var e=Object.create(null),o=this._entities;return function(f){f in e||(e[f]=!0,m(o[f]))}},addTriple:function(m,e,o,f){e||(f=m.graph,o=m.object,e=m.predicate,m=m.subject),f=f||"";var l=this._graphs[f];l||(l=this._graphs[f]={subjects:{},predicates:{},objects:{}},Object.freeze(l));var y=this._ids,s=this._entities;m=y[m]||(y[s[++this._id]=m]=this._id),e=y[e]||(y[s[++this._id]=e]=this._id),o=y[o]||(y[s[++this._id]=o]=this._id);var v=this._addToIndex(l.subjects,m,e,o);return this._addToIndex(l.predicates,e,o,m),this._addToIndex(l.objects,o,m,e),this._size=null,v},addTriples:function(m){for(var e=m.length-1;e>=0;e--)this.addTriple(m[e])},addPrefix:function(m,e){this._prefixes[m]=e},addPrefixes:function(m){for(var e in m)this.addPrefix(e,m[e])},removeTriple:function(m,e,o,f){e||(f=m.graph,o=m.object,e=m.predicate,m=m.subject),f=f||"";var l,y,s,v=this._ids,x=this._graphs;if(!((m=v[m])&&(e=v[e])&&(o=v[o])&&(l=x[f])&&(y=l.subjects[m])&&(s=y[e])&&o in s))return!1;for(m in this._removeFromIndex(l.subjects,m,e,o),this._removeFromIndex(l.predicates,e,o,m),this._removeFromIndex(l.objects,o,m,e),null!==this._size&&this._size--,l.subjects)return!0;return delete x[f],!0},removeTriples:function(m){for(var e=m.length-1;e>=0;e--)this.removeTriple(m[e])},getTriples:function(m,e,o,f){var l=this._prefixes;return this.getTriplesByIRI(q(m,l),q(e,l),q(o,l),q(f,l))},getTriplesByIRI:function(m,e,o,f){var l,y,s,v,x=[],a=this._getGraphs(f),b=this._ids;if(F(m)&&!(y=b[m])||F(e)&&!(s=b[e])||F(o)&&!(v=b[o]))return x;for(var A in a)(l=a[A])&&(y?v?this._findInIndex(l.objects,v,y,s,"object","subject","predicate",A,null,x):this._findInIndex(l.subjects,y,s,null,"subject","predicate","object",A,null,x):s?this._findInIndex(l.predicates,s,v,null,"predicate","object","subject",A,null,x):v?this._findInIndex(l.objects,v,null,null,"object","subject","predicate",A,null,x):this._findInIndex(l.subjects,null,null,null,"subject","predicate","object",A,null,x));return x},countTriples:function(m,e,o,f){var l=this._prefixes;return this.countTriplesByIRI(q(m,l),q(e,l),q(o,l),q(f,l))},countTriplesByIRI:function(m,e,o,f){var l,y,s,v,x=0,a=this._getGraphs(f),b=this._ids;if(F(m)&&!(y=b[m])||F(e)&&!(s=b[e])||F(o)&&!(v=b[o]))return 0;for(var A in a)(l=a[A])&&(x+=m?o?this._countInIndex(l.objects,v,y,s):this._countInIndex(l.subjects,y,s,v):e?this._countInIndex(l.predicates,s,v,y):this._countInIndex(l.objects,v,y,s));return x},forEach:function(m,e,o,f,l){var y=this._prefixes;this.forEachByIRI(m,q(e,y),q(o,y),q(f,y),q(l,y))},forEachByIRI:function(m,e,o,f,l){this.someByIRI(function(y){return m(y),!1},e,o,f,l)},every:function(m,e,o,f,l){var y=this._prefixes;return this.everyByIRI(m,q(e,y),q(o,y),q(f,y),q(l,y))},everyByIRI:function(m,e,o,f,l){var y=!1,s=!this.someByIRI(function(v){return y=!0,!m(v)},e,o,f,l);return y&&s},some:function(m,e,o,f,l){var y=this._prefixes;return this.someByIRI(m,q(e,y),q(o,y),q(f,y),q(l,y))},someByIRI:function(m,e,o,f,l){var y,s,v,x,a=this._getGraphs(l),b=this._ids;if(F(e)&&!(s=b[e])||F(o)&&!(v=b[o])||F(f)&&!(x=b[f]))return!1;for(var A in a)if(y=a[A])if(s){if(x){if(this._findInIndex(y.objects,x,s,v,"object","subject","predicate",A,m,null))return!0}else if(this._findInIndex(y.subjects,s,v,null,"subject","predicate","object",A,m,null))return!0}else if(v){if(this._findInIndex(y.predicates,v,x,null,"predicate","object","subject",A,m,null))return!0}else if(x){if(this._findInIndex(y.objects,x,null,null,"object","subject","predicate",A,m,null))return!0}else if(this._findInIndex(y.subjects,null,null,null,"subject","predicate","object",A,m,null))return!0;return!1},getSubjects:function(m,e,o){var f=this._prefixes;return this.getSubjectsByIRI(q(m,f),q(e,f),q(o,f))},getSubjectsByIRI:function(m,e,o){var f=[];return this.forSubjectsByIRI(function(l){f.push(l)},m,e,o),f},forSubjects:function(m,e,o,f){var l=this._prefixes;this.forSubjectsByIRI(m,q(e,l),q(o,l),q(f,l))},forSubjectsByIRI:function(m,e,o,f){var l,y,s,v=this._ids,x=this._getGraphs(f);if(m=this._uniqueEntities(m),!(F(e)&&!(y=v[e])||F(o)&&!(s=v[o])))for(f in x)(l=x[f])&&(y?s?this._loopBy2Keys(l.predicates,y,s,m):this._loopByKey1(l.subjects,y,m):s?this._loopByKey0(l.objects,s,m):this._loop(l.subjects,m))},getPredicates:function(m,e,o){var f=this._prefixes;return this.getPredicatesByIRI(q(m,f),q(e,f),q(o,f))},getPredicatesByIRI:function(m,e,o){var f=[];return this.forPredicatesByIRI(function(l){f.push(l)},m,e,o),f},forPredicates:function(m,e,o,f){var l=this._prefixes;this.forPredicatesByIRI(m,q(e,l),q(o,l),q(f,l))},forPredicatesByIRI:function(m,e,o,f){var l,y,s,v=this._ids,x=this._getGraphs(f);if(m=this._uniqueEntities(m),!(F(e)&&!(y=v[e])||F(o)&&!(s=v[o])))for(f in x)(l=x[f])&&(y?s?this._loopBy2Keys(l.objects,s,y,m):this._loopByKey0(l.subjects,y,m):s?this._loopByKey1(l.predicates,s,m):this._loop(l.predicates,m))},getObjects:function(m,e,o){var f=this._prefixes;return this.getObjectsByIRI(q(m,f),q(e,f),q(o,f))},getObjectsByIRI:function(m,e,o){var f=[];return this.forObjectsByIRI(function(l){f.push(l)},m,e,o),f},forObjects:function(m,e,o,f){var l=this._prefixes;this.forObjectsByIRI(m,q(e,l),q(o,l),q(f,l))},forObjectsByIRI:function(m,e,o,f){var l,y,s,v=this._ids,x=this._getGraphs(f);if(m=this._uniqueEntities(m),!(F(e)&&!(y=v[e])||F(o)&&!(s=v[o])))for(f in x)(l=x[f])&&(y?s?this._loopBy2Keys(l.subjects,y,s,m):this._loopByKey1(l.objects,y,m):s?this._loopByKey0(l.predicates,s,m):this._loop(l.objects,m))},getGraphs:function(m,e,o){var f=this._prefixes;return this.getGraphsByIRI(q(m,f),q(e,f),q(o,f))},getGraphsByIRI:function(m,e,o){var f=[];return this.forGraphsByIRI(function(l){f.push(l)},m,e,o),f},forGraphs:function(m,e,o,f){var l=this._prefixes;this.forGraphsByIRI(m,q(e,l),q(o,l),q(f,l))},forGraphsByIRI:function(m,e,o,f){for(var l in this._graphs)this.someByIRI(function(y){return m(y.graph),!0},e,o,f,l)},createBlankNode:function(m){var e,o;if(m)for(e=m="_:"+m,o=1;this._ids[e];)e=m+o++;else do{e="_:b"+this._blankNodeIndex++}while(this._ids[e]);return this._ids[e]=++this._id,this._entities[this._id]=e,e}},ae.exports=h},{"./N3Util":63}],61:[function(J,ae,ce){var q=J("stream").Transform,h=J("util"),F=J("./N3Parser.js");function m(e){if(!(this instanceof m))return new m(e);q.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var o,f,l=this;new F(e).parse({on:function(y,s){switch(y){case"data":o=s;break;case"end":f=s}}},function(y,s){y&&l.emit("error",y)||s&&l.push(s)},function(y,s){l.emit("prefix",y,s)}),this._transform=function(y,s,v){o(y),v()},this._flush=function(y){f(),y()}}h.inherits(m,q),ae.exports=m},{"./N3Parser.js":59,stream:87,util:8}],62:[function(J,ae,ce){var q=J("stream").Transform,h=J("util"),F=J("./N3Writer.js");function m(e){if(!(this instanceof m))return new m(e);q.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var o=this,f=new F({write:function(l,y,s){o.push(l),s&&s()},end:function(l){o.push(null),l&&l()}},e);this._transform=function(l,y,s){f.addTriple(l,s)},this._flush=function(l){f.end(l)}}h.inherits(m,q),ae.exports=m},{"./N3Writer.js":64,stream:87,util:8}],63:[function(J,ae,ce){var h="http://www.w3.org/2001/XMLSchema#double",F={isIRI:function(m){if("string"!=typeof m)return!1;if(0===m.length)return!0;var e=m[0];return'"'!==e&&"_"!==e},isLiteral:function(m){return"string"==typeof m&&'"'===m[0]},isBlank:function(m){return"string"==typeof m&&"_:"===m.substr(0,2)},isDefaultGraph:function(m){return!m},inDefaultGraph:function(m){return!m.graph},getLiteralValue:function(m){var e=/^"([^]*)"/.exec(m);if(!e)throw new Error(m+" is not a literal");return e[1]},getLiteralType:function(m){var e=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(m);if(!e)throw new Error(m+" is not a literal");return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(m){var e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(m);if(!e)throw new Error(m+" is not a literal");return e[1]?e[1].toLowerCase():""},isPrefixedName:function(m){return"string"==typeof m&&/^[^:\/"']*:[^:\/"']+$/.test(m)},expandPrefixedName:function(m,e){var o,f,l,y=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(m);return y&&(f=e[o=y[1]],l=y.index),void 0===f?m:0===l?f+m.substr(o.length+1):m.substr(0,l+3)+f+m.substr(l+o.length+4)},createIRI:function(m){return m&&'"'===m[0]?F.getLiteralValue(m):m},createLiteral:function(m,e){if(!e)switch(typeof m){case"boolean":e="http://www.w3.org/2001/XMLSchema#boolean";break;case"number":isFinite(m)?e=m%1==0?"http://www.w3.org/2001/XMLSchema#integer":h:(e=h,isNaN(m)||(m=m>0?"INF":"-INF"));break;default:return'"'+m+'"'}return'"'+m+(/^[a-z]+(-[a-z0-9]+)*$/i.test(e)?'"@'+e.toLowerCase():'"^^'+e)},prefix:function(m){return F.prefixes({"":m})("")},prefixes:function(m){var e=Object.create(null);for(var o in m)f(o,m[o]);function f(l,y){if(y||!(l in e)){var s=Object.create(null);y=y||"",e[l]=function(v){return s[v]||(s[v]=y+v)}}return e[l]}return f}};ae.exports=F},{}],64:[function(J,ae,ce){var q=/^"([^]*)"(?:\^\^(.+)|@([a-z]+(?:-[a-z0-9]+)*))?$/i,h=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,F=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,m={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function e(f,l){if(!(this instanceof e))return new e(f,l);if(f&&"function"!=typeof f.write&&(l=f,f=null),l=l||{},f)this._outputStream=f,this._endStream=void 0===l.end||!!l.end;else{var y="";this._outputStream={write:function(s,v,x){y+=s,x&&x()},end:function(s){s&&s(null,y)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(l.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),l.prefixes&&this.addPrefixes(l.prefixes))}function o(f){var l=m[f];return void 0===l&&(1===f.length?(l=f.charCodeAt(0).toString(16),l="\\u0000".substr(0,6-l.length)+l):(l=(1024*(f.charCodeAt(0)-55296)+f.charCodeAt(1)+9216).toString(16),l="\\U00000000".substr(0,10-l.length)+l)),l}e.prototype={_write:function(f,l){this._outputStream.write(f,"utf8",l)},_writeTriple:function(f,l,y,s,v){try{this._graph!==s&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(s?this._encodeIriOrBlankNode(s)+" {\n":"")),this._subject=null,this._graph="["!==s[0]?s:"]"),this._subject===f?this._predicate===l?this._write(", "+this._encodeObject(y),v):this._write(";\n    "+this._encodePredicate(this._predicate=l)+" "+this._encodeObject(y),v):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=f)+" "+this._encodePredicate(this._predicate=l)+" "+this._encodeObject(y),v)}catch(x){v&&v(x)}},_writeTripleLine:function(f,l,y,s,v){delete this._prefixMatch;try{this._write(this.tripleToString(f,l,y,s),v)}catch(x){v&&v(x)}},tripleToString:function(f,l,y,s){return this._encodeIriOrBlankNode(f)+" "+this._encodeIriOrBlankNode(l)+" "+this._encodeObject(y)+(s?" "+this._encodeIriOrBlankNode(s)+".\n":".\n")},triplesToString:function(f){return f.map(function(l){return this.tripleToString(l.subject,l.predicate,l.object,l.graph)},this).join("")},_encodeIriOrBlankNode:function(f){var l=f[0];if("["===l||"("===l||"_"===l&&":"===f[1])return f;h.test(f)&&(f=f.replace(F,o));var y=this._prefixRegex.exec(f);return y?y[1]?this._prefixIRIs[y[1]]+y[2]:f:"<"+f+">"},_encodeLiteral:function(f,l,y){return h.test(f)&&(f=f.replace(F,o)),y?'"'+f+'"@'+y:l?'"'+f+'"^^'+this._encodeIriOrBlankNode(l):'"'+f+'"'},_encodeSubject:function(f){if('"'===f[0])throw new Error("A literal as subject is not allowed: "+f);return"["===f[0]&&(this._subject="]"),this._encodeIriOrBlankNode(f)},_encodePredicate:function(f){if('"'===f[0])throw new Error("A literal as predicate is not allowed: "+f);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===f?"a":this._encodeIriOrBlankNode(f)},_encodeObject:function(f){if('"'!==f[0])return this._encodeIriOrBlankNode(f);var l=q.exec(f);if(!l)throw new Error("Invalid literal: "+f);return this._encodeLiteral(l[1],l[2],l[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(f,l,y,s,v){void 0===y?this._writeTriple(f.subject,f.predicate,f.object,f.graph||"",l):"string"!=typeof s?this._writeTriple(f,l,y,"",s):this._writeTriple(f,l,y,s,v)},addTriples:function(f){for(var l=0;l<f.length;l++)this.addTriple(f[l])},addPrefix:function(f,l,y){var s={};s[f]=l,this.addPrefixes(s,y)},addPrefixes:function(f,l){var y=this._prefixIRIs,s=!1;for(var v in f){var x=f[v];/[#\/]$/.test(x)&&y[x]!==(v+=":")&&(s=!0,y[x]=v,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+v+" <"+x+">.\n"))}if(s){var a="",b="";for(var A in y)a+=a?"|"+A:A,b+=(b?"|":"")+y[A];a=a.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+b+")[^/]*$|^("+a+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(s?"\n":"",l)},blank:function(f,l){var y,s,v=f;switch(void 0===f?v=[]:"string"==typeof f?v=[{predicate:f,object:l}]:"length"in f||(v=[f]),s=v.length){case 0:return"[]";case 1:if("["!==(y=v[0]).object[0])return"[ "+this._encodePredicate(y.predicate)+" "+this._encodeObject(y.object)+" ]";default:for(var x="[",a=0;a<s;a++)(y=v[a]).predicate===f?x+=", "+this._encodeObject(y.object):(x+=(a?";\n  ":"\n  ")+this._encodePredicate(y.predicate)+" "+this._encodeObject(y.object),f=y.predicate);return x+"\n]"}},list:function(f){for(var l=f&&f.length||0,y=new Array(l),s=0;s<l;s++)y[s]=this._encodeObject(f[s]);return"("+y.join(" ")+")"},_prefixRegex:/$0^/,end:function(f){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var l=f&&function(y,s){l=null,f(y,s)};if(this._endStream)try{return this._outputStream.end(l)}catch(y){}l&&l()}},ae.exports=e},{}],65:[function(J,ae,ce){(function(q){(function(){var h={};ae.exports=h;var F={};h.encode=function(m,e,o){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==o&&"number"!=typeof o)throw new TypeError('"maxline" must be a number.');var f="";if(m instanceof Uint8Array){var l=0,y=e.length,s=e.charAt(0),v=[0];for(l=0;l<m.length;++l){for(var x=0,a=m[l];x<v.length;++x)a+=v[x]<<8,v[x]=a%y,a=a/y|0;for(;a>0;)v.push(a%y),a=a/y|0}for(l=0;0===m[l]&&l<m.length-1;++l)f+=s;for(l=v.length-1;l>=0;--l)f+=e[v[l]]}else f=function(A,T){var B=0,N=T.length,P=T.charAt(0),L=[0];for(B=0;B<A.length();++B){for(var Q=0,j=A.at(B);Q<L.length;++Q)j+=L[Q]<<8,L[Q]=j%N,j=j/N|0;for(;j>0;)L.push(j%N),j=j/N|0}var V="";for(B=0;0===A.at(B)&&B<A.length()-1;++B)V+=P;for(B=L.length-1;B>=0;--B)V+=T[L[B]];return V}(m,e);if(o){var b=new RegExp(".{1,"+o+"}","g");f=f.match(b).join("\r\n")}return f},h.decode=function(m,e){if("string"!=typeof m)throw new TypeError('"input" must be a string.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');var o=F[e];if(!o){o=F[e]=[];for(var f=0;f<e.length;++f)o[e.charCodeAt(f)]=f}m=m.replace(/\s/g,"");var l=e.length,y=e.charAt(0),s=[0];for(f=0;f<m.length;f++){var v=o[m.charCodeAt(f)];if(void 0===v)return;for(var x=0,a=v;x<s.length;++x)a+=s[x]*l,s[x]=255&a,a>>=8;for(;a>0;)s.push(255&a),a>>=8}for(var b=0;m[b]===y&&b<m.length-1;++b)s.push(0);return void 0!==q?q.from(s.reverse()):new Uint8Array(s.reverse())}}).call(this)}).call(this,J("buffer").Buffer)},{buffer:4}],66:[function(J,ae,ce){ae.exports={options:{usePureJavaScript:!1}}},{}],67:[function(J,ae,ce){var q=J("./forge");ae.exports=q.md=q.md||{},q.md.algorithms=q.md.algorithms||{}},{"./forge":66}],68:[function(J,ae,ce){var q=J("./forge");J("./md"),J("./util");var h=ae.exports=q.sha1=q.sha1||{};q.md.sha1=q.md.algorithms.sha1=h,h.create=function(){m||(F=String.fromCharCode(128),F+=q.util.fillString(String.fromCharCode(0),64),m=!0);var o=null,f=q.util.createBuffer(),l=new Array(80),y={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){y.messageLength=0,y.fullMessageLength=y.messageLength64=[];for(var s=y.messageLengthSize/4,v=0;v<s;++v)y.fullMessageLength.push(0);return f=q.util.createBuffer(),o={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},y}};return y.start(),y.update=function(s,v){"utf8"===v&&(s=q.util.encodeUtf8(s));var x=s.length;y.messageLength+=x,x=[x/4294967296>>>0,x>>>0];for(var a=y.fullMessageLength.length-1;a>=0;--a)y.fullMessageLength[a]+=x[1],x[1]=x[0]+(y.fullMessageLength[a]/4294967296>>>0),y.fullMessageLength[a]=y.fullMessageLength[a]>>>0,x[0]=x[1]/4294967296>>>0;return f.putBytes(s),e(o,l,f),(f.read>2048||0===f.length())&&f.compact(),y},y.digest=function(){var s=q.util.createBuffer();s.putBytes(f.bytes());var v,x=y.fullMessageLength[y.fullMessageLength.length-1]+y.messageLengthSize&y.blockLength-1;s.putBytes(F.substr(0,y.blockLength-x));for(var a=8*y.fullMessageLength[0],b=0;b<y.fullMessageLength.length-1;++b)a+=(v=8*y.fullMessageLength[b+1])/4294967296>>>0,s.putInt32(a>>>0),a=v>>>0;s.putInt32(a);var A={h0:o.h0,h1:o.h1,h2:o.h2,h3:o.h3,h4:o.h4};e(A,l,s);var T=q.util.createBuffer();return T.putInt32(A.h0),T.putInt32(A.h1),T.putInt32(A.h2),T.putInt32(A.h3),T.putInt32(A.h4),T},y};var F=null,m=!1;function e(o,f,l){for(var y,s,v,x,a,b,A,T=l.length();T>=64;){for(s=o.h0,v=o.h1,x=o.h2,a=o.h3,b=o.h4,A=0;A<16;++A)y=l.getInt32(),f[A]=y,y=(s<<5|s>>>27)+(a^v&(x^a))+b+1518500249+y,b=a,a=x,x=(v<<30|v>>>2)>>>0,v=s,s=y;for(;A<20;++A)y=(y=f[A-3]^f[A-8]^f[A-14]^f[A-16])<<1|y>>>31,f[A]=y,y=(s<<5|s>>>27)+(a^v&(x^a))+b+1518500249+y,b=a,a=x,x=(v<<30|v>>>2)>>>0,v=s,s=y;for(;A<32;++A)y=(y=f[A-3]^f[A-8]^f[A-14]^f[A-16])<<1|y>>>31,f[A]=y,y=(s<<5|s>>>27)+(v^x^a)+b+1859775393+y,b=a,a=x,x=(v<<30|v>>>2)>>>0,v=s,s=y;for(;A<40;++A)y=(y=f[A-6]^f[A-16]^f[A-28]^f[A-32])<<2|y>>>30,f[A]=y,y=(s<<5|s>>>27)+(v^x^a)+b+1859775393+y,b=a,a=x,x=(v<<30|v>>>2)>>>0,v=s,s=y;for(;A<60;++A)y=(y=f[A-6]^f[A-16]^f[A-28]^f[A-32])<<2|y>>>30,f[A]=y,y=(s<<5|s>>>27)+(v&x|a&(v^x))+b+2400959708+y,b=a,a=x,x=(v<<30|v>>>2)>>>0,v=s,s=y;for(;A<80;++A)y=(y=f[A-6]^f[A-16]^f[A-28]^f[A-32])<<2|y>>>30,f[A]=y,y=(s<<5|s>>>27)+(v^x^a)+b+3395469782+y,b=a,a=x,x=(v<<30|v>>>2)>>>0,v=s,s=y;o.h0=o.h0+s|0,o.h1=o.h1+v|0,o.h2=o.h2+x|0,o.h3=o.h3+a|0,o.h4=o.h4+b|0,T-=64}}},{"./forge":66,"./md":67,"./util":70}],69:[function(J,ae,ce){var q=J("./forge");J("./md"),J("./util");var h=ae.exports=q.sha256=q.sha256||{};q.md.sha256=q.md.algorithms.sha256=h,h.create=function(){m||(F=String.fromCharCode(128),F+=q.util.fillString(String.fromCharCode(0),64),e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],m=!0);var f=null,l=q.util.createBuffer(),y=new Array(64),s={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var v=s.messageLengthSize/4,x=0;x<v;++x)s.fullMessageLength.push(0);return l=q.util.createBuffer(),f={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},s}};return s.start(),s.update=function(v,x){"utf8"===x&&(v=q.util.encodeUtf8(v));var a=v.length;s.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var b=s.fullMessageLength.length-1;b>=0;--b)s.fullMessageLength[b]+=a[1],a[1]=a[0]+(s.fullMessageLength[b]/4294967296>>>0),s.fullMessageLength[b]=s.fullMessageLength[b]>>>0,a[0]=a[1]/4294967296>>>0;return l.putBytes(v),o(f,y,l),(l.read>2048||0===l.length())&&l.compact(),s},s.digest=function(){var v=q.util.createBuffer();v.putBytes(l.bytes());var x,a=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize&s.blockLength-1;v.putBytes(F.substr(0,s.blockLength-a));for(var b=8*s.fullMessageLength[0],A=0;A<s.fullMessageLength.length-1;++A)b+=(x=8*s.fullMessageLength[A+1])/4294967296>>>0,v.putInt32(b>>>0),b=x>>>0;v.putInt32(b);var T={h0:f.h0,h1:f.h1,h2:f.h2,h3:f.h3,h4:f.h4,h5:f.h5,h6:f.h6,h7:f.h7};o(T,y,v);var B=q.util.createBuffer();return B.putInt32(T.h0),B.putInt32(T.h1),B.putInt32(T.h2),B.putInt32(T.h3),B.putInt32(T.h4),B.putInt32(T.h5),B.putInt32(T.h6),B.putInt32(T.h7),B},s};var F=null,m=!1,e=null;function o(f,l,y){for(var s,v,x,a,b,A,T,B,N,P,L,Q,j,V=y.length();V>=64;){for(b=0;b<16;++b)l[b]=y.getInt32();for(;b<64;++b)s=((s=l[b-2])>>>17|s<<15)^(s>>>19|s<<13)^s>>>10,v=((v=l[b-15])>>>7|v<<25)^(v>>>18|v<<14)^v>>>3,l[b]=s+l[b-7]+v+l[b-16]|0;for(A=f.h0,T=f.h1,B=f.h2,N=f.h3,P=f.h4,L=f.h5,Q=f.h6,j=f.h7,b=0;b<64;++b)x=(A>>>2|A<<30)^(A>>>13|A<<19)^(A>>>22|A<<10),a=A&T|B&(A^T),s=j+((P>>>6|P<<26)^(P>>>11|P<<21)^(P>>>25|P<<7))+(Q^P&(L^Q))+e[b]+l[b],j=Q,Q=L,L=P,P=N+s>>>0,N=B,B=T,T=A,A=s+(v=x+a)>>>0;f.h0=f.h0+A|0,f.h1=f.h1+T|0,f.h2=f.h2+B|0,f.h3=f.h3+N|0,f.h4=f.h4+P|0,f.h5=f.h5+L|0,f.h6=f.h6+Q|0,f.h7=f.h7+j|0,V-=64}}},{"./forge":66,"./md":67,"./util":70}],70:[function(J,ae,ce){(function(q,h,F,m,e,o,f,l){(function(){var y=J("./forge"),s=J("./baseN"),v=ae.exports=y.util=y.util||{};function x(R){if(8!==R&&16!==R&&24!==R&&32!==R)throw new Error("Only 8, 16, 24, or 32 bits supported: "+R)}function a(R){if(this.data="",this.read=0,"string"==typeof R)this.data=R;else if(v.isArrayBuffer(R)||v.isArrayBufferView(R))if(void 0!==F&&R instanceof F)this.data=R.toString("binary");else{var Z=new Uint8Array(R);try{this.data=String.fromCharCode.apply(null,Z)}catch(le){for(var ee=0;ee<Z.length;++ee)this.putByte(Z[ee])}}else(R instanceof a||"object"==typeof R&&"string"==typeof R.data&&"number"==typeof R.read)&&(this.data=R.data,this.read=R.read);this._constructedStringLength=0}(function(){if(void 0!==q&&q.nextTick&&!q.browser)return v.nextTick=q.nextTick,void(v.setImmediate="function"==typeof l?l:v.nextTick);if("function"==typeof l)return v.setImmediate=function(){return l.apply(void 0,arguments)},void(v.nextTick=function(ie){return l(ie)});if(v.setImmediate=function(ie){setTimeout(ie,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var R="forge.setImmediate",Z=[];v.setImmediate=function(ie){Z.push(ie),1===Z.length&&window.postMessage(R,"*")},window.addEventListener("message",function(ie){if(ie.source===window&&ie.data===R){ie.stopPropagation();var pe=Z.slice();Z.length=0,pe.forEach(function(we){we()})}},!0)}if("undefined"!=typeof MutationObserver){var ee=Date.now(),le=!0,te=document.createElement("div");Z=[],new MutationObserver(function(){var ie=Z.slice();Z.length=0,ie.forEach(function(pe){pe()})}).observe(te,{attributes:!0});var oe=v.setImmediate;v.setImmediate=function(ie){Date.now()-ee>15?(ee=Date.now(),oe(ie)):(Z.push(ie),1===Z.length&&te.setAttribute("a",le=!le))}}v.nextTick=v.setImmediate})(),v.isNodejs=void 0!==q&&q.versions&&q.versions.node,v.globalScope=v.isNodejs?h:"undefined"==typeof self?window:self,v.isArray=Array.isArray||function(R){return"[object Array]"===Object.prototype.toString.call(R)},v.isArrayBuffer=function(R){return"undefined"!=typeof ArrayBuffer&&R instanceof ArrayBuffer},v.isArrayBufferView=function(R){return R&&v.isArrayBuffer(R.buffer)&&void 0!==R.byteLength},v.ByteBuffer=a,v.ByteStringBuffer=a,v.ByteStringBuffer.prototype._optimizeConstructedString=function(R){this._constructedStringLength+=R,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},v.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},v.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},v.ByteStringBuffer.prototype.putByte=function(R){return this.putBytes(String.fromCharCode(R))},v.ByteStringBuffer.prototype.fillWithByte=function(R,Z){R=String.fromCharCode(R);for(var ee=this.data;Z>0;)1&Z&&(ee+=R),(Z>>>=1)>0&&(R+=R);return this.data=ee,this._optimizeConstructedString(Z),this},v.ByteStringBuffer.prototype.putBytes=function(R){return this.data+=R,this._optimizeConstructedString(R.length),this},v.ByteStringBuffer.prototype.putString=function(R){return this.putBytes(v.encodeUtf8(R))},v.ByteStringBuffer.prototype.putInt16=function(R){return this.putBytes(String.fromCharCode(R>>8&255)+String.fromCharCode(255&R))},v.ByteStringBuffer.prototype.putInt24=function(R){return this.putBytes(String.fromCharCode(R>>16&255)+String.fromCharCode(R>>8&255)+String.fromCharCode(255&R))},v.ByteStringBuffer.prototype.putInt32=function(R){return this.putBytes(String.fromCharCode(R>>24&255)+String.fromCharCode(R>>16&255)+String.fromCharCode(R>>8&255)+String.fromCharCode(255&R))},v.ByteStringBuffer.prototype.putInt16Le=function(R){return this.putBytes(String.fromCharCode(255&R)+String.fromCharCode(R>>8&255))},v.ByteStringBuffer.prototype.putInt24Le=function(R){return this.putBytes(String.fromCharCode(255&R)+String.fromCharCode(R>>8&255)+String.fromCharCode(R>>16&255))},v.ByteStringBuffer.prototype.putInt32Le=function(R){return this.putBytes(String.fromCharCode(255&R)+String.fromCharCode(R>>8&255)+String.fromCharCode(R>>16&255)+String.fromCharCode(R>>24&255))},v.ByteStringBuffer.prototype.putInt=function(R,Z){x(Z);var ee="";do{Z-=8,ee+=String.fromCharCode(R>>Z&255)}while(Z>0);return this.putBytes(ee)},v.ByteStringBuffer.prototype.putSignedInt=function(R,Z){return R<0&&(R+=2<<Z-1),this.putInt(R,Z)},v.ByteStringBuffer.prototype.putBuffer=function(R){return this.putBytes(R.getBytes())},v.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},v.ByteStringBuffer.prototype.getInt16=function(){var R=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,R},v.ByteStringBuffer.prototype.getInt24=function(){var R=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,R},v.ByteStringBuffer.prototype.getInt32=function(){var R=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,R},v.ByteStringBuffer.prototype.getInt16Le=function(){var R=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,R},v.ByteStringBuffer.prototype.getInt24Le=function(){var R=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,R},v.ByteStringBuffer.prototype.getInt32Le=function(){var R=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,R},v.ByteStringBuffer.prototype.getInt=function(R){x(R);var Z=0;do{Z=(Z<<8)+this.data.charCodeAt(this.read++),R-=8}while(R>0);return Z},v.ByteStringBuffer.prototype.getSignedInt=function(R){var Z=this.getInt(R),ee=2<<R-2;return Z>=ee&&(Z-=ee<<1),Z},v.ByteStringBuffer.prototype.getBytes=function(R){var Z;return R?(R=Math.min(this.length(),R),Z=this.data.slice(this.read,this.read+R),this.read+=R):0===R?Z="":(Z=0===this.read?this.data:this.data.slice(this.read),this.clear()),Z},v.ByteStringBuffer.prototype.bytes=function(R){return void 0===R?this.data.slice(this.read):this.data.slice(this.read,this.read+R)},v.ByteStringBuffer.prototype.at=function(R){return this.data.charCodeAt(this.read+R)},v.ByteStringBuffer.prototype.setAt=function(R,Z){return this.data=this.data.substr(0,this.read+R)+String.fromCharCode(Z)+this.data.substr(this.read+R+1),this},v.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},v.ByteStringBuffer.prototype.copy=function(){var R=v.createBuffer(this.data);return R.read=this.read,R},v.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},v.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},v.ByteStringBuffer.prototype.truncate=function(R){var Z=Math.max(0,this.length()-R);return this.data=this.data.substr(this.read,Z),this.read=0,this},v.ByteStringBuffer.prototype.toHex=function(){for(var R="",Z=this.read;Z<this.data.length;++Z){var ee=this.data.charCodeAt(Z);ee<16&&(R+="0"),R+=ee.toString(16)}return R},v.ByteStringBuffer.prototype.toString=function(){return v.decodeUtf8(this.bytes())},v.DataBuffer=function(R,Z){Z=Z||{},this.read=Z.readOffset||0,this.growSize=Z.growSize||1024;var ee=v.isArrayBuffer(R),le=v.isArrayBufferView(R);if(ee||le)return this.data=ee?new DataView(R):new DataView(R.buffer,R.byteOffset,R.byteLength),void(this.write="writeOffset"in Z?Z.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=R&&this.putBytes(R),"writeOffset"in Z&&(this.write=Z.writeOffset)},v.DataBuffer.prototype.length=function(){return this.write-this.read},v.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},v.DataBuffer.prototype.accommodate=function(R,Z){if(this.length()>=R)return this;Z=Math.max(Z||this.growSize,R);var ee=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),le=new Uint8Array(this.length()+Z);return le.set(ee),this.data=new DataView(le.buffer),this},v.DataBuffer.prototype.putByte=function(R){return this.accommodate(1),this.data.setUint8(this.write++,R),this},v.DataBuffer.prototype.fillWithByte=function(R,Z){this.accommodate(Z);for(var ee=0;ee<Z;++ee)this.data.setUint8(R);return this},v.DataBuffer.prototype.putBytes=function(R,Z){if(v.isArrayBufferView(R)){var ee=(le=new Uint8Array(R.buffer,R.byteOffset,R.byteLength)).byteLength-le.byteOffset;return this.accommodate(ee),new Uint8Array(this.data.buffer,this.write).set(le),this.write+=ee,this}if(v.isArrayBuffer(R)){var le=new Uint8Array(R);return this.accommodate(le.byteLength),new Uint8Array(this.data.buffer).set(le,this.write),this.write+=le.byteLength,this}if(R instanceof v.DataBuffer||"object"==typeof R&&"number"==typeof R.read&&"number"==typeof R.write&&v.isArrayBufferView(R.data))return le=new Uint8Array(R.data.byteLength,R.read,R.length()),this.accommodate(le.byteLength),new Uint8Array(R.data.byteLength,this.write).set(le),this.write+=le.byteLength,this;if(R instanceof v.ByteStringBuffer&&(R=R.data,Z="binary"),Z=Z||"binary","string"==typeof R){var te;if("hex"===Z)return this.accommodate(Math.ceil(R.length/2)),te=new Uint8Array(this.data.buffer,this.write),this.write+=v.binary.hex.decode(R,te,this.write),this;if("base64"===Z)return this.accommodate(3*Math.ceil(R.length/4)),te=new Uint8Array(this.data.buffer,this.write),this.write+=v.binary.base64.decode(R,te,this.write),this;if("utf8"===Z&&(R=v.encodeUtf8(R),Z="binary"),"binary"===Z||"raw"===Z)return this.accommodate(R.length),te=new Uint8Array(this.data.buffer,this.write),this.write+=v.binary.raw.decode(te),this;if("utf16"===Z)return this.accommodate(2*R.length),te=new Uint16Array(this.data.buffer,this.write),this.write+=v.text.utf16.encode(te),this;throw new Error("Invalid encoding: "+Z)}throw Error("Invalid parameter: "+R)},v.DataBuffer.prototype.putBuffer=function(R){return this.putBytes(R),R.clear(),this},v.DataBuffer.prototype.putString=function(R){return this.putBytes(R,"utf16")},v.DataBuffer.prototype.putInt16=function(R){return this.accommodate(2),this.data.setInt16(this.write,R),this.write+=2,this},v.DataBuffer.prototype.putInt24=function(R){return this.accommodate(3),this.data.setInt16(this.write,R>>8&65535),this.data.setInt8(this.write,R>>16&255),this.write+=3,this},v.DataBuffer.prototype.putInt32=function(R){return this.accommodate(4),this.data.setInt32(this.write,R),this.write+=4,this},v.DataBuffer.prototype.putInt16Le=function(R){return this.accommodate(2),this.data.setInt16(this.write,R,!0),this.write+=2,this},v.DataBuffer.prototype.putInt24Le=function(R){return this.accommodate(3),this.data.setInt8(this.write,R>>16&255),this.data.setInt16(this.write,R>>8&65535,!0),this.write+=3,this},v.DataBuffer.prototype.putInt32Le=function(R){return this.accommodate(4),this.data.setInt32(this.write,R,!0),this.write+=4,this},v.DataBuffer.prototype.putInt=function(R,Z){x(Z),this.accommodate(Z/8);do{Z-=8,this.data.setInt8(this.write++,R>>Z&255)}while(Z>0);return this},v.DataBuffer.prototype.putSignedInt=function(R,Z){return x(Z),this.accommodate(Z/8),R<0&&(R+=2<<Z-1),this.putInt(R,Z)},v.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},v.DataBuffer.prototype.getInt16=function(){var R=this.data.getInt16(this.read);return this.read+=2,R},v.DataBuffer.prototype.getInt24=function(){var R=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,R},v.DataBuffer.prototype.getInt32=function(){var R=this.data.getInt32(this.read);return this.read+=4,R},v.DataBuffer.prototype.getInt16Le=function(){var R=this.data.getInt16(this.read,!0);return this.read+=2,R},v.DataBuffer.prototype.getInt24Le=function(){var R=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,R},v.DataBuffer.prototype.getInt32Le=function(){var R=this.data.getInt32(this.read,!0);return this.read+=4,R},v.DataBuffer.prototype.getInt=function(R){x(R);var Z=0;do{Z=(Z<<8)+this.data.getInt8(this.read++),R-=8}while(R>0);return Z},v.DataBuffer.prototype.getSignedInt=function(R){var Z=this.getInt(R),ee=2<<R-2;return Z>=ee&&(Z-=ee<<1),Z},v.DataBuffer.prototype.getBytes=function(R){var Z;return R?(R=Math.min(this.length(),R),Z=this.data.slice(this.read,this.read+R),this.read+=R):0===R?Z="":(Z=0===this.read?this.data:this.data.slice(this.read),this.clear()),Z},v.DataBuffer.prototype.bytes=function(R){return void 0===R?this.data.slice(this.read):this.data.slice(this.read,this.read+R)},v.DataBuffer.prototype.at=function(R){return this.data.getUint8(this.read+R)},v.DataBuffer.prototype.setAt=function(R,Z){return this.data.setUint8(R,Z),this},v.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},v.DataBuffer.prototype.copy=function(){return new v.DataBuffer(this)},v.DataBuffer.prototype.compact=function(){if(this.read>0){var R=new Uint8Array(this.data.buffer,this.read),Z=new Uint8Array(R.byteLength);Z.set(R),this.data=new DataView(Z),this.write-=this.read,this.read=0}return this},v.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},v.DataBuffer.prototype.truncate=function(R){return this.write=Math.max(0,this.length()-R),this.read=Math.min(this.read,this.write),this},v.DataBuffer.prototype.toHex=function(){for(var R="",Z=this.read;Z<this.data.byteLength;++Z){var ee=this.data.getUint8(Z);ee<16&&(R+="0"),R+=ee.toString(16)}return R},v.DataBuffer.prototype.toString=function(R){var Z=new Uint8Array(this.data,this.read,this.length());if("binary"===(R=R||"utf8")||"raw"===R)return v.binary.raw.encode(Z);if("hex"===R)return v.binary.hex.encode(Z);if("base64"===R)return v.binary.base64.encode(Z);if("utf8"===R)return v.text.utf8.decode(Z);if("utf16"===R)return v.text.utf16.decode(Z);throw new Error("Invalid encoding: "+R)},v.createBuffer=function(R,Z){return Z=Z||"raw",void 0!==R&&"utf8"===Z&&(R=v.encodeUtf8(R)),new v.ByteBuffer(R)},v.fillString=function(R,Z){for(var ee="";Z>0;)1&Z&&(ee+=R),(Z>>>=1)>0&&(R+=R);return ee},v.xorBytes=function(R,Z,ee){for(var le="",te="",oe="",ie=0,pe=0;ee>0;--ee,++ie)te=R.charCodeAt(ie)^Z.charCodeAt(ie),pe>=10&&(le+=oe,oe="",pe=0),oe+=String.fromCharCode(te),++pe;return le+oe},v.hexToBytes=function(R){var Z="",ee=0;for(!0&R.length&&(ee=1,Z+=String.fromCharCode(parseInt(R[0],16)));ee<R.length;ee+=2)Z+=String.fromCharCode(parseInt(R.substr(ee,2),16));return Z},v.bytesToHex=function(R){return v.createBuffer(R).toHex()},v.int32ToBytes=function(R){return String.fromCharCode(R>>24&255)+String.fromCharCode(R>>16&255)+String.fromCharCode(R>>8&255)+String.fromCharCode(255&R)};var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",A=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],T="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";v.encode64=function(R,Z){for(var ee,le,te,oe="",ie="",pe=0;pe<R.length;)ee=R.charCodeAt(pe++),le=R.charCodeAt(pe++),te=R.charCodeAt(pe++),oe+=b.charAt(ee>>2),oe+=b.charAt((3&ee)<<4|le>>4),isNaN(le)?oe+="==":(oe+=b.charAt((15&le)<<2|te>>6),oe+=isNaN(te)?"=":b.charAt(63&te)),Z&&oe.length>Z&&(ie+=oe.substr(0,Z)+"\r\n",oe=oe.substr(Z));return ie+oe},v.decode64=function(R){R=R.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var Z,ee,le,te,oe="",ie=0;ie<R.length;)Z=A[R.charCodeAt(ie++)-43],ee=A[R.charCodeAt(ie++)-43],le=A[R.charCodeAt(ie++)-43],te=A[R.charCodeAt(ie++)-43],oe+=String.fromCharCode(Z<<2|ee>>4),64!==le&&(oe+=String.fromCharCode((15&ee)<<4|le>>2),64!==te&&(oe+=String.fromCharCode((3&le)<<6|te)));return oe},v.encodeUtf8=function(R){return unescape(encodeURIComponent(R))},v.decodeUtf8=function(R){return decodeURIComponent(escape(R))},v.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:s.encode,decode:s.decode}},v.binary.raw.encode=function(R){return String.fromCharCode.apply(null,R)},v.binary.raw.decode=function(R,Z,ee){var le=Z;le||(le=new Uint8Array(R.length));for(var te=ee=ee||0,oe=0;oe<R.length;++oe)le[te++]=R.charCodeAt(oe);return Z?te-ee:le},v.binary.hex.encode=v.bytesToHex,v.binary.hex.decode=function(R,Z,ee){var le=Z;le||(le=new Uint8Array(Math.ceil(R.length/2)));var te=0,oe=ee=ee||0;for(1&R.length&&(te=1,le[oe++]=parseInt(R[0],16));te<R.length;te+=2)le[oe++]=parseInt(R.substr(te,2),16);return Z?oe-ee:le},v.binary.base64.encode=function(R,Z){for(var ee,le,te,oe="",ie="",pe=0;pe<R.byteLength;)ee=R[pe++],le=R[pe++],te=R[pe++],oe+=b.charAt(ee>>2),oe+=b.charAt((3&ee)<<4|le>>4),isNaN(le)?oe+="==":(oe+=b.charAt((15&le)<<2|te>>6),oe+=isNaN(te)?"=":b.charAt(63&te)),Z&&oe.length>Z&&(ie+=oe.substr(0,Z)+"\r\n",oe=oe.substr(Z));return ie+oe},v.binary.base64.decode=function(R,Z,ee){var le,te,oe,ie,pe=Z;pe||(pe=new Uint8Array(3*Math.ceil(R.length/4))),R=R.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var we=0,Te=ee=ee||0;we<R.length;)le=A[R.charCodeAt(we++)-43],te=A[R.charCodeAt(we++)-43],oe=A[R.charCodeAt(we++)-43],ie=A[R.charCodeAt(we++)-43],pe[Te++]=le<<2|te>>4,64!==oe&&(pe[Te++]=(15&te)<<4|oe>>2,64!==ie&&(pe[Te++]=(3&oe)<<6|ie));return Z?Te-ee:pe.subarray(0,Te)},v.binary.base58.encode=function(R,Z){return v.binary.baseN.encode(R,T,Z)},v.binary.base58.decode=function(R,Z){return v.binary.baseN.decode(R,T,Z)},v.text={utf8:{},utf16:{}},v.text.utf8.encode=function(R,Z,ee){R=v.encodeUtf8(R);var le=Z;le||(le=new Uint8Array(R.length));for(var te=ee=ee||0,oe=0;oe<R.length;++oe)le[te++]=R.charCodeAt(oe);return Z?te-ee:le},v.text.utf8.decode=function(R){return v.decodeUtf8(String.fromCharCode.apply(null,R))},v.text.utf16.encode=function(R,Z,ee){var le=Z;le||(le=new Uint8Array(2*R.length));for(var te=new Uint16Array(le.buffer),oe=ee=ee||0,ie=ee,pe=0;pe<R.length;++pe)te[ie++]=R.charCodeAt(pe),oe+=2;return Z?oe-ee:le},v.text.utf16.decode=function(R){return String.fromCharCode.apply(null,new Uint16Array(R.buffer))},v.deflate=function(R,Z,ee){if(Z=v.decode64(R.deflate(v.encode64(Z)).rval),ee){var le=2;32&Z.charCodeAt(1)&&(le=6),Z=Z.substring(le,Z.length-4)}return Z},v.inflate=function(R,Z,ee){var le=R.inflate(v.encode64(Z)).rval;return null===le?null:v.decode64(le)};var B=function(R,Z,ee){if(!R)throw new Error("WebStorage not available.");var le;if(null===ee?le=R.removeItem(Z):(ee=v.encode64(JSON.stringify(ee)),le=R.setItem(Z,ee)),void 0!==le&&!0!==le.rval){var te=new Error(le.error.message);throw te.id=le.error.id,te.name=le.error.name,te}},N=function(R,Z){if(!R)throw new Error("WebStorage not available.");var ee=R.getItem(Z);if(R.init)if(null===ee.rval){if(ee.error){var le=new Error(ee.error.message);throw le.id=ee.error.id,le.name=ee.error.name,le}ee=null}else ee=ee.rval;return null!==ee&&(ee=JSON.parse(v.decode64(ee))),ee},P=function(R,Z,ee,le){var te=N(R,Z);null===te&&(te={}),te[ee]=le,B(R,Z,te)},L=function(R,Z,ee){var le=N(R,Z);return null!==le&&(le=ee in le?le[ee]:null),le},Q=function(R,Z,ee){var le=N(R,Z);if(null!==le&&ee in le){delete le[ee];var te=!0;for(var oe in le){te=!1;break}te&&(le=null),B(R,Z,le)}},j=function(R,Z){B(R,Z,null)},V=function(R,Z,ee){var le,te=null;void 0===ee&&(ee=["web","flash"]);var oe=!1,ie=null;for(var pe in ee){le=ee[pe];try{if("flash"===le||"both"===le){if(null===Z[0])throw new Error("Flash local storage not available.");te=R.apply(this,Z),oe="flash"===le}"web"!==le&&"both"!==le||(Z[0]=localStorage,te=R.apply(this,Z),oe=!0)}catch(we){ie=we}if(oe)break}if(!oe)throw ie;return te};v.setItem=function(R,Z,ee,le,te){V(P,arguments,te)},v.getItem=function(R,Z,ee,le){return V(L,arguments,le)},v.removeItem=function(R,Z,ee,le){V(Q,arguments,le)},v.clearItems=function(R,Z,ee){V(j,arguments,ee)},v.parseUrl=function(R){var Z=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;Z.lastIndex=0;var ee=Z.exec(R),le=null===ee?null:{full:R,scheme:ee[1],host:ee[2],port:ee[3],path:ee[4]};return le&&(le.fullHost=le.host,le.port?(80!==le.port&&"http"===le.scheme||443!==le.port&&"https"===le.scheme)&&(le.fullHost+=":"+le.port):"http"===le.scheme?le.port=80:"https"===le.scheme&&(le.port=443),le.full=le.scheme+"://"+le.fullHost),le};var W=null;v.getQueryVariables=function(R){var Z,ee=function(le){for(var te={},oe=le.split("&"),ie=0;ie<oe.length;ie++){var pe,we,Te=oe[ie].indexOf("=");Te>0?(pe=oe[ie].substring(0,Te),we=oe[ie].substring(Te+1)):(pe=oe[ie],we=null),pe in te||(te[pe]=[]),pe in Object.prototype||null===we||te[pe].push(unescape(we))}return te};return void 0===R?(null===W&&(W="undefined"!=typeof window&&window.location&&window.location.search?ee(window.location.search.substring(1)):{}),Z=W):Z=ee(R),Z},v.parseFragment=function(R){var Z=R,ee="",le=R.indexOf("?");le>0&&(Z=R.substring(0,le),ee=R.substring(le+1));var te=Z.split("/");return te.length>0&&""===te[0]&&te.shift(),{pathString:Z,queryString:ee,path:te,query:""===ee?{}:v.getQueryVariables(ee)}},v.makeRequest=function(R){var Z=v.parseFragment(R),ee={path:Z.pathString,query:Z.queryString,getPath:function(le){return void 0===le?Z.path:Z.path[le]},getQuery:function(le,te){var oe;return void 0===le?oe=Z.query:(oe=Z.query[le])&&void 0!==te&&(oe=oe[te]),oe},getQueryLast:function(le,te){var oe=ee.getQuery(le);return oe?oe[oe.length-1]:te}};return ee},v.makeLink=function(R,Z,ee){R=jQuery.isArray(R)?R.join("/"):R;var le=jQuery.param(Z||{});return ee=ee||"",R+(le.length>0?"?"+le:"")+(ee.length>0?"#"+ee:"")},v.isEmpty=function(R){for(var Z in R)if(R.hasOwnProperty(Z))return!1;return!0},v.format=function(R){for(var Z,ee,le=/%./g,te=0,oe=[],ie=0;Z=le.exec(R);){(ee=R.substring(ie,le.lastIndex-2)).length>0&&oe.push(ee),ie=le.lastIndex;var pe=Z[0][1];switch(pe){case"s":case"o":te<arguments.length?oe.push(arguments[1+te++]):oe.push("<?>");break;case"%":oe.push("%");break;default:oe.push("<%"+pe+"?>")}}return oe.push(R.substring(ie)),oe.join("")},v.formatNumber=function(R,Z,ee,le){var te=R,oe=isNaN(Z=Math.abs(Z))?2:Z,ie=void 0===ee?",":ee,pe=void 0===le?".":le,we=te<0?"-":"",Te=parseInt(te=Math.abs(+te||0).toFixed(oe),10)+"",Fe=Te.length>3?Te.length%3:0;return we+(Fe?Te.substr(0,Fe)+pe:"")+Te.substr(Fe).replace(/(\d{3})(?=\d)/g,"$1"+pe)+(oe?ie+Math.abs(te-Te).toFixed(oe).slice(2):"")},v.formatSize=function(R){return R>=1073741824?v.formatNumber(R/1073741824,2,".","")+" GiB":R>=1048576?v.formatNumber(R/1048576,2,".","")+" MiB":R>=1024?v.formatNumber(R/1024,0)+" KiB":v.formatNumber(R,0)+" bytes"},v.bytesFromIP=function(R){return-1!==R.indexOf(".")?v.bytesFromIPv4(R):-1!==R.indexOf(":")?v.bytesFromIPv6(R):null},v.bytesFromIPv4=function(R){if(4!==(R=R.split(".")).length)return null;for(var Z=v.createBuffer(),ee=0;ee<R.length;++ee){var le=parseInt(R[ee],10);if(isNaN(le))return null;Z.putByte(le)}return Z.getBytes()},v.bytesFromIPv6=function(R){for(var Z=0,ee=2*(8-(R=R.split(":").filter(function(ie){return 0===ie.length&&++Z,!0})).length+Z),le=v.createBuffer(),te=0;te<8;++te)if(R[te]&&0!==R[te].length){var oe=v.hexToBytes(R[te]);oe.length<2&&le.putByte(0),le.putBytes(oe)}else le.fillWithByte(0,ee),ee=0;return le.getBytes()},v.bytesToIP=function(R){return 4===R.length?v.bytesToIPv4(R):16===R.length?v.bytesToIPv6(R):null},v.bytesToIPv4=function(R){if(4!==R.length)return null;for(var Z=[],ee=0;ee<R.length;++ee)Z.push(R.charCodeAt(ee));return Z.join(".")},v.bytesToIPv6=function(R){if(16!==R.length)return null;for(var Z=[],ee=[],le=0,te=0;te<R.length;te+=2){for(var oe=v.bytesToHex(R[te]+R[te+1]);"0"===oe[0]&&"0"!==oe;)oe=oe.substr(1);if("0"===oe){var ie=ee[ee.length-1],pe=Z.length;ie&&pe===ie.end+1?(ie.end=pe,ie.end-ie.start>ee[le].end-ee[le].start&&(le=ee.length-1)):ee.push({start:pe,end:pe})}Z.push(oe)}if(ee.length>0){var we=ee[le];we.end-we.start>0&&(Z.splice(we.start,we.end-we.start+1,""),0===we.start&&Z.unshift(""),7===we.end&&Z.push(""))}return Z.join(":")},v.estimateCores=function(R,Z){if("function"==typeof R&&(Z=R,R={}),R=R||{},"cores"in v&&!R.update)return Z(null,v.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return v.cores=navigator.hardwareConcurrency,Z(null,v.cores);if("undefined"==typeof Worker)return v.cores=1,Z(null,v.cores);if("undefined"==typeof Blob)return v.cores=2,Z(null,v.cores);var ee=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(le){for(var te=Date.now(),oe=te+4;Date.now()<oe;);self.postMessage({st:te,et:oe})})}.toString(),")()"],{type:"application/javascript"}));!function le(te,oe,ie){if(0===oe){var pe=Math.floor(te.reduce(function(we,Te){return we+Te},0)/te.length);return v.cores=Math.max(1,pe),URL.revokeObjectURL(ee),Z(null,v.cores)}!function(we,Te){for(var Fe=[],ke=[],de=0;de<we;++de){var Le=new Worker(ee);Le.addEventListener("message",function(Me){if(ke.push(Me.data),ke.length===we){for(var Ze=0;Ze<we;++Ze)Fe[Ze].terminate();Te(null,ke)}}),Fe.push(Le)}for(de=0;de<we;++de)Fe[de].postMessage(de)}(ie,function(we,Te){te.push(function(Fe,ke){for(var de=[],Le=0;Le<Fe;++Le)for(var Me=ke[Le],Ze=de[Le]=[],H=0;H<Fe;++H)if(Le!==H){var z=ke[H];(Me.st>z.st&&Me.st<z.et||z.st>Me.st&&z.st<Me.et)&&Ze.push(H)}return de.reduce(function(ne,ge){return Math.max(ne,ge.length)},0)}(ie,Te)),le(te,oe-1,ie)})}([],5,16)}}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},J("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],J("timers").setImmediate)},{"./baseN":65,"./forge":66,_process:71,buffer:4,timers:123}],71:[function(J,ae,ce){var q,h,F=ae.exports={};function m(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function o(A){if(q===setTimeout)return setTimeout(A,0);if((q===m||!q)&&setTimeout)return q=setTimeout,setTimeout(A,0);try{return q(A,0)}catch(T){try{return q.call(null,A,0)}catch(B){return q.call(this,A,0)}}}!function(){try{q="function"==typeof setTimeout?setTimeout:m}catch(A){q=m}try{h="function"==typeof clearTimeout?clearTimeout:e}catch(A){h=e}}();var f,l=[],y=!1,s=-1;function v(){y&&f&&(y=!1,f.length?l=f.concat(l):s=-1,l.length&&x())}function x(){if(!y){var A=o(v);y=!0;for(var T=l.length;T;){for(f=l,l=[];++s<T;)f&&f[s].run();s=-1,T=l.length}f=null,y=!1,function(B){if(h===clearTimeout)return clearTimeout(B);if((h===e||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(B);try{h(B)}catch(N){try{return h.call(null,B)}catch(P){return h.call(this,B)}}}(A)}}function a(A,T){this.fun=A,this.array=T}function b(){}F.nextTick=function(A){var T=new Array(arguments.length-1);if(arguments.length>1)for(var B=1;B<arguments.length;B++)T[B-1]=arguments[B];l.push(new a(A,T)),1!==l.length||y||o(x)},a.prototype.run=function(){this.fun.apply(null,this.array)},F.title="browser",F.browser=!0,F.env={},F.argv=[],F.version="",F.versions={},F.on=b,F.addListener=b,F.once=b,F.off=b,F.removeListener=b,F.removeAllListeners=b,F.emit=b,F.prependListener=b,F.prependOnceListener=b,F.listeners=function(A){return[]},F.binding=function(A){throw new Error("process.binding is not supported")},F.cwd=function(){return"/"},F.chdir=function(A){throw new Error("process.chdir is not supported")},F.umask=function(){return 0}},{}],72:[function(J,ae,ce){"use strict";function q(F,m){return Object.prototype.hasOwnProperty.call(F,m)}ae.exports=function(F,m,e,o){m=m||"&",e=e||"=";var f={};if("string"!=typeof F||0===F.length)return f;var l=/\+/g;F=F.split(m);var y=1e3;o&&"number"==typeof o.maxKeys&&(y=o.maxKeys);var s=F.length;y>0&&s>y&&(s=y);for(var v=0;v<s;++v){var x,a,b,A,T=F[v].replace(l,"%20"),B=T.indexOf(e);B>=0?(x=T.substr(0,B),a=T.substr(B+1)):(x=T,a=""),b=decodeURIComponent(x),A=decodeURIComponent(a),q(f,b)?h(f[b])?f[b].push(A):f[b]=[f[b],A]:f[b]=A}return f};var h=Array.isArray||function(F){return"[object Array]"===Object.prototype.toString.call(F)}},{}],73:[function(J,ae,ce){"use strict";var q=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};ae.exports=function(e,o,f,l){return o=o||"&",f=f||"=",null===e&&(e=void 0),"object"==typeof e?F(m(e),function(y){var s=encodeURIComponent(q(y))+f;return h(e[y])?F(e[y],function(v){return s+encodeURIComponent(q(v))}).join(o):s+encodeURIComponent(q(e[y]))}).join(o):l?encodeURIComponent(q(l))+f+encodeURIComponent(q(e)):""};var h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function F(e,o){if(e.map)return e.map(o);for(var f=[],l=0;l<e.length;l++)f.push(o(e[l],l));return f}var m=Object.keys||function(e){var o=[];for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&o.push(f);return o}},{}],74:[function(J,ae,ce){"use strict";ce.decode=ce.parse=J("./decode"),ce.encode=ce.stringify=J("./encode")},{"./decode":72,"./encode":73}],75:[function(J,ae,ce){"use strict";const q=J("./util");ae.exports=class{constructor({maxCallStackDepth:h=500,maxTotalCallStackDepth:F=4294967295,timeSlice:m=10}={}){this.schedule={},this.schedule.MAX_DEPTH=h,this.schedule.MAX_TOTAL_DEPTH=F,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice=m}doWork(h,F){const m=this.schedule;if(m.totalDepth>=m.MAX_TOTAL_DEPTH)return F(new Error("Maximum total call stack depth exceeded; canonicalization aborting."));!function e(){if(m.depth===m.MAX_DEPTH)return m.depth=0,m.running=!1,q.nextTick(e);const o=Date.now();if(m.running||(m.start=Date.now(),m.deadline=m.start+m.timeSlice),o<m.deadline)return m.running=!0,m.depth++,m.totalDepth++,h((f,l)=>{m.depth--,m.totalDepth--,F(f,l)});m.depth=0,m.running=!1,q.setImmediate(e)}()}forEach(h,F,m){const e=this;let o,f,l=0;if(Array.isArray(h))f=h.length,o=()=>l!==f&&(o.value=h[l++],o.key=l,!0);else{const y=Object.keys(h);f=y.length,o=()=>l!==f&&(o.key=y[l++],o.value=h[o.key],!0)}!function y(s){return s?m(s):o()?e.doWork(()=>F(o.value,o.key,y)):void m()}()}waterfall(h,F){const m=this;m.forEach(h,(e,o,f)=>m.doWork(e,f),F)}whilst(h,F,m){const e=this;!function o(f){return f?m(f):h()?void e.doWork(F,o):m()}()}}},{"./util":85}],76:[function(J,ae,ce){"use strict";const q=J("./util");ae.exports=class mp{constructor(F){this.prefix=F,this.counter=0,this.existing={}}clone(){const F=new mp(this.prefix);return F.counter=this.counter,F.existing=q.clone(this.existing),F}getId(F){if(F&&F in this.existing)return this.existing[F];const m=this.prefix+this.counter;return this.counter+=1,F&&(this.existing[F]=m),m}hasId(F){return F in this.existing}}},{"./util":85}],77:[function(J,ae,ce){"use strict";const q=J("node-forge/lib/forge");J("node-forge/lib/md"),J("node-forge/lib/sha1"),J("node-forge/lib/sha256"),ae.exports=class{constructor(h){this.md=q.md[h].create()}update(h){this.md.update(h,"utf8")}digest(){return this.md.digest().toHex()}}},{"node-forge/lib/forge":66,"node-forge/lib/md":67,"node-forge/lib/sha1":68,"node-forge/lib/sha256":69}],78:[function(J,ae,ce){"use strict";const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",h="http://www.w3.org/2001/XMLSchema#string",F={};function m(f,l){for(const y in f)if(f[y].termType!==l[y].termType||f[y].value!==l[y].value)return!1;return"Literal"!==f.object.termType||f.object.datatype.termType===l.object.datatype.termType&&f.object.datatype.value===l.object.datatype.value&&f.object.language===l.object.language}F.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,F.empty=new RegExp("^[ \\t]*$"),F.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]*\\.))[ \\t]*$'),ae.exports=class Cc{static parse(l){const y=[],s={},v=l.split(F.eoln);let x=0;for(const a of v){if(x++,F.empty.test(a))continue;const b=a.match(F.quad);if(null===b)throw new Error("N-Quads parse error on line "+x+".");const A={};if(void 0!==b[1]?A.subject={termType:"NamedNode",value:b[1]}:A.subject={termType:"BlankNode",value:b[2]},A.predicate={termType:"NamedNode",value:b[3]},void 0!==b[4]?A.object={termType:"NamedNode",value:b[4]}:void 0!==b[5]?A.object={termType:"BlankNode",value:b[5]}:(A.object={termType:"Literal",value:void 0,datatype:{termType:"NamedNode"}},void 0!==b[7]?A.object.datatype.value=b[7]:void 0!==b[8]?(A.object.datatype.value=q,A.object.language=b[8]):A.object.datatype.value=h,A.object.value=b[6].replace(o,function(T,B,N,P){if(B)switch(B){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(N)return String.fromCharCode(parseInt(N,16));if(P)throw new Error("Unsupported U escape")})),void 0!==b[9]?A.graph={termType:"NamedNode",value:b[9]}:void 0!==b[10]?A.graph={termType:"BlankNode",value:b[10]}:A.graph={termType:"DefaultGraph",value:""},A.graph.value in s){let T=!0;const B=s[A.graph.value];for(const N of B)if(m(N,A)){T=!1;break}T&&(B.push(A),y.push(A))}else s[A.graph.value]=[A],y.push(A)}return y}static serialize(l){Array.isArray(l)||(l=Cc.legacyDatasetToQuads(l));const y=[];for(const s of l)y.push(Cc.serializeQuad(s));return y.sort().join("")}static serializeQuad(l){const y=l.subject,s=l.predicate,v=l.object,x=l.graph;let a="";return[y,s].forEach(b=>{"NamedNode"===b.termType?a+="<"+b.value+">":a+=b.value,a+=" "}),"NamedNode"===v.termType?a+="<"+v.value+">":"BlankNode"===v.termType?a+=v.value:(a+='"'+(v.value.replace(e,function(A){switch(A){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})+'"'),v.datatype.value===q?v.language&&(a+="@"+v.language):v.datatype.value!==h&&(a+="^^<"+v.datatype.value+">")),"NamedNode"===x.termType?a+=" <"+x.value+">":"BlankNode"===x.termType&&(a+=" "+x.value),a+=" .\n"}static legacyDatasetToQuads(l){const y=[],s={"blank node":"BlankNode",IRI:"NamedNode",literal:"Literal"};for(const v in l)l[v].forEach(x=>{const a={};for(const b in x){const A=x[b],T={termType:s[A.type],value:A.value};"Literal"===T.termType&&(T.datatype={termType:"NamedNode"},"datatype"in A&&(T.datatype.value=A.datatype),"language"in A?("datatype"in A||(T.datatype.value=q),T.language=A.language):"datatype"in A||(T.datatype.value=h)),a[b]=T}a.graph="@default"===v?{termType:"DefaultGraph",value:""}:{termType:v.startsWith("_:")?"BlankNode":"NamedNode",value:v},y.push(a)});return y}};const e=/["\\\n\r]/g,o=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],79:[function(J,ae,ce){"use strict";ae.exports=class{constructor(q){this.list=q.sort(),this.done=!1,this.left={};for(let h=0;h<q.length;++h)this.left[q[h]]=!0}hasNext(){return!this.done}next(){const q=this.list.slice();let h=null,F=0;const m=this.list.length;for(let e=0;e<m;++e){const o=this.list[e],f=this.left[o];(null===h||o>h)&&(f&&e>0&&o>this.list[e-1]||!f&&e<m-1&&o>this.list[e+1])&&(h=o,F=e)}if(null===h)this.done=!0;else{const e=this.left[h]?F-1:F+1;this.list[F]=this.list[e],this.list[e]=h;for(let o=0;o<m;++o)this.list[o]>h&&(this.left[this.list[o]]=!this.left[this.list[o]])}return q}}},{}],80:[function(J,ae,ce){"use strict";const q=J("./AsyncAlgorithm"),h=J("./IdentifierIssuer"),F=J("./MessageDigest"),m=J("./Permutator"),e=J("./NQuads"),o=J("./util"),f={subject:"s",object:"o",graph:"g"};ae.exports=class extends q{constructor(l){super(l=l||{}),this.name="URDNA2015",this.options=Object.assign({},l),this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new h("_:c14n"),this.hashAlgorithm="sha256",this.quads}main(l,y){const s=this;let v;s.schedule.start=Date.now(),s.quads=l;const x={};s.waterfall([a=>{s.forEach(l,(b,A,T)=>{s.forEachComponent(b,B=>{if("BlankNode"!==B.termType)return;const N=B.value;N in s.blankNodeInfo?s.blankNodeInfo[N].quads.push(b):(x[N]=!0,s.blankNodeInfo[N]={quads:[b]})}),T()},a)},a=>{let b=!0;s.whilst(()=>b,A=>{b=!1,s.hashToBlankNodes={},s.waterfall([T=>{s.forEach(x,(B,N,P)=>{s.hashFirstDegreeQuads(N,(L,Q)=>{if(L)return P(L);Q in s.hashToBlankNodes?s.hashToBlankNodes[Q].push(N):s.hashToBlankNodes[Q]=[N],P()})},T)},T=>{const B=Object.keys(s.hashToBlankNodes).sort();s.forEach(B,(N,P,L)=>{const Q=s.hashToBlankNodes[N];if(Q.length>1)return L();const j=Q[0];s.canonicalIssuer.getId(j),delete x[j],delete s.hashToBlankNodes[N],b=!0,L()},T)}],A)},a)},a=>{const b=Object.keys(s.hashToBlankNodes).sort();s.forEach(b,(A,T,B)=>{const N=[],P=s.hashToBlankNodes[A];s.waterfall([L=>{s.forEach(P,(Q,j,V)=>{if(s.canonicalIssuer.hasId(Q))return V();const W=new h("_:b");W.getId(Q),s.hashNDegreeQuads(Q,W,(R,Z)=>{if(R)return V(R);N.push(Z),V()})},L)},L=>{N.sort((Q,j)=>Q.hash<j.hash?-1:Q.hash>j.hash?1:0),s.forEach(N,(Q,j,V)=>{for(const W in Q.issuer.existing)s.canonicalIssuer.getId(W);V()},L)}],B)},a)},a=>{const b=[];s.waterfall([A=>{s.forEach(s.quads,(T,B,N)=>{s.forEachComponent(T,P=>{"BlankNode"!==P.termType||P.value.startsWith(s.canonicalIssuer.prefix)||(P.value=s.canonicalIssuer.getId(P.value))}),b.push(e.serializeQuad(T)),N()},A)},A=>(b.sort(),v=b.join(""),A())],a)}],a=>y(a,v))}hashFirstDegreeQuads(l,y){const s=this,v=s.blankNodeInfo[l];if("hash"in v)return y(null,v.hash);const x=[],a=v.quads;s.forEach(a,(b,A,T)=>{const B={predicate:b.predicate};s.forEachComponent(b,(N,P)=>{B[P]=s.modifyFirstDegreeComponent(l,N,P)}),x.push(e.serializeQuad(B)),T()},b=>{if(b)return y(b);x.sort();const A=new F(s.hashAlgorithm);for(let T=0;T<x.length;++T)A.update(x[T]);v.hash=A.digest(),y(null,v.hash)})}hashRelatedBlankNode(l,y,s,v,x){const a=this;let b;a.waterfall([A=>a.canonicalIssuer.hasId(l)?(b=a.canonicalIssuer.getId(l),A()):s.hasId(l)?(b=s.getId(l),A()):void a.hashFirstDegreeQuads(l,(T,B)=>{if(T)return A(T);b=B,A()})],A=>{if(A)return x(A);const T=new F(a.hashAlgorithm);return T.update(v),"g"!==v&&T.update(a.getRelatedPredicate(y)),T.update(b),x(null,T.digest())})}hashNDegreeQuads(l,y,s){const v=this;let x;const a=new F(v.hashAlgorithm);v.waterfall([b=>v.createHashToRelated(l,y,(A,T)=>{if(A)return b(A);x=T,b()}),b=>{const A=Object.keys(x).sort();v.forEach(A,(T,B,N)=>{a.update(T);let P,L="";const Q=new m(x[T]);v.whilst(()=>Q.hasNext(),j=>{const V=Q.next();let W=y.clone(),R="";const Z=[];v.waterfall([ee=>{v.forEach(V,(le,te,oe)=>{if(v.canonicalIssuer.hasId(le)?R+=v.canonicalIssuer.getId(le):(W.hasId(le)||Z.push(le),R+=W.getId(le)),0!==L.length&&R>L)return j();oe()},ee)},ee=>{v.forEach(Z,(le,te,oe)=>{v.hashNDegreeQuads(le,W,(ie,pe)=>ie?oe(ie):(R+=W.getId(le),R+="<"+pe.hash+">",W=pe.issuer,0!==L.length&&R>L?j():void oe()))},ee)},ee=>{(0===L.length||R<L)&&(L=R,P=W),ee()}],j)},j=>{if(j)return N(j);a.update(L),y=P,N()})},b)}],b=>{s(b,{hash:a.digest(),issuer:y})})}modifyFirstDegreeComponent(l,y){return"BlankNode"!==y.termType||((y=o.clone(y)).value=y.value===l?"_:a":"_:z"),y}getRelatedPredicate(l){return"<"+l.predicate.value+">"}createHashToRelated(l,y,s){const v=this,x={},a=v.blankNodeInfo[l].quads;v.forEach(a,(b,A,T)=>{v.forEach(b,(B,N,P)=>{if("predicate"===N||"BlankNode"!==B.termType||B.value===l)return P();const L=B.value,Q=f[N];v.hashRelatedBlankNode(L,b,y,Q,(j,V)=>{if(j)return P(j);V in x?x[V].push(L):x[V]=[L],P()})},T)},b=>s(b,x))}forEachComponent(l,y){for(const s in l)"predicate"!==s&&y(l[s],s,l)}}},{"./AsyncAlgorithm":75,"./IdentifierIssuer":76,"./MessageDigest":77,"./NQuads":78,"./Permutator":79,"./util":85}],81:[function(J,ae,ce){"use strict";const q=J("./IdentifierIssuer"),h=J("./MessageDigest"),F=J("./Permutator"),m=J("./NQuads"),e=J("./util"),o={subject:"s",object:"o",graph:"g"};ae.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new q("_:c14n"),this.hashAlgorithm="sha256",this.quads}main(f){const l=this;l.quads=f;const y={};for(const a of f)l.forEachComponent(a,b=>{if("BlankNode"!==b.termType)return;const A=b.value;A in l.blankNodeInfo?l.blankNodeInfo[A].quads.push(a):(y[A]=!0,l.blankNodeInfo[A]={quads:[a]})});let s=!0;for(;s;){s=!1,l.hashToBlankNodes={};for(const b in y){const A=l.hashFirstDegreeQuads(b);A in l.hashToBlankNodes?l.hashToBlankNodes[A].push(b):l.hashToBlankNodes[A]=[b]}const a=Object.keys(l.hashToBlankNodes).sort();for(let b=0;b<a.length;++b){const A=a[b],T=l.hashToBlankNodes[A];if(T.length>1)continue;const B=T[0];l.canonicalIssuer.getId(B),delete y[B],delete l.hashToBlankNodes[A],s=!0}}const v=Object.keys(l.hashToBlankNodes).sort();for(let a=0;a<v.length;++a){const b=[],A=v[a],T=l.hashToBlankNodes[A];for(let B=0;B<T.length;++B){const N=T[B];if(l.canonicalIssuer.hasId(N))continue;const P=new q("_:b");P.getId(N);const L=l.hashNDegreeQuads(N,P);b.push(L)}b.sort((B,N)=>B.hash<N.hash?-1:B.hash>N.hash?1:0);for(let B=0;B<b.length;++B){const N=b[B];for(const P in N.issuer.existing)l.canonicalIssuer.getId(P)}}const x=[];for(let a=0;a<l.quads.length;++a){const b=l.quads[a];l.forEachComponent(b,A=>{"BlankNode"!==A.termType||A.value.startsWith(l.canonicalIssuer.prefix)||(A.value=l.canonicalIssuer.getId(A.value))}),x.push(m.serializeQuad(b))}return x.sort(),x.join("")}hashFirstDegreeQuads(f){const l=this,y=l.blankNodeInfo[f];if("hash"in y)return y.hash;const s=[],v=y.quads;for(let a=0;a<v.length;++a){const b=v[a],A={predicate:b.predicate};l.forEachComponent(b,(T,B)=>{A[B]=l.modifyFirstDegreeComponent(f,T,B)}),s.push(m.serializeQuad(A))}s.sort();const x=new h(l.hashAlgorithm);for(let a=0;a<s.length;++a)x.update(s[a]);return y.hash=x.digest(),y.hash}hashRelatedBlankNode(f,l,y,s){const v=this;let x;x=v.canonicalIssuer.hasId(f)?v.canonicalIssuer.getId(f):y.hasId(f)?y.getId(f):v.hashFirstDegreeQuads(f);const a=new h(v.hashAlgorithm);return a.update(s),"g"!==s&&a.update(v.getRelatedPredicate(l)),a.update(x),a.digest()}hashNDegreeQuads(f,l){const y=this,s=new h(y.hashAlgorithm),v=y.createHashToRelated(f,l),x=Object.keys(v).sort();for(let a=0;a<x.length;++a){const b=x[a];s.update(b);let A,T="";const B=new F(v[b]);for(;B.hasNext();){const N=B.next();let P=l.clone(),L="";const Q=[];let j=!1;for(let V=0;V<N.length;++V){const W=N[V];if(y.canonicalIssuer.hasId(W)?L+=y.canonicalIssuer.getId(W):(P.hasId(W)||Q.push(W),L+=P.getId(W)),0!==T.length&&L>T){j=!0;break}}if(!j){for(let V=0;V<Q.length;++V){const W=Q[V],R=y.hashNDegreeQuads(W,P);if(L+=P.getId(W),L+="<"+R.hash+">",P=R.issuer,0!==T.length&&L>T){j=!0;break}}j||(0===T.length||L<T)&&(T=L,A=P)}}s.update(T),l=A}return{hash:s.digest(),issuer:l}}modifyFirstDegreeComponent(f,l){return"BlankNode"!==l.termType||((l=e.clone(l)).value=l.value===f?"_:a":"_:z"),l}getRelatedPredicate(f){return"<"+f.predicate.value+">"}createHashToRelated(f,l){const y=this,s={},v=y.blankNodeInfo[f].quads;for(let x=0;x<v.length;++x){const a=v[x];for(const b in a){const A=a[b];if("predicate"===b||"BlankNode"!==A.termType||A.value===f)continue;const T=A.value,B=o[b],N=y.hashRelatedBlankNode(T,a,l,B);N in s?s[N].push(T):s[N]=[T]}}return s}forEachComponent(f,l){for(const y in f)"predicate"!==y&&l(f[y],y,f)}}},{"./IdentifierIssuer":76,"./MessageDigest":77,"./NQuads":78,"./Permutator":79,"./util":85}],82:[function(J,ae,ce){"use strict";const q=J("./URDNA2015"),h=J("./util");ae.exports=class extends q{constructor(F){super(F),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(F,m,e){return"BlankNode"!==m.termType||((m=h.clone(m)).value="name"===e?"_:g":m.value===F?"_:a":"_:z"),m}getRelatedPredicate(F){return F.predicate.value}createHashToRelated(F,m,e){const o=this,f={},l=o.blankNodeInfo[F].quads;o.forEach(l,(y,s,v)=>{let x,a;if("BlankNode"===y.subject.termType&&y.subject.value!==F)a=y.subject.value,x="p";else{if("BlankNode"!==y.object.termType||y.object.value===F)return v();a=y.object.value,x="r"}o.hashRelatedBlankNode(a,y,m,x,(b,A)=>{if(b)return v(b);A in f?f[A].push(a):f[A]=[a],v()})},y=>e(y,f))}}},{"./URDNA2015":80,"./util":85}],83:[function(J,ae,ce){"use strict";const q=J("./URDNA2015Sync"),h=J("./util");ae.exports=class extends q{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(F,m,e){return"BlankNode"!==m.termType||((m=h.clone(m)).value="name"===e?"_:g":m.value===F?"_:a":"_:z"),m}getRelatedPredicate(F){return F.predicate.value}createHashToRelated(F,m){const e=this,o={},f=e.blankNodeInfo[F].quads;for(let l=0;l<f.length;++l){const y=f[l];let s,v;if("BlankNode"===y.subject.termType&&y.subject.value!==F)v=y.subject.value,s="p";else{if("BlankNode"!==y.object.termType||y.object.value===F)continue;v=y.object.value,s="r"}const x=e.hashRelatedBlankNode(v,y,m,s);x in o?o[x].push(v):o[x]=[v]}return o}}},{"./URDNA2015Sync":81,"./util":85}],84:[function(J,ae,ce){"use strict";const q=J("./util"),h=J("./URDNA2015"),F=J("./URGNA2012"),m=J("./URDNA2015Sync"),e=J("./URGNA2012Sync");let o;try{o=J("rdf-canonize-native")}catch(l){}const f={};ae.exports=f,f.NQuads=J("./NQuads"),f.IdentifierIssuer=J("./IdentifierIssuer"),f._rdfCanonizeNative=function(l){return l&&(o=l),o},f.canonize=q.callbackify(async function(l,y){let s;const v=new Promise((x,a)=>{s=(b,A)=>{if(b)return a(b);x(A)}});if(Array.isArray(l)||(l=f.NQuads.legacyDatasetToQuads(l)),y.useNative){if(!o)throw new Error("rdf-canonize-native not available");o.canonize(l,y,s)}else if("URDNA2015"===y.algorithm)new h(y).main(l,s);else{if("URGNA2012"!==y.algorithm)throw"algorithm"in y?new Error("Invalid RDF Dataset Canonicalization algorithm: "+y.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.");new F(y).main(l,s)}return v}),f.canonizeSync=function(l,y){if(Array.isArray(l)||(l=f.NQuads.legacyDatasetToQuads(l)),y.useNative){if(o)return o.canonizeSync(l,y);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===y.algorithm)return new m(y).main(l);if("URGNA2012"===y.algorithm)return new e(y).main(l);throw"algorithm"in y?new Error("Invalid RDF Dataset Canonicalization algorithm: "+y.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":76,"./NQuads":78,"./URDNA2015":80,"./URDNA2015Sync":81,"./URGNA2012":82,"./URGNA2012Sync":83,"./util":85,"rdf-canonize-native":4}],85:[function(J,ae,ce){(function(q,h){(function(){"use strict";const F={};ae.exports=F;const m="function"==typeof h&&h,e=m?f=>m(f):f=>setTimeout(f,0);function o(f,l,y){try{return f(l,y)}catch(s){q.nextTick(()=>{throw s})}}"object"==typeof q&&"function"==typeof q.nextTick?F.nextTick=q.nextTick:F.nextTick=e,F.setImmediate=m?e:F.nextTick,F.clone=function(f){if(f&&"object"==typeof f){let l;if(Array.isArray(f)){l=[];for(let y=0;y<f.length;++y)l[y]=F.clone(f[y])}else if(F.isObject(f)){l={};for(const y in f)l[y]=F.clone(f[y])}else l=f.toString();return l}return f},F.isObject=f=>"[object Object]"===Object.prototype.toString.call(f),F.isUndefined=f=>void 0===f,F.callbackify=f=>async function(...l){const y=l[l.length-1];let s;"function"==typeof y&&l.pop();try{s=await f.apply(null,l)}catch(v){if("function"==typeof y)return o(y,v);throw v}return"function"==typeof y?o(y,null,s):s}}).call(this)}).call(this,J("_process"),J("timers").setImmediate)},{_process:71,timers:123}],86:[function(J,ae,ce){var q=J("buffer"),h=q.Buffer;function F(e,o){for(var f in e)o[f]=e[f]}function m(e,o,f){return h(e,o,f)}h.from&&h.alloc&&h.allocUnsafe&&h.allocUnsafeSlow?ae.exports=q:(F(q,ce),ce.Buffer=m),m.prototype=Object.create(h.prototype),F(h,m),m.from=function(e,o,f){if("number"==typeof e)throw new TypeError("Argument must not be a number");return h(e,o,f)},m.alloc=function(e,o,f){if("number"!=typeof e)throw new TypeError("Argument must be a number");var l=h(e);return void 0!==o?"string"==typeof f?l.fill(o,f):l.fill(o):l.fill(0),l},m.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return h(e)},m.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return q.SlowBuffer(e)}},{buffer:9}],87:[function(J,ae,ce){ae.exports=h;var q=J("events").EventEmitter;function h(){q.call(this)}J("inherits")(h,q),h.Readable=J("readable-stream/lib/_stream_readable.js"),h.Writable=J("readable-stream/lib/_stream_writable.js"),h.Duplex=J("readable-stream/lib/_stream_duplex.js"),h.Transform=J("readable-stream/lib/_stream_transform.js"),h.PassThrough=J("readable-stream/lib/_stream_passthrough.js"),h.finished=J("readable-stream/lib/internal/streams/end-of-stream.js"),h.pipeline=J("readable-stream/lib/internal/streams/pipeline.js"),h.Stream=h,h.prototype.pipe=function(F,m){var e=this;function o(a){F.writable&&!1===F.write(a)&&e.pause&&e.pause()}function f(){e.readable&&e.resume&&e.resume()}e.on("data",o),F.on("drain",f),F._isStdio||m&&!1===m.end||(e.on("end",y),e.on("close",s));var l=!1;function y(){l||(l=!0,F.end())}function s(){l||(l=!0,"function"==typeof F.destroy&&F.destroy())}function v(a){if(x(),0===q.listenerCount(this,"error"))throw a}function x(){e.removeListener("data",o),F.removeListener("drain",f),e.removeListener("end",y),e.removeListener("close",s),e.removeListener("error",v),F.removeListener("error",v),e.removeListener("end",x),e.removeListener("close",x),F.removeListener("close",x)}return e.on("error",v),F.on("error",v),e.on("end",x),e.on("close",x),F.on("close",x),F.emit("pipe",e),F}},{events:15,inherits:26,"readable-stream/lib/_stream_duplex.js":89,"readable-stream/lib/_stream_passthrough.js":90,"readable-stream/lib/_stream_readable.js":91,"readable-stream/lib/_stream_transform.js":92,"readable-stream/lib/_stream_writable.js":93,"readable-stream/lib/internal/streams/end-of-stream.js":97,"readable-stream/lib/internal/streams/pipeline.js":99}],88:[function(J,ae,ce){"use strict";var q={};function h(m,e,o){o||(o=Error);var f=function(l){var y,s;function v(x,a,b){return l.call(this,(A=x,T=a,B=b,"string"==typeof e?e:e(A,T,B)))||this;var A,T,B}return s=l,(y=v).prototype=Object.create(s.prototype),y.prototype.constructor=y,y.__proto__=s,v}(o);f.prototype.name=o.name,f.prototype.code=m,q[m]=f}function F(m,e){if(Array.isArray(m)){var o=m.length;return m=m.map(function(f){return String(f)}),o>2?"one of ".concat(e," ").concat(m.slice(0,o-1).join(", "),", or ")+m[o-1]:2===o?"one of ".concat(e," ").concat(m[0]," or ").concat(m[1]):"of ".concat(e," ").concat(m[0])}return"of ".concat(e," ").concat(String(m))}h("ERR_INVALID_OPT_VALUE",function(m,e){return'The value "'+e+'" is invalid for option "'+m+'"'},TypeError),h("ERR_INVALID_ARG_TYPE",function(m,e,o){var f,l,s,x,a,b;if("string"==typeof e&&(l="not ",e.substr(0,l.length)===l)?(f="must not be",e=e.replace(/^not /,"")):f="must be",x=m,a=" argument",(void 0===b||b>x.length)&&(b=x.length),x.substring(b-a.length,b)===a)s="The ".concat(m," ").concat(f," ").concat(F(e,"type"));else{var v=function(x,a,b){return"number"!=typeof b&&(b=0),!(b+".".length>x.length)&&-1!==x.indexOf(".",b)}(m)?"property":"argument";s='The "'.concat(m,'" ').concat(v," ").concat(f," ").concat(F(e,"type"))}return s+". Received type ".concat(typeof o)},TypeError),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),h("ERR_METHOD_NOT_IMPLEMENTED",function(m){return"The "+m+" method is not implemented"}),h("ERR_STREAM_PREMATURE_CLOSE","Premature close"),h("ERR_STREAM_DESTROYED",function(m){return"Cannot call "+m+" after a stream was destroyed"}),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),h("ERR_STREAM_WRITE_AFTER_END","write after end"),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_UNKNOWN_ENCODING",function(m){return"Unknown encoding: "+m},TypeError),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ae.exports.codes=q},{}],89:[function(J,ae,ce){(function(q){(function(){"use strict";var h=Object.keys||function(v){var x=[];for(var a in v)x.push(a);return x};ae.exports=l;var F=J("./_stream_readable"),m=J("./_stream_writable");J("inherits")(l,F);for(var e=h(m.prototype),o=0;o<e.length;o++){var f=e[o];l.prototype[f]||(l.prototype[f]=m.prototype[f])}function l(v){if(!(this instanceof l))return new l(v);F.call(this,v),m.call(this,v),this.allowHalfOpen=!0,v&&(!1===v.readable&&(this.readable=!1),!1===v.writable&&(this.writable=!1),!1===v.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",y)))}function y(){this._writableState.ended||q.nextTick(s,this)}function s(v){v.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(v){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=v,this._writableState.destroyed=v)}})}).call(this)}).call(this,J("_process"))},{"./_stream_readable":91,"./_stream_writable":93,_process:71,inherits:26}],90:[function(J,ae,ce){"use strict";ae.exports=h;var q=J("./_stream_transform");function h(F){if(!(this instanceof h))return new h(F);q.call(this,F)}J("inherits")(h,q),h.prototype._transform=function(F,m,e){e(null,F)}},{"./_stream_transform":92,inherits:26}],91:[function(J,ae,ce){(function(q,h){(function(){"use strict";var F;ae.exports=W,W.ReadableState=V,J("events").EventEmitter;var l,m=function(H,z){return H.listeners(z).length},e=J("./internal/streams/stream"),o=J("buffer").Buffer,f=h.Uint8Array||function(){},y=J("util");l=y&&y.debuglog?y.debuglog("stream"):function(){};var s,v,x,a=J("./internal/streams/buffer_list"),b=J("./internal/streams/destroy"),A=J("./internal/streams/state").getHighWaterMark,T=J("../errors").codes,B=T.ERR_INVALID_ARG_TYPE,N=T.ERR_STREAM_PUSH_AFTER_EOF,P=T.ERR_METHOD_NOT_IMPLEMENTED,L=T.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;J("inherits")(W,e);var Q=b.errorOrDestroy,j=["error","close","destroy","pause","resume"];function V(H,z,ne){F=F||J("./_stream_duplex"),H=H||{},"boolean"!=typeof ne&&(ne=z instanceof F),this.objectMode=!!H.objectMode,ne&&(this.objectMode=this.objectMode||!!H.readableObjectMode),this.highWaterMark=A(this,H,"readableHighWaterMark",ne),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==H.emitClose,this.autoDestroy=!!H.autoDestroy,this.destroyed=!1,this.defaultEncoding=H.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,H.encoding&&(s||(s=J("string_decoder/").StringDecoder),this.decoder=new s(H.encoding),this.encoding=H.encoding)}function W(H){if(F=F||J("./_stream_duplex"),!(this instanceof W))return new W(H);var z=this instanceof F;this._readableState=new V(H,this,z),this.readable=!0,H&&("function"==typeof H.read&&(this._read=H.read),"function"==typeof H.destroy&&(this._destroy=H.destroy)),e.call(this)}function R(H,z,ne,ge,xe){l("readableAddChunk",z);var Re,We,Ke,mt,yt,He=H._readableState;if(null===z)He.reading=!1,function(We,Ke){if(l("onEofChunk"),!Ke.ended){if(Ke.decoder){var mt=Ke.decoder.end();mt&&mt.length&&(Ke.buffer.push(mt),Ke.length+=Ke.objectMode?1:mt.length)}Ke.ended=!0,Ke.sync?te(We):(Ke.needReadable=!1,Ke.emittedReadable||(Ke.emittedReadable=!0,oe(We)))}}(H,He);else if(xe||(We=He,yt=Ke=z,o.isBuffer(yt)||yt instanceof f||"string"==typeof Ke||void 0===Ke||We.objectMode||(mt=new B("chunk",["string","Buffer","Uint8Array"],Ke)),Re=mt),Re)Q(H,Re);else if(He.objectMode||z&&z.length>0)if("string"==typeof z||He.objectMode||Object.getPrototypeOf(z)===o.prototype||(z=function(We){return o.from(We)}(z)),ge)He.endEmitted?Q(H,new L):Z(H,He,z,!0);else if(He.ended)Q(H,new N);else{if(He.destroyed)return!1;He.reading=!1,He.decoder&&!ne?(z=He.decoder.write(z),He.objectMode||0!==z.length?Z(H,He,z,!1):ie(H,He)):Z(H,He,z,!1)}else ge||(He.reading=!1,ie(H,He));return!He.ended&&(He.length<He.highWaterMark||0===He.length)}function Z(H,z,ne,ge){z.flowing&&0===z.length&&!z.sync?(z.awaitDrain=0,H.emit("data",ne)):(z.length+=z.objectMode?1:ne.length,ge?z.buffer.unshift(ne):z.buffer.push(ne),z.needReadable&&te(H)),ie(H,z)}Object.defineProperty(W.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(H){this._readableState&&(this._readableState.destroyed=H)}}),W.prototype.destroy=b.destroy,W.prototype._undestroy=b.undestroy,W.prototype._destroy=function(H,z){z(H)},W.prototype.push=function(H,z){var ne,ge=this._readableState;return ge.objectMode?ne=!0:"string"==typeof H&&((z=z||ge.defaultEncoding)!==ge.encoding&&(H=o.from(H,z),z=""),ne=!0),R(this,H,z,!1,ne)},W.prototype.unshift=function(H){return R(this,H,null,!0,!1)},W.prototype.isPaused=function(){return!1===this._readableState.flowing},W.prototype.setEncoding=function(H){s||(s=J("string_decoder/").StringDecoder);var z=new s(H);this._readableState.decoder=z,this._readableState.encoding=this._readableState.decoder.encoding;for(var ne=this._readableState.buffer.head,ge="";null!==ne;)ge+=z.write(ne.data),ne=ne.next;return this._readableState.buffer.clear(),""!==ge&&this._readableState.buffer.push(ge),this._readableState.length=ge.length,this};var ee=1073741824;function le(H,z){return H<=0||0===z.length&&z.ended?0:z.objectMode?1:H!=H?z.flowing&&z.length?z.buffer.head.data.length:z.length:(H>z.highWaterMark&&(z.highWaterMark=((ne=H)>=ee?ne=ee:(ne--,ne|=ne>>>1,ne|=ne>>>2,ne|=ne>>>4,ne|=ne>>>8,ne|=ne>>>16,ne++),ne)),H<=z.length?H:z.ended?z.length:(z.needReadable=!0,0));var ne}function te(H){var z=H._readableState;l("emitReadable",z.needReadable,z.emittedReadable),z.needReadable=!1,z.emittedReadable||(l("emitReadable",z.flowing),z.emittedReadable=!0,q.nextTick(oe,H))}function oe(H){var z=H._readableState;l("emitReadable_",z.destroyed,z.length,z.ended),z.destroyed||!z.length&&!z.ended||(H.emit("readable"),z.emittedReadable=!1),z.needReadable=!z.flowing&&!z.ended&&z.length<=z.highWaterMark,ke(H)}function ie(H,z){z.readingMore||(z.readingMore=!0,q.nextTick(pe,H,z))}function pe(H,z){for(;!z.reading&&!z.ended&&(z.length<z.highWaterMark||z.flowing&&0===z.length);){var ne=z.length;if(l("maybeReadMore read 0"),H.read(0),ne===z.length)break}z.readingMore=!1}function we(H){var z=H._readableState;z.readableListening=H.listenerCount("readable")>0,z.resumeScheduled&&!z.paused?z.flowing=!0:H.listenerCount("data")>0&&H.resume()}function Te(H){l("readable nexttick read 0"),H.read(0)}function Fe(H,z){l("resume",z.reading),z.reading||H.read(0),z.resumeScheduled=!1,H.emit("resume"),ke(H),z.flowing&&!z.reading&&H.read(0)}function ke(H){var z=H._readableState;for(l("flow",z.flowing);z.flowing&&null!==H.read(););}function de(H,z){return 0===z.length?null:(z.objectMode?ne=z.buffer.shift():!H||H>=z.length?(ne=z.decoder?z.buffer.join(""):1===z.buffer.length?z.buffer.first():z.buffer.concat(z.length),z.buffer.clear()):ne=z.buffer.consume(H,z.decoder),ne);var ne}function Le(H){var z=H._readableState;l("endReadable",z.endEmitted),z.endEmitted||(z.ended=!0,q.nextTick(Me,z,H))}function Me(H,z){if(l("endReadableNT",H.endEmitted,H.length),!H.endEmitted&&0===H.length&&(H.endEmitted=!0,z.readable=!1,z.emit("end"),H.autoDestroy)){var ne=z._writableState;(!ne||ne.autoDestroy&&ne.finished)&&z.destroy()}}function Ze(H,z){for(var ne=0,ge=H.length;ne<ge;ne++)if(H[ne]===z)return ne;return-1}W.prototype.read=function(H){l("read",H),H=parseInt(H,10);var z=this._readableState,ne=H;if(0!==H&&(z.emittedReadable=!1),0===H&&z.needReadable&&((0!==z.highWaterMark?z.length>=z.highWaterMark:z.length>0)||z.ended))return l("read: emitReadable",z.length,z.ended),0===z.length&&z.ended?Le(this):te(this),null;if(0===(H=le(H,z))&&z.ended)return 0===z.length&&Le(this),null;var ge,xe=z.needReadable;return l("need readable",xe),(0===z.length||z.length-H<z.highWaterMark)&&l("length less than watermark",xe=!0),z.ended||z.reading?l("reading or ended",xe=!1):xe&&(l("do read"),z.reading=!0,z.sync=!0,0===z.length&&(z.needReadable=!0),this._read(z.highWaterMark),z.sync=!1,z.reading||(H=le(ne,z))),null===(ge=H>0?de(H,z):null)?(z.needReadable=z.length<=z.highWaterMark,H=0):(z.length-=H,z.awaitDrain=0),0===z.length&&(z.ended||(z.needReadable=!0),ne!==H&&z.ended&&Le(this)),null!==ge&&this.emit("data",ge),ge},W.prototype._read=function(H){Q(this,new P("_read()"))},W.prototype.pipe=function(H,z){var ne=this,ge=this._readableState;switch(ge.pipesCount){case 0:ge.pipes=H;break;case 1:ge.pipes=[ge.pipes,H];break;default:ge.pipes.push(H)}ge.pipesCount+=1,l("pipe count=%d opts=%j",ge.pipesCount,z);var xe=z&&!1===z.end||H===q.stdout||H===q.stderr?Se:He;function He(){l("onend"),H.end()}ge.endEmitted?q.nextTick(xe):ne.once("end",xe),H.on("unpipe",function Re(Ie,Ne){l("onunpipe"),Ie===ne&&Ne&&!1===Ne.hasUnpiped&&(Ne.hasUnpiped=!0,l("cleanup"),H.removeListener("close",Mt),H.removeListener("finish",Yt),H.removeListener("drain",We),H.removeListener("error",yt),H.removeListener("unpipe",Re),ne.removeListener("end",He),ne.removeListener("end",Se),ne.removeListener("data",mt),Ke=!0,!ge.awaitDrain||H._writableState&&!H._writableState.needDrain||We())});var Ie,We=(Ie=ne,function(){var Ne=Ie._readableState;l("pipeOnDrain",Ne.awaitDrain),Ne.awaitDrain&&Ne.awaitDrain--,0===Ne.awaitDrain&&m(Ie,"data")&&(Ne.flowing=!0,ke(Ie))});H.on("drain",We);var Ke=!1;function mt(Ie){l("ondata");var Ne=H.write(Ie);l("dest.write",Ne),!1===Ne&&((1===ge.pipesCount&&ge.pipes===H||ge.pipesCount>1&&-1!==Ze(ge.pipes,H))&&!Ke&&(l("false write response, pause",ge.awaitDrain),ge.awaitDrain++),ne.pause())}function yt(Ie){l("onerror",Ie),Se(),H.removeListener("error",yt),0===m(H,"error")&&Q(H,Ie)}function Mt(){H.removeListener("finish",Yt),Se()}function Yt(){l("onfinish"),H.removeListener("close",Mt),Se()}function Se(){l("unpipe"),ne.unpipe(H)}return ne.on("data",mt),function(Ie,Ne,Y){if("function"==typeof Ie.prependListener)return Ie.prependListener(Ne,Y);Ie._events&&Ie._events[Ne]?Array.isArray(Ie._events[Ne])?Ie._events[Ne].unshift(Y):Ie._events[Ne]=[Y,Ie._events[Ne]]:Ie.on(Ne,Y)}(H,"error",yt),H.once("close",Mt),H.once("finish",Yt),H.emit("pipe",ne),ge.flowing||(l("pipe resume"),ne.resume()),H},W.prototype.unpipe=function(H){var z=this._readableState,ne={hasUnpiped:!1};if(0===z.pipesCount)return this;if(1===z.pipesCount)return H&&H!==z.pipes||(H||(H=z.pipes),z.pipes=null,z.pipesCount=0,z.flowing=!1,H&&H.emit("unpipe",this,ne)),this;if(!H){var ge=z.pipes,xe=z.pipesCount;z.pipes=null,z.pipesCount=0,z.flowing=!1;for(var Re=0;Re<xe;Re++)ge[Re].emit("unpipe",this,{hasUnpiped:!1});return this}var He=Ze(z.pipes,H);return-1===He||(z.pipes.splice(He,1),z.pipesCount-=1,1===z.pipesCount&&(z.pipes=z.pipes[0]),H.emit("unpipe",this,ne)),this},W.prototype.on=function(H,z){var ne=e.prototype.on.call(this,H,z),ge=this._readableState;return"data"===H?(ge.readableListening=this.listenerCount("readable")>0,!1!==ge.flowing&&this.resume()):"readable"===H&&(ge.endEmitted||ge.readableListening||(ge.readableListening=ge.needReadable=!0,ge.flowing=!1,ge.emittedReadable=!1,l("on readable",ge.length,ge.reading),ge.length?te(this):ge.reading||q.nextTick(Te,this))),ne},W.prototype.addListener=W.prototype.on,W.prototype.removeListener=function(H,z){var ne=e.prototype.removeListener.call(this,H,z);return"readable"===H&&q.nextTick(we,this),ne},W.prototype.removeAllListeners=function(H){var z=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==H&&void 0!==H||q.nextTick(we,this),z},W.prototype.resume=function(){var z,ne,H=this._readableState;return H.flowing||(l("resume"),H.flowing=!H.readableListening,z=this,(ne=H).resumeScheduled||(ne.resumeScheduled=!0,q.nextTick(Fe,z,ne))),H.paused=!1,this},W.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},W.prototype.wrap=function(H){var z=this,ne=this._readableState,ge=!1;for(var xe in H.on("end",function(){if(l("wrapped end"),ne.decoder&&!ne.ended){var He=ne.decoder.end();He&&He.length&&z.push(He)}z.push(null)}),H.on("data",function(He){l("wrapped data"),ne.decoder&&(He=ne.decoder.write(He)),ne.objectMode&&null==He||(ne.objectMode||He&&He.length)&&(z.push(He)||(ge=!0,H.pause()))}),H)void 0===this[xe]&&"function"==typeof H[xe]&&(this[xe]=function(He){return function(){return H[He].apply(H,arguments)}}(xe));for(var Re=0;Re<j.length;Re++)H.on(j[Re],this.emit.bind(this,j[Re]));return this._read=function(He){l("wrapped _read",He),ge&&(ge=!1,H.resume())},this},"function"==typeof Symbol&&(W.prototype[Symbol.asyncIterator]=function(){return void 0===v&&(v=J("./internal/streams/async_iterator")),v(this)}),Object.defineProperty(W.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(W.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(W.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(H){this._readableState&&(this._readableState.flowing=H)}}),W._fromList=de,Object.defineProperty(W.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(W.from=function(H,z){return void 0===x&&(x=J("./internal/streams/from")),x(W,H,z)})}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":88,"./_stream_duplex":89,"./internal/streams/async_iterator":94,"./internal/streams/buffer_list":95,"./internal/streams/destroy":96,"./internal/streams/from":98,"./internal/streams/state":100,"./internal/streams/stream":101,_process:71,buffer:9,events:15,inherits:26,"string_decoder/":102,util:4}],92:[function(J,ae,ce){"use strict";ae.exports=l;var q=J("../errors").codes,h=q.ERR_METHOD_NOT_IMPLEMENTED,F=q.ERR_MULTIPLE_CALLBACK,m=q.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=q.ERR_TRANSFORM_WITH_LENGTH_0,o=J("./_stream_duplex");function f(v,x){var a=this._transformState;a.transforming=!1;var b=a.writecb;if(null===b)return this.emit("error",new F);a.writechunk=null,a.writecb=null,null!=x&&this.push(x),b(v);var A=this._readableState;A.reading=!1,(A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}function l(v){if(!(this instanceof l))return new l(v);o.call(this,v),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&("function"==typeof v.transform&&(this._transform=v.transform),"function"==typeof v.flush&&(this._flush=v.flush)),this.on("prefinish",y)}function y(){var v=this;"function"!=typeof this._flush||this._readableState.destroyed?s(this,null,null):this._flush(function(x,a){s(v,x,a)})}function s(v,x,a){if(x)return v.emit("error",x);if(null!=a&&v.push(a),v._writableState.length)throw new e;if(v._transformState.transforming)throw new m;return v.push(null)}J("inherits")(l,o),l.prototype.push=function(v,x){return this._transformState.needTransform=!1,o.prototype.push.call(this,v,x)},l.prototype._transform=function(v,x,a){a(new h("_transform()"))},l.prototype._write=function(v,x,a){var b=this._transformState;if(b.writecb=a,b.writechunk=v,b.writeencoding=x,!b.transforming){var A=this._readableState;(b.needTransform||A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}},l.prototype._read=function(v){var x=this._transformState;null===x.writechunk||x.transforming?x.needTransform=!0:(x.transforming=!0,this._transform(x.writechunk,x.writeencoding,x.afterTransform))},l.prototype._destroy=function(v,x){o.prototype._destroy.call(this,v,function(a){x(a)})}},{"../errors":88,"./_stream_duplex":89,inherits:26}],93:[function(J,ae,ce){(function(q,h){(function(){"use strict";function F(ie){var pe=this;this.next=null,this.entry=null,this.finish=function(){!function(we,Te,Fe){var ke=we.entry;for(we.entry=null;ke;){var de=ke.callback;Te.pendingcb--,de(undefined),ke=ke.next}Te.corkedRequestsFree.next=we}(pe,ie)}}var m;ae.exports=W,W.WritableState=V;var y,e={deprecate:J("util-deprecate")},o=J("./internal/streams/stream"),f=J("buffer").Buffer,l=h.Uint8Array||function(){},s=J("./internal/streams/destroy"),v=J("./internal/streams/state").getHighWaterMark,x=J("../errors").codes,a=x.ERR_INVALID_ARG_TYPE,b=x.ERR_METHOD_NOT_IMPLEMENTED,A=x.ERR_MULTIPLE_CALLBACK,T=x.ERR_STREAM_CANNOT_PIPE,B=x.ERR_STREAM_DESTROYED,N=x.ERR_STREAM_NULL_VALUES,P=x.ERR_STREAM_WRITE_AFTER_END,L=x.ERR_UNKNOWN_ENCODING,Q=s.errorOrDestroy;function j(){}function V(ie,pe,we){m=m||J("./_stream_duplex"),ie=ie||{},"boolean"!=typeof we&&(we=pe instanceof m),this.objectMode=!!ie.objectMode,we&&(this.objectMode=this.objectMode||!!ie.writableObjectMode),this.highWaterMark=v(this,ie,"writableHighWaterMark",we),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Te=!1===ie.decodeStrings;this.decodeStrings=!Te,this.defaultEncoding=ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Fe){!function(ke,de){var z,Le=ke._writableState,Me=Le.sync,Ze=Le.writecb;if("function"!=typeof Ze)throw new A;if((z=Le).writing=!1,z.writecb=null,z.length-=z.writelen,z.writelen=0,de)!function(z,ne,ge,xe,Re){--ne.pendingcb,ge?(q.nextTick(Re,xe),q.nextTick(oe,z,ne),z._writableState.errorEmitted=!0,Q(z,xe)):(Re(xe),z._writableState.errorEmitted=!0,Q(z,xe),oe(z,ne))}(ke,Le,Me,de,Ze);else{var H=le(Le)||ke.destroyed;H||Le.corked||Le.bufferProcessing||!Le.bufferedRequest||ee(ke,Le),Me?q.nextTick(Z,ke,Le,H,Ze):Z(ke,Le,H,Ze)}}(pe,Fe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==ie.emitClose,this.autoDestroy=!!ie.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new F(this)}function W(ie){var pe=this instanceof(m=m||J("./_stream_duplex"));if(!pe&&!y.call(W,this))return new W(ie);this._writableState=new V(ie,this,pe),this.writable=!0,ie&&("function"==typeof ie.write&&(this._write=ie.write),"function"==typeof ie.writev&&(this._writev=ie.writev),"function"==typeof ie.destroy&&(this._destroy=ie.destroy),"function"==typeof ie.final&&(this._final=ie.final)),o.call(this)}function R(ie,pe,we,Te,Fe,ke,de){pe.writelen=Te,pe.writecb=de,pe.writing=!0,pe.sync=!0,pe.destroyed?pe.onwrite(new B("write")):we?ie._writev(Fe,pe.onwrite):ie._write(Fe,ke,pe.onwrite),pe.sync=!1}function Z(ie,pe,we,Te){var Fe,ke;we||(Fe=ie,0===(ke=pe).length&&ke.needDrain&&(ke.needDrain=!1,Fe.emit("drain"))),pe.pendingcb--,Te(),oe(ie,pe)}function ee(ie,pe){pe.bufferProcessing=!0;var we=pe.bufferedRequest;if(ie._writev&&we&&we.next){var Te=pe.bufferedRequestCount,Fe=new Array(Te),ke=pe.corkedRequestsFree;ke.entry=we;for(var de=0,Le=!0;we;)Fe[de]=we,we.isBuf||(Le=!1),we=we.next,de+=1;Fe.allBuffers=Le,R(ie,pe,!0,pe.length,Fe,"",ke.finish),pe.pendingcb++,pe.lastBufferedRequest=null,ke.next?(pe.corkedRequestsFree=ke.next,ke.next=null):pe.corkedRequestsFree=new F(pe),pe.bufferedRequestCount=0}else{for(;we;){var Me=we.chunk,Ze=we.encoding,H=we.callback;if(R(ie,pe,!1,pe.objectMode?1:Me.length,Me,Ze,H),we=we.next,pe.bufferedRequestCount--,pe.writing)break}null===we&&(pe.lastBufferedRequest=null)}pe.bufferedRequest=we,pe.bufferProcessing=!1}function le(ie){return ie.ending&&0===ie.length&&null===ie.bufferedRequest&&!ie.finished&&!ie.writing}function te(ie,pe){ie._final(function(we){pe.pendingcb--,we&&Q(ie,we),pe.prefinished=!0,ie.emit("prefinish"),oe(ie,pe)})}function oe(ie,pe){var Fe,ke,we=le(pe);if(we&&(Fe=ie,(ke=pe).prefinished||ke.finalCalled||("function"!=typeof Fe._final||ke.destroyed?(ke.prefinished=!0,Fe.emit("prefinish")):(ke.pendingcb++,ke.finalCalled=!0,q.nextTick(te,Fe,ke))),0===pe.pendingcb&&(pe.finished=!0,ie.emit("finish"),pe.autoDestroy))){var Te=ie._readableState;(!Te||Te.autoDestroy&&Te.endEmitted)&&ie.destroy()}return we}J("inherits")(W,o),V.prototype.getBuffer=function(){for(var ie=this.bufferedRequest,pe=[];ie;)pe.push(ie),ie=ie.next;return pe},function(){try{Object.defineProperty(V.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(ie){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(W,Symbol.hasInstance,{value:function(ie){return!!y.call(this,ie)||this===W&&ie&&ie._writableState instanceof V}})):y=function(ie){return ie instanceof this},W.prototype.pipe=function(){Q(this,new T)},W.prototype.write=function(ie,pe,we){var Te,Le,Fe=this._writableState,ke=!1,de=!Fe.objectMode&&(Te=ie,f.isBuffer(Te)||Te instanceof l);return de&&!f.isBuffer(ie)&&(Le=ie,ie=f.from(Le)),"function"==typeof pe&&(we=pe,pe=null),de?pe="buffer":pe||(pe=Fe.defaultEncoding),"function"!=typeof we&&(we=j),Fe.ending?function(Le,Me){var Ze=new P;Q(Le,Ze),q.nextTick(Me,Ze)}(this,we):(de||function(Le,Me,Ze,H){var z;return null===Ze?z=new N:"string"==typeof Ze||Me.objectMode||(z=new a("chunk",["string","Buffer"],Ze)),!z||(Q(Le,z),q.nextTick(H,z),!1)}(this,Fe,ie,we))&&(Fe.pendingcb++,ke=function(Le,Me,Ze,H,z,ne){if(!Ze){var ge=(Ke=H,mt=z,(We=Me).objectMode||!1===We.decodeStrings||"string"!=typeof Ke||(Ke=f.from(Ke,mt)),Ke);H!==ge&&(Ze=!0,z="buffer",H=ge)}var We,Ke,mt,xe=Me.objectMode?1:H.length;Me.length+=xe;var Re=Me.length<Me.highWaterMark;if(Re||(Me.needDrain=!0),Me.writing||Me.corked){var He=Me.lastBufferedRequest;Me.lastBufferedRequest={chunk:H,encoding:z,isBuf:Ze,callback:ne,next:null},He?He.next=Me.lastBufferedRequest:Me.bufferedRequest=Me.lastBufferedRequest,Me.bufferedRequestCount+=1}else R(Le,Me,!1,xe,H,z,ne);return Re}(this,Fe,de,ie,pe,we)),ke},W.prototype.cork=function(){this._writableState.corked++},W.prototype.uncork=function(){var ie=this._writableState;ie.corked&&(ie.corked--,ie.writing||ie.corked||ie.bufferProcessing||!ie.bufferedRequest||ee(this,ie))},W.prototype.setDefaultEncoding=function(ie){if("string"==typeof ie&&(ie=ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ie+"").toLowerCase())>-1))throw new L(ie);return this._writableState.defaultEncoding=ie,this},Object.defineProperty(W.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(W.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),W.prototype._write=function(ie,pe,we){we(new b("_write()"))},W.prototype._writev=null,W.prototype.end=function(ie,pe,we){var Fe,ke,de,Te=this._writableState;return"function"==typeof ie?(we=ie,ie=null,pe=null):"function"==typeof pe&&(we=pe,pe=null),null!=ie&&this.write(ie,pe),Te.corked&&(Te.corked=1,this.uncork()),Te.ending||(Fe=this,de=we,(ke=Te).ending=!0,oe(Fe,ke),de&&(ke.finished?q.nextTick(de):Fe.once("finish",de)),ke.ended=!0,Fe.writable=!1),this},Object.defineProperty(W.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(W.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ie){this._writableState&&(this._writableState.destroyed=ie)}}),W.prototype.destroy=s.destroy,W.prototype._undestroy=s.undestroy,W.prototype._destroy=function(ie,pe){pe(ie)}}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":88,"./_stream_duplex":89,"./internal/streams/destroy":96,"./internal/streams/state":100,"./internal/streams/stream":101,_process:71,buffer:9,inherits:26,"util-deprecate":126}],94:[function(J,ae,ce){(function(q){(function(){"use strict";var h;function F(T,B,N){return B in T?Object.defineProperty(T,B,{value:N,enumerable:!0,configurable:!0,writable:!0}):T[B]=N,T}var m=J("./end-of-stream"),e=Symbol("lastResolve"),o=Symbol("lastReject"),f=Symbol("error"),l=Symbol("ended"),y=Symbol("lastPromise"),s=Symbol("handlePromise"),v=Symbol("stream");function x(T,B){return{value:T,done:B}}function a(T){var B=T[e];if(null!==B){var N=T[v].read();null!==N&&(T[y]=null,T[e]=null,T[o]=null,B(x(N,!1)))}}var b=Object.getPrototypeOf(function(){}),A=Object.setPrototypeOf((F(h={get stream(){return this[v]},next:function(){var T=this,B=this[f];if(null!==B)return Promise.reject(B);if(this[l])return Promise.resolve(x(void 0,!0));if(this[v].destroyed)return new Promise(function(Q,j){q.nextTick(function(){T[f]?j(T[f]):Q(x(void 0,!0))})});var N,Q,j,P=this[y];if(P)N=new Promise((Q=P,j=this,function(V,W){Q.then(function(){j[l]?V(x(void 0,!0)):j[s](V,W)},W)}));else{var L=this[v].read();if(null!==L)return Promise.resolve(x(L,!1));N=new Promise(this[s])}return this[y]=N,N}},Symbol.asyncIterator,function(){return this}),F(h,"return",function(){var T=this;return new Promise(function(B,N){T[v].destroy(null,function(P){P?N(P):B(x(void 0,!0))})})}),h),b);ae.exports=function(T){var B,N=Object.create(A,(F(B={},v,{value:T,writable:!0}),F(B,e,{value:null,writable:!0}),F(B,o,{value:null,writable:!0}),F(B,f,{value:null,writable:!0}),F(B,l,{value:T._readableState.endEmitted,writable:!0}),F(B,s,{value:function(P,L){var Q=N[v].read();Q?(N[y]=null,N[e]=null,N[o]=null,P(x(Q,!1))):(N[e]=P,N[o]=L)},writable:!0}),B));return N[y]=null,m(T,function(P){if(P&&"ERR_STREAM_PREMATURE_CLOSE"!==P.code){var L=N[o];return null!==L&&(N[y]=null,N[e]=null,N[o]=null,L(P)),void(N[f]=P)}var Q=N[e];null!==Q&&(N[y]=null,N[e]=null,N[o]=null,Q(x(void 0,!0))),N[l]=!0}),T.on("readable",function(P){q.nextTick(a,P)}.bind(null,N)),N}}).call(this)}).call(this,J("_process"))},{"./end-of-stream":97,_process:71}],95:[function(J,ae,ce){"use strict";function q(f,l){var y=Object.keys(f);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(f);l&&(s=s.filter(function(v){return Object.getOwnPropertyDescriptor(f,v).enumerable})),y.push.apply(y,s)}return y}function h(f,l,y){return l in f?Object.defineProperty(f,l,{value:y,enumerable:!0,configurable:!0,writable:!0}):f[l]=y,f}function F(f,l){for(var y=0;y<l.length;y++){var s=l[y];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(f,s.key,s)}}var m=J("buffer").Buffer,e=J("util").inspect,o=e&&e.custom||"inspect";ae.exports=function(){function f(){(function(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")})(this,f),this.head=null,this.tail=null,this.length=0}var l,y;return l=f,(y=[{key:"push",value:function(v){var x={data:v,next:null};this.length>0?this.tail.next=x:this.head=x,this.tail=x,++this.length}},{key:"unshift",value:function(v){var x={data:v,next:this.head};0===this.length&&(this.tail=x),this.head=x,++this.length}},{key:"shift",value:function(){if(0!==this.length){var v=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,v}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(v){if(0===this.length)return"";for(var x=this.head,a=""+x.data;x=x.next;)a+=v+x.data;return a}},{key:"concat",value:function(v){if(0===this.length)return m.alloc(0);for(var x,a,b,A=m.allocUnsafe(v>>>0),T=this.head,B=0;T;)x=T.data,a=A,b=B,m.prototype.copy.call(x,a,b),B+=T.data.length,T=T.next;return A}},{key:"consume",value:function(v,x){var a;return v<this.head.data.length?(a=this.head.data.slice(0,v),this.head.data=this.head.data.slice(v)):a=v===this.head.data.length?this.shift():x?this._getString(v):this._getBuffer(v),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(v){var x=this.head,a=1,b=x.data;for(v-=b.length;x=x.next;){var A=x.data,T=v>A.length?A.length:v;if(T===A.length?b+=A:b+=A.slice(0,v),0==(v-=T)){T===A.length?(++a,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=A.slice(T));break}++a}return this.length-=a,b}},{key:"_getBuffer",value:function(v){var x=m.allocUnsafe(v),a=this.head,b=1;for(a.data.copy(x),v-=a.data.length;a=a.next;){var A=a.data,T=v>A.length?A.length:v;if(A.copy(x,x.length-v,0,T),0==(v-=T)){T===A.length?(++b,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=A.slice(T));break}++b}return this.length-=b,x}},{key:o,value:function(v,x){return e(this,function(a){for(var b=1;b<arguments.length;b++){var A=null!=arguments[b]?arguments[b]:{};b%2?q(Object(A),!0).forEach(function(T){h(a,T,A[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(A)):q(Object(A)).forEach(function(T){Object.defineProperty(a,T,Object.getOwnPropertyDescriptor(A,T))})}return a}({},x,{depth:0,customInspect:!1}))}}])&&F(l.prototype,y),f}()},{buffer:9,util:4}],96:[function(J,ae,ce){(function(q){(function(){"use strict";function h(e,o){m(e,o),F(e)}function F(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function m(e,o){e.emit("error",o)}ae.exports={destroy:function(e,o){var f=this,l=this._readableState&&this._readableState.destroyed,y=this._writableState&&this._writableState.destroyed;return l||y?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,q.nextTick(m,this,e)):q.nextTick(m,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(s){!o&&s?f._writableState?f._writableState.errorEmitted?q.nextTick(F,f):(f._writableState.errorEmitted=!0,q.nextTick(h,f,s)):q.nextTick(h,f,s):o?(q.nextTick(F,f),o(s)):q.nextTick(F,f)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,o){var f=e._readableState,l=e._writableState;f&&f.autoDestroy||l&&l.autoDestroy?e.destroy(o):e.emit("error",o)}}}).call(this)}).call(this,J("_process"))},{_process:71}],97:[function(J,ae,ce){"use strict";var q=J("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function h(){}ae.exports=function F(m,e,o){if("function"==typeof e)return F(m,null,e);var B,N;e||(e={}),B=o||h,N=!1,o=function(){if(!N){N=!0;for(var P=arguments.length,L=new Array(P),Q=0;Q<P;Q++)L[Q]=arguments[Q];B.apply(this,L)}};var f=e.readable||!1!==e.readable&&m.readable,l=e.writable||!1!==e.writable&&m.writable,y=function(){m.writable||v()},s=m._writableState&&m._writableState.finished,v=function(){l=!1,s=!0,f||o.call(m)},x=m._readableState&&m._readableState.endEmitted,a=function(){f=!1,x=!0,l||o.call(m)},b=function(B){o.call(m,B)},A=function(){var B;return f&&!x?(m._readableState&&m._readableState.ended||(B=new q),o.call(m,B)):l&&!s?(m._writableState&&m._writableState.ended||(B=new q),o.call(m,B)):void 0},T=function(){m.req.on("finish",v)};return function(B){return B.setHeader&&"function"==typeof B.abort}(m)?(m.on("complete",v),m.on("abort",A),m.req?T():m.on("request",T)):l&&!m._writableState&&(m.on("end",y),m.on("close",y)),m.on("end",a),m.on("finish",v),!1!==e.error&&m.on("error",b),m.on("close",A),function(){m.removeListener("complete",v),m.removeListener("abort",A),m.removeListener("request",T),m.req&&m.req.removeListener("finish",v),m.removeListener("end",y),m.removeListener("close",y),m.removeListener("finish",v),m.removeListener("end",a),m.removeListener("error",b),m.removeListener("close",A)}}},{"../../../errors":88}],98:[function(J,ae,ce){ae.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],99:[function(J,ae,ce){"use strict";var q,h=J("../../../errors").codes,F=h.ERR_MISSING_ARGS,m=h.ERR_STREAM_DESTROYED;function e(l){if(l)throw l}function o(l){l()}function f(l,y){return l.pipe(y)}ae.exports=function(){for(var l=arguments.length,y=new Array(l),s=0;s<l;s++)y[s]=arguments[s];var v,b,x=(b=y).length?"function"!=typeof b[b.length-1]?e:b.pop():e;if(Array.isArray(y[0])&&(y=y[0]),y.length<2)throw new F("streams");var a=y.map(function(b,A){var T=A<y.length-1;return function(B,N,P,L){var V,W;V=L,W=!1,L=function(){W||(W=!0,V.apply(void 0,arguments))};var Q=!1;B.on("close",function(){Q=!0}),void 0===q&&(q=J("./end-of-stream")),q(B,{readable:N,writable:P},function(V){if(V)return L(V);Q=!0,L()});var j=!1;return function(V){if(!Q&&!j)return j=!0,function(W){return W.setHeader&&"function"==typeof W.abort}(B)?B.abort():"function"==typeof B.destroy?B.destroy():void L(V||new m("pipe"))}}(b,T,A>0,function(B){v||(v=B),B&&a.forEach(o),T||(a.forEach(o),x(v))})});return y.reduce(f)}},{"../../../errors":88,"./end-of-stream":97}],100:[function(J,ae,ce){"use strict";var q=J("../../../errors").codes.ERR_INVALID_OPT_VALUE;ae.exports={getHighWaterMark:function(h,F,m,e){var f,l,y,o=(l=e,y=m,null!=(f=F).highWaterMark?f.highWaterMark:l?f[y]:null);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new q(e?m:"highWaterMark",o);return Math.floor(o)}return h.objectMode?16:16384}}},{"../../../errors":88}],101:[function(J,ae,ce){ae.exports=J("events").EventEmitter},{events:15}],102:[function(J,ae,ce){"use strict";var q=J("safe-buffer").Buffer,h=q.isEncoding||function(x){switch((x=""+x)&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function F(x){var a;switch(this.encoding=function(b){var A=function(T){if(!T)return"utf8";for(var B;;)switch(T){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return T;default:if(B)return;T=(""+T).toLowerCase(),B=!0}}(b);if("string"!=typeof A&&(q.isEncoding===h||!h(b)))throw new Error("Unknown encoding: "+b);return A||b}(x),this.encoding){case"utf16le":this.text=o,this.end=f,a=4;break;case"utf8":this.fillLast=e,a=4;break;case"base64":this.text=l,this.end=y,a=3;break;default:return this.write=s,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=q.allocUnsafe(a)}function m(x){return x<=127?0:x>>5==6?2:x>>4==14?3:x>>3==30?4:x>>6==2?-1:-2}function e(x){var a=this.lastTotal-this.lastNeed,b=function(A,T,B){if(128!=(192&T[0]))return A.lastNeed=0,"\ufffd";if(A.lastNeed>1&&T.length>1){if(128!=(192&T[1]))return A.lastNeed=1,"\ufffd";if(A.lastNeed>2&&T.length>2&&128!=(192&T[2]))return A.lastNeed=2,"\ufffd"}}(this,x);return void 0!==b?b:this.lastNeed<=x.length?(x.copy(this.lastChar,a,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(x.copy(this.lastChar,a,0,x.length),void(this.lastNeed-=x.length))}function o(x,a){if((x.length-a)%2==0){var b=x.toString("utf16le",a);if(b){var A=b.charCodeAt(b.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",a,x.length-1)}function f(x){var a=x&&x.length?this.write(x):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return a+this.lastChar.toString("utf16le",0,b)}return a}function l(x,a){var b=(x.length-a)%3;return 0===b?x.toString("base64",a):(this.lastNeed=3-b,this.lastTotal=3,1===b?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",a,x.length-b))}function y(x){var a=x&&x.length?this.write(x):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function s(x){return x.toString(this.encoding)}function v(x){return x&&x.length?this.write(x):""}ce.StringDecoder=F,F.prototype.write=function(x){if(0===x.length)return"";var a,b;if(this.lastNeed){if(void 0===(a=this.fillLast(x)))return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<x.length?a?a+this.text(x,b):this.text(x,b):a||""},F.prototype.end=function(x){var a=x&&x.length?this.write(x):"";return this.lastNeed?a+"\ufffd":a},F.prototype.text=function(x,a){var b=function(T,B,N){var P=B.length-1;if(P<N)return 0;var L=m(B[P]);return L>=0?(L>0&&(T.lastNeed=L-1),L):--P<N||-2===L?0:(L=m(B[P]))>=0?(L>0&&(T.lastNeed=L-2),L):--P<N||-2===L?0:(L=m(B[P]))>=0?(L>0&&(2===L?L=0:T.lastNeed=L-3),L):0}(this,x,a);if(!this.lastNeed)return x.toString("utf8",a);this.lastTotal=b;var A=x.length-(b-this.lastNeed);return x.copy(this.lastChar,0,A),x.toString("utf8",a,A)},F.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length}},{"safe-buffer":86}],103:[function(J,ae,ce){(function(q){(function(){var h=J("./lib/request"),F=J("./lib/response"),m=J("xtend"),e=J("builtin-status-codes"),o=J("url"),f=ce;f.request=function(l,y){l="string"==typeof l?o.parse(l):m(l);var s=-1===q.location.protocol.search(/^https?:$/)?"http:":"",v=l.protocol||s,x=l.hostname||l.host,a=l.port,b=l.path||"/";x&&-1!==x.indexOf(":")&&(x="["+x+"]"),l.url=(x?v+"//"+x:"")+(a?":"+a:"")+b,l.method=(l.method||"GET").toUpperCase(),l.headers=l.headers||{};var A=new h(l);return y&&A.on("response",y),A},f.get=function(l,y){var s=f.request(l,y);return s.end(),s},f.ClientRequest=h,f.IncomingMessage=F.IncomingMessage,f.Agent=function(){},f.Agent.defaultMaxSockets=4,f.globalAgent=new f.Agent,f.STATUS_CODES=e,f.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":105,"./lib/response":106,"builtin-status-codes":10,url:124,xtend:128}],104:[function(J,ae,ce){(function(q){(function(){var h;function F(){if(void 0!==h)return h;if(q.XMLHttpRequest){h=new q.XMLHttpRequest;try{h.open("GET",q.XDomainRequest?"/":"https://example.com")}catch(o){h=null}}else h=null;return h}function m(o){var f=F();if(!f)return!1;try{return f.responseType=o,f.responseType===o}catch(l){}return!1}function e(o){return"function"==typeof o}ce.fetch=e(q.fetch)&&e(q.ReadableStream),ce.writableStream=e(q.WritableStream),ce.abortController=e(q.AbortController),ce.arraybuffer=ce.fetch||m("arraybuffer"),ce.msstream=!ce.fetch&&m("ms-stream"),ce.mozchunkedarraybuffer=!ce.fetch&&m("moz-chunked-arraybuffer"),ce.overrideMimeType=ce.fetch||!!F()&&e(F().overrideMimeType),h=null}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],105:[function(J,ae,ce){(function(q,h,F){(function(){var m=J("./capability"),e=J("inherits"),o=J("./response"),f=J("readable-stream"),l=o.IncomingMessage,y=o.readyStates,s=ae.exports=function(x){var a,b=this;f.Writable.call(b),b._opts=x,b._body=[],b._headers={},x.auth&&b.setHeader("Authorization","Basic "+F.from(x.auth).toString("base64")),Object.keys(x.headers).forEach(function(T){b.setHeader(T,x.headers[T])});var T,B,A=!0;if("disable-fetch"===x.mode||"requestTimeout"in x&&!m.abortController)A=!1,a=!0;else if("prefer-streaming"===x.mode)a=!1;else if("allow-wrong-content-type"===x.mode)a=!m.overrideMimeType;else{if(x.mode&&"default"!==x.mode&&"prefer-fast"!==x.mode)throw new Error("Invalid value for opts.mode");a=!0}b._mode=(T=a,B=A,m.fetch&&B?"fetch":m.mozchunkedarraybuffer?"moz-chunked-arraybuffer":m.msstream?"ms-stream":m.arraybuffer&&T?"arraybuffer":"text"),b._fetchTimer=null,b._socketTimeout=null,b._socketTimer=null,b.on("finish",function(){b._onFinish()})};e(s,f.Writable),s.prototype.setHeader=function(x,a){var b=x.toLowerCase();-1===v.indexOf(b)&&(this._headers[b]={name:x,value:a})},s.prototype.getHeader=function(x){var a=this._headers[x.toLowerCase()];return a?a.value:null},s.prototype.removeHeader=function(x){delete this._headers[x.toLowerCase()]},s.prototype._onFinish=function(){var x=this;if(!x._destroyed){var a=x._opts;"timeout"in a&&0!==a.timeout&&x.setTimeout(a.timeout);var b=x._headers,A=null;"GET"!==a.method&&"HEAD"!==a.method&&(A=new Blob(x._body,{type:(b["content-type"]||{}).value||""}));var T=[];if(Object.keys(b).forEach(function(L){var Q=b[L].name,j=b[L].value;Array.isArray(j)?j.forEach(function(V){T.push([Q,V])}):T.push([Q,j])}),"fetch"===x._mode){var B=null;if(m.abortController){var N=new AbortController;B=N.signal,x._fetchAbortController=N,"requestTimeout"in a&&0!==a.requestTimeout&&(x._fetchTimer=h.setTimeout(function(){x.emit("requestTimeout"),x._fetchAbortController&&x._fetchAbortController.abort()},a.requestTimeout))}h.fetch(x._opts.url,{method:x._opts.method,headers:T,body:A||void 0,mode:"cors",credentials:a.withCredentials?"include":"same-origin",signal:B}).then(function(L){x._fetchResponse=L,x._resetTimers(!1),x._connect()},function(L){x._resetTimers(!0),x._destroyed||x.emit("error",L)})}else{var P=x._xhr=new h.XMLHttpRequest;try{P.open(x._opts.method,x._opts.url,!0)}catch(L){return void q.nextTick(function(){x.emit("error",L)})}"responseType"in P&&(P.responseType=x._mode),"withCredentials"in P&&(P.withCredentials=!!a.withCredentials),"text"===x._mode&&"overrideMimeType"in P&&P.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in a&&(P.timeout=a.requestTimeout,P.ontimeout=function(){x.emit("requestTimeout")}),T.forEach(function(L){P.setRequestHeader(L[0],L[1])}),x._response=null,P.onreadystatechange=function(){switch(P.readyState){case y.LOADING:case y.DONE:x._onXHRProgress()}},"moz-chunked-arraybuffer"===x._mode&&(P.onprogress=function(){x._onXHRProgress()}),P.onerror=function(){x._destroyed||(x._resetTimers(!0),x.emit("error",new Error("XHR error")))};try{P.send(A)}catch(L){return void q.nextTick(function(){x.emit("error",L)})}}}},s.prototype._onXHRProgress=function(){this._resetTimers(!1),function(x){try{var a=x.status;return null!==a&&0!==a}catch(b){return!1}}(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress(this._resetTimers.bind(this)))},s.prototype._connect=function(){var x=this;x._destroyed||(x._response=new l(x._xhr,x._fetchResponse,x._mode,x._resetTimers.bind(x)),x._response.on("error",function(a){x.emit("error",a)}),x.emit("response",x._response))},s.prototype._write=function(x,a,b){this._body.push(x),b()},s.prototype._resetTimers=function(x){var a=this;h.clearTimeout(a._socketTimer),a._socketTimer=null,x?(h.clearTimeout(a._fetchTimer),a._fetchTimer=null):a._socketTimeout&&(a._socketTimer=h.setTimeout(function(){a.emit("timeout")},a._socketTimeout))},s.prototype.abort=s.prototype.destroy=function(x){this._destroyed=!0,this._resetTimers(!0),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort(),x&&this.emit("error",x)},s.prototype.end=function(x,a,b){"function"==typeof x&&(b=x,x=void 0),f.Writable.prototype.end.call(this,x,a,b)},s.prototype.setTimeout=function(x,a){a&&this.once("timeout",a),this._socketTimeout=x,this._resetTimers(!1)},s.prototype.flushHeaders=function(){},s.prototype.setNoDelay=function(){},s.prototype.setSocketKeepAlive=function(){};var v=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},J("buffer").Buffer)},{"./capability":104,"./response":106,_process:71,buffer:9,inherits:26,"readable-stream":121}],106:[function(J,ae,ce){(function(q,h,F){(function(){var m=J("./capability"),e=J("inherits"),o=J("readable-stream"),f=ce.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=ce.IncomingMessage=function(y,s,v,x){var a=this;if(o.Readable.call(a),a._mode=v,a.headers={},a.rawHeaders=[],a.trailers={},a.rawTrailers=[],a.on("end",function(){q.nextTick(function(){a.emit("close")})}),"fetch"===v){if(a._fetchResponse=s,a.url=s.url,a.statusCode=s.status,a.statusMessage=s.statusText,s.headers.forEach(function(N,P){a.headers[P.toLowerCase()]=N,a.rawHeaders.push(P,N)}),m.writableStream){var b=new WritableStream({write:function(N){return x(!1),new Promise(function(P,L){a._destroyed?L():a.push(F.from(N))?P():a._resumeFetch=P})},close:function(){x(!0),a._destroyed||a.push(null)},abort:function(N){x(!0),a._destroyed||a.emit("error",N)}});try{return void s.body.pipeTo(b).catch(function(N){x(!0),a._destroyed||a.emit("error",N)})}catch(N){}}var A=s.body.getReader();!function N(){A.read().then(function(P){a._destroyed||(x(P.done),P.done?a.push(null):(a.push(F.from(P.value)),N()))}).catch(function(P){x(!0),a._destroyed||a.emit("error",P)})}()}else if(a._xhr=y,a._pos=0,a.url=y.responseURL,a.statusCode=y.status,a.statusMessage=y.statusText,y.getAllResponseHeaders().split(/\r?\n/).forEach(function(N){var P=N.match(/^([^:]+):\s*(.*)/);if(P){var L=P[1].toLowerCase();"set-cookie"===L?(void 0===a.headers[L]&&(a.headers[L]=[]),a.headers[L].push(P[2])):void 0!==a.headers[L]?a.headers[L]+=", "+P[2]:a.headers[L]=P[2],a.rawHeaders.push(P[1],P[2])}}),a._charset="x-user-defined",!m.overrideMimeType){var T=a.rawHeaders["mime-type"];if(T){var B=T.match(/;\s*charset=([^;])(;|$)/);B&&(a._charset=B[1].toLowerCase())}a._charset||(a._charset="utf-8")}};e(l,o.Readable),l.prototype._read=function(){var y=this._resumeFetch;y&&(this._resumeFetch=null,y())},l.prototype._onXHRProgress=function(y){var s=this,v=s._xhr,x=null;switch(s._mode){case"text":if((x=v.responseText).length>s._pos){var a=x.substr(s._pos);if("x-user-defined"===s._charset){for(var b=F.alloc(a.length),A=0;A<a.length;A++)b[A]=255&a.charCodeAt(A);s.push(b)}else s.push(a,s._charset);s._pos=x.length}break;case"arraybuffer":if(v.readyState!==f.DONE||!v.response)break;x=v.response,s.push(F.from(new Uint8Array(x)));break;case"moz-chunked-arraybuffer":if(x=v.response,v.readyState!==f.LOADING||!x)break;s.push(F.from(new Uint8Array(x)));break;case"ms-stream":if(x=v.response,v.readyState!==f.LOADING)break;var T=new h.MSStreamReader;T.onprogress=function(){T.result.byteLength>s._pos&&(s.push(F.from(new Uint8Array(T.result.slice(s._pos)))),s._pos=T.result.byteLength)},T.onload=function(){y(!0),s.push(null)},T.readAsArrayBuffer(x)}s._xhr.readyState===f.DONE&&"ms-stream"!==s._mode&&(y(!0),s.push(null))}}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},J("buffer").Buffer)},{"./capability":104,_process:71,buffer:9,inherits:26,"readable-stream":121}],107:[function(J,ae,ce){arguments[4][88][0].apply(ce,arguments)},{dup:88}],108:[function(J,ae,ce){arguments[4][89][0].apply(ce,arguments)},{"./_stream_readable":110,"./_stream_writable":112,_process:71,dup:89,inherits:26}],109:[function(J,ae,ce){arguments[4][90][0].apply(ce,arguments)},{"./_stream_transform":111,dup:90,inherits:26}],110:[function(J,ae,ce){arguments[4][91][0].apply(ce,arguments)},{"../errors":107,"./_stream_duplex":108,"./internal/streams/async_iterator":113,"./internal/streams/buffer_list":114,"./internal/streams/destroy":115,"./internal/streams/from":117,"./internal/streams/state":119,"./internal/streams/stream":120,_process:71,buffer:9,dup:91,events:15,inherits:26,"string_decoder/":122,util:4}],111:[function(J,ae,ce){arguments[4][92][0].apply(ce,arguments)},{"../errors":107,"./_stream_duplex":108,dup:92,inherits:26}],112:[function(J,ae,ce){arguments[4][93][0].apply(ce,arguments)},{"../errors":107,"./_stream_duplex":108,"./internal/streams/destroy":115,"./internal/streams/state":119,"./internal/streams/stream":120,_process:71,buffer:9,dup:93,inherits:26,"util-deprecate":126}],113:[function(J,ae,ce){arguments[4][94][0].apply(ce,arguments)},{"./end-of-stream":116,_process:71,dup:94}],114:[function(J,ae,ce){arguments[4][95][0].apply(ce,arguments)},{buffer:9,dup:95,util:4}],115:[function(J,ae,ce){arguments[4][96][0].apply(ce,arguments)},{_process:71,dup:96}],116:[function(J,ae,ce){arguments[4][97][0].apply(ce,arguments)},{"../../../errors":107,dup:97}],117:[function(J,ae,ce){arguments[4][98][0].apply(ce,arguments)},{dup:98}],118:[function(J,ae,ce){arguments[4][99][0].apply(ce,arguments)},{"../../../errors":107,"./end-of-stream":116,dup:99}],119:[function(J,ae,ce){arguments[4][100][0].apply(ce,arguments)},{"../../../errors":107,dup:100}],120:[function(J,ae,ce){arguments[4][101][0].apply(ce,arguments)},{dup:101,events:15}],121:[function(J,ae,ce){(ce=ae.exports=J("./lib/_stream_readable.js")).Stream=ce,ce.Readable=ce,ce.Writable=J("./lib/_stream_writable.js"),ce.Duplex=J("./lib/_stream_duplex.js"),ce.Transform=J("./lib/_stream_transform.js"),ce.PassThrough=J("./lib/_stream_passthrough.js"),ce.finished=J("./lib/internal/streams/end-of-stream.js"),ce.pipeline=J("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":108,"./lib/_stream_passthrough.js":109,"./lib/_stream_readable.js":110,"./lib/_stream_transform.js":111,"./lib/_stream_writable.js":112,"./lib/internal/streams/end-of-stream.js":116,"./lib/internal/streams/pipeline.js":118}],122:[function(J,ae,ce){arguments[4][102][0].apply(ce,arguments)},{dup:102,"safe-buffer":86}],123:[function(J,ae,ce){(function(q,h){(function(){var F=J("process/browser.js").nextTick,m=Function.prototype.apply,e=Array.prototype.slice,o={},f=0;function l(y,s){this._id=y,this._clearFn=s}ce.setTimeout=function(){return new l(m.call(setTimeout,window,arguments),clearTimeout)},ce.setInterval=function(){return new l(m.call(setInterval,window,arguments),clearInterval)},ce.clearTimeout=ce.clearInterval=function(y){y.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},ce.enroll=function(y,s){clearTimeout(y._idleTimeoutId),y._idleTimeout=s},ce.unenroll=function(y){clearTimeout(y._idleTimeoutId),y._idleTimeout=-1},ce._unrefActive=ce.active=function(y){clearTimeout(y._idleTimeoutId);var s=y._idleTimeout;s>=0&&(y._idleTimeoutId=setTimeout(function(){y._onTimeout&&y._onTimeout()},s))},ce.setImmediate="function"==typeof q?q:function(y){var s=f++,v=!(arguments.length<2)&&e.call(arguments,1);return o[s]=!0,F(function(){o[s]&&(v?y.apply(null,v):y.call(null),ce.clearImmediate(s))}),s},ce.clearImmediate="function"==typeof h?h:function(y){delete o[y]}}).call(this)}).call(this,J("timers").setImmediate,J("timers").clearImmediate)},{"process/browser.js":71,timers:123}],124:[function(J,ae,ce){"use strict";var q=J("punycode"),h=J("./util");function F(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}ce.parse=B,ce.resolve=function(N,P){return B(N,!1,!0).resolve(P)},ce.resolveObject=function(N,P){return N?B(N,!1,!0).resolveObject(P):P},ce.format=function(N){return h.isString(N)&&(N=B(N)),N instanceof F?N.format():F.prototype.format.call(N)},ce.Url=F;var m=/^([a-z0-9.+-]+:)/i,e=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(f),y=["%","/","?",";","#"].concat(l),s=["/","?","#"],v=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,a={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=J("querystring");function B(N,P,L){if(N&&h.isObject(N)&&N instanceof F)return N;var Q=new F;return Q.parse(N,P,L),Q}F.prototype.parse=function(N,P,L){if(!h.isString(N))throw new TypeError("Parameter 'url' must be a string, not "+typeof N);var Q=N.indexOf("?"),j=-1!==Q&&Q<N.indexOf("#")?"?":"#",V=N.split(j);V[0]=V[0].replace(/\\/g,"/");var W=N=V.join(j);if(W=W.trim(),!L&&1===N.split("#").length){var R=o.exec(W);if(R)return this.path=W,this.href=W,this.pathname=R[1],R[2]?(this.search=R[2],this.query=P?T.parse(this.search.substr(1)):this.search.substr(1)):P&&(this.search="",this.query={}),this}var Z=m.exec(W);if(Z){var ee=(Z=Z[0]).toLowerCase();this.protocol=ee,W=W.substr(Z.length)}if(L||Z||W.match(/^\/\/[^@\/]+@[^@\/]+/)){var le="//"===W.substr(0,2);!le||Z&&b[Z]||(W=W.substr(2),this.slashes=!0)}if(!b[Z]&&(le||Z&&!A[Z])){for(var te,oe,ie=-1,pe=0;pe<s.length;pe++)-1!==(we=W.indexOf(s[pe]))&&(-1===ie||we<ie)&&(ie=we);for(-1!==(oe=-1===ie?W.lastIndexOf("@"):W.lastIndexOf("@",ie))&&(te=W.slice(0,oe),W=W.slice(oe+1),this.auth=decodeURIComponent(te)),ie=-1,pe=0;pe<y.length;pe++){var we;-1!==(we=W.indexOf(y[pe]))&&(-1===ie||we<ie)&&(ie=we)}-1===ie&&(ie=W.length),this.host=W.slice(0,ie),W=W.slice(ie),this.parseHost(),this.hostname=this.hostname||"";var Te="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Te)for(var Fe=this.hostname.split(/\./),ke=(pe=0,Fe.length);pe<ke;pe++){var de=Fe[pe];if(de&&!de.match(v)){for(var Le="",Me=0,Ze=de.length;Me<Ze;Me++)de.charCodeAt(Me)>127?Le+="x":Le+=de[Me];if(!Le.match(v)){var H=Fe.slice(0,pe),z=Fe.slice(pe+1),ne=de.match(x);ne&&(H.push(ne[1]),z.unshift(ne[2])),z.length&&(W="/"+z.join(".")+W),this.hostname=H.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),Te||(this.hostname=q.toASCII(this.hostname));var ge=this.port?":"+this.port:"",xe=this.hostname||"";this.host=xe+ge,this.href+=this.host,Te&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==W[0]&&(W="/"+W))}if(!a[ee])for(pe=0,ke=l.length;pe<ke;pe++){var Re=l[pe];if(-1!==W.indexOf(Re)){var He=encodeURIComponent(Re);He===Re&&(He=escape(Re)),W=W.split(Re).join(He)}}var We=W.indexOf("#");-1!==We&&(this.hash=W.substr(We),W=W.slice(0,We));var Ke=W.indexOf("?");if(-1!==Ke?(this.search=W.substr(Ke),this.query=W.substr(Ke+1),P&&(this.query=T.parse(this.query)),W=W.slice(0,Ke)):P&&(this.search="",this.query={}),W&&(this.pathname=W),A[ee]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){ge=this.pathname||"";var mt=this.search||"";this.path=ge+mt}return this.href=this.format(),this},F.prototype.format=function(){var N=this.auth||"";N&&(N=(N=encodeURIComponent(N)).replace(/%3A/i,":"),N+="@");var P=this.protocol||"",L=this.pathname||"",Q=this.hash||"",j=!1,V="";this.host?j=N+this.host:this.hostname&&(j=N+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(j+=":"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(V=T.stringify(this.query));var W=this.search||V&&"?"+V||"";return P&&":"!==P.substr(-1)&&(P+=":"),this.slashes||(!P||A[P])&&!1!==j?(j="//"+(j||""),L&&"/"!==L.charAt(0)&&(L="/"+L)):j||(j=""),Q&&"#"!==Q.charAt(0)&&(Q="#"+Q),W&&"?"!==W.charAt(0)&&(W="?"+W),P+j+(L=L.replace(/[?#]/g,function(R){return encodeURIComponent(R)}))+(W=W.replace("#","%23"))+Q},F.prototype.resolve=function(N){return this.resolveObject(B(N,!1,!0)).format()},F.prototype.resolveObject=function(N){if(h.isString(N)){var P=new F;P.parse(N,!1,!0),N=P}for(var L=new F,Q=Object.keys(this),j=0;j<Q.length;j++){var V=Q[j];L[V]=this[V]}if(L.hash=N.hash,""===N.href)return L.href=L.format(),L;if(N.slashes&&!N.protocol){for(var W=Object.keys(N),R=0;R<W.length;R++){var Z=W[R];"protocol"!==Z&&(L[Z]=N[Z])}return A[L.protocol]&&L.hostname&&!L.pathname&&(L.path=L.pathname="/"),L.href=L.format(),L}if(N.protocol&&N.protocol!==L.protocol){if(!A[N.protocol]){for(var ee=Object.keys(N),le=0;le<ee.length;le++){var te=ee[le];L[te]=N[te]}return L.href=L.format(),L}if(L.protocol=N.protocol,N.host||b[N.protocol])L.pathname=N.pathname;else{for(var oe=(N.pathname||"").split("/");oe.length&&!(N.host=oe.shift()););N.host||(N.host=""),N.hostname||(N.hostname=""),""!==oe[0]&&oe.unshift(""),oe.length<2&&oe.unshift(""),L.pathname=oe.join("/")}if(L.search=N.search,L.query=N.query,L.host=N.host||"",L.auth=N.auth,L.hostname=N.hostname||N.host,L.port=N.port,L.pathname||L.search){var ie=L.pathname||"",pe=L.search||"";L.path=ie+pe}return L.slashes=L.slashes||N.slashes,L.href=L.format(),L}var we=L.pathname&&"/"===L.pathname.charAt(0),Te=N.host||N.pathname&&"/"===N.pathname.charAt(0),Fe=Te||we||L.host&&N.pathname,ke=Fe,de=L.pathname&&L.pathname.split("/")||[],Le=(oe=N.pathname&&N.pathname.split("/")||[],L.protocol&&!A[L.protocol]);if(Le&&(L.hostname="",L.port=null,L.host&&(""===de[0]?de[0]=L.host:de.unshift(L.host)),L.host="",N.protocol&&(N.hostname=null,N.port=null,N.host&&(""===oe[0]?oe[0]=N.host:oe.unshift(N.host)),N.host=null),Fe=Fe&&(""===oe[0]||""===de[0])),Te)L.host=N.host||""===N.host?N.host:L.host,L.hostname=N.hostname||""===N.hostname?N.hostname:L.hostname,L.search=N.search,L.query=N.query,de=oe;else if(oe.length)de||(de=[]),de.pop(),de=de.concat(oe),L.search=N.search,L.query=N.query;else if(!h.isNullOrUndefined(N.search))return Le&&(L.hostname=L.host=de.shift(),(ne=!!(L.host&&L.host.indexOf("@")>0)&&L.host.split("@"))&&(L.auth=ne.shift(),L.host=L.hostname=ne.shift())),L.search=N.search,L.query=N.query,h.isNull(L.pathname)&&h.isNull(L.search)||(L.path=(L.pathname?L.pathname:"")+(L.search?L.search:"")),L.href=L.format(),L;if(!de.length)return L.pathname=null,L.search?L.path="/"+L.search:L.path=null,L.href=L.format(),L;for(var Me=de.slice(-1)[0],Ze=(L.host||N.host||de.length>1)&&("."===Me||".."===Me)||""===Me,H=0,z=de.length;z>=0;z--)"."===(Me=de[z])?de.splice(z,1):".."===Me?(de.splice(z,1),H++):H&&(de.splice(z,1),H--);if(!Fe&&!ke)for(;H--;H)de.unshift("..");!Fe||""===de[0]||de[0]&&"/"===de[0].charAt(0)||de.unshift(""),Ze&&"/"!==de.join("/").substr(-1)&&de.push("");var ne,ge=""===de[0]||de[0]&&"/"===de[0].charAt(0);return Le&&(L.hostname=L.host=ge?"":de.length?de.shift():"",(ne=!!(L.host&&L.host.indexOf("@")>0)&&L.host.split("@"))&&(L.auth=ne.shift(),L.host=L.hostname=ne.shift())),(Fe=Fe||L.host&&de.length)&&!ge&&de.unshift(""),de.length?L.pathname=de.join("/"):(L.pathname=null,L.path=null),h.isNull(L.pathname)&&h.isNull(L.search)||(L.path=(L.pathname?L.pathname:"")+(L.search?L.search:"")),L.auth=N.auth||L.auth,L.slashes=L.slashes||N.slashes,L.href=L.format(),L},F.prototype.parseHost=function(){var N=this.host,P=e.exec(N);P&&(":"!==(P=P[0])&&(this.port=P.substr(1)),N=N.substr(0,N.length-P.length)),N&&(this.hostname=N)}},{"./util":125,punycode:5,querystring:74}],125:[function(J,ae,ce){"use strict";ae.exports={isString:function(q){return"string"==typeof q},isObject:function(q){return"object"==typeof q&&null!==q},isNull:function(q){return null===q},isNullOrUndefined:function(q){return null==q}}},{}],126:[function(J,ae,ce){(function(q){(function(){function h(F){try{if(!q.localStorage)return!1}catch(e){return!1}var m=q.localStorage[F];return null!=m&&"true"===String(m).toLowerCase()}ae.exports=function(F,m){if(h("noDeprecation"))return F;var e=!1;return function(){if(!e){if(h("throwDeprecation"))throw new Error(m);h("traceDeprecation")?console.trace(m):console.warn(m),e=!0}return F.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],127:[function(J,ae,ce){(function(q){(function(){"use strict";var h=J("for-each"),F=J("available-typed-arrays"),m=J("call-bind/callBound"),e=m("Object.prototype.toString"),o=J("has-tostringtag/shams")(),f="undefined"==typeof globalThis?q:globalThis,l=F(),y=m("String.prototype.slice"),s={},v=J("es-abstract/helpers/getOwnPropertyDescriptor"),x=Object.getPrototypeOf;o&&v&&x&&h(l,function(b){if("function"==typeof f[b]){var A=new f[b];if(Symbol.toStringTag in A){var T=x(A),B=v(T,Symbol.toStringTag);if(!B){var N=x(T);B=v(N,Symbol.toStringTag)}s[b]=B.get}}});var a=J("is-typed-array");ae.exports=function(b){return!!a(b)&&(o&&Symbol.toStringTag in b?(A=b,T=!1,h(s,function(B,N){if(!T)try{var P=B.call(A);P===N&&(T=P)}catch(L){}}),T):y(e(b),8,-1));var A,T}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":1,"call-bind/callBound":11,"es-abstract/helpers/getOwnPropertyDescriptor":14,"for-each":16,"has-tostringtag/shams":22,"is-typed-array":30}],128:[function(J,ae,ce){ae.exports=function(){for(var h={},F=0;F<arguments.length;F++){var m=arguments[F];for(var e in m)q.call(m,e)&&(h[e]=m[e])}return h};var q=Object.prototype.hasOwnProperty},{}],129:[function(J,ae,ce){var q=J("./parser"),h=J("./utils"),F=h;function m(o,f){this.name="NonSupportedSparqlFeatureError",this.feature=o,this.message=f||"SPARQL feature "+o+" non supported"}function e(o){this.name=ParserError,this.message=o||"Error parsing SPARQL query"}m.prototype=new Error,m.constructor=m,e.prototype=new Error,e.constructor=e,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(o){return q.parse(o)},AbstractQueryTree.prototype.parseExecutableUnit=function(o){if("select"===o.kind)return this.parseSelect(o);if("ask"===o.kind)return this.parseSelect(o);if("modify"===o.kind)return this.parseSelect(o);if("construct"===o.kind)return this.parseSelect(o);if("insertdata"===o.kind)return this.parseInsertData(o);if("deletedata"===o.kind)return this.parseInsertData(o);if("load"===o.kind||"clear"===o.kind||"drop"===o.kind||"create"===o.kind)return o;throw new Error("unknown executable unit: "+o.kind)},AbstractQueryTree.prototype.parseSelect=function(o){return null==o?(console.log("error parsing query"),null):(o.pattern=this.build(o.pattern,{freshCounter:0}),o)},AbstractQueryTree.prototype.parseInsertData=function(o){return null==o?(console.log("error parsing query"),null):o},AbstractQueryTree.prototype.build=function(o,f){if("groupgraphpattern"===o.token)return this._buildGroupGraphPattern(o,f);if("basicgraphpattern"===o.token){var l={kind:"BGP",value:o.triplesContext};return AbstractQueryTree.translatePathExpressionsInBGP(l,f)}if("graphunionpattern"===o.token)return{kind:"UNION",value:[this.build(o.value[0],f),this.build(o.value[1],f)]};if("graphgraphpattern"===o.token)return{kind:"GRAPH",value:this.build(o.value,f),graph:o.graph};throw null!=o.token?new m(o.token,"Non implemented SPARQL graph pattern: '"+o.token+"'"):new e("Error parsing graph pattern: '"+JSON.stringify(o)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(o,f){for(var l,y,s,v=[],x=0;x<o.value.length;x++)if(o.value[x].predicate&&"path"===o.value[x].predicate.token){l=o.value[x],y=o.value.slice(x+1);var a=AbstractQueryTree.translatePathExpression(l,f),b=null;if("BGP"!==a.kind){if("ZERO_OR_MORE_PATH"===a.kind||"ONE_OR_MORE_PATH"===a.kind){if(s=v.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:v},rvalue:a}:a,"ZERO_OR_MORE_PATH"===a.kind)if("var"===a.y.token&&0===a.y.value.indexOf("fresh:")&&"var"===a.x.token&&0===a.x.value.indexOf("fresh:"))for(var A=0;A<o.value.length;A++)o.value[A].object&&"var"===o.value[A].object.token&&o.value[A].object.value===a.x.value&&((b=F.clone(o.value[A],!0)).object=a.y);else if("var"===a.y.token&&0===a.y.value.indexOf("fresh:"))for(A=0;A<o.value.length;A++)o.value[A].subject&&"var"===o.value[A].subject.token&&o.value[A].subject.value===a.y.value&&((b=F.clone(o.value[A],!0)).subject=a.x);if(y.length>0){var T=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:y},f);return null!=b?{kind:"UNION",value:[{kind:"JOIN",lvalue:s,rvalue:T},{kind:"BGP",value:v.concat([b]).concat(y)}]}:{kind:"JOIN",lvalue:s,rvalue:T}}return s}return a}v=v.concat(a.value)}else v.push(o.value[x]);return o.value=v,o},AbstractQueryTree.translatePathExpression=function(o,f){if("element"===o.predicate.kind)return"+"===o.predicate.modifier?(o.predicate.modifier=null,{kind:"ONE_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(o,f),x:o.subject,y:o.object}):"*"===o.predicate.modifier?(o.predicate.modifier=null,{kind:"ZERO_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(o,f),x:o.subject,y:o.object}):(o.predicate=o.predicate.value,{kind:"BGP",value:[o]});if("sequence"===o.predicate.kind){for(var l,y,s=o.subject,v=o.object,x=o.graph,a=[],b=0;b<o.predicate.value.length;b++)b!=o.predicate.value.length-1?(l={token:"var",value:"fresh:"+f.freshCounter},f.freshCounter++):l=v,y={subject:s,predicate:o.predicate.value[b],object:l},null!=x&&(y.graph=F.clone(x,!0)),a.push(y),b!=o.predicate.value.length-1&&(s=F.clone(l,!0));var A={kind:"BGP",value:a};return AbstractQueryTree.translatePathExpressionsInBGP(A,f)}throw new m("Non supported path expression "+o.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(o,f){for(var l=o.filters||[],y=o.binds||[],s={kind:"EMPTY_PATTERN"},v=0;v<o.patterns.length;v++){var x=o.patterns[v];if("optionalgraphpattern"===x.token)s="FILTER"===(a=this.build(x.value,f)).kind?{kind:"LEFT_JOIN",lvalue:s,rvalue:a.value,filter:a.filter}:{kind:"LEFT_JOIN",lvalue:s,rvalue:a,filter:!0};else{var a=this.build(x,f);s="EMPTY_PATTERN"==s.kind?a:{kind:"JOIN",lvalue:s,rvalue:a}}}if(s.binds=y,0!=l.length){if("EMPTY_PATTERN"===s.kind)return{kind:"FILTER",filter:l,value:s};if("LEFT_JOIN"===s.kind&&!0===s.filter)return{kind:"FILTER",filter:l,value:s};if("LEFT_JOIN"===s.kind)return{kind:"FILTER",filter:l,value:s};if("JOIN"===s.kind)return{kind:"FILTER",filter:l,value:s};if("UNION"===s.kind)return{kind:"FILTER",filter:l,value:s};if("GRAPH"===s.kind)return{kind:"FILTER",filter:l,value:s};if("BGP"===s.kind)return{kind:"FILTER",filter:l,value:s};throw new Error("Unknow kind of algebra expression: "+s.kind)}return s},AbstractQueryTree.prototype.collectBasicTriples=function(o,f){if(null==f&&(f=[]),"select"===o.kind)f=this.collectBasicTriples(o.pattern,f);else if("BGP"===o.kind)f=f.concat(o.value);else if("ZERO_OR_MORE_PATH"===o.kind)f=this.collectBasicTriples(o.path);else if("UNION"===o.kind)f=this.collectBasicTriples(o.value[0],f),f=this.collectBasicTriples(o.value[1],f);else if("GRAPH"===o.kind)f=this.collectBasicTriples(o.value,f);else if("LEFT_JOIN"===o.kind||"JOIN"===o.kind)f=this.collectBasicTriples(o.lvalue,f),f=this.collectBasicTriples(o.rvalue,f);else if("FILTER"===o.kind)f=this.collectBasicTriples(o.value,f);else if("construct"===o.kind)f=this.collectBasicTriples(o.pattern,f);else if("EMPTY_PATTERN"!==o.kind)throw"Unknown pattern: "+o.kind;return f},AbstractQueryTree.prototype.bind=function(o,f){if(null!=o.graph&&o.graph.token&&"var"===o.graph.token&&null!=f[o.graph.value]&&(o.graph=f[o.graph.value]),null!=o.filter){for(var l=[],y=0;y<o.filter.length;y++)o.filter[y].value=this._bindFilter(o.filter[y].value,f),l.push(o.filter[y]);o.filter=l}if("select"===o.kind)o.pattern=this.bind(o.pattern,f);else if("BGP"===o.kind)o.value=this._bindTripleContext(o.value,f);else if("ZERO_OR_MORE_PATH"===o.kind)o.path=this._bindTripleContext(o.path,f),o.x&&"var"===o.x.token&&null!=f[o.x.value]&&(o.x=f[o.x.value]),o.y&&"var"===o.y.token&&null!=f[o.y.value]&&(o.y=f[o.y.value]);else if("UNION"===o.kind)o.value[0]=this.bind(o.value[0],f),o.value[1]=this.bind(o.value[1],f);else if("GRAPH"===o.kind)o.value=this.bind(o.value,f);else if("LEFT_JOIN"===o.kind||"JOIN"===o.kind)o.lvalue=this.bind(o.lvalue,f),o.rvalue=this.bind(o.rvalue,f);else if("FILTER"===o.kind){var s=this;o.value=this.bind(o.value,f),o.filter=o.filter.map(function(v){return{token:"filter",value:s._bindFilter(v.value,f)}})}else if("EMPTY_PATTERN"!==o.kind)throw"Unknown pattern: "+o.kind;return o},AbstractQueryTree.prototype._bindTripleContext=function(o,f){for(var l=0;l<o.length;l++)for(var y in delete o[l].graph,delete o[l].variables,o[l]){var s=o[l][y];"var"===s.token&&null!=f[s.value]&&(o[l][y]=f[s.value])}return o},AbstractQueryTree.prototype._bindFilter=function(o,f){if(null!=o.expressionType){var l=o.expressionType;if("relationalexpression"==l)o.op1=this._bindFilter(o.op1,f),o.op2=this._bindFilter(o.op2,f);else if("conditionalor"==l||"conditionaland"==l)for(var y=0;y<o.operands.length;y++)o.operands[y]=this._bindFilter(o.operands[y],f);else if("additiveexpression"==l)for(o.summand=this._bindFilter(o.summand,f),y=0;y<o.summands.length;y++)o.summands[y].expression=this._bindFilter(o.summands[y].expression,f);else if("builtincall"==l)for(y=0;y<o.args.length;y++)o.args[y]=this._bindFilter(o.args[y],f);else if("multiplicativeexpression"==l)for(o.factor=this._bindFilter(o.factor,f),y=0;y<o.factors.length;y++)o.factors[y].expression=this._bindFilter(o.factors[y].expression,f);else if("unaryexpression"==l)o.expression=this._bindFilter(o.expression,f);else if("irireforfunction"==l)for(y=0;y<o.factors.args;y++)o.args[y]=this._bindFilter(o.args[y],f);else if("atomic"==l&&"var"==o.primaryexpression&&null!=f[o.value.value]){var s=f[o.value.value];"uri"===s.token?o.primaryexpression="iri":o.primaryexpression="literal",o.value=s}}return o},AbstractQueryTree.prototype.replace=function(o,f,l,y){if(null!=o.graph&&o.graph.token&&o.graph.token===f.token&&o.graph.value==f.value&&(o.graph=F.clone(l,!0)),null!=o.filter){for(var s=[],v=0;v<o.filter.length;v++)o.filter[v].value=this._replaceFilter(o.filter[v].value,f,l,y),s.push(o.filter[v]);o.filter=s}if("select"===o.kind)o.pattern=this.replace(o.pattern,f,l,y);else if("BGP"===o.kind)o.value=this._replaceTripleContext(o.value,f,l,y);else if("ZERO_OR_MORE_PATH"===o.kind)o.path=this._replaceTripleContext(o.path,f,l,y),o.x&&o.x.token===f.token&&o.value===f.value&&(o.x=F.clone(l,!0)),o.y&&o.y.token===f.token&&o.value===f.value&&(o.y=F.clone(l,!0));else if("UNION"===o.kind)o.value[0]=this.replace(o.value[0],f,l,y),o.value[1]=this.replace(o.value[1],f,l,y);else if("GRAPH"===o.kind)o.value=this.replace(o.value,f,l);else if("LEFT_JOIN"===o.kind||"JOIN"===o.kind)o.lvalue=this.replace(o.lvalue,f,l,y),o.rvalue=this.replace(o.rvalue,f,l,y);else if("FILTER"===o.kind)o.value=this._replaceFilter(o.value,f,l,y);else if("EMPTY_PATTERN"!==o.kind)throw"Unknown pattern: "+o.kind;return o},AbstractQueryTree.prototype._replaceTripleContext=function(o,f,l,y){for(var s=0;s<o.length;s++)for(var v in o[s]){var x=o[s][v];"var"===x.token&&"var"===f.token&&x.value===f.value||"blank"===x.token&&"blank"===f.token&&x.value===f.value?o[s][v]=l:"literal"!==x.token&&"uri"!==x.token||"literal"!==f.token&&"uri"!==f.token||x.token!==f.token||h.lexicalFormTerm(x,y)[x.token]!==h.lexicalFormTerm(f,y)[x.token]||(o[s][v]=l)}return o},AbstractQueryTree.prototype._replaceFilter=function(o,f,l,y){if(null!=o.expressionType){var s=o.expressionType;if("relationalexpression"==s)o.op1=this._replaceFilter(o.op1,f,l,y),o.op2=this._replaceFilter(o.op2,f,l,y);else if("conditionalor"==s||"conditionaland"==s)for(var v=0;v<o.operands.length;v++)o.operands[v]=this._replaceFilter(o.operands[v],f,l,y);else if("additiveexpression"==s)for(o.summand=this._replaceFilter(o.summand,f,l,y),v=0;v<o.summands.length;v++)o.summands[v].expression=this._replaceFilter(o.summands[v].expression,f,l,y);else if("builtincall"==s)for(v=0;v<o.args.length;v++)o.args[v]=this._replaceFilter(o.args[v],f,l,y);else if("multiplicativeexpression"==s)for(o.factor=this._replaceFilter(o.factor,f,l,y),v=0;v<o.factors.length;v++)o.factors[v].expression=this._replaceFilter(o.factors[v].expression,f,l,y);else if("unaryexpression"==s)o.expression=this._replaceFilter(o.expression,f,l,y);else if("irireforfunction"==s)for(v=0;v<o.factors.args;v++)o.args[v]=this._replaceFilter(o.args[v],f,l,y);else if("atomic"==s){var x=null;(o.primaryexpression==f.token&&o.value==f.value||"iri"==o.primaryexpression&&"uri"==f.token&&o.value==f.value)&&(x=l.value),null!=x&&("uri"===l.token?o.primaryexpression="iri":o.primaryexpression=l.token,o.value=x)}}return o},AbstractQueryTree.prototype.treeWithUnion=function(o){if(null==o||null==o.kind)return!1;if("select"===o.kind)return this.treeWithUnion(o.pattern);if("BGP"===o.kind)return this.treeWithUnion(o.value);if("ZERO_OR_MORE_PATH"===o.kind)return!1;if("UNION"===o.kind){if(null==o.value[0].value||null==o.value[0].value.variables||null==o.value[1].value||null==o.value[1].value.variables)return!0;if(o.value[0].variables.join("/")===o.values[1].variables.join("/"))return!!this.treeWithUnion(o.value[0])||this.treeWithUnion(o.value[1])}else{if("GRAPH"===o.kind)return!1;if("LEFT_JOIN"!==o.kind&&"JOIN"!==o.kind)return"FILTER"!==o.kind&&(o.kind,!1);if(this.treeWithUnion(o.lvalue))return!0;this.treeWithUnion(o.rvalue)}},ae.exports={AbstractQueryTree,NonSupportedSparqlFeatureError:m,SparqlParserError:e}},{"./parser":135,"./utils":147}],130:[function(J,ae,ce){"use strict";var q=J("./utils"),h=q,F=q.nextTick,m=function(o,f){if(0!=arguments.length){this.order=o,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var l=this;this._diskWrite(this.root,function(y){l.root=y,l._updateRootNode(l.root,function(s){l.comparator=function(v,x){return v<x?-1:v>x?1:0},l.merger=null,null!=f&&f(l)})})}};m.prototype._allocateNode=function(){return new e},m.prototype._diskWrite=function(o,f){F(function(){f(o)})},m.prototype._diskRead=function(o,f){F(function(){f(o)})},m.prototype._diskDelete=function(o,f){F(function(){f()})},m.prototype._updateRootNode=function(o,f){f(o)},m.prototype.search=function(o,f,l){var y=this.root;this.__search(this,o,y,f,l)},m.prototype.__search=function(o,f,l,y,s){for(var v=0;v<l.numberActives&&1===o.comparator(f,l.keys[v].key);)v++;v<l.numberActives&&0===o.comparator(l.keys[v].key,f)?y(null!=s&&1==s||l.keys[v].data):!0===l.isLeaf?y(null):o._diskRead(l.children[v],function(x){o.__search(o,f,x,y,s)})},m.prototype.walk=function(o,f){this.__walk(this,this.root,o,f)},m.prototype.__walk=function(o,f,l,y){var s=f.numberActives,v=0;if(f.isLeaf){for(v=0;v<f.numberActives;v++)l(f.keys[v]);return y()}h.whilst(function(){return v<s},function(x){o._diskRead(f.children[v],function(a){o.__walk(o,a,l,function(){o._diskRead(f.keys[v],function(b){l(b),v++,x()})})})},function(){o._diskRead(f.children[s],function(x){o.__walk(o,x,l,function(){y()})})})},m.prototype.walkNodes=function(o){this.__walkNodes(this,root,o,function(){})},m.prototype.__walkNodes=function(o,f,l,y){if(f.isLeaf)return l(f),y();l(f);var s=f.numberActives,v=0;h.whilst(function(){return v<s},function(x){o._diskRead(f.children[v],function(a){o.__walkNodes(o,a,l,function(){v++,x()})})},function(){o._diskRead(f.children[s],function(x){o.__walkNodes(o,x,l,function(){})})})},m.prototype._splitChild=function(o,f,l,y){var s=this._allocateNode();s.isLeaf=l.isLeaf,s.level=l.level,s.numberActives=this.order-1;var v=l.keys[this.order-1];l.keys[this.order-1]=null;for(var x=0;x<this.order-1;x++)s.keys[x]=l.keys[x+this.order],l.keys[x+this.order]=null,l.isLeaf||(s.children[x]=l.children[x+this.order],l.children[x+this.order]=null);for(l.isLeaf||(s.children[x]=l.children[x+this.order],l.children[x+this.order]=null),l.numberActives=this.order-1,x=o.numberActives+1;x>f+1;x--)o.children[x]=o.children[x-1];for(o.children[f+1]=s,x=o.numberActives;x>f;x--)o.keys[x]=o.keys[x-1];o.keys[f]=v,o.numberActives++;var a=this;this._diskWrite(s,function(b){a._diskWrite(o,function(A){A.children[f+1]=b,a._diskWrite(l,function(T){return y(A)})})})},m.prototype.insert=function(o,f,l){if(this.root.numberActives===2*this.order-1){var y=this._allocateNode();y.isLeaf=!1,y.level=this.root.level+1,y.numberActives=0,y.children[0]=this.root;var s=this;this._splitChild(y,0,this.root,function(v){y=v,s.root=y,s._updateRootNode(y,function(x){s._insertNonFull(x,o,f,l)})})}else this._insertNonFull(this.root,o,f,l)},m.prototype._insertNonFull=function(o,f,l,y){var s=o.numberActives-1;this.__insertNonFull(this,o,s,f,l,y)},m.prototype.__insertNonFull=function(o,f,l,y,s,v){if(f.isLeaf){for(;l>=0&&-1===o.comparator(y,f.keys[l].key);)f.keys[l+1]=f.keys[l],l--;l>=0&&0===o.comparator(y,f.keys[l].key)?f.keys[l]={key:y,data:s}:(f.keys[l+1]={key:y,data:s},f.numberActives++),o._diskWrite(f,function(a){return v(a)})}else{for(;l>=0&&-1===o.comparator(y,f.keys[l].key);)l--;l++;var x=o;o._diskRead(f.children[l],function(a){a.numberActives===2*x.order-1?x._splitChild(f,l,a,function(){1===x.comparator(y,f.keys[l].key)&&l++,x._diskRead(f.children[l],function(b){l=b.numberActives-1,x.__insertNonFull(o,b,l,y,s,v)})}):x._diskRead(f.children[l],function(b){l=b.numberActives-1,x.__insertNonFull(o,b,l,y,s,v)})})}},m.prototype.delete=function(o,f){var l=this.root;m.prototype.__deleteSearchNode(this,o,l,f)},m.prototype.__deleteSearchNode=function(o,f,l,y){var s=0;if(0===l.numberActives)return y(!1);for(;s<l.numberActives&&1===o.comparator(f,l.keys[s].key);)s++;var v=s;if(s<l.numberActives&&0===o.comparator(f,l.keys[s].key))return o.__deleteNodeFound(o,v,f,l,y);if(!0===l.isLeaf)return y(!1);var x=l;o._diskRead(l.children[s],function(a){if(null===a)return y(!1);var b=!1,A=!1,T=null,B=null;v===x.numberActives?(A=!0,B=x.children[v-1],T=x.children[v-1]):0===v?(b=!0,T=x.children[1],B=x.children[1]):(B=x.children[v-1],T=x.children[v+1]),o._diskRead(B,function(N){o._diskRead(T,function(P){!0===A&&(P=null),!0===b&&(N=null),a.numberActives===o.order-1&&null!=x?null!=P&&P.numberActives>o.order-1?o._moveKey(x,s,-1,function(L){o.__deleteSearchNode(o,f,a,y)}):null!=N&&N.numberActives>o.order-1?o._moveKey(x,s,1,function(L){o.__deleteSearchNode(o,f,a,y)}):null!=N&&N.numberActives===o.order-1?o._mergeSiblings(x,s,-1,function(L){o.__deleteSearchNode(o,f,L,y)}):null!=P&&P.numberActives===o.order-1&&o._mergeSiblings(x,s,1,function(L){o.__deleteSearchNode(o,f,L,y)}):o.__deleteSearchNode(o,f,a,y)})})})},m.prototype.__deleteNodeFound=function(o,f,l,y,s){return y.isLeaf&&y.numberActives>o.order-1||y.isLeaf&&y===o.root?(o._deleteKeyFromNode(y,f,function(){s(!0)}),!0):(!1===y.isLeaf&&o._diskRead(y.children[f],function(v){v.numberActives>o.order-1?o._getMaxKeyPos(o,v,function(x){l=x.node.keys[x.index],y.keys[f]=l,o._diskWrite(y,function(a){a=v,l=l.key,o.__deleteSearchNode(o,l,a,s)})}):o._diskRead(y.children[f+1],function(x){x.numberActives>o.order-1?o._getMinKeyPos(o,x,function(a){l=a.node.keys[a.index],y.keys[f]=l,o._diskWrite(y,function(b){b=x,l=l.key,o.__deleteSearchNode(o,l,b,s)})}):v.numberActives===o.order-1&&x.numberActives===o.order-1&&o._mergeNodes(v,y.keys[f],x,function(a){y.children[f]=a;for(var b=++f;b<y.numberActives;b++)y.children[b]=y.children[b+1],y.keys[b-1]=y.keys[b];y.children[b]=null,y.keys[b-1]=null,y.numberActives--,0===y.numberActives&&o.root===y&&(o.root=a),o._diskWrite(y,function(A){o.__deleteSearchNode(o,l,a,s)})})})}),void(y.isLeaf&&y.numberActives>o.order-1&&o._deleteKeyFromNode(y,f,function(v){o.__deleteSearchNode(o,l,v,s)})))},m.prototype._moveKey=function(o,f,l,y){1===l&&f--;var s=this;s._diskRead(o.children[f],function(v){s._diskRead(o.children[f+1],function(x){if(-1==l){v.keys[v.numberActives]=o.keys[f],v.children[v.numberActives+1]=x.children[0],x.children[0]=null,v.numberActives++,o.keys[f]=x.keys[0];for(var a=1;a<x.numberActives;a++)x.keys[a-1]=x.keys[a],x.children[a-1]=x.children[a];x.children[x.numberActives-1]=x.children[x.numberActives],x.numberActives--}else{for(x.children[x.numberActives+1]=x.children[x.numberActives],a=x.numberActives;a>0;a--)x.children[a]=x.children[a-1],x.keys[a]=x.keys[a-1];x.keys[0]=null,x.children[0]=null,x.children[0]=v.children[v.numberActives],x.keys[0]=o.keys[f],x.numberActives++,v.children[v.numberActives]=null,o.keys[f]=v.keys[v.numberActives-1],v.keys[v.numberActives-1]=null,v.numberActives--}s._diskWrite(v,function(b){s._diskWrite(x,function(A){s._diskWrite(o,function(T){return y(T)})})})})})},m.prototype._mergeSiblings=function(o,f,l,y){var s,v,x,a;f===o.numberActives?(f--,x=o.children[o.numberActives-1],a=o.children[o.numberActives]):(x=o.children[f],a=o.children[f+1]);var b=this;b._diskRead(x,function(A){b._diskRead(a,function(T){var B=b._allocateNode();for(B.isLeaf=A.isLeaf,B.level=A.level,v=0;v<b.order-1;v++)B.keys[v]=A.keys[v],B.children[v]=A.children[v];for(B.keys[b.order-1]=o.keys[f],B.children[b.order-1]=A.children[b.order-1],v=0;v<b.order-1;v++)B.keys[v+b.order]=T.keys[v],B.children[v+b.order]=T.children[v];for(B.children[2*b.order-1]=T.children[b.order-1],o.children[f]=B,v=f;v<o.numberActives;v++)o.keys[v]=o.keys[v+1],o.children[v+1]=o.children[v+2];for(B.numberActives=A.numberActives+T.numberActives+1,o.numberActives--,s=o.numberActives;s<2*b.order-1;s++)o.keys[s]=null;0===o.numberActives&&b.root===o&&(b.root=B,B.level?B.isLeaf=!1:B.isLeaf=!0),b._diskWrite(B,function(N){b._diskWrite(o,function(P){b._diskDelete(A,function(){b._diskDelete(T,function(){if(b.root!==N)return y(N);b._updateRootNode(b.root,function(){return y(N)})})})})})})})},m.prototype._deleteKeyFromNode=function(o,f,l){var y,s=2*this.order-1;if(o.numberActives<s&&(s=o.numberActives),!1===o.isLeaf)return!1;for(o.keys[f],y=f;y<s-1;y++)o.keys[y]=o.keys[y+1];o.keys.pop(),o.numberActives--,this._diskWrite(o,function(v){return l(v)})},m.prototype._mergeNodes=function(o,f,l,y){var s,v;for((s=this._allocateNode()).isLeaf=!0,v=0;v<o.numberActives;v++)s.keys[v]=o.keys[v],s.children[v]=o.children[v];for(s.children[o.numberActives]=o.children[o.numberActives],s.keys[o.numberActives]=f,v=0;v<l.numberActives;v++)s.keys[v+o.numberActives+1]=l.keys[v],s.children[v+o.numberActives+1]=l.children[v];s.children[2*this.order-1]=l.children[l.numberActives],s.numberActives=o.numberActives+l.numberActives+1,s.isLeaf=o.isLeaf,s.level=o.level;var x=this;this._diskWrite(s,function(a){x._diskDelete(o,function(){x._diskDelete(l,function(){return y(a)})})})},m.prototype.audit=function(o){var f=[],l=[],y=this,s=function(x){for(var a=0;a<l.length;a++)if(0===y.comparator(l[a],x)){var b=" !!! duplicated key "+x;!0===o&&console.log(b),f.push(b)}},v=null;return y=this,this.walkNodes(function(x){!0===o&&(console.log("--- Node at "+x.level+" level"),console.log(" - leaf? "+x.isLeaf),console.log(" - num actives? "+x.numberActives),console.log(" - keys: "));for(var a=x.numberActives;a<x.keys.length;a++)null!=x.keys[a]&&!0===o&&(console.log(" * warning : redundant key data"),f.push(" * warning : redundant key data"));for(a=x.numberActives+1;a<x.children.length;a++)null!=x.children[a]&&!0===o&&(console.log(" * warning : redundant children data"),f.push(" * warning : redundant key data"));if(!1===x.isLeaf)for(a=0;a<x.numberActives;a++){var b=this._diskRead(x.children[a]).keys[this._diskRead(x.children[a]).numberActives-1].key,A=this._diskRead(x.children[a+1]).keys[0].key;if(!0===o&&console.log("   "+x.keys[a].key+"("+b+","+A+")"),-1===y.comparator(x.keys[a].key,b)){var T=" !!! value max left "+b+" > key "+x.keys[a].key;!0===o&&console.log(T),f.push(T)}1===y.comparator(x.keys[a].key,A)&&(T=" !!! value min right "+A+" < key "+x.keys[a].key,!0===o&&console.log(T),f.push(T)),s(x.keys[a].key),l.push(x.keys[a].key)}else for(null===v?v=x.level:v!=x.level&&(T=" !!! Leaf node with wrong level value",!0===o&&console.log(T),f.push(T)),a=0;a<x.numberActives;a++)!0===o&&console.log(" "+x.keys[a].key),s(x.keys[a].key),l.push(x.keys[a].key);x!=y.root&&(x.numberActives>2*y.order-1&&(!0===o&&(T=" !!!! MAX num keys restriction violated "),console.log(T),f.push(T)),x.numberActives<y.order-1&&(!0===o&&(T=" !!!! MIN num keys restriction violated "),console.log(T),f.push(T)))}),f},m.prototype._getMaxKeyPos=function(o,f,l){var y={};return null===f?l(null):!0===f.isLeaf?(y.node=f,y.index=f.numberActives-1,l(y)):(y.node=f,y.index=f.numberActives-1,void o._diskRead(f.children[f.numberActives],function(s){return o._getMaxKeyPos(o,s,l)}))},m.prototype._getMinKeyPos=function(o,f,l){var y={};if(null===f&&l(null),!0===f.isLeaf)return y.node=f,y.index=0,l(y);y.node=f,y.index=0,o._diskRead(f.children[0],function(s){return o._getMinKeyPos(o,s,l)})};var e=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};ae.exports={Tree:m,Node:e}},{"./utils":147}],131:[function(J,ae,ce){var q=J("./utils"),h=J("./utils"),F=(J("./quad_index").QuadIndex,J("./quad_index").Pattern),m=J("./rdf_model"),e=J("./abstract_query_tree").AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new e,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var o=0;o<this.indices.length;o++){var f=this.indices[o];this.indexMap[f]={},this.queriesIndexMap[f]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(o,f){this.updateInProgress[o].push(f)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(o){if(!0!==this.ongoingModification){var f=this;if(null!=this.updateInProgress){var l=f.updateInProgress;f.updateInProgress=null,this.sendNotification(Callbacks.deleted,l[Callbacks.deleted],function(){f.sendNotification(Callbacks.added,l[Callbacks.added],function(){f.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){f.dispatchQueries(function(){o(!0)})})})})}else o(!0)}else o(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(o,f,l){for(var y={},s=0;s<f.length;s++){var v=f[s];for(var x in this.indexMap){var a=this.indexMap[x],b=this.componentOrders[x];this._searchCallbacksInIndex(a,b,o,v,y),0!=this.pendingQueries.length&&(a=this.queriesIndexMap[x],this._searchQueriesInIndex(a,b,v))}}this.dispatchNotifications(y),null!=l&&l(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(o,f,l){for(var y=this.emptyNotificationsMap[o]||[],s=0;s<y.length;s++)y[s](o,f);l()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(o){for(var f in o){var l=this.callbacksMap[f],y=o[f][Callbacks.deleted];if(null!=y)try{l(Callbacks.deleted,y)}catch(v){}for(var s in o[f])if(s!=Callbacks.deleted)try{l(s,o[f][s])}catch(v){}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(o,f,l,y,s){for(var v=y[1],x=(y=y[0],0);x<f.length+1;x++){for(var a=o._||[],b=[],A=0;A<a.length;A++){var T=a[A];null!=this.callbacksMap[T]&&(s[T]=s[T]||{},s[T][l]=s[T][l]||[],s[T][l].push(y),b.push(T))}o._=b;var B=f[x];if(null==o[""+v[B]])break;o=o[""+v[B]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(o,f){var l=this.emptyNotificationsMap[o]||[];l.push(f),this.emptyNotificationsMap[o]=l},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(o,f){var l=this.emptyNotificationsMap[o];null!=l&&(l=q.reject(l,function(y){return y===f})),this.emptyNotificationsMap[o]=l},Callbacks.CallbacksBackend.prototype.subscribe=function(o,f,l,y,s,v){var x=this._tokenizeComponents(o,f,l,y),a={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,a);var b=this;this.engine.normalizeQuad(x,a,!0,function(A){for(var T=new F(A),B=b._indexForPattern(T),N=b.componentOrders[B],P=b.indexMap[B],L=0;L<N.length;L++){var Q=A[N[L]];if("_"===Q){null==P._&&(P._=[]),b.callbackCounter++,P._.push(b.callbackCounter),b.callbacksMap[b.callbackCounter]=s,b.callbacksInverseMap[s]=b.callbackCounter;break}L===N.length-1?(P[Q]=P[Q]||{_:[]},b.callbackCounter++,P[Q]._.push(b.callbackCounter),b.callbacksMap[b.callbackCounter]=s,b.callbacksInverseMap[s]=b.callbackCounter):(P[Q]=P[Q]||{},P=P[Q])}null!=v&&v(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(o){var f=this.callbacksInverseMap[o];null!=f&&(delete this.callbacksInverseMap[o],delete this.callbacksMap[f])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(o,f,l,y){var s={};return null==o?s.subject=Callbacks.ANYTHING:0==o.indexOf("_:")?s.subject={token:"blank",value:o}:s.subject={token:"uri",value:o},s.predicate=null==f?Callbacks.ANYTHING:{token:"uri",value:f},s.object=null==l?Callbacks.ANYTHING:{token:"uri",value:l},s.graph=null==y?Callbacks.ANYTHING:{token:"uri",value:y},s},Callbacks.CallbacksBackend.prototype._indexForPattern=function(o){for(var f=o.indexKey,l=this.indices,y=0;y<l.length;y++)for(var s=l[y],v=this.componentOrders[s],x=0;x<v.length&&!1!==q.include(f,v[x]);x++)if(x==f.length-1)return s;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var o,f,l,y;4===arguments.length?(o=arguments[0],f=arguments[1],l=arguments[2],y=arguments[3]):(o=arguments[0],f=this.engine.lexicon.defaultGraphUri,l=arguments[1],y=arguments[2]);var s="CONSTRUCT { <"+o+"> ?p ?o } WHERE { GRAPH <"+f+"> { <"+o+"> ?p ?o } }",v=this,x={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,x);var a=[];this.engine.execute(s,function(b,A){if(b)y&&y(!1);else{var T=A,B=!1,N=function(P,L){if("eventsFlushed"===P&&B){B=!1;try{l(T)}catch(Z){}}else if("eventsFlushed"!==P){B=!0;for(var Q=0;Q<L.length;Q++){var j=L[Q],V=m.buildRDFResource(j.subject,a,v.engine,x),W=m.buildRDFResource(j.predicate,a,v.engine,x),R=m.buildRDFResource(j.object,a,v.engine,x);null!=V&&null!=W&&null!=R&&(j=new m.Triple(V,W,R),P===Callbacks.added?T.add(j):P===Callbacks.deleted&&T.remove(j))}}};v.observersMap[l]=N,v.subscribeEmpty(Callbacks.eventsFlushed,N),v.subscribe(o,null,null,null,N,function(){try{l(T)}catch(P){}y&&y(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(o){var f=this.observersMap[o];return!!f&&(this.unsubscribe(f),this.unsubscribeEmpty(Callbacks.eventsFlushed,f),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(o,f,l){var y=this.aqt.parseQueryString(o),s=this.aqt.parseSelect(y.units[0]),v=this.aqt.collectBasicTriples(s),x=this,a={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,a);var b=this.queryCounter;this.queryCounter++,this.queriesMap[b]=o,this.queriesInverseMap[o]=b,this.queriesList.push(b),this.queriesCallbacksMap[b]=f,h.eachSeries(v,function(A,T){null==A.graph&&(A.graph=x.engine.lexicon.defaultGraphUriTerm),x.engine.normalizeQuad(A,a,!0,function(B){for(var N=new F(B),P=x._indexForPattern(N),L=x.componentOrders[P],Q=x.queriesIndexMap[P],j=0;j<L.length;j++){var V=B[L[j]];if("string"==typeof V){null==Q._&&(Q._=[]),Q._.push(b);break}j===L.length-1?(Q[V]=Q[V]||{_:[]},Q[V]._.push(b)):(Q[V]=Q[V]||{},Q=Q[V])}T()})},function(){x.engine.execute(o,function(A,T){A?console.log("ERROR in query callback "+T):f(T)}),null!=l&&l()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(o){var f=this.queriesInverseMap[o];null!=f&&(delete this.queriesInverseMap[o],delete this.queriesMap[f],this.queriesList=q.reject(this.queriesList,function(l){return l===f}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(o,f,l){for(var y=l[1],s=(l=l[0],0);s<f.length+1;s++){for(var v=o._||[],x=[],a=0;a<v.length;a++){var b=v[a];q.include(this.pendingQueries,b)&&(q.remove(this.pendingQueries,function(T){return T===b}),this.matchedQueries.push(b)),null!=this.queriesMap[b]&&x.push(b)}o._=x;var A=f[s];if(null==o[""+y[A]])break;o=o[""+y[A]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(o){var f,l,y=this,s={};h.eachSeries(this.matchedQueries,function(v,x){null==s[v]?(s[v]=!0,f=y.queriesMap[v],l=y.queriesCallbacksMap[v],y.engine.execute(f,function(a,b){if(!a)try{l(b)}catch(A){}x()})):x()},function(){o()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,ae.exports=Callbacks},{"./abstract_query_tree":129,"./quad_index":139,"./rdf_model":144,"./utils":147}],132:[function(J,ae,ce){var q=J("jsonld");ce.JSONLDParser={};var h=ce.JSONLDParser;h.parser={async:!0,parse:function(F,m,e,o){try{"string"==typeof F&&(F=JSON.parse(F)),async function(f,l,y){var s=null;var x=function(P){return"BlankNode"===P.termType?{blank:P.value}:"NamedNode"===P.termType?{token:"uri",value:P.value}:"Literal"===P.termType?null!=P.language?{literal:'"'+P.value+'"@'+P.language}:null!==P.datatype?{literal:'"'+P.value+'"^^<'+P.datatype.value+">"}:{literal:'"'+P.value+'"'}:void 0};s=[];for(var a,b,A,T=await q.toRDF(f,{}),B=0;B<T.length;B++){var N=T[B];a=N.subject,b=N.predicate,A=N.object,s.push({subject:x(a),predicate:x(b),object:x(A),graph:l})}y(null,s)}(F,m,o)}catch(f){o(f)}}},ae.exports={JSONLDParser:h}},{jsonld:48}],133:[function(J,ae,ce){var q=J("./utils"),h=J("./btree").Tree;Lexicon=function(F){var m=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,q.seq(function(e){new h(2,function(o){m.uris=o,e()})},function(e){new h(2,function(o){m.literals=o,e()})},function(e){new h(2,function(o){m.knownGraphs=o,e()})},function(e){new h(2,function(o){m.oidUris=o,e()})},function(e){new h(2,function(o){m.oidLiterals=o,e()})},function(e){new h(2,function(o){m.oidBlanks=o,e()})})(function(){null!=F&&F(m)})},Lexicon.prototype.registerGraph=function(F,m,e){F!=this.defaultGraphOid?this.knownGraphs.insert(F,m,function(){e()}):e()},Lexicon.prototype.registeredGraphs=function(F,m){var e=[];this.knownGraphs.walk(function(o){!0===F?e.push(o.data):e.push(o.key)},function(){m(e)})},Lexicon.prototype.registerUri=function(F,m){var e=this;F===this.defaultGraphUri?m(this.defaultGraphOid):this.uris.search(F,function(o){if(null==o){var f=e.oidCounter,l="u"+f;e.oidCounter++,q.seq(function(y){e.uris.insert(F,[f,0],function(){y()})},function(y){e.oidUris.insert(l,F,function(){y()})})(function(){m(f)})}else f=o[0],o[1]=o[1]+1,m(f)})},Lexicon.prototype.resolveUri=function(F,m){F===this.defaultGraphUri?m(this.defaultGraphOid):this.uris.search(F,function(e){m(null!=e?e[0]:-1)})},Lexicon.prototype.resolveUriCost=function(F,m){F===this.defaultGraphUri?m(0):this.uris.search(F,function(e){m(null!=e?e[1]:-1)})},Lexicon.prototype.registerBlank=function(F){var m=this.oidCounter;this.oidCounter++;var e=""+m;this.oidBlanks.insert(e,e,function(){F(m)})},Lexicon.prototype.resolveBlank=function(F,m){var e=this;this.oidBlanks.search(F,function(o){if(null!=o)m(o);else{var f=e.oidCounter;this.oidCounter++,m(""+f)}})},Lexicon.prototype.resolveBlankCost=function(F,m){m(0)},Lexicon.prototype.registerLiteral=function(F,m){var e=this;this.literals.search(F,function(o){if(null==o){var f="l"+(l=e.oidCounter);e.oidCounter++,q.seq(function(y){e.literals.insert(F,[l,0],function(){y()})},function(y){e.oidLiterals.insert(f,F,function(){y()})})(function(){m(l)})}else{var l=o[0];o[1]=o[1]+1,m(l)}})},Lexicon.prototype.resolveLiteral=function(F,m){this.literals.search(F,function(e){m(null!=e?e[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(F,m){this.literals.search(F,function(e){m(null!=e?e[1]:-1)})},Lexicon.prototype.parseLiteral=function(F){var m;return-1!=(m=F.lastIndexOf("@"))&&'"'===F[m-1]&&null!=F.substring(m,F.length).match(/^@[a-zA-Z\-]+$/g)?{token:"literal",value:F.substring(1,m-1),lang:F.substring(m+1,F.length)}:-1!=(m=F.lastIndexOf("^^"))&&'"'===F[m-1]&&"<"===F[m+2]&&">"===F[F.length-1]?{token:"literal",value:F.substring(1,m-1),type:F.substring(m+3,F.length-1)}:{token:"literal",value:F.substring(1,F.length-1)}},Lexicon.prototype.parseUri=function(F){return{token:"uri",value:F}},Lexicon.prototype.retrieve=function(F,m){var e=this;F===this.defaultGraphOid?m({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):q.seq(function(o,f){e.oidUris.search("u"+F,function(l){f(null,null!=l?e.parseUri(l):null)})},function(o,f){null==o?e.oidLiterals.search("l"+F,function(l){f(null,null!=l?e.parseLiteral(l):null)}):f(null,o)},function(o,f){null==o?e.oidBlanks.search(""+F,function(l){f(null,null!=l?{token:"blank",value:"_:"+F}:null)}):f(null,o)})(null,function(o,f){m(f)})},Lexicon.prototype.clear=function(F){var m=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,q.seq(function(e){new h(2,function(o){m.uris=o,e()})},function(e){new h(2,function(o){m.literals=o,e()})},function(e){new h(2,function(o){m.knownGraphs=o,e()})},function(e){new h(2,function(o){m.oidUris=o,e()})},function(e){new h(2,function(o){m.oidLiterals=o,e()})},function(e){new h(2,function(o){m.oidBlanks=o,e()})})(function(){null!=F&&F()})},Lexicon.prototype.unregister=function(F,m,e){var o=this;q.seq(function(f){o._unregisterTerm(F.subject.token,m.subject,f)},function(f){o._unregisterTerm(F.predicate.token,m.predicate,f)},function(f){o._unregisterTerm(F.object.token,m.object,f)},function(f){null!=F.graph?o._unregisterTerm(F.graph.token,m.graph,f):f()})(function(){e(!0)})},Lexicon.prototype._unregisterTerm=function(F,m,e){var o=this;if("uri"===F)if(m!=this.defaultGraphOid){var f="u"+m;o.oidUris.search(f,function(l){o.uris.search(l,function(y){var s=y[1];""+y[0]==""+m?0===s?q.seq(function(v){o.oidUris.delete(f,function(){v()})},function(v){o.uris.delete(l,function(){v()})},function(v){o.knownGraphs.delete(m,function(){v()})})(function(){e()}):o.uris.insert(l,[m,s-1],function(){e()}):e()})})}else e();else"literal"===F?(this.oidCounter++,f="l"+m,o.oidLiterals.search(f,function(l){o.literals.search(l,function(y){var s=y[1];""+y[0]==""+m?0===s?q.seq(function(v){o.oidLiterals.delete(f,function(){v()})},function(v){o.literals.delete(l,function(){v()})})(function(){e()}):o.literals.insert(l,[m,s-1],function(){e()}):e()})})):"blank"===F?o.oidBlanks.delete(""+m,function(){e()}):e()},ae.exports={Lexicon}},{"./btree":130,"./utils":147}],134:[function(J,ae,ce){if(!J("./utils").isWorker()){var q=J("http"),h=J("https"),F=J("url");NetworkTransport={load:function(m,e,o,f){var l=null==f?3:f,y=F.parse(m,!0,!0),s={host:y.host,hostname:y.hostname,method:"GET",path:y.path,headers:{host:y.hostname,Accept:e}},v=null;"http:"===y.protocol?(s.port=y.port||80,v=q):"https:"===y.protocol&&(s.port=y.port||443,v=h);var x=v.request(s,function(a){var b=a.headers,A="";if("2"==(""+a.statusCode)[0])a.on("end",function(){o(null,{headers:b,data:A})}),a.on("data",function(B){A+=B});else if("3"==(""+a.statusCode)[0])if(0==l)o(new Error("Too many redirections"));else{var T=b.Location||b.location;null!=T?NetworkTransport.load(T,e,o,l-1):o(new Error("Redirection without location header"))}else o(new Error("HTTP error: "+a.statusCode))});x.on("error",o),x.end()}},ae.exports={NetworkTransport}}},{"./utils":147,http:103,https:24,url:124}],135:[function(J,ae,ce){ae.exports=function(){"use strict";function q(h,F,m,e){this.message=h,this.expected=F,this.found=m,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,q)}return function(h,F){function m(){this.constructor=h}m.prototype=F.prototype,h.prototype=new m}(q,Error),q.buildMessage=function(h,F){var l,m={literal:function(l){return'"'+o(l.text)+'"'},class:function(l){var y,s="";for(y=0;y<l.parts.length;y++)s+=l.parts[y]instanceof Array?f(l.parts[y][0])+"-"+f(l.parts[y][1]):f(l.parts[y]);return"["+(l.inverted?"^":"")+s+"]"},any:function(l){return"any character"},end:function(l){return"end of input"},other:function(l){return l.description}};function e(l){return l.charCodeAt(0).toString(16).toUpperCase()}function o(l){return l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+e(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+e(y)})}function f(l){return l.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+e(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+e(y)})}return"Expected "+function(l){var y,s,v,x=new Array(l.length);for(y=0;y<l.length;y++)x[y]=(v=l[y],m[v.type](v));if(x.sort(),x.length>0){for(y=1,s=1;y<x.length;y++)x[y-1]!==x[y]&&(x[s]=x[y],s++);x.length=s}switch(x.length){case 1:return x[0];case 2:return x[0]+" or "+x[1];default:return x.slice(0,-1).join(", ")+", or "+x[x.length-1]}}(h)+" but "+(((l=F)?'"'+o(l)+'"':"end of input")+" found.")},{SyntaxError:q,parse:function(h,F){F=void 0!==F?F:{};var m,e={},o={DOCUMENT:Oh},f=Oh,l=qe("[1] QueryUnit"),y=qe("[2] Query"),v=qe("[3] Prologue"),a=qe("[4] BaseDecl"),b="BASE",A=Ue("BASE",!1),T="base",B=Ue("base",!1),P=qe("[5] PrefixDecl"),L="PREFIX",Q=Ue("PREFIX",!1),j="prefix",V=Ue("prefix",!1),R=qe("[6] SelectQuery"),ee=qe("[7] SubSelect"),te=qe("[8] SelectClause"),ie=Ue("SELECT",!1),we=Ue("select",!1),Te="DISTINCT",Fe=Ue("DISTINCT",!1),ke="distinct",de=Ue("distinct",!1),Le="REDUCED",Me=Ue("REDUCED",!1),Ze="reduced",H=Ue("reduced",!1),z="(",ne=Ue("(",!1),ge="AS",xe=Ue("AS",!1),Re="as",He=Ue("as",!1),We=")",Ke=Ue(")",!1),mt="*",yt=Ue("*",!1),Yt=qe("[9] ConstructQuery"),Se="CONSTRUCT",Ie=Ue("CONSTRUCT",!1),Ne="construct",Y=Ue("construct",!1),ve="WHERE",me=Ue("WHERE",!1),_e="where",Ce=Ue("where",!1),Oe="{",Pe=Ue("{",!1),Ge="}",$e=Ue("}",!1),Ve=qe("[10] DescribeQuery"),ct="DESCRIBE",dt=Ue("DESCRIBE",!1),ht=qe("[11] AskQuery"),kt=Ue("ASK",!1),it=Ue("ask",!1),Ot=qe("[12] DatasetClause"),Nn=Ue("FROM",!1),ls=Ue("from",!1),us=qe("[13] DefaultGraphClause"),fs=qe("[14] NamedGraphClause"),Hr="NAMED",ai=Ue("NAMED",!1),rn="named",cn=Ue("named",!1),Wr=qe("[15] SourceSelector"),nn=qe("[16] WhereClause"),bo=qe("[17] SolutionModifier"),Mi=qe("[18] GroupClause"),xo=Ue("GROUP",!1),Bi=Ue("group",!1),Xt=Ue("BY",!1),hn=Ue("by",!1),qr=qe("[19] GroupCondition"),ot=qe("[20] HavingClause"),hs=Ue("HAVING",!1),ps=qe("[21] HavingCondition"),ko=qe("[22] OrderClause"),_a=Ue("ORDER",!1),Nu=Ue("order",!1),Co=qe("[23] OrderCondition"),Aa=Ue("ASC",!1),Ui=Ue("asc",!1),Fa=Ue("DESC",!1),Ea=Ue("desc",!1),Ia=qe("[24] LimitOffsetClauses"),Ru=qe("[25] LimitClause"),on=Ue("LIMIT",!1),Du=Ue("limit",!1),Gi=qe("[26] OffsetClause"),ju=Ue("OFFSET",!1),Mu=Ue("offset",!1),Da=qe("[27] BindingsClause"),ja="BINDINGS",Ma=Ue("BINDINGS",!1),Ba=qe("[28] BindingValue"),Dn="UNDEF",Hi=Ue("UNDEF",!1),ys=qe("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),Wi="VALUES",ms=Ue("VALUES",!1),jn="values",Pa=Ue("values",!1),Dr=qe("[29] UpdateUnit"),Bu=qe("[30] Update"),sn=";",jr=Ue(";",!1),pn=qe("[31] Update1"),bs=qe("[32] Load"),Fo=Ue("LOAD",!1),li=Ue("load",!1),Pu=Ue("INTO",!1),Qu=Ue("into",!1),za=qe("[33] Clear"),Uu=Ue("CLEAR",!1),Gu=Ue("clear",!1),Mn="SILENT",xs=Ue("SILENT",!1),Bn="silent",ui=Ue("silent",!1),Hu=qe("[34] Drop"),Wu=Ue("DROP",!1),nr=Ue("drop",!1),Va=qe("[35] Create"),qu=Ue("CREATE",!1),Xu=Ue("create",!1),Ka=qe("[36] InsertData"),To="INSERT",Ya=Ue("INSERT",!1),zi="insert",Cs=Ue("insert",!1),Lo="DATA",pi=Ue("DATA",!1),Nr="data",qi=Ue("data",!1),Za=qe("[37] DeleteData"),yr="DELETE",an=Ue("DELETE",!1),dn="delete",Ss=Ue("delete",!1),Ju=qe("[38] DeleteWhere"),As=qe("[39] Modify"),Jr=Ue("WITH",!1),tl=Ue("with",!1),Ku=qe("[40] DeleteClause"),nl=qe("[41] InsertClause"),il=qe("[42] UsingClause"),ol=Ue("USING",!1),Ts=Ue("using",!1),sl=qe("[43] GraphRef"),ln="GRAPH",Lr=Ue("GRAPH",!1),Qn="graph",Xi=Ue("graph",!1),al=qe("[44] GraphRefAll"),Is="DEFAULT",Ns=Ue("DEFAULT",!1),ll="default",Yu=Ue("default",!1),vi=Ue("ALL",!1),Os=Ue("all",!1),Rs=qe("[45] QuadPattern"),vn=function(u){return u.quadsContext},Hn=qe("[46] QuadData"),mr=qe("[47] Quads"),Wt=".",zt=Ue(".",!1),$u=qe("[48] QuadsNotTriples"),Ji=qe("[49] TriplesTemplate"),Ds=qe("[50] GroupGraphPattern"),ef=qe("[51] GroupGraphPatternSub"),hl=qe("[54] TriplesBlock"),Bs=qe("[53] GraphPatternNotTriples"),yi=qe("[54] OptionalGraphPattern"),Vi="OPTIONAL",pl=Ue("OPTIONAL",!1),Ki="optional",tf=Ue("optional",!1),nf=qe("[55] GraphGraphPattern"),Qs=qe("[56] ServiceGraphPattern"),Wn="SERVICE",Yi=Ue("SERVICE",!1),Ro=qe("[57] MinusGraphPattern"),Zi=Ue("MINUS",!1),zn=Ue("minus",!1),qn=qe("[58] GroupOrUnionGraphPattern"),gn="UNION",Xn=Ue("UNION",!1),eo="union",Hs=Ue("union",!1),sf=qe("[59] Filter"),Jn=Ue("FILTER",!1),af=Ue("filter",!1),uf=qe("[60] Bind"),ff=Ue("BIND",!1),ir=Ue("bind",!1),or=qe("[60] Constraint"),to=qe("[61] InlineData"),Do=qe("[62] DataBlock"),hf=qe("[63] InlineDataOneVar"),df=qe("[64] InlineDataFull"),yl=qe("[65] DataBlockValue"),zs=qe("[61] FunctionCall"),qs=qe("[62] ArgList"),$t=",",er=Ue(",",!1),ml=qe("[63] ExpressionList"),gf=qe("[64] ConstructTemplate"),un=qe("[65] ConstructTriples"),yf=qe("[66] TriplesSameSubject"),jt=qe("[83] PropertyListPathNotEmpty"),mn=qe("[67] PropertyListNotEmpty"),wl=qe("[68] PropertyList"),Js=qe("[86] ObjectListPath"),mf=qe("[69] ObjectList"),no=qe("[87] ObjectPath"),Cl=qe("[70] Object"),Ks=qe("[71] Verb"),io=Ue("a",!1),bf=qe("[72] TriplesSameSubjectPath"),_l=qe("[73] PropertyListNotEmptyPath"),Sl=qe("[74] PropertyListPath"),wf=qe("[75]"),Po=qe("[76] VerbSimple"),Al=qe("[77] Path"),Cf=qe("[78] PathAlternative"),oo=Ue("|",!1),$s=qe("[79] PathSequence"),xn=Ue("/",!1),Fl=qe("[88] PathElt"),El=qe("[81] PathEltOrInverse"),so=Ue("^",!1),Ll=qe("[82] PathMod"),wn=Ue("?",!1),Pr="+",fn=Ue("+",!1),Il=qe("[83] PathPrimary"),kn=Ue("!",!1),Nl=qe("[85] PathOneInPropertySet"),Ho=qe("[86] Integer"),Ol=qe("[100] TriplesNodePath"),Sf=qe("[87] TriplesNode"),Rl=qe("[101] BlankNodePropertyListPath"),zo=Ue("[",!1),Kn=Ue("]",!1),uo=qe("[88] BlankNodePropertyList"),Af=qe("[103] CollectionPath"),Cn=qe("[89] Collection"),xi=qe("[105] GraphNodePath"),wi=function(u){return u[1]},Ff=qe("[90] GraphNode"),jl=qe("[91] VarOrTerm"),Ef=qe("[92] VarOrIRIref"),Tf=qe("[93] Var"),xr=qe("[94] GraphTerm"),Ml=qe("[95] Expression"),If=qe("[96] ConditionalOrExpression"),Bl=Ue("||",!1),Ql=qe("[97] ConditionalAndExpression"),Ul=Ue("&&",!1),Of=qe("[98] ValueLogical"),_n=qe("[99] RelationalExpression"),Yn=Ue("=",!1),Kr=Ue("!=",!1),na=Ue("<",!1),Xo=Ue(">",!1),ia=Ue("<=",!1),$n=Ue(">=",!1),Ci=Ue("I",!1),Jo=Ue("i",!1),ei=Ue("N",!1),ti=Ue("n",!1),Gl=Ue("O",!1),Ai=Ue("o",!1),sa=Ue("T",!1),Vo=Ue("t",!1),Rf=qe("[100] NumericExpression"),ql=qe("[101] AdditiveExpression"),Qr="-",Zr=Ue("-",!1),po=qe("[102] MultiplicativeExpression"),Df=qe("[103] UnaryExpression"),Bf=qe("[104] PrimaryExpression"),Vl=qe("[105] BrackettedExpression"),Kl=qe("[106] BuiltInCall"),Zl=Ue("STR",!1),$l=Ue("str",!1),Gf=Ue("LANG",!1),Ut=Ue("lang",!1),Yo="LANGMATCHES",go=Ue("LANGMATCHES",!1),Or="langmatches",Zo=Ue("langmatches",!1),fa="DATATYPE",ru=Ue("DATATYPE",!1),ca="datatype",nu=Ue("datatype",!1),ha=Ue("BOUND",!1),Pt=Ue("bound",!1),Fi=Ue("IRI",!1),$o=Ue("iri",!1),zf=Ue("URI",!1),qf=Ue("uri",!1),t="BNODE",n=Ue("BNODE",!1),d="bnode",c=Ue("bnode",!1),M="COALESCE",K=Ue("COALESCE",!1),re="coalesce",se=Ue("coalesce",!1),Ee=Ue("IF",!1),Be=Ue("if",!1),tt="ISLITERAL",st=Ue("ISLITERAL",!1),ut="isliteral",pt=Ue("isliteral",!1),ft="isLITERAL",gt=Ue("isLITERAL",!1),xt="ISBLANK",Et=Ue("ISBLANK",!1),Qt="isblank",sr=Ue("isblank",!1),Gt="isBLANK",Fr=Ue("isBLANK",!1),Jt="SAMETERM",kr=Ue("SAMETERM",!1),ar="sameterm",tr=Ue("sameterm",!1),Cr=Ue("ISURI",!1),En=Ue("isuri",!1),$r=Ue("isURI",!1),da=Ue("ISIRI",!1),ii=Ue("isiri",!1),dr=Ue("isIRI",!1),ts="custom:",bp=Ue("custom:",!1),_c="CUSTOM:",xp=Ue("CUSTOM:",!1),Sc=/^[a-zA-Z0-9_]/,Ac=Rt([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),kp=qe("[107] RegexExpression"),Cp=Ue("REGEX",!1),_p=Ue("regex",!1),Ap=qe("[108] ExistsFunc"),fu="EXISTS",Tc=Ue("EXISTS",!1),cu="exists",Lc=Ue("exists",!1),Ep=qe("[109] NotExistsFunc"),Tp=Ue("NOT",!1),Lp=Ue("not",!1),Np=qe("[110] Aggregate"),Op=Ue("COUNT",!1),Rp=Ue("count",!1),Dc="GROUP_CONCAT",jp=Ue("GROUP_CONCAT",!1),jc="group_concat",Mp=Ue("group_concat",!1),Mc="SEPARATOR",Bp=Ue("SEPARATOR",!1),Qp=Ue("SUM",!1),Up=Ue("sum",!1),Hp=Ue("MIN",!1),Wp=Ue("min",!1),qp=Ue("MAX",!1),Xp=Ue("max",!1),Vp=Ue("AVG",!1),Kp=Ue("avg",!1),Zp=qe("[117] IRIrefOrFunction"),ed=qe("[112] RDFLiteral"),td=Ue("^^",!1),nd=qe("[113] NumericLiteral"),id=qe("[114] NumericLiteralUnsigned"),od=qe("[115] NumericLiteralPositive"),sd=qe("[116] NumericLiteralNegative"),ad=qe("[117] BooleanLiteral"),ld=Ue("TRUE",!1),ud=Ue("true",!1),cd=Ue("FALSE",!1),hd=Ue("false",!1),dd=qe("[118] String"),hu=function(u){return{token:"string",value:u}},vd=qe("[119] IRIref"),yd=qe("[120] PrefixedName"),xd=qe("[121] BlankNode"),Cd=qe("[122] IRI_REF"),Zc=/^[^<>"{}|\^`\\]/,$c=Rt(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),Sd=qe("[123] PNAME_NS"),ga=Ue(":",!1),Ad=qe("[124] PNAME_LN"),Ed=qe("[125] BLANK_NODE_LABEL"),Td=Ue("_:",!1),Id=qe("[126] VAR1"),Nd=qe("[127] VAR2"),nh=Ue("$",!1),Od=qe("[128] LANGTAG"),oh=Ue("@",!1),sh=/^[a-zA-Z]/,ah=Rt([["a","z"],["A","Z"]],!1,!1),pu=/^[a-zA-Z0-9]/,du=Rt([["a","z"],["A","Z"],["0","9"]],!1,!1),Dd=qe("[129] INTEGER"),Vt=/^[0-9]/,Kt=Rt([["0","9"]],!1,!1),Md=qe("[130] DECIMAL"),Qd=qe("[131] DOUBLE"),Wd=qe("[132] INTEGER_POSITIVE"),qd=qe("[133] DECIMAL_POSITIVE"),lh=function(u){return u.value="+"+u.value,u},Xd=qe("[134] DOUBLE_POSITIVE"),Jd=qe("[135] INTEGER_NEGATIVE"),Xf=function(u){return u.value="-"+u.value,u},Vd=qe("[136] DECIMAL_NEGATIVE"),Kd=qe("[137] DOUBLE_NEGATIVE"),Yd=qe("[138] EXPONENT"),Zd=/^[eE]/,$d=Rt(["e","E"],!1,!1),ev=/^[+\-]/,tv=Rt(["+","-"],!1,!1),nv=qe("[139] STRING_LITERAL1"),Vf=Ue("'",!1),uh=/^[^'\\\n\r]/,fh=Rt(["'","\\","\n","\r"],!0,!1),vu=function(u){return Li(u)},iv=qe("[140] STRING_LITERAL2"),hh=Ue('"',!1),ph=/^[^"\\\n\r]/,dh=Rt(['"',"\\","\n","\r"],!0,!1),ov=qe("[141] STRING_LITERAL_LONG1"),gu="'''",vh=Ue("'''",!1),gh=/^[^'\\]/,yh=Rt(["'","\\"],!0,!1),sv=qe("[142] STRING_LITERAL_LONG2"),yu='"""',mh=Ue('"""',!1),bh=/^[^"\\]/,xh=Rt(['"',"\\"],!0,!1),av=qe("[143] ECHAR"),kh=Ue("\\",!1),lv=/^[tbnrf"']/,uv=Rt(["t","b","n","r","f",'"',"'"],!1,!1),fv=qe("[144] NIL"),hv=qe("[145] WS"),pv=/^[ ]/,dv=Rt([" "],!1,!1),vv=/^[\t]/,gv=Rt(["\t"],!1,!1),yv=/^[\r]/,mv=Rt(["\r"],!1,!1),bv=/^[\n]/,xv=Rt(["\n"],!1,!1),wv=qe(" COMMENT"),_h=Ue("#",!1),Sh=/^[^\n\r]/,Ah=Rt(["\n","\r"],!0,!1),kv=qe("[146] ANON"),Cv=qe("[147] PN_CHARS_BASE"),_v=/^[A-Z]/,Sv=Rt([["A","Z"]],!1,!1),Av=/^[a-z]/,Fv=Rt([["a","z"]],!1,!1),Ev=/^[\xC0-\xD6]/,Tv=Rt([["\xc0","\xd6"]],!1,!1),Lv=/^[\xD8-\xF6]/,Iv=Rt([["\xd8","\xf6"]],!1,!1),Nv=/^[\xF8-\u02FF]/,Ov=Rt([["\xf8","\u02ff"]],!1,!1),Rv=/^[\u0370-\u037D]/,Dv=Rt([["\u0370","\u037d"]],!1,!1),jv=/^[\u037F-\u1FFF]/,Mv=Rt([["\u037f","\u1fff"]],!1,!1),Bv=/^[\u200C-\u200D]/,Pv=Rt([["\u200c","\u200d"]],!1,!1),Qv=/^[\u2070-\u218F]/,Uv=Rt([["\u2070","\u218f"]],!1,!1),Gv=/^[\u2C00-\u2FEF]/,Hv=Rt([["\u2c00","\u2fef"]],!1,!1),Wv=/^[\u3001-\uD7FF]/,zv=Rt([["\u3001","\ud7ff"]],!1,!1),qv=/^[\uF900-\uFDCF]/,Xv=Rt([["\uf900","\ufdcf"]],!1,!1),Jv=/^[\uFDF0-\uFFFD]/,Vv=Rt([["\ufdf0","\ufffd"]],!1,!1),Kv=/^[\u1000-\uEFFF]/,Yv=Rt([["\u1000","\uefff"]],!1,!1),Zv=qe("[148] PN_CHARS_U"),Eh=Ue("_",!1),$v=qe("[149] VARNAME"),Kf=/^[\xB7]/,Yf=Rt(["\xb7"],!1,!1),Zf=/^[\u0300-\u036F]/,$f=Rt([["\u0300","\u036f"]],!1,!1),ec=/^[\u203F-\u2040]/,tc=Rt([["\u203f","\u2040"]],!1,!1),tg=qe("[150] PN_CHARS"),rg=qe("[151] PN_PREFIX"),ig=qe("[152] PN_LOCAL"),sg=qe("[170] PLX"),ag=qe("[171] PERCENT"),Lh=Ue("%",!1),ug=qe("[172] HEX"),fg=/^[A-F]/,cg=Rt([["A","F"]],!1,!1),hg=/^[a-f]/,pg=Rt([["a","f"]],!1,!1),dg=qe("[173] PN_LOCAL_ESC"),gg=Ue("~",!1),mg=Ue("&",!1),r=0,mu=[{line:1,column:1}],Ln=0,rc=[],E=0;if("startRule"in F){if(!(F.startRule in o))throw new Error("Can't start parsing from rule \""+F.startRule+'".');f=o[F.startRule]}function Ue(u,k){return{type:"literal",text:u,ignoreCase:k}}function Rt(u,k,_){return{type:"class",parts:u,inverted:k,ignoreCase:_}}function qe(u){return{type:"other",description:u}}function Ih(u){var k,_=mu[u];if(_)return _;for(k=u-1;!mu[k];)k--;for(_={line:(_=mu[k]).line,column:_.column};k<u;)10===h.charCodeAt(k)?(_.line++,_.column=1):_.column++,k++;return mu[u]=_,_}function Nh(u,k){var _=Ih(u),C=Ih(k);return{start:{offset:u,line:_.line,column:_.column},end:{offset:k,line:C.line,column:C.column}}}function X(u){r<Ln||(r>Ln&&(Ln=r,rc=[]),rc.push(u))}function Oh(){return E++,E++,_=r,(C=Rh())!==e?((I=function(){var O,U,$,fe,ye,De,ze,Ae,Je,rt;if(E++,O=r,(U=jh())!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e){for(fe=[],ye=In();ye!==e;)fe.push(ye),ye=In();if(fe!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();if(ye!==e)if((De=ya())!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();if(ze!==e)if((Ae=ma())!==e){for(Je=[],rt=G();rt!==e;)Je.push(rt),rt=G();Je!==e&&(rt=function(){var je,et,nt,lt,Tt,at,Nt,Dt,Ft;if(E++,je=r,h.substr(r,8)===ja?(et=ja,r+=8):(et=e,0===E&&X(Ma)),et!==e){for(nt=[],lt=vr();lt!==e;)nt.push(lt),lt=vr();if(nt!==e)if(123===h.charCodeAt(r)?(lt=Oe,r++):(lt=e,0===E&&X(Pe)),lt!==e){if(Tt=[],at=r,40===h.charCodeAt(r)?(Nt=z,r++):(Nt=e,0===E&&X(ne)),Nt!==e){if(Dt=[],(Ft=bu())!==e)for(;Ft!==e;)Dt.push(Ft),Ft=bu();else Dt=e;Dt!==e?(41===h.charCodeAt(r)?(Ft=We,r++):(Ft=e,0===E&&X(Ke)),Ft!==e?at=Nt=[Nt,Dt,Ft]:(r=at,at=e)):(r=at,at=e)}else r=at,at=e;for(at===e&&(at=si());at!==e;){if(Tt.push(at),at=r,40===h.charCodeAt(r)?(Nt=z,r++):(Nt=e,0===E&&X(ne)),Nt!==e){if(Dt=[],(Ft=bu())!==e)for(;Ft!==e;)Dt.push(Ft),Ft=bu();else Dt=e;Dt!==e?(41===h.charCodeAt(r)?(Ft=We,r++):(Ft=e,0===E&&X(Ke)),Ft!==e?at=Nt=[Nt,Dt,Ft]:(r=at,at=e)):(r=at,at=e)}else r=at,at=e;at===e&&(at=si())}Tt!==e?(125===h.charCodeAt(r)?(at=Ge,r++):(at=e,0===E&&X($e)),at!==e?je=et=[et,nt,lt,Tt,at]:(r=je,je=e)):(r=je,je=e)}else r=je,je=e;else r=je,je=e}else r=je,je=e;return je===e&&(je=null),E--,je===e&&(et=e,0===E&&X(Da)),je}())!==e?(U=function(u,k,_,C){for(var I={named:[],implicit:[]},D=0;D<k.length;D++){var O=k[D];"default"===O.kind?I.implicit.push(O.graph):I.named.push(O.graph)}0===I.named.length&&0===I.implicit.length&&I.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var U={kind:"select",token:"executableunit"};return U.dataset=I,U.projection=u.vars,U.modifier=u.modifier,U.pattern=_,null!=C&&null!=C.limit&&(U.limit=C.limit),null!=C&&null!=C.offset&&(U.offset=C.offset),null!=C&&null!=C.order&&""!=C.order&&(U.order=C.order),null!=C&&null!=C.group&&(U.group=C.group),U}(U,fe,De,Ae),O=U):(r=O,O=e)}else r=O,O=e;else r=O,O=e}else r=O,O=e;else r=O,O=e}else r=O,O=e}else r=O,O=e}else r=O,O=e;return E--,O===e&&(U=e,0===E&&X(R)),O}())===e&&(I=function(){var O,U,$,fe,ye,De,ze,Ae,Je,rt,je,et,nt,lt,Tt;for(E++,O=r,U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if(h.substr(r,9)===Se?($=Se,r+=9):($=e,0===E&&X(Ie)),$===e&&(h.substr(r,9)===Ne?($=Ne,r+=9):($=e,0===E&&X(Y))),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();if(fe!==e)if((ye=function(){var at,Nt,Dt,Ft,_r,lr;if(E++,at=r,123===h.charCodeAt(r)?(Nt=Oe,r++):(Nt=e,0===E&&X(Pe)),Nt!==e){for(Dt=[],Ft=G();Ft!==e;)Dt.push(Ft),Ft=G();if(Dt!==e)if((Ft=function hr(){var Sr,Ar,ur,Ca,Ii,Tu,Ni;if(E++,Sr=r,(Ar=ep())!==e){for(ur=r,Ca=[],Ii=G();Ii!==e;)Ca.push(Ii),Ii=G();if(Ca!==e)if(46===h.charCodeAt(r)?(Ii=Wt,r++):(Ii=e,0===E&&X(zt)),Ii!==e){for(Tu=[],Ni=G();Ni!==e;)Tu.push(Ni),Ni=G();Tu!==e?((Ni=hr())===e&&(Ni=null),Ni!==e?ur=Ca=[Ca,Ii,Tu,Ni]:(r=ur,ur=e)):(r=ur,ur=e)}else r=ur,ur=e;else r=ur,ur=e;ur===e&&(ur=null),ur!==e?(Ar=function(u,k){var _=u.triplesContext;return null!=k&&"object"==typeof k&&null!=k.length&&null!=k[3]&&null!=k[3].triplesContext&&(_=_.concat(k[3].triplesContext)),{token:"triplestemplate",triplesContext:_}}(Ar,ur),Sr=Ar):(r=Sr,Sr=e)}else r=Sr,Sr=e;return E--,Sr===e&&(Ar=e,0===E&&X(un)),Sr}())===e&&(Ft=null),Ft!==e){for(_r=[],lr=G();lr!==e;)_r.push(lr),lr=G();_r!==e?(125===h.charCodeAt(r)?(lr=Ge,r++):(lr=e,0===E&&X($e)),lr!==e?at=Nt=Ft:(r=at,at=e)):(r=at,at=e)}else r=at,at=e;else r=at,at=e}else r=at,at=e;return E--,at===e&&(Nt=e,0===E&&X(gf)),at}())!==e){for(De=[],ze=G();ze!==e;)De.push(ze),ze=G();if(De!==e){for(ze=[],Ae=In();Ae!==e;)ze.push(Ae),Ae=In();if(ze!==e){for(Ae=[],Je=G();Je!==e;)Ae.push(Je),Je=G();if(Ae!==e)if((Je=ya())!==e){for(rt=[],je=G();je!==e;)rt.push(je),je=G();rt!==e&&(je=ma())!==e?(U=function(u,k,_,C){for(var I={named:[],implicit:[]},D=0;D<k.length;D++){var O=k[D];"default"===O.kind?I.implicit.push(O.graph):I.named.push(O.graph)}0===I.named.length&&0===I.implicit.length&&I.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var U={kind:"construct",token:"executableunit"};return U.dataset=I,U.template=u,U.pattern=_,null!=C&&null!=C.limit&&(U.limit=C.limit),null!=C&&null!=C.offset&&(U.offset=C.offset),null!=C&&null!=C.order&&""!=C.order&&(U.order=C.order),U}(ye,ze,Je,je),O=U):(r=O,O=e)}else r=O,O=e;else r=O,O=e}else r=O,O=e}else r=O,O=e}else r=O,O=e;else r=O,O=e}else r=O,O=e;else r=O,O=e;if(O===e){for(O=r,U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if(h.substr(r,9)===Se?($=Se,r+=9):($=e,0===E&&X(Ie)),$===e&&(h.substr(r,9)===Ne?($=Ne,r+=9):($=e,0===E&&X(Y))),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();if(fe!==e){for(ye=[],De=In();De!==e;)ye.push(De),De=In();if(ye!==e){for(De=[],ze=G();ze!==e;)De.push(ze),ze=G();if(De!==e)if(h.substr(r,5)===ve?(ze=ve,r+=5):(ze=e,0===E&&X(me)),ze===e&&(h.substr(r,5)===_e?(ze=_e,r+=5):(ze=e,0===E&&X(Ce))),ze!==e){for(Ae=[],Je=G();Je!==e;)Ae.push(Je),Je=G();if(Ae!==e)if(123===h.charCodeAt(r)?(Je=Oe,r++):(Je=e,0===E&&X(Pe)),Je!==e){for(rt=[],je=G();je!==e;)rt.push(je),je=G();if(rt!==e)if((je=rs())===e&&(je=null),je!==e){for(et=[],nt=G();nt!==e;)et.push(nt),nt=G();if(et!==e)if(125===h.charCodeAt(r)?(nt=Ge,r++):(nt=e,0===E&&X($e)),nt!==e){for(lt=[],Tt=G();Tt!==e;)lt.push(Tt),Tt=G();lt!==e&&(Tt=ma())!==e?(U=function(u,k,_){for(var C={named:[],implicit:[]},I=0;I<u.length;I++){var D=u[I];"default"===D.kind?C.implicit.push(D.graph):C.named.push(D.graph)}0===C.named.length&&0===C.implicit.length&&C.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var O={kind:"construct",token:"executableunit"};return O.dataset=C,O.template=k,O.pattern={token:"basicgraphpattern",triplesContext:k.triplesContext},null!=_&&null!=_.limit&&(O.limit=_.limit),null!=_&&null!=_.offset&&(O.offset=_.offset),null!=_&&null!=_.order&&""!=_.order&&(O.order=_.order),O}(ye,je,Tt),O=U):(r=O,O=e)}else r=O,O=e;else r=O,O=e}else r=O,O=e;else r=O,O=e}else r=O,O=e;else r=O,O=e}else r=O,O=e;else r=O,O=e}else r=O,O=e}else r=O,O=e}else r=O,O=e;else r=O,O=e}return E--,O===e&&(U=e,0===E&&X(Yt)),O}())===e&&(I=function(){var O,U,$,fe,ye,De;if(E++,O=r,h.substr(r,8)===ct?(U=ct,r+=8):(U=e,0===E&&X(dt)),U!==e){if($=[],(fe=ss())!==e)for(;fe!==e;)$.push(fe),fe=ss();else $=e;if($===e&&(42===h.charCodeAt(r)?($=mt,r++):($=e,0===E&&X(yt))),$!==e){for(fe=[],ye=In();ye!==e;)fe.push(ye),ye=In();fe!==e?((ye=ya())===e&&(ye=null),ye!==e&&(De=ma())!==e?O=U=[U,$,fe,ye,De]:(r=O,O=e)):(r=O,O=e)}else r=O,O=e}else r=O,O=e;return E--,O===e&&(U=e,0===E&&X(Ve)),O}())===e&&(I=function(){var O,U,$,fe,ye,De,ze;for(E++,O=r,U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if("ASK"===h.substr(r,3)?($="ASK",r+=3):($=e,0===E&&X(kt)),$===e&&("ask"===h.substr(r,3)?($="ask",r+=3):($=e,0===E&&X(it))),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();if(fe!==e){for(ye=[],De=In();De!==e;)ye.push(De),De=In();if(ye!==e){for(De=[],ze=G();ze!==e;)De.push(ze),ze=G();De!==e&&(ze=ya())!==e?(U=function(u,k){for(var _={named:[],implicit:[]},C=0;C<u.length;C++){var I=u[C];"implicit"===I.kind?_.implicit.push(I.graph):_.named.push(I.graph)}0===_.named.length&&0===_.implicit.length&&_.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var D={kind:"ask",token:"executableunit"};return D.dataset=_,D.pattern=k,D}(ye,ze),O=U):(r=O,O=e)}else r=O,O=e}else r=O,O=e}else r=O,O=e;else r=O,O=e;return E--,O===e&&(U=e,0===E&&X(ht)),O}()),I!==e&&(E++,U=r,h.substr(r,6)===Wi?($=Wi,r+=6):($=e,0===E&&X(ms)),$===e&&(h.substr(r,6)===jn?($=jn,r+=6):($=e,0===E&&X(Pa))),$!==e&&(fe=Yh())!==e?U=$=[$,fe]:(r=U,U=e),U===e&&(U=null),U!==e&&(U=function(u){return null!=u?u[1]:null}(U)),E--,(O=U)===e&&(U=e,0===E&&X(ys)),(D=O)!==e)?(C=function(u,k,_){return{token:"query",kind:"query",prologue:u,units:[k],inlineData:_}}(C,I,D),_=C):(r=_,_=e)):(r=_,_=e),E--,_===e&&(C=e,0===E&&X(y)),E--,(k=_)===e&&0===E&&X(l),(u=k)===e&&(u=function(){var k;return E++,k=function _(){var C,I,D,O,U,$,fe,ye,De,ze;if(E++,C=r,(I=Rh())!==e){for(D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(E++,(ze=function(){var Ae,Je,rt,je,et,nt,lt,Tt,at;if(E++,Ae=r,"LOAD"===h.substr(r,4)?(Je="LOAD",r+=4):(Je=e,0===E&&X(Fo)),Je===e&&("load"===h.substr(r,4)?(Je="load",r+=4):(Je=e,0===E&&X(li))),Je!==e){for(rt=[],je=G();je!==e;)rt.push(je),je=G();if(rt!==e)if((je=gr())!==e){for(et=[],nt=G();nt!==e;)et.push(nt),nt=G();if(et!==e){if(nt=r,"INTO"===h.substr(r,4)?(lt="INTO",r+=4):(lt=e,0===E&&X(Pu)),lt===e&&("into"===h.substr(r,4)?(lt="into",r+=4):(lt=e,0===E&&X(Qu))),lt!==e){for(Tt=[],at=G();at!==e;)Tt.push(at),at=G();Tt!==e&&(at=nc())!==e?nt=lt=[lt,Tt,at]:(r=nt,nt=e)}else r=nt,nt=e;nt===e&&(nt=null),nt!==e?(Je=function(u,k){var _={kind:"load",token:"executableunit"};return _.sourceGraph=u,null!=k&&(_.destinyGraph=k[2]),_}(je,nt),Ae=Je):(r=Ae,Ae=e)}else r=Ae,Ae=e}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return E--,Ae===e&&(Je=e,0===E&&X(bs)),Ae}())===e&&(ze=function(){var Ae,Je,rt,je,et,nt;if(E++,Ae=r,"CLEAR"===h.substr(r,5)?(Je="CLEAR",r+=5):(Je=e,0===E&&X(Uu)),Je===e&&("clear"===h.substr(r,5)?(Je="clear",r+=5):(Je=e,0===E&&X(Gu))),Je!==e){for(rt=[],je=G();je!==e;)rt.push(je),je=G();if(rt!==e)if(h.substr(r,6)===Mn?(je=Mn,r+=6):(je=e,0===E&&X(xs)),je===e&&(h.substr(r,6)===Bn?(je=Bn,r+=6):(je=e,0===E&&X(ui))),je===e&&(je=null),je!==e){for(et=[],nt=G();nt!==e;)et.push(nt),nt=G();et!==e&&(nt=zh())!==e?(Je=function(u){var k={kind:"clear",token:"executableunit"};return k.destinyGraph=u,k}(nt),Ae=Je):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return E--,Ae===e&&(Je=e,0===E&&X(za)),Ae}())===e&&(ze=function(){var Ae,Je,rt,je,et,nt;if(E++,Ae=r,"DROP"===h.substr(r,4)?(Je="DROP",r+=4):(Je=e,0===E&&X(Wu)),Je===e&&("drop"===h.substr(r,4)?(Je="drop",r+=4):(Je=e,0===E&&X(nr))),Je!==e){for(rt=[],je=G();je!==e;)rt.push(je),je=G();if(rt!==e)if(h.substr(r,6)===Mn?(je=Mn,r+=6):(je=e,0===E&&X(xs)),je===e&&(h.substr(r,6)===Bn?(je=Bn,r+=6):(je=e,0===E&&X(ui))),je===e&&(je=null),je!==e){for(et=[],nt=G();nt!==e;)et.push(nt),nt=G();et!==e&&(nt=zh())!==e?(Je=function(u){var k={kind:"drop",token:"executableunit"};return k.destinyGraph=u,k}(nt),Ae=Je):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return E--,Ae===e&&(Je=e,0===E&&X(Hu)),Ae}())===e&&(ze=function(){var Ae,Je,rt,je,et,nt;if(E++,Ae=r,"CREATE"===h.substr(r,6)?(Je="CREATE",r+=6):(Je=e,0===E&&X(qu)),Je===e&&("create"===h.substr(r,6)?(Je="create",r+=6):(Je=e,0===E&&X(Xu))),Je!==e){for(rt=[],je=G();je!==e;)rt.push(je),je=G();if(rt!==e)if(h.substr(r,6)===Mn?(je=Mn,r+=6):(je=e,0===E&&X(xs)),je===e&&(h.substr(r,6)===Bn?(je=Bn,r+=6):(je=e,0===E&&X(ui))),je===e&&(je=null),je!==e){for(et=[],nt=G();nt!==e;)et.push(nt),nt=G();et!==e&&(nt=nc())!==e?(Je=function(u){var k={kind:"create",token:"executableunit"};return k.destinyGraph=u,k}(nt),Ae=Je):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return E--,Ae===e&&(Je=e,0===E&&X(Va)),Ae}())===e&&(ze=function(){var Ae,Je,rt,je,et,nt;if(E++,Ae=r,h.substr(r,6)===To?(Je=To,r+=6):(Je=e,0===E&&X(Ya)),Je===e&&(h.substr(r,6)===zi?(Je=zi,r+=6):(Je=e,0===E&&X(Cs))),Je!==e){for(rt=[],je=G();je!==e;)rt.push(je),je=G();if(rt!==e)if(h.substr(r,4)===Lo?(je=Lo,r+=4):(je=e,0===E&&X(pi)),je===e&&(h.substr(r,4)===Nr?(je=Nr,r+=4):(je=e,0===E&&X(qi))),je!==e){for(et=[],nt=G();nt!==e;)et.push(nt),nt=G();et!==e&&(nt=Xh())!==e?(Je=function(u){var k={kind:"insertdata",token:"executableunit"};return k.quads=u,k}(nt),Ae=Je):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return E--,Ae===e&&(Je=e,0===E&&X(Ka)),Ae}())===e&&(ze=function(){var Ae,Je,rt,je,et;if(E++,Ae=r,h.substr(r,6)===yr?(Je=yr,r+=6):(Je=e,0===E&&X(an)),Je===e&&(h.substr(r,6)===dn?(Je=dn,r+=6):(Je=e,0===E&&X(Ss))),Je!==e){for(rt=[],je=G();je!==e;)rt.push(je),je=G();rt!==e?(h.substr(r,4)===Lo?(je=Lo,r+=4):(je=e,0===E&&X(pi)),je===e&&(h.substr(r,4)===Nr?(je=Nr,r+=4):(je=e,0===E&&X(qi))),je!==e&&(et=Xh())!==e?(Je=function(u){var k={kind:"deletedata",token:"executableunit"};return k.quads=u,k}(et),Ae=Je):(r=Ae,Ae=e)):(r=Ae,Ae=e)}else r=Ae,Ae=e;return E--,Ae===e&&(Je=e,0===E&&X(Za)),Ae}())===e&&(ze=function(){var Ae,Je,rt,je,et,nt;if(E++,Ae=r,h.substr(r,6)===yr?(Je=yr,r+=6):(Je=e,0===E&&X(an)),Je===e&&(h.substr(r,6)===dn?(Je=dn,r+=6):(Je=e,0===E&&X(Ss))),Je!==e){for(rt=[],je=G();je!==e;)rt.push(je),je=G();if(rt!==e)if(h.substr(r,5)===ve?(je=ve,r+=5):(je=e,0===E&&X(me)),je===e&&(h.substr(r,5)===_e?(je=_e,r+=5):(je=e,0===E&&X(Ce))),je!==e){for(et=[],nt=G();nt!==e;)et.push(nt),nt=G();et!==e&&(nt=tn())!==e?(Je=function(u){var k={kind:"modify"};k.pattern=u,k.with=null,k.using=null;var _=[],C=u.patterns[0];C=null==C.triplesContext&&null!=C.patterns?C.patterns[0].triplesContext:C.triplesContext;for(var I=0;I<C.length;I++){var D={},O=C[I];D.subject=O.subject,D.predicate=O.predicate,D.object=O.object,D.graph=O.graph,_.push(D)}return k.delete=_,k}(nt),Ae=Je):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return E--,Ae===e&&(Je=e,0===E&&X(Ju)),Ae}())===e&&(ze=function(){var Ae,Je,rt,je,et,nt,lt,Tt,at,Nt,Dt,Ft,_r,lr,hr;if(E++,Ae=r,Je=r,"WITH"===h.substr(r,4)?(rt="WITH",r+=4):(rt=e,0===E&&X(Jr)),rt===e&&("with"===h.substr(r,4)?(rt="with",r+=4):(rt=e,0===E&&X(tl))),rt!==e){for(je=[],et=G();et!==e;)je.push(et),et=G();je!==e&&(et=gr())!==e?Je=rt=[rt,je,et]:(r=Je,Je=e)}else r=Je,Je=e;if(Je===e&&(Je=null),Je!==e){for(rt=[],je=G();je!==e;)rt.push(je),je=G();if(rt!==e){if(je=r,E++,_r=r,h.substr(r,6)===yr?(lr=yr,r+=6):(lr=e,0===E&&X(an)),lr===e&&(h.substr(r,6)===dn?(lr=dn,r+=6):(lr=e,0===E&&X(Ss))),lr!==e&&(hr=qh())!==e?_r=lr=hr:(r=_r,_r=e),E--,_r===e&&(lr=e,0===E&&X(Ku)),(et=_r)!==e){for(nt=[],lt=G();lt!==e;)nt.push(lt),lt=G();nt!==e?((lt=Hh())===e&&(lt=null),lt!==e?je=et=[et,nt,lt]:(r=je,je=e)):(r=je,je=e)}else r=je,je=e;if(je===e&&(je=Hh()),je!==e){for(et=[],nt=G();nt!==e;)et.push(nt),nt=G();if(et!==e){for(nt=[],lt=Wh();lt!==e;)nt.push(lt),lt=Wh();if(nt!==e){for(lt=[],Tt=G();Tt!==e;)lt.push(Tt),Tt=G();if(lt!==e)if(h.substr(r,5)===ve?(Tt=ve,r+=5):(Tt=e,0===E&&X(me)),Tt===e&&(h.substr(r,5)===_e?(Tt=_e,r+=5):(Tt=e,0===E&&X(Ce))),Tt!==e){for(at=[],Nt=G();Nt!==e;)at.push(Nt),Nt=G();if(at!==e)if((Nt=tn())!==e){for(Dt=[],Ft=G();Ft!==e;)Dt.push(Ft),Ft=G();Dt!==e?(Je=function(u,k,_,C){var I={kind:"modify"};return I.with=""!=u&&null!=u?u[2]:null,3!==k.length||""!==k[2]&&null!=k[2]?3===k.length&&null!=k[0].length&&null!=k[1].length&&null!=k[2].length?(I.delete=k[0],I.insert=k[2]):(I.insert=k,I.delete=null):(I.delete=k[0],I.insert=null),""!=_&&(I.using=_),I.pattern=C,I}(Je,je,nt,Nt),Ae=Je):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e}else r=Ae,Ae=e}else r=Ae,Ae=e}else r=Ae,Ae=e}else r=Ae,Ae=e;return E--,Ae===e&&(Je=e,0===E&&X(As)),Ae}()),E--,ze===e&&0===E&&X(pn),(O=ze)!==e){for(U=r,$=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if(59===h.charCodeAt(r)?(fe=sn,r++):(fe=e,0===E&&X(jr)),fe!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();ye!==e?((De=_())===e&&(De=null),De!==e?U=$=[$,fe,ye,De]:(r=U,U=e)):(r=U,U=e)}else r=U,U=e;else r=U,U=e;U===e&&(U=null),U!==e?(I=function(u,k,_){var C={token:"query",kind:"update"};C.prologue=u;var I=[k];return null!=_&&null!=_.length&&null!=_[3]&&null!=_[3].units&&(I=I.concat(_[3].units)),C.units=I,C}(I,O,U),C=I):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;return E--,C===e&&(I=e,0===E&&X(Bu)),C}(),E--,k===e&&0===E&&X(Dr),k}()),u;var u,k,_,C,I,D,O,U,$,fe}function Rh(){var u,k,_,C,I;if(E++,u=r,(k=function(){var D,O,U,$,fe;for(E++,D=r,O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if(h.substr(r,4)===b?(U=b,r+=4):(U=e,0===E&&X(A)),U===e&&(h.substr(r,4)===T?(U=T,r+=4):(U=e,0===E&&X(B))),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();$!==e&&(fe=Fu())!==e?(O=function(u){kg(u);var k={token:"base"};return k.value=u,k}(fe),D=O):(r=D,D=e)}else r=D,D=e;else r=D,D=e;return E--,D===e&&(O=e,0===E&&X(a)),D}())===e&&(k=null),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e){for(C=[],I=Dh();I!==e;)C.push(I),I=Dh();C!==e?u=k=function(u,k){return{token:"prologue",base:u,prefixes:k}}(k,C):(r=u,u=e)}else r=u,u=e}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(v)),u}function Dh(){var u,k,_,C,I,D,O;for(E++,u=r,k=[],_=G();_!==e;)k.push(_),_=G();if(k!==e)if(h.substr(r,6)===L?(_=L,r+=6):(_=e,0===E&&X(Q)),_===e&&(h.substr(r,6)===j?(_=j,r+=6):(_=e,0===E&&X(V))),_!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();if(C!==e)if((I=mc())!==e){for(D=[],O=G();O!==e;)D.push(O),O=G();D!==e&&(O=Fu())!==e?u=k=function(u,k){wg(u,k);var _={token:"prefix"};return _.prefix=u,_.local=k,_}(I,O):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(P)),u}function jh(){var u,k,_,C,I,D,O,U,$,fe,ye,De,ze,Ae,Je,rt,je,et,nt,lt;for(E++,u=r,k=[],_=G();_!==e;)k.push(_),_=G();if(k!==e)if("SELECT"===h.substr(r,6)?(_="SELECT",r+=6):(_=e,0===E&&X(ie)),_===e&&("select"===h.substr(r,6)?(_="select",r+=6):(_=e,0===E&&X(we))),_!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();if(C!==e)if(h.substr(r,8)===Te?(I=Te,r+=8):(I=e,0===E&&X(Fe)),I===e&&(h.substr(r,8)===ke?(I=ke,r+=8):(I=e,0===E&&X(de))),I===e&&(h.substr(r,7)===Le?(I=Le,r+=7):(I=e,0===E&&X(Me)),I===e&&(h.substr(r,7)===Ze?(I=Ze,r+=7):(I=e,0===E&&X(H)))),I===e&&(I=null),I!==e){for(D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e){for(O=[],U=r,$=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if((fe=vr())!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();ye!==e?U=$=[$,fe,ye]:(r=U,U=e)}else r=U,U=e;else r=U,U=e;if(U===e){for(U=r,$=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if(40===h.charCodeAt(r)?(fe=z,r++):(fe=e,0===E&&X(ne)),fe!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();if(ye!==e)if((De=It())!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();if(ze!==e)if(h.substr(r,2)===ge?(Ae=ge,r+=2):(Ae=e,0===E&&X(xe)),Ae===e&&(h.substr(r,2)===Re?(Ae=Re,r+=2):(Ae=e,0===E&&X(He))),Ae!==e){for(Je=[],rt=G();rt!==e;)Je.push(rt),rt=G();if(Je!==e)if((rt=vr())!==e){for(je=[],et=G();et!==e;)je.push(et),et=G();if(je!==e)if(41===h.charCodeAt(r)?(et=We,r++):(et=e,0===E&&X(Ke)),et!==e){for(nt=[],lt=G();lt!==e;)nt.push(lt),lt=G();nt!==e?U=$=[$,fe,ye,De,ze,Ae,Je,rt,je,et,nt]:(r=U,U=e)}else r=U,U=e;else r=U,U=e}else r=U,U=e;else r=U,U=e}else r=U,U=e;else r=U,U=e}else r=U,U=e;else r=U,U=e}else r=U,U=e;else r=U,U=e}if(U!==e)for(;U!==e;){for(O.push(U),U=r,$=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if((fe=vr())!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();ye!==e?U=$=[$,fe,ye]:(r=U,U=e)}else r=U,U=e;else r=U,U=e;if(U===e){for(U=r,$=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if(40===h.charCodeAt(r)?(fe=z,r++):(fe=e,0===E&&X(ne)),fe!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();if(ye!==e)if((De=It())!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();if(ze!==e)if(h.substr(r,2)===ge?(Ae=ge,r+=2):(Ae=e,0===E&&X(xe)),Ae===e&&(h.substr(r,2)===Re?(Ae=Re,r+=2):(Ae=e,0===E&&X(He))),Ae!==e){for(Je=[],rt=G();rt!==e;)Je.push(rt),rt=G();if(Je!==e)if((rt=vr())!==e){for(je=[],et=G();et!==e;)je.push(et),et=G();if(je!==e)if(41===h.charCodeAt(r)?(et=We,r++):(et=e,0===E&&X(Ke)),et!==e){for(nt=[],lt=G();lt!==e;)nt.push(lt),lt=G();nt!==e?U=$=[$,fe,ye,De,ze,Ae,Je,rt,je,et,nt]:(r=U,U=e)}else r=U,U=e;else r=U,U=e}else r=U,U=e;else r=U,U=e}else r=U,U=e;else r=U,U=e}else r=U,U=e;else r=U,U=e}else r=U,U=e;else r=U,U=e}}else O=e;if(O===e){for(O=r,U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if(42===h.charCodeAt(r)?($=mt,r++):($=e,0===E&&X(yt)),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();fe!==e?O=U=[U,$,fe]:(r=O,O=e)}else r=O,O=e;else r=O,O=e}O!==e?u=k=function(u,k){var _=[];if(3===k.length&&"*"===k[1])return{vars:[{token:"variable",kind:"*"}],modifier:pp(u)};for(var C=0;C<k.length;C++){var I=k[C];3===I.length?_.push({token:"variable",kind:"var",value:I[1]}):_.push({token:"variable",kind:"aliased",expression:I[3],alias:I[7]})}return{vars:_,modifier:pp(u)}}(I,O):(r=u,u=e)}else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(te)),u}function In(){var u,k,_,C,I,D;if(E++,u=r,"FROM"===h.substr(r,4)?(k="FROM",r+=4):(k=e,0===E&&X(Nn)),k===e&&("from"===h.substr(r,4)?(k="from",r+=4):(k=e,0===E&&X(ls))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=function(){var O,U,$;for(E++,O=r,U=[],$=G();$!==e;)U.push($),$=G();return U!==e&&($=Mh())!==e?(U=function(u){return{graph:u,kind:"default",token:"graphClause"}}($),O=U):(r=O,O=e),E--,O===e&&(U=e,0===E&&X(us)),O}())===e&&(C=function(){var O,U,$,fe;if(E++,O=r,h.substr(r,5)===Hr?(U=Hr,r+=5):(U=e,0===E&&X(ai)),U===e&&(h.substr(r,5)===rn?(U=rn,r+=5):(U=e,0===E&&X(cn))),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();$!==e&&(fe=Mh())!==e?(U=function(u){return{graph:u,kind:"named",token:"graphCluase"}}(fe),O=U):(r=O,O=e)}else r=O,O=e;return E--,O===e&&(U=e,0===E&&X(fs)),O}()),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e?u=k=C:(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Ot)),u}function Mh(){var u;return E++,u=gr(),E--,u===e&&0===E&&X(Wr),u}function ya(){var u,k,_,C,I,D;if(E++,u=r,h.substr(r,5)===ve?(k=ve,r+=5):(k=e,0===E&&X(me)),k===e&&(h.substr(r,5)===_e?(k=_e,r+=5):(k=e,0===E&&X(Ce))),k===e&&(k=null),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=tn())!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e?u=k=C:(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(nn)),u}function ma(){var u,k,_,C,I,D,O,U,$;return E++,u=r,(k=function(){var D,O,U,$,fe,ye,De;if(E++,D=r,"GROUP"===h.substr(r,5)?(O="GROUP",r+=5):(O=e,0===E&&X(xo)),O===e&&("group"===h.substr(r,5)?(O="group",r+=5):(O=e,0===E&&X(Bi))),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if("BY"===h.substr(r,2)?($="BY",r+=2):($=e,0===E&&X(Xt)),$===e&&("by"===h.substr(r,2)?($="by",r+=2):($=e,0===E&&X(hn))),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();if(fe!==e){if(ye=[],(De=Bh())!==e)for(;De!==e;)ye.push(De),De=Bh();else ye=e;ye!==e?D=O=ye:(r=D,D=e)}else r=D,D=e}else r=D,D=e;else r=D,D=e}else r=D,D=e;return E--,D===e&&(O=e,0===E&&X(Mi)),D}())===e&&(k=null),k!==e?((_=function(){var D,O,U,$;if(E++,D=r,"HAVING"===h.substr(r,6)?(O="HAVING",r+=6):(O=e,0===E&&X(hs)),O!==e){if(U=[],($=Ph())!==e)for(;$!==e;)U.push($),$=Ph();else U=e;U!==e?D=O=[O,U]:(r=D,D=e)}else r=D,D=e;return E--,D===e&&(O=e,0===E&&X(ot)),D}())===e&&(_=null),_!==e?((C=function(){var D,O,U,$,fe,ye,De,ze;if(E++,D=r,"ORDER"===h.substr(r,5)?(O="ORDER",r+=5):(O=e,0===E&&X(_a)),O===e&&("order"===h.substr(r,5)?(O="order",r+=5):(O=e,0===E&&X(Nu))),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if("BY"===h.substr(r,2)?($="BY",r+=2):($=e,0===E&&X(Xt)),$===e&&("by"===h.substr(r,2)?($="by",r+=2):($=e,0===E&&X(hn))),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();if(fe!==e){if(ye=[],(De=Qh())!==e)for(;De!==e;)ye.push(De),De=Qh();else ye=e;if(ye!==e){for(De=[],ze=G();ze!==e;)De.push(ze),ze=G();De!==e?D=O=ye:(r=D,D=e)}else r=D,D=e}else r=D,D=e}else r=D,D=e;else r=D,D=e}else r=D,D=e;return E--,D===e&&(O=e,0===E&&X(ko)),D}())===e&&(C=null),C!==e?(E++,O=r,(U=Uh())!==e?(($=Gh())===e&&($=null),$!==e?O=U=[U,$]:(r=O,O=e)):(r=O,O=e),O===e&&(O=r,(U=Gh())!==e?(($=Uh())===e&&($=null),$!==e?O=U=[U,$]:(r=O,O=e)):(r=O,O=e)),O!==e&&(O=function(u){for(var k={},_=0;_<u.length;_++){var C=u[_];null!=C&&null!=C.limit?k.limit=C.limit:null!=C&&null!=C.offset&&(k.offset=C.offset)}return k}(O)),E--,(D=O)===e&&(O=e,0===E&&X(Ia)),(I=D)===e&&(I=null),I!==e?u=k=function(u,k,_){var C={};return null!=_&&(null!=_.limit&&(C.limit=_.limit),null!=_.offset&&(C.offset=_.offset)),null!=u&&(C.group=u),C.order=k,C}(k,C,I):(r=u,u=e)):(r=u,u=e)):(r=u,u=e)):(r=u,u=e),E--,u===e&&(k=e,0===E&&X(bo)),u}function Bh(){var u,k,_,C,I,D,O,U,$,fe,ye;for(E++,u=r,k=[],_=G();_!==e;)k.push(_),_=G();if(k!==e)if((_=yc())!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();C!==e?u=k=_:(r=u,u=e)}else r=u,u=e;else r=u,u=e;if(u===e){for(u=r,k=[],_=G();_!==e;)k.push(_),_=G();if(k!==e)if((_=Zh())!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();C!==e?u=k=_:(r=u,u=e)}else r=u,u=e;else r=u,u=e;if(u===e){for(u=r,k=[],_=G();_!==e;)k.push(_),_=G();if(k!==e)if(40===h.charCodeAt(r)?(_=z,r++):(_=e,0===E&&X(ne)),_!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();if(C!==e)if((I=It())!==e){for(D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e){if(O=r,h.substr(r,2)===ge?(U=ge,r+=2):(U=e,0===E&&X(xe)),U===e&&(h.substr(r,2)===Re?(U=Re,r+=2):(U=e,0===E&&X(He))),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();$!==e&&(fe=vr())!==e?O=U=[U,$,fe]:(r=O,O=e)}else r=O,O=e;if(O===e&&(O=null),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if(41===h.charCodeAt(r)?($=We,r++):($=e,0===E&&X(Ke)),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();fe!==e?u=k=function(u,k){return 0!=k.length?{token:"aliased_expression",expression:u,alias:k[2]}:u}(I,O):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e}else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e;if(u===e){for(u=r,k=[],_=G();_!==e;)k.push(_),_=G();if(k!==e)if((_=vr())!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();C!==e?u=k=_:(r=u,u=e)}else r=u,u=e;else r=u,u=e}}}return E--,u===e&&(k=e,0===E&&X(qr)),u}function Ph(){var u;return E++,u=ic(),E--,u===e&&0===E&&X(ps),u}function Qh(){var u,k,_,C,I,D;if(E++,u=r,"ASC"===h.substr(r,3)?(k="ASC",r+=3):(k=e,0===E&&X(Aa)),k===e&&("asc"===h.substr(r,3)?(k="asc",r+=3):(k=e,0===E&&X(Ui)),k===e&&("DESC"===h.substr(r,4)?(k="DESC",r+=4):(k=e,0===E&&X(Fa)),k===e&&("desc"===h.substr(r,4)?(k="desc",r+=4):(k=e,0===E&&X(Ea))))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=gc())!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e?u=k=function(u,k){return{direction:u.toUpperCase(),expression:k}}(k,C):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;if(u===e)if(u=r,(k=ic())===e&&(k=vr()),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();_!==e?u=k=function(u){return"var"===u.token&&(u={token:"expression",expressionType:"atomic",primaryexpression:"var",value:u}),{direction:"ASC",expression:u}}(k):(r=u,u=e)}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Co)),u}function Uh(){var u,k,_,C,I,D;if(E++,u=r,"LIMIT"===h.substr(r,5)?(k="LIMIT",r+=5):(k=e,0===E&&X(on)),k===e&&("limit"===h.substr(r,5)?(k="limit",r+=5):(k=e,0===E&&X(Du))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=as())!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e?u=k=function(u){return{limit:parseInt(u.value)}}(C):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Ru)),u}function Gh(){var u,k,_,C,I,D;if(E++,u=r,"OFFSET"===h.substr(r,6)?(k="OFFSET",r+=6):(k=e,0===E&&X(ju)),k===e&&("offset"===h.substr(r,6)?(k="offset",r+=6):(k=e,0===E&&X(Mu))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=as())!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e?u=k=function(u){return{offset:parseInt(u.value)}}(C):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Gi)),u}function bu(){var u;return E++,(u=gr())===e&&(u=_u())===e&&(u=Su())===e&&(u=Au())===e&&(h.substr(r,5)===Dn?(u=Dn,r+=5):(u=e,0===E&&X(Hi))),E--,u===e&&0===E&&X(Ba),u}function Hh(){var u,k,_;return E++,u=r,h.substr(r,6)===To?(k=To,r+=6):(k=e,0===E&&X(Ya)),k===e&&(h.substr(r,6)===zi?(k=zi,r+=6):(k=e,0===E&&X(Cs))),k!==e&&(_=qh())!==e?u=k=_:(r=u,u=e),E--,u===e&&(k=e,0===E&&X(nl)),u}function Wh(){var u,k,_,C,I,D,O,U;for(E++,u=r,k=[],_=G();_!==e;)k.push(_),_=G();if(k!==e)if("USING"===h.substr(r,5)?(_="USING",r+=5):(_=e,0===E&&X(ol)),_===e&&("using"===h.substr(r,5)?(_="using",r+=5):(_=e,0===E&&X(Ts))),_!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();if(C!==e){if((I=gr())===e)if(I=r,h.substr(r,5)===Hr?(D=Hr,r+=5):(D=e,0===E&&X(ai)),D===e&&(h.substr(r,5)===rn?(D=rn,r+=5):(D=e,0===E&&X(cn))),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e&&(U=gr())!==e?I=D=[D,O,U]:(r=I,I=e)}else r=I,I=e;I!==e?u=k=function(u){return null!=u.length?{kind:"named",uri:u[2]}:{kind:"default",uri:u}}(I):(r=u,u=e)}else r=u,u=e}else r=u,u=e;else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(il)),u}function nc(){var u,k,_,C;if(E++,u=r,h.substr(r,5)===ln?(k=ln,r+=5):(k=e,0===E&&X(Lr)),k===e&&(h.substr(r,5)===Qn?(k=Qn,r+=5):(k=e,0===E&&X(Xi))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();_!==e&&(C=gr())!==e?u=k=C:(r=u,u=e)}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(sl)),u}function zh(){var u,k;return E++,u=r,(k=nc())!==e&&(k=k),(u=k)===e&&(u=r,h.substr(r,7)===Is?(k=Is,r+=7):(k=e,0===E&&X(Ns)),k===e&&(h.substr(r,7)===ll?(k=ll,r+=7):(k=e,0===E&&X(Yu))),k!==e&&(k="default"),(u=k)===e&&(u=r,h.substr(r,5)===Hr?(k=Hr,r+=5):(k=e,0===E&&X(ai)),k===e&&(h.substr(r,5)===rn?(k=rn,r+=5):(k=e,0===E&&X(cn))),k!==e&&(k="named"),(u=k)===e&&(u=r,"ALL"===h.substr(r,3)?(k="ALL",r+=3):(k=e,0===E&&X(vi)),k===e&&("all"===h.substr(r,3)?(k="all",r+=3):(k=e,0===E&&X(Os))),k!==e&&(k="all"),u=k))),E--,u===e&&(k=e,0===E&&X(al)),u}function qh(){var u,k,_,C,I,D,O,U,$;for(E++,u=r,k=[],_=G();_!==e;)k.push(_),_=G();if(k!==e)if(123===h.charCodeAt(r)?(_=Oe,r++):(_=e,0===E&&X(Pe)),_!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();if(C!==e)if((I=Jh())!==e){for(D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(125===h.charCodeAt(r)?(O=Ge,r++):(O=e,0===E&&X($e)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e?u=k=vn(I):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Rs)),u}function Xh(){var u,k,_,C,I,D,O,U,$;for(E++,u=r,k=[],_=G();_!==e;)k.push(_),_=G();if(k!==e)if(123===h.charCodeAt(r)?(_=Oe,r++):(_=e,0===E&&X(Pe)),_!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();if(C!==e)if((I=Jh())!==e){for(D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(125===h.charCodeAt(r)?(O=Ge,r++):(O=e,0===E&&X($e)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e?u=k=vn(I):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Hn)),u}function Jh(){var u,k,_,C,I,D,O;if(E++,u=r,(k=rs())===e&&(k=null),k!==e){for(_=[],C=r,(I=Vh())!==e?(46===h.charCodeAt(r)?(D=Wt,r++):(D=e,0===E&&X(zt)),D===e&&(D=null),D!==e?((O=rs())===e&&(O=null),O!==e?C=I=[I,D,O]:(r=C,C=e)):(r=C,C=e)):(r=C,C=e);C!==e;)_.push(C),C=r,(I=Vh())!==e?(46===h.charCodeAt(r)?(D=Wt,r++):(D=e,0===E&&X(zt)),D===e&&(D=null),D!==e?((O=rs())===e&&(O=null),O!==e?C=I=[I,D,O]:(r=C,C=e)):(r=C,C=e)):(r=C,C=e);_!==e?u=k=function(u,k){var _=[];if(null!=u&&null!=u.triplesContext)for(var C=0;C<u.triplesContext.length;C++)(I=u.triplesContext[C]).graph=null,_.push(I);if(k&&k.length>0&&k[0].length>0&&(_=_.concat(k[0][0].quadsContext),null!=k[0][2]&&null!=k[0][2].triplesContext))for(C=0;C<k[0][2].triplesContext.length;C++){var I;(I=k[0][2].triplesContext[C]).graph=null,_.push(I)}return{token:"quads",quadsContext:_}}(k,_):(r=u,u=e)}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(mr)),u}function Vh(){var u,k,_,C,I,D,O,U,$,fe,ye,De,ze;for(E++,u=r,k=[],_=G();_!==e;)k.push(_),_=G();if(k!==e)if(h.substr(r,5)===ln?(_=ln,r+=5):(_=e,0===E&&X(Lr)),_===e&&(h.substr(r,5)===Qn?(_=Qn,r+=5):(_=e,0===E&&X(Xi))),_!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();if(C!==e)if((I=ss())!==e){for(D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(123===h.charCodeAt(r)?(O=Oe,r++):(O=e,0===E&&X(Pe)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if(($=rs())===e&&($=null),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();if(fe!==e)if(125===h.charCodeAt(r)?(ye=Ge,r++):(ye=e,0===E&&X($e)),ye!==e){for(De=[],ze=G();ze!==e;)De.push(ze),ze=G();De!==e?u=k=function(u,k){var _=[];if(null!=k)for(var C=0;C<k.triplesContext.length;C++){var I=k.triplesContext[C];I.graph=u,_.push(I)}return{token:"quadsnottriples",quadsContext:_}}(I,$):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e;return E--,u===e&&(k=e,0===E&&X($u)),u}function rs(){var u,k,_,C,I,D,O;if(E++,u=r,(k=ep())!==e){for(_=r,C=[],I=G();I!==e;)C.push(I),I=G();if(C!==e)if(46===h.charCodeAt(r)?(I=Wt,r++):(I=e,0===E&&X(zt)),I!==e){for(D=[],O=G();O!==e;)D.push(O),O=G();D!==e?((O=rs())===e&&(O=null),O!==e?_=C=[C,I,D,O]:(r=_,_=e)):(r=_,_=e)}else r=_,_=e;else r=_,_=e;_===e&&(_=null),_!==e?u=k=function(u,k){var _=u.triplesContext;return null!=k&&"object"==typeof k&&null!=k.length&&null!=k[3]&&null!=k[3].triplesContext&&(_=_.concat(k[3].triplesContext)),{token:"triplestemplate",triplesContext:_}}(k,_):(r=u,u=e)}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Ji)),u}function tn(){var u,k,_,C,I,D,O,U,$,fe;if(E++,u=r,123===h.charCodeAt(r)?(k=Oe,r++):(k=e,0===E&&X(Pe)),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(E++,O=r,(U=jh())!==e&&($=ya())!==e&&(fe=ma())!==e?O=U=function(u,k,_){var C={kind:"select",token:"subselect"};return C.projection=u.vars,C.modifier=u.modifier,C.pattern=k,null!=_&&null!=_.limit&&(C.limit=_.limit),null!=_&&null!=_.offset&&(C.offset=_.offset),null!=_&&null!=_.order&&""!=_.order&&(C.order=_.order),null!=_&&null!=_.group&&(C.group=_.group),C}(U,$,fe):(r=O,O=e),E--,O===e&&(U=e,0===E&&X(ee)),(C=O)!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e?(125===h.charCodeAt(r)?(D=Ge,r++):(D=e,0===E&&X($e)),D!==e?u=k=C:(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;if(u===e)if(u=r,123===h.charCodeAt(r)?(k=Oe,r++):(k=e,0===E&&X(Pe)),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=function(){var O,U,$,fe,ye,De,ze,Ae,Je,rt;if(E++,O=r,(U=xu())===e&&(U=null),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e){if(fe=[],ye=r,(De=Kh())!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();if(ze!==e)if(46===h.charCodeAt(r)?(Ae=Wt,r++):(Ae=e,0===E&&X(zt)),Ae===e&&(Ae=null),Ae!==e){for(Je=[],rt=G();rt!==e;)Je.push(rt),rt=G();Je!==e?((rt=xu())===e&&(rt=null),rt!==e?ye=De=[De,ze,Ae,Je,rt]:(r=ye,ye=e)):(r=ye,ye=e)}else r=ye,ye=e;else r=ye,ye=e}else r=ye,ye=e;for(;ye!==e;)if(fe.push(ye),ye=r,(De=Kh())!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();if(ze!==e)if(46===h.charCodeAt(r)?(Ae=Wt,r++):(Ae=e,0===E&&X(zt)),Ae===e&&(Ae=null),Ae!==e){for(Je=[],rt=G();rt!==e;)Je.push(rt),rt=G();Je!==e?((rt=xu())===e&&(rt=null),rt!==e?ye=De=[De,ze,Ae,Je,rt]:(r=ye,ye=e)):(r=ye,ye=e)}else r=ye,ye=e;else r=ye,ye=e}else r=ye,ye=e;fe!==e?(U=function(u,k){var _=[];null!=u&&u!=[]&&_.push(u);for(var C=0;C<k.length;C++)for(var I=0;I<k[C].length;I++)null!=k[C][I]&&null!=k[C][I].token&&_.push(k[C][I]);var D=[],O=[],U=[],$=[];for(C=0;C<_.length;C++)if("triplespattern"!==_[C].token&&"filter"!==_[C].token&&"bind"!==_[C].token){if(0!=O.length||0!=U.length){var fe=[];for(I=0;I<O.length;I++)fe=fe.concat(O[I].triplesContext);fe.length>0&&D.push({token:"basicgraphpattern",triplesContext:fe}),O=[]}D.push(_[C])}else"triplespattern"===_[C].token?O.push(_[C]):"bind"===_[C].token?$.push(_[C]):U.push(_[C]);if(0!=O.length||0!=U.length){for(fe=[],I=0;I<O.length;I++)fe=fe.concat(O[I].triplesContext);fe.length>0&&D.push({token:"basicgraphpattern",triplesContext:fe})}return{token:"groupgraphpattern",patterns:D,filters:U,binds:$}}(U,fe),O=U):(r=O,O=e)}else r=O,O=e}else r=O,O=e;return E--,O===e&&(U=e,0===E&&X(ef)),O}())!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e?(125===h.charCodeAt(r)?(D=Ge,r++):(D=e,0===E&&X($e)),D!==e?u=k=C:(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Ds)),u}function xu(){var u,k,_,C,I,D;if(E++,u=r,(k=function(){var O,U,$,fe,ye,De;for(E++,O=r,U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if(($=ku())!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();fe!==e&&(ye=rp())!==e?(U=function(u,k){var _=k.triplesContext,C=u;if(k.pairs)for(var I=0;I<k.pairs.length;I++){var D=k.pairs[I],O=null;null!=D[1].length&&(D[1]=D[1][0]),C.token&&"triplesnodecollection"===C.token?("path"===(O={subject:C.chainSubject[0],predicate:D[0],object:D[1]}).predicate.token&&"element"===O.predicate.kind&&(O.predicate=O.predicate.value),_.push(O),_=_.concat(C.triplesContext)):("path"===(O={subject:C,predicate:D[0],object:D[1]}).predicate.token&&"element"===O.predicate.kind&&(O.predicate=O.predicate.value),_.push(O))}var U={token:"triplessamesubject"};return U.triplesContext=_,U.chainSubject=C,U}($,ye),O=U):(r=O,O=e)}else r=O,O=e;else r=O,O=e;if(O===e){for(O=r,U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if(($=op())!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();fe!==e&&(E++,(De=function(){var ze,Ae,Je,rt,je,et,nt,lt,Tt,at,Nt,Dt,Ft;if(E++,ze=r,(Ae=is())===e&&(Ae=os()),Ae!==e){for(Je=[],rt=G();rt!==e;)Je.push(rt),rt=G();if(Je!==e)if((rt=tp())!==e){for(je=[],et=r,nt=[],lt=G();lt!==e;)nt.push(lt),lt=G();if(nt!==e)if(59===h.charCodeAt(r)?(lt=sn,r++):(lt=e,0===E&&X(jr)),lt!==e){for(Tt=[],at=G();at!==e;)Tt.push(at),at=G();if(Tt!==e){if(at=r,(Nt=is())===e&&(Nt=os()),Nt!==e){for(Dt=[],Ft=G();Ft!==e;)Dt.push(Ft),Ft=G();Dt!==e&&(Ft=yo())!==e?at=Nt=[Nt,Dt,Ft]:(r=at,at=e)}else r=at,at=e;at===e&&(at=null),at!==e?et=nt=[nt,lt,Tt,at]:(r=et,et=e)}else r=et,et=e}else r=et,et=e;else r=et,et=e;for(;et!==e;){for(je.push(et),et=r,nt=[],lt=G();lt!==e;)nt.push(lt),lt=G();if(nt!==e)if(59===h.charCodeAt(r)?(lt=sn,r++):(lt=e,0===E&&X(jr)),lt!==e){for(Tt=[],at=G();at!==e;)Tt.push(at),at=G();if(Tt!==e){if(at=r,(Nt=is())===e&&(Nt=os()),Nt!==e){for(Dt=[],Ft=G();Ft!==e;)Dt.push(Ft),Ft=G();Dt!==e&&(Ft=yo())!==e?at=Nt=[Nt,Dt,Ft]:(r=at,at=e)}else r=at,at=e;at===e&&(at=null),at!==e?et=nt=[nt,lt,Tt,at]:(r=et,et=e)}else r=et,et=e}else r=et,et=e;else r=et,et=e}je!==e?(Ae=function(u,k,_){for(var C={token:"propertylist"},I=[],D=[],O=0;O<k.length;O++)null!=k[O].triplesContext?(I=I.concat(k[O].triplesContext),"triplesnodecollection"===k[O].token&&null!=k[O].chainSubject.length?D.push([u,k[O].chainSubject[0]]):D.push([u,k[O].chainSubject])):D.push([u,k[O]]);for(O=0;O<_.length;O++)for(var U=_[O][3],$=U[0],fe=U[2]||[],ye=0;ye<fe.length;ye++)null!=fe[ye].triplesContext?(I=I.concat(fe[ye].triplesContext),D.push([$,fe[ye].chainSubject])):D.push([$,fe[ye]]);return C.pairs=D,C.triplesContext=I,C}(Ae,rt,je),ze=Ae):(r=ze,ze=e)}else r=ze,ze=e;else r=ze,ze=e}else r=ze,ze=e;return E--,ze===e&&(Ae=e,0===E&&X(jt)),ze}())===e&&(De=null),E--,De===e&&0===E&&X(Sl),(ye=De)!==e)?(U=function(u,k){var _=u.triplesContext,C=u.chainSubject;if(null!=k&&null!=k.pairs)for(var I=0;I<k.pairs.length;I++){var D=k.pairs[I];if(null!=D[1].length&&(D[1]=D[1][0]),"triplesnodecollection"===u.token)for(var O=0;O<C.length;O++){var U=C[O];if(null!=U.triplesContext){var $={subject:U.chainSubject,predicate:D[0],object:D[1]};_.concat(U.triplesContext)}else $={subject:C[O],predicate:D[0],object:D[1]},_.push($)}else $={subject:C,predicate:D[0],object:D[1]},_.push($)}var fe={token:"triplessamesubject"};return fe.triplesContext=_,fe.chainSubject=C,fe}($,ye),O=U):(r=O,O=e)}else r=O,O=e;else r=O,O=e}return E--,O===e&&(U=e,0===E&&X(bf)),O}())!==e){for(_=r,C=[],I=G();I!==e;)C.push(I),I=G();C!==e?(46===h.charCodeAt(r)?(I=Wt,r++):(I=e,0===E&&X(zt)),I!==e?((D=xu())===e&&(D=null),D!==e?_=C=[C,I,D]:(r=_,_=e)):(r=_,_=e)):(r=_,_=e),_===e&&(_=null),_!==e?u=k=function(u,k){var _=u.triplesContext;return null!=k&&"object"==typeof k&&null!=k&&null!=k.length&&null!=k[2]&&null!=k[2].triplesContext&&(_=_.concat(k[2].triplesContext)),{token:"triplespattern",triplesContext:_}}(k,_):(r=u,u=e)}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(hl)),u}function Kh(){var u,k,_,C,I;return E++,(u=function(){var k,_,C,I,D,O,U,$;if(E++,k=r,(_=tn())!==e){for(C=[],I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(h.substr(r,5)===gn?(O=gn,r+=5):(O=e,0===E&&X(Xn)),O===e&&(h.substr(r,5)===eo?(O=eo,r+=5):(O=e,0===E&&X(Hs))),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=tn())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;for(;I!==e;){for(C.push(I),I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(h.substr(r,5)===gn?(O=gn,r+=5):(O=e,0===E&&X(Xn)),O===e&&(h.substr(r,5)===eo?(O=eo,r+=5):(O=e,0===E&&X(Hs))),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=tn())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e}C!==e?(_=function(u,k){if(0===k.length)return u;for(var _={token:"graphunionpattern",value:[u]},C=0;C<k.length;C++)C==k.length-1?_.value.push(k[C][3]):(_.value.push(k[C][3]),_={token:"graphunionpattern",value:[_]});return _}(_,C),k=_):(r=k,k=e)}else r=k,k=e;return E--,k===e&&(_=e,0===E&&X(qn)),k}())===e&&(u=function(){var k,_,C,I,D;for(E++,k=r,_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(h.substr(r,8)===Vi?(C=Vi,r+=8):(C=e,0===E&&X(pl)),C===e&&(h.substr(r,8)===Ki?(C=Ki,r+=8):(C=e,0===E&&X(tf))),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e&&(D=tn())!==e?(_=function(u){return{token:"optionalgraphpattern",value:u}}(D),k=_):(r=k,k=e)}else r=k,k=e;else r=k,k=e;return E--,k===e&&(_=e,0===E&&X(yi)),k}())===e&&(u=function(){var k,_,C,I;if(E++,k=r,"MINUS"===h.substr(r,5)?(_="MINUS",r+=5):(_=e,0===E&&X(Zi)),_===e&&("minus"===h.substr(r,5)?(_="minus",r+=5):(_=e,0===E&&X(zn))),_!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();C!==e&&(I=tn())!==e?(_=function(u){return{token:"minusgraphpattern",status:"todo",value:u}}(I),k=_):(r=k,k=e)}else r=k,k=e;return E--,k===e&&(_=e,0===E&&X(Ro)),k}())===e&&(u=function(){var k,_,C,I,D,O,U;for(E++,k=r,_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(h.substr(r,5)===ln?(C=ln,r+=5):(C=e,0===E&&X(Lr)),C===e&&(h.substr(r,5)===Qn?(C=Qn,r+=5):(C=e,0===E&&X(Xi))),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if((D=ss())!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e&&(U=tn())!==e?(_=function(u,k){for(var _=0;_<k.patterns.length;_++)for(var C=k.patterns[_],I=0;I<C.triplesContext.length;I++)C.triplesContext[I].graph=u;return k.token="groupgraphpattern",k}(D,U),k=_):(r=k,k=e)}else r=k,k=e;else r=k,k=e}else r=k,k=e;else r=k,k=e;return E--,k===e&&(_=e,0===E&&X(nf)),k}())===e&&(E++,k=r,h.substr(r,7)===Wn?(_=Wn,r+=7):(_=e,0===E&&X(Yi)),_!==e&&(C=ss())!==e&&(I=tn())!==e?(_=function(u,k){return{token:"servicegraphpattern",status:"todo",value:[u,k]}}(C,I),k=_):(r=k,k=e),E--,k===e&&(_=e,0===E&&X(Qs)),(u=k)===e)&&(u=function(){var k,_,C,I,D;for(E++,k=r,_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if("FILTER"===h.substr(r,6)?(C="FILTER",r+=6):(C=e,0===E&&X(Jn)),C===e&&("filter"===h.substr(r,6)?(C="filter",r+=6):(C=e,0===E&&X(af))),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e&&(D=ic())!==e?(_=function(u){return{token:"filter",value:u}}(D),k=_):(r=k,k=e)}else r=k,k=e;else r=k,k=e;return E--,k===e&&(_=e,0===E&&X(sf)),k}())===e&&(u=function(){var k,_,C,I,D,O,U,$,fe,ye,De,ze,Ae;for(E++,k=r,_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if("BIND"===h.substr(r,4)?(C="BIND",r+=4):(C=e,0===E&&X(ff)),C===e&&("bind"===h.substr(r,4)?(C="bind",r+=4):(C=e,0===E&&X(ir))),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if(40===h.charCodeAt(r)?(D=z,r++):(D=e,0===E&&X(ne)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if((U=It())!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if(h.substr(r,2)===Re?(fe=Re,r+=2):(fe=e,0===E&&X(He)),fe===e&&(h.substr(r,2)===ge?(fe=ge,r+=2):(fe=e,0===E&&X(xe))),fe!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();if(ye!==e)if((De=vr())!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();ze!==e?(41===h.charCodeAt(r)?(Ae=We,r++):(Ae=e,0===E&&X(Ke)),Ae!==e?(_=function(u,k){return{token:"bind",expression:u,as:k}}(U,De),k=_):(r=k,k=e)):(r=k,k=e)}else r=k,k=e;else r=k,k=e}else r=k,k=e;else r=k,k=e}else r=k,k=e;else r=k,k=e}else r=k,k=e;else r=k,k=e}else r=k,k=e;else r=k,k=e;return E--,k===e&&(_=e,0===E&&X(uf)),k}())===e&&(u=function(){var k,_,C,I,D;for(E++,k=r,_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(h.substr(r,6)===Wi?(C=Wi,r+=6):(C=e,0===E&&X(ms)),C===e&&(h.substr(r,6)===jn?(C=jn,r+=6):(C=e,0===E&&X(Pa))),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e&&(D=Yh())!==e?k=_=D:(r=k,k=e)}else r=k,k=e;else r=k,k=e;return E--,k===e&&(_=e,0===E&&X(to)),k}()),E--,u===e&&0===E&&X(Bs),u}function ic(){var u;return E++,(u=gc())===e&&(u=yc())===e&&(u=Zh()),E--,u===e&&0===E&&X(or),u}function Yh(){var u;return E++,(u=function(){var k,_,C,I,D,O,U,$;for(E++,k=r,_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=vr())!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if(123===h.charCodeAt(r)?(D=Oe,r++):(D=e,0===E&&X(Pe)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e){for(U=[],$=ns();$!==e;)U.push($),$=ns();U!==e?(125===h.charCodeAt(r)?($=Ge,r++):($=e,0===E&&X($e)),$!==e?(_=function(u,k){return{token:"inlineData",values:[{var:u,value:k}]}}(C,U),k=_):(r=k,k=e)):(r=k,k=e)}else r=k,k=e}else r=k,k=e;else r=k,k=e}else r=k,k=e;else r=k,k=e;return E--,k===e&&(_=e,0===E&&X(hf)),k}())===e&&(u=function(){var k,_,C,I,D,O,U,$,fe,ye,De,ze,Ae,Je,rt,je;for(E++,k=r,_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e){if((C=si())===e)if(C=r,40===h.charCodeAt(r)?(I=z,r++):(I=e,0===E&&X(ne)),I!==e){for(D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e){for(O=[],U=vr();U!==e;)O.push(U),U=vr();if(O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e?(41===h.charCodeAt(r)?($=We,r++):($=e,0===E&&X(Ke)),$!==e?C=I=[I,D,O,U,$]:(r=C,C=e)):(r=C,C=e)}else r=C,C=e}else r=C,C=e}else r=C,C=e;if(C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if(123===h.charCodeAt(r)?(D=Oe,r++):(D=e,0===E&&X(Pe)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e){for(U=[],$=r,fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();if(fe!==e)if(40===h.charCodeAt(r)?(ye=z,r++):(ye=e,0===E&&X(ne)),ye!==e){for(De=[],ze=G();ze!==e;)De.push(ze),ze=G();if(De!==e){for(ze=[],Ae=ns();Ae!==e;)ze.push(Ae),Ae=ns();if(ze!==e){for(Ae=[],Je=G();Je!==e;)Ae.push(Je),Je=G();if(Ae!==e)if(41===h.charCodeAt(r)?(Je=We,r++):(Je=e,0===E&&X(Ke)),Je!==e){for(rt=[],je=G();je!==e;)rt.push(je),je=G();rt!==e?$=fe=[fe,ye,De,ze,Ae,Je,rt]:(r=$,$=e)}else r=$,$=e;else r=$,$=e}else r=$,$=e}else r=$,$=e}else r=$,$=e;else r=$,$=e;for($===e&&($=si());$!==e;){for(U.push($),$=r,fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();if(fe!==e)if(40===h.charCodeAt(r)?(ye=z,r++):(ye=e,0===E&&X(ne)),ye!==e){for(De=[],ze=G();ze!==e;)De.push(ze),ze=G();if(De!==e){for(ze=[],Ae=ns();Ae!==e;)ze.push(Ae),Ae=ns();if(ze!==e){for(Ae=[],Je=G();Je!==e;)Ae.push(Je),Je=G();if(Ae!==e)if(41===h.charCodeAt(r)?(Je=We,r++):(Je=e,0===E&&X(Ke)),Je!==e){for(rt=[],je=G();je!==e;)rt.push(je),je=G();rt!==e?$=fe=[fe,ye,De,ze,Ae,Je,rt]:(r=$,$=e)}else r=$,$=e;else r=$,$=e}else r=$,$=e}else r=$,$=e}else r=$,$=e;else r=$,$=e;$===e&&($=si())}if(U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();$!==e?(125===h.charCodeAt(r)?(fe=Ge,r++):(fe=e,0===E&&X($e)),fe!==e?k=_={token:"inlineData",values:[],todo:!0}:(r=k,k=e)):(r=k,k=e)}else r=k,k=e}else r=k,k=e}else r=k,k=e;else r=k,k=e}else r=k,k=e}else r=k,k=e;return E--,k===e&&(_=e,0===E&&X(df)),k}()),E--,u===e&&0===E&&X(Do),u}function ns(){var u,k,_,C,I;for(E++,u=r,k=[],_=G();_!==e;)k.push(_),_=G();if(k!==e)if((_=Fu())===e&&(_=_u())===e&&(_=Su())===e&&(_=Au())===e&&(h.substr(r,5)===Dn?(_=Dn,r+=5):(_=e,0===E&&X(Hi))),_!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();C!==e?u=k=_:(r=u,u=e)}else r=u,u=e;else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(yl)),u}function Zh(){var u,k,_,C;if(E++,u=r,(k=gr())!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();_!==e&&(C=$h())!==e?u=k=function(u,k){var _={token:"expression",expressionType:"irireforfunction"};return _.iriref=u,_.args=k.value,_}(k,C):(r=u,u=e)}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(zs)),u}function $h(){var u,k,_,C,I,D,O,U,$,fe,ye,De;if(E++,u=r,(k=si())!==e&&(k={token:"args",value:[]}),(u=k)===e)if(u=r,40===h.charCodeAt(r)?(k=z,r++):(k=e,0===E&&X(ne)),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(h.substr(r,8)===Te?(C=Te,r+=8):(C=e,0===E&&X(Fe)),C===e&&(h.substr(r,8)===ke?(C=ke,r+=8):(C=e,0===E&&X(de))),C===e&&(C=null),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if((D=It())!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e){if(U=[],$=r,44===h.charCodeAt(r)?(fe=$t,r++):(fe=e,0===E&&X(er)),fe!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();ye!==e&&(De=It())!==e?$=fe=[fe,ye,De]:(r=$,$=e)}else r=$,$=e;for(;$!==e;)if(U.push($),$=r,44===h.charCodeAt(r)?(fe=$t,r++):(fe=e,0===E&&X(er)),fe!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();ye!==e&&(De=It())!==e?$=fe=[fe,ye,De]:(r=$,$=e)}else r=$,$=e;U!==e?(41===h.charCodeAt(r)?($=We,r++):($=e,0===E&&X(Ke)),$!==e?u=k=function(u,k,_){for(var C=[],I=0;I<_.length;I++)C.push(_[I][2]);var D={token:"args"};return D.value=[k].concat(C),null!=u&&"DISTINCT"===u.toUpperCase()?D.distinct=!0:D.distinct=!1,D}(C,D,U):(r=u,u=e)):(r=u,u=e)}else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(qs)),u}function ba(){var u,k,_,C,I,D,O,U,$,fe;if(E++,u=r,(k=si())!==e&&(k={token:"args",value:[]}),(u=k)===e)if(u=r,40===h.charCodeAt(r)?(k=z,r++):(k=e,0===E&&X(ne)),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=gr())===e&&(C=It()),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e){if(D=[],O=r,44===h.charCodeAt(r)?(U=$t,r++):(U=e,0===E&&X(er)),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();$!==e?((fe=gr())===e&&(fe=It()),fe!==e?O=U=[U,$,fe]:(r=O,O=e)):(r=O,O=e)}else r=O,O=e;for(;O!==e;)if(D.push(O),O=r,44===h.charCodeAt(r)?(U=$t,r++):(U=e,0===E&&X(er)),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();$!==e?((fe=gr())===e&&(fe=It()),fe!==e?O=U=[U,$,fe]:(r=O,O=e)):(r=O,O=e)}else r=O,O=e;D!==e?(41===h.charCodeAt(r)?(O=We,r++):(O=e,0===E&&X(Ke)),O!==e?u=k=function(u,k){for(var _=[],C=0;C<k.length;C++)_.push(k[C][2]);var I={token:"args"};return I.value=[u].concat(_),I}(C,D):(r=u,u=e)):(r=u,u=e)}else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(ml)),u}function ep(){var u,k,_,C,I,D;for(E++,u=r,k=[],_=G();_!==e;)k.push(_),_=G();if(k!==e)if((_=ku())!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();C!==e&&(I=oc())!==e?u=k=function(u,k){var _=k.triplesContext,C=u;if(k.pairs)for(var I=0;I<k.pairs.length;I++){var D=k.pairs[I],O=null;null!=D[1].length&&(D[1]=D[1][0]),C.token&&"triplesnodecollection"===C.token?(O={subject:C.chainSubject[0],predicate:D[0],object:D[1]},_.push(O),_=_.concat(C.triplesContext)):(O={subject:C,predicate:D[0],object:D[1]},_.push(O))}var U={token:"triplessamesubject"};return U.triplesContext=_,U.chainSubject=C,U}(_,I):(r=u,u=e)}else r=u,u=e;else r=u,u=e;if(u===e){for(u=r,k=[],_=G();_!==e;)k.push(_),_=G();if(k!==e)if((_=sp())!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();C!==e&&(E++,(D=oc())===e&&(D=null),E--,D===e&&0===E&&X(wl),(I=D)!==e)?u=k=function(u,k){var _=u.triplesContext,C=u.chainSubject;if(k.pairs)for(var I=0;I<k.pairs.length;I++){var D=k.pairs[I];if(null!=D[1].length&&(D[1]=D[1][0]),"triplesnodecollection"===u.token)for(var O=0;O<C.length;O++){var U=C[O];if(null!=U.triplesContext){var $={subject:U.chainSubject,predicate:D[0],object:D[1]};_.concat(U.triplesContext)}else $={subject:C[O],predicate:D[0],object:D[1]},_.push($)}else $={subject:C,predicate:D[0],object:D[1]},_.push($)}var fe={token:"triplessamesubject"};return fe.triplesContext=_,fe.chainSubject=C,fe}(_,I):(r=u,u=e)}else r=u,u=e;else r=u,u=e}return E--,u===e&&(k=e,0===E&&X(yf)),u}function oc(){var u,k,_,C,I,D,O,U,$,fe,ye,De,ze;if(E++,u=r,(k=lc())!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=yo())!==e){for(I=[],D=r,O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if(59===h.charCodeAt(r)?(U=sn,r++):(U=e,0===E&&X(jr)),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e){if(fe=r,(ye=lc())!==e){for(De=[],ze=G();ze!==e;)De.push(ze),ze=G();De!==e&&(ze=yo())!==e?fe=ye=[ye,De,ze]:(r=fe,fe=e)}else r=fe,fe=e;fe===e&&(fe=null),fe!==e?D=O=[O,U,$,fe]:(r=D,D=e)}else r=D,D=e}else r=D,D=e;else r=D,D=e;for(;D!==e;){for(I.push(D),D=r,O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if(59===h.charCodeAt(r)?(U=sn,r++):(U=e,0===E&&X(jr)),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e){if(fe=r,(ye=lc())!==e){for(De=[],ze=G();ze!==e;)De.push(ze),ze=G();De!==e&&(ze=yo())!==e?fe=ye=[ye,De,ze]:(r=fe,fe=e)}else r=fe,fe=e;fe===e&&(fe=null),fe!==e?D=O=[O,U,$,fe]:(r=D,D=e)}else r=D,D=e}else r=D,D=e;else r=D,D=e}I!==e?u=k=function(u,k,_){for(var C={token:"propertylist"},I=[],D=[],O=0;O<k.length;O++)null!=k[O].triplesContext?(I=I.concat(k[O].triplesContext),"triplesnodecollection"===k[O].token&&null!=k[O].chainSubject.length?D.push([u,k[O].chainSubject[0]]):D.push([u,k[O].chainSubject])):D.push([u,k[O]]);for(O=0;O<_.length;O++)for(var U=_[O][3],$=U[0],fe=U[2]||[],ye=0;ye<fe.length;ye++)null!=fe[ye].triplesContext?(I=I.concat(fe[ye].triplesContext),D.push([$,fe[ye].chainSubject])):D.push([$,fe[ye]]);return C.pairs=D,C.triplesContext=I,C}(k,C,I):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(mn)),u}function tp(){var u,k,_,C,I,D,O,U;if(E++,u=r,(k=sc())!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e){if(C=[],I=r,44===h.charCodeAt(r)?(D=$t,r++):(D=e,0===E&&X(er)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e&&(U=sc())!==e?I=D=[D,O,U]:(r=I,I=e)}else r=I,I=e;for(;I!==e;)if(C.push(I),I=r,44===h.charCodeAt(r)?(D=$t,r++):(D=e,0===E&&X(er)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e&&(U=sc())!==e?I=D=[D,O,U]:(r=I,I=e)}else r=I,I=e;C!==e?u=k=function(u,k){var _=[];_.push(u);for(var C=0;C<k.length;C++)for(var I=0;I<k[C].length;I++)"object"==typeof k[C][I]&&null!=k[C][I].token&&_.push(k[C][I]);return _}(k,C):(r=u,u=e)}else r=u,u=e}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Js)),u}function yo(){var u,k,_,C,I,D,O,U;if(E++,u=r,(k=ac())!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e){if(C=[],I=r,44===h.charCodeAt(r)?(D=$t,r++):(D=e,0===E&&X(er)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e&&(U=ac())!==e?I=D=[D,O,U]:(r=I,I=e)}else r=I,I=e;for(;I!==e;)if(C.push(I),I=r,44===h.charCodeAt(r)?(D=$t,r++):(D=e,0===E&&X(er)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e&&(U=ac())!==e?I=D=[D,O,U]:(r=I,I=e)}else r=I,I=e;C!==e?u=k=function(u,k){var _=[];_.push(u);for(var C=0;C<k.length;C++)for(var I=0;I<k[C].length;I++)"object"==typeof k[C][I]&&null!=k[C][I].token&&_.push(k[C][I]);return _}(k,C):(r=u,u=e)}else r=u,u=e}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(mf)),u}function sc(){var u;return E++,u=hc(),E--,u===e&&0===E&&X(no),u}function ac(){var u;return E++,u=pc(),E--,u===e&&0===E&&X(Cl),u}function lc(){var u,k;return E++,(u=ss())===e&&(u=r,97===h.charCodeAt(r)?(k="a",r++):(k=e,0===E&&X(io)),k!==e&&(k={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),u=k),E--,u===e&&(k=e,0===E&&X(Ks)),u}function rp(){var u,k,_,C,I,D,O,U,$,fe,ye,De;if(E++,u=r,(k=is())===e&&(k=os()),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=tp())!==e){for(I=[],D=r,O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if(59===h.charCodeAt(r)?(U=sn,r++):(U=e,0===E&&X(jr)),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();$!==e?(fe=r,(ye=is())===e&&(ye=os()),ye!==e&&(De=yo())!==e?fe=ye=[ye,De]:(r=fe,fe=e),fe===e&&(fe=null),fe!==e?D=O=[O,U,$,fe]:(r=D,D=e)):(r=D,D=e)}else r=D,D=e;else r=D,D=e;for(;D!==e;){for(I.push(D),D=r,O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if(59===h.charCodeAt(r)?(U=sn,r++):(U=e,0===E&&X(jr)),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();$!==e?(fe=r,(ye=is())===e&&(ye=os()),ye!==e&&(De=yo())!==e?fe=ye=[ye,De]:(r=fe,fe=e),fe===e&&(fe=null),fe!==e?D=O=[O,U,$,fe]:(r=D,D=e)):(r=D,D=e)}else r=D,D=e;else r=D,D=e}I!==e?u=k=function(u,k,_){for(var C={token:"propertylist"},I=[],D=[],O=0;O<k.length;O++)null!=k[O].triplesContext?(I=I.concat(k[O].triplesContext),"triplesnodecollection"===k[O].token&&null!=k[O].chainSubject.length?D.push([u,k[O].chainSubject[0]]):D.push([u,k[O].chainSubject])):D.push([u,k[O]]);for(O=0;O<_.length;O++)for(var U=_[O][3],$=U[0],fe=U[1]||[],ye=0;ye<fe.length;ye++)null!=fe[ye].triplesContext?(I=I.concat(fe[ye].triplesContext),D.push([$,fe[ye].chainSubject])):D.push([$,fe[ye]]);return C.pairs=D,C.triplesContext=I,C}(k,C,I):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(_l)),u}function is(){var u,k;return E++,r,(k=np())!==e&&(k=function(u){return{token:"path",kind:"element"}.value=u,u}(k)),E--,(u=k)===e&&(k=e,0===E&&X(wf)),u}function os(){var u;return E++,u=vr(),E--,u===e&&0===E&&X(Po),u}function np(){var u;return E++,u=function(){var k,_,C,I,D,O;if(E++,k=r,(_=uc())!==e){for(C=[],I=r,124===h.charCodeAt(r)?(D="|",r++):(D=e,0===E&&X(oo)),D!==e&&(O=uc())!==e?I=D=[D,O]:(r=I,I=e);I!==e;)C.push(I),I=r,124===h.charCodeAt(r)?(D="|",r++):(D=e,0===E&&X(oo)),D!==e&&(O=uc())!==e?I=D=[D,O]:(r=I,I=e);C!==e?(_=function(u,k){if(null==k||0===k.length)return u;for(var _=[],C=0;C<k.length;C++)_.push(k[1]);var I={token:"path",kind:"alternative"};return I.value=_,I}(_,C),k=_):(r=k,k=e)}else r=k,k=e;return E--,k===e&&(_=e,0===E&&X(Cf)),k}(),E--,u===e&&0===E&&X(Al),u}function uc(){var u,k,_,C,I,D;if(E++,u=r,(k=fc())!==e){for(_=[],C=r,47===h.charCodeAt(r)?(I="/",r++):(I=e,0===E&&X(xn)),I!==e&&(D=fc())!==e?C=I=[I,D]:(r=C,C=e);C!==e;)_.push(C),C=r,47===h.charCodeAt(r)?(I="/",r++):(I=e,0===E&&X(xn)),I!==e&&(D=fc())!==e?C=I=[I,D]:(r=C,C=e);_!==e?u=k=function(u,k){if(null==k||0===k.length)return u;for(var _=[u],C=0;C<k.length;C++)_.push(k[C][1]);var I={token:"path",kind:"sequence"};return I.value=_,I}(k,_):(r=u,u=e)}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X($s)),u}function ip(){var u,k,_,C,I,D,O;return E++,u=r,E++,(C=gr())===e&&(C=r,97===h.charCodeAt(r)?(I="a",r++):(I=e,0===E&&X(io)),I!==e&&(I={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),(C=I)===e&&(C=r,33===h.charCodeAt(r)?(I="!",r++):(I=e,0===E&&X(kn)),I!==e&&(D=function(){var U,$,fe,ye,De,ze,Ae,Je;if((U=wu())===e)if(U=r,40===h.charCodeAt(r)?($=z,r++):($=e,0===E&&X(ne)),$!==e){if(fe=r,(ye=wu())!==e){for(De=[],ze=r,124===h.charCodeAt(r)?(Ae="|",r++):(Ae=e,0===E&&X(oo)),Ae!==e&&(Je=wu())!==e?ze=Ae=[Ae,Je]:(r=ze,ze=e);ze!==e;)De.push(ze),ze=r,124===h.charCodeAt(r)?(Ae="|",r++):(Ae=e,0===E&&X(oo)),Ae!==e&&(Je=wu())!==e?ze=Ae=[Ae,Je]:(r=ze,ze=e);De!==e?fe=ye=[ye,De]:(r=fe,fe=e)}else r=fe,fe=e;fe===e&&(fe=null),fe!==e?(41===h.charCodeAt(r)?(ye=We,r++):(ye=e,0===E&&X(Ke)),ye!==e?U=$=[$,fe,ye]:(r=U,U=e)):(r=U,U=e)}else r=U,U=e;return U}())!==e?C=I=[I,D]:(r=C,C=e),C===e&&(C=r,40===h.charCodeAt(r)?(I=z,r++):(I=e,0===E&&X(ne)),I!==e&&(D=np())!==e?(41===h.charCodeAt(r)?(O=We,r++):(O=e,0===E&&X(Ke)),O!==e?C=I=D:(r=C,C=e)):(r=C,C=e)))),E--,C===e&&(I=e,0===E&&X(Il)),(k=C)!==e?((_=function(){var C,I,D,O,U,$,fe,ye,De;return E++,42===h.charCodeAt(r)?(C=mt,r++):(C=e,0===E&&X(yt)),C===e&&(63===h.charCodeAt(r)?(C="?",r++):(C=e,0===E&&X(wn)),C===e&&(43===h.charCodeAt(r)?(C=Pr,r++):(C=e,0===E&&X(fn)),C===e&&(C=r,123===h.charCodeAt(r)?(I=Oe,r++):(I=e,0===E&&X(Pe)),I!==e?(D=r,(O=cc())!==e?(U=r,44===h.charCodeAt(r)?($=$t,r++):($=e,0===E&&X(er)),$!==e?(125===h.charCodeAt(r)?(fe=Ge,r++):(fe=e,0===E&&X($e)),fe===e&&(fe=r,(ye=cc())!==e?(125===h.charCodeAt(r)?(De=Ge,r++):(De=e,0===E&&X($e)),De!==e?fe=ye=[ye,De]:(r=fe,fe=e)):(r=fe,fe=e)),fe!==e?U=$=[$,fe]:(r=U,U=e)):(r=U,U=e),U===e&&(125===h.charCodeAt(r)?(U=Ge,r++):(U=e,0===E&&X($e))),U!==e?D=O=[O,U]:(r=D,D=e)):(r=D,D=e),D===e&&(D=r,44===h.charCodeAt(r)?(O=$t,r++):(O=e,0===E&&X(er)),O!==e&&(U=cc())!==e?(125===h.charCodeAt(r)?($=Ge,r++):($=e,0===E&&X($e)),$!==e?D=O=[O,U,$]:(r=D,D=e)):(r=D,D=e)),D!==e?C=I=[I,D]:(r=C,C=e)):(r=C,C=e)))),E--,C===e&&(I=e,0===E&&X(Ll)),C}())===e&&(_=null),_!==e?u=k=function(u,k){if(u.token&&"path"!=u.token&&""==k)return u;if(u.token&&u.token!=_&&""!=k){var _={token:"path",kind:"element"};return _.value=u,_.modifier=k,_}return u.modifier=k,u}(k,_):(r=u,u=e)):(r=u,u=e),E--,u===e&&(k=e,0===E&&X(Fl)),u}function fc(){var u,k,_;return E++,(u=ip())===e&&(u=r,94===h.charCodeAt(r)?(k="^",r++):(k=e,0===E&&X(so)),k!==e&&(_=ip())!==e?u=k=function(u){var k={token:"path",kind:"inversePath"};return k.value=u,k}(_):(r=u,u=e)),E--,u===e&&(k=e,0===E&&X(El)),u}function wu(){var u,k,_;return E++,(u=gr())===e&&(97===h.charCodeAt(r)?(u="a",r++):(u=e,0===E&&X(io)),u===e&&(u=r,94===h.charCodeAt(r)?(k="^",r++):(k=e,0===E&&X(so)),k!==e?((_=gr())===e&&(97===h.charCodeAt(r)?(_="a",r++):(_=e,0===E&&X(io))),_!==e?u=k=[k,_]:(r=u,u=e)):(r=u,u=e))),E--,u===e&&(k=e,0===E&&X(Nl)),u}function cc(){var u;return E++,u=as(),E--,u===e&&0===E&&X(Ho),u}function op(){var u,k;return E++,u=r,(k=function(){var _,C,I,D,O,U,$,fe,ye;for(E++,_=r,C=[],I=G();I!==e;)C.push(I),I=G();if(C!==e)if(40===h.charCodeAt(r)?(I=z,r++):(I=e,0===E&&X(ne)),I!==e){for(D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e){if(O=[],(U=hc())!==e)for(;U!==e;)O.push(U),U=hc();else O=e;if(O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if(41===h.charCodeAt(r)?($=We,r++):($=e,0===E&&X(Ke)),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();fe!==e?_=C=O:(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e}else r=_,_=e}else r=_,_=e;else r=_,_=e;return E--,_===e&&(C=e,0===E&&X(Af)),_}())!==e&&(k=function(u){for(var k=[],_=[],C=null,I=0;I<u.length;I++){Gr++;var D=null;null==u[I].chainSubject&&null==u[I].triplesContext?D=u[I]:(D=u[I].chainSubject,k=k.concat(u[I].triplesContext)),C={subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:D},0==I&&_.push(C.subject),k.push(C),C=I===u.length-1?{subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Gr+1)}},k.push(C)}return{token:"triplesnodecollection",triplesContext:k,chainSubject:_}}(k)),(u=k)===e&&(u=function(){var _,C,I,D,O,U,$,fe;for(E++,_=r,C=[],I=G();I!==e;)C.push(I),I=G();if(C!==e)if(91===h.charCodeAt(r)?(I="[",r++):(I=e,0===E&&X(zo)),I!==e){for(D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if((O=rp())!==e)if(93===h.charCodeAt(r)?(U="]",r++):(U=e,0===E&&X(Kn)),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();$!==e?(C=function(u){for(var k={token:"blank",value:"_:"+ ++Gr},_=[],C=0;C<u.pairs.length;C++){var I=u.pairs[C],D={};D.subject=k,D.predicate=I[0],null!=I[1].length&&(I[1]=I[1][0]),D.object=I[1],_.push(D)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:u.triplesContext.concat(_),chainSubject:k}}(O),_=C):(r=_,_=e)}else r=_,_=e;else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e;return E--,_===e&&(C=e,0===E&&X(Rl)),_}()),E--,u===e&&(k=e,0===E&&X(Ol)),u}function sp(){var u,k;return E++,u=r,(k=function(){var _,C,I,D,O,U,$,fe,ye;for(E++,_=r,C=[],I=G();I!==e;)C.push(I),I=G();if(C!==e)if(40===h.charCodeAt(r)?(I=z,r++):(I=e,0===E&&X(ne)),I!==e){for(D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e){if(O=[],(U=pc())!==e)for(;U!==e;)O.push(U),U=pc();else O=e;if(O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if(41===h.charCodeAt(r)?($=We,r++):($=e,0===E&&X(Ke)),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();fe!==e?_=C=O:(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e}else r=_,_=e}else r=_,_=e;else r=_,_=e;return E--,_===e&&(C=e,0===E&&X(Cn)),_}())!==e&&(k=function(u){for(var k=[],_=[],C=null,I=0;I<u.length;I++){Gr++;var D=null;null==u[I].chainSubject&&null==u[I].triplesContext?D=u[I]:(D=u[I].chainSubject,k=k.concat(D.triplesContext)),C={subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:D},0==I&&_.push(C.subject),k.push(C),C=I===u.length-1?{subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Gr+1)}},k.push(C)}return{token:"triplesnodecollection",triplesContext:k,chainSubject:_}}(k)),(u=k)===e&&(u=function(){var _,C,I,D,O,U,$,fe,ye;for(E++,_=r,C=[],I=G();I!==e;)C.push(I),I=G();if(C!==e)if(91===h.charCodeAt(r)?(I="[",r++):(I=e,0===E&&X(zo)),I!==e){for(D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if((O=oc())!==e){for(U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if(93===h.charCodeAt(r)?($="]",r++):($=e,0===E&&X(Kn)),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();fe!==e?(C=function(u){for(var k={token:"blank",value:"_:"+ ++Gr},_=[],C=0;C<u.pairs.length;C++){var I=u.pairs[C],D={};D.subject=k,D.predicate=I[0],null!=I[1].length&&(I[1]=I[1][0]),D.object=I[1],_.push(D)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:u.triplesContext.concat(_),chainSubject:k}}(O),_=C):(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e;return E--,_===e&&(C=e,0===E&&X(uo)),_}()),E--,u===e&&(k=e,0===E&&X(Sf)),u}function hc(){var u,k,_,C,I,D;for(E++,r,k=r,_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=ku())!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e?k=_=[_,C,I]:(r=k,k=e)}else r=k,k=e;else r=k,k=e;if(k===e){for(k=r,_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=op())!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e?k=_=[_,C,I]:(r=k,k=e)}else r=k,k=e;else r=k,k=e}return k!==e&&(k=wi(k)),E--,(u=k)===e&&(k=e,0===E&&X(xi)),u}function pc(){var u,k,_,C,I,D;for(E++,r,k=r,_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=ku())!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e?k=_=[_,C,I]:(r=k,k=e)}else r=k,k=e;else r=k,k=e;if(k===e){for(k=r,_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=sp())!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e?k=_=[_,C,I]:(r=k,k=e)}else r=k,k=e;else r=k,k=e}return k!==e&&(k=wi(k)),E--,(u=k)===e&&(k=e,0===E&&X(Ff)),u}function ku(){var u,k,_,C,I,D,O;return E++,(u=vr())===e&&(E++,(k=gr())===e&&(k=_u())===e&&(k=Su())===e&&(k=Au())===e&&(E++,_=r,E++,I=r,"_:"===h.substr(r,2)?(D="_:",r+=2):(D=e,0===E&&X(Td)),D!==e&&(O=fp())!==e?I=D=O:(r=I,I=e),E--,I===e&&(D=e,0===E&&X(Ed)),(C=I)!==e&&(C=function(u){return{token:"blank",value:u}}(C)),(_=C)===e&&(_=r,(C=function(){var I,D,O,U;if(E++,I=r,91===h.charCodeAt(r)?(D="[",r++):(D=e,0===E&&X(zo)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e?(93===h.charCodeAt(r)?(U="]",r++):(U=e,0===E&&X(Kn)),U!==e?I=D=[D,O,U]:(r=I,I=e)):(r=I,I=e)}else r=I,I=e;return E--,I===e&&(D=e,0===E&&X(kv)),I}())!==e&&(C={token:"blank",value:"_:"+ ++Gr}),_=C),E--,_===e&&(C=e,0===E&&X(xd)),(k=_)===e)&&(k=si()),E--,k===e&&0===E&&X(xr),u=k),E--,u===e&&0===E&&X(jl),u}function ss(){var u;return E++,(u=vr())===e&&(u=gr()),E--,u===e&&0===E&&X(Ef),u}function vr(){var u,k,_,C,I,D,O,U;for(E++,u=r,k=[],_=G();_!==e;)k.push(_),_=G();if(k!==e)if(E++,D=r,63===h.charCodeAt(r)?(O="?",r++):(O=e,0===E&&X(wn)),O!==e&&(U=up())!==e?D=O=U:(r=D,D=e),E--,D===e&&(O=e,0===E&&X(Id)),(_=D)===e&&(_=function(){var D,O,U;return E++,D=r,36===h.charCodeAt(r)?(O="$",r++):(O=e,0===E&&X(nh)),O!==e&&(U=up())!==e?D=O=U:(r=D,D=e),E--,D===e&&(O=e,0===E&&X(Nd)),D}()),_!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();C!==e?u=k=function(u){var k={token:"var"};return k.value=u,k}(_):(r=u,u=e)}else r=u,u=e;else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Tf)),u}function It(){var u;return E++,u=function(){var k,_,C,I,D,O,U,$;if(E++,k=r,(_=dc())!==e){for(C=[],I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if("||"===h.substr(r,2)?(O="||",r+=2):(O=e,0===E&&X(Bl)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=dc())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;for(;I!==e;){for(C.push(I),I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if("||"===h.substr(r,2)?(O="||",r+=2):(O=e,0===E&&X(Bl)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=dc())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e}C!==e?(_=function(u,k){if(0===k.length)return u;for(var _={token:"expression",expressionType:"conditionalor"},C=[u],I=0;I<k.length;I++)C.push(k[I][3]);return _.operands=C,_}(_,C),k=_):(r=k,k=e)}else r=k,k=e;return E--,k===e&&(_=e,0===E&&X(If)),k}(),E--,u===e&&0===E&&X(Ml),u}function dc(){var u,k,_,C,I,D,O,U;if(E++,u=r,(k=vc())!==e){for(_=[],C=r,I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if("&&"===h.substr(r,2)?(D="&&",r+=2):(D=e,0===E&&X(Ul)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e&&(U=vc())!==e?C=I=[I,D,O,U]:(r=C,C=e)}else r=C,C=e;else r=C,C=e;for(;C!==e;){for(_.push(C),C=r,I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if("&&"===h.substr(r,2)?(D="&&",r+=2):(D=e,0===E&&X(Ul)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e&&(U=vc())!==e?C=I=[I,D,O,U]:(r=C,C=e)}else r=C,C=e;else r=C,C=e}_!==e?u=k=function(u,k){if(0===k.length)return u;for(var _={token:"expression",expressionType:"conditionaland"},C=[u],I=0;I<k.length;I++)C.push(k[I][3]);return _.operands=C,_}(k,_):(r=u,u=e)}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Ql)),u}function vc(){var u;return E++,u=function(){var k,_,C,I,D,O,U,$,fe,ye,De,ze,Ae;if(E++,k=r,(_=Ur())!==e){for(C=[],I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(61===h.charCodeAt(r)?(O="=",r++):(O=e,0===E&&X(Yn)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=Ur())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if("!="===h.substr(r,2)?(O="!=",r+=2):(O=e,0===E&&X(Kr)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=Ur())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(60===h.charCodeAt(r)?(O="<",r++):(O=e,0===E&&X(na)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=Ur())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(62===h.charCodeAt(r)?(O=">",r++):(O=e,0===E&&X(Xo)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=Ur())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if("<="===h.substr(r,2)?(O="<=",r+=2):(O=e,0===E&&X(ia)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=Ur())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(">="===h.substr(r,2)?(O=">=",r+=2):(O=e,0===E&&X($n)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=Ur())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(73===h.charCodeAt(r)?(O="I",r++):(O=e,0===E&&X(Ci)),O===e&&(105===h.charCodeAt(r)?(O="i",r++):(O=e,0===E&&X(Jo))),O!==e)if(78===h.charCodeAt(r)?(U="N",r++):(U=e,0===E&&X(ei)),U===e&&(110===h.charCodeAt(r)?(U="n",r++):(U=e,0===E&&X(ti))),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();$!==e&&(fe=ba())!==e?I=D=[D,O,U,$,fe]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(78===h.charCodeAt(r)?(O="N",r++):(O=e,0===E&&X(ei)),O===e&&(110===h.charCodeAt(r)?(O="n",r++):(O=e,0===E&&X(ti))),O!==e)if(79===h.charCodeAt(r)?(U="O",r++):(U=e,0===E&&X(Gl)),U===e&&(111===h.charCodeAt(r)?(U="o",r++):(U=e,0===E&&X(Ai))),U!==e)if(84===h.charCodeAt(r)?($="T",r++):($=e,0===E&&X(sa)),$===e&&(116===h.charCodeAt(r)?($="t",r++):($=e,0===E&&X(Vo))),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();if(fe!==e)if(73===h.charCodeAt(r)?(ye="I",r++):(ye=e,0===E&&X(Ci)),ye===e&&(105===h.charCodeAt(r)?(ye="i",r++):(ye=e,0===E&&X(Jo))),ye!==e)if(78===h.charCodeAt(r)?(De="N",r++):(De=e,0===E&&X(ei)),De===e&&(110===h.charCodeAt(r)?(De="n",r++):(De=e,0===E&&X(ti))),De!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();ze!==e&&(Ae=ba())!==e?I=D=[D,O,U,$,fe,ye,De,ze,Ae]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;else r=I,I=e}else r=I,I=e;else r=I,I=e;else r=I,I=e;else r=I,I=e}}}}}}}for(;I!==e;){for(C.push(I),I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(61===h.charCodeAt(r)?(O="=",r++):(O=e,0===E&&X(Yn)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=Ur())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if("!="===h.substr(r,2)?(O="!=",r+=2):(O=e,0===E&&X(Kr)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=Ur())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(60===h.charCodeAt(r)?(O="<",r++):(O=e,0===E&&X(na)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=Ur())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(62===h.charCodeAt(r)?(O=">",r++):(O=e,0===E&&X(Xo)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=Ur())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if("<="===h.substr(r,2)?(O="<=",r+=2):(O=e,0===E&&X(ia)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=Ur())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(">="===h.substr(r,2)?(O=">=",r+=2):(O=e,0===E&&X($n)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=Ur())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(73===h.charCodeAt(r)?(O="I",r++):(O=e,0===E&&X(Ci)),O===e&&(105===h.charCodeAt(r)?(O="i",r++):(O=e,0===E&&X(Jo))),O!==e)if(78===h.charCodeAt(r)?(U="N",r++):(U=e,0===E&&X(ei)),U===e&&(110===h.charCodeAt(r)?(U="n",r++):(U=e,0===E&&X(ti))),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();$!==e&&(fe=ba())!==e?I=D=[D,O,U,$,fe]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(78===h.charCodeAt(r)?(O="N",r++):(O=e,0===E&&X(ei)),O===e&&(110===h.charCodeAt(r)?(O="n",r++):(O=e,0===E&&X(ti))),O!==e)if(79===h.charCodeAt(r)?(U="O",r++):(U=e,0===E&&X(Gl)),U===e&&(111===h.charCodeAt(r)?(U="o",r++):(U=e,0===E&&X(Ai))),U!==e)if(84===h.charCodeAt(r)?($="T",r++):($=e,0===E&&X(sa)),$===e&&(116===h.charCodeAt(r)?($="t",r++):($=e,0===E&&X(Vo))),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();if(fe!==e)if(73===h.charCodeAt(r)?(ye="I",r++):(ye=e,0===E&&X(Ci)),ye===e&&(105===h.charCodeAt(r)?(ye="i",r++):(ye=e,0===E&&X(Jo))),ye!==e)if(78===h.charCodeAt(r)?(De="N",r++):(De=e,0===E&&X(ei)),De===e&&(110===h.charCodeAt(r)?(De="n",r++):(De=e,0===E&&X(ti))),De!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();ze!==e&&(Ae=ba())!==e?I=D=[D,O,U,$,fe,ye,De,ze,Ae]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;else r=I,I=e}else r=I,I=e;else r=I,I=e;else r=I,I=e;else r=I,I=e}}}}}}}}C!==e?(_=function(u,k){if(0===k.length)return u;if("i"===k[0][1]||"I"===k[0][1]||"n"===k[0][1]||"N"===k[0][1]){var _={};if("i"===k[0][1]||"I"===k[0][1]){var C="=";_.expressionType="conditionalor"}else C="!=",_.expressionType="conditionaland";for(var I=u,D=[],O=0;O<k[0].length;O++)if("args"===k[0][O].token){D=k[0][O].value;break}_.token="expression",_.operands=[];for(var U=0;U<D.length;U++){var $={token:"expression",expressionType:"relationalexpression"};$.operator=C,$.op1=I,$.op2=D[U],_.operands.push($)}return _}return(_={expressionType:"relationalexpression"}).operator=k[0][1],_.op1=u,_.op2=k[0][3],_.token="expression",_}(_,C),k=_):(r=k,k=e)}else r=k,k=e;return E--,k===e&&(_=e,0===E&&X(_n)),k}(),E--,u===e&&0===E&&X(Of),u}function Ur(){var u;return E++,u=function(){var k,_,C,I,D,O,U,$,fe,ye;if(E++,k=r,(_=xa())!==e){for(C=[],I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(43===h.charCodeAt(r)?(O=Pr,r++):(O=e,0===E&&X(fn)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=xa())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(45===h.charCodeAt(r)?(O=Qr,r++):(O=e,0===E&&X(Zr)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=xa())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e)if(I=r,(D=wa())===e&&(D=wa()),D!==e){for(O=r,U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if(42===h.charCodeAt(r)?($=mt,r++):($=e,0===E&&X(yt)),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();fe!==e&&(ye=oi())!==e?O=U=[U,$,fe,ye]:(r=O,O=e)}else r=O,O=e;else r=O,O=e;if(O===e){for(O=r,U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if(47===h.charCodeAt(r)?($="/",r++):($=e,0===E&&X(xn)),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();fe!==e&&(ye=oi())!==e?O=U=[U,$,fe,ye]:(r=O,O=e)}else r=O,O=e;else r=O,O=e}O===e&&(O=null),O!==e?I=D=[D,O]:(r=I,I=e)}else r=I,I=e}for(;I!==e;){for(C.push(I),I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(43===h.charCodeAt(r)?(O=Pr,r++):(O=e,0===E&&X(fn)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=xa())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if(45===h.charCodeAt(r)?(O=Qr,r++):(O=e,0===E&&X(Zr)),O!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=xa())!==e?I=D=[D,O,U,$]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e)if(I=r,(D=wa())===e&&(D=wa()),D!==e){for(O=r,U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if(42===h.charCodeAt(r)?($=mt,r++):($=e,0===E&&X(yt)),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();fe!==e&&(ye=oi())!==e?O=U=[U,$,fe,ye]:(r=O,O=e)}else r=O,O=e;else r=O,O=e;if(O===e){for(O=r,U=[],$=G();$!==e;)U.push($),$=G();if(U!==e)if(47===h.charCodeAt(r)?($="/",r++):($=e,0===E&&X(xn)),$!==e){for(fe=[],ye=G();ye!==e;)fe.push(ye),ye=G();fe!==e&&(ye=oi())!==e?O=U=[U,$,fe,ye]:(r=O,O=e)}else r=O,O=e;else r=O,O=e}O===e&&(O=null),O!==e?I=D=[D,O]:(r=I,I=e)}else r=I,I=e}}C!==e?(_=function(u,k){if(0===k.length)return u;var _={token:"expression",expressionType:"additiveexpression"};_.summand=u,_.summands=[];for(var C=0;C<k.length;C++){var I=k[C],D={};if(4==I.length&&"string"==typeof I[1])D.operator=I[1],D.expression=I[3];else{var O={},U=D[0],$=(D[1][1],D[1][3]);U.value<0?(D.operator="-",U.value=-U.value):D.operator="+",O.token="expression",O.expressionType="multiplicativeexpression",O.operator=U,O.factors=[{operator:null,expression:$}],D.expression=O}_.summands.push(D)}return _}(_,C),k=_):(r=k,k=e)}else r=k,k=e;return E--,k===e&&(_=e,0===E&&X(ql)),k}(),E--,u===e&&0===E&&X(Rf),u}function xa(){var u,k,_,C,I,D,O,U;if(E++,u=r,(k=oi())!==e){for(_=[],C=r,I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if(42===h.charCodeAt(r)?(D=mt,r++):(D=e,0===E&&X(yt)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e&&(U=oi())!==e?C=I=[I,D,O,U]:(r=C,C=e)}else r=C,C=e;else r=C,C=e;if(C===e){for(C=r,I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if(47===h.charCodeAt(r)?(D="/",r++):(D=e,0===E&&X(xn)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e&&(U=oi())!==e?C=I=[I,D,O,U]:(r=C,C=e)}else r=C,C=e;else r=C,C=e}for(;C!==e;){for(_.push(C),C=r,I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if(42===h.charCodeAt(r)?(D=mt,r++):(D=e,0===E&&X(yt)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e&&(U=oi())!==e?C=I=[I,D,O,U]:(r=C,C=e)}else r=C,C=e;else r=C,C=e;if(C===e){for(C=r,I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if(47===h.charCodeAt(r)?(D="/",r++):(D=e,0===E&&X(xn)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e&&(U=oi())!==e?C=I=[I,D,O,U]:(r=C,C=e)}else r=C,C=e;else r=C,C=e}}_!==e?u=k=function(u,k){if(0===k.length)return u;var _={token:"expression",expressionType:"multiplicativeexpression"};_.factor=u,_.factors=[];for(var C=0;C<k.length;C++){var I=k[C],D={};D.operator=I[1],D.expression=I[3],_.factors.push(D)}return _}(k,_):(r=u,u=e)}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(po)),u}function oi(){var u,k,_,C;if(E++,u=r,33===h.charCodeAt(r)?(k="!",r++):(k=e,0===E&&X(kn)),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();_!==e&&(C=Cu())!==e?u=k=function(u){var k={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"};return k.expression=u,k}(C):(r=u,u=e)}else r=u,u=e;if(u===e){if(u=r,43===h.charCodeAt(r)?(k=Pr,r++):(k=e,0===E&&X(fn)),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();_!==e&&(C=Cu())!==e?u=k=function(u){var k={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"};return k.expression=u,k}(C):(r=u,u=e)}else r=u,u=e;if(u===e){if(u=r,45===h.charCodeAt(r)?(k=Qr,r++):(k=e,0===E&&X(Zr)),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();_!==e&&(C=Cu())!==e?u=k=function(u){var k={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"};return k.expression=u,k}(C):(r=u,u=e)}else r=u,u=e;u===e&&(u=Cu())}}return E--,u===e&&(k=e,0===E&&X(Df)),u}function Cu(){var u,k;return E++,(u=gc())===e&&(u=yc())===e&&(u=function(){var _,C,I,D;if(E++,_=r,(C=gr())!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e?((D=$h())===e&&(D=null),D!==e?(C=function(u,k){var _={token:"expression",expressionType:"irireforfunction"};return _.iriref=u,_.args=null!=k?k.value:k,_}(C,D),_=C):(r=_,_=e)):(r=_,_=e)}else r=_,_=e;return E--,_===e&&(C=e,0===E&&X(Zp)),_}())===e&&(u=r,(k=_u())!==e&&(k=function(u){var k={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"};return k.value=u,k}(k)),(u=k)===e&&(u=r,(k=Su())!==e&&(k=function(u){var k={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"};return k.value=u,k}(k)),(u=k)===e&&(u=r,(k=Au())!==e&&(k=function(u){var k={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};return k.value=u,k}(k)),(u=k)===e&&(u=function(){var _,C,I,D,O,U,$,fe,ye,De,ze,Ae,Je,rt,je,et,nt,lt;if(E++,_=r,"COUNT"===h.substr(r,5)?(C="COUNT",r+=5):(C=e,0===E&&X(Op)),C===e&&("count"===h.substr(r,5)?(C="count",r+=5):(C=e,0===E&&X(Rp))),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if(40===h.charCodeAt(r)?(D=z,r++):(D=e,0===E&&X(ne)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if(h.substr(r,8)===Te?(U=Te,r+=8):(U=e,0===E&&X(Fe)),U===e&&(h.substr(r,8)===ke?(U=ke,r+=8):(U=e,0===E&&X(de))),U===e&&(U=null),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if(42===h.charCodeAt(r)?(fe=mt,r++):(fe=e,0===E&&X(yt)),fe===e&&(fe=It()),fe!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();if(ye!==e)if(41===h.charCodeAt(r)?(De=We,r++):(De=e,0===E&&X(Ke)),De!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();ze!==e?(C=function(u,k){var _={token:"expression",expressionType:"aggregate",aggregateType:"count"};return _.distinct=""!=u&&null!=u?"DISTINCT":u,_.expression=k,_}(U,fe),_=C):(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;if(_===e){if(_=r,h.substr(r,12)===Dc?(C=Dc,r+=12):(C=e,0===E&&X(jp)),C===e&&(h.substr(r,12)===jc?(C=jc,r+=12):(C=e,0===E&&X(Mp))),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if(40===h.charCodeAt(r)?(D=z,r++):(D=e,0===E&&X(ne)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if(h.substr(r,8)===Te?(U=Te,r+=8):(U=e,0===E&&X(Fe)),U===e&&(h.substr(r,8)===ke?(U=ke,r+=8):(U=e,0===E&&X(de))),U===e&&(U=null),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if((fe=It())!==e){if(ye=r,59===h.charCodeAt(r)?(De=sn,r++):(De=e,0===E&&X(jr)),De!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();if(ze!==e)if(h.substr(r,9)===Mc?(Ae=Mc,r+=9):(Ae=e,0===E&&X(Bp)),Ae!==e){for(Je=[],rt=G();rt!==e;)Je.push(rt),rt=G();if(Je!==e)if(61===h.charCodeAt(r)?(rt="=",r++):(rt=e,0===E&&X(Yn)),rt!==e){for(je=[],et=G();et!==e;)je.push(et),et=G();if(je!==e)if((et=ap())!==e){for(nt=[],lt=G();lt!==e;)nt.push(lt),lt=G();nt!==e?ye=De=[De,ze,Ae,Je,rt,je,et,nt]:(r=ye,ye=e)}else r=ye,ye=e;else r=ye,ye=e}else r=ye,ye=e;else r=ye,ye=e}else r=ye,ye=e;else r=ye,ye=e}else r=ye,ye=e;if(ye===e&&(ye=null),ye!==e)if(41===h.charCodeAt(r)?(De=We,r++):(De=e,0===E&&X(Ke)),De!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();ze!==e?(C=function(u,k,_){var C={token:"expression",expressionType:"aggregate",aggregateType:"group_concat"};return C.distinct=""!=u&&null!=u?"DISTINCT":u,C.expression=k,C.separator=_,C}(U,fe,ye),_=C):(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;if(_===e){if(_=r,"SUM"===h.substr(r,3)?(C="SUM",r+=3):(C=e,0===E&&X(Qp)),C===e&&("sum"===h.substr(r,3)?(C="sum",r+=3):(C=e,0===E&&X(Up))),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if(40===h.charCodeAt(r)?(D=z,r++):(D=e,0===E&&X(ne)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if(h.substr(r,8)===Te?(U=Te,r+=8):(U=e,0===E&&X(Fe)),U===e&&(h.substr(r,8)===ke?(U=ke,r+=8):(U=e,0===E&&X(de))),U===e&&(U=null),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if((fe=It())!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();if(ye!==e)if(41===h.charCodeAt(r)?(De=We,r++):(De=e,0===E&&X(Ke)),De!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();ze!==e?(C=function(u,k){var _={token:"expression",expressionType:"aggregate",aggregateType:"sum"};return _.distinct=""!=u&&null!=u?"DISTINCT":u,_.expression=k,_}(U,fe),_=C):(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;if(_===e){if(_=r,"MIN"===h.substr(r,3)?(C="MIN",r+=3):(C=e,0===E&&X(Hp)),C===e&&("min"===h.substr(r,3)?(C="min",r+=3):(C=e,0===E&&X(Wp))),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if(40===h.charCodeAt(r)?(D=z,r++):(D=e,0===E&&X(ne)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if(h.substr(r,8)===Te?(U=Te,r+=8):(U=e,0===E&&X(Fe)),U===e&&(h.substr(r,8)===ke?(U=ke,r+=8):(U=e,0===E&&X(de))),U===e&&(U=null),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if((fe=It())!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();if(ye!==e)if(41===h.charCodeAt(r)?(De=We,r++):(De=e,0===E&&X(Ke)),De!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();ze!==e?(C=function(u,k){var _={token:"expression",expressionType:"aggregate",aggregateType:"min"};return _.distinct=""!=u&&null!=u?"DISTINCT":u,_.expression=k,_}(U,fe),_=C):(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;if(_===e){if(_=r,"MAX"===h.substr(r,3)?(C="MAX",r+=3):(C=e,0===E&&X(qp)),C===e&&("max"===h.substr(r,3)?(C="max",r+=3):(C=e,0===E&&X(Xp))),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if(40===h.charCodeAt(r)?(D=z,r++):(D=e,0===E&&X(ne)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if(h.substr(r,8)===Te?(U=Te,r+=8):(U=e,0===E&&X(Fe)),U===e&&(h.substr(r,8)===ke?(U=ke,r+=8):(U=e,0===E&&X(de))),U===e&&(U=null),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if((fe=It())!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();if(ye!==e)if(41===h.charCodeAt(r)?(De=We,r++):(De=e,0===E&&X(Ke)),De!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();ze!==e?(C=function(u,k){var _={token:"expression",expressionType:"aggregate",aggregateType:"max"};return _.distinct=""!=u&&null!=u?"DISTINCT":u,_.expression=k,_}(U,fe),_=C):(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;if(_===e)if(_=r,"AVG"===h.substr(r,3)?(C="AVG",r+=3):(C=e,0===E&&X(Vp)),C===e&&("avg"===h.substr(r,3)?(C="avg",r+=3):(C=e,0===E&&X(Kp))),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if(40===h.charCodeAt(r)?(D=z,r++):(D=e,0===E&&X(ne)),D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if(h.substr(r,8)===Te?(U=Te,r+=8):(U=e,0===E&&X(Fe)),U===e&&(h.substr(r,8)===ke?(U=ke,r+=8):(U=e,0===E&&X(de))),U===e&&(U=null),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if((fe=It())!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();if(ye!==e)if(41===h.charCodeAt(r)?(De=We,r++):(De=e,0===E&&X(Ke)),De!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();ze!==e?(C=function(u,k){var _={token:"expression",expressionType:"aggregate",aggregateType:"avg"};return _.distinct=""!=u&&null!=u?"DISTINCT":u,_.expression=k,_}(U,fe),_=C):(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e;else r=_,_=e}else r=_,_=e}}}}return E--,_===e&&(C=e,0===E&&X(Np)),_}())===e&&(u=r,(k=vr())!==e&&(k=function(u){var k={token:"expression",expressionType:"atomic",primaryexpression:"var"};return k.value=u,k}(k)),u=k)))),E--,u===e&&(k=e,0===E&&X(Bf)),u}function gc(){var u,k,_,C,I,D;if(E++,u=r,40===h.charCodeAt(r)?(k=z,r++):(k=e,0===E&&X(ne)),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if((C=It())!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();I!==e?(41===h.charCodeAt(r)?(D=We,r++):(D=e,0===E&&X(Ke)),D!==e?u=k=C:(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Vl)),u}function yc(){var u,k,_,C,I,D,O,U,$,fe,ye,De,ze,Ae,Je,rt;if(E++,u=r,"STR"===h.substr(r,3)?(k="STR",r+=3):(k=e,0===E&&X(Zl)),k===e&&("str"===h.substr(r,3)?(k="str",r+=3):(k=e,0===E&&X($l))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(40===h.charCodeAt(r)?(C=z,r++):(C=e,0===E&&X(ne)),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if((D=It())!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e?(41===h.charCodeAt(r)?(U=We,r++):(U=e,0===E&&X(Ke)),U!==e?u=k=function(u){var k={token:"expression",expressionType:"builtincall",builtincall:"str"};return k.args=[u],k}(D):(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;if(u===e){if(u=r,"LANG"===h.substr(r,4)?(k="LANG",r+=4):(k=e,0===E&&X(Gf)),k===e&&("lang"===h.substr(r,4)?(k="lang",r+=4):(k=e,0===E&&X(Ut))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(40===h.charCodeAt(r)?(C=z,r++):(C=e,0===E&&X(ne)),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if((D=It())!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e?(41===h.charCodeAt(r)?(U=We,r++):(U=e,0===E&&X(Ke)),U!==e?u=k=function(u){var k={token:"expression",expressionType:"builtincall",builtincall:"lang"};return k.args=[u],k}(D):(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;if(u===e){if(u=r,h.substr(r,11)===Yo?(k=Yo,r+=11):(k=e,0===E&&X(go)),k===e&&(h.substr(r,11)===Or?(k=Or,r+=11):(k=e,0===E&&X(Zo))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(40===h.charCodeAt(r)?(C=z,r++):(C=e,0===E&&X(ne)),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if((D=It())!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if(44===h.charCodeAt(r)?(U=$t,r++):(U=e,0===E&&X(er)),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if((fe=It())!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();ye!==e?(41===h.charCodeAt(r)?(De=We,r++):(De=e,0===E&&X(Ke)),De!==e?u=k=function(u,k){var _={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};return _.args=[u,k],_}(D,fe):(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;if(u===e){if(u=r,h.substr(r,8)===fa?(k=fa,r+=8):(k=e,0===E&&X(ru)),k===e&&(h.substr(r,8)===ca?(k=ca,r+=8):(k=e,0===E&&X(nu))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(40===h.charCodeAt(r)?(C=z,r++):(C=e,0===E&&X(ne)),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if((D=It())!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e?(41===h.charCodeAt(r)?(U=We,r++):(U=e,0===E&&X(Ke)),U!==e?u=k=function(u){var k={token:"expression",expressionType:"builtincall",builtincall:"datatype"};return k.args=[u],k}(D):(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;if(u===e){if(u=r,"BOUND"===h.substr(r,5)?(k="BOUND",r+=5):(k=e,0===E&&X(ha)),k===e&&("bound"===h.substr(r,5)?(k="bound",r+=5):(k=e,0===E&&X(Pt))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(40===h.charCodeAt(r)?(C=z,r++):(C=e,0===E&&X(ne)),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if((D=vr())!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e?(41===h.charCodeAt(r)?(U=We,r++):(U=e,0===E&&X(Ke)),U!==e?u=k=function(u){var k={token:"expression",expressionType:"builtincall",builtincall:"bound"};return k.args=[u],k}(D):(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;if(u===e){if(u=r,"IRI"===h.substr(r,3)?(k="IRI",r+=3):(k=e,0===E&&X(Fi)),k===e&&("iri"===h.substr(r,3)?(k="iri",r+=3):(k=e,0===E&&X($o))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(40===h.charCodeAt(r)?(C=z,r++):(C=e,0===E&&X(ne)),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if((D=It())!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e?(41===h.charCodeAt(r)?(U=We,r++):(U=e,0===E&&X(Ke)),U!==e?u=k=function(u){var k={token:"expression",expressionType:"builtincall",builtincall:"iri"};return k.args=[u],k}(D):(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;if(u===e){if(u=r,"URI"===h.substr(r,3)?(k="URI",r+=3):(k=e,0===E&&X(zf)),k===e&&("uri"===h.substr(r,3)?(k="uri",r+=3):(k=e,0===E&&X(qf))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(40===h.charCodeAt(r)?(C=z,r++):(C=e,0===E&&X(ne)),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if((D=It())!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e?(41===h.charCodeAt(r)?(U=We,r++):(U=e,0===E&&X(Ke)),U!==e?u=k=function(u){var k={token:"expression",expressionType:"builtincall",builtincall:"uri"};return k.args=[u],k}(D):(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;if(u===e){if(u=r,h.substr(r,5)===t?(k=t,r+=5):(k=e,0===E&&X(n)),k===e&&(h.substr(r,5)===d?(k=d,r+=5):(k=e,0===E&&X(c))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e){if(C=r,40===h.charCodeAt(r)?(I=z,r++):(I=e,0===E&&X(ne)),I!==e){for(D=[],O=G();O!==e;)D.push(O),O=G();if(D!==e)if((O=It())!==e){for(U=[],$=G();$!==e;)U.push($),$=G();U!==e?(41===h.charCodeAt(r)?($=We,r++):($=e,0===E&&X(Ke)),$!==e?C=I=[I,D,O,U,$]:(r=C,C=e)):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;C===e&&(C=si()),C!==e?u=k=function(u){var k={token:"expression",expressionType:"builtincall",builtincall:"bnode"};return 5===u.length?k.args=[u[2]]:k.args=null,k}(C):(r=u,u=e)}else r=u,u=e}else r=u,u=e;if(u===e){if(u=r,h.substr(r,8)===M?(k=M,r+=8):(k=e,0===E&&X(K)),k===e&&(h.substr(r,8)===re?(k=re,r+=8):(k=e,0===E&&X(se))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();_!==e&&(C=ba())!==e?u=k=function(u){var k={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};return k.args=u,k}(C):(r=u,u=e)}else r=u,u=e;if(u===e){if(u=r,"IF"===h.substr(r,2)?(k="IF",r+=2):(k=e,0===E&&X(Ee)),k===e&&("if"===h.substr(r,2)?(k="if",r+=2):(k=e,0===E&&X(Be))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(40===h.charCodeAt(r)?(C=z,r++):(C=e,0===E&&X(ne)),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if((D=It())!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if(44===h.charCodeAt(r)?(U=$t,r++):(U=e,0===E&&X(er)),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if((fe=It())!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();if(ye!==e)if(44===h.charCodeAt(r)?(De=$t,r++):(De=e,0===E&&X(er)),De!==e){for(ze=[],Ae=G();Ae!==e;)ze.push(Ae),Ae=G();if(ze!==e)if((Ae=It())!==e){for(Je=[],rt=G();rt!==e;)Je.push(rt),rt=G();Je!==e?(41===h.charCodeAt(r)?(rt=We,r++):(rt=e,0===E&&X(Ke)),rt!==e?u=k=function(u,k,_){var C={token:"expression",expressionType:"builtincall",builtincall:"if"};return C.args=[u,k,_],C}(D,fe,Ae):(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;if(u===e){if(u=r,h.substr(r,9)===tt?(k=tt,r+=9):(k=e,0===E&&X(st)),k===e&&(h.substr(r,9)===ut?(k=ut,r+=9):(k=e,0===E&&X(pt)),k===e&&(h.substr(r,9)===ft?(k=ft,r+=9):(k=e,0===E&&X(gt)))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(40===h.charCodeAt(r)?(C=z,r++):(C=e,0===E&&X(ne)),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if((D=It())!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e?(41===h.charCodeAt(r)?(U=We,r++):(U=e,0===E&&X(Ke)),U!==e?u=k=function(u){var k={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};return k.args=[u],k}(D):(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;if(u===e){if(u=r,h.substr(r,7)===xt?(k=xt,r+=7):(k=e,0===E&&X(Et)),k===e&&(h.substr(r,7)===Qt?(k=Qt,r+=7):(k=e,0===E&&X(sr)),k===e&&(h.substr(r,7)===Gt?(k=Gt,r+=7):(k=e,0===E&&X(Fr)))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(40===h.charCodeAt(r)?(C=z,r++):(C=e,0===E&&X(ne)),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if((D=It())!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e?(41===h.charCodeAt(r)?(U=We,r++):(U=e,0===E&&X(Ke)),U!==e?u=k=function(u){var k={token:"expression",expressionType:"builtincall",builtincall:"isblank"};return k.args=[u],k}(D):(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;if(u===e){if(u=r,h.substr(r,8)===Jt?(k=Jt,r+=8):(k=e,0===E&&X(kr)),k===e&&(h.substr(r,8)===ar?(k=ar,r+=8):(k=e,0===E&&X(tr))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(40===h.charCodeAt(r)?(C=z,r++):(C=e,0===E&&X(ne)),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if((D=It())!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if(44===h.charCodeAt(r)?(U=$t,r++):(U=e,0===E&&X(er)),U!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();if($!==e)if((fe=It())!==e){for(ye=[],De=G();De!==e;)ye.push(De),De=G();ye!==e?(41===h.charCodeAt(r)?(De=We,r++):(De=e,0===E&&X(Ke)),De!==e?u=k=function(u,k){var _={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};return _.args=[u,k],_}(D,fe):(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;if(u===e){if(u=r,"ISURI"===h.substr(r,5)?(k="ISURI",r+=5):(k=e,0===E&&X(Cr)),k===e&&("isuri"===h.substr(r,5)?(k="isuri",r+=5):(k=e,0===E&&X(En)),k===e&&("isURI"===h.substr(r,5)?(k="isURI",r+=5):(k=e,0===E&&X($r)),k===e&&("ISIRI"===h.substr(r,5)?(k="ISIRI",r+=5):(k=e,0===E&&X(da)),k===e&&("isiri"===h.substr(r,5)?(k="isiri",r+=5):(k=e,0===E&&X(ii)),k===e&&("isIRI"===h.substr(r,5)?(k="isIRI",r+=5):(k=e,0===E&&X(dr))))))),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();if(_!==e)if(40===h.charCodeAt(r)?(C=z,r++):(C=e,0===E&&X(ne)),C!==e){for(I=[],D=G();D!==e;)I.push(D),D=G();if(I!==e)if((D=It())!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();O!==e?(41===h.charCodeAt(r)?(U=We,r++):(U=e,0===E&&X(Ke)),U!==e?u=k=function(u){var k={token:"expression",expressionType:"builtincall",builtincall:"isuri"};return k.args=[u],k}(D):(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e;if(u===e){if(u=r,h.substr(r,7)===ts?(k=ts,r+=7):(k=e,0===E&&X(bp)),k===e&&(h.substr(r,7)===_c?(k=_c,r+=7):(k=e,0===E&&X(xp))),k!==e){if(_=[],Sc.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X(Ac)),C!==e)for(;C!==e;)_.push(C),Sc.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X(Ac));else _=e;if(_!==e){for(C=[],I=G();I!==e;)C.push(I),I=G();if(C!==e)if(40===h.charCodeAt(r)?(I=z,r++):(I=e,0===E&&X(ne)),I!==e){for(D=[],O=r,U=[],$=G();$!==e;)U.push($),$=G();for(U!==e&&($=It())!==e?(44===h.charCodeAt(r)?(fe=$t,r++):(fe=e,0===E&&X(er)),fe!==e?O=U=[U,$,fe]:(r=O,O=e)):(r=O,O=e);O!==e;){for(D.push(O),O=r,U=[],$=G();$!==e;)U.push($),$=G();U!==e&&($=It())!==e?(44===h.charCodeAt(r)?(fe=$t,r++):(fe=e,0===E&&X(er)),fe!==e?O=U=[U,$,fe]:(r=O,O=e)):(r=O,O=e)}if(D!==e){for(O=[],U=G();U!==e;)O.push(U),U=G();if(O!==e)if((U=It())!==e){for($=[],fe=G();fe!==e;)$.push(fe),fe=G();$!==e?(41===h.charCodeAt(r)?(fe=We,r++):(fe=e,0===E&&X(Ke)),fe!==e?u=k=function(u,k,_){var C={token:"expression",expressionType:"custom"};C.name=u.join("");for(var I=[],D=0;D<k.length;D++)I.push(k[D][1]);return I.push(_),C.args=I,C}(_,D,U):(r=u,u=e)):(r=u,u=e)}else r=u,u=e;else r=u,u=e}else r=u,u=e}else r=u,u=e;else r=u,u=e}else r=u,u=e}else r=u,u=e;u===e&&(u=function(){var je,et,nt,lt,Tt,at,Nt,Dt,Ft,_r,lr,hr,Sr,Ar,ur;if(E++,je=r,"REGEX"===h.substr(r,5)?(et="REGEX",r+=5):(et=e,0===E&&X(Cp)),et===e&&("regex"===h.substr(r,5)?(et="regex",r+=5):(et=e,0===E&&X(_p))),et!==e){for(nt=[],lt=G();lt!==e;)nt.push(lt),lt=G();if(nt!==e)if(40===h.charCodeAt(r)?(lt=z,r++):(lt=e,0===E&&X(ne)),lt!==e){for(Tt=[],at=G();at!==e;)Tt.push(at),at=G();if(Tt!==e)if((at=It())!==e){for(Nt=[],Dt=G();Dt!==e;)Nt.push(Dt),Dt=G();if(Nt!==e)if(44===h.charCodeAt(r)?(Dt=$t,r++):(Dt=e,0===E&&X(er)),Dt!==e){for(Ft=[],_r=G();_r!==e;)Ft.push(_r),_r=G();if(Ft!==e)if((_r=It())!==e){for(lr=[],hr=G();hr!==e;)lr.push(hr),hr=G();if(lr!==e){if(hr=r,44===h.charCodeAt(r)?(Sr=$t,r++):(Sr=e,0===E&&X(er)),Sr!==e){for(Ar=[],ur=G();ur!==e;)Ar.push(ur),ur=G();Ar!==e&&(ur=It())!==e?hr=Sr=[Sr,Ar,ur]:(r=hr,hr=e)}else r=hr,hr=e;if(hr===e&&(hr=null),hr!==e){for(Sr=[],Ar=G();Ar!==e;)Sr.push(Ar),Ar=G();Sr!==e?(41===h.charCodeAt(r)?(Ar=We,r++):(Ar=e,0===E&&X(Ke)),Ar!==e?(et=function(u,k,_){var C={token:"expression",expressionType:"regex"};return C.text=u,C.pattern=k,null!=_&&(C.flags=_[2]),C}(at,_r,hr),je=et):(r=je,je=e)):(r=je,je=e)}else r=je,je=e}else r=je,je=e}else r=je,je=e;else r=je,je=e}else r=je,je=e;else r=je,je=e}else r=je,je=e;else r=je,je=e}else r=je,je=e;else r=je,je=e}else r=je,je=e;return E--,je===e&&(et=e,0===E&&X(kp)),je}())===e&&(u=function(){var je,et,nt,lt;if(E++,je=r,h.substr(r,6)===fu?(et=fu,r+=6):(et=e,0===E&&X(Tc)),et===e&&(h.substr(r,6)===cu?(et=cu,r+=6):(et=e,0===E&&X(Lc))),et!==e){for(nt=[],lt=G();lt!==e;)nt.push(lt),lt=G();nt!==e&&(lt=tn())!==e?(et=function(u){var k={token:"expression",expressionType:"builtincall",builtincall:"exists"};return k.args=[u],k}(lt),je=et):(r=je,je=e)}else r=je,je=e;return E--,je===e&&(et=e,0===E&&X(Ap)),je}())===e&&(u=function(){var je,et,nt,lt,Tt,at;if(E++,je=r,"NOT"===h.substr(r,3)?(et="NOT",r+=3):(et=e,0===E&&X(Tp)),et===e&&("not"===h.substr(r,3)?(et="not",r+=3):(et=e,0===E&&X(Lp))),et!==e){for(nt=[],lt=G();lt!==e;)nt.push(lt),lt=G();if(nt!==e)if(h.substr(r,6)===fu?(lt=fu,r+=6):(lt=e,0===E&&X(Tc)),lt===e&&(h.substr(r,6)===cu?(lt=cu,r+=6):(lt=e,0===E&&X(Lc))),lt!==e){for(Tt=[],at=G();at!==e;)Tt.push(at),at=G();Tt!==e&&(at=tn())!==e?(et=function(u){var k={token:"expression",expressionType:"builtincall",builtincall:"notexists"};return k.args=[u],k}(at),je=et):(r=je,je=e)}else r=je,je=e;else r=je,je=e}else r=je,je=e;return E--,je===e&&(et=e,0===E&&X(Ep)),je}())}}}}}}}}}}}}}}return E--,u===e&&(k=e,0===E&&X(Kl)),u}function _u(){var u,k,_,C,I;return E++,u=r,(k=ap())!==e?((_=function(){var D,O,U,$,fe,ye,De,ze;if(E++,D=r,64===h.charCodeAt(r)?(O="@",r++):(O=e,0===E&&X(oh)),O!==e){if(U=[],sh.test(h.charAt(r))?($=h.charAt(r),r++):($=e,0===E&&X(ah)),$!==e)for(;$!==e;)U.push($),sh.test(h.charAt(r))?($=h.charAt(r),r++):($=e,0===E&&X(ah));else U=e;if(U!==e){if($=[],fe=r,45===h.charCodeAt(r)?(ye=Qr,r++):(ye=e,0===E&&X(Zr)),ye!==e){if(De=[],pu.test(h.charAt(r))?(ze=h.charAt(r),r++):(ze=e,0===E&&X(du)),ze!==e)for(;ze!==e;)De.push(ze),pu.test(h.charAt(r))?(ze=h.charAt(r),r++):(ze=e,0===E&&X(du));else De=e;De!==e?fe=ye=[ye,De]:(r=fe,fe=e)}else r=fe,fe=e;for(;fe!==e;)if($.push(fe),fe=r,45===h.charCodeAt(r)?(ye=Qr,r++):(ye=e,0===E&&X(Zr)),ye!==e){if(De=[],pu.test(h.charAt(r))?(ze=h.charAt(r),r++):(ze=e,0===E&&X(du)),ze!==e)for(;ze!==e;)De.push(ze),pu.test(h.charAt(r))?(ze=h.charAt(r),r++):(ze=e,0===E&&X(du));else De=e;De!==e?fe=ye=[ye,De]:(r=fe,fe=e)}else r=fe,fe=e;$!==e?(O=function(u,k){return 0===k.length?("@"+u.join("")).toLowerCase():("@"+u.join("")+"-"+k[0][1].join("")).toLowerCase()}(U,$),D=O):(r=D,D=e)}else r=D,D=e}else r=D,D=e;return E--,D===e&&(O=e,0===E&&X(Od)),D}())===e&&(_=r,"^^"===h.substr(r,2)?(C="^^",r+=2):(C=e,0===E&&X(td)),C!==e&&(I=gr())!==e?_=C=[C,I]:(r=_,_=e)),_===e&&(_=null),_!==e?u=k=function(u,k){return"string"==typeof k&&k.length>0?{token:"literal",value:u.value,lang:k.slice(1),type:null}:null!=k&&"object"==typeof k?(k.shift(),{token:"literal",value:u.value,lang:null,type:k[0]}):{token:"literal",value:u.value,lang:null,type:null}}(k,_):(r=u,u=e)):(r=u,u=e),E--,u===e&&(k=e,0===E&&X(ed)),u}function Su(){var u,k;return E++,E++,(k=xc())===e&&(k=bc())===e&&(k=as()),E--,k===e&&0===E&&X(id),(u=k)===e&&(u=function(){var k,_,C,I;return E++,E++,_=r,43===h.charCodeAt(r)?(C=Pr,r++):(C=e,0===E&&X(fn)),C!==e&&(I=xc())!==e?_=C=lh(I):(r=_,_=e),E--,_===e&&(C=e,0===E&&X(Xd)),(k=_)===e&&(k=function(){var _,C,I;return E++,_=r,43===h.charCodeAt(r)?(C=Pr,r++):(C=e,0===E&&X(fn)),C!==e&&(I=bc())!==e?_=C=lh(I):(r=_,_=e),E--,_===e&&(C=e,0===E&&X(qd)),_}())===e&&(k=function(){var _,C,I;return E++,_=r,43===h.charCodeAt(r)?(C=Pr,r++):(C=e,0===E&&X(fn)),C!==e&&(I=as())!==e?(C=function(u){return u.value="+"+u.value,u}(I),_=C):(r=_,_=e),E--,_===e&&(C=e,0===E&&X(Wd)),_}()),E--,k===e&&0===E&&X(od),k}())===e&&(u=wa()),E--,u===e&&0===E&&X(nd),u}function wa(){var u,k,_,C;return E++,E++,k=r,45===h.charCodeAt(r)?(_=Qr,r++):(_=e,0===E&&X(Zr)),_!==e&&(C=xc())!==e?k=_=Xf(C):(r=k,k=e),E--,k===e&&(_=e,0===E&&X(Kd)),(u=k)===e&&(u=function(){var k,_,C;return E++,k=r,45===h.charCodeAt(r)?(_=Qr,r++):(_=e,0===E&&X(Zr)),_!==e&&(C=bc())!==e?k=_=Xf(C):(r=k,k=e),E--,k===e&&(_=e,0===E&&X(Vd)),k}())===e&&(u=function(){var k,_,C;return E++,k=r,45===h.charCodeAt(r)?(_=Qr,r++):(_=e,0===E&&X(Zr)),_!==e&&(C=as())!==e?k=_=Xf(C):(r=k,k=e),E--,k===e&&(_=e,0===E&&X(Jd)),k}()),E--,u===e&&0===E&&X(sd),u}function Au(){var u,k;return E++,u=r,"TRUE"===h.substr(r,4)?(k="TRUE",r+=4):(k=e,0===E&&X(ld)),k===e&&("true"===h.substr(r,4)?(k="true",r+=4):(k=e,0===E&&X(ud))),k!==e&&(k={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}),(u=k)===e&&(u=r,"FALSE"===h.substr(r,5)?(k="FALSE",r+=5):(k=e,0===E&&X(cd)),k===e&&("false"===h.substr(r,5)?(k="false",r+=5):(k=e,0===E&&X(hd))),k!==e&&(k={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}),u=k),E--,u===e&&(k=e,0===E&&X(ad)),u}function ap(){var u,k;return E++,u=r,(k=function(){var _,C,I,D;if(E++,_=r,h.substr(r,3)===gu?(C=gu,r+=3):(C=e,0===E&&X(vh)),C!==e){for(I=[],gh.test(h.charAt(r))?(D=h.charAt(r),r++):(D=e,0===E&&X(yh)),D===e&&(D=Ti());D!==e;)I.push(D),gh.test(h.charAt(r))?(D=h.charAt(r),r++):(D=e,0===E&&X(yh)),D===e&&(D=Ti());I!==e?(h.substr(r,3)===gu?(D=gu,r+=3):(D=e,0===E&&X(vh)),D!==e?_=C=vu(I):(r=_,_=e)):(r=_,_=e)}else r=_,_=e;return E--,_===e&&(C=e,0===E&&X(ov)),_}())!==e&&(k=hu(k)),(u=k)===e&&(u=r,(k=function(){var _,C,I,D;if(E++,_=r,h.substr(r,3)===yu?(C=yu,r+=3):(C=e,0===E&&X(mh)),C!==e){for(I=[],bh.test(h.charAt(r))?(D=h.charAt(r),r++):(D=e,0===E&&X(xh)),D===e&&(D=Ti());D!==e;)I.push(D),bh.test(h.charAt(r))?(D=h.charAt(r),r++):(D=e,0===E&&X(xh)),D===e&&(D=Ti());I!==e?(h.substr(r,3)===yu?(D=yu,r+=3):(D=e,0===E&&X(mh)),D!==e?_=C=vu(I):(r=_,_=e)):(r=_,_=e)}else r=_,_=e;return E--,_===e&&(C=e,0===E&&X(sv)),_}())!==e&&(k=hu(k)),(u=k)===e&&(u=r,(k=function(){var _,C,I,D;if(E++,_=r,39===h.charCodeAt(r)?(C="'",r++):(C=e,0===E&&X(Vf)),C!==e){for(I=[],uh.test(h.charAt(r))?(D=h.charAt(r),r++):(D=e,0===E&&X(fh)),D===e&&(D=Ti());D!==e;)I.push(D),uh.test(h.charAt(r))?(D=h.charAt(r),r++):(D=e,0===E&&X(fh)),D===e&&(D=Ti());I!==e?(39===h.charCodeAt(r)?(D="'",r++):(D=e,0===E&&X(Vf)),D!==e?_=C=vu(I):(r=_,_=e)):(r=_,_=e)}else r=_,_=e;return E--,_===e&&(C=e,0===E&&X(nv)),_}())!==e&&(k=hu(k)),(u=k)===e&&(u=r,(k=function(){var _,C,I,D;if(E++,_=r,34===h.charCodeAt(r)?(C='"',r++):(C=e,0===E&&X(hh)),C!==e){for(I=[],ph.test(h.charAt(r))?(D=h.charAt(r),r++):(D=e,0===E&&X(dh)),D===e&&(D=Ti());D!==e;)I.push(D),ph.test(h.charAt(r))?(D=h.charAt(r),r++):(D=e,0===E&&X(dh)),D===e&&(D=Ti());I!==e?(34===h.charCodeAt(r)?(D='"',r++):(D=e,0===E&&X(hh)),D!==e?_=C=vu(I):(r=_,_=e)):(r=_,_=e)}else r=_,_=e;return E--,_===e&&(C=e,0===E&&X(iv)),_}())!==e&&(k=hu(k)),u=k))),E--,u===e&&(k=e,0===E&&X(dd)),u}function gr(){var u,k,_,C,I,D,O;return E++,u=r,(k=Fu())!==e&&(k=function(u){return{token:"uri",prefix:null,suffix:null,value:u}}(k)),(u=k)===e&&(u=r,E++,_=r,E++,I=r,(D=mc())!==e&&(O=fp())!==e?(D=function(u,k){return[u,k]}(D,O),I=D):(r=I,I=e),E--,I===e&&(D=e,0===E&&X(Ad)),(C=I)!==e&&(C=function(u){return{token:"uri",prefix:u[0],suffix:u[1],value:null}}(C)),(_=C)===e&&(_=r,(C=mc())!==e&&(C=function(u){return{token:"uri",prefix:u,suffix:"",value:null}}(C)),_=C),E--,_===e&&(C=e,0===E&&X(yd)),(k=_)!==e&&(k=k),u=k),E--,u===e&&(k=e,0===E&&X(vd)),u}function Fu(){var u,k,_,C;if(E++,u=r,60===h.charCodeAt(r)?(k="<",r++):(k=e,0===E&&X(na)),k!==e){for(_=[],Zc.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X($c));C!==e;)_.push(C),Zc.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X($c));_!==e?(62===h.charCodeAt(r)?(C=">",r++):(C=e,0===E&&X(Xo)),C!==e?u=k=function(u){return u.join("")}(_):(r=u,u=e)):(r=u,u=e)}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Cd)),u}function mc(){var u,k,_;return E++,u=r,(k=function(){var C,I,D,O;if(E++,C=r,(I=lp())!==e){for(D=[],(O=Eu())===e&&(46===h.charCodeAt(r)?(O=Wt,r++):(O=e,0===E&&X(zt)));O!==e;)D.push(O),(O=Eu())===e&&(46===h.charCodeAt(r)?(O=Wt,r++):(O=e,0===E&&X(zt)));D!==e?(I=function(u,k){if("."==k[k.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return u+k.join("")}(I,D),C=I):(r=C,C=e)}else r=C,C=e;return E--,C===e&&(I=e,0===E&&X(rg)),C}())===e&&(k=null),k!==e?(58===h.charCodeAt(r)?(_=":",r++):(_=e,0===E&&X(ga)),_!==e?u=k=k:(r=u,u=e)):(r=u,u=e),E--,u===e&&(k=e,0===E&&X(Sd)),u}function as(){var u,k,_;if(E++,r,k=[],Vt.test(h.charAt(r))?(_=h.charAt(r),r++):(_=e,0===E&&X(Kt)),_!==e)for(;_!==e;)k.push(_),Vt.test(h.charAt(r))?(_=h.charAt(r),r++):(_=e,0===E&&X(Kt));else k=e;return k!==e&&(k=function(u){var k={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"};return k.value=Li(u),k}(k)),E--,(u=k)===e&&(k=e,0===E&&X(Dd)),u}function bc(){var u,k,_,C,I;if(E++,u=r,k=[],Vt.test(h.charAt(r))?(_=h.charAt(r),r++):(_=e,0===E&&X(Kt)),_!==e)for(;_!==e;)k.push(_),Vt.test(h.charAt(r))?(_=h.charAt(r),r++):(_=e,0===E&&X(Kt));else k=e;if(k!==e)if(46===h.charCodeAt(r)?(_=Wt,r++):(_=e,0===E&&X(zt)),_!==e){for(C=[],Vt.test(h.charAt(r))?(I=h.charAt(r),r++):(I=e,0===E&&X(Kt));I!==e;)C.push(I),Vt.test(h.charAt(r))?(I=h.charAt(r),r++):(I=e,0===E&&X(Kt));C!==e?u=k=function(u,k,_){var C={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};return C.value=Li([u,k,_]),C}(k,_,C):(r=u,u=e)}else r=u,u=e;else r=u,u=e;if(u===e)if(u=r,46===h.charCodeAt(r)?(k=Wt,r++):(k=e,0===E&&X(zt)),k!==e){if(_=[],Vt.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X(Kt)),C!==e)for(;C!==e;)_.push(C),Vt.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X(Kt));else _=e;_!==e?u=k=function(u,k){var _={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};return _.value=Li([u,k]),_}(k,_):(r=u,u=e)}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Md)),u}function xc(){var u,k,_,C,I;if(E++,u=r,k=[],Vt.test(h.charAt(r))?(_=h.charAt(r),r++):(_=e,0===E&&X(Kt)),_!==e)for(;_!==e;)k.push(_),Vt.test(h.charAt(r))?(_=h.charAt(r),r++):(_=e,0===E&&X(Kt));else k=e;if(k!==e)if(46===h.charCodeAt(r)?(_=Wt,r++):(_=e,0===E&&X(zt)),_!==e){for(C=[],Vt.test(h.charAt(r))?(I=h.charAt(r),r++):(I=e,0===E&&X(Kt));I!==e;)C.push(I),Vt.test(h.charAt(r))?(I=h.charAt(r),r++):(I=e,0===E&&X(Kt));C!==e&&(I=wc())!==e?u=k=function(u,k,_,C){var I={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return I.value=Li([u,k,_,C]),I}(k,_,C,I):(r=u,u=e)}else r=u,u=e;else r=u,u=e;if(u===e){if(u=r,46===h.charCodeAt(r)?(k=Wt,r++):(k=e,0===E&&X(zt)),k!==e){if(_=[],Vt.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X(Kt)),C!==e)for(;C!==e;)_.push(C),Vt.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X(Kt));else _=e;_!==e&&(C=wc())!==e?u=k=function(u,k,_){var C={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return C.value=Li([u,k,_]),C}(k,_,C):(r=u,u=e)}else r=u,u=e;if(u===e){if(u=r,k=[],Vt.test(h.charAt(r))?(_=h.charAt(r),r++):(_=e,0===E&&X(Kt)),_!==e)for(;_!==e;)k.push(_),Vt.test(h.charAt(r))?(_=h.charAt(r),r++):(_=e,0===E&&X(Kt));else k=e;k!==e&&(_=wc())!==e?u=k=function(u,k){var _={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return _.value=Li([u,k]),_}(k,_):(r=u,u=e)}}return E--,u===e&&(k=e,0===E&&X(Qd)),u}function wc(){var u,k,_,C,I;if(E++,u=r,Zd.test(h.charAt(r))?(k=h.charAt(r),r++):(k=e,0===E&&X($d)),k!==e)if(ev.test(h.charAt(r))?(_=h.charAt(r),r++):(_=e,0===E&&X(tv)),_===e&&(_=null),_!==e){if(C=[],Vt.test(h.charAt(r))?(I=h.charAt(r),r++):(I=e,0===E&&X(Kt)),I!==e)for(;I!==e;)C.push(I),Vt.test(h.charAt(r))?(I=h.charAt(r),r++):(I=e,0===E&&X(Kt));else C=e;C!==e?u=k=function(u,k,_){return Li([u,k,_])}(k,_,C):(r=u,u=e)}else r=u,u=e;else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(Yd)),u}function Ti(){var u,k,_;return E++,u=r,92===h.charCodeAt(r)?(k="\\",r++):(k=e,0===E&&X(kh)),k!==e?(lv.test(h.charAt(r))?(_=h.charAt(r),r++):(_=e,0===E&&X(uv)),_!==e?u=k=[k,_]:(r=u,u=e)):(r=u,u=e),E--,u===e&&(k=e,0===E&&X(av)),u}function si(){var u,k,_,C;if(E++,u=r,40===h.charCodeAt(r)?(k=z,r++):(k=e,0===E&&X(ne)),k!==e){for(_=[],C=G();C!==e;)_.push(C),C=G();_!==e?(41===h.charCodeAt(r)?(C=We,r++):(C=e,0===E&&X(Ke)),C!==e?u=k={token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:(r=u,u=e)):(r=u,u=e)}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(fv)),u}function G(){var u;return E++,pv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(dv)),u===e&&(vv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(gv)),u===e&&(yv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(mv)),u===e&&(bv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(xv)),u===e&&(u=function(){var k,_,C,I;if(E++,k=r,35===h.charCodeAt(r)?(_="#",r++):(_=e,0===E&&X(_h)),_!==e){for(C=[],Sh.test(h.charAt(r))?(I=h.charAt(r),r++):(I=e,0===E&&X(Ah));I!==e;)C.push(I),Sh.test(h.charAt(r))?(I=h.charAt(r),r++):(I=e,0===E&&X(Ah));C!==e?k=_=[_,C]:(r=k,k=e)}else r=k,k=e;return E--,k===e&&(_=e,0===E&&X(wv)),k}())))),E--,u===e&&0===E&&X(hv),u}function lp(){var u;return E++,_v.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Sv)),u===e&&(Av.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Fv)),u===e&&(Ev.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Tv)),u===e&&(Lv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Iv)),u===e&&(Nv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Ov)),u===e&&(Rv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Dv)),u===e&&(jv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Mv)),u===e&&(Bv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Pv)),u===e&&(Qv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Uv)),u===e&&(Gv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Hv)),u===e&&(Wv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(zv)),u===e&&(qv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Xv)),u===e&&(Jv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Vv)),u===e&&(Kv.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Yv))))))))))))))),E--,u===e&&0===E&&X(Cv),u}function ka(){var u;return E++,(u=lp())===e&&(95===h.charCodeAt(r)?(u="_",r++):(u=e,0===E&&X(Eh))),E--,u===e&&0===E&&X(Zv),u}function up(){var u,k,_,C;if(E++,u=r,(k=ka())===e&&(Vt.test(h.charAt(r))?(k=h.charAt(r),r++):(k=e,0===E&&X(Kt))),k!==e){for(_=[],(C=ka())===e&&(Vt.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X(Kt)),C===e&&(Kf.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X(Yf)),C===e&&(Zf.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X($f)),C===e&&(ec.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X(tc))))));C!==e;)_.push(C),(C=ka())===e&&(Vt.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X(Kt)),C===e&&(Kf.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X(Yf)),C===e&&(Zf.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X($f)),C===e&&(ec.test(h.charAt(r))?(C=h.charAt(r),r++):(C=e,0===E&&X(tc))))));_!==e?u=k=function(u,k){return u+k.join("")}(k,_):(r=u,u=e)}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X($v)),u}function Eu(){var u;return E++,(u=ka())===e&&(45===h.charCodeAt(r)?(u=Qr,r++):(u=e,0===E&&X(Zr)),u===e&&(Vt.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Kt)),u===e&&(Kf.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Yf)),u===e&&(Zf.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X($f)),u===e&&(ec.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(tc))))))),E--,u===e&&0===E&&X(tg),u}function fp(){var u,k,_,C;if(E++,u=r,(k=ka())===e&&(Vt.test(h.charAt(r))?(k=h.charAt(r),r++):(k=e,0===E&&X(Kt)),k===e&&(58===h.charCodeAt(r)?(k=":",r++):(k=e,0===E&&X(ga)),k===e&&(k=kc()))),k!==e){for(_=[],(C=Eu())===e&&(46===h.charCodeAt(r)?(C=Wt,r++):(C=e,0===E&&X(zt)),C===e&&(58===h.charCodeAt(r)?(C=":",r++):(C=e,0===E&&X(ga)),C===e&&(C=kc())));C!==e;)_.push(C),(C=Eu())===e&&(46===h.charCodeAt(r)?(C=Wt,r++):(C=e,0===E&&X(zt)),C===e&&(58===h.charCodeAt(r)?(C=":",r++):(C=e,0===E&&X(ga)),C===e&&(C=kc())));_!==e?u=k=function(u,k){return u+(k||[]).join("")}(k,_):(r=u,u=e)}else r=u,u=e;return E--,u===e&&(k=e,0===E&&X(ig)),u}function kc(){var u,k,_,C,I,D;return E++,E++,_=r,37===h.charCodeAt(r)?(C="%",r++):(C=e,0===E&&X(Lh)),C!==e&&(I=cp())!==e&&(D=cp())!==e?_=C=[C,I,D]:(r=_,_=e),_!==e&&(_=function(u){return u.join("")}(_)),E--,(k=_)===e&&(_=e,0===E&&X(ag)),(u=k)===e&&(u=function(){var k,_,C;return E++,k=r,92===h.charCodeAt(r)?(_="\\",r++):(_=e,0===E&&X(kh)),_!==e?(95===h.charCodeAt(r)?(C="_",r++):(C=e,0===E&&X(Eh)),C===e&&(126===h.charCodeAt(r)?(C="~",r++):(C=e,0===E&&X(gg)),C===e&&(46===h.charCodeAt(r)?(C=Wt,r++):(C=e,0===E&&X(zt)),C===e&&(45===h.charCodeAt(r)?(C=Qr,r++):(C=e,0===E&&X(Zr)),C===e&&(33===h.charCodeAt(r)?(C="!",r++):(C=e,0===E&&X(kn)),C===e&&(36===h.charCodeAt(r)?(C="$",r++):(C=e,0===E&&X(nh)),C===e&&(38===h.charCodeAt(r)?(C="&",r++):(C=e,0===E&&X(mg)),C===e&&(39===h.charCodeAt(r)?(C="'",r++):(C=e,0===E&&X(Vf)),C===e&&(40===h.charCodeAt(r)?(C=z,r++):(C=e,0===E&&X(ne)),C===e&&(41===h.charCodeAt(r)?(C=We,r++):(C=e,0===E&&X(Ke)),C===e&&(42===h.charCodeAt(r)?(C=mt,r++):(C=e,0===E&&X(yt)),C===e&&(43===h.charCodeAt(r)?(C=Pr,r++):(C=e,0===E&&X(fn)),C===e&&(44===h.charCodeAt(r)?(C=$t,r++):(C=e,0===E&&X(er)),C===e&&(59===h.charCodeAt(r)?(C=sn,r++):(C=e,0===E&&X(jr)),C===e&&(58===h.charCodeAt(r)?(C=":",r++):(C=e,0===E&&X(ga)),C===e&&(61===h.charCodeAt(r)?(C="=",r++):(C=e,0===E&&X(Yn)),C===e&&(47===h.charCodeAt(r)?(C="/",r++):(C=e,0===E&&X(xn)),C===e&&(63===h.charCodeAt(r)?(C="?",r++):(C=e,0===E&&X(wn)),C===e&&(35===h.charCodeAt(r)?(C="#",r++):(C=e,0===E&&X(_h)),C===e&&(64===h.charCodeAt(r)?(C="@",r++):(C=e,0===E&&X(oh)),C===e&&(37===h.charCodeAt(r)?(C="%",r++):(C=e,0===E&&X(Lh)))))))))))))))))))))),C!==e?(_=function(u){return"\\"+u}(C),k=_):(r=k,k=e)):(r=k,k=e),E--,k===e&&(_=e,0===E&&X(dg)),k}()),E--,u===e&&0===E&&X(sg),u}function cp(){var u;return E++,Vt.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(Kt)),u===e&&(fg.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(cg)),u===e&&(hg.test(h.charAt(r))?(u=h.charAt(r),r++):(u=e,0===E&&X(pg)))),E--,u===e&&0===E&&X(ug),u}var Li=function(u){for(var k="",_=0;_<u.length;_++)"string"==typeof u[_]?k+=u[_]:k+=u[_].join("");return k},Gr=0,hp={},wg=function(u,k){hp[u]=k},kg=function(u){hp.null=u},pp=function(u){var k="";if(null==u)return null;for(var _=0;_<u.length;_++)k+=u[_];return k.toUpperCase()};if((m=f())!==e&&r===h.length)return m;throw m!==e&&r<h.length&&X({type:"end"}),function xg(u,k,_){return new q(q.buildMessage(u,k),u,k,_)}(rc,Ln<h.length?h.charAt(Ln):null,Ln<h.length?Nh(Ln,Ln+1):Nh(Ln,Ln))}}}()},{}],136:[function(J,ae,ce){J("./btree").Tree;var q=J("./utils"),h=q,F=J("./lexicon").Lexicon;PersistentLexicon=function(m,e){var o=this;q.registerIndexedDB(o),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,o.dbName=e||"rdfstorejs";var f=o.indexedDB.open(this.dbName+"_lexicon",1);f.onerror=function(l){m(null,new Error("Error opening IndexedDB: "+l.target.errorCode))},f.onsuccess=function(l){o.db=l.target.result,m(o)},f.onupgradeneeded=function(l){o.db=l.target.result,o.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),o.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(m,e,o){if(m!=this.defaultGraphOid){var f=this.db.transaction(["knownGraphs"],"readwrite");f.onerror=function(y){o(null,new Error(y.target.statusCode))};var l=f.objectStore("knownGraphs");l.get(e).onsuccess=function(y){y.target.result?o(!0):l.add({oid:m,uriToken:e}).onsuccess=function(s){o(!0)}}}else o()},PersistentLexicon.prototype.registeredGraphs=function(m,e){var o=[],f=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs").openCursor();f.onsuccess=function(l){var y=l.target.result;y?(!0===m?o.push(y.value.uriToken):o.push(y.value.oid),y.continue()):e(o)},f.onerror=function(l){e(null,new Error("Error retrieving data from the cursor: "+l.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(m,e){if(m===this.defaultGraphUri)e(this.defaultGraphOid);else{var o=this.db.transaction(["components"],"readwrite").objectStore("components"),f=o.index("value").get("_u:"+m);f.onsuccess=function(l){var y=l.target.result;if(y){y.counter++;var s=y.id,v=o.put(y);v.onsuccess=function(a){e(s)},v.onerror=function(a){e(null,new Error("Error updating the URI data"+a.target.errorCode))}}else{var x=o.add({value:"_u:"+m,counter:0,uri:!0});x.onsuccess=function(a){e(a.target.result)},x.onerror=function(a){e(null,new Error("Error inserting the URI data"+a.target.errorCode))}}},f.onerror=function(l){e(null,new Error("Error retrieving the URI data"+l.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(m,e){if(m===this.defaultGraphUri)e(this.defaultGraphOid);else{var o=this.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+m);o.onsuccess=function(f){null!=f.target.result?e(f.target.result.id):e(-1)},o.onerror=function(f){e(null,new Error("Error retrieving uri data "+f.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(m,e){if(m===this.defaultGraphUri)e(0);else{var o=that.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+m);o.onsuccess=function(f){null!=f.target.result?e(f.target.result.cost):e(-1)},o.onerror=function(f){e(null,new Error("Error retrieving uri data "+f.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(m){var e=guid(),o=this.db.transaction(["components"],"readwrite").objectStore("components").add({value:"_b:"+e,counter:0,label:!0});o.onsuccess=function(f){m(f.target.result)},o.onerror=function(f){m(null,new Error("Error inserting the URI data"+f.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(m,e){e(0)},PersistentLexicon.prototype.registerLiteral=function(m,e){var o=this.db.transaction(["components"],"readwrite").objectStore("components"),f=o.index("value").get("_l:"+m);f.onsuccess=function(l){var y=l.target.result;if(y){y.counter++;var s=y.id,v=o.put(y);v.onsuccess=function(a){e(s)},v.onerror=function(a){e(null,new Error("Error updating the literal data"+a.target.errorCode))}}else{var x=o.add({value:"_l:"+m,counter:0,literal:!0});x.onsuccess=function(a){e(a.target.result)},x.onerror=function(a){e(null,new Error("Error inserting the literal data"+a.target.errorCode))}}},f.onerror=function(l){e(null,new Error("Error retrieving the literal data"+l.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(m,e){var o=that.db.transaction(["components"]).objectStore("components").index("value").get("_l:"+m);o.onsuccess=function(f){null!=f.target.result?e(f.target.result.id):e(-1)},o.onerror=function(f){e(null,new Error("Error retrieving literal data "+f.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(m,e){var o=that.db.transaction(["components"]).objectStore("components").index("components").get(m);o.onsuccess=function(f){null!=f.target.result?e(f.target.result.cost):e(-1)},o.onerror=function(f){e(null,new Error("Error retrieving literal data "+f.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(m){return F.prototype.parseLiteral(m)},PersistentLexicon.prototype.parseUri=function(m){return F.prototype.parseUri(m)},PersistentLexicon.prototype.retrieve=function(m,e){var o,f=this;m===this.defaultGraphOid?e({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):((o=f.db.transaction(["components"]).objectStore("components").get(m)).onsuccess=function(l){if(null!=l.target.result)if(null!=l.target.result.label){var y="_:"+l.target.result.id;e({token:"blank",value:y})}else null!=l.target.result.uri?e(f.parseUri(l.target.result.value.slice(3,l.target.result.value.length))):null!=l.target.result.literal?e(f.parseLiteral(l.target.result.value.slice(3,l.target.result.value.length))):(console.log(l.target.result),e(null,new Error("Unknown type of component "+l.target.result)));else e(null,null)},o.onerror=function(l){e(null,new Error("Error searching in blanks data "+l.target.errorCode))})},PersistentLexicon.prototype.clear=function(m){this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var e,o=function(){null!=m&&m()};(e=this.db.transaction(["components"],"readwrite").objectStore("components").clear()).onsuccess=o,e.onerror=o},PersistentLexicon.prototype.unregister=function(m,e,o){var f=this;h.seq(function(l){f._unregisterTerm(m.subject.token,e.subject,l)},function(l){f._unregisterTerm(m.predicate.token,e.predicate,l)},function(l){f._unregisterTerm(m.object.token,e.object,l)},function(l){null!=m.graph?f._unregisterTerm(m.graph.token,e.graph,l):l()})(function(){o(!0)})},PersistentLexicon.prototype._unregisterTerm=function(m,e,o){var f=this.db.transaction(["components","knownGraphs"],"readwrite");"uri"===m?e!=this.defaultGraphOid?f.objectStore("components").delete(e).onsuccess=void(f.objectStore("knownGraphs").delete(e).onsuccess=function(){o()}):o():f.objectStore("components").delete(e).onsuccess=function(){o()}},ae.exports={PersistentLexicon}},{"./btree":130,"./lexicon":133,"./utils":147}],137:[function(J,ae,ce){var q=J("./utils");PersistentQuadBackend=function(h,F){var m=this;if(0!==arguments){for(var e in q.registerIndexedDB(m),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={},this.componentOrders){var o=this.componentOrders[e].slice(0,e.length).sort().join(".");this.componentOrdersMap[o]=e}m.dbName=h.name||"rdfstorejs";var f=m.indexedDB.open(this.dbName+"_db",1);f.onerror=function(l){F(null,new Error("Error opening IndexedDB: "+l.target.errorCode))},f.onsuccess=function(l){m.db=l.target.result,F(m)},f.onupgradeneeded=function(l){var y=l.target.result.createObjectStore(m.dbName,{keyPath:"SPOG"});q.each(m.indices,function(s){"SPOG"!==s&&y.createIndex(s,s,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(h,F){var m=this;q.each(this.indices,function(o){h[o]=m._genMinIndexKey(h,o)});var e=m.db.transaction([m.dbName],"readwrite");e.oncomplete=function(o){},e.onerror=function(o){F(null,new Error(o.target.statusCode))},e.objectStore(m.dbName).add(h).onsuccess=function(o){F(!0)}},PersistentQuadBackend.prototype.range=function(h,F){var m=this.db.transaction([this.dbName]).objectStore(this.dbName),e=this._indexForPattern(h),o=this._genMinIndexKey(h,e),f=this._genMaxIndexKey(h,e),l=this.IDBKeyRange.bound(o,f,!1,!1),y=[];("SPOG"===e?m:m.index(e)).openCursor(l).onsuccess=function(s){var v=s.target.result;v?(y.push(v.value),v.continue()):F(y)}},PersistentQuadBackend.prototype.search=function(h,F){var m=this.db.transaction([this.dbName]).objectStore(this.dbName),e=this._genMinIndexKey(h,"SPOG"),o=m.get(e);o.onerror=function(f){F(null,new Error(f.target.statusCode))},o.onsuccess=function(f){F(null!=f.target.result)}},PersistentQuadBackend.prototype.delete=function(h,F){var m=this._genMinIndexKey(h,"SPOG"),e=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).delete(m);e.onsuccess=function(){F(!0)},e.onerror=function(o){F(null,new Error(o.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(h,F){var m=this.componentOrders[F];return q.map(m,function(e){return"string"==typeof h[e]||null==h[e]?"0":h[e]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(h,F){for(var m=this.componentOrders[F],e=[],o=0;o<m.length;o++){var f=h[m[o]];e[o]="string"==typeof f?"z":f}return q.map(e,function(l){return""+l}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(h){var F=h.indexKey.sort().join("."),m=this.componentOrdersMap[F];if(null==m)throw new Error("Error, cannot find index for indexKey "+F);return m},PersistentQuadBackend.prototype.clear=function(h){var F;(F=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).clear()).onsuccess=function(){h()},F.onerror=function(){h()}},ae.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":147}],138:[function(J,ae,ce){var q=J("./quad_index").QuadIndex,h=J("./utils");QuadBackend=function(F,m){this.indexMap={},this.treeOrder=F.treeOrder,this.indices=F.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var e=this;h.eachSeries(this.indices,function(o,f){new q({order:e.treeOrder,componentOrder:e.componentOrders[o]},function(l){e.indexMap[o]=l,f()})},function(){m(e)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(F){for(var m=F.indexKey,e=0;e<QuadBackend.allIndices.length;e++)for(var o=QuadBackend.allIndices[e],f=QuadBackend.componentOrders[o],l=0;l<f.length&&!1!==h.include(m,f[l]);l++)if(l==m.length-1)return o;return"SPOG"},QuadBackend.prototype.index=function(F,m){var e=this;h.eachSeries(this.indices,function(o,f){e.indexMap[o].insert(F,function(){f()})},function(){m(!0)})},QuadBackend.prototype.range=function(F,m){var e=this._indexForPattern(F),o=this.indexMap[e];null!=o&&o.range(F,function(f){m(f)})},QuadBackend.prototype.search=function(F,m){var e=this.indexMap.SPOG;null!=e&&e.search(F,function(o){m(null!=o)})},QuadBackend.prototype.delete=function(F,m){var e=this;h.eachSeries(this.indices,function(o,f){e.indexMap[o].delete(F,function(){f()})},function(){m(!0)})},QuadBackend.prototype.clear=function(F){var m=this;h.eachSeries(this.indices,function(e,o){new q({order:m.treeOrder,componentOrder:m.componentOrders[e]},function(f){m.indexMap[e]=f,o()})},function(){F(!0)})},ae.exports.QuadBackend=QuadBackend},{"./quad_index":139,"./utils":147}],139:[function(J,ae,ce){var q=J("./btree").Tree,h=J("./utils"),F=J("./utils");NodeKey=function(m,e){this.subject=m.subject,this.predicate=m.predicate,this.object=m.object,this.graph=m.graph,this.order=e},NodeKey.prototype.comparator=function(m){for(var e=0;e<this.order.length;e++){var o=this.order[e];if(null==m[o])return 0;if(this[o]<m[o])return-1;if(this[o]>m[o])return 1}return 0},Pattern=function(m){this.subject=m.subject,this.predicate=m.predicate,this.object=m.object,this.graph=m.graph,this.indexKey=[],this.keyComponents={};var e=[],o=[],f=this;h.forEach(["subject","predicate","object","graph"],function(l){"string"==typeof f[l]?(o.push(l),f.keyComponents[l]=null):(e.push(l),f.keyComponents[l]=f[l],f.indexKey.push(l))}),this.order=e.concat(o),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(m,e){0!=arguments&&(this.componentOrder=m.componentOrder,q.call(this,m.order,function(o){o.comparator=function(f,l){for(var y=0;y<o.componentOrder.length;y++){var s=o.componentOrder[y],v=f[s],x=l[s];if(v<x)return-1;if(v>x)return 1}return 0},o.rangeComparator=function(f,l){for(var y=0;y<o.componentOrder.length;y++){var s=o.componentOrder[y];if(null==l[s]||null==f[s])return 0;if(f[s]<l[s])return-1;if(f[s]>l[s])return 1}return 0},e(o)}))},QuadIndex.prototype=h.create(q.prototype,{constructor:q}),QuadIndex.prototype.insert=function(m,e){q.prototype.insert.call(this,m,null,function(o){e(o)})},QuadIndex.prototype.search=function(m,e){q.prototype.search.call(this,m,function(o){e(o)},!0)},QuadIndex.prototype.range=function(m,e){this._rangeTraverse(this,this.root,m,e)},QuadIndex.prototype._rangeTraverse=function(m,e,o,f){var l=o.key,y=[],s=[e];F.whilst(function(){return s.length>0},function(v){for(var x=s.shift(),a=0;a<x.numberActives&&-1===m.rangeComparator(x.keys[a].key,l);)a++;if(!0===x.isLeaf){for(var b=a;b<x.numberActives&&0===m.rangeComparator(x.keys[b].key,l);)y.push(x.keys[b].key),b++;v()}else m._diskRead(x.children[a],function(A){s.push(A);var T=a;F.whilst(function(){return T<x.numberActives&&0===m.rangeComparator(x.keys[T].key,l)},function(B){y.push(x.keys[T].key),T++,m._diskRead(x.children[T],function(N){s.push(N),B()})},function(){v()})})},function(){f(y)})},ae.exports={QuadIndex,Pattern,NodeKey}},{"./btree":130,"./utils":147}],140:[function(J,ae,ce){var q=J("./abstract_query_tree").AbstractQueryTree,h=J("./abstract_query_tree").NonSupportedSparqlFeatureError,F=J("./utils"),m=J("./quad_index"),e=J("./query_plan").QueryPlan,o=J("./query_filters").QueryFilters,f=J("./rdf_model"),l=J("./rdf_loader").RDFLoader,y=J("./graph_callbacks").CallbacksBackend,s=J("./utils"),v=J("./utils");function x(a,b,A){this.name="BindExpressionError",this.bind=b,this.error=A,this.message=a}x.prototype=new Error,x.constructor=x,QueryEngine=function(a){0!=arguments.length&&(this.backend=a.backend,this.lexicon=a.lexicon,this.eventsOnBatchLoad=a.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new q,this.rdfLoader=new l(a.communication),this.callbacksBackend=new y(this),this.customFns=a.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(a){this.customFns=a},QueryEngine.prototype.registerNsInEnvironment=function(a,b){var A=[];null!=a&&null!=a.prefixes&&(A=a.prefixes);var T={};for(var B in this.defaultPrefixes)T[B]=this.defaultPrefixes[B];for(var N=0;N<A.length;N++){var P=A[N];"prefix"===P.token&&(T[P.prefix]=P.local)}b.namespaces=T,null!=a&&a.base&&"object"==typeof a.base?b.base=a.base.value:b.base=null},QueryEngine.prototype.applyModifier=function(a,b){if("DISTINCT"==a){for(var A={},T=[],B=0;B<b.length;B++){var N=b[B],P="";for(var L in N){var Q=N[L];null==Q?P=P+L+"null":"literal"==Q.token?(null!=Q.value&&(P+=Q.value),null!=Q.lang&&(P+=Q.lang),null!=Q.type&&(P+=Q.type)):P=Q.value?P+L+Q.value:P+L+Q}null==A[P]&&(T.push(N),A[P]=!0)}return T}return b},QueryEngine.prototype.applyLimitOffset=function(a,b,A){return null==b&&null==a?A:(null==a&&(a=0),b=null==b?A.length:a+b,A.slice(a,b))},QueryEngine.prototype.applySingleOrderBy=function(a,b,A,T,B){var N=[],P=this;s.eachSeries(a,function(L,Q){o.collect(L.expression,[b],A,T,P,function(j){N.push(j[0].value),Q()})},function(){B({binding:b,value:N})})},QueryEngine.prototype.applyOrderBy=function(a,b,A,T,B){var N=this,P=[];null!=a&&a.length>0?s.eachSeries(b,function(L,Q){N.applySingleOrderBy(a,L,A,T,function(j){P.push(j),Q()})},function(){P.sort(function(j,V){return N.compareFilteredBindings(j,V,a,T)});for(var L=[],Q=0;Q<P.length;Q++)L.push(P[Q].binding);B(L)}):B(b)},QueryEngine.prototype.compareFilteredBindings=function(a,b,A,T){for(var B=0;;){if(B==a.value.length)return 0;var N,P=A[B].direction;if(null!=a.value[B]||null!=b.value[B]){if(null==a.value[B])N={value:!1};else if(null==b.value[B])N={value:!0};else{if("blank"===a.value[B].token&&"blank"===b.value[B].token){B++;continue}if("blank"===a.value[B].token)N={value:!1};else if("blank"===b.value[B].token)N={value:!0};else if("uri"===a.value[B].token&&"uri"===b.value[B].token){if(1==o.runEqualityFunction(a.value[B],b.value[B],[],this,T).value){B++;continue}N=o.runTotalGtFunction(a.value[B],b.value[B],[])}else if("uri"===a.value[B].token)N={value:!1};else if("uri"===b.value[B].token)N={value:!0};else if("literal"===a.value[B].token&&"literal"===b.value[B].token&&null==a.value[B].type&&null==b.value[B].type){if(1==o.runEqualityFunction(a.value[B],b.value[B],[],this,T).value){B++;continue}N=o.runTotalGtFunction(a.value[B],b.value[B],[])}else if("literal"===a.value[B].token&&null==a.value[B].type)N={value:!1};else if("literal"===b.value[B].token&&null==b.value[B].type)N={value:!0};else{if(1==o.runEqualityFunction(a.value[B],b.value[B],[],this,T).value){B++;continue}N=o.runTotalGtFunction(a.value[B],b.value[B],[])}}return 1==N.value?"ASC"===P?1:-1:"ASC"===P?-1:1}B++}},QueryEngine.prototype.removeDefaultGraphBindings=function(a,b){for(var A=[],T={},B=0;B<b.named.length;B++)T[b.named[B].oid]=!0;for(B=0;B<b.implicit.length;B++)null==T[b.implicit[B].oid]&&A.push(b.implicit[B].oid);var N=[];for(B=0;B<a.length;B++){var P=a[B],L=!1;for(var Q in P){for(var j=0;j<T.length;j++)if(P[Q]===T[j]){L=!0;break}if(L)break}L||N.push(P)}return N},QueryEngine.prototype.aggregateBindings=function(a,b,A,T,B){this.copyDenormalizedBindings(b,T.outCache,function(N){for(var P={},L=0;L<a.length;L++){var Q=o.runAggregator(a[L],N,this,A,T);a[L].alias?P[a[L].alias.value]=Q:P[a[L].value.value]=Q}B(P)})},QueryEngine.prototype.projectBindings=function(a,b,A){if("*"===a[0].kind)return b;for(var T=[],B=0;B<b.length;B++){for(var N=b[B],P={},L=!0,Q=0;Q<a.length;Q++)if("variable"==a[Q].token&&"aliased"!=a[Q].kind)P[a[Q].value.value]=N[a[Q].value.value];else if("variable"==a[Q].token&&"aliased"==a[Q].kind){var j=o.runFilter(a[Q].expression,N,this,A,{blanks:{},outCache:{}});if(o.isEbvError(j)){L=!1;break}P[a[Q].alias.value]=j}!0===L&&T.push(P)}return T},QueryEngine.prototype.resolveNsInEnvironment=function(a,b){return b.namespaces[a]},QueryEngine.prototype.normalizeTerm=function(a,b,A,T){if("uri"===a.token){var B=F.lexicalFormBaseUri(a,b);null==B?T(null):A?this.lexicon.registerUri(B,T):this.lexicon.resolveUri(B,T)}else if("literal"===a.token){var N=F.lexicalFormLiteral(a,b);A?this.lexicon.registerLiteral(N,T):this.lexicon.resolveLiteral(N,T)}else if("blank"===a.token){var P=a.value,L=b.blanks[P];null!=L?T(L):A?this.lexicon.registerBlank(function(Q){b.blanks[P]=Q,T(Q)}):this.lexicon.resolveBlank(function(Q){b.blanks[P]=Q,T(Q)})}else"var"===a.token?T(a.value):T(null)},QueryEngine.prototype.normalizeDatasets=function(a,b,A){var T=this;s.eachSeries(a,function(B,N){B.value===T.lexicon.defaultGraphUri?(B.oid=T.lexicon.defaultGraphOid,N()):T.normalizeTerm(B,b,!1,function(P){null!=P&&(B.oid=P),N()})},function(){A(!0)})},QueryEngine.prototype.normalizeQuad=function(a,b,A,T){var B=null,N=null,P=null,L=null,Q=this,j=!1;s.seq(function(V){if(null==a.graph||a.graph.value===Q.lexicon.defaultGraphUri)L=0,V();else{var W=F.lexicalFormBaseUri(a.graph,b);Q.normalizeTerm(a.graph,b,A,function(R){null!=R?(L=R,!0===A&&"var"!=a.graph.token?Q.lexicon.registerGraph(R,W,function(){V()}):V()):(j=!0,V())})}},function(V){!1===j?Q.normalizeTerm(a.subject,b,A,function(W){null!=W?(B=W,V()):(j=!0,V())}):V()},function(V){!1===j?Q.normalizeTerm(a.predicate,b,A,function(W){null!=W?(N=W,V()):(j=!0,V())}):V()},function(V){!1===j?Q.normalizeTerm(a.object,b,A,function(W){null!=W?(P=W,V()):(j=!0,V())}):V()})(function(){T(!0===j?null:{subject:B,predicate:N,object:P,graph:L})})},QueryEngine.prototype.denormalizeBindingsList=function(a,b,A){var T=this,B=[];s.eachSeries(a,function(N,P){T.denormalizeBindings(N,b,function(L){B.push(L),P()})},function(){A(B)})},QueryEngine.prototype.copyDenormalizedBindings=function(a,b,A){var T=this,B=[];s.eachSeries(a,function(N,P){var L={},Q=v.keys(N);s.eachSeries(Q,function(j,V){var W=N[j];if(null==W)L[j]=null,V();else if("object"==typeof W)L[j]=W,V();else{var R=b[W];null!=R?(L[j]=R,V()):T.lexicon.retrieve(W,function(Z){b[W]=Z,L[j]=Z,V()})}},function(){B.push(L),P()})},function(){A(B)})},QueryEngine.prototype.denormalizeBindings=function(a,b,A){var T=v.keys(a),B=b.outCache,N=this;s.eachSeries(T,function(P,L){var Q=a[P];null==Q?(a[P]=null,L()):"object"==typeof Q?L():null!=B[Q]?(a[P]=B[Q],L()):N.lexicon.retrieve(Q,function(j){a[P]=j,"blank"===j.token&&(b.blanks[j.value]=Q),L()})},function(){A(a)})},QueryEngine.prototype.execute=function(a,b,A,T){a=F.normalizeUnicodeLiterals(a);var B=this.abstractQueryTree.parseQueryString(a);if(null==B)b(!1,"Error parsing query string");else if("query"===B.token&&"update"==B.kind){this.callbacksBackend.startGraphModification();var N=this;this.executeUpdate(B,function(P,L){N.lexicon.updateAfterWrite&&N.lexicon.updateAfterWrite(),P?(N.callbacksBackend.cancelGraphModification(),b(P,L)):N.callbacksBackend.endGraphModification(function(){b(P,L)})})}else"query"===B.token&&"query"==B.kind&&this.executeQuery(B,b,A,T)},QueryEngine.prototype.executeQuery=function(a,b,A,T){var B=a.prologue,N=a.units,P=this,L={blanks:{},outCache:{}};this.registerNsInEnvironment(B,L);var Q=P.abstractQueryTree.parseExecutableUnit(N[0]);"select"===Q.kind?this.executeSelect(Q,L,A,T,function(j,V){null==j?"object"==typeof V&&!0===V.denorm?b(null,V.bindings):P.denormalizeBindingsList(V,L,function(W){b(null,W)}):b(j)}):"ask"===Q.kind?(Q.projection=[{token:"variable",kind:"*"}],this.executeSelect(Q,L,A,T,function(j,V){null==j?V.length>0?b(null,!0):b(null,!1):b(j)})):"construct"===Q.kind&&(Q.projection=[{token:"variable",kind:"*"}],P=this,this.executeSelect(Q,L,A,T,function(j,V){null==j?P.denormalizeBindingsList(V,L,function(W){if(null!=W){var R=new f.Graph;null==Q.template&&(Q.template={triplesContext:Q.pattern});for(var Z=1,ee=[],le=0;le<W.length;le++){for(var te=W[le],oe=0;oe<ee.length;oe++)delete ee[oe].valuetmp;for(oe=0;oe<Q.template.triplesContext.length;oe++){for(var ie=["subject","predicate","object"],pe=Q.template.triplesContext[oe],we=0;we<ie.length;we++){var Te=ie[we];if("blank"===pe[Te].token&&(!pe[Te].valuetmp||null==pe[Te].valuetmp)){var Fe="_:b"+Z;Z++,pe[Te].valuetmp=Fe,ee.push(pe[Te])}}var ke=f.buildRDFResource(pe.subject,te,P,L),de=(we=f.buildRDFResource(pe.predicate,te,P,L),f.buildRDFResource(pe.object,te,P,L));if(null!=ke&&null!=we&&null!=de){var Le=new f.Triple(ke,we,de);R.add(Le)}}}b(null,R)}else b(new Error("Error denormalizing bindings."))}):b(j)}))},QueryEngine.prototype.executeSelect=function(a,b,A,T,B){if("select"===a.kind||"ask"===a.kind||"construct"===a.kind||"modify"===a.kind){var N=a.projection,P=a.dataset,L=a.modifier,Q=a.limit,j=a.offset,V=a.order,W=this;null==A&&null==T||(P.implicit=A||[],P.named=T||[]),null!=P.implicit&&0===P.implicit.length&&null!=P.named&&0===P.named.length&&P.implicit.push(this.lexicon.defaultGraphUriTerm),W.normalizeDatasets(P.implicit.concat(P.named),b,function(){try{W.executeSelectUnit(N,P,a.pattern,b,function(R){if(null!=R){if(null!=a.group&&""===a.group){for(var Z=!1,ee=0;ee<a.projection.length;ee++)if(null!=a.projection[ee].expression&&"aggregate"===a.projection[ee].expression.expressionType){Z=!0;break}!0===Z&&(a.group="singleGroup")}a.group&&""!=a.group?W.checkGroupSemantics(a.group,N)?W.groupSolution(R,a.group,P,b,function(le){var te=[];s.eachSeries(le,function(oe,ie){W.aggregateBindings(N,oe,P,b,function(pe){te.push(pe),ie()})},function(){B(null,{bindings:te,denorm:!0})})}):B(new Error("Incompatible Group and Projection variables")):W.applyOrderBy(V,R,P,b,function(le){var te=W.projectBindings(N,le,P),oe=W.applyModifier(L,te),ie=W.applyLimitOffset(j,Q,oe),pe=W.removeDefaultGraphBindings(ie,P);B(null,pe)})}else B(new Error("Error executing SELECT query."))})}catch(R){B(R)}})}else B(new Error("Cannot execute "+a.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(a,b,A,T,B){var N=[],P=[],L=!1,Q=this;"singleGroup"===b?B([a]):s.eachSeries(a,function(j,V){var W=!0;s.eachSeries(b,function(R,Z){var ee=null;if("var"===R.token)ee=R.value,0==L&&N.push(ee),Z();else if("aliased_expression"===R.token){if(ee=R.alias.value,0==L&&N.push(ee),"var"===R.expression.primaryexpression)j[R.alias.value]=j[R.expression.value.value];else{var le=Q.copyDenormalizedBindings([j],T.outCache),te=o.runFilter(R.expression,le[0],Q,A,T);o.isEbvError(te)?W=!1:(null!=te.value&&(te.value=""+te.value),j[R.alias.value]=te)}Z()}else Q.copyDenormalizedBindings([j],T.outCache,function(oe){var ie=o.runFilter(R,oe[0],Q,T);o.isEbvError(ie)?W=!1:(j["groupCondition"+env._i]=ie,ee="groupCondition"+env._i,0==L&&N.push(ee)),Z()})},function(){0==L&&(L=!0),!0===W&&P.push(j),V()})},function(){for(var j={},V={},W=0;W<P.length;W++){for(var R=P[W],Z="",ee=0;ee<N.length;ee++){var le=R[N[ee]];Z+="object"==typeof le?le.value:le}null==j[Z]?(V[Z]=0,j[Z]=[R]):j[Z].push(R)}var te=[];for(var oe in j)te.push(j[oe]);B(te)})},QueryEngine.prototype.executeSelectUnit=function(a,b,A,T,B){if("BGP"===A.kind)this.executeAndBGP(a,b,A,T,B);else if("UNION"===A.kind)this.executeUNION(a,b,A.value,T,B);else if("JOIN"===A.kind)this.executeJOIN(a,b,A,T,B);else if("LEFT_JOIN"===A.kind)this.executeLEFT_JOIN(a,b,A,T,B);else if("FILTER"===A.kind){var N=this;this.executeSelectUnit(a,b,A.value,T,function(P){null!=P?o.checkFilters(A,P,!1,b,T,N,B):B([])})}else{if("EMPTY_PATTERN"!==A.kind)throw new h(A.kind);B([])}},QueryEngine.prototype.executeUNION=function(a,b,A,T,B){var N,P,L=A[0],Q=A[1],j=null;if(2!=A.length)throw"SPARQL algebra UNION with more than two components";var V=this;s.seq(function(W){try{V.executeSelectUnit(a,b,L,T,function(R){N=R,W()})}catch(R){j=R,W()}},function(W){if(null==j)try{V.executeSelectUnit(a,b,Q,T,function(R){P=R,W()})}catch(R){j=R,W()}else W()})(function(){if(null!=j)B(j);else{var W=e.unionBindings(N,P);V.runBinds(A.binds,W,b,T,function(R,Z){if(null!=R)throw new x("Error processing bind expressions",A.binds,R);o.checkFilters(A,Z,!1,b,T,V,B)})}})},QueryEngine.prototype.executeAndBGP=function(a,b,A,T,B){var N=this;e.executeAndBGPsDPSize(A.value,b,this,T,function(P){null!=P?N.runBinds(A.binds,P,b,T,function(L,Q){if(null!=L)throw new x("Error processing bind expressions",A.binds,L);o.checkFilters(A,Q,!1,b,T,N,B)}):B(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(a,b,A,T,B){var N=A.lvalue,P=A.rvalue;if("EMPTY_PATTERN"===N.kind)this.executeSelectUnit(a,b,P,T,B);else{var L,Q,j=null,V=null,W=null,R=this;s.seq(function(Z){try{R.executeSelectUnit(a,b,N,T,function(ee){j=ee,Z()})}catch(ee){W=ee,Z()}},function(Z){if(null!=W)Z();else try{R.executeSelectUnit(a,b,P,T,function(ee){V=ee,Z()})}catch(ee){W=ee,Z()}})(function(){if(null!=W)B(W);else{var Z=e.leftOuterJoinBindings(j,V);R.runBinds(A.binds,Z,b,T,function(ee,le){if(null!=ee)throw new x("Error processing bind expressions",A.binds,ee);o.checkFilters(A,Z,!0,b,T,R,function(te){if(j.length>1&&V.length>1){var oe=[],ie={};for(var pe in j[0])ie[pe]=!0;for(pe in V[0])1!=ie[pe]&&oe.push(pe);L=[],Q={};for(var we=0;we<te.length;we++)if(!0===te[we].__nullify__){for(var Te=0;Te<oe.length;Te++)te[we].bindings[oe[Te]]=null;var Fe=[],ke=[];for(var pe in te[we].bindings)null!=te[we].bindings[pe]&&(Fe.push(pe+te[we].bindings[pe]),Fe.sort(),ke.push(Fe.join("")));if(null==Q[Fe.join("")]){for(Te=0;Te<ke.length;Te++)Q[ke[Te]]=!0;L.push(te[we].bindings)}}else for(var pe in L.push(te[we]),Fe=[],ke=[],te[we])Fe.push(pe+te[we][pe]),Fe.sort(),Q[Fe.join("")]=!0;B(L)}else B(te)})})}})}},QueryEngine.prototype.executeJOIN=function(a,b,A,T,B){var N=A.lvalue,P=A.rvalue,L=null,Q=null,j=null,V=this;s.seq(function(W){try{V.executeSelectUnit(a,b,N,T,function(R){L=R,W()})}catch(R){j=R,W()}},function(W){if(null!=j)W();else try{V.executeSelectUnit(a,b,P,T,function(R){Q=R,W()})}catch(R){j=R,W()}})(function(){var W=null;if(null!=j)B(j);else if(0===L.length||0===Q.length)B([]);else{var R={},Z=[];for(var ee in L[0])R[ee]=!1;for(var ee in Q[0])!1===R[ee]&&Z.push(ee);W=0==Z.length||V.abstractQueryTree.treeWithUnion(N)||V.abstractQueryTree.treeWithUnion(P)?e.joinBindings(L,Q):e.joinBindings2(Z,L,Q),V.runBinds(A.binds,W,b,T,function(le,te){if(null!=le)throw new x("Error processing bind expressions",A.binds,le);o.checkFilters(A,te,!1,b,T,V,B)})}})},QueryEngine.prototype.rangeQuery=function(a,b,A){var T=this;T.normalizeQuad(a,b,!1,function(B){null!=B?T.backend.range(new m.Pattern(B),function(N){null==N||0==N.length?A([]):A(N)}):A(null)})},QueryEngine.prototype.executeUpdate=function(a,b){var A=a.prologue,T=a.units,B=this,N={blanks:{},outCache:{}};this.registerNsInEnvironment(A,N);for(var P=0;P<T.length;P++){var L=B.abstractQueryTree.parseExecutableUnit(T[P]);if("insertdata"===L.kind){var Q=null;s.eachSeries(L.quads,function(V,W){null===Q?B._executeQuadInsert(V,N,function(R){null!=R&&(Q=R),W()}):W()},function(){null===Q?b(null,!0):b(Q)})}else if("deletedata"===L.kind)Q=null,s.eachSeries(L.quads,function(V,W){null===Q?B._executeQuadDelete(V,N,function(R){null!=R&&(Q=R),W()}):W()},function(){null===Q?b(null,!0):b(Q)});else if("modify"===L.kind)this._executeModifyQuery(L,N,b);else if("create"===L.kind)b(!0);else if("load"===L.kind){var j={uri:F.lexicalFormBaseUri(L.sourceGraph,N)};null!=L.destinyGraph&&(j={uri:F.lexicalFormBaseUri(L.destinyGraph,N)}),B=this,this.rdfLoader.load(L.sourceGraph.value,j,function(V,W){V?b(new Error("error batch loading quads")):B.batchLoad(W,function(R){null!==R?b(null,R):b(new Error("Error batch loading quads"))})})}else if("drop"===L.kind)this._executeClearGraph(L.destinyGraph,N,b);else{if("clear"!==L.kind)throw new Error("not supported execution unit");this._executeClearGraph(L.destinyGraph,N,b)}}},QueryEngine.prototype.batchLoad=function(a,b){var A=0,T={},B=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification(),s.eachSeries(a,function(N,P){var L={};s.eachSeries(["subject","predicate","object","graph"],function(Q,j){!function(V,W,R,Z){var ee;if(V[W].uri||"uri"===V[W].token){var le=V[W].uri||V[W].value;B.lexicon.registerUri(le,function(te){var oe=function(){null!=V[W].uri&&(V[W]={token:"uri",value:V[W].uri},delete V[W].uri),R[W]=te,Z()};"graph"===W?B.lexicon.registerGraph(te,le,function(){oe()}):oe()})}else V[W].literal||"literal"===V[W].token?B.lexicon.registerLiteral(V[W].literal||V[W].value,function(te){null!=V[W].literal&&(V[W]=B.lexicon.parseLiteral(V[W].literal),delete V[W].literal),R[W]=te,Z()}):null==(ee=T[V[W].blank||V[W].value])?B.lexicon.registerBlank(function(te){T[V[W].blank||V[W].value]=te,null==V[W].token&&(V[W].token="blank",V[W].value=V[W].blank,delete V[W].blank),R[W]=te,Z()}):(null==V[W].token&&(V[W].token="blank",V[W].value=V[W].blank,delete V[W].blank),R[W]=ee,Z())}(N,Q,L,j)},function(){var Q=N;N=L;var j=new m.NodeKey(N);B.backend.search(j,function(V){V?P():B.backend.index(j,function(W){W&&(B.eventsOnBatchLoad&&B.callbacksBackend.nextGraphModification(y.added,[Q,N]),A+=1),P()})})})},function(){null!=B.lexicon.updateAfterWrite&&B.lexicon.updateAfterWrite();var N=function(){b(A)};B.eventsOnBatchLoad?B.callbacksBackend.endGraphModification(N()):N()})},QueryEngine.prototype._executeModifyQuery=function(a,b,A){var T=this,B=!0,N=new Error("Error executing modify query"),P=null,L=["subject","predicate","object","graph"];a.insert=null==a.insert?[]:a.insert,a.delete=null==a.delete?[]:a.delete,s.seq(function(Q){var j=[],V=[];if(null!=a.with&&j.push(a.with),null!=a.using){V=[];for(var W=0;W<a.using.length;W++){var R=a.using[W];"named"===R.kind?V.push(R.uri):j.push(R.uri)}}a.dataset={},a.projection=[{token:"variable",kind:"*"}],T.executeSelect(a,b,j,V,function(Z,ee){if(Z)return N=Z,B=!1,Q();T.denormalizeBindingsList(ee,b,function(le){null!=le?P=le:(N=new Error("Error denormalizing bindings list"),B=!1),Q()})})},function(Q){var j=a.with;if(B){for(var V=[],W=0;W<a.delete.length;W++)for(var R=a.delete[W],Z=0;Z<P.length;Z++){for(var ee={},le=P[Z],te=0;te<L.length;te++){var oe=L[te];"graph"==oe&&null==R[oe]?ee.graph=j:"var"===R[oe].token?ee[oe]=le[R[oe].value]:ee[oe]=R[oe]}V.push(ee)}s.eachSeries(V,function(ie,pe){T._executeQuadDelete(ie,b,function(){pe()})},function(){Q()})}else Q()},function(Q){var j=a.with;if(B){for(var V=[],W=0;W<a.insert.length;W++)for(var R=a.insert[W],Z=0;Z<P.length;Z++){for(var ee={},le=P[Z],te=0;te<L.length;te++){var oe=L[te];"graph"==oe&&null==R[oe]?ee.graph=j:"var"===R[oe].token?ee[oe]=le[R[oe].value]:ee[oe]=R[oe]}V.push(ee)}s.eachSeries(V,function(ie,pe){T._executeQuadInsert(ie,b,function(){pe()})},function(){Q()})}else Q()})(function(){A(B?null:N)})},QueryEngine.prototype._executeQuadInsert=function(a,b,A){var T,B=this,N=!1,P=null;s.seq(function(L){B.normalizeQuad(a,b,!0,function(Q){null!=Q?T=Q:(N=!0,P="Error normalizing quad."),L()})},function(L){if(!1===N){var Q=new m.NodeKey(T);B.backend.search(Q,function(j){!0===j?L():B.backend.index(Q,function(){B.callbacksBackend.nextGraphModification(y.added,[a,T]),L()})})}else L()})(function(){N?A(new Error(P)):A(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(a,b,A){var T,B,N,P=this,L=!1;s.seq(function(Q){P.normalizeQuad(a,b,!0,function(j){null!=j?T=j:(L=!0,B="Error normalizing quad."),Q()})},function(Q){!1===L?(N=new m.NodeKey(T),P.backend.delete(N,function(){Q()})):Q()},function(Q){!1===L?P.lexicon.unregister(a,N,function(){P.callbacksBackend.nextGraphModification(y.deleted,[a,T]),Q()}):Q()})(function(){L?A(new Error(B)):A(null,!0)})},QueryEngine.prototype._executeClearGraph=function(a,b,A){var T=this;if("default"===a)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",A);else if("named"===a)T.lexicon.registeredGraphs(!0,function(N){if(null!=N){var P=!1;s.eachSeries(N,function(L,Q){P?Q():T.execute("DELETE { GRAPH <"+L+"> { ?s ?p ?o } } WHERE { GRAPH <"+L+"> { ?s ?p ?o } }",function(j,V){j?(P=j,Q()):T.lexicon.resolveUri(L,function(W){-1!=W?T.lexicon.knownGraphs.delete(W,function(){Q()}):(P="Cannot find graph "+L+" to clear it",Q())})})},function(){A(!P)})}else A(!1,"Error deleting named graphs")});else if("all"===a)T=this,this.execute("CLEAR DEFAULT",function(N,P){N?A(!1,P):T.execute("CLEAR NAMED",A)});else if("uri"==a.token){var B=F.lexicalFormBaseUri(a,b);null!=B?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+B+"> { ?s ?p ?o } } WHERE { GRAPH <"+B+"> { ?s ?p ?o } }",function(N){T.callbacksBackend.ongoingModification=!1,A(N)})):A(!1,"wrong graph URI")}else A(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(a,b){if("singleGroup"===a)return!0;for(var A={},T=0;T<a.length;T++){var B=a[T];"var"===B.token?A[B.value]=!0:"aliased_expression"===B.token&&(A[B.alias.value]=!0)}for(T=0;T<b.length;T++){var N=b[T];if("var"===N.kind){if(null==A[N.value.value])return!1}else if("aliased"===N.kind&&N.expression&&"var"===N.expression.primaryexpression&&null==A[N.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(a,b,A,T,B){var N=this,P=b;null!=a&&a.length>0?N.copyDenormalizedBindings(b,T.outCache,function(L){for(var Q=0;Q<b.length;Q++)for(var j=0;j<a.length;j++){var V=a[j],W=L[Q],R=o.runFilter(V.expression,W,N,A,T);o.isEbvError(R)?B(R):P[Q][V.as.value]=R}B(null,b)}):B(null,b)},QueryEngine.prototype.computeCosts=function(a,b,A){for(var T=0;T<a.length;T++)a[T]._cost=this.quadCost(a[T],b);A(a)},QueryEngine.prototype.quadCost=function(a,b){return 1},QueryEngine.prototype.registerDefaultNamespace=function(a,b){this.defaultPrefixes[a]=b},ae.exports={QueryEngine}},{"./abstract_query_tree":129,"./graph_callbacks":131,"./quad_index":139,"./query_filters":141,"./query_plan":142,"./rdf_loader":143,"./rdf_model":144,"./utils":147}],141:[function(J,ae,ce){var q=J("./utils"),h=q,F=J("./utils");QueryFilters={};var m="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(e,o,f,l,y,s,v){var x=[];e.filter&&"function"!=typeof e.filter&&(x=e.filter);var a=[];if(null==x||0===x.length||null!=e.length)return v(o);QueryFilters.preprocessExistentialFilters(x,o,s,l,y,function(b){F.eachSeries(b,function(A,T){QueryFilters.run(A.value,o,f,l,y,s,function(B){for(var N=[],P=0;P<B.length;P++){var L=B[P];null!=L.__nullify__?a.push(L):N.push(L)}o=N,T()})},function(){v(o.concat(a))})})},QueryFilters.preprocessExistentialFilters=function(e,o,f,l,y,s){var v=[];F.eachSeries(e,function(x,a){if("builtincall"!==x.value.expressionType||"exists"!==x.value.builtincall&&"notexists"!==x.value.builtincall)if("conditionalor"===x.value.expressionType||"conditionaland"===x.value.expressionType){var b=h.map(x.value.operands,function(N){return{value:N}});QueryFilters.preprocessExistentialFilters(b,o,f,l,y,function(N){x.value.operands=N.map(function(P){return P.value}),v.push(x),a()})}else"multiplicativeexpression"===x.value.expressionType?(b=h.map(x.value.factors,function(N){return{value:N}}),QueryFilters.preprocessExistentialFilters(b,o,f,l,y,function(N){x.value.factors=N.map(function(P){return P.value}),v.push(x),a()})):"additiveexpression"===x.value.expressionType?(b=h.map(x.value.summands,function(N){return{value:N}}),QueryFilters.preprocessExistentialFilters(b,o,f,l,y,function(N){x.value.summands=N.map(function(P){return P.value}),v.push(x),a()})):"relationalexpression"===x.value.expressionType?(b=[{value:x.value.op1},{value:x.value.op2}],QueryFilters.preprocessExistentialFilters(b,o,f,l,y,function(N){x.value.op1=N[0].value,x.value.op2=N[1].value,v.push(x),a()})):"irireforfunction"!==x.value.expressionType&&"custom"!==x.value.expressionType||null==x.value.args?(v.push(x),a()):(b=h.map(x.value.args,function(N){return{value:N}}),QueryFilters.preprocessExistentialFilters(b,o,f,l,y,function(N){x.value.args=N.map(function(P){return P.value}),v.push(x),a()}));else{var A=x.value.builtincall,T=x.value.args,B={};f.copyDenormalizedBindings(o,y.outCache,function(N){F.eachSeries(N,function(P,L){var Q=h.clone(T[0],!0),j=f.abstractQueryTree.parseSelect({pattern:Q},P);j=f.abstractQueryTree.bind(j.pattern,P),f.executeSelectUnit([{kind:"*"}],l,j,y,function(V){var W;W="exists"===A?QueryFilters.ebvBoolean(0!==V.length):QueryFilters.ebvBoolean(0===V.length);var R=[];for(var Z in P)R.push(JSON.stringify(P[Z]));R=R.sort().join(""),B[R]=W,L()})},function(){x.value.origArgs=x.value.args,x.value.args=B,v.push(x),a()})})}},function(){s(v)})},QueryFilters.boundVars=function(e){if(null==e.expressionType)throw"Cannot find bound expressions in a no expression token";var o=e.expressionType;if("relationalexpression"==o){var f=e.op1,l=e.op2;return QueryFilters.boundVars(f)+QueryFilters.boundVars(l)}if("conditionalor"==o||"conditionaland"==o){for(var y=[],s=0;s<e.operands;s++)y=y.concat(QueryFilters.boundVars(e.operands[s]));return y}if("builtincall"==o){if(null==e.args)return[];var v=[];for(s=0;s<e.args.length;s++)v=v.concat(QueryFilters.boundVars(e.args[s]));return v}if("multiplicativeexpression"==o){v=QueryFilters.boundVars(e.factor);for(s=0;s<e.factors.length;s++)v=v.concat(QueryFilters.boundVars(e.factors[s].expression));return v}if("additiveexpression"==o){for(v=QueryFilters.boundVars(e.summand),s=0;s<e.summands.length;s++)v=v.concat(QueryFilters.boundVars(e.summands[s].expression));return v}return"regex"==o?(v=QueryFilters.boundVars(e.expression1)).concat(QueryFilters.boundVars(e.expression2)):"unaryexpression"==o?QueryFilters.boundVars(e.expression):"atomic"==o?"var"==e.primaryexpression?[e.value]:[]:void 0},QueryFilters.run=function(e,o,f,l,y,s,v){s.copyDenormalizedBindings(o,y.outCache,function(x){for(var a=[],b=0;b<o.length;b++){var A=x[b],T=QueryFilters.runFilter(e,A,s,l,y);if(T=QueryFilters.ebv(T),QueryFilters.isEbvError(T)){if(f){var B={__nullify__:!0,bindings:o[b]};a.push(B)}}else!0===T?a.push(o[b]):f&&(B={__nullify__:!0,bindings:o[b]},a.push(B))}v(a)})},QueryFilters.collect=function(e,o,f,l,y,s){y.copyDenormalizedBindings(o,l.outCache,function(v){for(var x=[],a=0;a<v.length;a++){var b=v[a],A=QueryFilters.runFilter(e,b,y,f,l);x.push({binding:o[a],value:A})}return s(x)})},QueryFilters.runDistinct=function(e,o){},QueryFilters.runAggregator=function(e,o,f,l,y){if(null==o||0===o.length)return QueryFilters.ebvError();if("variable"===e.token&&"var"==e.kind)return o[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return o[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var s=null,v=0;v<o.length;v++){var x=o[v],a=QueryFilters.runFilter(e.expression.expression,x,f,l,y);QueryFilters.isEbvError(a)||(null===s||!0===QueryFilters.runLtFunction(s,a).value)&&(s=a)}return null===s?QueryFilters.ebvError():s}if("min"===e.expression.aggregateType){var b=null;for(v=0;v<o.length;v++)x=o[v],a=QueryFilters.runFilter(e.expression.expression,x,f,l,y),QueryFilters.isEbvError(a)||(null===b||!0===QueryFilters.runGtFunction(b,a).value)&&(b=a);return null===b?QueryFilters.ebvError():b}if("count"===e.expression.aggregateType){var A={},T=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(v=0;v<o.length;v++)x=o[v],null==A[P=q.hashTerm(x)]&&(A[P]=!0,T++);else T=o.length;else for(v=0;v<o.length;v++)x=o[v],a=QueryFilters.runFilter(e.expression.expression,x,f,l,y),QueryFilters.isEbvError(a)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==A[P=q.hashTerm(a)]&&(A[P]=!0,T++):T++);return{token:"literal",type:m+"integer",value:""+T}}if("avg"===e.expression.aggregateType){A={};var B={token:"literal",type:m+"integer",value:"0"};for(T=0,v=0;v<o.length;v++)x=o[v],a=QueryFilters.runFilter(e.expression.expression,x,f,l,y),QueryFilters.isEbvError(a)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==A[P=q.hashTerm(a)]&&(A[P]=!0,QueryFilters.isNumeric(a)&&(B=QueryFilters.runSumFunction(B,a),T++)):QueryFilters.isNumeric(a)&&(B=QueryFilters.runSumFunction(B,a),T++));var N=QueryFilters.runDivFunction(B,{token:"literal",type:m+"integer",value:""+T});return N.value=""+N.value,N}if("sum"===e.expression.aggregateType){for(A={},B={token:"literal",type:m+"integer",value:"0"},v=0;v<o.length;v++){var P;x=o[v],a=QueryFilters.runFilter(e.expression.expression,x,f,l,y),QueryFilters.isEbvError(a)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==A[P=q.hashTerm(a)]&&(A[P]=!0,QueryFilters.isNumeric(a)&&(B=QueryFilters.runSumFunction(B,a))):QueryFilters.isNumeric(a)&&(B=QueryFilters.runSumFunction(B,a)))}return B.value=""+B.value,B}return QueryFilters.runFilter(aggregate.expression,o[0],l,{blanks:{},outCache:{}})}}},QueryFilters.runFilter=function(e,o,f,l,y){if(null!=e.expressionType){var s=e.expressionType;if("relationalexpression"==s){var v=QueryFilters.runFilter(e.op1,o,f,l,y),x=QueryFilters.runFilter(e.op2,o,f,l,y);return QueryFilters.runRelationalFilter(e,v,x,o,f,l,y)}if("conditionalor"==s)return QueryFilters.runOrFunction(e,o,f,l,y);if("conditionaland"==s)return QueryFilters.runAndFunction(e,o,f,l,y);if("additiveexpression"==s)return QueryFilters.runAddition(e.summand,e.summands,o,f,l,y);if("builtincall"==s)return QueryFilters.runBuiltInCall(e.builtincall,e.args,o,f,l,y);if("multiplicativeexpression"==s)return QueryFilters.runMultiplication(e.factor,e.factors,o,f,l,y);if("unaryexpression"==s)return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,o,f,l,y);if("irireforfunction"==s)return QueryFilters.runIriRefOrFunction(e.iriref,e.args,o,f,l,y);if("regex"==s)return QueryFilters.runRegex(e.text,e.pattern,e.flags,o,f,l,y);if("custom"==s)return QueryFilters.runBuiltInCall(e.name,e.args,o,f,l,y);if("atomic"==s)return"var"==e.primaryexpression?o[e.value.value]:("object"!=typeof e.value||null==e.value.type||"object"!=typeof e.value.type||(e.value.type=q.lexicalFormBaseUri(e.value.type,y)),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return null!=e&&!!(e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token)},QueryFilters.RDFTermEquality=function(e,o,f,l){return"literal"===e.token&&"literal"===o.token?e.lang==o.lang&&e.type==o.type&&e.value==o.value||(null!=e.type&&null!=o.type||QueryFilters.isSimpleLiteral(e)&&null!=o.type||!(!QueryFilters.isSimpleLiteral(o)||null==e.type))&&QueryFilters.ebvError():"uri"===e.token&&"uri"===o.token?q.lexicalFormBaseUri(e,l)==q.lexicalFormBaseUri(o,l):"blank"===e.token&&"blank"===o.token&&e.value==o.value},QueryFilters.isInteger=function(e){return null!=e&&"literal"===e.token&&(e.type==m+"integer"||e.type==m+"decimal"||e.type==m+"double"||e.type==m+"nonPositiveInteger"||e.type==m+"negativeInteger"||e.type==m+"long"||e.type==m+"int"||e.type==m+"short"||e.type==m+"byte"||e.type==m+"nonNegativeInteger"||e.type==m+"unsignedLong"||e.type==m+"unsignedInt"||e.type==m+"unsignedShort"||e.type==m+"unsignedByte"||e.type==m+"positiveInteger")},QueryFilters.isFloat=function(e){return null!=e&&"literal"===e.token&&e.type==m+"float"},QueryFilters.isDecimal=function(e){return null!=e&&"literal"===e.token&&e.type==m+"decimal"},QueryFilters.isDouble=function(e){return null!=e&&"literal"===e.token&&e.type==m+"double"},QueryFilters.isNumeric=function(e){return null!=e&&"literal"===e.token&&(e.type==m+"integer"||e.type==m+"decimal"||e.type==m+"float"||e.type==m+"double"||e.type==m+"nonPositiveInteger"||e.type==m+"negativeInteger"||e.type==m+"long"||e.type==m+"int"||e.type==m+"short"||e.type==m+"byte"||e.type==m+"nonNegativeInteger"||e.type==m+"unsignedLong"||e.type==m+"unsignedInt"||e.type==m+"unsignedShort"||e.type==m+"unsignedByte"||e.type==m+"positiveInteger")},QueryFilters.isSimpleLiteral=function(e){return!(!e||"literal"!=e.token)&&null==e.type&&null==e.lang},QueryFilters.isXsdType=function(e,o){return!(!o||"literal"!=o.token)&&o.type==m+""+e},QueryFilters.ebv=function(e){if(null==e||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&"literal"===e.token){if(e.type==m+"integer"||e.type==m+"decimal"||e.type==m+"double"||e.type==m+"nonPositiveInteger"||e.type==m+"negativeInteger"||e.type==m+"long"||e.type==m+"int"||e.type==m+"short"||e.type==m+"byte"||e.type==m+"nonNegativeInteger"||e.type==m+"unsignedLong"||e.type==m+"unsignedInt"||e.type==m+"unsignedShort"||e.type==m+"unsignedByte"||e.type==m+"positiveInteger"){var o=parseFloat(e.value);return!isNaN(o)&&0!=parseFloat(e.value)}return e.type===m+"boolean"?"true"===e.value||!0===e.value||"True"===e.value:e.type===m+"string"?""!=e.value:e.type===m+"dateTime"?null!=new Date(e.value):QueryFilters.isEbvError(e)?e:null==e.type?""!=e.value:QueryFilters.ebvError()}return!0===e.value},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:m+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:m+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(e){return"object"==typeof e&&null!=e&&"https://github.com/antoniogarrote/js-tools/types#error"===e.type},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:!0===e?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,o,f,l,y,s,v){var x=e.operator;if("="===x)return QueryFilters.runEqualityFunction(o,f,l,y,s,v);if("!="===x){var a=QueryFilters.runEqualityFunction(o,f,l,y,s,v);return QueryFilters.isEbvError(a)||(a.value=!a.value),a}if("<"===x)return QueryFilters.runLtFunction(o,f,l);if(">"===x)return QueryFilters.runGtFunction(o,f,l);if("<="===x)return QueryFilters.runLtEqFunction(o,f,l);if(">="===x)return QueryFilters.runGtEqFunction(o,f,l);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==m+"integer")return parseInt(e.value);if(e.type==m+"decimal"||e.type==m+"float"||e.type==m+"double"||e.type==m+"nonPositiveInteger")return parseFloat(e.value);if(e.type==m+"negativeInteger"||e.type==m+"long"||e.type==m+"int"||e.type==m+"short"||e.type==m+"byte"||e.type==m+"nonNegativeInteger"||e.type==m+"unsignedLong"||e.type==m+"unsignedInt"||e.type==m+"unsignedShort"||e.type==m+"unsignedByte"||e.type==m+"positiveInteger")return parseInt(e.value);if(e.type!=m+"date"&&e.type!=m+"dateTime")return e.type==m+"boolean"?!0===e.value||"true"===e.value||"1"===e.value||1===e.value||!0===e.value||!1!==e.value&&"false"!==e.value&&"0"!==e.value&&0!==e.value&&!1!==e.value&&void 0:e.type==m+"string"?null===e.value||void 0===e.value?void 0:""+e.value:(e.type,e.value);try{return q.parseISO8601(e.value)}catch(o){return null}},QueryFilters.runOrFunction=function(e,o,f,l,y){for(var s=null,v=0;v<e.operands.length;v++){var x=QueryFilters.runFilter(e.operands[v],o,f,l,y);0==QueryFilters.isEbvError(x)&&(x=QueryFilters.ebv(x)),null==s?s=x:QueryFilters.isEbvError(x)?s=QueryFilters.isEbvError(s)?QueryFilters.ebvError():!0===s||QueryFilters.ebvError():!0===x?s=!0:QueryFilters.isEbvError(s)&&(s=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(s)},QueryFilters.runAndFunction=function(e,o,f,l,y){for(var s=null,v=0;v<e.operands.length;v++){var x=QueryFilters.runFilter(e.operands[v],o,f,l,y);0==QueryFilters.isEbvError(x)&&(x=QueryFilters.ebv(x)),null==s?s=x:QueryFilters.isEbvError(x)?s=(QueryFilters.isEbvError(s)||!0===s)&&QueryFilters.ebvError():!0===x?QueryFilters.isEbvError(s)&&(s=QueryFilters.ebvError()):s=!1}return QueryFilters.ebvBoolean(s)},QueryFilters.runEqualityFunction=function(e,o,f,l,y,s){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)){var v=QueryFilters.effectiveTypeValue(e),x=QueryFilters.effectiveTypeValue(o);return isNaN(v)||isNaN(x)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,o,l,s)):QueryFilters.ebvBoolean(v==x)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",o))||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var a=q.compareDateComponents(e.value,o.value);return null!=a?0==a?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(o)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,o,l,s)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,o,f){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var l=q.compareDateComponents(e.value,o.value);return null!=l?1==l?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,o){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",o)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",o)?QueryFilters.runGtFunction(e,o,[]):e.token&&"uri"===e.token&&o.token&&"uri"===o.token?QueryFilters.ebvBoolean(e.value>o.value):e.token&&"literal"===e.token&&o.token&&"literal"===o.token?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+o.value+o.type+o.lang):e.token&&"blank"===e.token&&o.token&&"blank"===o.token||e.value&&o.value?QueryFilters.ebvBoolean(e.value>o.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,o,f){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var l=q.compareDateComponents(e.value,o.value);return null!=l?-1==l?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,o,f){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var l=q.compareDateComponents(e.value,o.value);return null!=l?-1!=l?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,o,f){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var l=q.compareDateComponents(e.value,o.value);return null!=l?1!=l?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,o,f,l,y,s){var v=QueryFilters.runFilter(e,f,l,y,s);if(QueryFilters.isEbvError(v))return QueryFilters.ebvError();var x=v;if(QueryFilters.isNumeric(v)){for(var a=0;a<o.length;a++){var b=QueryFilters.runFilter(o[a].expression,f,l,y,s);if(!QueryFilters.isNumeric(b))return QueryFilters.ebvFalse();"+"===o[a].operator?x=QueryFilters.runSumFunction(x,b):"-"===o[a].operator&&(x=QueryFilters.runSubFunction(x,b))}return x}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var f=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:m+"double",value:f}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:m+"float",value:f}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:m+"decimal",value:f}:{token:"literal",type:m+"integer",value:f}},QueryFilters.runSubFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var f=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:m+"double",value:f}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:m+"float",value:f}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:m+"decimal",value:f}:{token:"literal",type:m+"integer",value:f}},QueryFilters.runMultiplication=function(e,o,f,l,y,s){var v=QueryFilters.runFilter(e,f,l,y,s);if(QueryFilters.isEbvError(v))return v;var x=v;if(QueryFilters.isNumeric(v)){for(var a=0;a<o.length;a++){var b=QueryFilters.runFilter(o[a].expression,f,l,y,s);if(QueryFilters.isEbvError(b))return v;if(!QueryFilters.isNumeric(b))return QueryFilters.ebvFalse();"*"===o[a].operator?x=QueryFilters.runMulFunction(x,b):"/"===o[a].operator&&(x=QueryFilters.runDivFunction(x,b))}return x}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var f=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:m+"double",value:f}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:m+"float",value:f}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:m+"decimal",value:f}:{token:"literal",type:m+"integer",value:f}},QueryFilters.runDivFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var f=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:m+"double",value:f}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:m+"float",value:f}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:m+"decimal",value:f}:{token:"literal",type:m+"integer",value:f}},QueryFilters.runBuiltInCall=function(e,o,f,l,y,s){if("notexists"===e||"exists"===e){var v=[];for(var x in f)v.push(JSON.stringify(f[x]));return o[v=v.sort().join("")]}for(var a=[],b=0;b<o.length;b++)if("var"===o[b].token)a.push(o[b]);else{var A=QueryFilters.runFilter(o[b],f,l,y,s);if(QueryFilters.isEbvError(A))return A;a.push(A)}if("str"===e)return"literal"===a[0].token?{token:"literal",type:null,value:""+a[0].value}:"uri"===a[0].token?{token:"literal",type:null,value:a[0].value}:QueryFilters.ebvFalse();if("lang"===e)return"literal"===a[0].token?null!=a[0].lang?{token:"literal",value:""+a[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===e){if("literal"===a[0].token){var T=a[0];return null!=T.type?"string"==typeof T.type?{token:"uri",value:T.type,prefix:null,suffix:null}:T.type:null==T.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===e)return"literal"===a[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===e)return"blank"===a[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===a[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===e){var B=a[0],N=a[1],P=QueryFilters.RDFTermEquality(B,N,l,s);return QueryFilters.isEbvError(P)&&(P=!1),QueryFilters.ebvBoolean(P)}if("langmatches"===e){var L=a[0],Q=a[1];return"literal"===L.token&&"literal"===Q.token?"*"===Q.value&&""!=L.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===L.value.toLowerCase().indexOf(Q.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===e){var j=a[0].value;return null==j?QueryFilters.ebvError():null!=f[j]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=l.customFns[e])return l.customFns[e](QueryFilters,a);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,o,f,l,y,s){var v=QueryFilters.runFilter(o,f,l,y,s);if(QueryFilters.isEbvError(v))return v;if("!"===e){var x=QueryFilters.ebv(v);return QueryFilters.isEbvError(x)?QueryFilters.ebvFalse():(x=!x,QueryFilters.ebvBoolean(x))}if("+"===e)return QueryFilters.isNumeric(v)?v:QueryFilters.ebvError();if("-"===e){if(QueryFilters.isNumeric(v)){var a={};for(var b in v)a[b]=v[b];return a.value=-a.value,a}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,o,f,l,y,s,v){if(null==e||(e=QueryFilters.runFilter(e,l,y,s,v),null==o)||(o=QueryFilters.runFilter(o,l,y,s,v),null!=f&&(f=QueryFilters.runFilter(f,l,y,s,v)),null==o||"literal"!==o.token||null!=f&&"literal"!==f.token))return QueryFilters.ebvError();if(o=o.value,f=null==f?null:f.value,null!=e&&"var"==e.token){if(null==l[e.value])return QueryFilters.ebvError();e=l[e.value]}else{if(null==e||"literal"!==e.token||null!=e.type&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}return(null==f?new RegExp(o):new RegExp(o,f.toLowerCase())).exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,o,f){return null==e.value.type||"object"!=typeof e.value.type||(e.value.type=q.lexicalFormBaseUri(e.value.type,f)),e},QueryFilters.runIriRefOrFunction=function(e,o,f,l,y,s){if(null==o)return e;for(var v=[],x=0;x<o.length;x++)v.push(QueryFilters.runFilter(o[x],f,l,y,s));var a=q.lexicalFormBaseUri(e,s);if(a==m+"integer"||a==m+"decimal"||a==m+"double"||a==m+"nonPositiveInteger"||a==m+"negativeInteger"||a==m+"long"||a==m+"int"||a==m+"short"||a==m+"byte"||a==m+"nonNegativeInteger"||a==m+"unsignedLong"||a==m+"unsignedInt"||a==m+"unsignedShort"||a==m+"unsignedByte"||a==m+"positiveInteger"){if("literal"!==(b=v[0]).token)return QueryFilters.ebvError();if((b=QueryFilters.normalizeLiteralDatatype(b,l,s)).type==m+"integer"||b.type==m+"decimal"||b.type==m+"double"||b.type==m+"nonPositiveInteger"||b.type==m+"negativeInteger"||b.type==m+"long"||b.type==m+"int"||b.type==m+"short"||b.type==m+"byte"||b.type==m+"nonNegativeInteger"||b.type==m+"unsignedLong"||b.type==m+"unsignedInt"||b.type==m+"unsignedShort"||b.type==m+"unsignedByte"||b.type==m+"positiveInteger")return b.type=a,b;if("http://www.w3.org/2001/XMLSchema#boolean"==b.type)return 1==QueryFilters.ebv(b)?(b.type=a,b.value=1):(b.type=a,b.value=0),b;if("http://www.w3.org/2001/XMLSchema#float"==b.type||"http://www.w3.org/2001/XMLSchema#double"==b.type)return b.type=a,b.value=parseInt(b.value),b;if("http://www.w3.org/2001/XMLSchema#string"!=b.type&&null!=b.type||b.value.split(".").length>2||b.value.split("-").length>2||b.value.split("/").length>2||b.value.split("+").length>2||a==m+"decimal"&&(-1!=b.value.indexOf("e")||-1!=b.value.indexOf("E"))||!(a!=m+"int"&&a!=m+"integer"||-1==b.value.indexOf("e")&&-1==b.value.indexOf("E")&&-1==b.value.indexOf(".")))return QueryFilters.ebvError();try{return b.value=parseInt(parseFloat(b.value)),isNaN(b.value)?QueryFilters.ebvError():(b.type=a,b)}catch(A){return QueryFilters.ebvError()}}else{if(a==m+"boolean")return"literal"===(b=v[0]).token&&null==b.type?"true"===b.value||"1"===b.value?QueryFilters.ebvTrue():"false"===b.value||"0"===b.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===b.token?QueryFilters.isEbvError(b)?b:QueryFilters.ebvBoolean(b):QueryFilters.ebvError();if(a==m+"string")return"literal"===(b=v[0]).token?(b=QueryFilters.normalizeLiteralDatatype(b,l,s)).type==m+"integer"||b.type==m+"decimal"||b.type==m+"double"||b.type==m+"nonPositiveInteger"||b.type==m+"negativeInteger"||b.type==m+"long"||b.type==m+"int"||b.type==m+"short"||b.type==m+"byte"||b.type==m+"nonNegativeInteger"||b.type==m+"unsignedLong"||b.type==m+"unsignedInt"||b.type==m+"unsignedShort"||b.type==m+"unsignedByte"||b.type==m+"positiveInteger"||b.type==m+"float"?(b.type=a,b.value=""+b.value,b):b.type==m+"string"?b:b.type==m+"boolean"?(QueryFilters.ebv(b)?(b.type=a,b.value="true"):(b.type=a,b.value="false"),b):b.type==m+"dateTime"||b.type==m+"date"?(b.type=a,"string"!=typeof b.value&&(b.value=q.iso8601(b.value)),b):null==b.type?(b.value=""+b.value,b.type=a,b):QueryFilters.ebvError():"uri"===b.token?{token:"literal",value:q.lexicalFormBaseUri(b,s),type:a,lang:null}:QueryFilters.ebvError();if(a==m+"dateTime"||a==m+"date"){if((b=v[0]).type==m+"dateTime"||b.type==m+"date")return b;if(b.type!=m+"string"&&null!=b.type)return QueryFilters.ebvError();try{return b.value=q.iso8601(q.parseISO8601(b.value)),b.type=a,b}catch(A){return QueryFilters.ebvError()}}else{if(a!=m+"float")return null!=l.customFns[a]?l.customFns[a](QueryFilters,v):QueryFilters.ebvError();var b;if("literal"!==(b=v[0]).token)return QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#decimal"==(b=QueryFilters.normalizeLiteralDatatype(b,l,s)).type||"http://www.w3.org/2001/XMLSchema#int"==b.type)return b.type=a,b.value=parseFloat(b.value),b;if("http://www.w3.org/2001/XMLSchema#boolean"==b.type)return 1==QueryFilters.ebv(b)?(b.type=a,b.value=1):(b.type=a,b.value=0),b;if("http://www.w3.org/2001/XMLSchema#float"==b.type||"http://www.w3.org/2001/XMLSchema#double"==b.type)return b.type=a,b.value=parseFloat(b.value),b;if("http://www.w3.org/2001/XMLSchema#string"==b.type)try{return b.value=parseFloat(b.value),isNaN(b.value)?QueryFilters.ebvError():(b.type=a,b)}catch(A){return QueryFilters.ebvError()}else{if(null!=b.type||b.value.split(".").length>2||b.value.split("-").length>2||b.value.split("/").length>2||b.value.split("+").length>2)return QueryFilters.ebvError();try{return b.value=parseFloat(b.value),isNaN(b.value)?QueryFilters.ebvError():(b.type=a,b)}catch(A){return QueryFilters.ebvError()}}}}},ae.exports={QueryFilters}},{"./utils":147}],142:[function(J,ae,ce){var q=J("./utils"),h=J("./utils"),F={variablesInBGP:function(m){var e=m.variables;if(e)return e;var o=m.value||m;for(var f in e=[],o)o[f]&&"var"===o[f].token?e.push(o[f].value):o[f]&&"blank"===o[f].token&&e.push("blank:"+o[f].value);return m.variables=e,e},connected:function(m,e){for(var o="/"+m.vars.join("/")+"/",f=0;f<e.vars.length;f++)if(-1!=o.indexOf("/"+e.vars[f]+"/"))return!0;return!1},variablesIntersectionBGP:function(m,e){return function(o,f){for(var l={},y=0;y<o.lenght;y++)l[o[y]]=1;for(y=0;y<f.length;y++){var s=l[f[y]]||0;s++,l[f[y]]=s}var v=[];for(var x in l)2==l[x]&&v.push(l[x]);return v}(F.variablesInBGP(m),F.variablesInBGP(e))},executeAndBGPsGroups:function(m){for(var e={},o={},f=0,l=function(B,N){for(var P=0;P<B.length;P++){var L="/"+B[P]+"/";if(-1!=N.indexOf(L))return!0}return!1},y=function(B,N,P,L){var Q=[],j="",V="";for(var W in N)j+=W,Q=Q.concat(e[W]),V+=o[W];V=V+b.join("/")+"/",Q.push(B),P[j]=Q,L[j]=V},s=0;s<m.length;s++){var v=m[s],x={},a={},b=F.variablesInBGP(v),A={};for(var T in o)l(b,o[T])?A[T]=!0:(x[T]=e[T],a[T]=o[T]);0===q.size(A)?(x["g"+f]=[v],a["g"+f]="/"+b.join("/")+"/",f++):y(v,A,x,a),e=x,o=a}return q.values(e)},intersectionSize:function(m,e){for(var o=e.i.split("_"),f=0;f<o.length;f++)if(""!=o[f]&&-1!=m.i.indexOf("_"+o[f]+"_"))return 1;return 0},createJoinTree:function(m,e){for(var o="/"+m.vars.join("/")+"/",f=m.vars.concat([]),l=[],y=0;y<e.vars.length;y++)-1!=o.indexOf("/"+e.vars[y]+"/")?0==e.vars[y].indexOf("_:")?l.push("blank:"+e.vars[y]):l.push(e.vars[y]):f.push(e.vars[y]);var s=e.i.split("_"),v=m.i.split("_"),x={};for(y=0;y<s.length;y++)""!=s[y]&&(x[s[y]]=!0);for(y=0;y<v.length;y++)""!=v[y]&&(x[v[y]]=!0);var a=q.keys(x);return{left:m,right:e,cost:m.cost+e.cost,i:"_"+a.sort().join("_")+"_",vars:f,join:l}},executeBushyTree:function(m,e,o,f,l){null==m.left?F.executeEmptyJoinBGP(m.right,e,o,f,l):null==m.right?F.executeEmptyJoinBGP(m.left,e,o,f,l):F.executeBushyTree(m.left,e,o,f,function(y){null!=y?F.executeBushyTree(m.right,e,o,f,function(s){l(null!=s?F.joinBindings2(m.join,y,s):null)}):l(null)})},executeAndBGPsDPSize:function(m,e,o,f,l){var y=F.executeAndBGPsGroups(m),s=[];h.eachSeries(y,function(v,x){o.computeCosts(v,f,function(a){var b={},A={},T={},B=1,N=null,P={};T[1]=[];for(var L=0;L<a.length;L++){var Q=[];for(var j in delete a[L].variables,a[L])"_cost"!=j&&("var"===a[L][j].token||"blank"===a[L][j].token)&&Q.push(a[L][j].value);A["_"+L+"_"]={left:a[L],right:null,cost:a[L]._cost,i:"_"+L+"_",vars:Q};var V={left:a[L],right:null,cost:a[L]._cost,i:"_"+L+"_",vars:Q};b["_"+L+"_"]=V,delete a[L]._cost,P["_"+L+"_"]=!0,T[1].push("_"+L+"_"),(null==N||N.cost>V.cost)&&(N=V)}for(var W=2;W<=a.length;W++)for(var R=1;R<W;R++){var Z=W-R,ee=T[""+R]||[],le=T[""+Z]||[];for(L=0;L<ee.length;L++)for(var te=0;te<le.length;te++)if(ee[L]!==le[te]){var oe=A[ee[L]],ie=A[le[te]];if(0==F.intersectionSize(oe,ie)&&F.connected(oe,ie)){B=W;var pe=b[oe.i],we=b[ie.i],Te=F.createJoinTree(pe,we);if(!P[Te.i]){P[Te.i]=!0;var Fe=Te.cost+1;null!=b[Te.i]&&(Fe=b[Te.i].cost);var ke=T[W]||[];ke.push(Te.i),A[Te.i]=Te,T[W]=ke,Fe>Te.cost&&(B===W&&(N=Te),b[Te.i]=Te)}}}}s.push(N),x()})},function(){var v=null;h.eachSeries(s,function(x,a){F.executeBushyTree(x,e,o,f,function(b){b?null==v?(v=b,a()):(v=F.crossProductBindings(v,b),a()):a("Error executing bushy tree")})},function(x){x?l(null,x):l(v)})})},executeEmptyJoinBGP:function(m,e,o,f,l){return F.executeBGPDatasets(m,e,o,f,l)},executeBGPDatasets:function(m,e,o,f,l){var y={};if(null==m.graph){var s=[];h.eachSeries(e.implicit,function(x,a){null==y[x.oid]?(y[x.oid]=!0,m.graph=x,o.rangeQuery(m,f,function(b){b=F.buildBindingsFromRange(b,m),s.push(b),a()})):a()},function(){var x=F.unionManyBindings(s);l(x)})}else if("var"===m.graph.token){var v=m.graph.value;s=[],h.eachSeries(e.named,function(x,a){null==y[x.oid]?(y[x.oid]=!0,m.graph=x,null!=s?o.rangeQuery(m,f,function(b){if(null!=b){b=F.buildBindingsFromRange(b,m);for(var A=0;A<b.length;A++)b[A][v]=x.oid;s.push(b)}else s=null;a()}):a()):a()},function(){if(null==s)l(null);else{var x=F.unionManyBindings(s);l(x)}})}else o.rangeQuery(m,f,function(x){null!=x?(x=F.buildBindingsFromRange(x,m),l(x)):l(null)})},buildBindingsFromRange:function(m,e){F.variablesInBGP(e);var o=e.value||e,f={};for(a in o)o[a]&&"var"===o[a].token?f[a]=o[a].value:o[a]&&"blank"===o[a].token&&(f[a]="blank:"+o[a].value);var l=[];if(null!=m)for(var y=0;y<m.length;y++){var s={},v=m[y],x=!1;for(var a in f){var b=v[a];if(null!=s[f[a]]&&s[f[a]]!==b){x=!0;break}s[f[a]]=b}x||l.push(s)}return l},areCompatibleBindings:function(m,e){for(var o in m)if(null!=e[o]&&e[o]!=m[o])return!1;return!0},mergeBindings:function(m,e){var o={};for(var f in m)o[f]=m[f];for(var f in e)o[f]=e[f];return o},joinBindings2:function(m,e,o){for(var f,l,y,s,v={},x=[],a=0;a<e.length;a++){f=e[a],s=v;for(var b=0;b<m.length;b++)l=f[m[b]],b==m.length-1?((y=s[l]||[]).push(f),s[l]=y):(y=s[l]||{},s[l]=y,s=y)}for(a=0;a<o.length;a++)for(f=o[a],s=v,b=0;b<m.length;b++)if(null!=s[l=f[m[b]]])if(b==m.length-1)for(var A=0;A<s[l].length;A++)x.push(F.mergeBindings(s[l][A],f));else s=s[l];return x},joinBindings:function(m,e){for(var o=[],f=0;f<m.length;f++)for(var l=m[f],y=0;y<e.length;y++){var s=e[y];F.areCompatibleBindings(l,s)&&o.push(F.mergeBindings(l,s))}return o},augmentMissingBindings:function(m,e){for(var o in e)null==m[o]&&(m[o]=null);return m},leftOuterJoinBindings:function(m,e){for(var o=[],f=0;f<m.length;f++){for(var l=m[f],y=!1,s=0;s<e.length;s++){var v=e[s];F.areCompatibleBindings(l,v)&&(y=!0,o.push(F.mergeBindings(l,v)))}!1===y&&(F.augmentMissingBindings(l,v),o.push(l))}return o},crossProductBindings:function(m,e){for(var o=[],f=0;f<m.length;f++)for(var l=m[f],y=0;y<e.length;y++){var s=e[y];o.push(F.mergeBindings(l,s))}return o},unionBindings:function(m,e){return m.concat(e)},unionManyBindings:function(m){for(var e=[],o=0;o<m.length;o++){var f=m[o];e=F.unionBindings(e,f)}return e}};ae.exports={QueryPlan:F}},{"./utils":147}],143:[function(J,ae,ce){var q=J("./network_transport").NetworkTransport,h=J("./rvn3_parser").RVN3Parser,F=J("./jsonld_parser").JSONLDParser,m=J("./utils"),e=function(o){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":h.parser,"text/n3":h.parser,"application/ld+json":F.parser,"application/json":F.parser},"undefined"!=typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=o)for(var f in o.parsers)this.parsers[f]=o.parsers[f];if(o&&null!=o.precedences)for(var f in this.precedences=o.precedences,o.parsers)m.include(this.precedences,f)||this.precedences.push(f);this.acceptHeaderValue="";for(var l=0;l<this.precedences.length;l++)this.acceptHeaderValue=0!=l?this.acceptHeaderValue+","+this.precedences[l]:this.acceptHeaderValue+this.precedences[l]};e.prototype.registerParser=function(o,f){this.parsers[o]=f,this.precedences.push(o)},e.prototype.unregisterParser=function(o){delete this.parsers[o];for(var f=[],l=0;l<this.precedences.length;l++)this.precedences[l]!=o&&f.push(this.precedences[l]);this.precedences=f},e.prototype.setAcceptHeaderPrecedence=function(o){this.precedences=o},e.prototype.load=function(o,f,l){var y=this;q.load(o,this.acceptHeaderValue,function(s,v){if(s)l(s);else{var x=v.headers["Content-Type"]||v.headers["content-type"],a=v.data;if(null!=x){for(var b in x=x.split(";")[0],y.parsers)if(-1!=b.indexOf("/")){var A=b.split("/");if("*"===A[1]){if(-1!=x.indexOf(A[0]))return y.tryToParse(y.parsers[b],f,a,{documentURI:o},l)}else{if(-1!=x.indexOf(b))return y.tryToParse(y.parsers[b],f,a,{documentURI:o},l);if(-1!=x.indexOf(A[1]))return y.tryToParse(y.parsers[b],f,a,{documentURI:o},l)}}else if(-1!=x.indexOf(b))return y.tryToParse(y.parsers[b],f,a,{documentURI:o},l);l(new Error("Unknown media type : "+x))}else l(new Error("Uknown media type"))}})},e.prototype.loadFromFile=function(o,f,l,y){try{var s=this;J("fs").readFile(l.split("file:/")[1],function(v,x){v?y(v):(x=x.toString("utf8"),s.tryToParse(o,f,x,{documentURI:l},y))})}catch(v){y(v)}},e.prototype.tryToParse=function(o,f,l,y,s){try{"string"==typeof l&&(l=m.normalizeUnicodeLiterals(l)),o.parse(l,f,y,s)}catch(v){console.log(v.message),console.log(v.stack),s(v)}},ae.exports={RDFLoader:e}},{"./jsonld_parser":132,"./network_transport":134,"./rvn3_parser":145,"./utils":147,fs:3}],144:[function(J,ae,ce){var q=J("./utils"),h=J("./query_filters").QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var F={};for(var m in this)q.include(this.interfaceProperties,m)||"function"==typeof this[m]||"defaultNs"===m||"interfaceProperties"===m||(F[m]=this[m]);return F},RDFModel.UrisMap.prototype.get=function(F){if(-1!=F.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[F]},RDFModel.UrisMap.prototype.remove=function(F){if(-1!=F.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[F],null},RDFModel.UrisMap.prototype.set=function(F,m){if(-1!=F.indexOf(" "))throw"Prefix must not contain any whitespaces";this[F]=m},RDFModel.UrisMap.prototype.setDefault=function(F){this.defaultNs=F},RDFModel.UrisMap.prototype.addAll=function(F,m){for(var e in F)q.include(this.interfaceProperties,e)||(null!=this[e]?!0===m&&(this[e]=F[e]):this[e]=F[e]);return this},RDFModel.UrisMap.prototype.resolve=function(F){var m=F.split(":"),e=m[0],o=m[1];return""===e?null==this.defaultNs?null:this.defaultNs+o:null!=this[e]?this[e]+o:null},RDFModel.UrisMap.prototype.shrink=function(F){for(var m in this){var e=this[m];if(0===F.indexOf(e)&&""!==e&&"defaultNs"!=m)return m+":"+F.split(e)[1]}return F},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(F,m){this.prefixes.addAll(F.prefixes,m),this.terms.addAll(F.terms,m)},RDFModel.Profile.prototype.resolve=function(F){return-1!=F.indexOf(":")?this.prefixes.resolve(F):null!=this.terms[F]?this.terms.resolve(F):null},RDFModel.Profile.prototype.setDefaultPrefix=function(F){this.prefixes.setDefault(F)},RDFModel.Profile.prototype.setDefaultVocabulary=function(F){this.terms.setDefault(F)},RDFModel.Profile.prototype.setPrefix=function(F,m){this.prefixes.set(F,m)},RDFModel.Profile.prototype.setTerm=function(F,m){this.terms.set(F,m)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var F=this;for(var m in this.filters={s:function(e){return function(o){return o.subject.equals(e)}},p:function(e){return function(o){return o.predicate.equals(e)}},o:function(e){return function(o){return o.object.equals(e)}},sp:function(e,o){return function(f){return f.subject.equals(e)&&f.predicate.equals(o)}},so:function(e,o){return function(f){return f.subject.equals(e)&&f.object.equals(o)}},po:function(e,o){return function(f){return f.predicate.equals(e)&&f.object.equals(o)}},spo:function(e,o,f){return function(l){return l.subject.equals(e)&&l.predicate.equals(o)&&l.object.equals(f)}},describes:function(e){return function(o){return o.subject.equals(e)||o.object.equals(e)}},type:function(e){var o=F.resolve("rdf:type");return function(f){return f.predicate.equals(o)&&f.object.equals(e)}}},RDFModel.defaultContext)this.prefixes.set(m,RDFModel.defaultContext[m])},RDFModel.RDFEnvironment.prototype=q.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var F=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,F},RDFModel.RDFEnvironment.prototype.createNamedNode=function(F){var m=this.resolve(F);return null!=m?new RDFModel.NamedNode(m):new RDFModel.NamedNode(F)},RDFModel.RDFEnvironment.prototype.createLiteral=function(F,m,e){return null!=e?new RDFModel.Literal(F,m,e.toString()):new RDFModel.Literal(F,m,e)},RDFModel.RDFEnvironment.prototype.createTriple=function(F,m,e){return new RDFModel.Triple(F,m,e)},RDFModel.RDFEnvironment.prototype.createGraph=function(F){var m=new RDFModel.Graph;if(null!=F)for(var e=0;e<F.length;e++)m.add(F[e]);return m},RDFModel.RDFEnvironment.prototype.createAction=function(F,m){return function(e){return F(e)?m(e):e}},RDFModel.RDFEnvironment.prototype.createProfile=function(F){if(!0===F)return new RDFModel.RDFEnvironment.Profile;var m=new RDFModel.RDFEnvironment.Profile;return m.importProfile(this),m},RDFModel.RDFEnvironment.prototype.createTermMap=function(F){if(!0===F)return new RDFModel.UrisMap;var m=this.terms.values(),e=new RDFModel.UrisMap;for(var o in m)e[o]=m[o];return e},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(F){if(!0===F)return new RDFModel.UrisMap;var m=this.prefixes.values(),e=new RDFModel.UrisMap;for(var o in m)e[o]=m[o];return e},RDFModel.RDFNode=function(F){this.interfaceName=F,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(F){if(null==F.interfaceName)return this.valueOf()==F;for(var m in this.attributes){var e=this.attributes[m];if(this[e]!=F[e])return!1}return!0},RDFModel.BlankNode=function(F){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+F,this.bnodeId=F},RDFModel.BlankNode.prototype=q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(F,m,e){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=F,null!=m?this.language=m:null!=e&&(this.datatype=e)},RDFModel.Literal.prototype=q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var F='"'+this.nominalValue+'"';return null!=this.language?F=F+"@"+this.language:(null!=this.datatype||this.type)&&(F=F+"^^<"+(this.datatype||this.type)+">"),F},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return h.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(F){RDFModel.RDFNode.call(this,"NamedNode"),null!=F.value?this.nominalValue=F.value:this.nominalValue=F},RDFModel.NamedNode.prototype=q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(F,m,e){this.subject=F,this.predicate=m,this.object=e},RDFModel.Triple.prototype.equals=function(F){return this.subject.equals(F.subject)&&this.predicate.equals(F.predicate)&&this.object.equals(F.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(F){for(var m=0;m<this.actions.length;m++)F=this.actions[m](F);var e=F.subject.toString()+F.predicate.toString()+F.object.toString();return this.duplicates[e]||(this.duplicates[e]=!0,this.triples.push(F)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(F,m){if(this.actions.push(F),1==m)for(var e=0;e<this.triples.length;e++)this.triples[e]=F(this.triples[e]);return this},RDFModel.Graph.prototype.addAll=function(F){for(var m=F.toArray(),e=0;e<m.length;e++)this.add(m[e]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(F){for(var m=null,e=0;e<this.triples.length;e++)if(this.triples[e].equals(F)){var o=F.subject.toString()+F.predicate.toString()+F.object.toString();delete this.duplicates[o],m=e;break}return null!=m&&this.triples.splice(m,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(F){for(var m=0;m<this.triples.length;m++)if(!0===F(this.triples[m],this))return!0;return!1},RDFModel.Graph.prototype.every=function(F){for(var m=0;m<this.triples.length;m++)if(!1===F(this.triples[m],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(F){for(var m=new RDFModel.Graph,e=0;e<this.triples.length;e++)!0===F(this.triples[e],this)&&m.add(this.triples[e]);return m},RDFModel.Graph.prototype.forEach=function(F){for(var m=0;m<this.triples.length;m++)F(this.triples[m],this)},RDFModel.Graph.prototype.merge=function(F){for(var m=new RDFModel.Graph,e=0;e<this.triples.length;e++)m.add(this.triples[e]);return m},RDFModel.Graph.prototype.match=function(F,m,e,o){for(var f=new RDFModel.Graph,l=0,y=0;y<this.triples.length;y++){var s=this.triples[y];if((null==F||s.subject.equals(F))&&(null==m||s.predicate.equals(m))&&(null==e||s.object.equals(e))){if(!(null==o||l<o))return f;l++,f.add(s)}}return f},RDFModel.Graph.prototype.removeMatches=function(F,m,e){for(var o=[],f=0;f<this.triples.length;f++){var l=this.triples[f];(null==F||l.subject.equals(F))&&(null==m||l.predicate.equals(m))&&(null==e||l.object.equals(e))&&o.push(l)}for(f=0;f<o.length;f++)this.remove(o[f]);return this},RDFModel.Graph.prototype.toNT=function(){var F="";return this.forEach(function(m){F+=m.toString()}),F},RDFModel.buildRDFResource=function(F,m,e,o){if("blank"===F.token)return RDFModel.buildBlankNode(F,m,e,o);if("literal"===F.token)return RDFModel.buildLiteral(F,m,e,o);if("uri"===F.token)return RDFModel.buildNamedNode(F,m,e,o);if("var"===F.token){var f=m[F.value];return null!=f?RDFModel.buildRDFResource(f,m,e,o):null}return null},RDFModel.buildBlankNode=function(F,m,e,o){return null!=F.valuetmp&&(F.value=F.valuetmp),0===F.value.indexOf("_:")&&(F.value=F.value.split("_:")[1]),new RDFModel.BlankNode(F.value)},RDFModel.buildLiteral=function(F,m,e,o){return new RDFModel.Literal(F.value,F.lang,F.type)},RDFModel.buildNamedNode=function(F,m,e,o){if(null!=F.value)return new RDFModel.NamedNode(F);if(null!=F.prefix){var f=e.resolveNsInEnvironment(F.prefix,o);return F.value=f+F.suffix,new RDFModel.NamedNode(F)}return new RDFModel.NamedNode(F)},RDFModel.rdf=new RDFModel.RDFEnvironment,ae.exports=RDFModel},{"./query_filters":141,"./utils":147}],145:[function(J,ae,ce){var q=J("n3").Parser,h={};function F(m){switch(m[0]){case'"':if(m.indexOf("^^")>0){var e=m.split("^^");return{literal:e[0]+"^^<"+e[1]+">"}}return{literal:m};case"_":return{blank:m.replace("b","")};default:return{token:"uri",value:m,prefix:null,suffix:null}}}h.parser={async:!0,parse:function(m,e,o,f){f||(f=o,o=e,e=null),e&&"string"==typeof e&&(e={token:"uri",value:e,prefix:null,suffix:null}),o&&o.baseURI&&(o.documentIRI=o.baseURI);var l=[];new q(o).parse(m,function(y,s){y?f(y):s?l.push({subject:F(s.subject),predicate:F(s.predicate),object:F(s.object),graph:e}):f(!1,l)})},resetBlankNodeIds:function(){q._resetBlankNodeIds()}},ae.exports={RVN3Parser:h}},{n3:57}],146:[function(J,ae,ce){var q=J("./query_engine").QueryEngine,h=J("./quad_backend").QuadBackend,F=J("./persistent_quad_backend").PersistentQuadBackend,m=J("./lexicon").Lexicon,e=J("./persistent_lexicon").PersistentLexicon,o=J("./rdf_model"),f=J("./utils");Store=function(l,y){var s=null,v=null;if(0==arguments.length)v={};else if(1==arguments.length)v={},s=l;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";v=l,s=y}null==v.treeOrder&&(v.treeOrder=15);var x=m,a=h;!0===v.persistent&&(x=e,a=F),this.functionMap={};var b=this;this.customFns={},new x(function(A){var T=function(){new a(v,function(B){var N=function(){v.backend=B,v.lexicon=A,b.engine=new q(v),s(null,b)};v.overwrite?B.clear(N):N()})};!0===v.overwrite?A.clear(T):T()},v.name)},Store.prototype.rdf=o.rdf,Store.prototype.rdf.api=o,Store.prototype.registerCustomFunction=function(l,y){this.customFns[l]=y,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var l;if(1===arguments.length){l=arguments[0];var y=function(){}}else 2===arguments.length&&(l=arguments[0],y=arguments[1]);this.engine.execute(l,y)}},Store.prototype.executeWithEnvironment=function(){var l,y,s;if(3===arguments.length){l=arguments[0];var v=function(){};y=arguments[1],s=arguments[2]}else 4===arguments.length&&(l=arguments[0],v=arguments[3],y=arguments[1],s=arguments[2]);y=f.map(y,function(x){return{token:"uri",value:x}}),s=f.map(s,function(x){return{token:"uri",value:x}}),this.engine.execute(l,v,y,s)},Store.prototype.graph=function(){var l=null,y=null;if(1===arguments.length)y=arguments[0]||function(){},l=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";y=arguments[1]||function(){},l=arguments[0]}null!=this.rdf.resolve(l)&&(l=this.rdf.resolve(l)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+l+"> { ?s ?p ?o } }",y)},Store.prototype.node=function(){var l=null,y=null,s=null;if(2===arguments.length)s=arguments[0],y=arguments[1]||function(){},l=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";s=arguments[0],l=arguments[1],y=arguments[2]||function(){}}null!=this.rdf.resolve(l)&&(l=this.rdf.resolve(l)),null!=this.rdf.resolve(s)&&(s=this.rdf.resolve(s)),this.engine.execute("CONSTRUCT { <"+s+"> ?p ?o } WHERE { GRAPH <"+l+"> { <"+s+"> ?p ?o } }",y)},Store.prototype.startObservingNode=function(){var l,y,s;2===arguments.length?(l=arguments[0],s=arguments[1],this.engine.callbacksBackend.observeNode(l,s,function(){})):3===arguments.length&&(l=arguments[0],y=arguments[1],s=arguments[2],this.engine.callbacksBackend.observeNode(l,y,s,function(){}))},Store.prototype.stopObservingNode=function(l){this.engine.callbacksBackend.stopObservingNode(l)},Store.prototype.startObservingQuery=function(){var l=arguments[0],y=arguments[1],s=arguments[2];null!=s?this.engine.callbacksBackend.observeQuery(l,y,s):this.engine.callbacksBackend.observeQuery(l,y,function(){})},Store.prototype.stopObservingQuery=function(l){this.engine.callbacksBackend.stopObservingQuery(l)},Store.prototype.subscribe=function(l,y,s,v,x){var a=this,b=function(A,T){var B=[],N={blanks:{},outCache:{}},P=[];f.each(T,function(L){var Q=o.buildRDFResource(L.subject,P,a.engine,N),j=o.buildRDFResource(L.predicate,P,a.engine,N),V=o.buildRDFResource(L.object,P,a.engine,N);null!=Q&&null!=j&&null!=V&&(L=new o.Triple(Q,j,V),B.push(L))}),x(A,B)};this.functionMap[x]=b,this.engine.callbacksBackend.subscribe(l,y,s,v,b,function(){})},Store.prototype.unsubscribe=function(l){var y=this.functionMap[l];this.engine.callbacksBackend.unsubscribe(y),delete this.functionMap[l]},Store.prototype.setPrefix=function(l,y){this.rdf.setPrefix(l,y)},Store.prototype.setDefaultPrefix=function(l){this.rdf.setDefaultPrefix(l)},Store.prototype.insert=function(){var l,y,s;if(1===arguments.length)y=arguments[0],s=function(){};else if(2===arguments.length)y=arguments[0],s=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";y=arguments[0],l=this.rdf.createNamedNode(arguments[1]),s=arguments[2]||function(){}}var v="",x=this;y.forEach(function(a){v=v+x._nodeToQuery(a.subject)+x._nodeToQuery(a.predicate)+x._nodeToQuery(a.object)+"."}),v=null!=l?"INSERT DATA { GRAPH "+this._nodeToQuery(l)+" { "+v+" } }":"INSERT DATA { "+v+" }",this.engine.execute(v,s)},Store.prototype._nodeToQuery=function(l){if("NamedNode"===l.interfaceName){var y=this.rdf.resolve(l.valueOf());return null!=y?"<"+y+">":"<"+l.valueOf()+">"}return l.toString()},Store.prototype.delete=function(){var l,y,s;if(1===arguments.length)y=arguments[0],s=function(){};else if(2===arguments.length)y=arguments[0],s=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";y=arguments[0],l=this.rdf.createNamedNode(arguments[1]),s=arguments[2]||function(){}}var v="",x=this;y.forEach(function(a){v=v+x._nodeToQuery(a.subject)+x._nodeToQuery(a.predicate)+x._nodeToQuery(a.object)+"."}),v=null!=l?"DELETE DATA { GRAPH "+this._nodeToQuery(l)+" { "+v+" } }":"DELETE DATA { "+v+" }",this.engine.execute(v,s)},Store.prototype.clear=function(){var l;if(0===arguments.length){l=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var y=function(){}}else if(1===arguments.length)l=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),y=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";l=this.rdf.createNamedNode(arguments[0]),y=arguments[1]||function(){}}var s="CLEAR GRAPH "+this._nodeToQuery(l);this.engine.execute(s,y)},Store.prototype.setBatchLoadEvents=function(l){this.engine.eventsOnBatchLoad=l},Store.prototype.registerDefaultNamespace=function(l,y){this.rdf.prefixes.set(l,y),this.engine.registerDefaultNamespace(l,y)},Store.prototype.registerDefaultProfileNamespaces=function(){var l=this.rdf.prefixes.values();for(var y in l)this.registerDefaultNamespace(y,l[y])},Store.prototype.load=function(){var l,y,s,v,x={};if(3===arguments.length)s=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),l=arguments[0],y=arguments[1],v=arguments[2]||function(){};else if(4===arguments.length)l=arguments[0],y=arguments[1],"string"==typeof(x=arguments[2])?(s=this.rdf.createNamedNode(x),x={}):(s=this.rdf.createNamedNode(x.graph||this.engine.lexicon.defaultGraphUri),delete x.graph),v=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===l){var a="LOAD <"+(y=this.rdf.createNamedNode(y)).valueOf()+"> INTO GRAPH <"+s.valueOf()+">";this.engine.execute(a,v)}else{var b=this,A=this.engine.rdfLoader.parsers[l];if(!A)return v(new Error("Cannot find parser for the provided media type:"+l));var T=[A,{token:"uri",value:s.valueOf()},y,x,function(B,N){B?v(B,N):b.engine.batchLoad(N,function(P){null!=P?v(null,P):v(new Error("Error batch-loading triples."))})}];y&&"string"==typeof y&&0===y.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,T):this.engine.rdfLoader.tryToParse.apply(null,T)}},Store.prototype.registerParser=function(l,y){this.engine.rdfLoader.registerParser(l,y)},Store.prototype.registeredGraphs=function(l){this.engine.lexicon.registeredGraphs(!0,function(y){var s=f.map(y,function(v){return new o.NamedNode(v)});l(null,s)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(l){NetworkTransport=l},Store.prototype.close=function(l){null==l&&(l=function(){}),this.engine.close?this.engine.close(l):l()},Store.VERSION="0.9.18-alpha.3",Store.yieldFrequency=function(l){f.yieldFrequency(l)},ae.exports.Store=Store,ae.exports.create=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store},ae.exports.connect=function(){(1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))}},{"./lexicon":133,"./persistent_lexicon":136,"./persistent_quad_backend":137,"./quad_backend":138,"./query_engine":140,"./rdf_model":144,"./utils":147}],147:[function(require,module,exports){(function(process){(function(){var slowNextTick=void 0!==process&&process.nextTick?process.nextTick:"undefined"!=typeof window&&window.setImmediate?window.setImmediate:function(J){setTimeout(J,0)},spin=0,yieldFrequency=100,nextTick=function(J){++spin<yieldFrequency?J():(spin=0,slowNextTick(J))},hashTerm=function(J){try{if(null==J)return"";if("uri"===J.token)return"u"+J.value;if("blank"===J.token)return"b"+J.value;if("literal"===J.token){var ae="l"+J.value;return ae+=J.type||"",ae+=J.lang||""}}catch(q){if("object"==typeof J){var ce="";for(p in J)ce=ce+p+J[p];return ce}return J}},lexicalFormBaseUri=function(J,ae){var ce=null;if(ae=ae||{},null==J.value){var q=J.prefix,h=J.suffix,F=ae.namespaces[q];ce=null!=F?F+h:q+":"+h}else ce=J.value;return null===ce?null:(-1==ce.indexOf(":")&&(ce=(ae.base||"")+ce),ce)};parseISO8601=function(J){return Date.parse(J)},Date.prototype.toISOString||function(){function J(ae){return ae<10?"0"+ae:ae}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+J(this.getUTCMonth()+1)+"-"+J(this.getUTCDate())+"T"+J(this.getUTCHours())+":"+J(this.getUTCMinutes())+":"+J(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(J){return J.toISOString()},compareDateComponents=function(J,ae){var ce=parseISO8601(J),q=parseISO8601(ae);return ce==q?0:ce<q?-1:1},lexicalFormLiteral=function(J,ae){var ce=J.value,q=J.lang,h=J.type,F=null;if(null!=ce&&null!=h&&"string"!=typeof h){var m=h.value;if(null==m){var e=h.prefix,o=h.suffix,f=ae.namespaces[e];J.type=f+o,m=f+o}F=-1!=m.indexOf("hexBinary")?'"'+J.value.toLowerCase()+'"^^<'+m+">":'"'+J.value+'"^^<'+m+">"}else F=null==q&&null==h?'"'+ce+'"':null==h?'"'+ce+'"@'+q:-1!=h.indexOf("hexBinary")?'"'+J.value.toLowerCase()+'"^^<'+h+">":'"'+J.value+'"^^<'+h+">";return F},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(J){if("undefined"==typeof window&&void 0!==process&&!1===process.browser){var ae=_dereq_("sqlite3"),ce=_dereq_("indexeddb-js"),q=new ae.Database(":memory:"),h=ce.makeScope("sqlite3",q);J.indexedDB=h.indexedDB,J.IDBKeyRange=h.IDBKeyRange}else{var F;(F="undefined"==typeof window?self:window).indexedDB=F.indexedDB||F.mozIndexedDB||F.webkitIndexedDB||F.msIndexedDB,F.IDBKeyRange=F.IDBKeyRange||F.webkitIDBKeyRange||F.msIDBKeyRange,F.indexedDB?(J.indexedDB=F.indexedDB,J.IDBKeyRange=F.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function J(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return J()+J()+"-"+J()+"-"+J()+"-"+J()+"-"+J()+J()+J()},hashTerm=function(J){try{if(null==J)return"";if("uri"===J.token)return"u"+J.value;if("blank"===J.token)return"b"+J.value;if("literal"===J.token){var ae="l"+J.value;return ae+=J.type||"",ae+=J.lang||""}}catch(q){if("object"==typeof J){var ce="";for(p in J)ce=ce+p+J[p];return ce}return J}};var reject=function(J,ae){for(var ce=[],q=0;q<J.length;q++)ae(J[q])&&ce.push(J[q]);return ce},include=function(J,ae){for(var ce=0;ce<J.length;ce++)if(J[ce]===ae)return!0;return!1},each=function(J,ae){if(J.forEach)J.forEach(ae);else for(var ce=0;ce<J.length;ce++)ae(J[ce])},map=function(J,ae){if(J.map)return J.map(ae);for(var ce=[],q=0;q<J.length;q++)ce[q]=ae(J[q]);return ce},keys=function(J){var ae=[];for(var ce in J)ae.push(ce);return ae},values=function(J){var ae=[];for(var ce in J)ae.push(J[ce]);return ae},size=function(J){if(J.length)return J.length;var ae=0;for(var ce in J)ae++;return ae};clone=function(J){return JSON.parse(JSON.stringify(J))};var isObject=function(J){var ae=typeof J;return"function"==ae||J&&"object"==ae||!1},create=function(){function J(){}return function(ae){if(isObject(ae)){J.prototype=ae;var ce=new J;J.prototype=null}return ce||void 0}}(),whilst=function(J,ae,ce){J()?ae(function(q){if(q)return ce(q);whilst(J,ae,ce)}):ce()},eachSeries=function(J,ae,ce){if(ce=ce||function(){},!J.length)return ce();var q=0,h=function(){ae(J[q],function(F){F?(ce(F),ce=function(){}):(q+=1)>=J.length?ce():nextTick(h)})};h()},eachParallel=function(J,ae,ce){if(ce=ce||function(){},!J.length)return ce();for(var q=!1,h=0,F=function(e){if(e)throw q=!0,new Error(e);q||++h===J.length&&ce()},m=0;m<J.length;m++)!function(e,o,f,l){nextTick(function(){try{l(e[o],function(){f()})}catch(y){f(y)}})}(J,m,F,ae)},reduce=function(J,ae,ce,q){eachSeries(J,function(h,F){ce(ae,h,function(m,e){ae=e,F(m)})},function(h){q(h,ae)})},seq=function(){var J=arguments;return function(){var ae=this,ce=Array.prototype.slice.call(arguments),q=ce.pop();reduce(J,ce,function(h,F,m){F.apply(ae,h.concat([function(){var e=arguments[0],o=Array.prototype.slice.call(arguments,1);m(e,o)}]))},function(h,F){q.apply(ae,[h].concat(F))})}},isWorker=function(){return(void 0===process||!0===process.browser)&&"undefined"==typeof window};module.exports={isWorker,nextTick,hasTerm:hashTerm,lexicalFormBaseUri,parseISO8601,compareDateComponents,iso8601,normalizeUnicodeLiterals,lexicalFormLiteral,registerIndexedDB,guid,hashTerm,keys,values,size,map,each,forEach:each,include,reject,remove:reject,clone,create,whilst,eachSeries,eachParallel,seq,yieldFrequency:function(J){yieldFrequency=J}}}).call(this)}).call(this,require("_process"))},{_process:71}]},{},[146])(146)}),function(J,ae){"object"==typeof exports&&"undefined"!=typeof module?module.exports=ae():"function"==typeof define&&define.amd?define(ae):(J=J||self).CodeMirror=ae()}(this,function(){"use strict";var J=navigator.userAgent,ae=navigator.platform,ce=/gecko\/\d/i.test(J),q=/MSIE \d/.test(J),h=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(J),F=/Edge\/(\d+)/.exec(J),m=q||h||F,e=m&&(q?document.documentMode||6:+(F||h)[1]),o=!F&&/WebKit\//.test(J),f=o&&/Qt\/\d+\.\d+/.test(J),l=!F&&/Chrome\/(\d+)/.exec(J),y=l&&+l[1],s=/Opera\//.test(J),v=/Apple Computer/.test(navigator.vendor),x=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(J),a=/PhantomJS/.test(J),b=v&&(/Mobile\/\w+/.test(J)||navigator.maxTouchPoints>2),A=/Android/.test(J),T=b||A||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(J),B=b||/Mac/.test(ae),N=/\bCrOS\b/.test(J),P=/win/i.test(ae),L=s&&J.match(/Version\/(\d*\.\d*)/);L&&(L=Number(L[1])),L&&L>=15&&(s=!1,o=!0);var Q=B&&(f||s&&(null==L||L<12.11)),j=ce||m&&e>=9;function V(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var te,W=function(t,n){var d=t.className,c=V(n).exec(d);if(c){var w=d.slice(c.index+c[0].length);t.className=d.slice(0,c.index)+(w?c[1]+w:"")}};function R(t){for(var n=t.childNodes.length;n>0;--n)t.removeChild(t.firstChild);return t}function Z(t,n){return R(t).appendChild(n)}function ee(t,n,d,c){var w=document.createElement(t);if(d&&(w.className=d),c&&(w.style.cssText=c),"string"==typeof n)w.appendChild(document.createTextNode(n));else if(n)for(var M=0;M<n.length;++M)w.appendChild(n[M]);return w}function le(t,n,d,c){var w=ee(t,n,d,c);return w.setAttribute("role","presentation"),w}function oe(t,n){if(3==n.nodeType&&(n=n.parentNode),t.contains)return t.contains(n);do{if(11==n.nodeType&&(n=n.host),n==t)return!0}while(n=n.parentNode)}function ie(){var t;try{t=document.activeElement}catch(n){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function pe(t,n){var d=t.className;V(n).test(d)||(t.className+=(d?" ":"")+n)}function we(t,n){for(var d=t.split(" "),c=0;c<d.length;c++)d[c]&&!V(d[c]).test(n)&&(n+=" "+d[c]);return n}te=document.createRange?function(t,n,d,c){var w=document.createRange();return w.setEnd(c||t,d),w.setStart(t,n),w}:function(t,n,d){var c=document.body.createTextRange();try{c.moveToElementText(t.parentNode)}catch(w){return c}return c.collapse(!0),c.moveEnd("character",d),c.moveStart("character",n),c};var Te=function(t){t.select()};function Fe(t){var n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,n)}}function ke(t,n,d){for(var c in n||(n={}),t)t.hasOwnProperty(c)&&(!1!==d||!n.hasOwnProperty(c))&&(n[c]=t[c]);return n}function de(t,n,d,c,w){null==n&&(-1==(n=t.search(/[^\s\u00a0]/))&&(n=t.length));for(var M=c||0,K=w||0;;){var re=t.indexOf("\t",M);if(re<0||re>=n)return K+(n-M);K+=re-M,K+=d-K%d,M=re+1}}b?Te=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:m&&(Te=function(t){try{t.select()}catch(n){}});var Le=function(){this.id=null,this.f=null,this.time=0,this.handler=Fe(this.onTimeout,this)};function Me(t,n){for(var d=0;d<t.length;++d)if(t[d]==n)return d;return-1}Le.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},Le.prototype.set=function(t,n){this.f=n;var d=+new Date+t;(!this.id||d<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=d)};var H={toString:function(){return"CodeMirror.Pass"}},z={scroll:!1},ne={origin:"*mouse"},ge={origin:"+move"};function xe(t,n,d){for(var c=0,w=0;;){var M=t.indexOf("\t",c);-1==M&&(M=t.length);var K=M-c;if(M==t.length||w+K>=n)return c+Math.min(K,n-w);if(w+=M-c,c=M+1,(w+=d-w%d)>=n)return c}}var Re=[""];function He(t){for(;Re.length<=t;)Re.push(We(Re)+" ");return Re[t]}function We(t){return t[t.length-1]}function Ke(t,n){for(var d=[],c=0;c<t.length;c++)d[c]=n(t[c],c);return d}function yt(){}function Mt(t,n){var d;return Object.create?d=Object.create(t):(yt.prototype=t,d=new yt),n&&ke(n,d),d}var Yt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Se(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||Yt.test(t))}function Ie(t,n){return n?!!(n.source.indexOf("\\w")>-1&&Se(t))||n.test(t):Se(t)}function Ne(t){for(var n in t)if(t.hasOwnProperty(n)&&t[n])return!1;return!0}var Y=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function he(t){return t.charCodeAt(0)>=768&&Y.test(t)}function ve(t,n,d){for(;(d<0?n>0:n<t.length)&&he(t.charAt(n));)n+=d;return n}function me(t,n,d){for(var c=n>d?-1:1;;){if(n==d)return n;var w=(n+d)/2,M=c<0?Math.ceil(w):Math.floor(w);if(M==n)return t(M)?n:d;t(M)?d=M:n=M+c}}var Ce=null;function Oe(t,n,d){var c;Ce=null;for(var w=0;w<t.length;++w){var M=t[w];if(M.from<n&&M.to>n)return w;M.to==n&&(M.from!=M.to&&"before"==d?c=w:Ce=w),M.from==n&&(M.from!=M.to&&"before"!=d?c=w:Ce=w)}return null!=c?c:Ce}var Pe=function(){function d(ue){return ue<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(ue):1424<=ue&&ue<=1524?"R":1536<=ue&&ue<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(ue-1536):1774<=ue&&ue<=2220?"r":8192<=ue&&ue<=8203?"w":8204==ue?"b":"L"}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,w=/[stwN]/,M=/[LRr]/,K=/[Lb1n]/,re=/[1n]/;function se(ue,be,Ee){this.level=ue,this.from=be,this.to=Ee}return function(ue,be){var Ee="ltr"==be?"L":"R";if(0==ue.length||"ltr"==be&&!c.test(ue))return!1;for(var Qe=ue.length,Be=[],Ye=0;Ye<Qe;++Ye)Be.push(d(ue.charCodeAt(Ye)));for(var tt=0,st=Ee;tt<Qe;++tt){var ut=Be[tt];"m"==ut?Be[tt]=st:st=ut}for(var pt=0,ft=Ee;pt<Qe;++pt){var gt=Be[pt];"1"==gt&&"r"==ft?Be[pt]="n":M.test(gt)&&(ft=gt,"r"==gt&&(Be[pt]="R"))}for(var wt=1,xt=Be[0];wt<Qe-1;++wt){var Et=Be[wt];"+"==Et&&"1"==xt&&"1"==Be[wt+1]?Be[wt]="1":","==Et&&xt==Be[wt+1]&&("1"==xt||"n"==xt)&&(Be[wt]=xt),xt=Et}for(var Qt=0;Qt<Qe;++Qt){var sr=Be[Qt];if(","==sr)Be[Qt]="N";else if("%"==sr){var Gt=void 0;for(Gt=Qt+1;Gt<Qe&&"%"==Be[Gt];++Gt);for(var Fr=Qt&&"!"==Be[Qt-1]||Gt<Qe&&"1"==Be[Gt]?"1":"N",wr=Qt;wr<Gt;++wr)Be[wr]=Fr;Qt=Gt-1}}for(var Jt=0,kr=Ee;Jt<Qe;++Jt){var ar=Be[Jt];"L"==kr&&"1"==ar?Be[Jt]="L":M.test(ar)&&(kr=ar)}for(var tr=0;tr<Qe;++tr)if(w.test(Be[tr])){var Zt=void 0;for(Zt=tr+1;Zt<Qe&&w.test(Be[Zt]);++Zt);for(var Ht="L"==(tr?Be[tr-1]:Ee),ni=Ht==("L"==(Zt<Qe?Be[Zt]:Ee))?Ht?"L":"R":Ee,En=tr;En<Zt;++En)Be[En]=ni;tr=Zt-1}for(var $r,cr=[],rr=0;rr<Qe;)if(K.test(Be[rr])){var da=rr;for(++rr;rr<Qe&&K.test(Be[rr]);++rr);cr.push(new se(0,da,rr))}else{var en=rr,ii=cr.length,Tn="rtl"==be?1:0;for(++rr;rr<Qe&&"L"!=Be[rr];++rr);for(var dr=en;dr<rr;)if(re.test(Be[dr])){en<dr&&(cr.splice(ii,0,new se(1,en,dr)),ii+=Tn);var Ei=dr;for(++dr;dr<rr&&re.test(Be[dr]);++dr);cr.splice(ii,0,new se(2,Ei,dr)),ii+=Tn,en=dr}else++dr;en<rr&&cr.splice(ii,0,new se(1,en,rr))}return"ltr"==be&&(1==cr[0].level&&($r=ue.match(/^\s+/))&&(cr[0].from=$r[0].length,cr.unshift(new se(0,0,$r[0].length))),1==We(cr).level&&($r=ue.match(/\s+$/))&&(We(cr).to-=$r[0].length,cr.push(new se(0,Qe-$r[0].length,Qe)))),"rtl"==be?cr.reverse():cr}}();function Ge(t,n){var d=t.order;return null==d&&(d=t.order=Pe(t.text,n)),d}var $e=[],Xe=function(t,n,d){if(t.addEventListener)t.addEventListener(n,d,!1);else if(t.attachEvent)t.attachEvent("on"+n,d);else{var c=t._handlers||(t._handlers={});c[n]=(c[n]||$e).concat(d)}};function Ve(t,n){return t._handlers&&t._handlers[n]||$e}function ct(t,n,d){if(t.removeEventListener)t.removeEventListener(n,d,!1);else if(t.detachEvent)t.detachEvent("on"+n,d);else{var c=t._handlers,w=c&&c[n];if(w){var M=Me(w,d);M>-1&&(c[n]=w.slice(0,M).concat(w.slice(M+1)))}}}function dt(t,n){var d=Ve(t,n);if(d.length)for(var c=Array.prototype.slice.call(arguments,2),w=0;w<d.length;++w)d[w].apply(null,c)}function ht(t,n,d){return"string"==typeof n&&(n={type:n,preventDefault:function(){this.defaultPrevented=!0}}),dt(t,d||n.type,t,n),Ot(n)||n.codemirrorIgnore}function Ct(t){var n=t._handlers&&t._handlers.cursorActivity;if(n)for(var d=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),c=0;c<n.length;++c)-1==Me(d,n[c])&&d.push(n[c])}function kt(t,n){return Ve(t,n).length>0}function vt(t){t.prototype.on=function(n,d){Xe(this,n,d)},t.prototype.off=function(n,d){ct(this,n,d)}}function it(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Lt(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Ot(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function At(t){it(t),Lt(t)}function Nn(t){return t.target||t.srcElement}function Oi(t){var n=t.which;return null==n&&(1&t.button?n=1:2&t.button?n=3:4&t.button&&(n=2)),B&&t.ctrlKey&&1==n&&(n=3),n}var Ri,Di,ls=function(){if(m&&e<9)return!1;var t=ee("div");return"draggable"in t||"dragDrop"in t}();function us(t){if(null==Ri){var n=ee("span","\u200b");Z(t,ee("span",[n,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Ri=n.offsetWidth<=1&&n.offsetHeight>2&&!(m&&e<8))}var d=Ri?ee("span","\u200b"):ee("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return d.setAttribute("cm-text",""),d}function fs(t){if(null!=Di)return Di;var n=Z(t,document.createTextNode("A\u062eA")),d=te(n,0,1).getBoundingClientRect(),c=te(n,1,2).getBoundingClientRect();return R(t),!(!d||d.left==d.right)&&(Di=c.right-d.right<3)}var t,Hr=3!="\n\nb".split(/\n/).length?function(t){for(var n=0,d=[],c=t.length;n<=c;){var w=t.indexOf("\n",n);-1==w&&(w=t.length);var M=t.slice(n,"\r"==t.charAt(w-1)?w-1:w),K=M.indexOf("\r");-1!=K?(d.push(M.slice(0,K)),n+=K+1):(d.push(M),n=w+1)}return d}:function(t){return t.split(/\r\n?|\n/)},ai=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(n){return!1}}:function(t){var n;try{n=t.ownerDocument.selection.createRange()}catch(d){}return!(!n||n.parentElement()!=t)&&0!=n.compareEndPoints("StartToEnd",n)},rn="oncopy"in(t=ee("div"))||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy),cn=null;var Wr={},nn={};function ji(t,n){arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),Wr[t]=n}function Er(t){if("string"==typeof t&&nn.hasOwnProperty(t))t=nn[t];else if(t&&"string"==typeof t.name&&nn.hasOwnProperty(t.name)){var n=nn[t.name];"string"==typeof n&&(n={name:n}),(t=Mt(n,t)).name=n.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Er("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Er("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Mi(t,n){n=Er(n);var d=Wr[n.name];if(!d)return Mi(t,"text/plain");var c=d(t,n);if(zr.hasOwnProperty(n.name)){var w=zr[n.name];for(var M in w)!w.hasOwnProperty(M)||(c.hasOwnProperty(M)&&(c["_"+M]=c[M]),c[M]=w[M])}if(c.name=n.name,n.helperType&&(c.helperType=n.helperType),n.modeProps)for(var K in n.modeProps)c[K]=n.modeProps[K];return c}var zr={};function xo(t,n){ke(n,zr.hasOwnProperty(t)?zr[t]:zr[t]={})}function Tr(t,n){if(!0===n)return n;if(t.copyState)return t.copyState(n);var d={};for(var c in n){var w=n[c];w instanceof Array&&(w=w.concat([])),d[c]=w}return d}function Bi(t,n){for(var d;t.innerMode&&((d=t.innerMode(n))&&d.mode!=t);)n=d.state,t=d.mode;return d||{mode:t,state:n}}function On(t,n,d){return!t.startState||t.startState(n,d)}var Xt=function(t,n,d){this.pos=this.start=0,this.string=t,this.tabSize=n||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=d};function bt(t,n){if((n-=t.first)<0||n>=t.size)throw new Error("There is no line "+(n+t.first)+" in the document.");for(var d=t;!d.lines;)for(var c=0;;++c){var w=d.children[c],M=w.chunkSize();if(n<M){d=w;break}n-=M}return d.lines[n]}function hn(t,n,d){var c=[],w=n.line;return t.iter(n.line,d.line+1,function(M){var K=M.text;w==d.line&&(K=K.slice(0,d.ch)),w==n.line&&(K=K.slice(n.ch)),c.push(K),++w}),c}function cs(t,n,d){var c=[];return t.iter(n,d,function(w){c.push(w.text)}),c}function qr(t,n){var d=n-t.height;if(d)for(var c=t;c;c=c.parent)c.height+=d}function Bt(t){if(null==t.parent)return null;for(var n=t.parent,d=Me(n.lines,t),c=n.parent;c;n=c,c=c.parent)for(var w=0;c.children[w]!=n;++w)d+=c.children[w].chunkSize();return d+n.first}function Rn(t,n){var d=t.first;e:do{for(var c=0;c<t.children.length;++c){var w=t.children[c],M=w.height;if(n<M){t=w;continue e}n-=M,d+=w.chunkSize()}return d}while(!t.lines);for(var K=0;K<t.lines.length;++K){var se=t.lines[K].height;if(n<se)break;n-=se}return d+K}function Pi(t,n){return n>=t.first&&n<t.first+t.size}function wo(t,n){return String(t.lineNumberFormatter(n+t.firstLineNumber))}function ot(t,n,d){if(void 0===d&&(d=null),!(this instanceof ot))return new ot(t,n,d);this.line=t,this.ch=n,this.sticky=d}function _t(t,n){return t.line-n.line||t.ch-n.ch}function hs(t,n){return t.sticky==n.sticky&&0==_t(t,n)}function ps(t){return ot(t.line,t.ch)}function ko(t,n){return _t(t,n)<0?n:t}function Qi(t,n){return _t(t,n)<0?t:n}function _a(t,n){return Math.max(t.first,Math.min(n,t.first+t.size-1))}function St(t,n){if(n.line<t.first)return ot(t.first,0);var d=t.first+t.size-1;return n.line>d?ot(d,bt(t,d).text.length):function Nu(t,n){var d=t.ch;return null==d||d>n?ot(t.line,n):d<0?ot(t.line,0):t}(n,bt(t,n.line).text.length)}function Sa(t,n){for(var d=[],c=0;c<n.length;c++)d[c]=St(t,n[c]);return d}Xt.prototype.eol=function(){return this.pos>=this.string.length},Xt.prototype.sol=function(){return this.pos==this.lineStart},Xt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Xt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Xt.prototype.eat=function(t){var n=this.string.charAt(this.pos);if("string"==typeof t?n==t:n&&(t.test?t.test(n):t(n)))return++this.pos,n},Xt.prototype.eatWhile=function(t){for(var n=this.pos;this.eat(t););return this.pos>n},Xt.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Xt.prototype.skipToEnd=function(){this.pos=this.string.length},Xt.prototype.skipTo=function(t){var n=this.string.indexOf(t,this.pos);if(n>-1)return this.pos=n,!0},Xt.prototype.backUp=function(t){this.pos-=t},Xt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=de(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?de(this.string,this.lineStart,this.tabSize):0)},Xt.prototype.indentation=function(){return de(this.string,null,this.tabSize)-(this.lineStart?de(this.string,this.lineStart,this.tabSize):0)},Xt.prototype.match=function(t,n,d){if("string"!=typeof t){var M=this.string.slice(this.pos).match(t);return M&&M.index>0?null:(M&&!1!==n&&(this.pos+=M[0].length),M)}var c=function(K){return d?K.toLowerCase():K};if(c(this.string.substr(this.pos,t.length))==c(t))return!1!==n&&(this.pos+=t.length),!0},Xt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Xt.prototype.hideFirstChars=function(t,n){this.lineStart+=t;try{return n()}finally{this.lineStart-=t}},Xt.prototype.lookAhead=function(t){var n=this.lineOracle;return n&&n.lookAhead(t)},Xt.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var Co=function(t,n){this.state=t,this.lookAhead=n},Rr=function(t,n,d,c){this.state=n,this.doc=t,this.line=d,this.maxLookAhead=c||0,this.baseTokens=null,this.baseTokenPos=1};function Aa(t,n,d,c){var w=[t.state.modeGen],M={};Ia(t,n.text,t.doc.mode,d,function(ue,be){return w.push(ue,be)},M,c);for(var K=d.state,re=function(ue){d.baseTokens=w;var be=t.state.overlays[ue],Ee=1,Qe=0;d.state=!0,Ia(t,n.text,be.mode,d,function(Be,Ye){for(var tt=Ee;Qe<Be;){var st=w[Ee];st>Be&&w.splice(Ee,1,Be,w[Ee+1],st),Ee+=2,Qe=Math.min(Be,st)}if(Ye)if(be.opaque)w.splice(tt,Ee-tt,Be,"overlay "+Ye),Ee=tt+2;else for(;tt<Ee;tt+=2){var ut=w[tt+1];w[tt+1]=(ut?ut+" ":"")+"overlay "+Ye}},M),d.state=K,d.baseTokens=null,d.baseTokenPos=1},se=0;se<t.state.overlays.length;++se)re(se);return{styles:w,classes:M.bgClass||M.textClass?M:null}}function ds(t,n,d){if(!n.styles||n.styles[0]!=t.state.modeGen){var c=Ui(t,Bt(n)),w=n.text.length>t.options.maxHighlightLength&&Tr(t.doc.mode,c.state),M=Aa(t,n,c);w&&(c.state=w),n.stateAfter=c.save(!w),n.styles=M.styles,M.classes?n.styleClasses=M.classes:n.styleClasses&&(n.styleClasses=null),d===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return n.styles}function Ui(t,n,d){var c=t.doc,w=t.display;if(!c.mode.startState)return new Rr(c,!0,n);var M=function Ou(t,n,d){for(var c,w,M=t.doc,K=d?-1:n-(t.doc.mode.innerMode?1e3:100),re=n;re>K;--re){if(re<=M.first)return M.first;var se=bt(M,re-1),ue=se.stateAfter;if(ue&&(!d||re+(ue instanceof Co?ue.lookAhead:0)<=M.modeFrontier))return re;var be=de(se.text,null,t.options.tabSize);(null==w||c>be)&&(w=re-1,c=be)}return w}(t,n,d),K=M>c.first&&bt(c,M-1).stateAfter,re=K?Rr.fromSaved(c,K,M):new Rr(c,On(c.mode),M);return c.iter(M,n,function(se){_o(t,se.text,re);var ue=re.line;se.stateAfter=ue==n-1||ue%5==0||ue>=w.viewFrom&&ue<w.viewTo?re.save():null,re.nextLine()}),d&&(c.modeFrontier=re.line),re}function _o(t,n,d,c){var w=t.doc.mode,M=new Xt(n,t.options.tabSize,d);for(M.start=M.pos=c||0,""==n&&Fa(w,d.state);!M.eol();)So(w,M,d.state),M.start=M.pos}function Fa(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var d=Bi(t,n);if(d.mode.blankLine)return d.mode.blankLine(d.state)}}function So(t,n,d,c){for(var w=0;w<10;w++){c&&(c[0]=Bi(t,d).mode);var M=t.token(n,d);if(n.pos>n.start)return M}throw new Error("Mode "+t.name+" failed to advance stream.")}Rr.prototype.lookAhead=function(t){var n=this.doc.getLine(this.line+t);return null!=n&&t>this.maxLookAhead&&(this.maxLookAhead=t),n},Rr.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var n=this.baseTokens[this.baseTokenPos+1];return{type:n&&n.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},Rr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Rr.fromSaved=function(t,n,d){return n instanceof Co?new Rr(t,Tr(t.mode,n.state),d,n.lookAhead):new Rr(t,Tr(t.mode,n),d)},Rr.prototype.save=function(t){var n=!1!==t?Tr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Co(n,this.maxLookAhead):n};var Ea=function(t,n,d){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=n||null,this.state=d};function Ta(t,n,d,c){var K,be,w=t.doc,M=w.mode,re=bt(w,(n=St(w,n)).line),se=Ui(t,n.line,d),ue=new Xt(re.text,t.options.tabSize,se);for(c&&(be=[]);(c||ue.pos<n.ch)&&!ue.eol();)ue.start=ue.pos,K=So(M,ue,se.state),c&&be.push(new Ea(ue,K,Tr(w.mode,se.state)));return c?be:new Ea(ue,K,se.state)}function La(t,n){if(t)for(;;){var d=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!d)break;t=t.slice(0,d.index)+t.slice(d.index+d[0].length);var c=d[1]?"bgClass":"textClass";null==n[c]?n[c]=d[2]:new RegExp("(?:^|\\s)"+d[2]+"(?:$|\\s)").test(n[c])||(n[c]+=" "+d[2])}return t}function Ia(t,n,d,c,w,M,K){var re=d.flattenSpans;null==re&&(re=t.options.flattenSpans);var Ee,se=0,ue=null,be=new Xt(n,t.options.tabSize,c),Qe=t.options.addModeClass&&[null];for(""==n&&La(Fa(d,c.state),M);!be.eol();){if(be.pos>t.options.maxHighlightLength?(re=!1,K&&_o(t,n,c,be.pos),be.pos=n.length,Ee=null):Ee=La(So(d,be,c.state,Qe),M),Qe){var Be=Qe[0].name;Be&&(Ee="m-"+(Ee?Be+" "+Ee:Be))}if(!re||ue!=Ee){for(;se<be.start;)w(se=Math.min(be.start,se+5e3),ue);ue=Ee}be.start=be.pos}for(;se<be.pos;){var Ye=Math.min(be.pos,se+5e3);w(Ye,ue),se=Ye}}var vs=!1,on=!1;function Ao(t,n,d){this.marker=t,this.from=n,this.to=d}function Gi(t,n){if(t)for(var d=0;d<t.length;++d){var c=t[d];if(c.marker==n)return c}}function Oa(t,n){for(var d,c=0;c<t.length;++c)t[c]!=n&&(d||(d=[])).push(t[c]);return d}function gs(t,n){if(n.full)return null;var d=Pi(t,n.from.line)&&bt(t,n.from.line).markedSpans,c=Pi(t,n.to.line)&&bt(t,n.to.line).markedSpans;if(!d&&!c)return null;var w=n.from.ch,M=n.to.ch,K=0==_t(n.from,n.to),re=function Ra(t,n,d){var c;if(t)for(var w=0;w<t.length;++w){var M=t[w],K=M.marker;if(null==M.from||(K.inclusiveLeft?M.from<=n:M.from<n)||M.from==n&&"bookmark"==K.type&&(!d||!M.marker.insertLeft)){var se=null==M.to||(K.inclusiveRight?M.to>=n:M.to>n);(c||(c=[])).push(new Ao(K,M.from,se?null:M.to))}}return c}(d,w,K),se=function Mu(t,n,d){var c;if(t)for(var w=0;w<t.length;++w){var M=t[w],K=M.marker;if(null==M.to||(K.inclusiveRight?M.to>=n:M.to>n)||M.from==n&&"bookmark"==K.type&&(!d||M.marker.insertLeft)){var se=null==M.from||(K.inclusiveLeft?M.from<=n:M.from<n);(c||(c=[])).push(new Ao(K,se?null:M.from-n,null==M.to?null:M.to-n))}}return c}(c,M,K),ue=1==n.text.length,be=We(n.text).length+(ue?w:0);if(re)for(var Ee=0;Ee<re.length;++Ee){var Qe=re[Ee];if(null==Qe.to){var Be=Gi(se,Qe.marker);Be?ue&&(Qe.to=null==Be.to?null:Be.to+be):Qe.to=w}}if(se)for(var Ye=0;Ye<se.length;++Ye){var tt=se[Ye];if(null!=tt.to&&(tt.to+=be),null==tt.from)Gi(re,tt.marker)||(tt.from=be,ue&&(re||(re=[])).push(tt));else tt.from+=be,ue&&(re||(re=[])).push(tt)}re&&(re=Da(re)),se&&se!=re&&(se=Da(se));var ut=[re];if(!ue){var ft,pt=n.text.length-2;if(pt>0&&re)for(var gt=0;gt<re.length;++gt)null==re[gt].to&&(ft||(ft=[])).push(new Ao(re[gt].marker,null,null));for(var wt=0;wt<pt;++wt)ut.push(ft);ut.push(se)}return ut}function Da(t){for(var n=0;n<t.length;++n){var d=t[n];null!=d.from&&d.from==d.to&&!1!==d.marker.clearWhenEmpty&&t.splice(n--,1)}return t.length?t:null}function Ma(t){var n=t.markedSpans;if(n){for(var d=0;d<n.length;++d)n[d].marker.detachLine(t);t.markedSpans=null}}function Ba(t,n){if(n){for(var d=0;d<n.length;++d)n[d].marker.attachLine(t);t.markedSpans=n}}function Dn(t){return t.inclusiveLeft?-1:0}function Hi(t){return t.inclusiveRight?1:0}function ys(t,n){var d=t.lines.length-n.lines.length;if(0!=d)return d;var c=t.find(),w=n.find(),M=_t(c.from,w.from)||Dn(t)-Dn(n);return M?-M:_t(c.to,w.to)||Hi(t)-Hi(n)||n.id-t.id}function Wi(t,n){var c,d=on&&t.markedSpans;if(d)for(var w=void 0,M=0;M<d.length;++M)(w=d[M]).marker.collapsed&&null==(n?w.from:w.to)&&(!c||ys(c,w.marker)<0)&&(c=w.marker);return c}function ms(t){return Wi(t,!0)}function jn(t){return Wi(t,!1)}function Pa(t,n){var c,d=on&&t.markedSpans;if(d)for(var w=0;w<d.length;++w){var M=d[w];M.marker.collapsed&&(null==M.from||M.from<n)&&(null==M.to||M.to>n)&&(!c||ys(c,M.marker)<0)&&(c=M.marker)}return c}function Qa(t,n,d,c,w){var M=bt(t,n),K=on&&M.markedSpans;if(K)for(var re=0;re<K.length;++re){var se=K[re];if(se.marker.collapsed){var ue=se.marker.find(0),be=_t(ue.from,d)||Dn(se.marker)-Dn(w),Ee=_t(ue.to,c)||Hi(se.marker)-Hi(w);if(!(be>=0&&Ee<=0||be<=0&&Ee>=0)&&(be<=0&&(se.marker.inclusiveRight&&w.inclusiveLeft?_t(ue.to,d)>=0:_t(ue.to,d)>0)||be>=0&&(se.marker.inclusiveRight&&w.inclusiveLeft?_t(ue.from,c)<=0:_t(ue.from,c)<0)))return!0}}}function Dr(t){for(var n;n=ms(t);)t=n.find(-1,!0).line;return t}function jr(t,n){var d=bt(t,n),c=Dr(d);return d==c?n:Bt(c)}function Ua(t,n){if(n>t.lastLine())return n;var c,d=bt(t,n);if(!pn(t,d))return n;for(;c=jn(d);)d=c.find(1,!0).line;return Bt(d)+1}function pn(t,n){var d=on&&n.markedSpans;if(d)for(var c=void 0,w=0;w<d.length;++w)if((c=d[w]).marker.collapsed){if(null==c.from)return!0;if(!c.marker.widgetNode&&0==c.from&&c.marker.inclusiveLeft&&bs(t,n,c))return!0}}function bs(t,n,d){if(null==d.to){var c=d.marker.find(1,!0);return bs(t,c.line,Gi(c.line.markedSpans,d.marker))}if(d.marker.inclusiveRight&&d.to==n.text.length)return!0;for(var w=void 0,M=0;M<n.markedSpans.length;++M)if((w=n.markedSpans[M]).marker.collapsed&&!w.marker.widgetNode&&w.from==d.to&&(null==w.to||w.to!=d.from)&&(w.marker.inclusiveLeft||d.marker.inclusiveRight)&&bs(t,n,w))return!0}function Xr(t){for(var n=0,d=(t=Dr(t)).parent,c=0;c<d.lines.length;++c){var w=d.lines[c];if(w==t)break;n+=w.height}for(var M=d.parent;M;M=(d=M).parent)for(var K=0;K<M.children.length;++K){var re=M.children[K];if(re==d)break;n+=re.height}return n}function Fo(t){if(0==t.height)return 0;for(var d,n=t.text.length,c=t;d=ms(c);){var w=d.find(0,!0);c=w.from.line,n+=w.from.ch-w.to.ch}for(c=t;d=jn(c);){var M=d.find(0,!0);n-=c.text.length-M.from.ch,n+=(c=M.to.line).text.length-M.to.ch}return n}function Eo(t){var n=t.display,d=t.doc;n.maxLine=bt(d,d.first),n.maxLineLength=Fo(n.maxLine),n.maxLineChanged=!0,d.iter(function(c){var w=Fo(c);w>n.maxLineLength&&(n.maxLineLength=w,n.maxLine=c)})}var li=function(t,n,d){this.text=t,Ba(this,n),this.height=d?d(this):1};function Pu(t){t.parent=null,Ma(t)}li.prototype.lineNo=function(){return Bt(this)},vt(li);var Ha={},Qu={};function Wa(t,n){if(!t||/^\s*$/.test(t))return null;var d=n.addModeClass?Qu:Ha;return d[t]||(d[t]=t.replace(/\S+/g,"cm-$&"))}function za(t,n){var d=le("span",null,null,o?"padding-right: .1px":null),c={pre:le("pre",[d],"CodeMirror-line"),content:d,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};n.measure={};for(var w=0;w<=(n.rest?n.rest.length:0);w++){var M=w?n.rest[w-1]:n.line,K=void 0;c.pos=0,c.addToken=Uu,fs(t.display.measure)&&(K=Ge(M,t.doc.direction))&&(c.addToken=Gu(c.addToken,K)),c.map=[],xs(M,c,ds(t,M,n!=t.display.externalMeasured&&Bt(M))),M.styleClasses&&(M.styleClasses.bgClass&&(c.bgClass=we(M.styleClasses.bgClass,c.bgClass||"")),M.styleClasses.textClass&&(c.textClass=we(M.styleClasses.textClass,c.textClass||""))),0==c.map.length&&c.map.push(0,0,c.content.appendChild(us(t.display.measure))),0==w?(n.measure.map=c.map,n.measure.cache={}):((n.measure.maps||(n.measure.maps=[])).push(c.map),(n.measure.caches||(n.measure.caches=[])).push({}))}if(o){var se=c.content.lastChild;(/\bcm-tab\b/.test(se.className)||se.querySelector&&se.querySelector(".cm-tab"))&&(c.content.className="cm-tab-wrap-hack")}return dt(t,"renderLine",t,n.line,c.pre),c.pre.className&&(c.textClass=we(c.pre.className,c.textClass||"")),c}function qa(t){var n=ee("span","\u2022","cm-invalidchar");return n.title="\\u"+t.charCodeAt(0).toString(16),n.setAttribute("aria-label",n.title),n}function Uu(t,n,d,c,w,M,K){if(n){var be,re=t.splitSpaces?function Xa(t,n){if(t.length>1&&!/  /.test(t))return t;for(var d=n,c="",w=0;w<t.length;w++){var M=t.charAt(w);" "==M&&d&&(w==t.length-1||32==t.charCodeAt(w+1))&&(M="\xa0"),c+=M,d=" "==M}return c}(n,t.trailingSpace):n,se=t.cm.state.specialChars,ue=!1;if(se.test(n)){be=document.createDocumentFragment();for(var Ee=0;;){se.lastIndex=Ee;var Qe=se.exec(n),Be=Qe?Qe.index-Ee:n.length-Ee;if(Be){var Ye=document.createTextNode(re.slice(Ee,Ee+Be));m&&e<9?be.appendChild(ee("span",[Ye])):be.appendChild(Ye),t.map.push(t.pos,t.pos+Be,Ye),t.col+=Be,t.pos+=Be}if(!Qe)break;Ee+=Be+1;var tt=void 0;if("\t"==Qe[0]){var st=t.cm.options.tabSize,ut=st-t.col%st;(tt=be.appendChild(ee("span",He(ut),"cm-tab"))).setAttribute("role","presentation"),tt.setAttribute("cm-text","\t"),t.col+=ut}else"\r"==Qe[0]||"\n"==Qe[0]?((tt=be.appendChild(ee("span","\r"==Qe[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",Qe[0]),t.col+=1):((tt=t.cm.options.specialCharPlaceholder(Qe[0])).setAttribute("cm-text",Qe[0]),m&&e<9?be.appendChild(ee("span",[tt])):be.appendChild(tt),t.col+=1);t.map.push(t.pos,t.pos+1,tt),t.pos++}}else t.col+=n.length,be=document.createTextNode(re),t.map.push(t.pos,t.pos+n.length,be),m&&e<9&&(ue=!0),t.pos+=n.length;if(t.trailingSpace=32==re.charCodeAt(n.length-1),d||c||w||ue||M||K){var pt=d||"";c&&(pt+=c),w&&(pt+=w);var ft=ee("span",[be],pt,M);if(K)for(var gt in K)K.hasOwnProperty(gt)&&"style"!=gt&&"class"!=gt&&ft.setAttribute(gt,K[gt]);return t.content.appendChild(ft)}t.content.appendChild(be)}}function Gu(t,n){return function(d,c,w,M,K,re,se){w=w?w+" cm-force-border":"cm-force-border";for(var ue=d.pos,be=ue+c.length;;){for(var Ee=void 0,Qe=0;Qe<n.length&&!((Ee=n[Qe]).to>ue&&Ee.from<=ue);Qe++);if(Ee.to>=be)return t(d,c,w,M,K,re,se);t(d,c.slice(0,Ee.to-ue),w,M,null,re,se),M=null,c=c.slice(Ee.to-ue),ue=Ee.to}}}function Mn(t,n,d,c){var w=!c&&d.widgetNode;w&&t.map.push(t.pos,t.pos+n,w),!c&&t.cm.display.input.needsContentAttribute&&(w||(w=t.content.appendChild(document.createElement("span"))),w.setAttribute("cm-marker",d.id)),w&&(t.cm.display.input.setUneditable(w),t.content.appendChild(w)),t.pos+=n,t.trailingSpace=!1}function xs(t,n,d){var c=t.markedSpans,w=t.text,M=0;if(c)for(var Ee,Qe,Ye,tt,st,ut,pt,re=w.length,se=0,ue=1,be="",Be=0;;){if(Be==se){Ye=tt=st=Qe="",pt=null,ut=null,Be=1/0;for(var ft=[],gt=void 0,wt=0;wt<c.length;++wt){var xt=c[wt],Et=xt.marker;if("bookmark"==Et.type&&xt.from==se&&Et.widgetNode)ft.push(Et);else if(xt.from<=se&&(null==xt.to||xt.to>se||Et.collapsed&&xt.to==se&&xt.from==se)){if(null!=xt.to&&xt.to!=se&&Be>xt.to&&(Be=xt.to,tt=""),Et.className&&(Ye+=" "+Et.className),Et.css&&(Qe=(Qe?Qe+";":"")+Et.css),Et.startStyle&&xt.from==se&&(st+=" "+Et.startStyle),Et.endStyle&&xt.to==Be&&(gt||(gt=[])).push(Et.endStyle,xt.to),Et.title&&((pt||(pt={})).title=Et.title),Et.attributes)for(var Qt in Et.attributes)(pt||(pt={}))[Qt]=Et.attributes[Qt];Et.collapsed&&(!ut||ys(ut.marker,Et)<0)&&(ut=xt)}else xt.from>se&&Be>xt.from&&(Be=xt.from)}if(gt)for(var sr=0;sr<gt.length;sr+=2)gt[sr+1]==Be&&(tt+=" "+gt[sr]);if(!ut||ut.from==se)for(var Gt=0;Gt<ft.length;++Gt)Mn(n,0,ft[Gt]);if(ut&&(ut.from||0)==se){if(Mn(n,(null==ut.to?re+1:ut.to)-se,ut.marker,null==ut.from),null==ut.to)return;ut.to==se&&(ut=!1)}}if(se>=re)break;for(var Fr=Math.min(re,Be);;){if(be){var wr=se+be.length;if(!ut){var Jt=wr>Fr?be.slice(0,Fr-se):be;n.addToken(n,Jt,Ee?Ee+Ye:Ye,st,se+Jt.length==Be?tt:"",Qe,pt)}if(wr>=Fr){be=be.slice(Fr-se),se=Fr;break}se=wr,st=""}be=w.slice(M,M=d[ue++]),Ee=Wa(d[ue++],n.cm.options)}}else for(var K=1;K<d.length;K+=2)n.addToken(n,w.slice(M,M=d[K]),Wa(d[K+1],n.cm.options))}function Bn(t,n,d){this.line=n,this.rest=function sn(t){for(var n,d;n=jn(t);)t=n.find(1,!0).line,(d||(d=[])).push(t);return d}(n),this.size=this.rest?Bt(We(this.rest))-d+1:1,this.node=this.text=null,this.hidden=pn(t,n)}function ui(t,n,d){for(var w,c=[],M=n;M<d;M=w){var K=new Bn(t.doc,bt(t.doc,M),M);w=M+K.size,c.push(K)}return c}var fi=null;var ci=null;function nr(t,n){var d=Ve(t,n);if(d.length){var w,c=Array.prototype.slice.call(arguments,2);fi?w=fi.delayedCallbacks:ci?w=ci:(w=ci=[],setTimeout(zu,0));for(var M=function(re){w.push(function(){return d[re].apply(null,c)})},K=0;K<d.length;++K)M(K)}}function zu(){var t=ci;ci=null;for(var n=0;n<t.length;++n)t[n]()}function Va(t,n,d,c){for(var w=0;w<n.changes.length;w++){var M=n.changes[w];"text"==M?Xu(t,n):"gutter"==M?Ka(t,n,d,c):"class"==M?ks(t,n):"widget"==M&&To(t,n,c)}n.changes=null}function hi(t){return t.node==t.text&&(t.node=ee("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),m&&e<8&&(t.node.style.zIndex=2)),t.node}function ws(t,n){var d=t.display.externalMeasured;return d&&d.line==n.line?(t.display.externalMeasured=null,n.measure=d.measure,d.built):za(t,n)}function Xu(t,n){var d=n.text.className,c=ws(t,n);n.text==n.node&&(n.node=c.pre),n.text.parentNode.replaceChild(c.pre,n.text),n.text=c.pre,c.bgClass!=n.bgClass||c.textClass!=n.textClass?(n.bgClass=c.bgClass,n.textClass=c.textClass,ks(t,n)):d&&(n.text.className=d)}function ks(t,n){(function qu(t,n){var d=n.bgClass?n.bgClass+" "+(n.line.bgClass||""):n.line.bgClass;if(d&&(d+=" CodeMirror-linebackground"),n.background)d?n.background.className=d:(n.background.parentNode.removeChild(n.background),n.background=null);else if(d){var c=hi(n);n.background=c.insertBefore(ee("div",null,d),c.firstChild),t.display.input.setUneditable(n.background)}})(t,n),n.line.wrapClass?hi(n).className=n.line.wrapClass:n.node!=n.text&&(n.node.className="");var d=n.textClass?n.textClass+" "+(n.line.textClass||""):n.line.textClass;n.text.className=d||""}function Ka(t,n,d,c){if(n.gutter&&(n.node.removeChild(n.gutter),n.gutter=null),n.gutterBackground&&(n.node.removeChild(n.gutterBackground),n.gutterBackground=null),n.line.gutterClass){var w=hi(n);n.gutterBackground=ee("div",null,"CodeMirror-gutter-background "+n.line.gutterClass,"left: "+(t.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px; width: "+c.gutterTotalWidth+"px"),t.display.input.setUneditable(n.gutterBackground),w.insertBefore(n.gutterBackground,n.text)}var M=n.line.gutterMarkers;if(t.options.lineNumbers||M){var K=hi(n),re=n.gutter=ee("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px");if(re.setAttribute("aria-hidden","true"),t.display.input.setUneditable(re),K.insertBefore(re,n.text),n.line.gutterClass&&(re.className+=" "+n.line.gutterClass),t.options.lineNumbers&&(!M||!M["CodeMirror-linenumbers"])&&(n.lineNumber=re.appendChild(ee("div",wo(t.options,d),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+c.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),M)for(var se=0;se<t.display.gutterSpecs.length;++se){var ue=t.display.gutterSpecs[se].className,be=M.hasOwnProperty(ue)&&M[ue];be&&re.appendChild(ee("div",[be],"CodeMirror-gutter-elt","left: "+c.gutterLeft[ue]+"px; width: "+c.gutterWidth[ue]+"px"))}}}function To(t,n,d){n.alignable&&(n.alignable=null);for(var c=V("CodeMirror-linewidget"),w=n.node.firstChild,M=void 0;w;w=M)M=w.nextSibling,c.test(w.className)&&n.node.removeChild(w);zi(t,n,d)}function Ya(t,n,d,c){var w=ws(t,n);return n.text=n.node=w.pre,w.bgClass&&(n.bgClass=w.bgClass),w.textClass&&(n.textClass=w.textClass),ks(t,n),Ka(t,n,d,c),zi(t,n,c),n.node}function zi(t,n,d){if(Cs(t,n.line,n,d,!0),n.rest)for(var c=0;c<n.rest.length;c++)Cs(t,n.rest[c],n,d,!1)}function Cs(t,n,d,c,w){if(n.widgets)for(var M=hi(d),K=0,re=n.widgets;K<re.length;++K){var se=re[K],ue=ee("div",[se.node],"CodeMirror-linewidget"+(se.className?" "+se.className:""));se.handleMouseEvents||ue.setAttribute("cm-ignore-events","true"),Lo(se,ue,d,c),t.display.input.setUneditable(ue),w&&se.above?M.insertBefore(ue,d.gutter||d.text):M.appendChild(ue),nr(se,"redraw")}}function Lo(t,n,d,c){if(t.noHScroll){(d.alignable||(d.alignable=[])).push(n);var w=c.wrapperWidth;n.style.left=c.fixedPos+"px",t.coverGutter||(w-=c.gutterTotalWidth,n.style.paddingLeft=c.gutterTotalWidth+"px"),n.style.width=w+"px"}t.coverGutter&&(n.style.zIndex=5,n.style.position="relative",t.noHScroll||(n.style.marginLeft=-c.gutterTotalWidth+"px"))}function pi(t){if(null!=t.height)return t.height;var n=t.doc.cm;if(!n)return 0;if(!oe(document.body,t.node)){var d="position: relative;";t.coverGutter&&(d+="margin-left: -"+n.display.gutters.offsetWidth+"px;"),t.noHScroll&&(d+="width: "+n.display.wrapper.clientWidth+"px;"),Z(n.display.measure,ee("div",[t.node],null,d))}return t.height=t.node.parentNode.offsetHeight}function Nr(t,n){for(var d=Nn(n);d!=t.wrapper;d=d.parentNode)if(!d||1==d.nodeType&&"true"==d.getAttribute("cm-ignore-events")||d.parentNode==t.sizer&&d!=t.mover)return!0}function qi(t){return t.lineSpace.offsetTop}function _s(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Za(t){if(t.cachedPaddingH)return t.cachedPaddingH;var n=Z(t.measure,ee("pre","x","CodeMirror-line-like")),d=window.getComputedStyle?window.getComputedStyle(n):n.currentStyle,c={left:parseInt(d.paddingLeft),right:parseInt(d.paddingRight)};return!isNaN(c.left)&&!isNaN(c.right)&&(t.cachedPaddingH=c),c}function yr(t){return 50-t.display.nativeBarWidth}function an(t){return t.display.scroller.clientWidth-yr(t)-t.display.barWidth}function dn(t){return t.display.scroller.clientHeight-yr(t)-t.display.barHeight}function $a(t,n,d){if(t.line==n)return{map:t.measure.map,cache:t.measure.cache};if(t.rest){for(var c=0;c<t.rest.length;c++)if(t.rest[c]==n)return{map:t.measure.maps[c],cache:t.measure.caches[c]};for(var w=0;w<t.rest.length;w++)if(Bt(t.rest[w])>d)return{map:t.measure.maps[w],cache:t.measure.caches[w],before:!0}}}function el(t,n,d,c){return Jr(t,Pn(t,n),d,c)}function As(t,n){if(n>=t.display.viewFrom&&n<t.display.viewTo)return t.display.view[Hn(t,n)];var d=t.display.externalMeasured;return d&&n>=d.lineN&&n<d.lineN+d.size?d:void 0}function Pn(t,n){var d=Bt(n),c=As(t,d);c&&!c.text?c=null:c&&c.changes&&(Va(t,c,d,No(t)),t.curOp.forceUpdate=!0),c||(c=function Ju(t,n){var d=Bt(n=Dr(n)),c=t.display.externalMeasured=new Bn(t.doc,n,d);c.lineN=d;var w=c.built=za(t,c);return c.text=w.pre,Z(t.display.lineMeasure,w.pre),c}(t,n));var w=$a(c,n,d);return{line:n,view:c,rect:null,map:w.map,cache:w.cache,before:w.before,hasHeights:!1}}function Jr(t,n,d,c,w){n.before&&(d=-1);var K,M=d+(c||"");return n.cache.hasOwnProperty(M)?K=n.cache[M]:(n.rect||(n.rect=n.view.text.getBoundingClientRect()),n.hasHeights||(function Ss(t,n,d){var c=t.options.lineWrapping,w=c&&an(t);if(!n.measure.heights||c&&n.measure.width!=w){var M=n.measure.heights=[];if(c){n.measure.width=w;for(var K=n.text.firstChild.getClientRects(),re=0;re<K.length-1;re++){var se=K[re],ue=K[re+1];Math.abs(se.bottom-ue.bottom)>2&&M.push((se.bottom+ue.top)/2-d.top)}}M.push(d.bottom-d.top)}}(t,n.view,n.rect),n.hasHeights=!0),K=function Ku(t,n,d,c){var ue,w=tl(n.map,d,c),M=w.node,K=w.start,re=w.end,se=w.collapse;if(3==M.nodeType){for(var be=0;be<4;be++){for(;K&&he(n.line.text.charAt(w.coverStart+K));)--K;for(;w.coverStart+re<w.coverEnd&&he(n.line.text.charAt(w.coverStart+re));)++re;if((ue=m&&e<9&&0==K&&re==w.coverEnd-w.coverStart?M.parentNode.getBoundingClientRect():Vu(te(M,K,re).getClientRects(),c)).left||ue.right||0==K)break;re=K,K-=1,se="right"}m&&e<11&&(ue=function rl(t,n){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function mo(t){if(null!=cn)return cn;var n=Z(t,ee("span","x")),d=n.getBoundingClientRect(),c=te(n,0,1).getBoundingClientRect();return cn=Math.abs(d.left-c.left)>1}(t))return n;var d=screen.logicalXDPI/screen.deviceXDPI,c=screen.logicalYDPI/screen.deviceYDPI;return{left:n.left*d,right:n.right*d,top:n.top*c,bottom:n.bottom*c}}(t.display.measure,ue))}else{var Ee;K>0&&(se=c="right"),ue=t.options.lineWrapping&&(Ee=M.getClientRects()).length>1?Ee["right"==c?Ee.length-1:0]:M.getBoundingClientRect()}if(m&&e<9&&!K&&(!ue||!ue.left&&!ue.right)){var Qe=M.parentNode.getClientRects()[0];ue=Qe?{left:Qe.left,right:Qe.left+vi(t.display),top:Qe.top,bottom:Qe.bottom}:Fs}for(var Be=ue.top-n.rect.top,Ye=ue.bottom-n.rect.top,tt=(Be+Ye)/2,st=n.view.measure.heights,ut=0;ut<st.length-1&&!(tt<st[ut]);ut++);var pt=ut?st[ut-1]:0,ft=st[ut],gt={left:("right"==se?ue.right:ue.left)-n.rect.left,right:("left"==se?ue.left:ue.right)-n.rect.left,top:pt,bottom:ft};return!ue.left&&!ue.right&&(gt.bogus=!0),t.options.singleCursorHeightPerLine||(gt.rtop=Be,gt.rbottom=Ye),gt}(t,n,d,c),K.bogus||(n.cache[M]=K)),{left:K.left,right:K.right,top:w?K.rtop:K.top,bottom:w?K.rbottom:K.bottom}}var Un,Fs={left:0,right:0,top:0,bottom:0};function tl(t,n,d){for(var c,w,M,K,re,se,ue=0;ue<t.length;ue+=3)if(re=t[ue],se=t[ue+1],n<re?(w=0,M=1,K="left"):n<se?M=(w=n-re)+1:(ue==t.length-3||n==se&&t[ue+3]>n)&&(w=(M=se-re)-1,n>=se&&(K="right")),null!=w){if(c=t[ue+2],re==se&&d==(c.insertLeft?"left":"right")&&(K=d),"left"==d&&0==w)for(;ue&&t[ue-2]==t[ue-3]&&t[ue-1].insertLeft;)c=t[2+(ue-=3)],K="left";if("right"==d&&w==se-re)for(;ue<t.length-3&&t[ue+3]==t[ue+4]&&!t[ue+5].insertLeft;)c=t[(ue+=3)+2],K="right";break}return{node:c,start:w,end:M,collapse:K,coverStart:re,coverEnd:se}}function Vu(t,n){var d=Fs;if("left"==n)for(var c=0;c<t.length&&(d=t[c]).left==d.right;c++);else for(var w=t.length-1;w>=0&&(d=t[w]).left==d.right;w--);return d}function nl(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var n=0;n<t.rest.length;n++)t.measure.caches[n]={}}function il(t){t.display.externalMeasure=null,R(t.display.lineMeasure);for(var n=0;n<t.display.view.length;n++)nl(t.display.view[n])}function di(t){il(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function ol(){return l&&A?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Es(){return l&&A?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ts(t){var d=Dr(t).widgets,c=0;if(d)for(var w=0;w<d.length;++w)d[w].above&&(c+=pi(d[w]));return c}function Io(t,n,d,c,w){if(!w){var M=Ts(n);d.top+=M,d.bottom+=M}if("line"==c)return d;c||(c="local");var K=Xr(n);if("local"==c?K+=qi(t.display):K-=t.display.viewOffset,"page"==c||"window"==c){var re=t.display.lineSpace.getBoundingClientRect();K+=re.top+("window"==c?0:Es());var se=re.left+("window"==c?0:ol());d.left+=se,d.right+=se}return d.top+=K,d.bottom+=K,d}function sl(t,n,d){if("div"==d)return n;var c=n.left,w=n.top;if("page"==d)c-=ol(),w-=Es();else if("local"==d||!d){var M=t.display.sizer.getBoundingClientRect();c+=M.left,w+=M.top}var K=t.display.lineSpace.getBoundingClientRect();return{left:c-K.left,top:w-K.top}}function ln(t,n,d,c,w){return c||(c=bt(t.doc,n.line)),Io(t,c,el(t,c,n.ch,w),d)}function Lr(t,n,d,c,w,M){function K(Ye,tt){var st=Jr(t,w,Ye,tt?"right":"left",M);return tt?st.left=st.right:st.right=st.left,Io(t,c,st,d)}c=c||bt(t.doc,n.line),w||(w=Pn(t,c));var re=Ge(c,t.doc.direction),se=n.ch,ue=n.sticky;if(se>=c.text.length?(se=c.text.length,ue="before"):se<=0&&(se=0,ue="after"),!re)return K("before"==ue?se-1:se,"before"==ue);function be(Ye,tt,st){return K(st?Ye-1:Ye,1==re[tt].level!=st)}var Ee=Oe(re,se,ue),Qe=Ce,Be=be(se,Ee,"before"==ue);return null!=Qe&&(Be.other=be(se,Qe,"before"!=ue)),Be}function Qn(t,n){var d=0;n=St(t.doc,n),t.options.lineWrapping||(d=vi(t.display)*n.ch);var c=bt(t.doc,n.line),w=Xr(c)+qi(t.display);return{left:d,right:d,top:w,bottom:w+c.height}}function Xi(t,n,d,c,w){var M=ot(t,n,d);return M.xRel=w,c&&(M.outside=c),M}function Ls(t,n,d){var c=t.doc;if((d+=t.display.viewOffset)<0)return Xi(c.first,0,null,-1,-1);var w=Rn(c,d),M=c.first+c.size-1;if(w>M)return Xi(c.first+c.size-1,bt(c,M).text.length,null,1,1);n<0&&(n=0);for(var K=bt(c,w);;){var re=ll(t,K,w,n,d),se=Pa(K,re.ch+(re.xRel>0||re.outside>0?1:0));if(!se)return re;var ue=se.find(1);if(ue.line==w)return ue;K=bt(c,w=ue.line)}}function al(t,n,d,c){c-=Ts(n);var w=n.text.length,M=me(function(K){return Jr(t,d,K-1).bottom<=c},w,0);return{begin:M,end:w=me(function(K){return Jr(t,d,K).top>c},M,w)}}function Is(t,n,d,c){return d||(d=Pn(t,n)),al(t,n,d,Io(t,n,Jr(t,d,c),"line").top)}function Ns(t,n,d,c){return!(t.bottom<=d)&&(t.top>d||(c?t.left:t.right)>n)}function ll(t,n,d,c,w){w-=Xr(n);var M=Pn(t,n),K=Ts(n),re=0,se=n.text.length,ue=!0,be=Ge(n,t.doc.direction);if(be){var Ee=(t.options.lineWrapping?Zu:Yu)(t,n,d,M,be,c,w);re=(ue=1!=Ee.level)?Ee.from:Ee.to-1,se=ue?Ee.to:Ee.from-1}var tt,st,Qe=null,Be=null,Ye=me(function(wt){var xt=Jr(t,M,wt);return xt.top+=K,xt.bottom+=K,!!Ns(xt,c,w,!1)&&(xt.top<=w&&xt.left<=c&&(Qe=wt,Be=xt),!0)},re,se),ut=!1;if(Be){var pt=c-Be.left<Be.right-c,ft=pt==ue;Ye=Qe+(ft?0:1),st=ft?"after":"before",tt=pt?Be.left:Be.right}else{!ue&&(Ye==se||Ye==re)&&Ye++,st=0==Ye?"after":Ye==n.text.length?"before":Jr(t,M,Ye-(ue?1:0)).bottom+K<=w==ue?"after":"before";var gt=Lr(t,ot(d,Ye,st),"line",n,M);tt=gt.left,ut=w<gt.top?-1:w>=gt.bottom?1:0}return Xi(d,Ye=ve(n.text,Ye,1),st,ut,c-tt)}function Yu(t,n,d,c,w,M,K){var re=me(function(Ee){var Qe=w[Ee],Be=1!=Qe.level;return Ns(Lr(t,ot(d,Be?Qe.to:Qe.from,Be?"before":"after"),"line",n,c),M,K,!0)},0,w.length-1),se=w[re];if(re>0){var ue=1!=se.level,be=Lr(t,ot(d,ue?se.from:se.to,ue?"after":"before"),"line",n,c);Ns(be,M,K,!0)&&be.top>K&&(se=w[re-1])}return se}function Zu(t,n,d,c,w,M,K){var re=al(t,n,c,K),se=re.begin,ue=re.end;/\s/.test(n.text.charAt(ue-1))&&ue--;for(var be=null,Ee=null,Qe=0;Qe<w.length;Qe++){var Be=w[Qe];if(!(Be.from>=ue||Be.to<=se)){var tt=Jr(t,c,1!=Be.level?Math.min(ue,Be.to)-1:Math.max(se,Be.from)).right,st=tt<M?M-tt+1e9:tt-M;(!be||Ee>st)&&(be=Be,Ee=st)}}return be||(be=w[w.length-1]),be.from<se&&(be={from:se,to:be.to,level:be.level}),be.to>ue&&(be={from:be.from,to:ue,level:be.level}),be}function Gn(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Un){Un=ee("pre",null,"CodeMirror-line-like");for(var n=0;n<49;++n)Un.appendChild(document.createTextNode("x")),Un.appendChild(ee("br"));Un.appendChild(document.createTextNode("x"))}Z(t.measure,Un);var d=Un.offsetHeight/50;return d>3&&(t.cachedTextHeight=d),R(t.measure),d||1}function vi(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var n=ee("span","xxxxxxxxxx"),d=ee("pre",[n],"CodeMirror-line-like");Z(t.measure,d);var c=n.getBoundingClientRect(),w=(c.right-c.left)/10;return w>2&&(t.cachedCharWidth=w),w||10}function No(t){for(var n=t.display,d={},c={},w=n.gutters.clientLeft,M=n.gutters.firstChild,K=0;M;M=M.nextSibling,++K){var re=t.display.gutterSpecs[K].className;d[re]=M.offsetLeft+M.clientLeft+w,c[re]=M.clientWidth}return{fixedPos:Os(n),gutterTotalWidth:n.gutters.offsetWidth,gutterLeft:d,gutterWidth:c,wrapperWidth:n.wrapper.clientWidth}}function Os(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function ul(t){var n=Gn(t.display),d=t.options.lineWrapping,c=d&&Math.max(5,t.display.scroller.clientWidth/vi(t.display)-3);return function(w){if(pn(t.doc,w))return 0;var M=0;if(w.widgets)for(var K=0;K<w.widgets.length;K++)w.widgets[K].height&&(M+=w.widgets[K].height);return d?M+(Math.ceil(w.text.length/c)||1)*n:M+n}}function Rs(t){var n=t.doc,d=ul(t);n.iter(function(c){var w=d(c);w!=c.height&&qr(c,w)})}function vn(t,n,d,c){var w=t.display;if(!d&&"true"==Nn(n).getAttribute("cm-not-content"))return null;var M,K,re=w.lineSpace.getBoundingClientRect();try{M=n.clientX-re.left,K=n.clientY-re.top}catch(Ee){return null}var ue,se=Ls(t,M,K);if(c&&se.xRel>0&&(ue=bt(t.doc,se.line).text).length==se.ch){var be=de(ue,ue.length,t.options.tabSize)-ue.length;se=ot(se.line,Math.max(0,Math.round((M-Za(t.display).left)/vi(t.display))-be))}return se}function Hn(t,n){if(n>=t.display.viewTo||(n-=t.display.viewFrom)<0)return null;for(var d=t.display.view,c=0;c<d.length;c++)if((n-=d[c].size)<0)return c}function mr(t,n,d,c){null==n&&(n=t.doc.first),null==d&&(d=t.doc.first+t.doc.size),c||(c=0);var w=t.display;if(c&&d<w.viewTo&&(null==w.updateLineNumbers||w.updateLineNumbers>n)&&(w.updateLineNumbers=n),t.curOp.viewChanged=!0,n>=w.viewTo)on&&jr(t.doc,n)<w.viewTo&&zt(t);else if(d<=w.viewFrom)on&&Ua(t.doc,d+c)>w.viewFrom?zt(t):(w.viewFrom+=c,w.viewTo+=c);else if(n<=w.viewFrom&&d>=w.viewTo)zt(t);else if(n<=w.viewFrom){var M=Oo(t,d,d+c,1);M?(w.view=w.view.slice(M.index),w.viewFrom=M.lineN,w.viewTo+=c):zt(t)}else if(d>=w.viewTo){var K=Oo(t,n,n,-1);K?(w.view=w.view.slice(0,K.index),w.viewTo=K.lineN):zt(t)}else{var re=Oo(t,n,n,-1),se=Oo(t,d,d+c,1);re&&se?(w.view=w.view.slice(0,re.index).concat(ui(t,re.lineN,se.lineN)).concat(w.view.slice(se.index)),w.viewTo+=c):zt(t)}var ue=w.externalMeasured;ue&&(d<ue.lineN?ue.lineN+=c:n<ue.lineN+ue.size&&(w.externalMeasured=null))}function Wt(t,n,d){t.curOp.viewChanged=!0;var c=t.display,w=t.display.externalMeasured;if(w&&n>=w.lineN&&n<w.lineN+w.size&&(c.externalMeasured=null),!(n<c.viewFrom||n>=c.viewTo)){var M=c.view[Hn(t,n)];if(null!=M.node){var K=M.changes||(M.changes=[]);-1==Me(K,d)&&K.push(d)}}}function zt(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function Oo(t,n,d,c){var M,w=Hn(t,n),K=t.display.view;if(!on||d==t.doc.first+t.doc.size)return{index:w,lineN:d};for(var re=t.display.viewFrom,se=0;se<w;se++)re+=K[se].size;if(re!=n){if(c>0){if(w==K.length-1)return null;M=re+K[w].size-n,w++}else M=re-n;n+=M,d+=M}for(;jr(t.doc,d)!=d;){if(w==(c<0?0:K.length-1))return null;d+=c*K[w-(c<0?1:0)].size,w+=c}return{index:w,lineN:d}}function fl(t){for(var n=t.display.view,d=0,c=0;c<n.length;c++){var w=n[c];!w.hidden&&(!w.node||w.changes)&&++d}return d}function Ji(t){t.display.input.showSelection(t.display.input.prepareSelection())}function cl(t,n){void 0===n&&(n=!0);var d=t.doc,c={},w=c.cursors=document.createDocumentFragment(),M=c.selection=document.createDocumentFragment(),K=t.options.$customCursor;K&&(n=!0);for(var re=0;re<d.sel.ranges.length;re++)if(n||re!=d.sel.primIndex){var se=d.sel.ranges[re];if(!(se.from().line>=t.display.viewTo||se.to().line<t.display.viewFrom)){var ue=se.empty();if(K){var be=K(t,se);be&&Ds(t,be,w)}else(ue||t.options.showCursorWhenSelecting)&&Ds(t,se.head,w);ue||ef(t,se,M)}}return c}function Ds(t,n,d){var c=Lr(t,n,"div",null,null,!t.options.singleCursorHeightPerLine),w=d.appendChild(ee("div","\xa0","CodeMirror-cursor"));if(w.style.left=c.left+"px",w.style.top=c.top+"px",w.style.height=Math.max(0,c.bottom-c.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var M=ln(t,n,"div",null,null),K=M.right-M.left;w.style.width=(K>0?K:t.defaultCharWidth())+"px"}if(c.other){var re=d.appendChild(ee("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));re.style.display="",re.style.left=c.other.left+"px",re.style.top=c.other.top+"px",re.style.height=.85*(c.other.bottom-c.other.top)+"px"}}function gi(t,n){return t.top-n.top||t.left-n.left}function ef(t,n,d){var c=t.display,w=t.doc,M=document.createDocumentFragment(),K=Za(t.display),re=K.left,se=Math.max(c.sizerWidth,an(t)-c.sizer.offsetLeft)-K.right,ue="ltr"==w.direction;function be(ft,gt,wt,xt){gt<0&&(gt=0),gt=Math.round(gt),xt=Math.round(xt),M.appendChild(ee("div",null,"CodeMirror-selected","position: absolute; left: "+ft+"px;\n                             top: "+gt+"px; width: "+(null==wt?se-ft:wt)+"px;\n                             height: "+(xt-gt)+"px"))}function Ee(ft,gt,wt){var Qt,sr,xt=bt(w,ft),Et=xt.text.length;function Gt(Jt,kr){return ln(t,ot(ft,Jt),"div",xt,kr)}function Fr(Jt,kr,ar){var tr=Is(t,xt,null,Jt),Zt="ltr"==kr==("after"==ar)?"left":"right";return Gt("after"==ar?tr.begin:tr.end-(/\s/.test(xt.text.charAt(tr.end-1))?2:1),Zt)[Zt]}var wr=Ge(xt,w.direction);return function _e(t,n,d,c){if(!t)return c(n,d,"ltr",0);for(var w=!1,M=0;M<t.length;++M){var K=t[M];(K.from<d&&K.to>n||n==d&&K.to==n)&&(c(Math.max(K.from,n),Math.min(K.to,d),1==K.level?"rtl":"ltr",M),w=!0)}w||c(n,d,"ltr")}(wr,gt||0,null==wt?Et:wt,function(Jt,kr,ar,tr){var Zt="ltr"==ar,Ht=Gt(Jt,Zt?"left":"right"),Cr=Gt(kr-1,Zt?"right":"left"),ni=null==gt&&0==Jt,En=null==wt&&kr==Et,cr=0==tr,$r=!wr||tr==wr.length-1;if(Cr.top-Ht.top<=3){var da=(ue?En:ni)&&$r,en=(ue?ni:En)&&cr?re:(Zt?Ht:Cr).left,ii=da?se:(Zt?Cr:Ht).right;be(en,Ht.top,ii-en,Ht.bottom)}else{var Tn,dr,Ei,ts;Zt?(Tn=ue&&ni&&cr?re:Ht.left,dr=ue?se:Fr(Jt,ar,"before"),Ei=ue?re:Fr(kr,ar,"after"),ts=ue&&En&&$r?se:Cr.right):(Tn=ue?Fr(Jt,ar,"before"):re,dr=!ue&&ni&&cr?se:Ht.right,Ei=!ue&&En&&$r?re:Cr.left,ts=ue?Fr(kr,ar,"after"):se),be(Tn,Ht.top,dr-Tn,Ht.bottom),Ht.bottom<Cr.top&&be(re,Ht.bottom,null,Cr.top),be(Ei,Cr.top,ts-Ei,Cr.bottom)}(!Qt||gi(Ht,Qt)<0)&&(Qt=Ht),gi(Cr,Qt)<0&&(Qt=Cr),(!sr||gi(Ht,sr)<0)&&(sr=Ht),gi(Cr,sr)<0&&(sr=Cr)}),{start:Qt,end:sr}}var Qe=n.from(),Be=n.to();if(Qe.line==Be.line)Ee(Qe.line,Qe.ch,Be.ch);else{var Ye=bt(w,Qe.line),tt=bt(w,Be.line),st=Dr(Ye)==Dr(tt),ut=Ee(Qe.line,Qe.ch,st?Ye.text.length+1:null).end,pt=Ee(Be.line,st?0:null,Be.ch).start;st&&(ut.top<pt.top-2?(be(ut.right,ut.top,null,ut.bottom),be(re,pt.top,pt.left,pt.bottom)):be(ut.right,ut.top,pt.left-ut.right,ut.bottom)),ut.bottom<pt.top&&be(re,ut.bottom,null,pt.top)}d.appendChild(M)}function js(t){if(t.state.focused){var n=t.display;clearInterval(n.blinker);var d=!0;n.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?n.blinker=setInterval(function(){t.hasFocus()||yi(t),n.cursorDiv.style.visibility=(d=!d)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(n.cursorDiv.style.visibility="hidden")}}function hl(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||Bs(t))}function Ms(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&yi(t))},100)}function Bs(t,n){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(dt(t,"focus",t,n),t.state.focused=!0,pe(t.display.wrapper,"CodeMirror-focused"),!t.curOp&&t.display.selForContextMenu!=t.doc.sel&&(t.display.input.reset(),o&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),js(t))}function yi(t,n){t.state.delayingBlurEvent||(t.state.focused&&(dt(t,"blur",t,n),t.state.focused=!1,W(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function Vi(t){for(var n=t.display,d=n.lineDiv.offsetTop,c=Math.max(0,n.scroller.getBoundingClientRect().top),w=n.lineDiv.getBoundingClientRect().top,M=0,K=0;K<n.view.length;K++){var re=n.view[K],se=t.options.lineWrapping,ue=void 0,be=0;if(!re.hidden){if(w+=re.line.height,m&&e<8){var Ee=re.node.offsetTop+re.node.offsetHeight;ue=Ee-d,d=Ee}else{var Qe=re.node.getBoundingClientRect();ue=Qe.bottom-Qe.top,!se&&re.text.firstChild&&(be=re.text.firstChild.getBoundingClientRect().right-Qe.left-1)}var Be=re.line.height-ue;if((Be>.005||Be<-.005)&&(w<c&&(M-=Be),qr(re.line,ue),pl(re.line),re.rest))for(var Ye=0;Ye<re.rest.length;Ye++)pl(re.rest[Ye]);if(be>t.display.sizerWidth){var tt=Math.ceil(be/vi(t.display));tt>t.display.maxLineLength&&(t.display.maxLineLength=tt,t.display.maxLine=re.line,t.display.maxLineChanged=!0)}}}Math.abs(M)>2&&(n.scroller.scrollTop+=M)}function pl(t){if(t.widgets)for(var n=0;n<t.widgets.length;++n){var d=t.widgets[n],c=d.node.parentNode;c&&(d.height=c.offsetHeight)}}function Ki(t,n,d){var c=d&&null!=d.top?Math.max(0,d.top):t.scroller.scrollTop;c=Math.floor(c-qi(t));var w=d&&null!=d.bottom?d.bottom:c+t.wrapper.clientHeight,M=Rn(n,c),K=Rn(n,w);if(d&&d.ensure){var re=d.ensure.from.line,se=d.ensure.to.line;re<M?(M=re,K=Rn(n,Xr(bt(n,re))+t.wrapper.clientHeight)):Math.min(se,n.lastLine())>=K&&(M=Rn(n,Xr(bt(n,se))-t.wrapper.clientHeight),K=se)}return{from:M,to:Math.max(K,M+1)}}function Ps(t,n){var d=t.display,c=Gn(t.display);n.top<0&&(n.top=0);var w=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:d.scroller.scrollTop,M=dn(t),K={};n.bottom-n.top>M&&(n.bottom=n.top+M);var re=t.doc.height+_s(d),se=n.top<c,ue=n.bottom>re-c;if(n.top<w)K.scrollTop=se?0:n.top;else if(n.bottom>w+M){var be=Math.min(n.top,(ue?re:n.bottom)-M);be!=w&&(K.scrollTop=be)}var Ee=t.options.fixedGutter?0:d.gutters.offsetWidth,Qe=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:d.scroller.scrollLeft-Ee,Be=an(t)-d.gutters.offsetWidth,Ye=n.right-n.left>Be;return Ye&&(n.right=n.left+Be),n.left<10?K.scrollLeft=0:n.left<Qe?K.scrollLeft=Math.max(0,n.left+Ee-(Ye?0:10)):n.right>Be+Qe-3&&(K.scrollLeft=n.right+(Ye?0:10)-Be),K}function Qs(t,n){null!=n&&(Ro(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+n)}function Wn(t){Ro(t);var n=t.getCursor();t.curOp.scrollToPos={from:n,to:n,margin:t.options.cursorScrollMargin}}function Yi(t,n,d){(null!=n||null!=d)&&Ro(t),null!=n&&(t.curOp.scrollLeft=n),null!=d&&(t.curOp.scrollTop=d)}function Ro(t){var n=t.curOp.scrollToPos;n&&(t.curOp.scrollToPos=null,Us(t,Qn(t,n.from),Qn(t,n.to),n.margin))}function Us(t,n,d,c){var w=Ps(t,{left:Math.min(n.left,d.left),top:Math.min(n.top,d.top)-c,right:Math.max(n.right,d.right),bottom:Math.max(n.bottom,d.bottom)+c});Yi(t,w.scrollLeft,w.scrollTop)}function Zi(t,n){Math.abs(t.doc.scrollTop-n)<2||(ce||zs(t,{top:n}),Gs(t,n,!0),ce&&zs(t),to(t,100))}function Gs(t,n,d){n=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,n)),(t.display.scroller.scrollTop!=n||d)&&(t.doc.scrollTop=n,t.display.scrollbars.setScrollTop(n),t.display.scroller.scrollTop!=n&&(t.display.scroller.scrollTop=n))}function zn(t,n,d,c){n=Math.max(0,Math.min(n,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(!(d?n==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-n)<2)||c)&&(t.doc.scrollLeft=n,$t(t),t.display.scroller.scrollLeft!=n&&(t.display.scroller.scrollLeft=n),t.display.scrollbars.setScrollLeft(n))}function $i(t){var n=t.display,d=n.gutters.offsetWidth,c=Math.round(t.doc.height+_s(t.display));return{clientHeight:n.scroller.clientHeight,viewHeight:n.wrapper.clientHeight,scrollWidth:n.scroller.scrollWidth,clientWidth:n.scroller.clientWidth,viewWidth:n.wrapper.clientWidth,barLeft:t.options.fixedGutter?d:0,docHeight:c,scrollHeight:c+yr(t)+n.barHeight,nativeBarWidth:n.nativeBarWidth,gutterWidth:d}}var qn=function(t,n,d){this.cm=d;var c=this.vert=ee("div",[ee("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),w=this.horiz=ee("div",[ee("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");c.tabIndex=w.tabIndex=-1,t(c),t(w),Xe(c,"scroll",function(){c.clientHeight&&n(c.scrollTop,"vertical")}),Xe(w,"scroll",function(){w.clientWidth&&n(w.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,m&&e<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};qn.prototype.update=function(t){var n=t.scrollWidth>t.clientWidth+1,d=t.scrollHeight>t.clientHeight+1,c=t.nativeBarWidth;if(d){this.vert.style.display="block",this.vert.style.bottom=n?c+"px":"0";var w=t.viewHeight-(n?c:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+w)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(n){this.horiz.style.display="block",this.horiz.style.right=d?c+"px":"0",this.horiz.style.left=t.barLeft+"px";var M=t.viewWidth-t.barLeft-(d?c:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+M)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==c&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:d?c:0,bottom:n?c:0}},qn.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},qn.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},qn.prototype.zeroWidthHack=function(){var t=B&&!x?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Le,this.disableVert=new Le},qn.prototype.enableZeroWidthBar=function(t,n,d){t.style.visibility="",n.set(1e3,function c(){var w=t.getBoundingClientRect();("vert"==d?document.elementFromPoint(w.right-1,(w.top+w.bottom)/2):document.elementFromPoint((w.right+w.left)/2,w.bottom-1))!=t?t.style.visibility="hidden":n.set(1e3,c)})},qn.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var gn=function(){};function Xn(t,n){n||(n=$i(t));var d=t.display.barWidth,c=t.display.barHeight;eo(t,n);for(var w=0;w<4&&d!=t.display.barWidth||c!=t.display.barHeight;w++)d!=t.display.barWidth&&t.options.lineWrapping&&Vi(t),eo(t,$i(t)),d=t.display.barWidth,c=t.display.barHeight}function eo(t,n){var d=t.display,c=d.scrollbars.update(n);d.sizer.style.paddingRight=(d.barWidth=c.right)+"px",d.sizer.style.paddingBottom=(d.barHeight=c.bottom)+"px",d.heightForcer.style.borderBottom=c.bottom+"px solid transparent",c.right&&c.bottom?(d.scrollbarFiller.style.display="block",d.scrollbarFiller.style.height=c.bottom+"px",d.scrollbarFiller.style.width=c.right+"px"):d.scrollbarFiller.style.display="",c.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(d.gutterFiller.style.display="block",d.gutterFiller.style.height=c.bottom+"px",d.gutterFiller.style.width=n.gutterWidth+"px"):d.gutterFiller.style.display=""}gn.prototype.update=function(){return{bottom:0,right:0}},gn.prototype.setScrollLeft=function(){},gn.prototype.setScrollTop=function(){},gn.prototype.clear=function(){};var Hs={native:qn,null:gn};function dl(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&W(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Hs[t.options.scrollbarStyle](function(n){t.display.wrapper.insertBefore(n,t.display.scrollbarFiller),Xe(n,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),n.setAttribute("cm-not-content","true")},function(n,d){"horizontal"==d?zn(t,n):Zi(t,n)},t),t.display.scrollbars.addClass&&pe(t.display.wrapper,t.display.scrollbars.addClass)}var sf=0;function yn(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++sf,markArrays:null},function Hu(t){fi?fi.ops.push(t):t.ownsGroup=fi={ops:[t],delayedCallbacks:[]}}(t.curOp)}function Jn(t){var n=t.curOp;n&&function Wu(t,n){var d=t.ownsGroup;if(d)try{!function Ja(t){var n=t.delayedCallbacks,d=0;do{for(;d<n.length;d++)n[d].call(null);for(var c=0;c<t.ops.length;c++){var w=t.ops[c];if(w.cursorActivityHandlers)for(;w.cursorActivityCalled<w.cursorActivityHandlers.length;)w.cursorActivityHandlers[w.cursorActivityCalled++].call(null,w.cm)}}while(d<n.length)}(d)}finally{fi=null,n(d)}}(n,function(d){for(var c=0;c<d.ops.length;c++)d.ops[c].cm.curOp=null;!function vl(t){for(var n=t.ops,d=0;d<n.length;d++)af(n[d]);for(var c=0;c<n.length;c++)lf(n[c]);for(var w=0;w<n.length;w++)uf(n[w]);for(var M=0;M<n.length;M++)gl(n[M]);for(var K=0;K<n.length;K++)ff(n[K])}(d)})}function af(t){var n=t.cm,d=n.display;(function hf(t){var n=t.display;!n.scrollbarsClipped&&n.scroller.offsetWidth&&(n.nativeBarWidth=n.scroller.offsetWidth-n.scroller.clientWidth,n.heightForcer.style.height=yr(t)+"px",n.sizer.style.marginBottom=-n.nativeBarWidth+"px",n.sizer.style.borderRightWidth=yr(t)+"px",n.scrollbarsClipped=!0)})(n),t.updateMaxLine&&Eo(n),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<d.viewFrom||t.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&n.options.lineWrapping,t.update=t.mustUpdate&&new Do(n,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function lf(t){t.updatedDisplay=t.mustUpdate&&Ws(t.cm,t.update)}function uf(t){var n=t.cm,d=n.display;t.updatedDisplay&&Vi(n),t.barMeasure=$i(n),d.maxLineChanged&&!n.options.lineWrapping&&(t.adjustWidthTo=el(n,d.maxLine,d.maxLine.text.length).left+3,n.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(d.scroller.clientWidth,d.sizer.offsetLeft+t.adjustWidthTo+yr(n)+n.display.barWidth),t.maxScrollLeft=Math.max(0,d.sizer.offsetLeft+t.adjustWidthTo-an(n))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=d.input.prepareSelection())}function gl(t){var n=t.cm;null!=t.adjustWidthTo&&(n.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<n.doc.scrollLeft&&zn(n,Math.min(n.display.scroller.scrollLeft,t.maxScrollLeft),!0),n.display.maxLineChanged=!1);var d=t.focus&&t.focus==ie();t.preparedSelection&&n.display.input.showSelection(t.preparedSelection,d),(t.updatedDisplay||t.startHeight!=n.doc.height)&&Xn(n,t.barMeasure),t.updatedDisplay&&jo(n,t.barMeasure),t.selectionChanged&&js(n),n.state.focused&&t.updateInput&&n.display.input.reset(t.typing),d&&hl(t.cm)}function ff(t){var n=t.cm,d=n.display,c=n.doc;if(t.updatedDisplay&&yl(n,t.update),null!=d.wheelStartX&&(null!=t.scrollTop||null!=t.scrollLeft||t.scrollToPos)&&(d.wheelStartX=d.wheelStartY=null),null!=t.scrollTop&&Gs(n,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&zn(n,t.scrollLeft,!0,!0),t.scrollToPos){var w=function rf(t,n,d,c){var w;null==c&&(c=0),!t.options.lineWrapping&&n==d&&(d="before"==n.sticky?ot(n.line,n.ch+1,"before"):n,n=n.ch?ot(n.line,"before"==n.sticky?n.ch-1:n.ch,"after"):n);for(var M=0;M<5;M++){var K=!1,re=Lr(t,n),se=d&&d!=n?Lr(t,d):re,ue=Ps(t,w={left:Math.min(re.left,se.left),top:Math.min(re.top,se.top)-c,right:Math.max(re.left,se.left),bottom:Math.max(re.bottom,se.bottom)+c}),be=t.doc.scrollTop,Ee=t.doc.scrollLeft;if(null!=ue.scrollTop&&(Zi(t,ue.scrollTop),Math.abs(t.doc.scrollTop-be)>1&&(K=!0)),null!=ue.scrollLeft&&(zn(t,ue.scrollLeft),Math.abs(t.doc.scrollLeft-Ee)>1&&(K=!0)),!K)break}return w}(n,St(c,t.scrollToPos.from),St(c,t.scrollToPos.to),t.scrollToPos.margin);!function tf(t,n){if(!ht(t,"scrollCursorIntoView")){var d=t.display,c=d.sizer.getBoundingClientRect(),w=null;if(n.top+c.top<0?w=!0:n.bottom+c.top>(window.innerHeight||document.documentElement.clientHeight)&&(w=!1),null!=w&&!a){var M=ee("div","\u200b",null,"position: absolute;\n                         top: "+(n.top-d.viewOffset-qi(t.display))+"px;\n                         height: "+(n.bottom-n.top+yr(t)+d.barHeight)+"px;\n                         left: "+n.left+"px; width: "+Math.max(2,n.right-n.left)+"px;");t.display.lineSpace.appendChild(M),M.scrollIntoView(w),t.display.lineSpace.removeChild(M)}}}(n,w)}var M=t.maybeHiddenMarkers,K=t.maybeUnhiddenMarkers;if(M)for(var re=0;re<M.length;++re)M[re].lines.length||dt(M[re],"hide");if(K)for(var se=0;se<K.length;++se)K[se].lines.length&&dt(K[se],"unhide");d.wrapper.offsetHeight&&(c.scrollTop=n.display.scroller.scrollTop),t.changeObjs&&dt(n,"changes",n,t.changeObjs),t.update&&t.update.finish()}function br(t,n){if(t.curOp)return n();yn(t);try{return n()}finally{Jn(t)}}function ir(t,n){return function(){if(t.curOp)return n.apply(t,arguments);yn(t);try{return n.apply(t,arguments)}finally{Jn(t)}}}function pr(t){return function(){if(this.curOp)return t.apply(this,arguments);yn(this);try{return t.apply(this,arguments)}finally{Jn(this)}}}function or(t){return function(){var n=this.cm;if(!n||n.curOp)return t.apply(this,arguments);yn(n);try{return t.apply(this,arguments)}finally{Jn(n)}}}function to(t,n){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(n,Fe(cf,t))}function cf(t){var n=t.doc;if(!(n.highlightFrontier>=t.display.viewTo)){var d=+new Date+t.options.workTime,c=Ui(t,n.highlightFrontier),w=[];n.iter(c.line,Math.min(n.first+n.size,t.display.viewTo+500),function(M){if(c.line>=t.display.viewFrom){var K=M.styles,re=M.text.length>t.options.maxHighlightLength?Tr(n.mode,c.state):null,se=Aa(t,M,c,!0);re&&(c.state=re),M.styles=se.styles;var ue=M.styleClasses,be=se.classes;be?M.styleClasses=be:ue&&(M.styleClasses=null);for(var Ee=!K||K.length!=M.styles.length||ue!=be&&(!ue||!be||ue.bgClass!=be.bgClass||ue.textClass!=be.textClass),Qe=0;!Ee&&Qe<K.length;++Qe)Ee=K[Qe]!=M.styles[Qe];Ee&&w.push(c.line),M.stateAfter=c.save(),c.nextLine()}else M.text.length<=t.options.maxHighlightLength&&_o(t,M.text,c),M.stateAfter=c.line%5==0?c.save():null,c.nextLine();if(+new Date>d)return to(t,t.options.workDelay),!0}),n.highlightFrontier=c.line,n.modeFrontier=Math.max(n.modeFrontier,c.line),w.length&&br(t,function(){for(var M=0;M<w.length;M++)Wt(t,w[M],"text")})}}var Do=function(t,n,d){var c=t.display;this.viewport=n,this.visible=Ki(c,t.doc,n),this.editorIsHidden=!c.wrapper.offsetWidth,this.wrapperHeight=c.wrapper.clientHeight,this.wrapperWidth=c.wrapper.clientWidth,this.oldDisplayWidth=an(t),this.force=d,this.dims=No(t),this.events=[]};function Ws(t,n){var d=t.display,c=t.doc;if(n.editorIsHidden)return zt(t),!1;if(!n.force&&n.visible.from>=d.viewFrom&&n.visible.to<=d.viewTo&&(null==d.updateLineNumbers||d.updateLineNumbers>=d.viewTo)&&d.renderedView==d.view&&0==fl(t))return!1;er(t)&&(zt(t),n.dims=No(t));var w=c.first+c.size,M=Math.max(n.visible.from-t.options.viewportMargin,c.first),K=Math.min(w,n.visible.to+t.options.viewportMargin);d.viewFrom<M&&M-d.viewFrom<20&&(M=Math.max(c.first,d.viewFrom)),d.viewTo>K&&d.viewTo-K<20&&(K=Math.min(w,d.viewTo)),on&&(M=jr(t.doc,M),K=Ua(t.doc,K));var re=M!=d.viewFrom||K!=d.viewTo||d.lastWrapHeight!=n.wrapperHeight||d.lastWrapWidth!=n.wrapperWidth;(function $u(t,n,d){var c=t.display;0==c.view.length||n>=c.viewTo||d<=c.viewFrom?(c.view=ui(t,n,d),c.viewFrom=n):(c.viewFrom>n?c.view=ui(t,n,c.viewFrom).concat(c.view):c.viewFrom<n&&(c.view=c.view.slice(Hn(t,n))),c.viewFrom=n,c.viewTo<d?c.view=c.view.concat(ui(t,c.viewTo,d)):c.viewTo>d&&(c.view=c.view.slice(0,Hn(t,d)))),c.viewTo=d})(t,M,K),d.viewOffset=Xr(bt(t.doc,d.viewFrom)),t.display.mover.style.top=d.viewOffset+"px";var se=fl(t);if(!re&&0==se&&!n.force&&d.renderedView==d.view&&(null==d.updateLineNumbers||d.updateLineNumbers>=d.viewTo))return!1;var ue=function pf(t){if(t.hasFocus())return null;var n=ie();if(!n||!oe(t.display.lineDiv,n))return null;var d={activeElt:n};if(window.getSelection){var c=window.getSelection();c.anchorNode&&c.extend&&oe(t.display.lineDiv,c.anchorNode)&&(d.anchorNode=c.anchorNode,d.anchorOffset=c.anchorOffset,d.focusNode=c.focusNode,d.focusOffset=c.focusOffset)}return d}(t);return se>4&&(d.lineDiv.style.display="none"),function vf(t,n,d){var c=t.display,w=t.options.lineNumbers,M=c.lineDiv,K=M.firstChild;function re(Ye){var tt=Ye.nextSibling;return o&&B&&t.display.currentWheelTarget==Ye?Ye.style.display="none":Ye.parentNode.removeChild(Ye),tt}for(var se=c.view,ue=c.viewFrom,be=0;be<se.length;be++){var Ee=se[be];if(!Ee.hidden)if(Ee.node&&Ee.node.parentNode==M){for(;K!=Ee.node;)K=re(K);var Be=w&&null!=n&&n<=ue&&Ee.lineNumber;Ee.changes&&(Me(Ee.changes,"gutter")>-1&&(Be=!1),Va(t,Ee,ue,d)),Be&&(R(Ee.lineNumber),Ee.lineNumber.appendChild(document.createTextNode(wo(t.options,ue)))),K=Ee.node.nextSibling}else{var Qe=Ya(t,Ee,ue,d);M.insertBefore(Qe,K)}ue+=Ee.size}for(;K;)K=re(K)}(t,d.updateLineNumbers,n.dims),se>4&&(d.lineDiv.style.display=""),d.renderedView=d.view,function df(t){if(t&&t.activeElt&&t.activeElt!=ie()&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&oe(document.body,t.anchorNode)&&oe(document.body,t.focusNode))){var n=window.getSelection(),d=document.createRange();d.setEnd(t.anchorNode,t.anchorOffset),d.collapse(!1),n.removeAllRanges(),n.addRange(d),n.extend(t.focusNode,t.focusOffset)}}(ue),R(d.cursorDiv),R(d.selectionDiv),d.gutters.style.height=d.sizer.style.minHeight=0,re&&(d.lastWrapHeight=n.wrapperHeight,d.lastWrapWidth=n.wrapperWidth,to(t,400)),d.updateLineNumbers=null,!0}function yl(t,n){for(var d=n.viewport,c=!0;;c=!1){if(c&&t.options.lineWrapping&&n.oldDisplayWidth!=an(t))c&&(n.visible=Ki(t.display,t.doc,d));else if(d&&null!=d.top&&(d={top:Math.min(t.doc.height+_s(t.display)-dn(t),d.top)}),n.visible=Ki(t.display,t.doc,d),n.visible.from>=t.display.viewFrom&&n.visible.to<=t.display.viewTo)break;if(!Ws(t,n))break;Vi(t);var w=$i(t);Ji(t),Xn(t,w),jo(t,w),n.force=!1}n.signal(t,"update",t),(t.display.viewFrom!=t.display.reportedViewFrom||t.display.viewTo!=t.display.reportedViewTo)&&(n.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function zs(t,n){var d=new Do(t,n);if(Ws(t,d)){Vi(t),yl(t,d);var c=$i(t);Ji(t),Xn(t,c),jo(t,c),d.finish()}}function qs(t){var n=t.gutters.offsetWidth;t.sizer.style.marginLeft=n+"px",nr(t,"gutterChanged",t)}function jo(t,n){t.display.sizer.style.minHeight=n.docHeight+"px",t.display.heightForcer.style.top=n.docHeight+"px",t.display.gutters.style.height=n.docHeight+t.display.barHeight+yr(t)+"px"}function $t(t){var n=t.display,d=n.view;if(n.alignWidgets||n.gutters.firstChild&&t.options.fixedGutter){for(var c=Os(n)-n.scroller.scrollLeft+t.doc.scrollLeft,w=n.gutters.offsetWidth,M=c+"px",K=0;K<d.length;K++)if(!d[K].hidden){t.options.fixedGutter&&(d[K].gutter&&(d[K].gutter.style.left=M),d[K].gutterBackground&&(d[K].gutterBackground.style.left=M));var re=d[K].alignable;if(re)for(var se=0;se<re.length;se++)re[se].style.left=M}t.options.fixedGutter&&(n.gutters.style.left=c+w+"px")}}function er(t){if(!t.options.lineNumbers)return!1;var n=t.doc,d=wo(t.options,n.first+n.size-1),c=t.display;if(d.length!=c.lineNumChars){var w=c.measure.appendChild(ee("div",[ee("div",d)],"CodeMirror-linenumber CodeMirror-gutter-elt")),M=w.firstChild.offsetWidth,K=w.offsetWidth-M;return c.lineGutter.style.width="",c.lineNumInnerWidth=Math.max(M,c.lineGutter.offsetWidth-K)+1,c.lineNumWidth=c.lineNumInnerWidth+K,c.lineNumChars=c.lineNumInnerWidth?d.length:-1,c.lineGutter.style.width=c.lineNumWidth+"px",qs(t.display),!0}return!1}function Xs(t,n){for(var d=[],c=!1,w=0;w<t.length;w++){var M=t[w],K=null;if("string"!=typeof M&&(K=M.style,M=M.className),"CodeMirror-linenumbers"==M){if(!n)continue;c=!0}d.push({className:M,style:K})}return n&&!c&&d.push({className:"CodeMirror-linenumbers",style:null}),d}function ml(t){var n=t.gutters,d=t.gutterSpecs;R(n),t.lineGutter=null;for(var c=0;c<d.length;++c){var w=d[c],M=w.className,K=w.style,re=n.appendChild(ee("div",null,"CodeMirror-gutter "+M));K&&(re.style.cssText=K),"CodeMirror-linenumbers"==M&&(t.lineGutter=re,re.style.width=(t.lineNumWidth||1)+"px")}n.style.display=d.length?"":"none",qs(t)}function ro(t){ml(t.display),mr(t),$t(t)}function gf(t,n,d,c){var w=this;this.input=d,w.scrollbarFiller=ee("div",null,"CodeMirror-scrollbar-filler"),w.scrollbarFiller.setAttribute("cm-not-content","true"),w.gutterFiller=ee("div",null,"CodeMirror-gutter-filler"),w.gutterFiller.setAttribute("cm-not-content","true"),w.lineDiv=le("div",null,"CodeMirror-code"),w.selectionDiv=ee("div",null,null,"position: relative; z-index: 1"),w.cursorDiv=ee("div",null,"CodeMirror-cursors"),w.measure=ee("div",null,"CodeMirror-measure"),w.lineMeasure=ee("div",null,"CodeMirror-measure"),w.lineSpace=le("div",[w.measure,w.lineMeasure,w.selectionDiv,w.cursorDiv,w.lineDiv],null,"position: relative; outline: none");var M=le("div",[w.lineSpace],"CodeMirror-lines");w.mover=ee("div",[M],null,"position: relative"),w.sizer=ee("div",[w.mover],"CodeMirror-sizer"),w.sizerWidth=null,w.heightForcer=ee("div",null,null,"position: absolute; height: 50px; width: 1px;"),w.gutters=ee("div",null,"CodeMirror-gutters"),w.lineGutter=null,w.scroller=ee("div",[w.sizer,w.heightForcer,w.gutters],"CodeMirror-scroll"),w.scroller.setAttribute("tabIndex","-1"),w.wrapper=ee("div",[w.scrollbarFiller,w.gutterFiller,w.scroller],"CodeMirror"),w.wrapper.setAttribute("translate","no"),m&&e<8&&(w.gutters.style.zIndex=-1,w.scroller.style.paddingRight=0),!o&&!(ce&&T)&&(w.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(w.wrapper):t(w.wrapper)),w.viewFrom=w.viewTo=n.first,w.reportedViewFrom=w.reportedViewTo=n.first,w.view=[],w.renderedView=null,w.externalMeasured=null,w.viewOffset=0,w.lastWrapHeight=w.lastWrapWidth=0,w.updateLineNumbers=null,w.nativeBarWidth=w.barHeight=w.barWidth=0,w.scrollbarsClipped=!1,w.lineNumWidth=w.lineNumInnerWidth=w.lineNumChars=null,w.alignWidgets=!1,w.cachedCharWidth=w.cachedTextHeight=w.cachedPaddingH=null,w.maxLine=null,w.maxLineLength=0,w.maxLineChanged=!1,w.wheelDX=w.wheelDY=w.wheelStartX=w.wheelStartY=null,w.shift=!1,w.selForContextMenu=null,w.activeTouch=null,w.gutterSpecs=Xs(c.gutters,c.lineNumbers),ml(w),d.init(w)}Do.prototype.signal=function(t,n){kt(t,n)&&this.events.push(arguments)},Do.prototype.finish=function(){for(var t=0;t<this.events.length;t++)dt.apply(null,this.events[t])};var Mo=0,un=null;function bl(t){var n=t.wheelDeltaX,d=t.wheelDeltaY;return null==n&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(n=t.detail),null==d&&t.detail&&t.axis==t.VERTICAL_AXIS?d=t.detail:null==d&&(d=t.wheelDelta),{x:n,y:d}}function yf(t){var n=bl(t);return n.x*=un,n.y*=un,n}function xl(t,n){l&&y>=102&&(null==t.display.chromeScrollHack?t.display.sizer.style.pointerEvents="none":clearTimeout(t.display.chromeScrollHack),t.display.chromeScrollHack=setTimeout(function(){t.display.chromeScrollHack=null,t.display.sizer.style.pointerEvents=""},100));var d=bl(n),c=d.x,w=d.y,M=un;0===n.deltaMode&&(c=n.deltaX,w=n.deltaY,M=1);var K=t.display,re=K.scroller,se=re.scrollWidth>re.clientWidth,ue=re.scrollHeight>re.clientHeight;if(c&&se||w&&ue){if(w&&B&&o)e:for(var be=n.target,Ee=K.view;be!=re;be=be.parentNode)for(var Qe=0;Qe<Ee.length;Qe++)if(Ee[Qe].node==be){t.display.currentWheelTarget=be;break e}if(c&&!ce&&!s&&null!=M)return w&&ue&&Zi(t,Math.max(0,re.scrollTop+w*M)),zn(t,Math.max(0,re.scrollLeft+c*M)),(!w||w&&ue)&&it(n),void(K.wheelStartX=null);if(w&&null!=M){var Be=w*M,Ye=t.doc.scrollTop,tt=Ye+K.wrapper.clientHeight;Be<0?Ye=Math.max(0,Ye+Be-50):tt=Math.min(t.doc.height,tt+Be+50),zs(t,{top:Ye,bottom:tt})}Mo<20&&0!==n.deltaMode&&(null==K.wheelStartX?(K.wheelStartX=re.scrollLeft,K.wheelStartY=re.scrollTop,K.wheelDX=c,K.wheelDY=w,setTimeout(function(){if(null!=K.wheelStartX){var st=re.scrollLeft-K.wheelStartX,ut=re.scrollTop-K.wheelStartY,pt=ut&&K.wheelDY&&ut/K.wheelDY||st&&K.wheelDX&&st/K.wheelDX;K.wheelStartX=K.wheelStartY=null,pt&&(un=(un*Mo+pt)/(Mo+1),++Mo)}},200)):(K.wheelDX+=c,K.wheelDY+=w))}}m?un=-.53:ce?un=15:l?un=-.7:v&&(un=-1/3);var Ir=function(t,n){this.ranges=t,this.primIndex=n};Ir.prototype.primary=function(){return this.ranges[this.primIndex]},Ir.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++){var d=this.ranges[n],c=t.ranges[n];if(!hs(d.anchor,c.anchor)||!hs(d.head,c.head))return!1}return!0},Ir.prototype.deepCopy=function(){for(var t=[],n=0;n<this.ranges.length;n++)t[n]=new jt(ps(this.ranges[n].anchor),ps(this.ranges[n].head));return new Ir(t,this.primIndex)},Ir.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},Ir.prototype.contains=function(t,n){n||(n=t);for(var d=0;d<this.ranges.length;d++){var c=this.ranges[d];if(_t(n,c.from())>=0&&_t(t,c.to())<=0)return d}return-1};var jt=function(t,n){this.anchor=t,this.head=n};function Mr(t,n,d){var c=t&&t.options.selectionsMayTouch,w=n[d];n.sort(function(Qe,Be){return _t(Qe.from(),Be.from())}),d=Me(n,w);for(var M=1;M<n.length;M++){var K=n[M],re=n[M-1],se=_t(re.to(),K.from());if(c&&!K.empty()?se>0:se>=0){var ue=Qi(re.from(),K.from()),be=ko(re.to(),K.to()),Ee=re.empty()?K.from()==K.head:re.from()==re.head;M<=d&&--d,n.splice(--M,2,new jt(Ee?be:ue,Ee?ue:be))}}return new Ir(n,d)}function mn(t,n){return new Ir([new jt(t,n||t)],0)}function bn(t){return t.text?ot(t.from.line+t.text.length-1,We(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function wl(t,n){if(_t(t,n.from)<0)return t;if(_t(t,n.to)<=0)return bn(n);var d=t.line+n.text.length-(n.to.line-n.from.line)-1,c=t.ch;return t.line==n.to.line&&(c+=bn(n).ch-n.to.ch),ot(d,c)}function Js(t,n){for(var d=[],c=0;c<t.sel.ranges.length;c++){var w=t.sel.ranges[c];d.push(new jt(wl(w.anchor,n),wl(w.head,n)))}return Mr(t.cm,d,t.sel.primIndex)}function kl(t,n,d){return t.line==n.line?ot(d.line,t.ch-n.ch+d.ch):ot(d.line+(t.line-n.line),t.ch)}function Vs(t){t.doc.mode=Mi(t.options,t.doc.modeOption),no(t)}function no(t){t.doc.iter(function(n){n.stateAfter&&(n.stateAfter=null),n.styles&&(n.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,to(t,100),t.state.modeGen++,t.curOp&&mr(t)}function Cl(t,n){return 0==n.from.ch&&0==n.to.ch&&""==We(n.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Ks(t,n,d,c){function w(pt){return d?d[pt]:null}function M(pt,ft,gt){(function Ga(t,n,d,c){t.text=n,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Ma(t),Ba(t,d);var w=c?c(t):1;w!=t.height&&qr(t,w)})(pt,ft,gt,c),nr(pt,"change",pt,n)}function K(pt,ft){for(var gt=[],wt=pt;wt<ft;++wt)gt.push(new li(ue[wt],w(wt),c));return gt}var re=n.from,se=n.to,ue=n.text,be=bt(t,re.line),Ee=bt(t,se.line),Qe=We(ue),Be=w(ue.length-1),Ye=se.line-re.line;if(n.full)t.insert(0,K(0,ue.length)),t.remove(ue.length,t.size-ue.length);else if(Cl(t,n)){var tt=K(0,ue.length-1);M(Ee,Ee.text,Be),Ye&&t.remove(re.line,Ye),tt.length&&t.insert(re.line,tt)}else if(be==Ee)if(1==ue.length)M(be,be.text.slice(0,re.ch)+Qe+be.text.slice(se.ch),Be);else{var st=K(1,ue.length-1);st.push(new li(Qe+be.text.slice(se.ch),Be,c)),M(be,be.text.slice(0,re.ch)+ue[0],w(0)),t.insert(re.line+1,st)}else if(1==ue.length)M(be,be.text.slice(0,re.ch)+ue[0]+Ee.text.slice(se.ch),w(0)),t.remove(re.line+1,Ye);else{M(be,be.text.slice(0,re.ch)+ue[0],w(0)),M(Ee,Qe+Ee.text.slice(se.ch),Be);var ut=K(1,ue.length-1);Ye>1&&t.remove(re.line+1,Ye-1),t.insert(re.line+1,ut)}nr(t,"change",t,n)}function Br(t,n,d){!function c(w,M,K){if(w.linked)for(var re=0;re<w.linked.length;++re){var se=w.linked[re];if(se.doc!=M){var ue=K&&se.sharedHist;d&&!ue||(n(se.doc,ue),c(se.doc,w,ue))}}}(t,null,!0)}function io(t,n){if(n.cm)throw new Error("This document is already in use.");t.doc=n,n.cm=t,Rs(t),Vs(t),Ys(t),t.options.direction=n.direction,t.options.lineWrapping||Eo(t),t.options.mode=n.modeOption,mr(t)}function Ys(t){("rtl"==t.doc.direction?pe:W)(t.display.lineDiv,"CodeMirror-rtl")}function Bo(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function Zs(t,n){var d={from:ps(n.from),to:bn(n),text:hn(t,n.from,n.to)};return Al(t,d,n.from.line,n.to.line+1),Br(t,function(c){return Al(c,d,n.from.line,n.to.line+1)},!0),d}function _l(t){for(;t.length;){if(!We(t).ranges)break;t.pop()}}function Sl(t,n,d,c){var w=t.history;w.undone.length=0;var K,re,M=+new Date;if((w.lastOp==c||w.lastOrigin==n.origin&&n.origin&&("+"==n.origin.charAt(0)&&w.lastModTime>M-(t.cm?t.cm.options.historyEventDelay:500)||"*"==n.origin.charAt(0)))&&(K=function xf(t,n){return n?(_l(t.done),We(t.done)):t.done.length&&!We(t.done).ranges?We(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),We(t.done)):void 0}(w,w.lastOp==c)))re=We(K.changes),0==_t(n.from,n.to)&&0==_t(n.from,re.to)?re.to=bn(n):K.changes.push(Zs(t,n));else{var se=We(w.done);for((!se||!se.ranges)&&Po(t.sel,w.done),K={changes:[Zs(t,n)],generation:w.generation},w.done.push(K);w.done.length>w.undoDepth;)w.done.shift(),w.done[0].ranges||w.done.shift()}w.done.push(d),w.generation=++w.maxGeneration,w.lastModTime=w.lastSelTime=M,w.lastOp=w.lastSelOp=c,w.lastOrigin=w.lastSelOrigin=n.origin,re||dt(t,"historyAdded")}function kf(t,n,d,c){var w=t.history,M=c&&c.origin;d==w.lastSelOp||M&&w.lastSelOrigin==M&&(w.lastModTime==w.lastSelTime&&w.lastOrigin==M||function wf(t,n,d,c){var w=n.charAt(0);return"*"==w||"+"==w&&d.ranges.length==c.ranges.length&&d.somethingSelected()==c.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,M,We(w.done),n))?w.done[w.done.length-1]=n:Po(n,w.done),w.lastSelTime=+new Date,w.lastSelOrigin=M,w.lastSelOp=d,c&&!1!==c.clearRedo&&_l(w.undone)}function Po(t,n){var d=We(n);d&&d.ranges&&d.equals(t)||n.push(t)}function Al(t,n,d,c){var w=n["spans_"+t.id],M=0;t.iter(Math.max(t.first,d),Math.min(t.first+t.size,c),function(K){K.markedSpans&&((w||(w=n["spans_"+t.id]={}))[M]=K.markedSpans),++M})}function Cf(t){if(!t)return null;for(var n,d=0;d<t.length;++d)t[d].marker.explicitlyCleared?n||(n=t.slice(0,d)):n&&n.push(t[d]);return n?n.length?n:null:t}function oo(t,n){var d=function Qo(t,n){var d=n["spans_"+t.id];if(!d)return null;for(var c=[],w=0;w<n.text.length;++w)c.push(Cf(d[w]));return c}(t,n),c=gs(t,n);if(!d)return c;if(!c)return d;for(var w=0;w<d.length;++w){var M=d[w],K=c[w];if(M&&K)e:for(var re=0;re<K.length;++re){for(var se=K[re],ue=0;ue<M.length;++ue)if(M[ue].marker==se.marker)continue e;M.push(se)}else K&&(d[w]=K)}return d}function mi(t,n,d){for(var c=[],w=0;w<t.length;++w){var M=t[w];if(M.ranges)c.push(d?Ir.prototype.deepCopy.call(M):M);else{var K=M.changes,re=[];c.push({changes:re});for(var se=0;se<K.length;++se){var ue=K[se],be=void 0;if(re.push({from:ue.from,to:ue.to,text:ue.text}),n)for(var Ee in ue)(be=Ee.match(/^spans_(\d+)$/))&&Me(n,Number(be[1]))>-1&&(We(re)[Ee]=ue[Ee],delete ue[Ee])}}}return c}function $s(t,n,d,c){if(c){var w=t.anchor;if(d){var M=_t(n,w)<0;M!=_t(d,w)<0?(w=n,n=d):M!=_t(n,d)<0&&(n=d)}return new jt(w,n)}return new jt(d||n,n)}function Vr(t,n,d,c,w){null==w&&(w=t.cm&&(t.cm.display.shift||t.extend)),fr(t,new Ir([$s(t.sel.primary(),n,d,w)],0),c)}function xn(t,n,d){for(var c=[],w=t.cm&&(t.cm.display.shift||t.extend),M=0;M<t.sel.ranges.length;M++)c[M]=$s(t.sel.ranges[M],n[M],null,w);fr(t,Mr(t.cm,c,t.sel.primIndex),d)}function ea(t,n,d,c){var w=t.sel.ranges.slice(0);w[n]=d,fr(t,Mr(t.cm,w,t.sel.primIndex),c)}function Fl(t,n,d,c){fr(t,mn(n,d),c)}function El(t,n,d){var c=t.history.done,w=We(c);w&&w.ranges?(c[c.length-1]=n,so(t,n,d)):fr(t,n,d)}function fr(t,n,d){so(t,n,d),kf(t,t.sel,t.cm?t.cm.curOp.id:NaN,d)}function so(t,n,d){(kt(t,"beforeSelectionChange")||t.cm&&kt(t.cm,"beforeSelectionChange"))&&(n=function _f(t,n,d){var c={ranges:n.ranges,update:function(w){this.ranges=[];for(var M=0;M<w.length;M++)this.ranges[M]=new jt(St(t,w[M].anchor),St(t,w[M].head))},origin:d&&d.origin};return dt(t,"beforeSelectionChange",t,c),t.cm&&dt(t.cm,"beforeSelectionChange",t.cm,c),c.ranges!=n.ranges?Mr(t.cm,c.ranges,c.ranges.length-1):n}(t,n,d));var c=d&&d.bias||(_t(n.primary().head,t.sel.primary().head)<0?-1:1);Tl(t,Uo(t,n,c,!0)),(!d||!1!==d.scroll)&&t.cm&&"nocursor"!=t.cm.getOption("readOnly")&&Wn(t.cm)}function Tl(t,n){n.equals(t.sel)||(t.sel=n,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,Ct(t.cm)),nr(t,"cursorActivity",t))}function Ll(t){Tl(t,Uo(t,t.sel,null,!1))}function Uo(t,n,d,c){for(var w,M=0;M<n.ranges.length;M++){var K=n.ranges[M],re=n.ranges.length==t.sel.ranges.length&&t.sel.ranges[M],se=Pr(t,K.anchor,re&&re.anchor,d,c),ue=K.head==K.anchor?se:Pr(t,K.head,re&&re.head,d,c);(w||se!=K.anchor||ue!=K.head)&&(w||(w=n.ranges.slice(0,M)),w[M]=new jt(se,ue))}return w?Mr(t.cm,w,n.primIndex):n}function wn(t,n,d,c,w){var M=bt(t,n.line);if(M.markedSpans)for(var K=0;K<M.markedSpans.length;++K){var re=M.markedSpans[K],se=re.marker,ue="selectLeft"in se?!se.selectLeft:se.inclusiveLeft,be="selectRight"in se?!se.selectRight:se.inclusiveRight;if((null==re.from||(ue?re.from<=n.ch:re.from<n.ch))&&(null==re.to||(be?re.to>=n.ch:re.to>n.ch))){if(w&&(dt(se,"beforeCursorEnter"),se.explicitlyCleared)){if(M.markedSpans){--K;continue}break}if(!se.atomic)continue;if(d){var Ee=se.find(c<0?1:-1),Qe=void 0;if((c<0?be:ue)&&(Ee=fn(t,Ee,-c,Ee&&Ee.line==n.line?M:null)),Ee&&Ee.line==n.line&&(Qe=_t(Ee,d))&&(c<0?Qe<0:Qe>0))return wn(t,Ee,n,c,w)}var Be=se.find(c<0?-1:1);return(c<0?ue:be)&&(Be=fn(t,Be,c,Be.line==n.line?M:null)),Be?wn(t,Be,n,c,w):null}}return n}function Pr(t,n,d,c,w){var M=c||1;return wn(t,n,d,M,w)||!w&&wn(t,n,d,M,!0)||wn(t,n,d,-M,w)||!w&&wn(t,n,d,-M,!0)||(t.cantEdit=!0,ot(t.first,0))}function fn(t,n,d,c){return d<0&&0==n.ch?n.line>t.first?St(t,ot(n.line-1)):null:d>0&&n.ch==(c||bt(t,n.line)).text.length?n.line<t.first+t.size-1?ot(n.line+1,0):null:new ot(n.line,n.ch+d)}function Il(t){t.setSelection(ot(t.firstLine(),0),ot(t.lastLine()),z)}function Go(t,n,d){var c={canceled:!1,from:n.from,to:n.to,text:n.text,origin:n.origin,cancel:function(){return c.canceled=!0}};return d&&(c.update=function(w,M,K,re){w&&(c.from=St(t,w)),M&&(c.to=St(t,M)),K&&(c.text=K),void 0!==re&&(c.origin=re)}),dt(t,"beforeChange",t,c),t.cm&&dt(t.cm,"beforeChange",t.cm,c),c.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:c.from,to:c.to,text:c.text,origin:c.origin}}function kn(t,n,d){if(t.cm){if(!t.cm.curOp)return ir(t.cm,kn)(t,n,d);if(t.cm.state.suppressEdits)return}if(!(kt(t,"beforeChange")||t.cm&&kt(t.cm,"beforeChange"))||(n=Go(t,n,!0))){var c=vs&&!d&&function ja(t,n,d){var c=null;if(t.iter(n.line,d.line+1,function(Be){if(Be.markedSpans)for(var Ye=0;Ye<Be.markedSpans.length;++Ye){var tt=Be.markedSpans[Ye].marker;tt.readOnly&&(!c||-1==Me(c,tt))&&(c||(c=[])).push(tt)}}),!c)return null;for(var w=[{from:n,to:d}],M=0;M<c.length;++M)for(var K=c[M],re=K.find(0),se=0;se<w.length;++se){var ue=w[se];if(!(_t(ue.to,re.from)<0||_t(ue.from,re.to)>0)){var be=[se,1],Ee=_t(ue.from,re.from),Qe=_t(ue.to,re.to);(Ee<0||!K.inclusiveLeft&&!Ee)&&be.push({from:ue.from,to:re.from}),(Qe>0||!K.inclusiveRight&&!Qe)&&be.push({from:re.to,to:ue.to}),w.splice.apply(w,be),se+=be.length-3}}return w}(t,n.from,n.to);if(c)for(var w=c.length-1;w>=0;--w)Nl(t,{from:c[w].from,to:c[w].to,text:w?[""]:n.text,origin:n.origin});else Nl(t,n)}}function Nl(t,n){if(1!=n.text.length||""!=n.text[0]||0!=_t(n.from,n.to)){var d=Js(t,n);Sl(t,n,d,t.cm?t.cm.curOp.id:NaN),ao(t,n,d,gs(t,n));var c=[];Br(t,function(w,M){!M&&-1==Me(c,w.history)&&(zo(w.history,n),c.push(w.history)),ao(w,n,null,gs(w,n))})}}function Ho(t,n,d){var c=t.cm&&t.cm.state.suppressEdits;if(!c||d){for(var M,w=t.history,K=t.sel,re="undo"==n?w.done:w.undone,se="undo"==n?w.undone:w.done,ue=0;ue<re.length&&(M=re[ue],!(d?M.ranges&&!M.equals(t.sel):!M.ranges));ue++);if(ue!=re.length){for(w.lastOrigin=w.lastSelOrigin=null;;){if(!(M=re.pop()).ranges){if(c)return void re.push(M);break}if(Po(M,se),d&&!M.equals(t.sel))return void fr(t,M,{clearRedo:!1});K=M}var be=[];Po(K,se),se.push({changes:be,generation:w.generation}),w.generation=M.generation||++w.maxGeneration;for(var Ee=kt(t,"beforeChange")||t.cm&&kt(t.cm,"beforeChange"),Qe=function(tt){var st=M.changes[tt];if(st.origin=n,Ee&&!Go(t,st,!1))return re.length=0,{};be.push(Zs(t,st));var ut=tt?Js(t,st):We(re);ao(t,st,ut,oo(t,st)),!tt&&t.cm&&t.cm.scrollIntoView({from:st.from,to:bn(st)});var pt=[];Br(t,function(ft,gt){!gt&&-1==Me(pt,ft.history)&&(zo(ft.history,st),pt.push(ft.history)),ao(ft,st,null,oo(ft,st))})},Be=M.changes.length-1;Be>=0;--Be){var Ye=Qe(Be);if(Ye)return Ye.v}}}}function Ol(t,n){if(0!=n&&(t.first+=n,t.sel=new Ir(Ke(t.sel.ranges,function(w){return new jt(ot(w.anchor.line+n,w.anchor.ch),ot(w.head.line+n,w.head.ch))}),t.sel.primIndex),t.cm)){mr(t.cm,t.first,t.first-n,n);for(var d=t.cm.display,c=d.viewFrom;c<d.viewTo;c++)Wt(t.cm,c,"gutter")}}function ao(t,n,d,c){if(t.cm&&!t.cm.curOp)return ir(t.cm,ao)(t,n,d,c);if(n.to.line<t.first)Ol(t,n.text.length-1-(n.to.line-n.from.line));else if(!(n.from.line>t.lastLine())){if(n.from.line<t.first){var w=n.text.length-1-(t.first-n.from.line);Ol(t,w),n={from:ot(t.first,0),to:ot(n.to.line+w,n.to.ch),text:[We(n.text)],origin:n.origin}}var M=t.lastLine();n.to.line>M&&(n={from:n.from,to:ot(M,bt(t,M).text.length),text:[n.text[0]],origin:n.origin}),n.removed=hn(t,n.from,n.to),d||(d=Js(t,n)),t.cm?function Sf(t,n,d){var c=t.doc,w=t.display,M=n.from,K=n.to,re=!1,se=M.line;t.options.lineWrapping||(se=Bt(Dr(bt(c,M.line))),c.iter(se,K.line+1,function(Be){if(Be==w.maxLine)return re=!0,!0})),c.sel.contains(n.from,n.to)>-1&&Ct(t),Ks(c,n,d,ul(t)),t.options.lineWrapping||(c.iter(se,M.line+n.text.length,function(Be){var Ye=Fo(Be);Ye>w.maxLineLength&&(w.maxLine=Be,w.maxLineLength=Ye,w.maxLineChanged=!0,re=!1)}),re&&(t.curOp.updateMaxLine=!0)),function Ru(t,n){if(t.modeFrontier=Math.min(t.modeFrontier,n),!(t.highlightFrontier<n-10)){for(var d=t.first,c=n-1;c>d;c--){var w=bt(t,c).stateAfter;if(w&&(!(w instanceof Co)||c+w.lookAhead<n)){d=c+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,d)}}(c,M.line),to(t,400);var ue=n.text.length-(K.line-M.line)-1;n.full?mr(t):M.line!=K.line||1!=n.text.length||Cl(t.doc,n)?mr(t,M.line,K.line+1,ue):Wt(t,M.line,"text");var be=kt(t,"changes"),Ee=kt(t,"change");if(Ee||be){var Qe={from:M,to:K,text:n.text,removed:n.removed,origin:n.origin};Ee&&nr(t,"change",t,Qe),be&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(Qe)}t.display.selForContextMenu=null}(t.cm,n,c):Ks(t,n,c),so(t,d,z),t.cantEdit&&Pr(t,ot(t.firstLine(),0))&&(t.cantEdit=!1)}}function bi(t,n,d,c,w){var M;c||(c=d),_t(c,d)<0&&(d=(M=[c,d])[0],c=M[1]),"string"==typeof n&&(n=t.splitLines(n)),kn(t,{from:d,to:c,text:n,origin:w})}function Rl(t,n,d,c){d<t.line?t.line+=c:n<t.line&&(t.line=n,t.ch=0)}function Wo(t,n,d,c){for(var w=0;w<t.length;++w){var M=t[w],K=!0;if(M.ranges){M.copied||((M=t[w]=M.deepCopy()).copied=!0);for(var re=0;re<M.ranges.length;re++)Rl(M.ranges[re].anchor,n,d,c),Rl(M.ranges[re].head,n,d,c)}else{for(var se=0;se<M.changes.length;++se){var ue=M.changes[se];if(d<ue.from.line)ue.from=ot(ue.from.line+c,ue.from.ch),ue.to=ot(ue.to.line+c,ue.to.ch);else if(n<=ue.to.line){K=!1;break}}K||(t.splice(0,w+1),w=0)}}}function zo(t,n){var d=n.from.line,c=n.to.line,w=n.text.length-(c-d)-1;Wo(t.done,d,c,w),Wo(t.undone,d,c,w)}function Vn(t,n,d,c){var w=n,M=n;return"number"==typeof n?M=bt(t,_a(t,n)):w=Bt(n),null==w?null:(c(M,w)&&t.cm&&Wt(t.cm,w,d),M)}function Kn(t){this.lines=t,this.parent=null;for(var n=0,d=0;d<t.length;++d)t[d].parent=this,n+=t[d].height;this.height=n}function lo(t){this.children=t;for(var n=0,d=0,c=0;c<t.length;++c){var w=t[c];n+=w.chunkSize(),d+=w.height,w.parent=this}this.size=n,this.height=d,this.parent=null}jt.prototype.from=function(){return Qi(this.anchor,this.head)},jt.prototype.to=function(){return ko(this.anchor,this.head)},jt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Kn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,n){for(var d=t,c=t+n;d<c;++d){var w=this.lines[d];this.height-=w.height,Pu(w),nr(w,"delete")}this.lines.splice(t,n)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,n,d){this.height+=d,this.lines=this.lines.slice(0,t).concat(n).concat(this.lines.slice(t));for(var c=0;c<n.length;++c)n[c].parent=this},iterN:function(t,n,d){for(var c=t+n;t<c;++t)if(d(this.lines[t]))return!0}},lo.prototype={chunkSize:function(){return this.size},removeInner:function(t,n){this.size-=n;for(var d=0;d<this.children.length;++d){var c=this.children[d],w=c.chunkSize();if(t<w){var M=Math.min(n,w-t),K=c.height;if(c.removeInner(t,M),this.height-=K-c.height,w==M&&(this.children.splice(d--,1),c.parent=null),0==(n-=M))break;t=0}else t-=w}if(this.size-n<25&&(this.children.length>1||!(this.children[0]instanceof Kn))){var re=[];this.collapse(re),this.children=[new Kn(re)],this.children[0].parent=this}},collapse:function(t){for(var n=0;n<this.children.length;++n)this.children[n].collapse(t)},insertInner:function(t,n,d){this.size+=n.length,this.height+=d;for(var c=0;c<this.children.length;++c){var w=this.children[c],M=w.chunkSize();if(t<=M){if(w.insertInner(t,n,d),w.lines&&w.lines.length>50){for(var K=w.lines.length%25+25,re=K;re<w.lines.length;){var se=new Kn(w.lines.slice(re,re+=25));w.height-=se.height,this.children.splice(++c,0,se),se.parent=this}w.lines=w.lines.slice(0,K),this.maybeSpill()}break}t-=M}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var d=new lo(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=d.size,t.height-=d.height;var w=Me(t.parent.children,t);t.parent.children.splice(w+1,0,d)}else{var c=new lo(t.children);c.parent=t,t.children=[c,d],t=c}d.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,n,d){for(var c=0;c<this.children.length;++c){var w=this.children[c],M=w.chunkSize();if(t<M){var K=Math.min(n,M-t);if(w.iterN(t,K,d))return!0;if(0==(n-=K))break;t=0}else t-=M}}};var uo=function(t,n,d){if(d)for(var c in d)d.hasOwnProperty(c)&&(this[c]=d[c]);this.doc=t,this.node=n};function Dl(t,n,d){Xr(n)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Qs(t,d)}uo.prototype.clear=function(){var t=this.doc.cm,n=this.line.widgets,d=this.line,c=Bt(d);if(null!=c&&n){for(var w=0;w<n.length;++w)n[w]==this&&n.splice(w--,1);n.length||(d.widgets=null);var M=pi(this);qr(d,Math.max(0,d.height-M)),t&&(br(t,function(){Dl(t,d,-M),Wt(t,c,"widget")}),nr(t,"lineWidgetCleared",t,this,c))}},uo.prototype.changed=function(){var t=this,n=this.height,d=this.doc.cm,c=this.line;this.height=null;var w=pi(this)-n;!w||(pn(this.doc,c)||qr(c,c.height+w),d&&br(d,function(){d.curOp.forceUpdate=!0,Dl(d,c,w),nr(d,"lineWidgetChanged",d,t,Bt(c))}))},vt(uo);var ta=0,Cn=function(t,n){this.lines=[],this.type=n,this.doc=t,this.id=++ta};function xi(t,n,d,c,w){if(c&&c.shared)return function Ff(t,n,d,c,w){(c=ke(c)).shared=!1;var M=[xi(t,n,d,c,w)],K=M[0],re=c.widgetNode;return Br(t,function(se){re&&(c.widgetNode=re.cloneNode(!0)),M.push(xi(se,St(se,n),St(se,d),c,w));for(var ue=0;ue<se.linked.length;++ue)if(se.linked[ue].isParent)return;K=We(M)}),new wi(M,K)}(t,n,d,c,w);if(t.cm&&!t.cm.curOp)return ir(t.cm,xi)(t,n,d,c,w);var M=new Cn(t,w),K=_t(n,d);if(c&&ke(c,M,!1),K>0||0==K&&!1!==M.clearWhenEmpty)return M;if(M.replacedWith&&(M.collapsed=!0,M.widgetNode=le("span",[M.replacedWith],"CodeMirror-widget"),c.handleMouseEvents||M.widgetNode.setAttribute("cm-ignore-events","true"),c.insertLeft&&(M.widgetNode.insertLeft=!0)),M.collapsed){if(Qa(t,n.line,n,d,M)||n.line!=d.line&&Qa(t,d.line,n,d,M))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Du(){on=!0}()}M.addToHistory&&Sl(t,{from:n,to:d,origin:"markText"},t.sel,NaN);var ue,re=n.line,se=t.cm;if(t.iter(re,d.line+1,function(Ee){se&&M.collapsed&&!se.options.lineWrapping&&Dr(Ee)==se.display.maxLine&&(ue=!0),M.collapsed&&re!=n.line&&qr(Ee,0),function ju(t,n,d){var c=d&&window.WeakSet&&(d.markedSpans||(d.markedSpans=new WeakSet));c&&t.markedSpans&&c.has(t.markedSpans)?t.markedSpans.push(n):(t.markedSpans=t.markedSpans?t.markedSpans.concat([n]):[n],c&&c.add(t.markedSpans)),n.marker.attachLine(t)}(Ee,new Ao(M,re==n.line?n.ch:null,re==d.line?d.ch:null),t.cm&&t.cm.curOp),++re}),M.collapsed&&t.iter(n.line,d.line+1,function(Ee){pn(t,Ee)&&qr(Ee,0)}),M.clearOnEnter&&Xe(M,"beforeCursorEnter",function(){return M.clear()}),M.readOnly&&(function Na(){vs=!0}(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),M.collapsed&&(M.id=++ta,M.atomic=!0),se){if(ue&&(se.curOp.updateMaxLine=!0),M.collapsed)mr(se,n.line,d.line+1);else if(M.className||M.startStyle||M.endStyle||M.css||M.attributes||M.title)for(var be=n.line;be<=d.line;be++)Wt(se,be,"text");M.atomic&&Ll(se.doc),nr(se,"markerAdded",se,M)}return M}Cn.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,n=t&&!t.curOp;if(n&&yn(t),kt(this,"clear")){var d=this.find();d&&nr(this,"clear",d.from,d.to)}for(var c=null,w=null,M=0;M<this.lines.length;++M){var K=this.lines[M],re=Gi(K.markedSpans,this);t&&!this.collapsed?Wt(t,Bt(K),"text"):t&&(null!=re.to&&(w=Bt(K)),null!=re.from&&(c=Bt(K))),K.markedSpans=Oa(K.markedSpans,re),null==re.from&&this.collapsed&&!pn(this.doc,K)&&t&&qr(K,Gn(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var se=0;se<this.lines.length;++se){var ue=Dr(this.lines[se]),be=Fo(ue);be>t.display.maxLineLength&&(t.display.maxLine=ue,t.display.maxLineLength=be,t.display.maxLineChanged=!0)}null!=c&&t&&this.collapsed&&mr(t,c,w+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Ll(t.doc)),t&&nr(t,"markerCleared",t,this,c,w),n&&Jn(t),this.parent&&this.parent.clear()}},Cn.prototype.find=function(t,n){null==t&&"bookmark"==this.type&&(t=1);for(var d,c,w=0;w<this.lines.length;++w){var M=this.lines[w],K=Gi(M.markedSpans,this);if(null!=K.from&&(d=ot(n?M:Bt(M),K.from),-1==t))return d;if(null!=K.to&&(c=ot(n?M:Bt(M),K.to),1==t))return c}return d&&{from:d,to:c}},Cn.prototype.changed=function(){var t=this,n=this.find(-1,!0),d=this,c=this.doc.cm;!n||!c||br(c,function(){var w=n.line,M=Bt(n.line),K=As(c,M);if(K&&(nl(K),c.curOp.selectionChanged=c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,!pn(d.doc,w)&&null!=d.height){var re=d.height;d.height=null;var se=pi(d)-re;se&&qr(w,w.height+se)}nr(c,"markerChanged",c,t)})},Cn.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var n=this.doc.cm.curOp;(!n.maybeHiddenMarkers||-1==Me(n.maybeHiddenMarkers,this))&&(n.maybeUnhiddenMarkers||(n.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Cn.prototype.detachLine=function(t){if(this.lines.splice(Me(this.lines,t),1),!this.lines.length&&this.doc.cm){var n=this.doc.cm.curOp;(n.maybeHiddenMarkers||(n.maybeHiddenMarkers=[])).push(this)}},vt(Cn);var wi=function(t,n){this.markers=t,this.primary=n;for(var d=0;d<t.length;++d)t[d].parent=this};function jl(t){return t.findMarks(ot(t.first,0),t.clipPos(ot(t.lastLine())),function(n){return n.parent})}function Tf(t){for(var n=function(c){var w=t[c],M=[w.primary.doc];Br(w.primary.doc,function(se){return M.push(se)});for(var K=0;K<w.markers.length;K++){var re=w.markers[K];-1==Me(M,re.doc)&&(re.parent=null,w.markers.splice(K--,1))}},d=0;d<t.length;d++)n(d)}wi.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();nr(this,"clear")}},wi.prototype.find=function(t,n){return this.primary.find(t,n)},vt(wi);var Lf=0,xr=function(t,n,d,c,w){if(!(this instanceof xr))return new xr(t,n,d,c,w);null==d&&(d=0),lo.call(this,[new Kn([new li("",null)])]),this.first=d,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=d;var M=ot(d,0);this.sel=mn(M),this.history=new Bo(null),this.id=++Lf,this.modeOption=n,this.lineSep=c,this.direction="rtl"==w?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Ks(this,{from:M,to:M,text:t}),fr(this,mn(M),z)};xr.prototype=Mt(lo.prototype,{constructor:xr,iter:function(t,n,d){d?this.iterN(t-this.first,n-t,d):this.iterN(this.first,this.first+this.size,t)},insert:function(t,n){for(var d=0,c=0;c<n.length;++c)d+=n[c].height;this.insertInner(t-this.first,n,d)},remove:function(t,n){this.removeInner(t-this.first,n)},getValue:function(t){var n=cs(this,this.first,this.first+this.size);return!1===t?n:n.join(t||this.lineSeparator())},setValue:or(function(t){var n=ot(this.first,0),d=this.first+this.size-1;kn(this,{from:n,to:ot(d,bt(this,d).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Yi(this.cm,0,0),fr(this,mn(n),z)}),replaceRange:function(t,n,d,c){bi(this,t,n=St(this,n),d=d?St(this,d):n,c)},getRange:function(t,n,d){var c=hn(this,St(this,t),St(this,n));return!1===d?c:""===d?c.join(""):c.join(d||this.lineSeparator())},getLine:function(t){var n=this.getLineHandle(t);return n&&n.text},getLineHandle:function(t){if(Pi(this,t))return bt(this,t)},getLineNumber:function(t){return Bt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=bt(this,t)),Dr(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return St(this,t)},getCursor:function(t){var n=this.sel.primary();return null==t||"head"==t?n.head:"anchor"==t?n.anchor:"end"==t||"to"==t||!1===t?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:or(function(t,n,d){Fl(this,St(this,"number"==typeof t?ot(t,n||0):t),null,d)}),setSelection:or(function(t,n,d){Fl(this,St(this,t),St(this,n||t),d)}),extendSelection:or(function(t,n,d){Vr(this,St(this,t),n&&St(this,n),d)}),extendSelections:or(function(t,n){xn(this,Sa(this,t),n)}),extendSelectionsBy:or(function(t,n){xn(this,Sa(this,Ke(this.sel.ranges,t)),n)}),setSelections:or(function(t,n,d){if(t.length){for(var c=[],w=0;w<t.length;w++)c[w]=new jt(St(this,t[w].anchor),St(this,t[w].head||t[w].anchor));null==n&&(n=Math.min(t.length-1,this.sel.primIndex)),fr(this,Mr(this.cm,c,n),d)}}),addSelection:or(function(t,n,d){var c=this.sel.ranges.slice(0);c.push(new jt(St(this,t),St(this,n||t))),fr(this,Mr(this.cm,c,c.length-1),d)}),getSelection:function(t){for(var d,n=this.sel.ranges,c=0;c<n.length;c++){var w=hn(this,n[c].from(),n[c].to());d=d?d.concat(w):w}return!1===t?d:d.join(t||this.lineSeparator())},getSelections:function(t){for(var n=[],d=this.sel.ranges,c=0;c<d.length;c++){var w=hn(this,d[c].from(),d[c].to());!1!==t&&(w=w.join(t||this.lineSeparator())),n[c]=w}return n},replaceSelection:function(t,n,d){for(var c=[],w=0;w<this.sel.ranges.length;w++)c[w]=t;this.replaceSelections(c,n,d||"+input")},replaceSelections:or(function(t,n,d){for(var c=[],w=this.sel,M=0;M<w.ranges.length;M++){var K=w.ranges[M];c[M]={from:K.from(),to:K.to(),text:this.splitLines(t[M]),origin:d}}for(var re=n&&"end"!=n&&function mf(t,n,d){for(var c=[],w=ot(t.first,0),M=w,K=0;K<n.length;K++){var re=n[K],se=kl(re.from,w,M),ue=kl(bn(re),w,M);if(w=re.to,M=ue,"around"==d){var be=t.sel.ranges[K],Ee=_t(be.head,be.anchor)<0;c[K]=new jt(Ee?ue:se,Ee?se:ue)}else c[K]=new jt(se,se)}return new Ir(c,t.sel.primIndex)}(this,c,n),se=c.length-1;se>=0;se--)kn(this,c[se]);re?El(this,re):this.cm&&Wn(this.cm)}),undo:or(function(){Ho(this,"undo")}),redo:or(function(){Ho(this,"redo")}),undoSelection:or(function(){Ho(this,"undo",!0)}),redoSelection:or(function(){Ho(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,n=0,d=0,c=0;c<t.done.length;c++)t.done[c].ranges||++n;for(var w=0;w<t.undone.length;w++)t.undone[w].ranges||++d;return{undo:n,redo:d}},clearHistory:function(){var t=this;this.history=new Bo(this.history),Br(this,function(n){return n.history=t.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:mi(this.history.done),undone:mi(this.history.undone)}},setHistory:function(t){var n=this.history=new Bo(this.history);n.done=mi(t.done.slice(0),null,!0),n.undone=mi(t.undone.slice(0),null,!0)},setGutterMarker:or(function(t,n,d){return Vn(this,t,"gutter",function(c){var w=c.gutterMarkers||(c.gutterMarkers={});return w[n]=d,!d&&Ne(w)&&(c.gutterMarkers=null),!0})}),clearGutter:or(function(t){var n=this;this.iter(function(d){d.gutterMarkers&&d.gutterMarkers[t]&&Vn(n,d,"gutter",function(){return d.gutterMarkers[t]=null,Ne(d.gutterMarkers)&&(d.gutterMarkers=null),!0})})}),lineInfo:function(t){var n;if("number"==typeof t){if(!Pi(this,t)||(n=t,!(t=bt(this,t))))return null}else if(null==(n=Bt(t)))return null;return{line:n,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:or(function(t,n,d){return Vn(this,t,"gutter"==n?"gutter":"class",function(c){var w="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(c[w]){if(V(d).test(c[w]))return!1;c[w]+=" "+d}else c[w]=d;return!0})}),removeLineClass:or(function(t,n,d){return Vn(this,t,"gutter"==n?"gutter":"class",function(c){var w="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",M=c[w];if(!M)return!1;if(null==d)c[w]=null;else{var K=M.match(V(d));if(!K)return!1;var re=K.index+K[0].length;c[w]=M.slice(0,K.index)+(K.index&&re!=M.length?" ":"")+M.slice(re)||null}return!0})}),addLineWidget:or(function(t,n,d){return function Af(t,n,d,c){var w=new uo(t,d,c),M=t.cm;return M&&w.noHScroll&&(M.display.alignWidgets=!0),Vn(t,n,"widget",function(K){var re=K.widgets||(K.widgets=[]);if(null==w.insertAt?re.push(w):re.splice(Math.min(re.length,Math.max(0,w.insertAt)),0,w),w.line=K,M&&!pn(t,K)){var se=Xr(K)<t.scrollTop;qr(K,K.height+pi(w)),se&&Qs(M,w.height),M.curOp.forceUpdate=!0}return!0}),M&&nr(M,"lineWidgetAdded",M,w,"number"==typeof n?n:Bt(n)),w}(this,t,n,d)}),removeLineWidget:function(t){t.clear()},markText:function(t,n,d){return xi(this,St(this,t),St(this,n),d,d&&d.type||"range")},setBookmark:function(t,n){var d={replacedWith:n&&(null==n.nodeType?n.widget:n),insertLeft:n&&n.insertLeft,clearWhenEmpty:!1,shared:n&&n.shared,handleMouseEvents:n&&n.handleMouseEvents};return xi(this,t=St(this,t),t,d,"bookmark")},findMarksAt:function(t){var n=[],d=bt(this,(t=St(this,t)).line).markedSpans;if(d)for(var c=0;c<d.length;++c){var w=d[c];(null==w.from||w.from<=t.ch)&&(null==w.to||w.to>=t.ch)&&n.push(w.marker.parent||w.marker)}return n},findMarks:function(t,n,d){t=St(this,t),n=St(this,n);var c=[],w=t.line;return this.iter(t.line,n.line+1,function(M){var K=M.markedSpans;if(K)for(var re=0;re<K.length;re++){var se=K[re];!(null!=se.to&&w==t.line&&t.ch>=se.to||null==se.from&&w!=t.line||null!=se.from&&w==n.line&&se.from>=n.ch)&&(!d||d(se.marker))&&c.push(se.marker.parent||se.marker)}++w}),c},getAllMarks:function(){var t=[];return this.iter(function(n){var d=n.markedSpans;if(d)for(var c=0;c<d.length;++c)null!=d[c].from&&t.push(d[c].marker)}),t},posFromIndex:function(t){var n,d=this.first,c=this.lineSeparator().length;return this.iter(function(w){var M=w.text.length+c;if(M>t)return n=t,!0;t-=M,++d}),St(this,ot(d,n))},indexFromPos:function(t){var n=(t=St(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var d=this.lineSeparator().length;return this.iter(this.first,t.line,function(c){n+=c.text.length+d}),n},copy:function(t){var n=new xr(cs(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return n.scrollTop=this.scrollTop,n.scrollLeft=this.scrollLeft,n.sel=this.sel,n.extend=!1,t&&(n.history.undoDepth=this.history.undoDepth,n.setHistory(this.getHistory())),n},linkedDoc:function(t){t||(t={});var n=this.first,d=this.first+this.size;null!=t.from&&t.from>n&&(n=t.from),null!=t.to&&t.to<d&&(d=t.to);var c=new xr(cs(this,n,d),t.mode||this.modeOption,n,this.lineSep,this.direction);return t.sharedHist&&(c.history=this.history),(this.linked||(this.linked=[])).push({doc:c,sharedHist:t.sharedHist}),c.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function Ef(t,n){for(var d=0;d<n.length;d++){var c=n[d],w=c.find(),M=t.clipPos(w.from),K=t.clipPos(w.to);if(_t(M,K)){var re=xi(t,M,K,c.primary,c.primary.type);c.markers.push(re),re.parent=c}}}(c,jl(this)),c},unlinkDoc:function(t){if(t instanceof Ut&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){if(this.linked[n].doc==t){this.linked.splice(n,1),t.unlinkDoc(this),Tf(jl(this));break}}if(t.history==this.history){var c=[t.id];Br(t,function(w){return c.push(w.id)},!0),t.history=new Bo(null),t.history.done=mi(this.history.done,c),t.history.undone=mi(this.history.undone,c)}},iterLinkedDocs:function(t){Br(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Hr(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:or(function(t){"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(n){return n.order=null}),this.cm&&function bf(t){br(t,function(){Ys(t),mr(t)})}(this.cm))})}),xr.prototype.eachLine=xr.prototype.iter;var Ml=0;function If(t){var n=this;if(Pl(n),!ht(n,t)&&!Nr(n.display,t)){it(t),m&&(Ml=+new Date);var d=vn(n,t,!0),c=t.dataTransfer.files;if(d&&!n.isReadOnly())if(c&&c.length&&window.FileReader&&window.File)for(var w=c.length,M=Array(w),K=0,re=function(){++K==w&&ir(n,function(){var Be={from:d=St(n.doc,d),to:d,text:n.doc.splitLines(M.filter(function(Ye){return null!=Ye}).join(n.doc.lineSeparator())),origin:"paste"};kn(n.doc,Be),El(n.doc,mn(St(n.doc,d),St(n.doc,bn(Be))))})()},se=function(Be,Ye){if(n.options.allowDropFileTypes&&-1==Me(n.options.allowDropFileTypes,Be.type))re();else{var tt=new FileReader;tt.onerror=function(){return re()},tt.onload=function(){var st=tt.result;/[\x00-\x08\x0e-\x1f]{2}/.test(st)||(M[Ye]=st),re()},tt.readAsText(Be)}},ue=0;ue<c.length;ue++)se(c[ue],ue);else{if(n.state.draggingText&&n.doc.sel.contains(d)>-1)return n.state.draggingText(t),void setTimeout(function(){return n.display.input.focus()},20);try{var be=t.dataTransfer.getData("Text");if(be){var Ee;if(n.state.draggingText&&!n.state.draggingText.copy&&(Ee=n.listSelections()),so(n.doc,mn(d,d)),Ee)for(var Qe=0;Qe<Ee.length;++Qe)bi(n.doc,"",Ee[Qe].anchor,Ee[Qe].head,"drag");n.replaceSelection(be,"around","paste"),n.display.input.focus()}}catch(Be){}}}}function Pl(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Ql(t){if(document.getElementsByClassName){for(var n=document.getElementsByClassName("CodeMirror"),d=[],c=0;c<n.length;c++){var w=n[c].CodeMirror;w&&d.push(w)}d.length&&d[0].operation(function(){for(var M=0;M<d.length;M++)t(d[M])})}}var fo=!1;function Ul(){fo||(function Nf(){var t;Xe(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Ql(Of)},100))}),Xe(window,"blur",function(){return Ql(yi)})}(),fo=!0)}function Of(t){var n=t.display;n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.scrollbarsClipped=!1,t.setSize()}for(var _n={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Sn=0;Sn<10;Sn++)_n[Sn+48]=_n[Sn+96]=String(Sn);for(var Yn=65;Yn<=90;Yn++)_n[Yn]=String.fromCharCode(Yn);for(var An=1;An<=12;An++)_n[An+111]=_n[An+63235]="F"+An;var Kr={};function ra(t){var n=t.split(/-(?!$)/);t=n[n.length-1];for(var d,c,w,M,K=0;K<n.length-1;K++){var re=n[K];if(/^(cmd|meta|m)$/i.test(re))M=!0;else if(/^a(lt)?$/i.test(re))d=!0;else if(/^(c|ctrl|control)$/i.test(re))c=!0;else{if(!/^s(hift)?$/i.test(re))throw new Error("Unrecognized modifier name: "+re);w=!0}}return d&&(t="Alt-"+t),c&&(t="Ctrl-"+t),M&&(t="Cmd-"+t),w&&(t="Shift-"+t),t}function na(t){var n={};for(var d in t)if(t.hasOwnProperty(d)){var c=t[d];if(/^(name|fallthrough|(de|at)tach)$/.test(d))continue;if("..."==c){delete t[d];continue}for(var w=Ke(d.split(" "),ra),M=0;M<w.length;M++){var K=void 0,re=void 0;M==w.length-1?(re=w.join(" "),K=c):(re=w.slice(0,M+1).join(" "),K="...");var se=n[re];if(se){if(se!=K)throw new Error("Inconsistent bindings for "+re)}else n[re]=K}delete t[d]}for(var ue in n)t[ue]=n[ue];return t}function Fn(t,n,d,c){var w=(n=Zn(n)).call?n.call(t,c):n[t];if(!1===w)return"nothing";if("..."===w)return"multi";if(null!=w&&d(w))return"handled";if(n.fallthrough){if("[object Array]"!=Object.prototype.toString.call(n.fallthrough))return Fn(t,n.fallthrough,d,c);for(var M=0;M<n.fallthrough.length;M++){var K=Fn(t,n.fallthrough[M],d,c);if(K)return K}}}function Xo(t){var n="string"==typeof t?t:_n[t.keyCode];return"Ctrl"==n||"Alt"==n||"Shift"==n||"Mod"==n}function co(t,n,d){var c=t;return n.altKey&&"Alt"!=c&&(t="Alt-"+t),(Q?n.metaKey:n.ctrlKey)&&"Ctrl"!=c&&(t="Ctrl-"+t),(Q?n.ctrlKey:n.metaKey)&&"Mod"!=c&&(t="Cmd-"+t),!d&&n.shiftKey&&"Shift"!=c&&(t="Shift-"+t),t}function ia(t,n){if(s&&34==t.keyCode&&t.char)return!1;var d=_n[t.keyCode];return null!=d&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(d=t.code),co(d,t,n))}function Zn(t){return"string"==typeof t?Kr[t]:t}function $n(t,n){for(var d=t.doc.sel.ranges,c=[],w=0;w<d.length;w++){for(var M=n(d[w]);c.length&&_t(M.from,We(c).to)<=0;){var K=c.pop();if(_t(K.from,M.from)<0){M.from=K.from;break}}c.push(M)}br(t,function(){for(var re=c.length-1;re>=0;re--)bi(t.doc,"",c[re].from,c[re].to,"+delete");Wn(t)})}function ki(t,n,d){var c=ve(t.text,n+d,d);return c<0||c>t.text.length?null:c}function Ci(t,n,d){var c=ki(t,n.ch,d);return null==c?null:new ot(n.line,c,d<0?"after":"before")}function _i(t,n,d,c,w){if(t){"rtl"==n.doc.direction&&(w=-w);var M=Ge(d,n.doc.direction);if(M){var ue,K=w<0?We(M):M[0],se=w<0==(1==K.level)?"after":"before";if(K.level>0||"rtl"==n.doc.direction){var be=Pn(n,d);ue=w<0?d.text.length-1:0;var Ee=Jr(n,be,ue).top;ue=me(function(Qe){return Jr(n,be,Qe).top==Ee},w<0==(1==K.level)?K.from:K.to-1,ue),"before"==se&&(ue=ki(d,ue,1))}else ue=w<0?K.to:K.from;return new ot(c,ue,se)}}return new ot(c,w<0?d.text.length:0,w<0?"before":"after")}Kr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Kr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Kr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Kr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Kr.default=B?Kr.macDefault:Kr.pcDefault;var Yr={selectAll:Il,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),z)},killLine:function(t){return $n(t,function(n){if(n.empty()){var d=bt(t.doc,n.head.line).text.length;return n.head.ch==d&&n.head.line<t.lastLine()?{from:n.head,to:ot(n.head.line+1,0)}:{from:n.head,to:ot(n.head.line,d)}}return{from:n.from(),to:n.to()}})},deleteLine:function(t){return $n(t,function(n){return{from:ot(n.from().line,0),to:St(t.doc,ot(n.to().line+1,0))}})},delLineLeft:function(t){return $n(t,function(n){return{from:ot(n.from().line,0),to:n.from()}})},delWrappedLineLeft:function(t){return $n(t,function(n){var d=t.charCoords(n.head,"div").top+5;return{from:t.coordsChar({left:0,top:d},"div"),to:n.from()}})},delWrappedLineRight:function(t){return $n(t,function(n){var d=t.charCoords(n.head,"div").top+5,c=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:d},"div");return{from:n.from(),to:c}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(ot(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(ot(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(n){return ei(t,n.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(n){return ti(t,n.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(n){return function Si(t,n){var d=bt(t.doc,n),c=function Bu(t){for(var n;n=jn(t);)t=n.find(1,!0).line;return t}(d);return c!=d&&(n=Bt(c)),_i(!0,t,d,n,-1)}(t,n.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(n){var d=t.cursorCoords(n.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:d},"div")},ge)},goLineLeft:function(t){return t.extendSelectionsBy(function(n){var d=t.cursorCoords(n.head,"div").top+5;return t.coordsChar({left:0,top:d},"div")},ge)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(n){var d=t.cursorCoords(n.head,"div").top+5,c=t.coordsChar({left:0,top:d},"div");return c.ch<t.getLine(c.line).search(/\S/)?ti(t,n.head):c},ge)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var n=[],d=t.listSelections(),c=t.options.tabSize,w=0;w<d.length;w++){var M=d[w].from(),K=de(t.getLine(M.line),M.ch,c);n.push(He(c-K%c))}t.replaceSelections(n)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return br(t,function(){for(var n=t.listSelections(),d=[],c=0;c<n.length;c++)if(n[c].empty()){var w=n[c].head,M=bt(t.doc,w.line).text;if(M)if(w.ch==M.length&&(w=new ot(w.line,w.ch-1)),w.ch>0)w=new ot(w.line,w.ch+1),t.replaceRange(M.charAt(w.ch-1)+M.charAt(w.ch-2),ot(w.line,w.ch-2),w,"+transpose");else if(w.line>t.doc.first){var K=bt(t.doc,w.line-1).text;K&&(w=new ot(w.line,1),t.replaceRange(M.charAt(0)+t.doc.lineSeparator()+K.charAt(K.length-1),ot(w.line-1,K.length-1),w,"+transpose"))}d.push(new jt(w,w))}t.setSelections(d)})},newlineAndIndent:function(t){return br(t,function(){for(var n=t.listSelections(),d=n.length-1;d>=0;d--)t.replaceRange(t.doc.lineSeparator(),n[d].anchor,n[d].head,"+input");n=t.listSelections();for(var c=0;c<n.length;c++)t.indentLine(n[c].from().line,null,!0);Wn(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function ei(t,n){var d=bt(t.doc,n),c=Dr(d);return c!=d&&(n=Bt(c)),_i(!0,t,c,n,1)}function ti(t,n){var d=ei(t,n.line),c=bt(t.doc,d.line),w=Ge(c,t.doc.direction);if(!w||0==w[0].level){var M=Math.max(d.ch,c.text.search(/\S/)),K=n.line==d.line&&n.ch<=M&&n.ch;return ot(d.line,K?0:M,d.sticky)}return d}function ho(t,n,d){if("string"==typeof n&&!(n=Yr[n]))return!1;t.display.input.ensurePolled();var c=t.display.shift,w=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),d&&(t.display.shift=!1),w=n(t)!=H}finally{t.display.shift=c,t.state.suppressEdits=!1}return w}var Hl=new Le;function Ai(t,n,d,c){var w=t.state.keySeq;if(w){if(Xo(n))return"handled";if(/\'$/.test(n)?t.state.keySeq=null:Hl.set(50,function(){t.state.keySeq==w&&(t.state.keySeq=null,t.display.input.reset())}),oa(t,w+" "+n,d,c))return!0}return oa(t,n,d,c)}function oa(t,n,d,c){var w=function Gl(t,n,d){for(var c=0;c<t.state.keyMaps.length;c++){var w=Fn(n,t.state.keyMaps[c],d,t);if(w)return w}return t.options.extraKeys&&Fn(n,t.options.extraKeys,d,t)||Fn(n,t.options.keyMap,d,t)}(t,n,c);return"multi"==w&&(t.state.keySeq=n),"handled"==w&&nr(t,"keyHandled",t,n,d),("handled"==w||"multi"==w)&&(it(d),js(t)),!!w}function sa(t,n){var d=ia(n,!0);return!!d&&(n.shiftKey&&!t.state.keySeq?Ai(t,"Shift-"+d,n,function(c){return ho(t,c,!0)})||Ai(t,d,n,function(c){if("string"==typeof c?/^go[A-Z]/.test(c):c.motion)return ho(t,c)}):Ai(t,d,n,function(c){return ho(t,c)}))}var Vo=null;function zl(t){var n=this;if(!(t.target&&t.target!=n.display.input.getField()||(n.curOp.focus=ie(),ht(n,t)))){m&&e<11&&27==t.keyCode&&(t.returnValue=!1);var d=t.keyCode;n.display.shift=16==d||t.shiftKey;var c=sa(n,t);s&&(Vo=c?d:null,!c&&88==d&&!rn&&(B?t.metaKey:t.ctrlKey)&&n.replaceSelection("",null,"cut")),ce&&!B&&!c&&46==d&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==d&&!/\bCodeMirror-crosshair\b/.test(n.display.lineDiv.className)&&function Rf(t){var n=t.display.lineDiv;function d(c){(18==c.keyCode||!c.altKey)&&(W(n,"CodeMirror-crosshair"),ct(document,"keyup",d),ct(document,"mouseover",d))}pe(n,"CodeMirror-crosshair"),Xe(document,"keyup",d),Xe(document,"mouseover",d)}(n)}}function ql(t){16==t.keyCode&&(this.doc.sel.shift=!1),ht(this,t)}function Qr(t){var n=this;if(!(t.target&&t.target!=n.display.input.getField()||Nr(n.display,t)||ht(n,t)||t.ctrlKey&&!t.altKey||B&&t.metaKey)){var d=t.keyCode,c=t.charCode;if(s&&d==Vo)return Vo=null,void it(t);if(!s||t.which&&!(t.which<10)||!sa(n,t)){var w=String.fromCharCode(null==c?d:c);"\b"!=w&&(function Wl(t,n,d){return Ai(t,"'"+d+"'",n,function(c){return ho(t,c,!0)})}(n,t,w)||n.display.input.onKeyPress(t))}}}var po,vo,aa=function(t,n,d){this.time=t,this.pos=n,this.button=d};function Xl(t){var n=this,d=n.display;if(!(ht(n,t)||d.activeTouch&&d.input.supportsTouch())){if(d.input.ensurePolled(),d.shift=t.shiftKey,Nr(d,t))return void(o||(d.scroller.draggable=!1,setTimeout(function(){return d.scroller.draggable=!0},100)));if(!la(n,t)){var c=vn(n,t),w=Oi(t),M=c?function Df(t,n){var d=+new Date;return vo&&vo.compare(d,t,n)?(po=vo=null,"triple"):po&&po.compare(d,t,n)?(vo=new aa(d,t,n),po=null,"double"):(po=new aa(d,t,n),vo=null,"single")}(c,w):"single";window.focus(),1==w&&n.state.selectingText&&n.state.selectingText(t),(!c||!function jf(t,n,d,c,w){var M="Click";return"double"==c?M="Double"+M:"triple"==c&&(M="Triple"+M),Ai(t,co(M=(1==n?"Left":2==n?"Middle":"Right")+M,w),w,function(K){if("string"==typeof K&&(K=Yr[K]),!K)return!1;var re=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),re=K(t,d)!=H}finally{t.state.suppressEdits=!1}return re})}(n,w,c,M,t))&&(1==w?c?function Bf(t,n,d,c){m?setTimeout(Fe(hl,t),0):t.curOp.focus=ie();var K,w=function Mf(t,n,d){var c=t.getOption("configureMouse"),w=c?c(t,n,d):{};if(null==w.unit){var M=N?d.shiftKey&&d.metaKey:d.altKey;w.unit=M?"rectangle":"single"==n?"char":"double"==n?"word":"line"}return(null==w.extend||t.doc.extend)&&(w.extend=t.doc.extend||d.shiftKey),null==w.addNew&&(w.addNew=B?d.metaKey:d.ctrlKey),null==w.moveOnDrag&&(w.moveOnDrag=!(B?d.altKey:d.ctrlKey)),w}(t,d,c),M=t.doc.sel;t.options.dragDrop&&ls&&!t.isReadOnly()&&"single"==d&&(K=M.contains(n))>-1&&(_t((K=M.ranges[K]).from(),n)<0||n.xRel>0)&&(_t(K.to(),n)>0||n.xRel<0)?function Pf(t,n,d,c){var w=t.display,M=!1,K=ir(t,function(ue){o&&(w.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:Ms(t)),ct(w.wrapper.ownerDocument,"mouseup",K),ct(w.wrapper.ownerDocument,"mousemove",re),ct(w.scroller,"dragstart",se),ct(w.scroller,"drop",K),M||(it(ue),c.addNew||Vr(t.doc,d,null,null,c.extend),o&&!v||m&&9==e?setTimeout(function(){w.wrapper.ownerDocument.body.focus({preventScroll:!0}),w.input.focus()},20):w.input.focus())}),re=function(ue){M=M||Math.abs(n.clientX-ue.clientX)+Math.abs(n.clientY-ue.clientY)>=10},se=function(){return M=!0};o&&(w.scroller.draggable=!0),t.state.draggingText=K,K.copy=!c.moveOnDrag,Xe(w.wrapper.ownerDocument,"mouseup",K),Xe(w.wrapper.ownerDocument,"mousemove",re),Xe(w.scroller,"dragstart",se),Xe(w.scroller,"drop",K),t.state.delayingBlurEvent=!0,setTimeout(function(){return w.input.focus()},20),w.scroller.dragDrop&&w.scroller.dragDrop()}(t,c,n,w):function Qf(t,n,d,c){m&&Ms(t);var w=t.display,M=t.doc;it(n);var K,re,se=M.sel,ue=se.ranges;if(c.addNew&&!c.extend?K=(re=M.sel.contains(d))>-1?ue[re]:new jt(d,d):(K=M.sel.primary(),re=M.sel.primIndex),"rectangle"==c.unit)c.addNew||(K=new jt(d,d)),d=vn(t,n,!0,!0),re=-1;else{var be=Jl(t,d,c.unit);K=c.extend?$s(K,be.anchor,be.head,c.extend):be}c.addNew?-1==re?(re=ue.length,fr(M,Mr(t,ue.concat([K]),re),{scroll:!1,origin:"*mouse"})):ue.length>1&&ue[re].empty()&&"char"==c.unit&&!c.extend?(fr(M,Mr(t,ue.slice(0,re).concat(ue.slice(re+1)),0),{scroll:!1,origin:"*mouse"}),se=M.sel):ea(M,re,K,ne):(re=0,fr(M,new Ir([K],0),ne),se=M.sel);var Ee=d;function Qe(ft){if(0!=_t(Ee,ft))if(Ee=ft,"rectangle"==c.unit){for(var gt=[],wt=t.options.tabSize,xt=de(bt(M,d.line).text,d.ch,wt),Et=de(bt(M,ft.line).text,ft.ch,wt),Qt=Math.min(xt,Et),sr=Math.max(xt,Et),Gt=Math.min(d.line,ft.line),Fr=Math.min(t.lastLine(),Math.max(d.line,ft.line));Gt<=Fr;Gt++){var wr=bt(M,Gt).text,Jt=xe(wr,Qt,wt);Qt==sr?gt.push(new jt(ot(Gt,Jt),ot(Gt,Jt))):wr.length>Jt&&gt.push(new jt(ot(Gt,Jt),ot(Gt,xe(wr,sr,wt))))}gt.length||gt.push(new jt(d,d)),fr(M,Mr(t,se.ranges.slice(0,re).concat(gt),re),{origin:"*mouse",scroll:!1}),t.scrollIntoView(ft)}else{var Zt,kr=K,ar=Jl(t,ft,c.unit),tr=kr.anchor;_t(ar.anchor,tr)>0?(Zt=ar.head,tr=Qi(kr.from(),ar.anchor)):(Zt=ar.anchor,tr=ko(kr.to(),ar.head));var Ht=se.ranges.slice(0);Ht[re]=function Uf(t,n){var d=n.anchor,c=n.head,w=bt(t.doc,d.line);if(0==_t(d,c)&&d.sticky==c.sticky)return n;var M=Ge(w);if(!M)return n;var K=Oe(M,d.ch,d.sticky),re=M[K];if(re.from!=d.ch&&re.to!=d.ch)return n;var ue,se=K+(re.from==d.ch==(1!=re.level)?0:1);if(0==se||se==M.length)return n;if(c.line!=d.line)ue=(c.line-d.line)*("ltr"==t.doc.direction?1:-1)>0;else{var be=Oe(M,c.ch,c.sticky),Ee=be-K||(c.ch-d.ch)*(1==re.level?-1:1);ue=be==se-1||be==se?Ee<0:Ee>0}var Qe=M[se+(ue?-1:0)],Be=ue==(1==Qe.level),Ye=Be?Qe.from:Qe.to,tt=Be?"after":"before";return d.ch==Ye&&d.sticky==tt?n:new jt(new ot(d.line,Ye,tt),c)}(t,new jt(St(M,tr),Zt)),fr(M,Mr(t,Ht,re),ne)}}var Be=w.wrapper.getBoundingClientRect(),Ye=0;function tt(ft){var gt=++Ye,wt=vn(t,ft,!0,"rectangle"==c.unit);if(wt)if(0!=_t(wt,Ee)){t.curOp.focus=ie(),Qe(wt);var xt=Ki(w,M);(wt.line>=xt.to||wt.line<xt.from)&&setTimeout(ir(t,function(){Ye==gt&&tt(ft)}),150)}else{var Et=ft.clientY<Be.top?-20:ft.clientY>Be.bottom?20:0;Et&&setTimeout(ir(t,function(){Ye==gt&&(w.scroller.scrollTop+=Et,tt(ft))}),50)}}function st(ft){t.state.selectingText=!1,Ye=1/0,ft&&(it(ft),w.input.focus()),ct(w.wrapper.ownerDocument,"mousemove",ut),ct(w.wrapper.ownerDocument,"mouseup",pt),M.history.lastSelOrigin=null}var ut=ir(t,function(ft){0!==ft.buttons&&Oi(ft)?tt(ft):st(ft)}),pt=ir(t,st);t.state.selectingText=pt,Xe(w.wrapper.ownerDocument,"mousemove",ut),Xe(w.wrapper.ownerDocument,"mouseup",pt)}(t,c,n,w)}(n,c,M,t):Nn(t)==d.scroller&&it(t):2==w?(c&&Vr(n.doc,c),setTimeout(function(){return d.input.focus()},20)):3==w&&(j?n.display.input.onContextMenu(t):Ms(n)))}}}function Jl(t,n,d){if("char"==d)return new jt(n,n);if("word"==d)return t.findWordAt(n);if("line"==d)return new jt(ot(n.line,0),St(t.doc,ot(n.line+1,0)));var c=d(t,n);return new jt(c.from,c.to)}function Vl(t,n,d,c){var w,M;if(n.touches)w=n.touches[0].clientX,M=n.touches[0].clientY;else try{w=n.clientX,M=n.clientY}catch(Qe){return!1}if(w>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;c&&it(n);var K=t.display,re=K.lineDiv.getBoundingClientRect();if(M>re.bottom||!kt(t,d))return Ot(n);M-=re.top-K.viewOffset;for(var se=0;se<t.display.gutterSpecs.length;++se){var ue=K.gutters.childNodes[se];if(ue&&ue.getBoundingClientRect().right>=w)return dt(t,d,t,Rn(t.doc,M),t.display.gutterSpecs[se].className,n),Ot(n)}}function la(t,n){return Vl(t,n,"gutterClick",!0)}function Kl(t,n){Nr(t.display,n)||function Yl(t,n){return!!kt(t,"gutterContextMenu")&&Vl(t,n,"gutterContextMenu",!1)}(t,n)||ht(t,n,"contextmenu")||j||t.display.input.onContextMenu(n)}function Zl(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),di(t)}aa.prototype.compare=function(t,n,d){return this.time+400>t&&0==_t(n,this.pos)&&d==this.button};var ri={toString:function(){return"CodeMirror.Init"}},$l={},Ko={};function Gf(t,n,d){if(!n!=!(d&&d!=ri)){var w=t.display.dragFunctions,M=n?Xe:ct;M(t.display.scroller,"dragstart",w.start),M(t.display.scroller,"dragenter",w.enter),M(t.display.scroller,"dragover",w.over),M(t.display.scroller,"dragleave",w.leave),M(t.display.scroller,"drop",w.drop)}}function tu(t){t.options.lineWrapping?(pe(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(W(t.display.wrapper,"CodeMirror-wrap"),Eo(t)),Rs(t),mr(t),di(t),setTimeout(function(){return Xn(t)},100)}function Ut(t,n){var d=this;if(!(this instanceof Ut))return new Ut(t,n);this.options=n=n?ke(n):{},ke($l,n,!1);var c=n.value;"string"==typeof c?c=new xr(c,n.mode,null,n.lineSeparator,n.direction):n.mode&&(c.modeOption=n.mode),this.doc=c;var w=new Ut.inputStyles[n.inputStyle](this),M=this.display=new gf(t,c,w,n);for(var K in M.wrapper.CodeMirror=this,Zl(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),dl(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Le,keySeq:null,specialChars:null},n.autofocus&&!T&&M.input.focus(),m&&e<11&&setTimeout(function(){return d.display.input.reset(!0)},20),function Hf(t){var n=t.display;Xe(n.scroller,"mousedown",ir(t,Xl)),Xe(n.scroller,"dblclick",m&&e<11?ir(t,function(se){if(!ht(t,se)){var ue=vn(t,se);if(ue&&!la(t,se)&&!Nr(t.display,se)){it(se);var be=t.findWordAt(ue);Vr(t.doc,be.anchor,be.head)}}}):function(se){return ht(t,se)||it(se)}),Xe(n.scroller,"contextmenu",function(se){return Kl(t,se)}),Xe(n.input.getField(),"contextmenu",function(se){n.scroller.contains(se.target)||Kl(t,se)});var d,c={end:0};function w(){n.activeTouch&&(d=setTimeout(function(){return n.activeTouch=null},1e3),(c=n.activeTouch).end=+new Date)}function M(se){if(1!=se.touches.length)return!1;var ue=se.touches[0];return ue.radiusX<=1&&ue.radiusY<=1}function K(se,ue){if(null==ue.left)return!0;var be=ue.left-se.left,Ee=ue.top-se.top;return be*be+Ee*Ee>400}Xe(n.scroller,"touchstart",function(se){if(!ht(t,se)&&!M(se)&&!la(t,se)){n.input.ensurePolled(),clearTimeout(d);var ue=+new Date;n.activeTouch={start:ue,moved:!1,prev:ue-c.end<=300?c:null},1==se.touches.length&&(n.activeTouch.left=se.touches[0].pageX,n.activeTouch.top=se.touches[0].pageY)}}),Xe(n.scroller,"touchmove",function(){n.activeTouch&&(n.activeTouch.moved=!0)}),Xe(n.scroller,"touchend",function(se){var ue=n.activeTouch;if(ue&&!Nr(n,se)&&null!=ue.left&&!ue.moved&&new Date-ue.start<300){var Ee,be=t.coordsChar(n.activeTouch,"page");Ee=!ue.prev||K(ue,ue.prev)?new jt(be,be):!ue.prev.prev||K(ue,ue.prev.prev)?t.findWordAt(be):new jt(ot(be.line,0),St(t.doc,ot(be.line+1,0))),t.setSelection(Ee.anchor,Ee.head),t.focus(),it(se)}w()}),Xe(n.scroller,"touchcancel",w),Xe(n.scroller,"scroll",function(){n.scroller.clientHeight&&(Zi(t,n.scroller.scrollTop),zn(t,n.scroller.scrollLeft,!0),dt(t,"scroll",t))}),Xe(n.scroller,"mousewheel",function(se){return xl(t,se)}),Xe(n.scroller,"DOMMouseScroll",function(se){return xl(t,se)}),Xe(n.wrapper,"scroll",function(){return n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),n.dragFunctions={enter:function(se){ht(t,se)||At(se)},over:function(se){ht(t,se)||(function Bl(t,n){var d=vn(t,n);if(d){var c=document.createDocumentFragment();Ds(t,d,c),t.display.dragCursor||(t.display.dragCursor=ee("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),Z(t.display.dragCursor,c)}}(t,se),At(se))},start:function(se){return function qo(t,n){if(m&&(!t.state.draggingText||+new Date-Ml<100))At(n);else if(!ht(t,n)&&!Nr(t.display,n)&&(n.dataTransfer.setData("Text",t.getSelection()),n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setDragImage&&!v)){var d=ee("img",null,null,"position: fixed; left: 0; top: 0;");d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",s&&(d.width=d.height=1,t.display.wrapper.appendChild(d),d._top=d.offsetTop),n.dataTransfer.setDragImage(d,0,0),s&&d.parentNode.removeChild(d)}}(t,se)},drop:ir(t,If),leave:function(se){ht(t,se)||Pl(t)}};var re=n.input.getField();Xe(re,"keyup",function(se){return ql.call(t,se)}),Xe(re,"keydown",ir(t,zl)),Xe(re,"keypress",ir(t,Qr)),Xe(re,"focus",function(se){return Bs(t,se)}),Xe(re,"blur",function(se){return yi(t,se)})}(this),Ul(),yn(this),this.curOp.forceUpdate=!0,io(this,c),n.autofocus&&!T||this.hasFocus()?setTimeout(function(){d.hasFocus()&&!d.state.focused&&Bs(d)},20):yi(this),Ko)Ko.hasOwnProperty(K)&&Ko[K](this,n[K],ri);er(this),n.finishInit&&n.finishInit(this);for(var re=0;re<Yo.length;++re)Yo[re](this);Jn(this),o&&n.lineWrapping&&"optimizelegibility"==getComputedStyle(M.lineDiv).textRendering&&(M.lineDiv.style.textRendering="auto")}Ut.defaults=$l,Ut.optionHandlers=Ko;var Yo=[];function go(t,n,d,c){var M,w=t.doc;null==d&&(d="add"),"smart"==d&&(w.mode.indent?M=Ui(t,n).state:d="prev");var K=t.options.tabSize,re=bt(w,n),se=de(re.text,null,K);re.stateAfter&&(re.stateAfter=null);var be,ue=re.text.match(/^\s*/)[0];if(c||/\S/.test(re.text)){if("smart"==d&&((be=w.mode.indent(M,re.text.slice(ue.length),re.text))==H||be>150)){if(!c)return;d="prev"}}else be=0,d="not";"prev"==d?be=n>w.first?de(bt(w,n-1).text,null,K):0:"add"==d?be=se+t.options.indentUnit:"subtract"==d?be=se-t.options.indentUnit:"number"==typeof d&&(be=se+d),be=Math.max(0,be);var Ee="",Qe=0;if(t.options.indentWithTabs)for(var Be=Math.floor(be/K);Be;--Be)Qe+=K,Ee+="\t";if(Qe<be&&(Ee+=He(be-Qe)),Ee!=ue)return bi(w,Ee,ot(n,0),ot(n,ue.length),"+input"),re.stateAfter=null,!0;for(var Ye=0;Ye<w.sel.ranges.length;Ye++){var tt=w.sel.ranges[Ye];if(tt.head.line==n&&tt.head.ch<ue.length){var st=ot(n,ue.length);ea(w,Ye,new jt(st,st));break}}}Ut.defineInitHook=function(t){return Yo.push(t)};var Or=null;function Zo(t){Or=t}function ua(t,n,d,c,w){var M=t.doc;t.display.shift=!1,c||(c=M.sel);var K=+new Date-200,re="paste"==w||t.state.pasteIncoming>K,se=Hr(n),ue=null;if(re&&c.ranges.length>1)if(Or&&Or.text.join("\n")==n){if(c.ranges.length%Or.text.length==0){ue=[];for(var be=0;be<Or.text.length;be++)ue.push(M.splitLines(Or.text[be]))}}else se.length==c.ranges.length&&t.options.pasteLinesPerSelection&&(ue=Ke(se,function(ut){return[ut]}));for(var Ee=t.curOp.updateInput,Qe=c.ranges.length-1;Qe>=0;Qe--){var Be=c.ranges[Qe],Ye=Be.from(),tt=Be.to();Be.empty()&&(d&&d>0?Ye=ot(Ye.line,Ye.ch-d):t.state.overwrite&&!re?tt=ot(tt.line,Math.min(bt(M,tt.line).text.length,tt.ch+We(se).length)):re&&Or&&Or.lineWise&&Or.text.join("\n")==se.join("\n")&&(Ye=tt=ot(Ye.line,0)));var st={from:Ye,to:tt,text:ue?ue[Qe%ue.length]:se,origin:w||(re?"paste":t.state.cutIncoming>K?"cut":"+input")};kn(t.doc,st),nr(t,"inputRead",t,st)}n&&!re&&ru(t,n),Wn(t),t.curOp.updateInput<2&&(t.curOp.updateInput=Ee),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function fa(t,n){var d=t.clipboardData&&t.clipboardData.getData("Text");if(d)return t.preventDefault(),!n.isReadOnly()&&!n.options.disableInput&&n.hasFocus()&&br(n,function(){return ua(n,d,0,null,"paste")}),!0}function ru(t,n){if(t.options.electricChars&&t.options.smartIndent)for(var d=t.doc.sel,c=d.ranges.length-1;c>=0;c--){var w=d.ranges[c];if(!(w.head.ch>100||c&&d.ranges[c-1].head.line==w.head.line)){var M=t.getModeAt(w.head),K=!1;if(M.electricChars){for(var re=0;re<M.electricChars.length;re++)if(n.indexOf(M.electricChars.charAt(re))>-1){K=go(t,w.head.line,"smart");break}}else M.electricInput&&M.electricInput.test(bt(t.doc,w.head.line).text.slice(0,w.head.ch))&&(K=go(t,w.head.line,"smart"));K&&nr(t,"electricInput",t,w.head.line)}}}function ca(t){for(var n=[],d=[],c=0;c<t.doc.sel.ranges.length;c++){var w=t.doc.sel.ranges[c].head.line,M={anchor:ot(w,0),head:ot(w+1,0)};d.push(M),n.push(t.getRange(M.anchor,M.head))}return{text:n,ranges:d}}function nu(t,n,d,c){t.setAttribute("autocorrect",d?"":"off"),t.setAttribute("autocapitalize",c?"":"off"),t.setAttribute("spellcheck",!!n)}function iu(){var t=ee("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),n=ee("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return o?t.style.width="1000px":t.setAttribute("wrap","off"),b&&(t.style.border="1px solid black"),nu(t),n}function ha(t,n,d,c,w){var M=n,K=d,re=bt(t,n.line),se=w&&"rtl"==t.direction?-d:d;function be(pt){var ft;if("codepoint"==c){var gt=re.text.charCodeAt(n.ch+(d>0?0:-1));if(isNaN(gt))ft=null;else{var wt=d>0?gt>=55296&&gt<56320:gt>=56320&&gt<57343;ft=new ot(n.line,Math.max(0,Math.min(re.text.length,n.ch+d*(wt?2:1))),-d)}}else ft=w?function Jo(t,n,d,c){var w=Ge(n,t.doc.direction);if(!w)return Ci(n,d,c);d.ch>=n.text.length?(d.ch=n.text.length,d.sticky="before"):d.ch<=0&&(d.ch=0,d.sticky="after");var M=Oe(w,d.ch,d.sticky),K=w[M];if("ltr"==t.doc.direction&&K.level%2==0&&(c>0?K.to>d.ch:K.from<d.ch))return Ci(n,d,c);var se,re=function(ut,pt){return ki(n,ut instanceof ot?ut.ch:ut,pt)},ue=function(ut){return t.options.lineWrapping?(se=se||Pn(t,n),Is(t,n,se,ut)):{begin:0,end:n.text.length}},be=ue("before"==d.sticky?re(d,-1):d.ch);if("rtl"==t.doc.direction||1==K.level){var Ee=1==K.level==c<0,Qe=re(d,Ee?1:-1);if(null!=Qe&&(Ee?Qe<=K.to&&Qe<=be.end:Qe>=K.from&&Qe>=be.begin)){var Be=Ee?"before":"after";return new ot(d.line,Qe,Be)}}var Ye=function(ut,pt,ft){for(;ut>=0&&ut<w.length;ut+=pt){var wt=w[ut],xt=pt>0==(1!=wt.level),Et=xt?ft.begin:re(ft.end,-1);if(wt.from<=Et&&Et<wt.to||(Et=xt?wt.from:re(wt.to,-1),ft.begin<=Et&&Et<ft.end))return Qt=Et,xt?new ot(d.line,re(Qt,1),"before"):new ot(d.line,Qt,"after")}var Qt},tt=Ye(M+c,c,be);if(tt)return tt;var st=c>0?be.end:re(be.begin,-1);return null==st||c>0&&st==n.text.length||!(tt=Ye(c>0?0:w.length-1,c,ue(st)))?null:tt}(t.cm,re,n,d):Ci(re,n,d);if(null==ft){if(pt||!function ue(){var pt=n.line+se;return!(pt<t.first||pt>=t.first+t.size)&&(n=new ot(pt,n.ch,n.sticky),re=bt(t,pt))}())return!1;n=_i(w,t.cm,re,n.line,se)}else n=ft;return!0}if("char"==c||"codepoint"==c)be();else if("column"==c)be(!0);else if("word"==c||"group"==c)for(var Ee=null,Qe="group"==c,Be=t.cm&&t.cm.getHelper(n,"wordChars"),Ye=!0;!(d<0)||be(!Ye);Ye=!1){var tt=re.text.charAt(n.ch)||"\n",st=Ie(tt,Be)?"w":Qe&&"\n"==tt?"n":!Qe||/\s/.test(tt)?null:"p";if(Qe&&!Ye&&!st&&(st="s"),Ee&&Ee!=st){d<0&&(d=1,be(),n.sticky="after");break}if(st&&(Ee=st),d>0&&!be(!Ye))break}var ut=Pr(t,n,M,K,!0);return hs(M,ut)&&(ut.hitSide=!0),ut}function pa(t,n,d,c){var K,ue,w=t.doc,M=n.left;if("page"==c){var re=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),se=Math.max(re-.5*Gn(t.display),3);K=(d>0?n.bottom:n.top)+d*se}else"line"==c&&(K=d>0?n.bottom+3:n.top-3);for(;(ue=Ls(t,M,K)).outside;){if(d<0?K<=0:K>=w.height){ue.hitSide=!0;break}K+=5*d}return ue}var Pt=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Le,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function su(t,n){var d=As(t,n.line);if(!d||d.hidden)return null;var c=bt(t.doc,n.line),w=$a(d,c,n.line),M=Ge(c,t.doc.direction),K="left";M&&(K=Oe(M,n.ch)%2?"right":"left");var se=tl(w.map,n.ch,K);return se.offset="right"==se.collapse?se.end:se.start,se}function Fi(t,n){return n&&(t.bad=!0),t}function $o(t,n,d){var c;if(n==t.display.lineDiv){if(!(c=t.display.lineDiv.childNodes[d]))return Fi(t.clipPos(ot(t.display.viewTo-1)),!0);n=null,d=0}else for(c=n;;c=c.parentNode){if(!c||c==t.display.lineDiv)return null;if(c.parentNode&&c.parentNode==t.display.lineDiv)break}for(var w=0;w<t.display.view.length;w++){var M=t.display.view[w];if(M.node==c)return Wf(M,n,d)}}function Wf(t,n,d){var c=t.text.firstChild,w=!1;if(!n||!oe(c,n))return Fi(ot(Bt(t.line),0),!0);if(n==c&&(w=!0,n=c.childNodes[d],d=0,!n)){var M=t.rest?We(t.rest):t.line;return Fi(ot(Bt(M),M.text.length),w)}var K=3==n.nodeType?n:null,re=n;for(!K&&1==n.childNodes.length&&3==n.firstChild.nodeType&&(K=n.firstChild,d&&(d=K.nodeValue.length));re.parentNode!=c;)re=re.parentNode;var se=t.measure,ue=se.maps;function be(st,ut,pt){for(var ft=-1;ft<(ue?ue.length:0);ft++)for(var gt=ft<0?se.map:ue[ft],wt=0;wt<gt.length;wt+=3){var xt=gt[wt+2];if(xt==st||xt==ut){var Et=Bt(ft<0?t.line:t.rest[ft]),Qt=gt[wt]+pt;return(pt<0||xt!=st)&&(Qt=gt[wt+(pt?1:0)]),ot(Et,Qt)}}}var Ee=be(K,re,d);if(Ee)return Fi(Ee,w);for(var Qe=re.nextSibling,Be=K?K.nodeValue.length-d:0;Qe;Qe=Qe.nextSibling){if(Ee=be(Qe,Qe.firstChild,0))return Fi(ot(Ee.line,Ee.ch-Be),w);Be+=Qe.textContent.length}for(var Ye=re.previousSibling,tt=d;Ye;Ye=Ye.previousSibling){if(Ee=be(Ye,Ye.firstChild,-1))return Fi(ot(Ee.line,Ee.ch+tt),w);tt+=Ye.textContent.length}}Pt.prototype.init=function(t){var n=this,d=this,c=d.cm,w=d.div=t.lineDiv;function M(re){for(var se=re.target;se;se=se.parentNode){if(se==w)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(se.className))break}return!1}function K(re){if(M(re)&&!ht(c,re)){if(c.somethingSelected())Zo({lineWise:!1,text:c.getSelections()}),"cut"==re.type&&c.replaceSelection("",null,"cut");else{if(!c.options.lineWiseCopyCut)return;var se=ca(c);Zo({lineWise:!0,text:se.text}),"cut"==re.type&&c.operation(function(){c.setSelections(se.ranges,0,z),c.replaceSelection("",null,"cut")})}if(re.clipboardData){re.clipboardData.clearData();var ue=Or.text.join("\n");if(re.clipboardData.setData("Text",ue),re.clipboardData.getData("Text")==ue)return void re.preventDefault()}var be=iu(),Ee=be.firstChild;c.display.lineSpace.insertBefore(be,c.display.lineSpace.firstChild),Ee.value=Or.text.join("\n");var Qe=ie();Te(Ee),setTimeout(function(){c.display.lineSpace.removeChild(be),Qe.focus(),Qe==w&&d.showPrimarySelection()},50)}}w.contentEditable=!0,nu(w,c.options.spellcheck,c.options.autocorrect,c.options.autocapitalize),Xe(w,"paste",function(re){!M(re)||ht(c,re)||fa(re,c)||e<=11&&setTimeout(ir(c,function(){return n.updateFromDOM()}),20)}),Xe(w,"compositionstart",function(re){n.composing={data:re.data,done:!1}}),Xe(w,"compositionupdate",function(re){n.composing||(n.composing={data:re.data,done:!1})}),Xe(w,"compositionend",function(re){n.composing&&(re.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),Xe(w,"touchstart",function(){return d.forceCompositionEnd()}),Xe(w,"input",function(){n.composing||n.readFromDOMSoon()}),Xe(w,"copy",K),Xe(w,"cut",K)},Pt.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},Pt.prototype.prepareSelection=function(){var t=cl(this.cm,!1);return t.focus=ie()==this.div,t},Pt.prototype.showSelection=function(t,n){!t||!this.cm.display.view.length||((t.focus||n)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Pt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Pt.prototype.showPrimarySelection=function(){var t=this.getSelection(),n=this.cm,d=n.doc.sel.primary(),c=d.from(),w=d.to();if(n.display.viewTo==n.display.viewFrom||c.line>=n.display.viewTo||w.line<n.display.viewFrom)t.removeAllRanges();else{var M=$o(n,t.anchorNode,t.anchorOffset),K=$o(n,t.focusNode,t.focusOffset);if(!M||M.bad||!K||K.bad||0!=_t(Qi(M,K),c)||0!=_t(ko(M,K),w)){var re=n.display.view,se=c.line>=n.display.viewFrom&&su(n,c)||{node:re[0].measure.map[2],offset:0},ue=w.line<n.display.viewTo&&su(n,w);if(!ue){var be=re[re.length-1].measure,Ee=be.maps?be.maps[be.maps.length-1]:be.map;ue={node:Ee[Ee.length-1],offset:Ee[Ee.length-2]-Ee[Ee.length-3]}}if(!se||!ue)return void t.removeAllRanges();var Be,Qe=t.rangeCount&&t.getRangeAt(0);try{Be=te(se.node,se.offset,ue.offset,ue.node)}catch(Ye){}Be&&(!ce&&n.state.focused?(t.collapse(se.node,se.offset),Be.collapsed||(t.removeAllRanges(),t.addRange(Be))):(t.removeAllRanges(),t.addRange(Be)),Qe&&null==t.anchorNode?t.addRange(Qe):ce&&this.startGracePeriod()),this.rememberSelection()}}},Pt.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},Pt.prototype.showMultipleSelections=function(t){Z(this.cm.display.cursorDiv,t.cursors),Z(this.cm.display.selectionDiv,t.selection)},Pt.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Pt.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var n=t.getRangeAt(0).commonAncestorContainer;return oe(this.div,n)},Pt.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||ie()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Pt.prototype.blur=function(){this.div.blur()},Pt.prototype.getField=function(){return this.div},Pt.prototype.supportsTouch=function(){return!0},Pt.prototype.receivedFocus=function(){var t=this,n=this;this.selectionInEditor()?setTimeout(function(){return t.pollSelection()},20):br(this.cm,function(){return n.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function d(){n.cm.state.focused&&(n.pollSelection(),n.polling.set(n.cm.options.pollInterval,d))})},Pt.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Pt.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),n=this.cm;if(A&&l&&this.cm.display.gutterSpecs.length&&function au(t){for(var n=t;n;n=n.parentNode)if(/CodeMirror-gutter-wrapper/.test(n.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var d=$o(n,t.anchorNode,t.anchorOffset),c=$o(n,t.focusNode,t.focusOffset);d&&c&&br(n,function(){fr(n.doc,mn(d,c),z),(d.bad||c.bad)&&(n.curOp.selectionChanged=!0)})}}},Pt.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var M,K,re,t=this.cm,n=t.display,d=t.doc.sel.primary(),c=d.from(),w=d.to();if(0==c.ch&&c.line>t.firstLine()&&(c=ot(c.line-1,bt(t.doc,c.line-1).length)),w.ch==bt(t.doc,w.line).text.length&&w.line<t.lastLine()&&(w=ot(w.line+1,0)),c.line<n.viewFrom||w.line>n.viewTo-1)return!1;c.line==n.viewFrom||0==(M=Hn(t,c.line))?(K=Bt(n.view[0].line),re=n.view[0].node):(K=Bt(n.view[M].line),re=n.view[M-1].node.nextSibling);var ue,be,se=Hn(t,w.line);if(se==n.view.length-1?(ue=n.viewTo-1,be=n.lineDiv.lastChild):(ue=Bt(n.view[se+1].line)-1,be=n.view[se+1].node.previousSibling),!re)return!1;for(var Ee=t.doc.splitLines(function lu(t,n,d,c,w){var M="",K=!1,re=t.doc.lineSeparator(),se=!1;function ue(Be){return function(Ye){return Ye.id==Be}}function be(){K&&(M+=re,se&&(M+=re),K=se=!1)}function Ee(Be){Be&&(be(),M+=Be)}function Qe(Be){if(1==Be.nodeType){var Ye=Be.getAttribute("cm-text");if(Ye)return void Ee(Ye);var st,tt=Be.getAttribute("cm-marker");if(tt){var ut=t.findMarks(ot(c,0),ot(w+1,0),ue(+tt));return void(ut.length&&(st=ut[0].find(0))&&Ee(hn(t.doc,st.from,st.to).join(re)))}if("false"==Be.getAttribute("contenteditable"))return;var pt=/^(pre|div|p|li|table|br)$/i.test(Be.nodeName);if(!/^br$/i.test(Be.nodeName)&&0==Be.textContent.length)return;pt&&be();for(var ft=0;ft<Be.childNodes.length;ft++)Qe(Be.childNodes[ft]);/^(pre|p)$/i.test(Be.nodeName)&&(se=!0),pt&&(K=!0)}else 3==Be.nodeType&&Ee(Be.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Qe(n),n!=d;)n=n.nextSibling,se=!1;return M}(t,re,be,K,ue)),Qe=hn(t.doc,ot(K,0),ot(ue,bt(t.doc,ue).text.length));Ee.length>1&&Qe.length>1;)if(We(Ee)==We(Qe))Ee.pop(),Qe.pop(),ue--;else{if(Ee[0]!=Qe[0])break;Ee.shift(),Qe.shift(),K++}for(var Be=0,Ye=0,tt=Ee[0],st=Qe[0],ut=Math.min(tt.length,st.length);Be<ut&&tt.charCodeAt(Be)==st.charCodeAt(Be);)++Be;for(var pt=We(Ee),ft=We(Qe),gt=Math.min(pt.length-(1==Ee.length?Be:0),ft.length-(1==Qe.length?Be:0));Ye<gt&&pt.charCodeAt(pt.length-Ye-1)==ft.charCodeAt(ft.length-Ye-1);)++Ye;if(1==Ee.length&&1==Qe.length&&K==c.line)for(;Be&&Be>c.ch&&pt.charCodeAt(pt.length-Ye-1)==ft.charCodeAt(ft.length-Ye-1);)Be--,Ye++;Ee[Ee.length-1]=pt.slice(0,pt.length-Ye).replace(/^\u200b+/,""),Ee[0]=Ee[0].slice(Be).replace(/\u200b+$/,"");var wt=ot(K,Be),xt=ot(ue,Qe.length?We(Qe).length-Ye:0);return Ee.length>1||Ee[0]||_t(wt,xt)?(bi(t.doc,Ee,wt,xt,"+input"),!0):void 0},Pt.prototype.ensurePolled=function(){this.forceCompositionEnd()},Pt.prototype.reset=function(){this.forceCompositionEnd()},Pt.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Pt.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},Pt.prototype.updateFromDOM=function(){var t=this;(this.cm.isReadOnly()||!this.pollContent())&&br(this.cm,function(){return mr(t.cm)})},Pt.prototype.setUneditable=function(t){t.contentEditable="false"},Pt.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||ir(this.cm,ua)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},Pt.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},Pt.prototype.onContextMenu=function(){},Pt.prototype.resetPosition=function(){},Pt.prototype.needsContentAttribute=!0;var qt=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new Le,this.hasSelection=!1,this.composing=null};qt.prototype.init=function(t){var n=this,d=this,c=this.cm;this.createField(t);var w=this.textarea;function M(K){if(!ht(c,K)){if(c.somethingSelected())Zo({lineWise:!1,text:c.getSelections()});else{if(!c.options.lineWiseCopyCut)return;var re=ca(c);Zo({lineWise:!0,text:re.text}),"cut"==K.type?c.setSelections(re.ranges,null,z):(d.prevInput="",w.value=re.text.join("\n"),Te(w))}"cut"==K.type&&(c.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),b&&(w.style.width="0px"),Xe(w,"input",function(){m&&e>=9&&n.hasSelection&&(n.hasSelection=null),d.poll()}),Xe(w,"paste",function(K){ht(c,K)||fa(K,c)||(c.state.pasteIncoming=+new Date,d.fastPoll())}),Xe(w,"cut",M),Xe(w,"copy",M),Xe(t.scroller,"paste",function(K){if(!Nr(t,K)&&!ht(c,K)){if(!w.dispatchEvent)return c.state.pasteIncoming=+new Date,void d.focus();var re=new Event("paste");re.clipboardData=K.clipboardData,w.dispatchEvent(re)}}),Xe(t.lineSpace,"selectstart",function(K){Nr(t,K)||it(K)}),Xe(w,"compositionstart",function(){var K=c.getCursor("from");d.composing&&d.composing.range.clear(),d.composing={start:K,range:c.markText(K,c.getCursor("to"),{className:"CodeMirror-composing"})}}),Xe(w,"compositionend",function(){d.composing&&(d.poll(),d.composing.range.clear(),d.composing=null)})},qt.prototype.createField=function(t){this.wrapper=iu(),this.textarea=this.wrapper.firstChild},qt.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},qt.prototype.prepareSelection=function(){var t=this.cm,n=t.display,d=t.doc,c=cl(t);if(t.options.moveInputWithCursor){var w=Lr(t,d.sel.primary().head,"div"),M=n.wrapper.getBoundingClientRect(),K=n.lineDiv.getBoundingClientRect();c.teTop=Math.max(0,Math.min(n.wrapper.clientHeight-10,w.top+K.top-M.top)),c.teLeft=Math.max(0,Math.min(n.wrapper.clientWidth-10,w.left+K.left-M.left))}return c},qt.prototype.showSelection=function(t){var d=this.cm.display;Z(d.cursorDiv,t.cursors),Z(d.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},qt.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var n=this.cm;if(n.somethingSelected()){this.prevInput="";var d=n.getSelection();this.textarea.value=d,n.state.focused&&Te(this.textarea),m&&e>=9&&(this.hasSelection=d)}else t||(this.prevInput=this.textarea.value="",m&&e>=9&&(this.hasSelection=null))}},qt.prototype.getField=function(){return this.textarea},qt.prototype.supportsTouch=function(){return!1},qt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!T||ie()!=this.textarea))try{this.textarea.focus()}catch(t){}},qt.prototype.blur=function(){this.textarea.blur()},qt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},qt.prototype.receivedFocus=function(){this.slowPoll()},qt.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},qt.prototype.fastPoll=function(){var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,function d(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,d))})},qt.prototype.poll=function(){var t=this,n=this.cm,d=this.textarea,c=this.prevInput;if(this.contextMenuPending||!n.state.focused||ai(d)&&!c&&!this.composing||n.isReadOnly()||n.options.disableInput||n.state.keySeq)return!1;var w=d.value;if(w==c&&!n.somethingSelected())return!1;if(m&&e>=9&&this.hasSelection===w||B&&/[\uf700-\uf7ff]/.test(w))return n.display.input.reset(),!1;if(n.doc.sel==n.display.selForContextMenu){var M=w.charCodeAt(0);if(8203==M&&!c&&(c="\u200b"),8666==M)return this.reset(),this.cm.execCommand("undo")}for(var K=0,re=Math.min(c.length,w.length);K<re&&c.charCodeAt(K)==w.charCodeAt(K);)++K;return br(n,function(){ua(n,w.slice(K),c.length-K,null,t.composing?"*compose":null),w.length>1e3||w.indexOf("\n")>-1?d.value=t.prevInput="":t.prevInput=w,t.composing&&(t.composing.range.clear(),t.composing.range=n.markText(t.composing.start,n.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},qt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},qt.prototype.onKeyPress=function(){m&&e>=9&&(this.hasSelection=null),this.fastPoll()},qt.prototype.onContextMenu=function(t){var n=this,d=n.cm,c=d.display,w=n.textarea;n.contextMenuPending&&n.contextMenuPending();var M=vn(d,t),K=c.scroller.scrollTop;if(M&&!s){d.options.resetSelectionOnContextMenu&&-1==d.doc.sel.contains(M)&&ir(d,fr)(d.doc,mn(M),z);var Ee,se=w.style.cssText,ue=n.wrapper.style.cssText,be=n.wrapper.offsetParent.getBoundingClientRect();if(n.wrapper.style.cssText="position: static",w.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-be.top-5)+"px; left: "+(t.clientX-be.left-5)+"px;\n      z-index: 1000; background: "+(m?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",o&&(Ee=window.scrollY),c.input.focus(),o&&window.scrollTo(null,Ee),c.input.reset(),d.somethingSelected()||(w.value=n.prevInput=" "),n.contextMenuPending=Be,c.selForContextMenu=d.doc.sel,clearTimeout(c.detectingSelectAll),m&&e>=9&&Qe(),j){At(t);var Ye=function(){ct(window,"mouseup",Ye),setTimeout(Be,20)};Xe(window,"mouseup",Ye)}else setTimeout(Be,50)}function Qe(){if(null!=w.selectionStart){var tt=d.somethingSelected(),st="\u200b"+(tt?w.value:"");w.value="\u21da",w.value=st,n.prevInput=tt?"":"\u200b",w.selectionStart=1,w.selectionEnd=st.length,c.selForContextMenu=d.doc.sel}}function Be(){if(n.contextMenuPending==Be&&(n.contextMenuPending=!1,n.wrapper.style.cssText=ue,w.style.cssText=se,m&&e<9&&c.scrollbars.setScrollTop(c.scroller.scrollTop=K),null!=w.selectionStart)){(!m||m&&e<9)&&Qe();var tt=0,st=function(){c.selForContextMenu==d.doc.sel&&0==w.selectionStart&&w.selectionEnd>0&&"\u200b"==n.prevInput?ir(d,Il)(d):tt++<10?c.detectingSelectAll=setTimeout(st,500):(c.selForContextMenu=null,c.input.reset())};c.detectingSelectAll=setTimeout(st,200)}}},qt.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},qt.prototype.setUneditable=function(){},qt.prototype.needsContentAttribute=!1,function eu(t){var n=t.optionHandlers;function d(c,w,M,K){t.defaults[c]=w,M&&(n[c]=K?function(re,se,ue){ue!=ri&&M(re,se,ue)}:M)}t.defineOption=d,t.Init=ri,d("value","",function(c,w){return c.setValue(w)},!0),d("mode",null,function(c,w){c.doc.modeOption=w,Vs(c)},!0),d("indentUnit",2,Vs,!0),d("indentWithTabs",!1),d("smartIndent",!0),d("tabSize",4,function(c){no(c),di(c),mr(c)},!0),d("lineSeparator",null,function(c,w){if(c.doc.lineSep=w,w){var M=[],K=c.doc.first;c.doc.iter(function(se){for(var ue=0;;){var be=se.text.indexOf(w,ue);if(-1==be)break;ue=be+w.length,M.push(ot(K,be))}K++});for(var re=M.length-1;re>=0;re--)bi(c.doc,w,M[re],ot(M[re].line,M[re].ch+w.length))}}),d("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(c,w,M){c.state.specialChars=new RegExp(w.source+(w.test("\t")?"":"|\t"),"g"),M!=ri&&c.refresh()}),d("specialCharPlaceholder",qa,function(c){return c.refresh()},!0),d("electricChars",!0),d("inputStyle",T?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),d("spellcheck",!1,function(c,w){return c.getInputField().spellcheck=w},!0),d("autocorrect",!1,function(c,w){return c.getInputField().autocorrect=w},!0),d("autocapitalize",!1,function(c,w){return c.getInputField().autocapitalize=w},!0),d("rtlMoveVisually",!P),d("wholeLineUpdateBefore",!0),d("theme","default",function(c){Zl(c),ro(c)},!0),d("keyMap","default",function(c,w,M){var K=Zn(w),re=M!=ri&&Zn(M);re&&re.detach&&re.detach(c,K),K.attach&&K.attach(c,re||null)}),d("extraKeys",null),d("configureMouse",null),d("lineWrapping",!1,tu,!0),d("gutters",[],function(c,w){c.display.gutterSpecs=Xs(w,c.options.lineNumbers),ro(c)},!0),d("fixedGutter",!0,function(c,w){c.display.gutters.style.left=w?Os(c.display)+"px":"0",c.refresh()},!0),d("coverGutterNextToScrollbar",!1,function(c){return Xn(c)},!0),d("scrollbarStyle","native",function(c){dl(c),Xn(c),c.display.scrollbars.setScrollTop(c.doc.scrollTop),c.display.scrollbars.setScrollLeft(c.doc.scrollLeft)},!0),d("lineNumbers",!1,function(c,w){c.display.gutterSpecs=Xs(c.options.gutters,w),ro(c)},!0),d("firstLineNumber",1,ro,!0),d("lineNumberFormatter",function(c){return c},ro,!0),d("showCursorWhenSelecting",!1,Ji,!0),d("resetSelectionOnContextMenu",!0),d("lineWiseCopyCut",!0),d("pasteLinesPerSelection",!0),d("selectionsMayTouch",!1),d("readOnly",!1,function(c,w){"nocursor"==w&&(yi(c),c.display.input.blur()),c.display.input.readOnlyChanged(w)}),d("screenReaderLabel",null,function(c,w){w=""===w?null:w,c.display.input.screenReaderLabelChanged(w)}),d("disableInput",!1,function(c,w){w||c.display.input.reset()},!0),d("dragDrop",!0,Gf),d("allowDropFileTypes",null),d("cursorBlinkRate",530),d("cursorScrollMargin",0),d("cursorHeight",1,Ji,!0),d("singleCursorHeightPerLine",!0,Ji,!0),d("workTime",100),d("workDelay",100),d("flattenSpans",!0,no,!0),d("addModeClass",!1,no,!0),d("pollInterval",100),d("undoDepth",200,function(c,w){return c.doc.history.undoDepth=w}),d("historyEventDelay",1250),d("viewportMargin",10,function(c){return c.refresh()},!0),d("maxHighlightLength",1e4,no,!0),d("moveInputWithCursor",!0,function(c,w){w||c.display.input.resetPosition()}),d("tabindex",null,function(c,w){return c.display.input.getField().tabIndex=w||""}),d("autofocus",null),d("direction","ltr",function(c,w){return c.doc.setDirection(w)},!0),d("phrases",null)}(Ut),function ou(t){var n=t.optionHandlers,d=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(c,w){var M=this.options,K=M[c];M[c]==w&&"mode"!=c||(M[c]=w,n.hasOwnProperty(c)&&ir(this,n[c])(this,w,K),dt(this,"optionChange",this,c))},getOption:function(c){return this.options[c]},getDoc:function(){return this.doc},addKeyMap:function(c,w){this.state.keyMaps[w?"push":"unshift"](Zn(c))},removeKeyMap:function(c){for(var w=this.state.keyMaps,M=0;M<w.length;++M)if(w[M]==c||w[M].name==c)return w.splice(M,1),!0},addOverlay:pr(function(c,w){var M=c.token?c:t.getMode(this.options,c);if(M.startState)throw new Error("Overlays may not be stateful.");(function mt(t,n,d){for(var c=0,w=d(n);c<t.length&&d(t[c])<=w;)c++;t.splice(c,0,n)})(this.state.overlays,{mode:M,modeSpec:c,opaque:w&&w.opaque,priority:w&&w.priority||0},function(K){return K.priority}),this.state.modeGen++,mr(this)}),removeOverlay:pr(function(c){for(var w=this.state.overlays,M=0;M<w.length;++M){var K=w[M].modeSpec;if(K==c||"string"==typeof c&&K.name==c)return w.splice(M,1),this.state.modeGen++,void mr(this)}}),indentLine:pr(function(c,w,M){"string"!=typeof w&&"number"!=typeof w&&(w=null==w?this.options.smartIndent?"smart":"prev":w?"add":"subtract"),Pi(this.doc,c)&&go(this,c,w,M)}),indentSelection:pr(function(c){for(var w=this.doc.sel.ranges,M=-1,K=0;K<w.length;K++){var re=w[K];if(re.empty())re.head.line>M&&(go(this,re.head.line,c,!0),M=re.head.line,K==this.doc.sel.primIndex&&Wn(this));else{var se=re.from(),ue=re.to(),be=Math.max(M,se.line);M=Math.min(this.lastLine(),ue.line-(ue.ch?0:1))+1;for(var Ee=be;Ee<M;++Ee)go(this,Ee,c);var Qe=this.doc.sel.ranges;0==se.ch&&w.length==Qe.length&&Qe[K].from().ch>0&&ea(this.doc,K,new jt(se,Qe[K].to()),z)}}}),getTokenAt:function(c,w){return Ta(this,c,w)},getLineTokens:function(c,w){return Ta(this,ot(c),w,!0)},getTokenTypeAt:function(c){c=St(this.doc,c);var se,w=ds(this,bt(this.doc,c.line)),M=0,K=(w.length-1)/2,re=c.ch;if(0==re)se=w[2];else for(;;){var ue=M+K>>1;if((ue?w[2*ue-1]:0)>=re)K=ue;else{if(!(w[2*ue+1]<re)){se=w[2*ue+2];break}M=ue+1}}var be=se?se.indexOf("overlay "):-1;return be<0?se:0==be?null:se.slice(0,be-1)},getModeAt:function(c){var w=this.doc.mode;return w.innerMode?t.innerMode(w,this.getTokenAt(c).state).mode:w},getHelper:function(c,w){return this.getHelpers(c,w)[0]},getHelpers:function(c,w){var M=[];if(!d.hasOwnProperty(w))return M;var K=d[w],re=this.getModeAt(c);if("string"==typeof re[w])K[re[w]]&&M.push(K[re[w]]);else if(re[w])for(var se=0;se<re[w].length;se++){var ue=K[re[w][se]];ue&&M.push(ue)}else re.helperType&&K[re.helperType]?M.push(K[re.helperType]):K[re.name]&&M.push(K[re.name]);for(var be=0;be<K._global.length;be++){var Ee=K._global[be];Ee.pred(re,this)&&-1==Me(M,Ee.val)&&M.push(Ee.val)}return M},getStateAfter:function(c,w){var M=this.doc;return Ui(this,(c=_a(M,null==c?M.first+M.size-1:c))+1,w).state},cursorCoords:function(c,w){var K=this.doc.sel.primary();return Lr(this,null==c?K.head:"object"==typeof c?St(this.doc,c):c?K.from():K.to(),w||"page")},charCoords:function(c,w){return ln(this,St(this.doc,c),w||"page")},coordsChar:function(c,w){return Ls(this,(c=sl(this,c,w||"page")).left,c.top)},lineAtHeight:function(c,w){return c=sl(this,{top:c,left:0},w||"page").top,Rn(this.doc,c+this.display.viewOffset)},heightAtLine:function(c,w,M){var re,K=!1;if("number"==typeof c){var se=this.doc.first+this.doc.size-1;c<this.doc.first?c=this.doc.first:c>se&&(c=se,K=!0),re=bt(this.doc,c)}else re=c;return Io(this,re,{top:0,left:0},w||"page",M||K).top+(K?this.doc.height-Xr(re):0)},defaultTextHeight:function(){return Gn(this.display)},defaultCharWidth:function(){return vi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(c,w,M,K,re){var se=this.display,ue=(c=Lr(this,St(this.doc,c))).bottom,be=c.left;if(w.style.position="absolute",w.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(w),se.sizer.appendChild(w),"over"==K)ue=c.top;else if("above"==K||"near"==K){var Ee=Math.max(se.wrapper.clientHeight,this.doc.height),Qe=Math.max(se.sizer.clientWidth,se.lineSpace.clientWidth);("above"==K||c.bottom+w.offsetHeight>Ee)&&c.top>w.offsetHeight?ue=c.top-w.offsetHeight:c.bottom+w.offsetHeight<=Ee&&(ue=c.bottom),be+w.offsetWidth>Qe&&(be=Qe-w.offsetWidth)}w.style.top=ue+"px",w.style.left=w.style.right="","right"==re?(be=se.sizer.clientWidth-w.offsetWidth,w.style.right="0px"):("left"==re?be=0:"middle"==re&&(be=(se.sizer.clientWidth-w.offsetWidth)/2),w.style.left=be+"px"),M&&function nf(t,n){var d=Ps(t,n);null!=d.scrollTop&&Zi(t,d.scrollTop),null!=d.scrollLeft&&zn(t,d.scrollLeft)}(this,{left:be,top:ue,right:be+w.offsetWidth,bottom:ue+w.offsetHeight})},triggerOnKeyDown:pr(zl),triggerOnKeyPress:pr(Qr),triggerOnKeyUp:ql,triggerOnMouseDown:pr(Xl),execCommand:function(c){if(Yr.hasOwnProperty(c))return Yr[c].call(null,this)},triggerElectric:pr(function(c){ru(this,c)}),findPosH:function(c,w,M,K){var re=1;w<0&&(re=-1,w=-w);for(var se=St(this.doc,c),ue=0;ue<w&&!(se=ha(this.doc,se,re,M,K)).hitSide;++ue);return se},moveH:pr(function(c,w){var M=this;this.extendSelectionsBy(function(K){return M.display.shift||M.doc.extend||K.empty()?ha(M.doc,K.head,c,w,M.options.rtlMoveVisually):c<0?K.from():K.to()},ge)}),deleteH:pr(function(c,w){var M=this.doc.sel,K=this.doc;M.somethingSelected()?K.replaceSelection("",null,"+delete"):$n(this,function(re){var se=ha(K,re.head,c,w,!1);return c<0?{from:se,to:re.head}:{from:re.head,to:se}})}),findPosV:function(c,w,M,K){var re=1,se=K;w<0&&(re=-1,w=-w);for(var ue=St(this.doc,c),be=0;be<w;++be){var Ee=Lr(this,ue,"div");if(null==se?se=Ee.left:Ee.left=se,(ue=pa(this,Ee,re,M)).hitSide)break}return ue},moveV:pr(function(c,w){var M=this,K=this.doc,re=[],se=!this.display.shift&&!K.extend&&K.sel.somethingSelected();if(K.extendSelectionsBy(function(be){if(se)return c<0?be.from():be.to();var Ee=Lr(M,be.head,"div");null!=be.goalColumn&&(Ee.left=be.goalColumn),re.push(Ee.left);var Qe=pa(M,Ee,c,w);return"page"==w&&be==K.sel.primary()&&Qs(M,ln(M,Qe,"div").top-Ee.top),Qe},ge),re.length)for(var ue=0;ue<K.sel.ranges.length;ue++)K.sel.ranges[ue].goalColumn=re[ue]}),findWordAt:function(c){var M=bt(this.doc,c.line).text,K=c.ch,re=c.ch;if(M){var se=this.getHelper(c,"wordChars");"before"!=c.sticky&&re!=M.length||!K?++re:--K;for(var ue=M.charAt(K),be=Ie(ue,se)?function(Ee){return Ie(Ee,se)}:/\s/.test(ue)?function(Ee){return/\s/.test(Ee)}:function(Ee){return!/\s/.test(Ee)&&!Ie(Ee)};K>0&&be(M.charAt(K-1));)--K;for(;re<M.length&&be(M.charAt(re));)++re}return new jt(ot(c.line,K),ot(c.line,re))},toggleOverwrite:function(c){null!=c&&c==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?pe(this.display.cursorDiv,"CodeMirror-overwrite"):W(this.display.cursorDiv,"CodeMirror-overwrite"),dt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ie()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:pr(function(c,w){Yi(this,c,w)}),getScrollInfo:function(){var c=this.display.scroller;return{left:c.scrollLeft,top:c.scrollTop,height:c.scrollHeight-yr(this)-this.display.barHeight,width:c.scrollWidth-yr(this)-this.display.barWidth,clientHeight:dn(this),clientWidth:an(this)}},scrollIntoView:pr(function(c,w){null==c?(c={from:this.doc.sel.primary().head,to:null},null==w&&(w=this.options.cursorScrollMargin)):"number"==typeof c?c={from:ot(c,0),to:null}:null==c.from&&(c={from:c,to:null}),c.to||(c.to=c.from),c.margin=w||0,null!=c.from.line?function of(t,n){Ro(t),t.curOp.scrollToPos=n}(this,c):Us(this,c.from,c.to,c.margin)}),setSize:pr(function(c,w){var M=this,K=function(se){return"number"==typeof se||/^\d+$/.test(String(se))?se+"px":se};null!=c&&(this.display.wrapper.style.width=K(c)),null!=w&&(this.display.wrapper.style.height=K(w)),this.options.lineWrapping&&il(this);var re=this.display.viewFrom;this.doc.iter(re,this.display.viewTo,function(se){if(se.widgets)for(var ue=0;ue<se.widgets.length;ue++)if(se.widgets[ue].noHScroll){Wt(M,re,"widget");break}++re}),this.curOp.forceUpdate=!0,dt(this,"refresh",this)}),operation:function(c){return br(this,c)},startOperation:function(){return yn(this)},endOperation:function(){return Jn(this)},refresh:pr(function(){var c=this.display.cachedTextHeight;mr(this),this.curOp.forceUpdate=!0,di(this),Yi(this,this.doc.scrollLeft,this.doc.scrollTop),qs(this.display),(null==c||Math.abs(c-Gn(this.display))>.5||this.options.lineWrapping)&&Rs(this),dt(this,"refresh",this)}),swapDoc:pr(function(c){var w=this.doc;return w.cm=null,this.state.selectingText&&this.state.selectingText(),io(this,c),di(this),this.display.input.reset(),Yi(this,c.scrollLeft,c.scrollTop),this.curOp.forceScroll=!0,nr(this,"swapDoc",this,w),w}),phrase:function(c){var w=this.options.phrases;return w&&Object.prototype.hasOwnProperty.call(w,c)?w[c]:c},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},vt(t),t.registerHelper=function(c,w,M){d.hasOwnProperty(c)||(d[c]=t[c]={_global:[]}),d[c][w]=M},t.registerGlobalHelper=function(c,w,M,K){t.registerHelper(c,w,K),d[c]._global.push({pred:M,val:K})}}(Ut);var qf="iter insert remove copy getEditor constructor".split(" ");for(var es in xr.prototype)xr.prototype.hasOwnProperty(es)&&Me(qf,es)<0&&(Ut.prototype[es]=function(t){return function(){return t.apply(this.doc,arguments)}}(xr.prototype[es]));return vt(xr),Ut.inputStyles={textarea:qt,contenteditable:Pt},Ut.defineMode=function(t){!Ut.defaults.mode&&"null"!=t&&(Ut.defaults.mode=t),ji.apply(this,arguments)},Ut.defineMIME=function bo(t,n){nn[t]=n},Ut.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),Ut.defineMIME("text/plain","null"),Ut.defineExtension=function(t,n){Ut.prototype[t]=n},Ut.defineDocExtension=function(t,n){xr.prototype[t]=n},Ut.fromTextArea=function zf(t,n){if((n=n?ke(n):{}).value=t.value,!n.tabindex&&t.tabIndex&&(n.tabindex=t.tabIndex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var d=ie();n.autofocus=d==t||null!=t.getAttribute("autofocus")&&d==document.body}function c(){t.value=re.getValue()}var w;if(t.form&&(Xe(t.form,"submit",c),!n.leaveSubmitMethodAlone)){var M=t.form;w=M.submit;try{var K=M.submit=function(){c(),M.submit=w,M.submit(),M.submit=K}}catch(se){}}n.finishInit=function(se){se.save=c,se.getTextArea=function(){return t},se.toTextArea=function(){se.toTextArea=isNaN,c(),t.parentNode.removeChild(se.getWrapperElement()),t.style.display="",t.form&&(ct(t.form,"submit",c),!n.leaveSubmitMethodAlone&&"function"==typeof t.form.submit&&(t.form.submit=w))}},t.style.display="none";var re=Ut(function(se){return t.parentNode.insertBefore(se,t.nextSibling)},n);return re},function uu(t){t.off=ct,t.on=Xe,t.wheelEventPixels=yf,t.Doc=xr,t.splitLines=Hr,t.countColumn=de,t.findColumn=xe,t.isWordChar=Se,t.Pass=H,t.signal=dt,t.Line=li,t.changeEnd=bn,t.scrollbarModel=Hs,t.Pos=ot,t.cmpPos=_t,t.modes=Wr,t.mimeModes=nn,t.resolveMode=Er,t.getMode=Mi,t.modeExtensions=zr,t.extendMode=xo,t.copyState=Tr,t.startState=On,t.innerMode=Bi,t.commands=Yr,t.keyMap=Kr,t.keyName=ia,t.isModifierKey=Xo,t.lookupKey=Fn,t.normalizeKeyMap=na,t.StringStream=Xt,t.SharedTextMarker=wi,t.TextMarker=Cn,t.LineWidget=uo,t.e_preventDefault=it,t.e_stopPropagation=Lt,t.e_stop=At,t.addClass=pe,t.contains=oe,t.rmClass=W,t.keyNames=_n}(Ut),Ut.version="5.65.6",Ut}),function(J){"object"==typeof exports&&"object"==typeof module?J(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],J):J(CodeMirror)}(function(J){"use strict";J.defineMode("turtle",function(ae){var q,ce=ae.indentUnit;function h(s){return new RegExp("^(?:"+s.join("|")+")$","i")}h([]);var m=h(["@prefix","@base","a"]),e=/[*+\-<>=&|]/;function o(s,v){var x=s.next();if(q=null,"<"==x&&!s.match(/^[\s\u00a0=]/,!1))return s.match(/^[^\s\u00a0>]*>?/),"atom";if('"'==x||"'"==x)return v.tokenize=function f(s){return function(v,x){for(var b,a=!1;null!=(b=v.next());){if(b==s&&!a){x.tokenize=o;break}a=!a&&"\\"==b}return"string"}}(x),v.tokenize(s,v);if(/[{}\(\),\.;\[\]]/.test(x))return q=x,null;if("#"==x)return s.skipToEnd(),"comment";if(e.test(x))return s.eatWhile(e),null;if(":"==x)return"operator";if(s.eatWhile(/[_\w\d]/),":"==s.peek())return"variable-3";var a=s.current();return m.test(a)?"meta":x>="A"&&x<="Z"?"comment":"keyword"}function l(s,v,x){s.context={prev:s.context,indent:s.indent,col:x,type:v}}function y(s){s.indent=s.context.indent,s.context=s.context.prev}return{startState:function(){return{tokenize:o,context:null,indent:0,col:0}},token:function(s,v){if(s.sol()&&(v.context&&null==v.context.align&&(v.context.align=!1),v.indent=s.indentation()),s.eatSpace())return null;var x=v.tokenize(s,v);if("comment"!=x&&v.context&&null==v.context.align&&"pattern"!=v.context.type&&(v.context.align=!0),"("==q)l(v,")",s.column());else if("["==q)l(v,"]",s.column());else if("{"==q)l(v,"}",s.column());else if(/[\]\}\)]/.test(q)){for(;v.context&&"pattern"==v.context.type;)y(v);v.context&&q==v.context.type&&y(v)}else"."==q&&v.context&&"pattern"==v.context.type?y(v):/atom|string|variable/.test(x)&&v.context&&(/[\}\]]/.test(v.context.type)?l(v,"pattern",s.column()):"pattern"==v.context.type&&!v.context.align&&(v.context.align=!0,v.context.col=s.column()));return x},indent:function(s,v){var x=v&&v.charAt(0),a=s.context;if(/[\]\}]/.test(x))for(;a&&"pattern"==a.type;)a=a.prev;var b=a&&x==a.type;return a?"pattern"==a.type?a.col:a.align?a.col+(b?0:1):a.indent+(b?0:ce):0},lineComment:"#"}}),J.defineMIME("text/turtle","turtle")}),function(J){"object"==typeof exports&&"object"==typeof module?J(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],J):J(CodeMirror)}(function(J){"use strict";J.defineMode("sparql",function(ae){var q,ce=ae.indentUnit;function h(v){return new RegExp("^(?:"+v.join("|")+")$","i")}var F=h(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","iri","uri","bnode","count","sum","min","max","avg","sample","group_concat","rand","abs","ceil","floor","round","concat","substr","strlen","replace","ucase","lcase","encode_for_uri","contains","strstarts","strends","strbefore","strafter","year","month","day","hours","minutes","seconds","timezone","tz","now","uuid","struuid","md5","sha1","sha256","sha384","sha512","coalesce","if","strlang","strdt","isnumeric","regex","exists","isblank","isliteral","a","bind"]),m=h(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc","as","having","undef","values","group","minus","in","not","service","silent","using","insert","delete","union","true","false","with","data","copy","to","move","add","create","drop","clear","load"]),e=/[*+\-<>=&|\^\/!\?]/;function o(v,x){var a=v.next();if(q=null,"$"==a||"?"==a)return"?"==a&&v.match(/\s/,!1)?"operator":(v.match(/^[A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][A-Za-z0-9_\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]*/),"variable-2");if("<"==a&&!v.match(/^[\s\u00a0=]/,!1))return v.match(/^[^\s\u00a0>]*>?/),"atom";if('"'==a||"'"==a)return x.tokenize=function l(v){return function(x,a){for(var A,b=!1;null!=(A=x.next());){if(A==v&&!b){a.tokenize=o;break}b=!b&&"\\"==A}return"string"}}(a),x.tokenize(v,x);if(/[{}\(\),\.;\[\]]/.test(a))return q=a,"bracket";if("#"==a)return v.skipToEnd(),"comment";if(e.test(a))return"operator";if(":"==a)return f(v),"atom";if("@"==a)return v.eatWhile(/[a-z\d\-]/i),"meta";if(v.eatWhile(/[_\w\d]/),v.eat(":"))return f(v),"atom";var b=v.current();return F.test(b)?"builtin":m.test(b)?"keyword":"variable"}function f(v){v.match(/(\.(?=[\w_\-\\%])|[:\w_-]|\\[-\\_~.!$&'()*+,;=/?#@%]|%[a-f\d][a-f\d])+/i)}function y(v,x,a){v.context={prev:v.context,indent:v.indent,col:a,type:x}}function s(v){v.indent=v.context.indent,v.context=v.context.prev}return{startState:function(){return{tokenize:o,context:null,indent:0,col:0}},token:function(v,x){if(v.sol()&&(x.context&&null==x.context.align&&(x.context.align=!1),x.indent=v.indentation()),v.eatSpace())return null;var a=x.tokenize(v,x);if("comment"!=a&&x.context&&null==x.context.align&&"pattern"!=x.context.type&&(x.context.align=!0),"("==q)y(x,")",v.column());else if("["==q)y(x,"]",v.column());else if("{"==q)y(x,"}",v.column());else if(/[\]\}\)]/.test(q)){for(;x.context&&"pattern"==x.context.type;)s(x);x.context&&q==x.context.type&&(s(x),"}"==q&&x.context&&"pattern"==x.context.type&&s(x))}else"."==q&&x.context&&"pattern"==x.context.type?s(x):/atom|string|variable/.test(a)&&x.context&&(/[\}\]]/.test(x.context.type)?y(x,"pattern",v.column()):"pattern"==x.context.type&&!x.context.align&&(x.context.align=!0,x.context.col=v.column()));return a},indent:function(v,x){var a=x&&x.charAt(0),b=v.context;if(/[\]\}]/.test(a))for(;b&&"pattern"==b.type;)b=b.prev;var A=b&&a==b.type;return b?"pattern"==b.type?b.col:b.align?b.col+(A?0:1):b.indent+(A?0:ce):0},lineComment:"#"}}),J.defineMIME("application/sparql-query","sparql")});