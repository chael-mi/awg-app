var Cg=Object.defineProperty,Sg=Object.defineProperties,Ag=Object.getOwnPropertyDescriptors,Iu=Object.getOwnPropertySymbols,gp=Object.prototype.hasOwnProperty,yp=Object.prototype.propertyIsEnumerable,vp=(J,ie,ue)=>ie in J?Cg(J,ie,{enumerable:!0,configurable:!0,writable:!0,value:ue}):J[ie]=ue,cn=(J,ie)=>{for(var ue in ie||(ie={}))gp.call(ie,ue)&&vp(J,ue,ie[ue]);if(Iu)for(var ue of Iu(ie))yp.call(ie,ue)&&vp(J,ue,ie[ue]);return J},us=(J,ie)=>Sg(J,Ag(ie)),mp=(J,ie)=>{var ue={};for(var q in J)gp.call(J,q)&&ie.indexOf(q)<0&&(ue[q]=J[q]);if(null!=J&&Iu)for(var q of Iu(J))ie.indexOf(q)<0&&yp.call(J,q)&&(ue[q]=J[q]);return ue};function dateConverter(J){const ie=1721425.5,q=["So","Mo","Di","Mi","Do","Fr","Sa"],a={GREGORIAN:["ZERO","Jan","Feb","M\xe4rz","Apr","Mai","Juni","Juli","Aug","Sep","Okt","Nov","Dez"],JULIAN:["ZERO","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JEWISH:["ZERO","Tishri","Heshvan","Kislev","Tevet","Shevat","AdarI","AdarII","Nisan","Iyyar","Sivan","Tammuz","Av","Elul"],FRENCH:["ZERO","Vendemiaire","Brumaire","Frimaire","Nivose","Pluviose","Ventose","Germinal","Floreal","Prairial","Messidor","Thermidor","Fructidor","Extra"]};function F(v,f){return v-f*Math.floor(v/f)}function e(v){return(v=parseInt(v))%4==0&&!(v%100==0&&v%400!=0)}function o(v,f,w){return ie-1+365*(v-1)+Math.floor((v-1)/4)+-Math.floor((v-1)/100)+Math.floor((v-1)/400)+Math.floor((367*f-362)/12+(f<=2?0:e(v)?-1:-2)+w)}function d(v,f){v=parseInt(v);const w={};let T;switch(f){case"GREGORIAN":case"gregorian":T=function u(v){let f,w,T,E,P,M,j,O,L,U,W,V,$,fe;return f=Math.floor(v-.5)+.5,w=f-ie,T=Math.floor(w/146097),E=F(w,146097),P=Math.floor(E/36524),M=F(E,36524),j=Math.floor(M/1461),O=F(M,1461),L=Math.floor(O/365),U=400*T+100*P+4*j+L,4==P||4==L||U++,W=f-o(U,1,1),V=f<o(U,3,1)?0:e(U)?1:2,$=Math.floor((12*(W+V)+373)/367),fe=f-o(U,$,1)+1,U<=0&&U--,new Array(U,$,fe)}(v);break;case"JULIAN":case"julian":T=S.jd_to_julian(v);break;case"JEWISH":case"jewish":T=S.jd_to_hebrew(v);break;case"FRENCH":case"french":T=S.jd_to_french_revolutionary(v)}return w.year=T[0],w.month=T[1],w.day=T[2],w.weekday=function y(v){return v=Number(v),F(Math.floor(v+1.5),7)}(v),w}const m=d(J.dateval1,J.calendar),h=d(J.dateval2,J.calendar);let k="";if(J.dateprecision1==J.dateprecision2)switch(J.dateprecision1){case"DAY":k=m.year===h.year&&m.month===h.month&&m.day===h.day?"["+q[m.weekday]+"] "+m.day+". "+a[J.calendar][m.month]+" "+m.year:"["+q[m.weekday]+"] "+m.day+". "+a[J.calendar][m.month]+" "+m.year+" \u2013 ["+q[h.weekday]+"] "+h.day+". "+a[J.calendar][h.month]+" "+h.year;break;case"MONTH":k=m.year===h.year&&m.month===h.month?a[J.calendar][m.month]+" "+m.year:a[J.calendar][m.month]+" "+m.year+" \u2013 "+a[J.calendar][h.month]+" "+h.year;break;case"YEAR":k=m.year===h.year?m.year:m.year+"\u2013"+h.year}else{switch(J.dateprecision1){case"DAY":k="["+q[m.weekday]+"] "+m.day+". "+a[J.calendar][m.month]+" "+m.year;break;case"MONTH":k=a[J.calendar][m.month]+" "+m.year;break;case"YEAR":k=m.year}switch(k+=" \u2013 ",J.dateprecision2){case"DAY":k+="["+q[h.weekday]+"] "+h.day+". "+a[J.calendar][h.month]+" "+h.year;break;case"MONTH":k+=a[J.calendar][h.month]+" "+h.year;break;case"YEAR":k+=h.year}}return k+=" ("+{GREGORIAN:{name:"Gregorian",short:"G",n_months:12},JULIAN:{name:"Julian",short:"Ju",n_months:12},JEWISH:{name:"Jewish",short:"Je",n_months:13},FRENCH:{name:"Revol.",short:"R",n_months:13}}[J.calendar].short+")",k}function htmlConverter(J,ie){let q,a,F,y,e,o,u,d,m,h,ue="";const k={p:0,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,ol:0,ul:0,li:1,a:2,strong:3,u:3,s:3,em:3,span:3,sup:3,sub:3},v={settings:{utf8str:"",textattr:{},css:{width:"100%",minHeight:"30px"},matching:{strong:"bold",u:"underline",s:"strikethrough",em:"italic",a:"_link",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",ol:"ol",ul:"ul",li:"li",span:"style",p:"p",sup:"sup",sub:"sub"}}},f={};for(let T in v.settings.matching)f[v.settings.matching[T]]=T;const w=Object.keys(J);w.sort(function(T,E){return k[f[T]]-k[f[E]]}),q=[];for(let T in w)for(u in o=w[T],J[o])F=J[o][u].start,void 0===q[F]&&(q[F]=[]),q[F].push({propname:o,proptype:"start"}),"_link"==q[F][q[F].length-1].propname?(q[F][q[F].length-1].href=J[o][u].href,void 0!==J[o][u].resid&&(q[F][q[F].length-1].resid=J[o][u].resid)):"style"==q[F][q[F].length-1].propname&&(q[F][q[F].length-1].css=J[o][u].css),F=J[o][u].end,void 0===q[F]&&(q[F]=[]),q[F].push({propname:o,proptype:"end"});for(a=[],d=0;d<=ie.length;d++){if(void 0!==q[d]){for(e=[],h=[],m=q[d].length-1;m>=0;m--)if("end"==q[d][m].proptype&&"linebreak"!=q[d][m].propname){for(;void 0!==(y=a.pop())&&(ue+="</"+f[y]+">",y!=q[d][m].propname);)e.push(y);for(;void 0!==(y=e.pop());)a.push(y),ue+="<"+f[y]+">"}for(m in q[d])if("start"==q[d][m].proptype)if("linebreak"==q[d][m].propname)ue+="<br/>";else if("_link"==q[d][m].propname){a.push(q[d][m].propname);let T=q[d][m].href;void 0===T&&void 0!==q[d][m].resid&&(T="https://www.salsah.org/api/resources/"+q[d][m].resid),ue+="<"+f[q[d][m].propname]+' href="'+T,void 0!==q[d][m].resid?ue+='" class="salsah-link">':ue+='">'}else"style"==q[d][m].propname?(a.push(q[d][m].propname),ue+="<"+f[q[d][m].propname]+' style="'+q[d][m].css+'">'):(a.push(q[d][m].propname),ue+="<"+f[q[d][m].propname]+">")}d<ie.length&&(ue+=ie.charAt(d))}return ue=ue.replace(/\n/g,"<br/>"),ue=ue.replace(/\r/g,""),ue}(function(J){var ie,ue,q="0.5.0",a="hasOwnProperty",F=/[\.\/]/,y=/\s*,\s*/,o=function(f,w){return f-w},u={n:{}},d=function(){for(var f=0,w=this.length;w>f;f++)if(void 0!==this[f])return this[f]},m=function(){for(var f=this.length;--f;)if(void 0!==this[f])return this[f]},h=Object.prototype.toString,k=String,v=Array.isArray||function(f){return f instanceof Array||"[object Array]"==h.call(f)};eve=function(f,w){var T,E=ue,P=Array.prototype.slice.call(arguments,2),M=eve.listeners(f),j=0,O=[],L={},U=[],W=ie;U.firstDefined=d,U.lastDefined=m,ie=f,ue=0;for(var V=0,$=M.length;$>V;V++)"zIndex"in M[V]&&(O.push(M[V].zIndex),M[V].zIndex<0&&(L[M[V].zIndex]=M[V]));for(O.sort(o);O[j]<0;)if(T=L[O[j++]],U.push(T.apply(w,P)),ue)return ue=E,U;for(V=0;$>V;V++)if("zIndex"in(T=M[V]))if(T.zIndex==O[j]){if(U.push(T.apply(w,P)),ue)break;do{if((T=L[O[++j]])&&U.push(T.apply(w,P)),ue)break}while(T)}else L[T.zIndex]=T;else if(U.push(T.apply(w,P)),ue)break;return ue=E,ie=W,U},eve._events=u,eve.listeners=function(f){var w,T,E,P,M,j,O,L,U=v(f)?f:f.split(F),W=u,V=[W],$=[];for(P=0,M=U.length;M>P;P++){for(L=[],j=0,O=V.length;O>j;j++)for(T=[(W=V[j].n)[U[P]],W["*"]],E=2;E--;)(w=T[E])&&(L.push(w),$=$.concat(w.f||[]));V=L}return $},eve.separator=function(f){f?(f="["+(f=k(f).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",F=new RegExp(f)):F=/[\.\/]/},eve.on=function(f,w){if("function"!=typeof w)return function(){};for(var T=v(f)?v(f[0])?f:[f]:k(f).split(y),E=0,P=T.length;P>E;E++)!function(M){for(var j,O=v(M)?M:k(M).split(F),L=u,U=0,W=O.length;W>U;U++)L=(L=L.n).hasOwnProperty(O[U])&&L[O[U]]||(L[O[U]]={n:{}});for(L.f=L.f||[],U=0,W=L.f.length;W>U;U++)if(L.f[U]==w){j=!0;break}!j&&L.f.push(w)}(T[E]);return function(M){+M==+M&&(w.zIndex=+M)}},eve.f=function(f){var w=[].slice.call(arguments,1);return function(){eve.apply(null,[f,null].concat(w).concat([].slice.call(arguments,0)))}},eve.stop=function(){ue=1},eve.nt=function(f){var w=v(ie)?ie.join("."):ie;return f?new RegExp("(?:\\.|\\/|^)"+f+"(?:\\.|\\/|$)").test(w):w},eve.nts=function(){return v(ie)?ie:ie.split(F)},eve.off=eve.unbind=function(f,w){if(f){var T=v(f)?v(f[0])?f:[f]:k(f).split(y);if(T.length>1)for(var E=0,P=T.length;P>E;E++)eve.off(T[E],w);else{T=v(f)?f:k(f).split(F);var M,j,O,L,U,W=[u],V=[];for(E=0,P=T.length;P>E;E++)for(L=0;L<W.length;L+=O.length-2){if(O=[L,1],M=W[L].n,"*"!=T[E])M[T[E]]&&(O.push(M[T[E]]),V.unshift({n:M,name:T[E]}));else for(j in M)M[a](j)&&(O.push(M[j]),V.unshift({n:M,name:j}));W.splice.apply(W,O)}for(E=0,P=W.length;P>E;E++)for(M=W[E];M.n;){if(w){if(M.f){for(L=0,U=M.f.length;U>L;L++)if(M.f[L]==w){M.f.splice(L,1);break}!M.f.length&&delete M.f}for(j in M.n)if(M.n[a](j)&&M.n[j].f){var $=M.n[j].f;for(L=0,U=$.length;U>L;L++)if($[L]==w){$.splice(L,1);break}!$.length&&delete M.n[j].f}}else for(j in delete M.f,M.n)M.n[a](j)&&M.n[j].f&&delete M.n[j].f;M=M.n}e:for(E=0,P=V.length;P>E;E++){for(j in(M=V[E]).n[M.name].f)continue e;for(j in M.n[M.name].n)continue e;delete M.n[M.name]}}}else eve._events=u={n:{}}},eve.once=function(f,w){var T=function(){return eve.off(f,T),w.apply(this,arguments)};return eve.on(f,T)},eve.version=q,eve.toString=function(){return"You are running Eve "+q},"undefined"!=typeof module&&module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],function(){return eve}):J.eve=eve})(this),function(J,ie){if("function"==typeof define&&define.amd)define(["eve"],function(q){return ie(J,q)});else if("undefined"!=typeof exports){var ue=require("eve");module.exports=ie(J,ue)}else ie(J,J.eve)}(window||this,function(J,ie){var a,F,y,e,o,u,d,h,k,v,f,w,T,E,P,M,j,ue=(a=void 0===ie?function(){}:ie,y={},e=J.requestAnimationFrame||J.webkitRequestAnimationFrame||J.mozRequestAnimationFrame||J.oRequestAnimationFrame||J.msRequestAnimationFrame||function(O){return setTimeout(O,16,(new Date).getTime()),!0},o=Array.isArray||function(O){return O instanceof Array||"[object Array]"==Object.prototype.toString.call(O)},u=0,d="M"+(+new Date).toString(36),h=Date.now||function(){return+new Date},k=function(O){var L=this;if(null==O)return L.s;var U=L.s-O;L.b+=L.dur*U,L.B+=L.dur*U,L.s=O},v=function(O){return null==O?this.spd:void(this.spd=O)},f=function(O){var L=this;return null==O?L.dur:(L.s=L.s*O/L.dur,void(L.dur=O))},w=function(){var O=this;delete y[O.id],O.update(),a("mina.stop."+O.id,O)},T=function(){var O=this;O.pdif||(delete y[O.id],O.update(),O.pdif=O.get()-O.b)},E=function(){var O=this;O.pdif&&(O.b=O.get()-O.pdif,delete O.pdif,y[O.id]=O,M())},P=function(){var O,L=this;if(o(L.start)){O=[];for(var U=0,W=L.start.length;W>U;U++)O[U]=+L.start[U]+(L.end[U]-L.start[U])*L.easing(L.s)}else O=+L.start+(L.end-L.start)*L.easing(L.s);L.set(O)},M=function(O){if(O){var L=0;for(var U in y)if(y.hasOwnProperty(U)){var W=y[U],V=W.get();L++,W.s=(V-W.b)/(W.dur/W.spd),W.s>=1&&(delete y[U],W.s=1,L--,function($){setTimeout(function(){a("mina.finish."+$.id,$)})}(W)),W.update()}F=!!L&&e(M)}else F||(F=e(M))},(j=function(O,L,U,W,V,$,fe){var ce={id:d+(u++).toString(36),start:O,end:L,b:U,s:0,dur:W-U,spd:1,get:V,set:$,easing:fe||j.linear,status:k,speed:v,duration:f,stop:w,pause:T,resume:E,update:P};y[ce.id]=ce;var xe,te=0;for(xe in y)if(y.hasOwnProperty(xe)&&2==++te)break;return 1==te&&M(),ce}).time=h,j.getById=function(O){return y[O]||null},j.linear=function(O){return O},j.easeout=function(O){return Math.pow(O,1.7)},j.easein=function(O){return Math.pow(O,.48)},j.easeinout=function(O){if(1==O)return 1;if(0==O)return 0;var L=.48-O/1.04,U=Math.sqrt(.1734+L*L),W=U-L,$=-U-L,ce=Math.pow(Math.abs(W),1/3)*(0>W?-1:1)+Math.pow(Math.abs($),1/3)*(0>$?-1:1)+.5;return 3*(1-ce)*ce*ce+ce*ce*ce},j.backin=function(O){if(1==O)return 1;var L=1.70158;return O*O*((L+1)*O-L)},j.backout=function(O){if(0==O)return 0;var L=1.70158;return(O-=1)*O*((L+1)*O+L)+1},j.elastic=function(O){return O==!!O?O:Math.pow(2,-10*O)*Math.sin((O-.075)*(2*Math.PI)/.3)+1},j.bounce=function(O){var U=7.5625,W=2.75;return 1/W>O?U*O*O:2/W>O?U*(O-=1.5/W)*O+.75:2.5/W>O?U*(O-=2.25/W)*O+.9375:U*(O-=2.625/W)*O+.984375},J.mina=j,j),q=function(a){function F(K,oe){if(K){if(K.nodeType)return U(K);if(e(K,"array")&&F.set)return F.set.apply(F,K);if(K instanceof M)return K;if(null==oe)return U(K=V.doc.querySelector(String(K)))}return new L(K=null==K?"100%":K,oe=null==oe?"100%":oe)}function y(K,oe){if(oe){if("#text"==K&&(K=V.doc.createTextNode(oe.text||oe["#text"]||"")),"#comment"==K&&(K=V.doc.createComment(oe.text||oe["#text"]||"")),"string"==typeof K&&(K=y(K)),"string"==typeof oe)return 1==K.nodeType?"xlink:"==oe.substring(0,6)?K.getAttributeNS(Ne,oe.substring(6)):"xml:"==oe.substring(0,4)?K.getAttributeNS(_e,oe.substring(4)):K.getAttribute(oe):"text"==oe?K.nodeValue:null;if(1==K.nodeType){for(var he in oe)if(oe[$](he)){var me=fe(oe[he]);me?"xlink:"==he.substring(0,6)?K.setAttributeNS(Ne,he.substring(6),me):"xml:"==he.substring(0,4)?K.setAttributeNS(_e,he.substring(4),me):K.setAttribute(he,me):K.removeAttribute(he)}}else"text"in oe&&(K.nodeValue=oe.text)}else K=V.doc.createElementNS(_e,K);return K}function e(K,oe){return"finite"==(oe=fe.prototype.toLowerCase.call(oe))?isFinite(K):!("array"!=oe||!(K instanceof Array||Array.isArray&&Array.isArray(K)))||("null"==oe&&null===K||oe==typeof K&&null!==K||"object"==oe&&K===Object(K)||de.call(K).slice(8,-1).toLowerCase()==oe)}function u(K,oe){for(var he=0,me=K.length;me>he;he++)if(K[he]===oe)return K.push(K.splice(he,1)[0])}function d(K,oe,he){return function me(){var Le=Array.prototype.slice.call(arguments,0),Se=Le.join("\u2400"),ke=me.cache=me.cache||{},De=me.count=me.count||[];return ke[$](Se)?(u(De,Se),he?he(ke[Se]):ke[Se]):(De.length>=1e3&&delete ke[De.shift()],De.push(Se),ke[Se]=K.apply(oe,Le),he?he(ke[Se]):ke[Se])}}function h(K){return K%360*Ce/180}function T(K){return K.node.ownerSVGElement&&U(K.node.ownerSVGElement)||F.select("svg")}function P(K){e(K,"array")||(K=Array.prototype.slice.call(arguments,0));for(var oe=0,he=0,me=this.node;this[oe];)delete this[oe++];for(oe=0;oe<K.length;oe++)"set"==K[oe].type?K[oe].forEach(function(Se){me.appendChild(Se.node)}):me.appendChild(K[oe].node);var Le=me.childNodes;for(oe=0;oe<Le.length;oe++)this[he++]=U(Le[oe]);return this}function M(K){if(K.snap in Pe)return Pe[K.snap];var oe;try{oe=K.ownerSVGElement}catch(Le){}this.node=K,oe&&(this.paper=new L(oe)),this.type=K.tagName||K.nodeName;var he=this.id=pe(this);if(this.anims={},this._={transform:[]},K.snap=he,Pe[he]=this,"g"==this.type&&(this.add=P),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var me in L.prototype)L.prototype[$](me)&&(this[me]=L.prototype[me])}function j(K){this.node=K}function O(K,oe){var he=y(K);return oe.appendChild(he),U(he)}function L(K,oe){var he,me,Le,Se=L.prototype;if(K&&K.tagName&&"svg"==K.tagName.toLowerCase()){if(K.snap in Pe)return Pe[K.snap];var ke=K.ownerDocument;for(var De in he=new M(K),me=K.getElementsByTagName("desc")[0],Le=K.getElementsByTagName("defs")[0],me||((me=y("desc")).appendChild(ke.createTextNode("Created with Snap")),he.node.appendChild(me)),Le||(Le=y("defs"),he.node.appendChild(Le)),he.defs=Le,Se)Se[$](De)&&(he[De]=Se[De]);he.paper=he.root=he}else y((he=O("svg",V.doc.body)).node,{height:oe,version:1.1,width:K,xmlns:_e});return he}function U(K){return K&&(K instanceof M||K instanceof j?K:K.tagName&&"svg"==K.tagName.toLowerCase()?new L(K):K.tagName&&"object"==K.tagName.toLowerCase()&&"image/svg+xml"==K.type?new L(K.contentDocument.getElementsByTagName("svg")[0]):new M(K))}function W(K,oe){for(var he=0,me=K.length;me>he;he++){var Le={type:K[he].type,attr:K[he].attr()},Se=K[he].children();oe.push(Le),Se.length&&W(Se,Le.childNodes=[])}}F.version="0.5.1",F.toString=function(){return"Snap v"+this.version},F._={};var V={win:a.window,doc:a.window.document};F._.glob=V;var K,oe,$="hasOwnProperty",fe=String,ce=parseFloat,xe=parseInt,te=Math,se=te.max,ne=te.min,ve=te.abs,Ce=(te.pow,te.PI),be=(te.round,""),de=Object.prototype.toString,ye=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,Fe=(F._.separator=/[,\s]+/,/[\s]*,[\s]*/),Be={hs:1,rg:1},Ie=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,Je=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,G=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,H=0,ee="S"+(+new Date).toString(36),pe=function(K){return(K&&K.type?K.type:be)+ee+(H++).toString(36)},Ne="http://www.w3.org/1999/xlink",_e="http://www.w3.org/2000/svg",Pe={};F.url=function(K){return"url('#"+K+"')"},F._.$=y,F._.id=pe,F.format=(K=/\{([^\}]+)\}/g,oe=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(me,Le){return fe(me).replace(K,function(Se,ke){return function(me,Le,Se){var ke=Se;return Le.replace(oe,function(De,He,$e,Xe,Ke){He=He||Xe,ke&&(He in ke&&(ke=ke[He]),"function"==typeof ke&&Ke&&(ke=ke()))}),ke=(null==ke||ke==Se?me:ke)+""}(Se,ke,Le)})}),F._.clone=function o(K){if("function"==typeof K||Object(K)!==K)return K;var oe=new K.constructor;for(var he in K)K[$](he)&&(oe[he]=o(K[he]));return oe},F._.cacher=d,F.rad=h,F.deg=function k(K){return 180*K/Ce%360},F.sin=function(K){return te.sin(F.rad(K))},F.tan=function(K){return te.tan(F.rad(K))},F.cos=function(K){return te.cos(F.rad(K))},F.asin=function(K){return F.deg(te.asin(K))},F.acos=function(K){return F.deg(te.acos(K))},F.atan=function(K){return F.deg(te.atan(K))},F.atan2=function(K){return F.deg(te.atan2(K))},F.angle=function m(K,oe,he,me,Le,Se){if(null==Le){var ke=K-he,De=oe-me;return ke||De?(180+180*te.atan2(-De,-ke)/Ce+360)%360:0}return m(K,oe,Le,Se)-m(he,me,Le,Se)},F.len=function(K,oe,he,me){return Math.sqrt(F.len2(K,oe,he,me))},F.len2=function(K,oe,he,me){return(K-he)*(K-he)+(oe-me)*(oe-me)},F.closestPoint=function(K,oe,he){function me(Nt){var Ot=Nt.x-oe,At=Nt.y-he;return Ot*Ot+At*At}for(var Le,Se,ke,De,He=K.node,$e=He.getTotalLength(),Xe=$e/He.pathSegList.numberOfItems*.125,Ke=1/0,ct=0;$e>=ct;ct+=Xe)(De=me(ke=He.getPointAtLength(ct)))<Ke&&(Le=ke,Se=ct,Ke=De);for(Xe*=.5;Xe>.5;){var vt,pt,_t,kt,gt,it;(_t=Se-Xe)>=0&&(gt=me(vt=He.getPointAtLength(_t)))<Ke?(Le=vt,Se=_t,Ke=gt):(kt=Se+Xe)<=$e&&(it=me(pt=He.getPointAtLength(kt)))<Ke?(Le=pt,Se=kt,Ke=it):Xe*=.5}return{x:Le.x,y:Le.y,length:Se,distance:Math.sqrt(Ke)}},F.is=e,F.snapTo=function(K,oe,he){if(he=e(he,"finite")?he:10,e(K,"array")){for(var me=K.length;me--;)if(ve(K[me]-oe)<=he)return K[me]}else{var Le=oe%(K=+K);if(he>Le)return oe-Le;if(Le>K-he)return oe-Le+K}return oe},F.getRGB=d(function(K){if(!K||(K=fe(K)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ht};if("none"==K)return{r:-1,g:-1,b:-1,hex:"none",toString:ht};if(!(Be[$](K.toLowerCase().substring(0,2))||"#"==K.charAt())&&(K=We(K)),!K)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ht};var oe,he,me,Le,Se,ke,De=K.match(ye);return De?(De[2]&&(me=xe(De[2].substring(5),16),he=xe(De[2].substring(3,5),16),oe=xe(De[2].substring(1,3),16)),De[3]&&(me=xe((Se=De[3].charAt(3))+Se,16),he=xe((Se=De[3].charAt(2))+Se,16),oe=xe((Se=De[3].charAt(1))+Se,16)),De[4]&&(ke=De[4].split(Fe),oe=ce(ke[0]),"%"==ke[0].slice(-1)&&(oe*=2.55),he=ce(ke[1]),"%"==ke[1].slice(-1)&&(he*=2.55),me=ce(ke[2]),"%"==ke[2].slice(-1)&&(me*=2.55),"rgba"==De[1].toLowerCase().slice(0,4)&&(Le=ce(ke[3])),ke[3]&&"%"==ke[3].slice(-1)&&(Le/=100)),De[5]?(ke=De[5].split(Fe),oe=ce(ke[0]),"%"==ke[0].slice(-1)&&(oe/=100),he=ce(ke[1]),"%"==ke[1].slice(-1)&&(he/=100),me=ce(ke[2]),"%"==ke[2].slice(-1)&&(me/=100),("deg"==ke[0].slice(-3)||"\xb0"==ke[0].slice(-1))&&(oe/=360),"hsba"==De[1].toLowerCase().slice(0,4)&&(Le=ce(ke[3])),ke[3]&&"%"==ke[3].slice(-1)&&(Le/=100),F.hsb2rgb(oe,he,me,Le)):De[6]?(ke=De[6].split(Fe),oe=ce(ke[0]),"%"==ke[0].slice(-1)&&(oe/=100),he=ce(ke[1]),"%"==ke[1].slice(-1)&&(he/=100),me=ce(ke[2]),"%"==ke[2].slice(-1)&&(me/=100),("deg"==ke[0].slice(-3)||"\xb0"==ke[0].slice(-1))&&(oe/=360),"hsla"==De[1].toLowerCase().slice(0,4)&&(Le=ce(ke[3])),ke[3]&&"%"==ke[3].slice(-1)&&(Le/=100),F.hsl2rgb(oe,he,me,Le)):(oe=ne(te.round(oe),255),he=ne(te.round(he),255),me=ne(te.round(me),255),Le=ne(se(Le,0),1),(De={r:oe,g:he,b:me,toString:ht}).hex="#"+(16777216|me|he<<8|oe<<16).toString(16).slice(1),De.opacity=e(Le,"finite")?Le:1,De)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ht}},F),F.hsb=d(function(K,oe,he){return F.hsb2rgb(K,oe,he).hex}),F.hsl=d(function(K,oe,he){return F.hsl2rgb(K,oe,he).hex}),F.rgb=d(function(K,oe,he,me){if(e(me,"finite")){var Le=te.round;return"rgba("+[Le(K),Le(oe),Le(he),+me.toFixed(2)]+")"}return"#"+(16777216|he|oe<<8|K<<16).toString(16).slice(1)});var We=function(K){var oe=V.doc.getElementsByTagName("head")[0]||V.doc.getElementsByTagName("svg")[0],he="rgb(255, 0, 0)";return(We=d(function(me){if("red"==me.toLowerCase())return he;oe.style.color=he,oe.style.color=me;var Le=V.doc.defaultView.getComputedStyle(oe,be).getPropertyValue("color");return Le==he?null:Le}))(K)},Ye=function(){return"hsb("+[this.h,this.s,this.b]+")"},mt=function(){return"hsl("+[this.h,this.s,this.l]+")"},ht=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},Gt=function(K,oe,he){if(null==oe&&e(K,"object")&&"r"in K&&"g"in K&&"b"in K&&(he=K.b,oe=K.g,K=K.r),null==oe&&e(K,string)){var me=F.getRGB(K);K=me.r,oe=me.g,he=me.b}return(K>1||oe>1||he>1)&&(K/=255,oe/=255,he/=255),[K,oe,he]},Xt=function(K,oe,he,me){var Le={r:K=te.round(255*K),g:oe=te.round(255*oe),b:he=te.round(255*he),opacity:e(me,"finite")?me:1,hex:F.rgb(K,oe,he),toString:ht};return e(me,"finite")&&(Le.opacity=me),Le};F.color=function(K){var oe;return e(K,"object")&&"h"in K&&"s"in K&&"b"in K?(oe=F.hsb2rgb(K),K.r=oe.r,K.g=oe.g,K.b=oe.b,K.opacity=1,K.hex=oe.hex):e(K,"object")&&"h"in K&&"s"in K&&"l"in K?(oe=F.hsl2rgb(K),K.r=oe.r,K.g=oe.g,K.b=oe.b,K.opacity=1,K.hex=oe.hex):(e(K,"string")&&(K=F.getRGB(K)),e(K,"object")&&"r"in K&&"g"in K&&"b"in K&&!("error"in K)?(oe=F.rgb2hsl(K),K.h=oe.h,K.s=oe.s,K.l=oe.l,oe=F.rgb2hsb(K),K.v=oe.b):((K={hex:"none"}).r=K.g=K.b=K.h=K.s=K.v=K.l=-1,K.error=1)),K.toString=ht,K},F.hsb2rgb=function(K,oe,he,me){var Le,Se,ke,De,He;return e(K,"object")&&"h"in K&&"s"in K&&"b"in K&&(he=K.b,oe=K.s,me=K.o,K=K.h),Le=Se=ke=he-(He=he*oe),Le+=[He,De=He*(1-ve((K=(K*=360)%360/60)%2-1)),0,0,De,He][K=~~K],Se+=[De,He,He,De,0,0][K],ke+=[0,0,De,He,He,De][K],Xt(Le,Se,ke,me)},F.hsl2rgb=function(K,oe,he,me){var Le,Se,ke,De,He;return e(K,"object")&&"h"in K&&"s"in K&&"l"in K&&(he=K.l,oe=K.s,K=K.h),(K>1||oe>1||he>1)&&(K/=360,oe/=100,he/=100),Le=Se=ke=he-(He=2*oe*(.5>he?he:1-he))/2,Le+=[He,De=He*(1-ve((K=(K*=360)%360/60)%2-1)),0,0,De,He][K=~~K],Se+=[De,He,He,De,0,0][K],ke+=[0,0,De,He,He,De][K],Xt(Le,Se,ke,me)},F.rgb2hsb=function(K,oe,he){var Se,ke;return K=(he=Gt(K,oe,he))[0],oe=he[1],he=he[2],{h:((0==(ke=(Se=se(K,oe,he))-ne(K,oe,he))?null:Se==K?(oe-he)/ke:Se==oe?(he-K)/ke+2:(K-oe)/ke+4)+360)%6*60/360,s:0==ke?0:ke/Se,b:Se,toString:Ye}},F.rgb2hsl=function(K,oe,he){var Se,ke,De,He;return K=(he=Gt(K,oe,he))[0],oe=he[1],he=he[2],Se=((ke=se(K,oe,he))+(De=ne(K,oe,he)))/2,{h:((0==(He=ke-De)?null:ke==K?(oe-he)/He:ke==oe?(he-K)/He+2:(K-oe)/He+4)+360)%6*60/360,s:0==He?0:.5>Se?He/(2*Se):He/(2-2*Se),l:Se,toString:mt}},F.parsePathString=function(K){if(!K)return null;var oe=F.path(K);if(oe.arr)return F.path.clone(oe.arr);var he={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},me=[];return e(K,"array")&&e(K[0],"array")&&(me=F.path.clone(K)),me.length||fe(K).replace(Ie,function(Le,Se,ke){var De=[],He=Se.toLowerCase();if(ke.replace(G,function($e,Xe){Xe&&De.push(+Xe)}),"m"==He&&De.length>2&&(me.push([Se].concat(De.splice(0,2))),He="l",Se="m"==Se?"l":"L"),"o"==He&&1==De.length&&me.push([Se,De[0]]),"r"==He)me.push([Se].concat(De));else for(;De.length>=he[He]&&(me.push([Se].concat(De.splice(0,he[He]))),he[He]););}),me.toString=F.path.toString,oe.arr=F.path.clone(me),me};var Te=F.parseTransformString=function(K){if(!K)return null;var oe=[];return e(K,"array")&&e(K[0],"array")&&(oe=F.path.clone(K)),oe.length||fe(K).replace(Je,function(he,me,Le){var Se=[];me.toLowerCase(),Le.replace(G,function(ke,De){De&&Se.push(+De)}),oe.push([me].concat(Se))}),oe.toString=F.path.toString,oe};F._.svgTransform2string=function v(K){var oe=[];return K=K.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(he,me,Le){return Le=Le.split(/\s*,\s*|\s+/),"rotate"==me&&1==Le.length&&Le.push(0,0),"scale"==me&&(Le.length>2?Le=Le.slice(0,2):2==Le.length&&Le.push(0,0),1==Le.length&&Le.push(Le[0],0,0)),"skewX"==me?oe.push(["m",1,0,te.tan(h(Le[0])),1,0,0]):"skewY"==me?oe.push(["m",1,te.tan(h(Le[0])),0,1,0,0]):oe.push([me.charAt(0)].concat(Le)),he}),oe},F._.rgTransform=/^[a-z][\s]*-?\.?\d/i,F._.transform2matrix=function f(K,oe){var he=Te(K),me=new F.Matrix;if(he)for(var Le=0,Se=he.length;Se>Le;Le++){var ke,De,He,$e,Xe,Ke=he[Le],ct=Ke.length,vt=fe(Ke[0]).toLowerCase(),pt=Ke[0]!=vt,_t=pt?me.invert():0;"t"==vt&&2==ct?me.translate(Ke[1],0):"t"==vt&&3==ct?pt?(ke=_t.x(0,0),De=_t.y(0,0),He=_t.x(Ke[1],Ke[2]),$e=_t.y(Ke[1],Ke[2]),me.translate(He-ke,$e-De)):me.translate(Ke[1],Ke[2]):"r"==vt?2==ct?(Xe=Xe||oe,me.rotate(Ke[1],Xe.x+Xe.width/2,Xe.y+Xe.height/2)):4==ct&&(pt?(He=_t.x(Ke[2],Ke[3]),$e=_t.y(Ke[2],Ke[3]),me.rotate(Ke[1],He,$e)):me.rotate(Ke[1],Ke[2],Ke[3])):"s"==vt?2==ct||3==ct?(Xe=Xe||oe,me.scale(Ke[1],Ke[ct-1],Xe.x+Xe.width/2,Xe.y+Xe.height/2)):4==ct?pt?(He=_t.x(Ke[2],Ke[3]),$e=_t.y(Ke[2],Ke[3]),me.scale(Ke[1],Ke[1],He,$e)):me.scale(Ke[1],Ke[1],Ke[2],Ke[3]):5==ct&&(pt?(He=_t.x(Ke[3],Ke[4]),$e=_t.y(Ke[3],Ke[4]),me.scale(Ke[1],Ke[2],He,$e)):me.scale(Ke[1],Ke[2],Ke[3],Ke[4])):"m"==vt&&7==ct&&me.add(Ke[1],Ke[2],Ke[3],Ke[4],Ke[5],Ke[6])}return me},F._unit2px=function E(K,oe,he){function me($e){if(null==$e)return be;if($e==+$e)return $e;y(He,{width:$e});try{return He.getBBox().width}catch(Xe){return 0}}function Le($e){if(null==$e)return be;if($e==+$e)return $e;y(He,{height:$e});try{return He.getBBox().height}catch(Xe){return 0}}function Se($e,Xe){null==oe?De[$e]=Xe(K.attr($e)||0):$e==oe&&(De=Xe(null==he?K.attr($e)||0:he))}var ke=T(K).node,De={},He=ke.querySelector(".svg---mgr");switch(He||(He=y("rect"),y(He,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),ke.appendChild(He)),K.type){case"rect":Se("rx",me),Se("ry",Le);case"image":Se("width",me),Se("height",Le);case"text":Se("x",me),Se("y",Le);break;case"circle":Se("cx",me),Se("cy",Le),Se("r",me);break;case"ellipse":Se("cx",me),Se("cy",Le),Se("rx",me),Se("ry",Le);break;case"line":Se("x1",me),Se("x2",me),Se("y1",Le),Se("y2",Le);break;case"marker":Se("refX",me),Se("markerWidth",me),Se("refY",Le),Se("markerHeight",Le);break;case"radialGradient":Se("fx",me),Se("fy",Le);break;case"tspan":Se("dx",me),Se("dy",Le);break;default:Se(oe,me)}return ke.removeChild(He),De},V.doc.contains||V.doc.compareDocumentPosition,F._.getSomeDefs=function w(K){var oe=K.node.ownerSVGElement&&U(K.node.ownerSVGElement)||K.node.parentNode&&U(K.node.parentNode)||F.select("svg")||F(0,0),he=oe.select("defs"),me=null!=he&&he.node;return me||(me=O("defs",oe.node).node),me},F._.getSomeSVG=T,F.select=function(K){return K=fe(K).replace(/([^\\]):/g,"$1\\:"),U(V.doc.querySelector(K))},F.selectAll=function(K){for(var oe=V.doc.querySelectorAll(K),he=(F.set||Array)(),me=0;me<oe.length;me++)he.push(U(oe[me]));return he},setInterval(function(){for(var K in Pe)if(Pe[$](K)){var oe=Pe[K],he=oe.node;("svg"!=oe.type&&!he.ownerSVGElement||"svg"==oe.type&&(!he.parentNode||"ownerSVGElement"in he.parentNode&&!he.ownerSVGElement))&&delete Pe[K]}},1e4),M.prototype.attr=function(K,oe){var he=this,me=he.node;if(!K){if(1!=me.nodeType)return{text:me.nodeValue};for(var Le=me.attributes,Se={},ke=0,De=Le.length;De>ke;ke++)Se[Le[ke].nodeName]=Le[ke].nodeValue;return Se}if(e(K,"string")){if(!(arguments.length>1))return ie("snap.util.getattr."+K,he).firstDefined();var He={};He[K]=oe,K=He}for(var $e in K)K[$]($e)&&ie("snap.util.attr."+$e,he,K[$e]);return he},F.parse=function(K){var oe=V.doc.createDocumentFragment(),he=!0,me=V.doc.createElement("div");if((K=fe(K)).match(/^\s*<\s*svg(?:\s|>)/)||(K="<svg>"+K+"</svg>",he=!1),me.innerHTML=K,K=me.getElementsByTagName("svg")[0])if(he)oe=K;else for(;K.firstChild;)oe.appendChild(K.firstChild);return new j(oe)},F.fragment=function(){for(var K=Array.prototype.slice.call(arguments,0),oe=V.doc.createDocumentFragment(),he=0,me=K.length;me>he;he++){var Le=K[he];Le.node&&Le.node.nodeType&&oe.appendChild(Le.node),Le.nodeType&&oe.appendChild(Le),"string"==typeof Le&&oe.appendChild(F.parse(Le).node)}return new j(oe)},F._.make=O,F._.wrap=U,L.prototype.el=function(K,oe){var he=O(K,this.node);return oe&&he.attr(oe),he},M.prototype.children=function(){for(var K=[],oe=this.node.childNodes,he=0,me=oe.length;me>he;he++)K[he]=F(oe[he]);return K},M.prototype.toJSON=function(){var K=[];return W([this],K),K[0]},ie.on("snap.util.getattr",function(){var K=ie.nt(),oe=(K=K.substring(K.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(he){return"-"+he.toLowerCase()});return Re[$](oe)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(oe):y(this.node,K)});var Re={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};ie.on("snap.util.attr",function(K){var oe=ie.nt(),he={};he[oe=oe.substring(oe.lastIndexOf(".")+1)]=K;var me=oe.replace(/-(\w)/gi,function(Se,ke){return ke.toUpperCase()}),Le=oe.replace(/[A-Z]/g,function(Se){return"-"+Se.toLowerCase()});Re[$](Le)?this.node.style[me]=null==K?be:K:y(this.node,he)}),L.prototype,F.ajax=function(K,oe,he,me){var Le=new XMLHttpRequest,Se=pe();if(Le){if(e(oe,"function"))me=he,he=oe,oe=null;else if(e(oe,"object")){var ke=[];for(var De in oe)oe.hasOwnProperty(De)&&ke.push(encodeURIComponent(De)+"="+encodeURIComponent(oe[De]));oe=ke.join("&")}return Le.open(oe?"POST":"GET",K,!0),oe&&(Le.setRequestHeader("X-Requested-With","XMLHttpRequest"),Le.setRequestHeader("Content-type","application/x-www-form-urlencoded")),he&&(ie.once("snap.ajax."+Se+".0",he),ie.once("snap.ajax."+Se+".200",he),ie.once("snap.ajax."+Se+".304",he)),Le.onreadystatechange=function(){4==Le.readyState&&ie("snap.ajax."+Se+"."+Le.status,me,Le)},4==Le.readyState||Le.send(oe),Le}},F.load=function(K,oe,he){F.ajax(K,function(me){var Le=F.parse(me.responseText);he?oe.call(he,Le):oe(Le)})};return F.getElementByPoint=function(K,oe){var me=(this.canvas,V.doc.elementFromPoint(K,oe));if(V.win.opera&&"svg"==me.tagName){var Le=function(K){var oe=K.getBoundingClientRect(),he=K.ownerDocument,me=he.body,Le=he.documentElement,Se=Le.clientTop||me.clientTop||0,ke=Le.clientLeft||me.clientLeft||0;return{y:oe.top+(g.win.pageYOffset||Le.scrollTop||me.scrollTop)-Se,x:oe.left+(g.win.pageXOffset||Le.scrollLeft||me.scrollLeft)-ke}}(me),Se=me.createSVGRect();Se.x=K-Le.x,Se.y=oe-Le.y,Se.width=Se.height=1;var ke=me.getIntersectionList(Se,null);ke.length&&(me=ke[ke.length-1])}return me?U(me):null},F.plugin=function(K){K(F,M,L,V,j)},V.win.Snap=F,F}(J||this);return q.plugin(function(a,F,y,e,o){function u(L,U){if(null==U){var W=!0;if(!(U="linearGradient"==L.type||"radialGradient"==L.type?L.node.getAttribute("gradientTransform"):"pattern"==L.type?L.node.getAttribute("patternTransform"):L.node.getAttribute("transform")))return new a.Matrix;U=a._.svgTransform2string(U)}else U=a._.rgTransform.test(U)?v(U).replace(/\.{3}|\u2026/g,L._.transform||""):a._.svgTransform2string(U),k(U,"array")&&(U=a.path?a.path.toString.call(U):v(U)),L._.transform=U;var V=a._.transform2matrix(U,L.getBBox(1));return W?V:void(L.matrix=V)}function m(L){return function(){var U=L?"<"+this.type:"",W=this.node.attributes,V=this.node.childNodes;if(L)for(var $=0,fe=W.length;fe>$;$++)U+=" "+W[$].name+'="'+W[$].value.replace(/"/g,'\\"')+'"';if(V.length){for(L&&(U+=">"),$=0,fe=V.length;fe>$;$++)3==V[$].nodeType?U+=V[$].nodeValue:1==V[$].nodeType&&(U+=M(V[$]).toString());L&&(U+="</"+this.type+">")}else L&&(U+="/>");return U}}var h=F.prototype,k=a.is,v=String,f=a._unit2px,w=a._.$,T=a._.make,E=a._.getSomeDefs,P="hasOwnProperty",M=a._.wrap;h.getBBox=function(L){if("tspan"==this.type)return a._.box(this.node.getClientRects().item(0));if(!a.Matrix||!a.path)return this.node.getBBox();var U=this,W=new a.Matrix;if(U.removed)return a._.box();for(;"use"==U.type;)if(L||(W=W.add(U.transform().localMatrix.translate(U.attr("x")||0,U.attr("y")||0))),U.original)U=U.original;else{var V=U.attr("xlink:href");U=U.original=U.node.ownerDocument.getElementById(V.substring(V.indexOf("#")+1))}var $=U._,fe=a.path.get[U.type]||a.path.get.deflt;try{return L?($.bboxwt=fe?a.path.getBBox(U.realPath=fe(U)):a._.box(U.node.getBBox()),a._.box($.bboxwt)):(U.realPath=fe(U),U.matrix=U.transform().localMatrix,$.bbox=a.path.getBBox(a.path.map(U.realPath,W.add(U.matrix))),a._.box($.bbox))}catch(ce){return a._.box()}};var j=function(){return this.string};h.transform=function(L){var U=this._;if(null==L){for(var W,V=this,$=new a.Matrix(this.node.getCTM()),fe=u(this),ce=[fe],xe=new a.Matrix,te=fe.toTransformString(),se=v(fe)==v(this.matrix)?v(U.transform):te;"svg"!=V.type&&(V=V.parent());)ce.push(u(V));for(W=ce.length;W--;)xe.add(ce[W]);return{string:se,globalMatrix:$,totalMatrix:xe,localMatrix:fe,diffMatrix:$.clone().add(fe.invert()),global:$.toTransformString(),total:xe.toTransformString(),local:te,toString:j}}return L instanceof a.Matrix?(this.matrix=L,this._.transform=L.toTransformString()):u(this,L),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?w(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?w(this.node,{patternTransform:this.matrix}):w(this.node,{transform:this.matrix})),this},h.parent=function(){return M(this.node.parentNode)},h.append=h.add=function(L){if(L){if("set"==L.type){var U=this;return L.forEach(function(W){U.add(W)}),this}L=M(L),this.node.appendChild(L.node),L.paper=this.paper}return this},h.appendTo=function(L){return L&&(L=M(L)).append(this),this},h.prepend=function(L){if(L){if("set"==L.type){var U,W=this;return L.forEach(function($){U?U.after($):W.prepend($),U=$}),this}var V=(L=M(L)).parent();this.node.insertBefore(L.node,this.node.firstChild),this.add&&this.add(),L.paper=this.paper,this.parent()&&this.parent().add(),V&&V.add()}return this},h.prependTo=function(L){return(L=M(L)).prepend(this),this},h.before=function(L){if("set"==L.type){var U=this;return L.forEach(function(V){var $=V.parent();U.node.parentNode.insertBefore(V.node,U.node),$&&$.add()}),this.parent().add(),this}var W=(L=M(L)).parent();return this.node.parentNode.insertBefore(L.node,this.node),this.parent()&&this.parent().add(),W&&W.add(),L.paper=this.paper,this},h.after=function(L){var U=(L=M(L)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(L.node,this.node.nextSibling):this.node.parentNode.appendChild(L.node),this.parent()&&this.parent().add(),U&&U.add(),L.paper=this.paper,this},h.insertBefore=function(L){L=M(L);var U=this.parent();return L.node.parentNode.insertBefore(this.node,L.node),this.paper=L.paper,U&&U.add(),L.parent()&&L.parent().add(),this},h.insertAfter=function(L){L=M(L);var U=this.parent();return L.node.parentNode.insertBefore(this.node,L.node.nextSibling),this.paper=L.paper,U&&U.add(),L.parent()&&L.parent().add(),this},h.remove=function(){var L=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,L&&L.add(),this},h.select=function(L){return M(this.node.querySelector(L))},h.selectAll=function(L){for(var U=this.node.querySelectorAll(L),W=(a.set||Array)(),V=0;V<U.length;V++)W.push(M(U[V]));return W},h.asPX=function(L,U){return null==U&&(U=this.attr(L)),+f(this,L,U)},h.use=function(){var L,U=this.node.id;return U||(U=this.id,w(this.node,{id:U})),L="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?T(this.type,this.node.parentNode):T("use",this.node.parentNode),w(L.node,{"xlink:href":"#"+U}),L.original=this,L},h.clone=function(){var L=M(this.node.cloneNode(!0));return w(L.node,"id")&&w(L.node,{id:L.id}),function d(L){function U(de,ye){var Fe=w(de.node,ye);(Fe=(Fe=Fe&&Fe.match(fe))&&Fe[2])&&"#"==Fe.charAt()&&(Fe=Fe.substring(1))&&(xe[Fe]=(xe[Fe]||[]).concat(function(Be){var Ie={};Ie[ye]=a.url(Be),w(de.node,Ie)}))}function W(de){var ye=w(de.node,"xlink:href");ye&&"#"==ye.charAt()&&(ye=ye.substring(1))&&(xe[ye]=(xe[ye]||[]).concat(function(Fe){de.attr("xlink:href","#"+Fe)}))}for(var V,$=L.selectAll("*"),fe=/^\s*url\(("|'|)(.*)\1\)\s*$/,ce=[],xe={},te=0,se=$.length;se>te;te++){U(V=$[te],"fill"),U(V,"stroke"),U(V,"filter"),U(V,"mask"),U(V,"clip-path"),W(V);var ne=w(V.node,"id");ne&&(w(V.node,{id:V.id}),ce.push({old:ne,id:V.id}))}for(te=0,se=ce.length;se>te;te++){var ve=xe[ce[te].old];if(ve)for(var Ce=0,be=ve.length;be>Ce;Ce++)ve[Ce](ce[te].id)}}(L),L.insertAfter(this),L},h.toDefs=function(){return E(this).appendChild(this.node),this},h.pattern=h.toPattern=function(L,U,W,V){var $=T("pattern",E(this));return null==L&&(L=this.getBBox()),k(L,"object")&&"x"in L&&(U=L.y,W=L.width,V=L.height,L=L.x),w($.node,{x:L,y:U,width:W,height:V,patternUnits:"userSpaceOnUse",id:$.id,viewBox:[L,U,W,V].join(" ")}),$.node.appendChild(this.node),$},h.marker=function(L,U,W,V,$,fe){var ce=T("marker",E(this));return null==L&&(L=this.getBBox()),k(L,"object")&&"x"in L&&(U=L.y,W=L.width,V=L.height,$=L.refX||L.cx,fe=L.refY||L.cy,L=L.x),w(ce.node,{viewBox:[L,U,W,V].join(" "),markerWidth:W,markerHeight:V,orient:"auto",refX:$||0,refY:fe||0,id:ce.id}),ce.node.appendChild(this.node),ce};var O={};h.data=function(L,U){var W=O[this.id]=O[this.id]||{};if(0==arguments.length)return ie("snap.data.get."+this.id,this,W,null),W;if(1==arguments.length){if(a.is(L,"object")){for(var V in L)L[P](V)&&this.data(V,L[V]);return this}return ie("snap.data.get."+this.id,this,W[L],L),W[L]}return W[L]=U,ie("snap.data.set."+this.id,this,U,L),this},h.removeData=function(L){return null==L?O[this.id]={}:O[this.id]&&delete O[this.id][L],this},h.outerSVG=h.toString=m(1),h.innerSVG=m(),h.toDataURL=function(){if(J&&J.btoa){var L=this.getBBox(),U=a.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+L.x.toFixed(3),y:+L.y.toFixed(3),width:+L.width.toFixed(3),height:+L.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(U)))}},o.prototype.select=h.select,o.prototype.selectAll=h.selectAll}),q.plugin(function(a,F,y,e,o){function u(f,w,T){return function(E){var P=E.slice(f,w);return 1==P.length&&(P=P[0]),T?T(P):P}}var d=F.prototype,m=a.is,h=String,k="hasOwnProperty",v=function(f,w,T,E){"function"!=typeof T||T.length||(E=T,T=ue.linear),this.attr=f,this.dur=w,T&&(this.easing=T),E&&(this.callback=E)};a._.Animation=v,a.animation=function(f,w,T,E){return new v(f,w,T,E)},d.inAnim=function(){var f=this,w=[];for(var T in f.anims)f.anims[k](T)&&function(E){w.push({anim:new v(E._attrs,E.dur,E.easing,E._callback),mina:E,curStatus:E.status(),status:function(P){return E.status(P)},stop:function(){E.stop()}})}(f.anims[T]);return w},a.animate=function(f,w,T,E,P,M){"function"!=typeof P||P.length||(M=P,P=ue.linear);var j=ue.time(),O=ue(f,w,j,j+E,ue.time,T,P);return M&&ie.once("mina.finish."+O.id,M),O},d.stop=function(){for(var f=this.inAnim(),w=0,T=f.length;T>w;w++)f[w].stop();return this},d.animate=function(f,w,T,E){"function"!=typeof T||T.length||(E=T,T=ue.linear),f instanceof v&&(E=f.callback,T=f.easing,w=f.dur,f=f.attr);var P,M,j,O,L=[],U=[],W={},V=this;for(var $ in f)if(f[k]($)){V.equal?(P=(O=V.equal($,h(f[$]))).from,M=O.to,j=O.f):(P=+V.attr($),M=+f[$]);var fe=m(P,"array")?P.length:1;W[$]=u(L.length,L.length+fe,j),L=L.concat(P),U=U.concat(M)}var ce=ue.time(),xe=ue(L,U,ce,ce+w,ue.time,function(te){var se={};for(var ne in W)W[k](ne)&&(se[ne]=W[ne](te));V.attr(se)},T);return V.anims[xe.id]=xe,xe._attrs=f,xe._callback=E,ie("snap.animcreated."+V.id,xe),ie.once("mina.finish."+xe.id,function(){ie.off("mina.*."+xe.id),delete V.anims[xe.id],E&&E.call(V)}),ie.once("mina.stop."+xe.id,function(){ie.off("mina.*."+xe.id),delete V.anims[xe.id]}),V}}),q.plugin(function(a,F,y,e,o){function u(v,f,w,T,E,P){return null==f&&"[object SVGMatrix]"==d.call(v)?(this.a=v.a,this.b=v.b,this.c=v.c,this.d=v.d,this.e=v.e,void(this.f=v.f)):void(null!=v?(this.a=+v,this.b=+f,this.c=+w,this.d=+T,this.e=+E,this.f=+P):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var d=Object.prototype.toString,m=String,h=Math;(function(v){function f(T){return T[0]*T[0]+T[1]*T[1]}function w(T){var E=h.sqrt(f(T));T[0]&&(T[0]/=E),T[1]&&(T[1]/=E)}v.add=function(T,E,P,M,j,O){if(T&&T instanceof u)return this.add(T.a,T.b,T.c,T.d,T.e,T.f);var L=T*this.a+E*this.c,U=T*this.b+E*this.d;return this.e+=j*this.a+O*this.c,this.f+=j*this.b+O*this.d,this.c=P*this.a+M*this.c,this.d=P*this.b+M*this.d,this.a=L,this.b=U,this},u.prototype.multLeft=function(T,E,P,M,j,O){if(T&&T instanceof u)return this.multLeft(T.a,T.b,T.c,T.d,T.e,T.f);var L=T*this.a+P*this.b,U=T*this.c+P*this.d,W=T*this.e+P*this.f+j;return this.b=E*this.a+M*this.b,this.d=E*this.c+M*this.d,this.f=E*this.e+M*this.f+O,this.a=L,this.c=U,this.e=W,this},v.invert=function(){var T=this,E=T.a*T.d-T.b*T.c;return new u(T.d/E,-T.b/E,-T.c/E,T.a/E,(T.c*T.f-T.d*T.e)/E,(T.b*T.e-T.a*T.f)/E)},v.clone=function(){return new u(this.a,this.b,this.c,this.d,this.e,this.f)},v.translate=function(T,E){return this.e+=T*this.a+E*this.c,this.f+=T*this.b+E*this.d,this},v.scale=function(T,E,P,M){return null==E&&(E=T),(P||M)&&this.translate(P,M),this.a*=T,this.b*=T,this.c*=E,this.d*=E,(P||M)&&this.translate(-P,-M),this},v.rotate=function(T,E,P){T=a.rad(T),E=E||0,P=P||0;var M=+h.cos(T).toFixed(9),j=+h.sin(T).toFixed(9);return this.add(M,j,-j,M,E,P),this.add(1,0,0,1,-E,-P)},v.skewX=function(T){return this.skew(T,0)},v.skewY=function(T){return this.skew(0,T)},v.skew=function(T,E){T=T||0,E=E||0,T=a.rad(T),E=a.rad(E);var P=h.tan(T).toFixed(9),M=h.tan(E).toFixed(9);return this.add(1,M,P,1,0,0)},v.x=function(T,E){return T*this.a+E*this.c+this.e},v.y=function(T,E){return T*this.b+E*this.d+this.f},v.get=function(T){return+this[m.fromCharCode(97+T)].toFixed(4)},v.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},v.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},v.determinant=function(){return this.a*this.d-this.b*this.c},v.split=function(){var T={};T.dx=this.e,T.dy=this.f;var E=[[this.a,this.b],[this.c,this.d]];T.scalex=h.sqrt(f(E[0])),w(E[0]),T.shear=E[0][0]*E[1][0]+E[0][1]*E[1][1],E[1]=[E[1][0]-E[0][0]*T.shear,E[1][1]-E[0][1]*T.shear],T.scaley=h.sqrt(f(E[1])),w(E[1]),T.shear/=T.scaley,this.determinant()<0&&(T.scalex=-T.scalex);var P=E[0][1],M=E[1][1];return 0>M?(T.rotate=a.deg(h.acos(M)),0>P&&(T.rotate=360-T.rotate)):T.rotate=a.deg(h.asin(P)),T.isSimple=!(+T.shear.toFixed(9)||T.scalex.toFixed(9)!=T.scaley.toFixed(9)&&T.rotate),T.isSuperSimple=!+T.shear.toFixed(9)&&T.scalex.toFixed(9)==T.scaley.toFixed(9)&&!T.rotate,T.noRotation=!+T.shear.toFixed(9)&&!T.rotate,T},v.toTransformString=function(T){var E=T||this.split();return+E.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(E.scalex=+E.scalex.toFixed(4),E.scaley=+E.scaley.toFixed(4),E.rotate=+E.rotate.toFixed(4),(E.dx||E.dy?"t"+[+E.dx.toFixed(4),+E.dy.toFixed(4)]:"")+(E.rotate?"r"+[+E.rotate.toFixed(4),0,0]:"")+(1!=E.scalex||1!=E.scaley?"s"+[E.scalex,E.scaley,0,0]:""))}})(u.prototype),a.Matrix=u,a.matrix=function(v,f,w,T,E,P){return new u(v,f,w,T,E,P)}}),q.plugin(function(a,F,y,e,o){function u(U){return function(W){if(ie.stop(),W instanceof o&&1==W.node.childNodes.length&&("radialGradient"==W.node.firstChild.tagName||"linearGradient"==W.node.firstChild.tagName||"pattern"==W.node.firstChild.tagName)&&(W=W.node.firstChild,w(this).appendChild(W),W=v(W)),W instanceof F)if("radialGradient"==W.type||"linearGradient"==W.type||"pattern"==W.type){W.node.id||E(W.node,{id:W.id});var V=P(W.node.id)}else V=W.attr(U);else if((V=a.color(W)).error){var $=a(w(this).ownerSVGElement).gradient(W);$?($.node.id||E($.node,{id:$.id}),V=P($.node.id)):V=W}else V=M(V);var fe={};fe[U]=V,E(this.node,fe),this.node.style[U]=O}}function d(U){ie.stop(),U==+U&&(U+="px"),this.node.style.fontSize=U}function m(U){for(var W=[],V=U.childNodes,$=0,fe=V.length;fe>$;$++){var ce=V[$];3==ce.nodeType&&W.push(ce.nodeValue),"tspan"==ce.tagName&&(1==ce.childNodes.length&&3==ce.firstChild.nodeType?W.push(ce.firstChild.nodeValue):W.push(m(ce)))}return W}function h(){return ie.stop(),this.node.style.fontSize}var U,k=a._.make,v=a._.wrap,f=a.is,w=a._.getSomeDefs,T=/^url\((['"]?)([^)]+)\1\)$/,E=a._.$,P=a.url,M=String,j=a._.separator,O="";a.deurl=function(U){var W=String(U).match(T);return W?W[2]:U},ie.on("snap.util.attr.mask",function(U){if(U instanceof F||U instanceof o){if(ie.stop(),U instanceof o&&1==U.node.childNodes.length&&(U=U.node.firstChild,w(this).appendChild(U),U=v(U)),"mask"==U.type)var W=U;else(W=k("mask",w(this))).node.appendChild(U.node);!W.node.id&&E(W.node,{id:W.id}),E(this.node,{mask:P(W.id)})}}),U=function(U){if(U instanceof F||U instanceof o){ie.stop();for(var W,V=U.node;V;){if("clipPath"===V.nodeName){W=new F(V);break}if("svg"===V.nodeName){W=void 0;break}V=V.parentNode}W||((W=k("clipPath",w(this))).node.appendChild(U.node),!W.node.id&&E(W.node,{id:W.id})),E(this.node,{"clip-path":P(W.node.id||W.id)})}},ie.on("snap.util.attr.clip",U),ie.on("snap.util.attr.clip-path",U),ie.on("snap.util.attr.clipPath",U),ie.on("snap.util.attr.fill",u("fill")),ie.on("snap.util.attr.stroke",u("stroke"));var L=/^([lr])(?:\(([^)]*)\))?(.*)$/i;ie.on("snap.util.grad.parse",function(U){function W(ve,Ce){for(var be=(Ce-te)/(ve-se),de=se;ve>de;de++)ce[de].offset=+(+te+be*(de-se)).toFixed(2);se=ve,te=Ce}var V=(U=M(U)).match(L);if(!V)return null;var $=V[1],fe=V[2],ce=V[3];1==(fe=fe.split(/\s*,\s*/).map(function(ve){return+ve==ve?+ve:ve})).length&&0==fe[0]&&(fe=[]);var xe=(ce=(ce=ce.split("-")).map(function(ve){var Ce={color:(ve=ve.split(":"))[0]};return ve[1]&&(Ce.offset=parseFloat(ve[1])),Ce})).length,te=0,se=0;xe--;for(var ne=0;xe>ne;ne++)"offset"in ce[ne]&&W(ne,ce[ne].offset);return ce[xe].offset=ce[xe].offset||100,W(xe,ce[xe].offset),{type:$,params:fe,stops:ce}}),ie.on("snap.util.attr.d",function(U){ie.stop(),f(U,"array")&&f(U[0],"array")&&(U=a.path.toString.call(U)),(U=M(U)).match(/[ruo]/i)&&(U=a.path.toAbsolute(U)),E(this.node,{d:U})})(-1),ie.on("snap.util.attr.#text",function(U){ie.stop(),U=M(U);for(var W=e.doc.createTextNode(U);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(W)})(-1),ie.on("snap.util.attr.path",function(U){ie.stop(),this.attr({d:U})})(-1),ie.on("snap.util.attr.class",function(U){ie.stop(),this.node.className.baseVal=U})(-1),ie.on("snap.util.attr.viewBox",function(U){var W;W=f(U,"object")&&"x"in U?[U.x,U.y,U.width,U.height].join(" "):f(U,"array")?U.join(" "):U,E(this.node,{viewBox:W}),ie.stop()})(-1),ie.on("snap.util.attr.transform",function(U){this.transform(U),ie.stop()})(-1),ie.on("snap.util.attr.r",function(U){"rect"==this.type&&(ie.stop(),E(this.node,{rx:U,ry:U}))})(-1),ie.on("snap.util.attr.textpath",function(U){if(ie.stop(),"text"==this.type){var W,V,$;if(!U&&this.textPath){for(V=this.textPath;V.node.firstChild;)this.node.appendChild(V.node.firstChild);return V.remove(),void delete this.textPath}if(f(U,"string")){var fe=w(this),ce=v(fe.parentNode).path(U);fe.appendChild(ce.node),W=ce.id,ce.attr({id:W})}else(U=v(U))instanceof F&&((W=U.attr("id"))||(W=U.id,U.attr({id:W})));if(W)if(V=this.textPath,$=this.node,V)V.attr({"xlink:href":"#"+W});else{for(V=E("textPath",{"xlink:href":"#"+W});$.firstChild;)V.appendChild($.firstChild);$.appendChild(V),this.textPath=v(V)}}})(-1),ie.on("snap.util.attr.text",function(U){if("text"==this.type){for(var W=this.node,V=function(fe){var ce=E("tspan");if(f(fe,"array"))for(var xe=0;xe<fe.length;xe++)ce.appendChild(V(fe[xe]));else ce.appendChild(e.doc.createTextNode(fe));return ce.normalize&&ce.normalize(),ce};W.firstChild;)W.removeChild(W.firstChild);for(var $=V(U);$.firstChild;)W.appendChild($.firstChild)}ie.stop()})(-1),ie.on("snap.util.attr.fontSize",d)(-1),ie.on("snap.util.attr.font-size",d)(-1),ie.on("snap.util.getattr.transform",function(){return ie.stop(),this.transform()})(-1),ie.on("snap.util.getattr.textpath",function(){return ie.stop(),this.textPath})(-1),function(){function U(V){return function(){ie.stop();var $=e.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+V);return"none"==$?$:a(e.doc.getElementById($.match(T)[1]))}}function W(V){return function($){ie.stop();var fe="marker"+V.charAt(0).toUpperCase()+V.substring(1);if(""!=$&&$){if("marker"==$.type){var ce=$.node.id;return ce||E($.node,{id:$.id}),void(this.node.style[fe]=P(ce))}}else this.node.style[fe]="none"}}ie.on("snap.util.getattr.marker-end",U("end"))(-1),ie.on("snap.util.getattr.markerEnd",U("end"))(-1),ie.on("snap.util.getattr.marker-start",U("start"))(-1),ie.on("snap.util.getattr.markerStart",U("start"))(-1),ie.on("snap.util.getattr.marker-mid",U("mid"))(-1),ie.on("snap.util.getattr.markerMid",U("mid"))(-1),ie.on("snap.util.attr.marker-end",W("end"))(-1),ie.on("snap.util.attr.markerEnd",W("end"))(-1),ie.on("snap.util.attr.marker-start",W("start"))(-1),ie.on("snap.util.attr.markerStart",W("start"))(-1),ie.on("snap.util.attr.marker-mid",W("mid"))(-1),ie.on("snap.util.attr.markerMid",W("mid"))(-1)}(),ie.on("snap.util.getattr.r",function(){return"rect"==this.type&&E(this.node,"rx")==E(this.node,"ry")?(ie.stop(),E(this.node,"rx")):void 0})(-1),ie.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){ie.stop();var U=m(this.node);return 1==U.length?U[0]:U}})(-1),ie.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),ie.on("snap.util.getattr.fill",function(U){if(!U){ie.stop();var W=ie("snap.util.getattr.fill",this,!0).firstDefined();return a(a.deurl(W))||W}})(-1),ie.on("snap.util.getattr.stroke",function(U){if(!U){ie.stop();var W=ie("snap.util.getattr.stroke",this,!0).firstDefined();return a(a.deurl(W))||W}})(-1),ie.on("snap.util.getattr.viewBox",function(){ie.stop();var U=E(this.node,"viewBox");return U?(U=U.split(j),a._.box(+U[0],+U[1],+U[2],+U[3])):void 0})(-1),ie.on("snap.util.getattr.points",function(){var U=E(this.node,"points");return ie.stop(),U?U.split(j):void 0})(-1),ie.on("snap.util.getattr.path",function(){var U=E(this.node,"d");return ie.stop(),U})(-1),ie.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),ie.on("snap.util.getattr.fontSize",h)(-1),ie.on("snap.util.getattr.font-size",h)(-1)}),q.plugin(function(a,F,y,e,o){var u=/\S+/g,d=String,m=F.prototype;m.addClass=function(h){var k,f,w,T=d(h||"").match(u)||[],E=this.node,P=E.className.baseVal,M=P.match(u)||[];if(T.length){for(k=0;f=T[k++];)~M.indexOf(f)||M.push(f);P!=(w=M.join(" "))&&(E.className.baseVal=w)}return this},m.removeClass=function(h){var k,v,f,w,T=d(h||"").match(u)||[],E=this.node,P=E.className.baseVal,M=P.match(u)||[];if(M.length){for(k=0;f=T[k++];)~(v=M.indexOf(f))&&M.splice(v,1);P!=(w=M.join(" "))&&(E.className.baseVal=w)}return this},m.hasClass=function(h){return!!~(this.node.className.baseVal.match(u)||[]).indexOf(h)},m.toggleClass=function(h,k){if(null!=k)return k?this.addClass(h):this.removeClass(h);var v,f,w,T,E=(h||"").match(u)||[],P=this.node,M=P.className.baseVal,j=M.match(u)||[];for(v=0;w=E[v++];)~(f=j.indexOf(w))?j.splice(f,1):j.push(w);return M!=(T=j.join(" "))&&(P.className.baseVal=T),this}}),q.plugin(function(a,F,y,e,o){function u(f){return f}function d(f){return function(w){return+w.toFixed(3)+f}}var m={"+":function(f,w){return f+w},"-":function(f,w){return f-w},"/":function(f,w){return f/w},"*":function(f,w){return f*w}},h=String,k=/[a-z]+$/i,v=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;ie.on("snap.util.attr",function(f){var w=h(f).match(v);if(w){var T=ie.nt(),E=T.substring(T.lastIndexOf(".")+1),P=this.attr(E),M={};ie.stop();var j=w[3]||"",O=P.match(k),L=m[w[1]];if(O&&O==j?f=L(parseFloat(P),+w[2]):(P=this.asPX(E),f=L(this.asPX(E),this.asPX(E,w[2]+j))),isNaN(P)||isNaN(f))return;M[E]=f,this.attr(M)}})(-10),ie.on("snap.util.equal",function(f,w){var T=h(this.attr(f)||""),E=h(w).match(v);if(E){ie.stop();var P=E[3]||"",M=T.match(k),j=m[E[1]];return M&&M==P?{from:parseFloat(T),to:j(parseFloat(T),+E[2]),f:d(M)}:{from:T=this.asPX(f),to:j(T,this.asPX(f,E[2]+P)),f:u}}})(-10)}),q.plugin(function(a,F,y,e,o){var u=y.prototype,d=a.is;u.rect=function(h,k,v,f,w,T){var E;return null==T&&(T=w),d(h,"object")&&"[object Object]"==h?E=h:null!=h&&(E={x:h,y:k,width:v,height:f},null!=w&&(E.rx=w,E.ry=T)),this.el("rect",E)},u.circle=function(h,k,v){var f;return d(h,"object")&&"[object Object]"==h?f=h:null!=h&&(f={cx:h,cy:k,r:v}),this.el("circle",f)};var m=function(){function h(){this.parentNode.removeChild(this)}return function(k,v){var f=e.doc.createElement("img"),w=e.doc.body;f.style.cssText="position:absolute;left:-9999em;top:-9999em",f.onload=function(){v.call(f),f.onload=f.onerror=null,w.removeChild(f)},f.onerror=h,w.appendChild(f),f.src=k}}();u.image=function(h,k,v,f,w){var T=this.el("image");if(d(h,"object")&&"src"in h)T.attr(h);else if(null!=h){var E={"xlink:href":h,preserveAspectRatio:"none"};null!=k&&null!=v&&(E.x=k,E.y=v),null!=f&&null!=w?(E.width=f,E.height=w):m(h,function(){a._.$(T.node,{width:this.offsetWidth,height:this.offsetHeight})}),a._.$(T.node,E)}return T},u.ellipse=function(h,k,v,f){var w;return d(h,"object")&&"[object Object]"==h?w=h:null!=h&&(w={cx:h,cy:k,rx:v,ry:f}),this.el("ellipse",w)},u.path=function(h){var k;return d(h,"object")&&!d(h,"array")?k=h:h&&(k={d:h}),this.el("path",k)},u.group=u.g=function(h){var k=this.el("g");return 1==arguments.length&&h&&!h.type?k.attr(h):arguments.length&&k.add(Array.prototype.slice.call(arguments,0)),k},u.svg=function(h,k,v,f,w,T,E,P){var M={};return d(h,"object")&&null==k?M=h:(null!=h&&(M.x=h),null!=k&&(M.y=k),null!=v&&(M.width=v),null!=f&&(M.height=f),null!=w&&null!=T&&null!=E&&null!=P&&(M.viewBox=[w,T,E,P])),this.el("svg",M)},u.mask=function(h){var k=this.el("mask");return 1==arguments.length&&h&&!h.type?k.attr(h):arguments.length&&k.add(Array.prototype.slice.call(arguments,0)),k},u.ptrn=function(h,k,v,f,w,T,E,P){if(d(h,"object"))var M=h;else M={patternUnits:"userSpaceOnUse"},h&&(M.x=h),k&&(M.y=k),null!=v&&(M.width=v),null!=f&&(M.height=f),M.viewBox=null!=w&&null!=T&&null!=E&&null!=P?[w,T,E,P]:[h||0,k||0,v||0,f||0];return this.el("pattern",M)},u.use=function(h){return null!=h?(h instanceof F&&(h.attr("id")||h.attr({id:a._.id(h)}),h=h.attr("id")),"#"==String(h).charAt()&&(h=h.substring(1)),this.el("use",{"xlink:href":"#"+h})):F.prototype.use.call(this)},u.symbol=function(h,k,v,f){var w={};return null!=h&&null!=k&&null!=v&&null!=f&&(w.viewBox=[h,k,v,f]),this.el("symbol",w)},u.text=function(h,k,v){var f={};return d(h,"object")?f=h:null!=h&&(f={x:h,y:k,text:v||""}),this.el("text",f)},u.line=function(h,k,v,f){var w={};return d(h,"object")?w=h:null!=h&&(w={x1:h,x2:v,y1:k,y2:f}),this.el("line",w)},u.polyline=function(h){arguments.length>1&&(h=Array.prototype.slice.call(arguments,0));var k={};return d(h,"object")&&!d(h,"array")?k=h:null!=h&&(k={points:h}),this.el("polyline",k)},u.polygon=function(h){arguments.length>1&&(h=Array.prototype.slice.call(arguments,0));var k={};return d(h,"object")&&!d(h,"array")?k=h:null!=h&&(k={points:h}),this.el("polygon",k)},function(){function h(){return this.selectAll("stop")}function k(M,j){var O=P("stop"),L={offset:+j+"%"};M=a.color(M),L["stop-color"]=M.hex,M.opacity<1&&(L["stop-opacity"]=M.opacity),P(O,L);for(var U,W=this.stops(),V=0;V<W.length;V++){if(parseFloat(W[V].attr("offset"))>j){this.node.insertBefore(O,W[V].node),U=!0;break}}return U||this.node.appendChild(O),this}function v(){if("linearGradient"==this.type){var M=P(this.node,"x1")||0,j=P(this.node,"x2")||1,O=P(this.node,"y1")||0,L=P(this.node,"y2")||0;return a._.box(M,O,math.abs(j-M),math.abs(L-O))}var U=this.node.cx||.5,W=this.node.cy||.5,V=this.node.r||0;return a._.box(U-V,W-V,2*V,2*V)}function f(M){var j=M,O=this.stops();if("string"==typeof M&&(j=ie("snap.util.grad.parse",null,"l(0,0,0,1)"+M).firstDefined().stops),a.is(j,"array")){for(var L=0;L<O.length;L++)if(j[L]){var U=a.color(j[L].color),W={offset:j[L].offset+"%"};W["stop-color"]=U.hex,U.opacity<1&&(W["stop-opacity"]=U.opacity),O[L].attr(W)}else O[L].remove();for(L=O.length;L<j.length;L++)this.addStop(j[L].color,j[L].offset);return this}}function T(M,j,O,L,U){var W=a._.make("linearGradient",M);return W.stops=h,W.addStop=k,W.getBBox=v,W.setStops=f,null!=j&&P(W.node,{x1:j,y1:O,x2:L,y2:U}),W}function E(M,j,O,L,U,W){var V=a._.make("radialGradient",M);return V.stops=h,V.addStop=k,V.getBBox=v,null!=j&&P(V.node,{cx:j,cy:O,r:L}),null!=U&&null!=W&&P(V.node,{fx:U,fy:W}),V}var P=a._.$;u.gradient=function(M){return function w(M,j){var O,L=ie("snap.util.grad.parse",null,j).firstDefined();if(!L)return null;L.params.unshift(M),O="l"==L.type.toLowerCase()?T.apply(0,L.params):E.apply(0,L.params),L.type!=L.type.toLowerCase()&&P(O.node,{gradientUnits:"userSpaceOnUse"});for(var U=L.stops,W=U.length,V=0;W>V;V++){var $=U[V];O.addStop($.color,$.offset)}return O}(this.defs,M)},u.gradientLinear=function(M,j,O,L){return T(this.defs,M,j,O,L)},u.gradientRadial=function(M,j,O,L,U){return E(this.defs,M,j,O,L,U)},u.toString=function(){var M,j=this.node.ownerDocument,O=j.createDocumentFragment(),L=j.createElement("div"),U=this.node.cloneNode(!0);return O.appendChild(L),L.appendChild(U),a._.$(U,{xmlns:"http://www.w3.org/2000/svg"}),M=L.innerHTML,O.removeChild(O.firstChild),M},u.toDataURL=function(){return J&&J.btoa?"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this))):void 0},u.clear=function(){for(var M,j=this.node.firstChild;j;)M=j.nextSibling,"defs"!=j.tagName?j.parentNode.removeChild(j):u.clear.call({node:j}),j=M}}()}),q.plugin(function(a,F,y,e){function o(Te){var Re=o.ps=o.ps||{};return Re[Te]?Re[Te].sleep=100:Re[Te]={sleep:100},setTimeout(function(){for(var je in Re)Re[Je](je)&&je!=Te&&(Re[je].sleep--,!Re[je].sleep&&delete Re[je])}),Re[Te]}function u(Te,Re,je,K){return null==Te&&(Te=Re=je=K=0),null==Re&&(Re=Te.y,je=Te.width,K=Te.height,Te=Te.x),{x:Te,y:Re,width:je,w:je,height:K,h:K,x2:Te+je,y2:Re+K,cx:Te+je/2,cy:Re+K/2,r1:ee.min(je,K)/2,r2:ee.max(je,K)/2,r0:ee.sqrt(je*je+K*K)/2,path:fe(Te,Re,je,K),vb:[Te,Re,je,K].join(" ")}}function d(){return this.join(",").replace(G,"$1")}function m(Te){var Re=Ie(Te);return Re.toString=d,Re}function h(Te,Re,je,K,oe,he,me,Le,Se){return null==Se?P(Te,Re,je,K,oe,he,me,Le):v(Te,Re,je,K,oe,he,me,Le,function M(Te,Re,je,K,oe,he,me,Le,Se){if(!(0>Se||P(Te,Re,je,K,oe,he,me,Le)<Se)){var ke,De=1,He=De/2,$e=De-He,Xe=.01;for(ke=P(Te,Re,je,K,oe,he,me,Le,$e);We(ke-Se)>Xe;)ke=P(Te,Re,je,K,oe,he,me,Le,$e+=(Se>ke?1:-1)*(He/=2));return $e}}(Te,Re,je,K,oe,he,me,Le,Se))}function k(Te,Re){function je(K){return+(+K).toFixed(3)}return a._.cacher(function(K,oe,he){K instanceof F&&(K=K.attr("d"));for(var me,Le,Se,ke,De,He="",$e={},Xe=0,Ke=0,ct=(K=be(K)).length;ct>Ke;Ke++){if("M"==(Se=K[Ke])[0])me=+Se[1],Le=+Se[2];else{if(Xe+(ke=h(me,Le,Se[1],Se[2],Se[3],Se[4],Se[5],Se[6]))>oe){if(Re&&!$e.start){if(He+=["C"+je((De=h(me,Le,Se[1],Se[2],Se[3],Se[4],Se[5],Se[6],oe-Xe)).start.x),je(De.start.y),je(De.m.x),je(De.m.y),je(De.x),je(De.y)],he)return He;$e.start=He,He=["M"+je(De.x),je(De.y)+"C"+je(De.n.x),je(De.n.y),je(De.end.x),je(De.end.y),je(Se[5]),je(Se[6])].join(),Xe+=ke,me=+Se[5],Le=+Se[6];continue}if(!Te&&!Re)return h(me,Le,Se[1],Se[2],Se[3],Se[4],Se[5],Se[6],oe-Xe)}Xe+=ke,me=+Se[5],Le=+Se[6]}He+=Se.shift()+Se}return $e.end=He,Te?Xe:Re?$e:v(me,Le,Se[0],Se[1],Se[2],Se[3],Se[4],Se[5],1)},null,a._.clone)}function v(Te,Re,je,K,oe,he,me,Le,Se){var ke=1-Se,De=Pe(ke,3),He=Pe(ke,2),$e=Se*Se,Xe=$e*Se,vt=Te+2*Se*(je-Te)+$e*(oe-2*je+Te),pt=Re+2*Se*(K-Re)+$e*(he-2*K+Re),_t=je+2*Se*(oe-je)+$e*(me-2*oe+je),kt=K+2*Se*(he-K)+$e*(Le-2*he+K);return{x:De*Te+3*He*Se*je+3*ke*Se*Se*oe+Xe*me,y:De*Re+3*He*Se*K+3*ke*Se*Se*he+Xe*Le,m:{x:vt,y:pt},n:{x:_t,y:kt},start:{x:ke*Te+Se*je,y:ke*Re+Se*K},end:{x:ke*oe+Se*me,y:ke*he+Se*Le},alpha:90-180*ee.atan2(vt-_t,pt-kt)/pe}}function f(Te,Re,je,K,oe,he,me,Le){a.is(Te,"array")||(Te=[Te,Re,je,K,oe,he,me,Le]);var Se=Ce.apply(null,Te);return u(Se.min.x,Se.min.y,Se.max.x-Se.min.x,Se.max.y-Se.min.y)}function w(Te,Re,je){return Re>=Te.x&&Re<=Te.x+Te.width&&je>=Te.y&&je<=Te.y+Te.height}function T(Te,Re){return Te=u(Te),w(Re=u(Re),Te.x,Te.y)||w(Re,Te.x2,Te.y)||w(Re,Te.x,Te.y2)||w(Re,Te.x2,Te.y2)||w(Te,Re.x,Re.y)||w(Te,Re.x2,Re.y)||w(Te,Re.x,Re.y2)||w(Te,Re.x2,Re.y2)||(Te.x<Re.x2&&Te.x>Re.x||Re.x<Te.x2&&Re.x>Te.x)&&(Te.y<Re.y2&&Te.y>Re.y||Re.y<Te.y2&&Re.y>Te.y)}function E(Te,Re,je,K,oe){return Te*(Te*(-3*Re+9*je-9*K+3*oe)+6*Re-12*je+6*K)-3*Re+3*je}function P(Te,Re,je,K,oe,he,me,Le,Se){null==Se&&(Se=1);for(var ke=(Se=Se>1?1:0>Se?0:Se)/2,He=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],$e=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Xe=0,Ke=0;12>Ke;Ke++){var ct=ke*He[Ke]+ke,vt=E(ct,Te,je,oe,me),pt=E(ct,Re,K,he,Le),_t=vt*vt+pt*pt;Xe+=$e[Ke]*ee.sqrt(_t)}return ke*Xe}function j(Te,Re,je,K,oe,he,me,Le){if(!(_e(Te,je)<Ne(oe,me)||Ne(Te,je)>_e(oe,me)||_e(Re,K)<Ne(he,Le)||Ne(Re,K)>_e(he,Le))){var De=(Te-je)*(he-Le)-(Re-K)*(oe-me);if(De){var He=((Te*K-Re*je)*(oe-me)-(Te-je)*(oe*Le-he*me))/De,$e=((Te*K-Re*je)*(he-Le)-(Re-K)*(oe*Le-he*me))/De,Xe=+He.toFixed(2),Ke=+$e.toFixed(2);if(!(Xe<+Ne(Te,je).toFixed(2)||Xe>+_e(Te,je).toFixed(2)||Xe<+Ne(oe,me).toFixed(2)||Xe>+_e(oe,me).toFixed(2)||Ke<+Ne(Re,K).toFixed(2)||Ke>+_e(Re,K).toFixed(2)||Ke<+Ne(he,Le).toFixed(2)||Ke>+_e(he,Le).toFixed(2)))return{x:He,y:$e}}}}function O(Te,Re,je){if(!T(f(Te),f(Re)))return je?0:[];for(var Le=~~(P.apply(0,Te)/8),Se=~~(P.apply(0,Re)/8),ke=[],De=[],He={},$e=je?0:[],Xe=0;Le+1>Xe;Xe++){var Ke=v.apply(0,Te.concat(Xe/Le));ke.push({x:Ke.x,y:Ke.y,t:Xe/Le})}for(Xe=0;Se+1>Xe;Xe++)Ke=v.apply(0,Re.concat(Xe/Se)),De.push({x:Ke.x,y:Ke.y,t:Xe/Se});for(Xe=0;Le>Xe;Xe++)for(var ct=0;Se>ct;ct++){var vt=ke[Xe],pt=ke[Xe+1],_t=De[ct],kt=De[ct+1],gt=We(pt.x-vt.x)<.001?"y":"x",it=We(kt.x-_t.x)<.001?"y":"x",Nt=j(vt.x,vt.y,pt.x,pt.y,_t.x,_t.y,kt.x,kt.y);if(Nt){if(He[Nt.x.toFixed(4)]==Nt.y.toFixed(4))continue;He[Nt.x.toFixed(4)]=Nt.y.toFixed(4);var Ot=vt.t+We((Nt[gt]-vt[gt])/(pt[gt]-vt[gt]))*(pt.t-vt.t),At=_t.t+We((Nt[it]-_t[it])/(kt[it]-_t[it]))*(kt.t-_t.t);Ot>=0&&1>=Ot&&At>=0&&1>=At&&(je?$e++:$e.push({x:Nt.x,y:Nt.y,t1:Ot,t2:At}))}}return $e}function W(Te,Re,je){Te=be(Te),Re=be(Re);for(var K,oe,he,me,Le,Se,ke,De,He,$e,Xe=je?0:[],Ke=0,ct=Te.length;ct>Ke;Ke++){var vt=Te[Ke];if("M"==vt[0])K=Le=vt[1],oe=Se=vt[2];else{"C"==vt[0]?(He=[K,oe].concat(vt.slice(1)),K=He[6],oe=He[7]):(He=[K,oe,K,oe,Le,Se,Le,Se],K=Le,oe=Se);for(var pt=0,_t=Re.length;_t>pt;pt++){var kt=Re[pt];if("M"==kt[0])he=ke=kt[1],me=De=kt[2];else{"C"==kt[0]?($e=[he,me].concat(kt.slice(1)),he=$e[6],me=$e[7]):($e=[he,me,he,me,ke,De,ke,De],he=ke,me=De);var gt=O(He,$e,je);if(je)Xe+=gt;else{for(var it=0,Nt=gt.length;Nt>it;it++)gt[it].segment1=Ke,gt[it].segment2=pt,gt[it].bez1=He,gt[it].bez2=$e;Xe=Xe.concat(gt)}}}}}return Xe}function $(Te){var Re=o(Te);if(Re.bbox)return Ie(Re.bbox);if(!Te)return u();for(var je,K=0,oe=0,he=[],me=[],Le=0,Se=(Te=be(Te)).length;Se>Le;Le++)if("M"==(je=Te[Le])[0])K=je[1],oe=je[2],he.push(K),me.push(oe);else{var ke=Ce(K,oe,je[1],je[2],je[3],je[4],je[5],je[6]);he=he.concat(ke.min.x,ke.max.x),me=me.concat(ke.min.y,ke.max.y),K=je[5],oe=je[6]}var De=Ne.apply(0,he),He=Ne.apply(0,me),Ke=u(De,He,_e.apply(0,he)-De,_e.apply(0,me)-He);return Re.bbox=Ie(Ke),Ke}function fe(Te,Re,je,K,oe){if(oe)return[["M",+Te+ +oe,Re],["l",je-2*oe,0],["a",oe,oe,0,0,1,oe,oe],["l",0,K-2*oe],["a",oe,oe,0,0,1,-oe,oe],["l",2*oe-je,0],["a",oe,oe,0,0,1,-oe,-oe],["l",0,2*oe-K],["a",oe,oe,0,0,1,oe,-oe],["z"]];var he=[["M",Te,Re],["l",je,0],["l",0,K],["l",-je,0],["z"]];return he.toString=d,he}function ce(Te,Re,je,K,oe){if(null==oe&&null==K&&(K=je),Te=+Te,Re=+Re,je=+je,K=+K,null!=oe)var he=Math.PI/180,me=Te+je*Math.cos(-K*he),Le=Te+je*Math.cos(-oe*he),De=[["M",me,Re+je*Math.sin(-K*he)],["A",je,je,0,+(oe-K>180),0,Le,Re+je*Math.sin(-oe*he)]];else De=[["M",Te,Re],["m",0,-K],["a",je,K,0,1,1,0,2*K],["a",je,K,0,1,1,0,-2*K],["z"]];return De.toString=d,De}function te(Te){var Re=o(Te);if(Re.abs)return m(Re.abs);if(Be(Te,"array")&&Be(Te&&Te[0],"array")||(Te=a.parsePathString(Te)),!Te||!Te.length)return[["M",0,0]];var je,K=[],oe=0,he=0,me=0,Le=0,Se=0;"M"==Te[0][0]&&(me=oe=+Te[0][1],Le=he=+Te[0][2],Se++,K[0]=["M",oe,he]);for(var ke,De,He=3==Te.length&&"M"==Te[0][0]&&"R"==Te[1][0].toUpperCase()&&"Z"==Te[2][0].toUpperCase(),$e=Se,Xe=Te.length;Xe>$e;$e++){if(K.push(ke=[]),(je=(De=Te[$e])[0])!=je.toUpperCase())switch(ke[0]=je.toUpperCase(),ke[0]){case"A":ke[1]=De[1],ke[2]=De[2],ke[3]=De[3],ke[4]=De[4],ke[5]=De[5],ke[6]=+De[6]+oe,ke[7]=+De[7]+he;break;case"V":ke[1]=+De[1]+he;break;case"H":ke[1]=+De[1]+oe;break;case"R":for(var Ke=[oe,he].concat(De.slice(1)),ct=2,vt=Ke.length;vt>ct;ct++)Ke[ct]=+Ke[ct]+oe,Ke[++ct]=+Ke[ct]+he;K.pop(),K=K.concat(ye(Ke,He));break;case"O":K.pop(),(Ke=ce(oe,he,De[1],De[2])).push(Ke[0]),K=K.concat(Ke);break;case"U":K.pop(),K=K.concat(ce(oe,he,De[1],De[2],De[3])),ke=["U"].concat(K[K.length-1].slice(-2));break;case"M":me=+De[1]+oe,Le=+De[2]+he;default:for(ct=1,vt=De.length;vt>ct;ct++)ke[ct]=+De[ct]+(ct%2?oe:he)}else if("R"==je)Ke=[oe,he].concat(De.slice(1)),K.pop(),K=K.concat(ye(Ke,He)),ke=["R"].concat(De.slice(-2));else if("O"==je)K.pop(),(Ke=ce(oe,he,De[1],De[2])).push(Ke[0]),K=K.concat(Ke);else if("U"==je)K.pop(),K=K.concat(ce(oe,he,De[1],De[2],De[3])),ke=["U"].concat(K[K.length-1].slice(-2));else for(var pt=0,_t=De.length;_t>pt;pt++)ke[pt]=De[pt];if("O"!=(je=je.toUpperCase()))switch(ke[0]){case"Z":oe=+me,he=+Le;break;case"H":oe=ke[1];break;case"V":he=ke[1];break;case"M":me=ke[ke.length-2],Le=ke[ke.length-1];default:oe=ke[ke.length-2],he=ke[ke.length-1]}}return K.toString=d,Re.abs=m(K),K}function se(Te,Re,je,K){return[Te,Re,je,K,je,K]}function ne(Te,Re,je,K,oe,he){var me=.3333333333333333,Le=2/3;return[me*Te+Le*je,me*Re+Le*K,me*oe+Le*je,me*he+Le*K,oe,he]}function ve(Te,Re,je,K,oe,he,me,Le,Se,ke){var De,He=120*pe/180,$e=pe/180*(+oe||0),Xe=[],Ke=a._.cacher(function(zr,wo,Tr){return{x:zr*ee.cos(Tr)-wo*ee.sin(Tr),y:zr*ee.sin(Tr)+wo*ee.cos(Tr)}});if(!je||!K)return[Te,Re,Le,Se,Le,Se];if(ke)Ot=ke[0],At=ke[1],it=ke[2],Nt=ke[3];else{Te=(De=Ke(Te,Re,-$e)).x,Re=De.y,Le=(De=Ke(Le,Se,-$e)).x,Se=De.y;var ct=(ee.cos(pe/180*oe),ee.sin(pe/180*oe),(Te-Le)/2),vt=(Re-Se)/2,pt=ct*ct/(je*je)+vt*vt/(K*K);pt>1&&(je*=pt=ee.sqrt(pt),K*=pt);var _t=je*je,kt=K*K,gt=(he==me?-1:1)*ee.sqrt(We((_t*kt-_t*vt*vt-kt*ct*ct)/(_t*vt*vt+kt*ct*ct))),it=gt*je*vt/K+(Te+Le)/2,Nt=gt*-K*ct/je+(Re+Se)/2,Ot=ee.asin(((Re-Nt)/K).toFixed(9)),At=ee.asin(((Se-Nt)/K).toFixed(9));0>(Ot=it>Te?pe-Ot:Ot)&&(Ot=2*pe+Ot),0>(At=it>Le?pe-At:At)&&(At=2*pe+At),me&&Ot>At&&(Ot-=2*pe),!me&&At>Ot&&(At-=2*pe)}var On=At-Ot;if(We(On)>He){var Ri=At,fs=Le,ji=Se;At=Ot+He*(me&&At>Ot?1:-1),Xe=ve(Le=it+je*ee.cos(At),Se=Nt+K*ee.sin(At),je,K,oe,0,me,fs,ji,[At,Ri,it,Nt])}On=At-Ot;var cs=ee.cos(Ot),Di=ee.sin(Ot),hs=ee.cos(At),Hr=ee.sin(At),li=ee.tan(On/4),rn=4/3*je*li,hn=4/3*K*li,bo=[Te,Re],Wr=[Te+rn*Di,Re-hn*cs],nn=[Le+rn*Hr,Se-hn*hs],Mi=[Le,Se];if(Wr[0]=2*bo[0]-Wr[0],Wr[1]=2*bo[1]-Wr[1],ke)return[Wr,nn,Mi].concat(Xe);for(var xo=[],Er=0,Pi=(Xe=[Wr,nn,Mi].concat(Xe).join().split(",")).length;Pi>Er;Er++)xo[Er]=Er%2?Ke(Xe[Er-1],Xe[Er],$e).y:Ke(Xe[Er],Xe[Er+1],$e).x;return xo}function Ce(Te,Re,je,K,oe,he,me,Le){for(var Se,ke,De,He,$e,Xe,Ke,ct,vt=[],pt=[[],[]],_t=0;2>_t;++_t)if(0==_t?(ke=6*Te-12*je+6*oe,Se=-3*Te+9*je-9*oe+3*me,De=3*je-3*Te):(ke=6*Re-12*K+6*he,Se=-3*Re+9*K-9*he+3*Le,De=3*K-3*Re),We(Se)<1e-12){if(We(ke)<1e-12)continue;(He=-De/ke)>0&&1>He&&vt.push(He)}else Ke=ke*ke-4*De*Se,ct=ee.sqrt(Ke),0>Ke||(($e=(-ke+ct)/(2*Se))>0&&1>$e&&vt.push($e),(Xe=(-ke-ct)/(2*Se))>0&&1>Xe&&vt.push(Xe));for(var kt,gt=vt.length,it=gt;gt--;)kt=1-(He=vt[gt]),pt[0][gt]=kt*kt*kt*Te+3*kt*kt*He*je+3*kt*He*He*oe+He*He*He*me,pt[1][gt]=kt*kt*kt*Re+3*kt*kt*He*K+3*kt*He*He*he+He*He*He*Le;return pt[0][it]=Te,pt[1][it]=Re,pt[0][it+1]=me,pt[1][it+1]=Le,pt[0].length=pt[1].length=it+2,{min:{x:Ne.apply(0,pt[0]),y:Ne.apply(0,pt[1])},max:{x:_e.apply(0,pt[0]),y:_e.apply(0,pt[1])}}}function be(Te,Re){var je=!Re&&o(Te);if(!Re&&je.curve)return m(je.curve);for(var K=te(Te),oe=Re&&te(Re),he={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},me={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Le=function(gt,it,Nt){var Ot,At;if(!gt)return["C",it.x,it.y,it.x,it.y,it.x,it.y];switch(!(gt[0]in{T:1,Q:1})&&(it.qx=it.qy=null),gt[0]){case"M":it.X=gt[1],it.Y=gt[2];break;case"A":gt=["C"].concat(ve.apply(0,[it.x,it.y].concat(gt.slice(1))));break;case"S":"C"==Nt||"S"==Nt?(Ot=2*it.x-it.bx,At=2*it.y-it.by):(Ot=it.x,At=it.y),gt=["C",Ot,At].concat(gt.slice(1));break;case"T":"Q"==Nt||"T"==Nt?(it.qx=2*it.x-it.qx,it.qy=2*it.y-it.qy):(it.qx=it.x,it.qy=it.y),gt=["C"].concat(ne(it.x,it.y,it.qx,it.qy,gt[1],gt[2]));break;case"Q":it.qx=gt[1],it.qy=gt[2],gt=["C"].concat(ne(it.x,it.y,gt[1],gt[2],gt[3],gt[4]));break;case"L":gt=["C"].concat(se(it.x,it.y,gt[1],gt[2]));break;case"H":gt=["C"].concat(se(it.x,it.y,gt[1],it.y));break;case"V":gt=["C"].concat(se(it.x,it.y,it.x,gt[1]));break;case"Z":gt=["C"].concat(se(it.x,it.y,it.X,it.Y))}return gt},Se=function(gt,it){if(gt[it].length>7){gt[it].shift();for(var Nt=gt[it];Nt.length;)De[it]="A",oe&&(He[it]="A"),gt.splice(it++,0,["C"].concat(Nt.splice(0,6)));gt.splice(it,1),ct=_e(K.length,oe&&oe.length||0)}},ke=function(gt,it,Nt,Ot,At){gt&&it&&"M"==gt[At][0]&&"M"!=it[At][0]&&(it.splice(At,0,["M",Ot.x,Ot.y]),Nt.bx=0,Nt.by=0,Nt.x=gt[At][1],Nt.y=gt[At][2],ct=_e(K.length,oe&&oe.length||0))},De=[],He=[],$e="",Xe="",Ke=0,ct=_e(K.length,oe&&oe.length||0);ct>Ke;Ke++){K[Ke]&&($e=K[Ke][0]),"C"!=$e&&(De[Ke]=$e,Ke&&(Xe=De[Ke-1])),K[Ke]=Le(K[Ke],he,Xe),"A"!=De[Ke]&&"C"==$e&&(De[Ke]="C"),Se(K,Ke),oe&&(oe[Ke]&&($e=oe[Ke][0]),"C"!=$e&&(He[Ke]=$e,Ke&&(Xe=He[Ke-1])),oe[Ke]=Le(oe[Ke],me,Xe),"A"!=He[Ke]&&"C"==$e&&(He[Ke]="C"),Se(oe,Ke)),ke(K,oe,he,me,Ke),ke(oe,K,me,he,Ke);var vt=K[Ke],pt=oe&&oe[Ke],_t=vt.length,kt=oe&&pt.length;he.x=vt[_t-2],he.y=vt[_t-1],he.bx=H(vt[_t-4])||he.x,he.by=H(vt[_t-3])||he.y,me.bx=oe&&(H(pt[kt-4])||me.x),me.by=oe&&(H(pt[kt-3])||me.y),me.x=oe&&pt[kt-2],me.y=oe&&pt[kt-1]}return oe||(je.curve=m(K)),oe?[K,oe]:K}function ye(Te,Re){for(var je=[],K=0,oe=Te.length;oe-2*!Re>K;K+=2){var he=[{x:+Te[K-2],y:+Te[K-1]},{x:+Te[K],y:+Te[K+1]},{x:+Te[K+2],y:+Te[K+3]},{x:+Te[K+4],y:+Te[K+5]}];Re?K?oe-4==K?he[3]={x:+Te[0],y:+Te[1]}:oe-2==K&&(he[2]={x:+Te[0],y:+Te[1]},he[3]={x:+Te[2],y:+Te[3]}):he[0]={x:+Te[oe-2],y:+Te[oe-1]}:oe-4==K?he[3]=he[2]:K||(he[0]={x:+Te[K],y:+Te[K+1]}),je.push(["C",(-he[0].x+6*he[1].x+he[2].x)/6,(-he[0].y+6*he[1].y+he[2].y)/6,(he[1].x+6*he[2].x-he[3].x)/6,(he[1].y+6*he[2].y-he[3].y)/6,he[2].x,he[2].y])}return je}var Fe=F.prototype,Be=a.is,Ie=a._.clone,Je="hasOwnProperty",G=/,?([a-z]),?/gi,H=parseFloat,ee=Math,pe=ee.PI,Ne=ee.min,_e=ee.max,Pe=ee.pow,We=ee.abs,Ye=k(1),mt=k(),ht=k(0,1),Gt=a._unit2px,Xt={path:function(Te){return Te.attr("path")},circle:function(Te){var Re=Gt(Te);return ce(Re.cx,Re.cy,Re.r)},ellipse:function(Te){var Re=Gt(Te);return ce(Re.cx||0,Re.cy||0,Re.rx,Re.ry)},rect:function(Te){var Re=Gt(Te);return fe(Re.x||0,Re.y||0,Re.width,Re.height,Re.rx,Re.ry)},image:function(Te){var Re=Gt(Te);return fe(Re.x||0,Re.y||0,Re.width,Re.height)},line:function(Te){return"M"+[Te.attr("x1")||0,Te.attr("y1")||0,Te.attr("x2"),Te.attr("y2")]},polyline:function(Te){return"M"+Te.attr("points")},polygon:function(Te){return"M"+Te.attr("points")+"z"},deflt:function(Te){var Re=Te.node.getBBox();return fe(Re.x,Re.y,Re.width,Re.height)}};a.path=o,a.path.getTotalLength=Ye,a.path.getPointAtLength=mt,a.path.getSubpath=function(Te,Re,je){if(this.getTotalLength(Te)-je<1e-6)return ht(Te,Re).end;var K=ht(Te,je,1);return Re?ht(K,Re).end:K},Fe.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},Fe.getPointAtLength=function(Te){return mt(this.attr("d"),Te)},Fe.getSubpath=function(Te,Re){return a.path.getSubpath(this.attr("d"),Te,Re)},a._.box=u,a.path.findDotsAtSegment=v,a.path.bezierBBox=f,a.path.isPointInsideBBox=w,a.closest=function(Te,Re,je,K){for(var oe=100,he=u(Te-oe/2,Re-oe/2,oe,oe),me=[],Le=je[0].hasOwnProperty("x")?function(ct){return{x:je[ct].x,y:je[ct].y}}:function(ct){return{x:je[ct],y:K[ct]}},Se=0;1e6>=oe&&!Se;){for(var ke=0,De=je.length;De>ke;ke++){var He=Le(ke);if(w(he,He.x,He.y)){Se++,me.push(He);break}}Se||(he=u(Te-(oe*=2)/2,Re-oe/2,oe,oe))}if(1e6!=oe){var $e,Xe=1/0;for(ke=0,De=me.length;De>ke;ke++){var Ke=a.len(Te,Re,me[ke].x,me[ke].y);Xe>Ke&&(Xe=Ke,me[ke].len=Ke,$e=me[ke])}return $e}},a.path.isBBoxIntersect=T,a.path.intersection=function L(Te,Re){return W(Te,Re)},a.path.intersectionNumber=function U(Te,Re){return W(Te,Re,1)},a.path.isPointInside=function V(Te,Re,je){var K=$(Te);return w(K,Re,je)&&W(Te,[["M",Re,je],["H",K.x2+10]],1)%2==1},a.path.getBBox=$,a.path.get=Xt,a.path.toRelative=function xe(Te){var Re=o(Te),je=String.prototype.toLowerCase;if(Re.rel)return m(Re.rel);a.is(Te,"array")&&a.is(Te&&Te[0],"array")||(Te=a.parsePathString(Te));var K=[],oe=0,he=0,me=0,Le=0,Se=0;"M"==Te[0][0]&&(me=oe=Te[0][1],Le=he=Te[0][2],Se++,K.push(["M",oe,he]));for(var ke=Se,De=Te.length;De>ke;ke++){var He=K[ke]=[],$e=Te[ke];if($e[0]!=je.call($e[0]))switch(He[0]=je.call($e[0]),He[0]){case"a":He[1]=$e[1],He[2]=$e[2],He[3]=$e[3],He[4]=$e[4],He[5]=$e[5],He[6]=+($e[6]-oe).toFixed(3),He[7]=+($e[7]-he).toFixed(3);break;case"v":He[1]=+($e[1]-he).toFixed(3);break;case"m":me=$e[1],Le=$e[2];default:for(var Xe=1,Ke=$e.length;Ke>Xe;Xe++)He[Xe]=+($e[Xe]-(Xe%2?oe:he)).toFixed(3)}else{He=K[ke]=[],"m"==$e[0]&&(me=$e[1]+oe,Le=$e[2]+he);for(var ct=0,vt=$e.length;vt>ct;ct++)K[ke][ct]=$e[ct]}var pt=K[ke].length;switch(K[ke][0]){case"z":oe=me,he=Le;break;case"h":oe+=+K[ke][pt-1];break;case"v":he+=+K[ke][pt-1];break;default:oe+=+K[ke][pt-2],he+=+K[ke][pt-1]}}return K.toString=d,Re.rel=m(K),K},a.path.toAbsolute=te,a.path.toCubic=be,a.path.map=function de(Te,Re){if(!Re)return Te;var je,K,oe,he,me,Le,Se;for(oe=0,me=(Te=be(Te)).length;me>oe;oe++)for(he=1,Le=(Se=Te[oe]).length;Le>he;he+=2)je=Re.x(Se[he],Se[he+1]),K=Re.y(Se[he],Se[he+1]),Se[he]=je,Se[he+1]=K;return Te},a.path.toString=d,a.path.clone=m}),q.plugin(function(a,F,y,e){var o=Math.max,u=Math.min,d=function(h){if(this.items=[],this.bindings={},this.length=0,this.type="set",h)for(var k=0,v=h.length;v>k;k++)h[k]&&(this[this.items.length]=this.items[this.items.length]=h[k],this.length++)},m=d.prototype;m.push=function(){for(var h,k,v=0,f=arguments.length;f>v;v++)(h=arguments[v])&&(this[k=this.items.length]=this.items[k]=h,this.length++);return this},m.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},m.forEach=function(h,k){for(var v=0,f=this.items.length;f>v;v++)if(!1===h.call(k,this.items[v],v))return this;return this},m.animate=function(h,k,v,f){"function"!=typeof v||v.length||(f=v,v=ue.linear),h instanceof a._.Animation&&(f=h.callback,v=h.easing,k=v.dur,h=h.attr);var w=arguments;if(a.is(h,"array")&&a.is(w[w.length-1],"array"))var T=!0;var E,P=function(){E?this.b=E:E=this.b},M=0,j=this,O=f&&function(){++M==j.length&&f.call(this)};return this.forEach(function(L,U){ie.once("snap.animcreated."+L.id,P),T?w[U]&&L.animate.apply(L,w[U]):L.animate(h,k,v,O)})},m.remove=function(){for(;this.length;)this.pop().remove();return this},m.bind=function(h,k,v){var f={};if("function"==typeof k)this.bindings[h]=k;else{var w=v||h;this.bindings[h]=function(T){f[w]=T,k.attr(f)}}return this},m.attr=function(h){var k={};for(var v in h)this.bindings[v]?this.bindings[v](h[v]):k[v]=h[v];for(var f=0,w=this.items.length;w>f;f++)this.items[f].attr(k);return this},m.clear=function(){for(;this.length;)this.pop()},m.splice=function(h,k,v){h=0>h?o(this.length+h,0):h,k=o(0,u(this.length-h,k));var f,w=[],T=[],E=[];for(f=2;f<arguments.length;f++)E.push(arguments[f]);for(f=0;k>f;f++)T.push(this[h+f]);for(;f<this.length-h;f++)w.push(this[h+f]);var P=E.length;for(f=0;f<P+w.length;f++)this.items[h+f]=this[h+f]=P>f?E[f]:w[f-P];for(f=this.items.length=this.length-=k-P;this[f];)delete this[f++];return new d(T)},m.exclude=function(h){for(var k=0,v=this.length;v>k;k++)if(this[k]==h)return this.splice(k,1),!0;return!1},m.insertAfter=function(h){for(var k=this.items.length;k--;)this.items[k].insertAfter(h);return this},m.getBBox=function(){for(var h=[],k=[],v=[],f=[],w=this.items.length;w--;)if(!this.items[w].removed){var T=this.items[w].getBBox();h.push(T.x),k.push(T.y),v.push(T.x+T.width),f.push(T.y+T.height)}return{x:h=u.apply(0,h),y:k=u.apply(0,k),x2:v=o.apply(0,v),y2:f=o.apply(0,f),width:v-h,height:f-k,cx:h+(v-h)/2,cy:k+(f-k)/2}},m.clone=function(h){h=new d;for(var k=0,v=this.items.length;v>k;k++)h.push(this.items[k].clone());return h},m.toString=function(){return"Snap\u2018s set"},m.type="set",a.Set=d,a.set=function(){var h=new d;return arguments.length&&h.push.apply(h,Array.prototype.slice.call(arguments,0)),h}}),q.plugin(function(a,F,y,e){function o(j){var O=j[0];switch(O.toLowerCase()){case"t":return[O,0,0];case"m":return[O,1,0,0,1,0,0];case"r":return 4==j.length?[O,0,j[2],j[3]]:[O,0];case"s":return 5==j.length?[O,1,1,j[3],j[4]]:3==j.length?[O,1,1]:[O,1]}}function d(j){return j}function m(j){return function(O){return+O.toFixed(3)+j}}function h(j){return j.join(" ")}function k(j){return a.rgb(j[0],j[1],j[2],j[3])}function v(j){var O,L,U,W,V,$,fe=0,ce=[];for(O=0,L=j.length;L>O;O++){for(V="[",$=['"'+j[O][0]+'"'],U=1,W=j[O].length;W>U;U++)$[U]="val["+fe+++"]";V+=$+"]",ce[O]=V}return Function("val","return Snap.path.toString.call(["+ce+"])")}function f(j){for(var O=[],L=0,U=j.length;U>L;L++)for(var W=1,V=j[L].length;V>W;W++)O.push(j[L][W]);return O}function w(j){return isFinite(j)}var E={},P=/[%a-z]+$/i,M=String;E.stroke=E.fill="colour",F.prototype.equal=function(j,O){return ie("snap.util.equal",this,j,O).firstDefined()},ie.on("snap.util.equal",function(j,O){var L,U,W=M(this.attr(j)||""),V=this;if("colour"==E[j])return L=a.color(W),U=a.color(O),{from:[L.r,L.g,L.b,L.opacity],to:[U.r,U.g,U.b,U.opacity],f:k};if("viewBox"==j)return{from:L=this.attr(j).vb.split(" ").map(Number),to:U=O.split(" ").map(Number),f:h};if("transform"==j||"gradientTransform"==j||"patternTransform"==j)return"string"==typeof O&&(O=M(O).replace(/\.{3}|\u2026/g,W)),function u(j,O,L){j=j||new a.Matrix,O=O||new a.Matrix,j=a.parseTransformString(j.toTransformString())||[],O=a.parseTransformString(O.toTransformString())||[];for(var U,W,V,$,fe=Math.max(j.length,O.length),ce=[],xe=[],te=0;fe>te;te++){if(V=j[te]||o(O[te]),$=O[te]||o(V),V[0]!=$[0]||"r"==V[0].toLowerCase()&&(V[2]!=$[2]||V[3]!=$[3])||"s"==V[0].toLowerCase()&&(V[3]!=$[3]||V[4]!=$[4])){j=a._.transform2matrix(j,L()),O=a._.transform2matrix(O,L()),ce=[["m",j.a,j.b,j.c,j.d,j.e,j.f]],xe=[["m",O.a,O.b,O.c,O.d,O.e,O.f]];break}for(ce[te]=[],xe[te]=[],U=0,W=Math.max(V.length,$.length);W>U;U++)U in V&&(ce[te][U]=V[U]),U in $&&(xe[te][U]=$[U])}return{from:f(ce),to:f(xe),f:v(ce)}}(W=this.matrix,O=a._.rgTransform.test(O)?a._.transform2matrix(O,this.getBBox()):a._.transform2matrix(a._.svgTransform2string(O),this.getBBox()),function(){return V.getBBox(1)});if("d"==j||"path"==j)return{from:f((L=a.path.toCubic(W,O))[0]),to:f(L[1]),f:v(L[0])};if("points"==j)return{from:L=M(W).split(a._.separator),to:U=M(O).split(a._.separator),f:function(ce){return ce}};if(w(W)&&w(O))return{from:parseFloat(W),to:parseFloat(O),f:d};var $=W.match(P),fe=M(O).match(P);return $&&function T(j,O){return!(!a.is(j,"array")||!a.is(O,"array"))&&j.toString()==O.toString()}($,fe)?{from:parseFloat(W),to:parseFloat(O),f:m($)}:{from:this.asPX(j),to:this.asPX(j,O),f:d}})}),q.plugin(function(a,F,y,e){for(var o=F.prototype,d=("createTouch"in e.doc),m=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],h={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},k=function(O,L){var U="y"==O?"scrollTop":"scrollLeft",W=L&&L.node?L.node.ownerDocument:e.doc;return W[U in W.documentElement?"documentElement":"body"][U]},v=function(){return this.originalEvent.preventDefault()},f=function(){return this.originalEvent.stopPropagation()},w=function(O,L,U,W){var V=d&&h[L]?h[L]:L,$=function(fe){var ce=k("y",W),xe=k("x",W);if(d&&h.hasOwnProperty(L))for(var te=0,se=fe.targetTouches&&fe.targetTouches.length;se>te;te++)if(fe.targetTouches[te].target==O||O.contains(fe.targetTouches[te].target)){var ne=fe;(fe=fe.targetTouches[te]).originalEvent=ne,fe.preventDefault=v,fe.stopPropagation=f;break}var ve=fe.clientX+xe,Ce=fe.clientY+ce;return U.call(W,fe,ve,Ce)};return L!==V&&O.addEventListener(L,$,!1),O.addEventListener(V,$,!1),function(){return L!==V&&O.removeEventListener(L,$,!1),O.removeEventListener(V,$,!1),!0}},T=[],E=function(O){for(var L,U=O.clientX,W=O.clientY,V=k("y"),$=k("x"),fe=T.length;fe--;){if(L=T[fe],d){for(var ce,xe=O.touches&&O.touches.length;xe--;)if((ce=O.touches[xe]).identifier==L.el._drag.id||L.el.node.contains(ce.target)){U=ce.clientX,W=ce.clientY,(O.originalEvent?O.originalEvent:O).preventDefault();break}}else O.preventDefault();var te=L.el.node;te.nextSibling,te.parentNode,te.style.display,U+=$,W+=V,ie("snap.drag.move."+L.el.id,L.move_scope||L.el,U-L.el._drag.x,W-L.el._drag.y,U,W,O)}},P=function(O){a.unmousemove(E).unmouseup(P);for(var L,U=T.length;U--;)(L=T[U]).el._drag={},ie("snap.drag.end."+L.el.id,L.end_scope||L.start_scope||L.move_scope||L.el,O),ie.off("snap.drag.*."+L.el.id);T=[]},M=m.length;M--;)!function(O){a[O]=o[O]=function(L,U){if(a.is(L,"function"))this.events=this.events||[],this.events.push({name:O,f:L,unbind:w(this.node||document,O,L,U||this)});else for(var W=0,V=this.events.length;V>W;W++)if(this.events[W].name==O)try{this.events[W].f.call(this)}catch($){}return this},a["un"+O]=o["un"+O]=function(L){for(var U=this.events||[],W=U.length;W--;)if(U[W].name==O&&(U[W].f==L||!L))return U[W].unbind(),U.splice(W,1),!U.length&&delete this.events,this;return this}}(m[M]);o.hover=function(O,L,U,W){return this.mouseover(O,U).mouseout(L,W||U)},o.unhover=function(O,L){return this.unmouseover(O).unmouseout(L)};var j=[];o.drag=function(O,L,U,W,V,$){function fe(se,ne,ve){(se.originalEvent||se).preventDefault(),xe._drag.x=ne,xe._drag.y=ve,xe._drag.id=se.identifier,!T.length&&a.mousemove(E).mouseup(P),T.push({el:xe,move_scope:W,start_scope:V,end_scope:$}),L&&ie.on("snap.drag.start."+xe.id,L),O&&ie.on("snap.drag.move."+xe.id,O),U&&ie.on("snap.drag.end."+xe.id,U),ie("snap.drag.start."+xe.id,V||W||xe,ne,ve,se)}function ce(se,ne,ve){ie("snap.draginit."+xe.id,xe,se,ne,ve)}var te,xe=this;return arguments.length?(ie.on("snap.draginit."+xe.id,fe),xe._drag={},j.push({el:xe,start:fe,init:ce}),xe.mousedown(ce),xe):xe.drag(function(se,ne){this.attr({transform:te+(te?"T":"t")+[se,ne]})},function(){te=this.transform().local})},o.undrag=function(){for(var O=j.length;O--;)j[O].el==this&&(this.unmousedown(j[O].init),j.splice(O,1),ie.unbind("snap.drag.*."+this.id),ie.unbind("snap.draginit."+this.id));return!j.length&&a.unmousemove(E).unmouseup(P),this}}),q.plugin(function(a,F,y,e){var o=(F.prototype,y.prototype),u=/^\s*url\((.+)\)/,d=String,m=a._.$;a.filter={},o.filter=function(h){var k=this;"svg"!=k.type&&(k=k.paper);var v=a.parse(d(h)),f=a._.id(),w=(k.node.offsetWidth,k.node.offsetHeight,m("filter"));return m(w,{id:f,filterUnits:"userSpaceOnUse"}),w.appendChild(v.node),k.defs.appendChild(w),new F(w)},ie.on("snap.util.getattr.filter",function(){ie.stop();var h=m(this.node,"filter");if(h){var k=d(h).match(u);return k&&a.select(k[1])}}),ie.on("snap.util.attr.filter",function(h){if(h instanceof F&&"filter"==h.type){ie.stop();var k=h.node.id;k||(m(h.node,{id:h.id}),k=h.id),m(this.node,{filter:a.url(k)})}h&&"none"!=h||(ie.stop(),this.node.removeAttribute("filter"))}),a.filter.blur=function(h,k){null==h&&(h=2);var v=null==k?h:[h,k];return a.format('<feGaussianBlur stdDeviation="{def}"/>',{def:v})},a.filter.blur.toString=function(){return this()},a.filter.shadow=function(h,k,v,f,w){return null==w&&(null==f?(w=v,v=4,f="#000"):(w=f,f=v,v=4)),null==v&&(v=4),null==w&&(w=1),null==h&&(h=0,k=2),null==k&&(k=h),f=a.color(f),a.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:f,dx:h,dy:k,blur:v,opacity:w})},a.filter.shadow.toString=function(){return this()},a.filter.grayscale=function(h){return null==h&&(h=1),a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-h),b:.7152-.7152*(1-h),c:.0722-.0722*(1-h),d:.2126-.2126*(1-h),e:.7152+.2848*(1-h),f:.0722-.0722*(1-h),g:.2126-.2126*(1-h),h:.0722+.9278*(1-h)})},a.filter.grayscale.toString=function(){return this()},a.filter.sepia=function(h){return null==h&&(h=1),a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-h),b:.769-.769*(1-h),c:.189-.189*(1-h),d:.349-.349*(1-h),e:.686+.314*(1-h),f:.168-.168*(1-h),g:.272-.272*(1-h),h:.534-.534*(1-h),i:.131+.869*(1-h)})},a.filter.sepia.toString=function(){return this()},a.filter.saturate=function(h){return null==h&&(h=1),a.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-h})},a.filter.saturate.toString=function(){return this()},a.filter.hueRotate=function(h){return h=h||0,a.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:h})},a.filter.hueRotate.toString=function(){return this()},a.filter.invert=function(h){return null==h&&(h=1),a.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:h,amount2:1-h})},a.filter.invert.toString=function(){return this()},a.filter.brightness=function(h){return null==h&&(h=1),a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:h})},a.filter.brightness.toString=function(){return this()},a.filter.contrast=function(h){return null==h&&(h=1),a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:h,amount2:.5-h/2})},a.filter.contrast.toString=function(){return this()}}),q.plugin(function(a,F,y,e,o){var u=a._.box,d=a.is,m=/^[^a-z]*([tbmlrc])/i,h=function(){return"T"+this.dx+","+this.dy};F.prototype.getAlign=function(k,v){null==v&&d(k,"string")&&(v=k,k=null);var f=(k=k||this.paper).getBBox?k.getBBox():u(k),w=this.getBBox(),T={};switch(v=(v=v&&v.match(m))?v[1].toLowerCase():"c"){case"t":T.dx=0,T.dy=f.y-w.y;break;case"b":T.dx=0,T.dy=f.y2-w.y2;break;case"m":T.dx=0,T.dy=f.cy-w.cy;break;case"l":T.dx=f.x-w.x,T.dy=0;break;case"r":T.dx=f.x2-w.x2,T.dy=0;break;default:T.dx=f.cx-w.cx,T.dy=0}return T.toString=h,T},F.prototype.align=function(k,v){return this.transform("..."+this.getAlign(k,v))}}),q.plugin(function(a,F,y,e){function o(fe){fe=fe.split(/(?=#)/);var ce=new String(fe[5]);return ce[50]=fe[0],ce[100]=fe[1],ce[200]=fe[2],ce[300]=fe[3],ce[400]=fe[4],ce[500]=fe[5],ce[600]=fe[6],ce[700]=fe[7],ce[800]=fe[8],ce[900]=fe[9],fe[10]&&(ce.A100=fe[10],ce.A200=fe[11],ce.A400=fe[12],ce.A700=fe[13]),ce}a.mui={},a.flat={},a.mui.red=o("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),a.mui.pink=o("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),a.mui.purple=o("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),a.mui.deeppurple=o("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),a.mui.indigo=o("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),a.mui.blue=o("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),a.mui.lightblue=o("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),a.mui.cyan=o("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),a.mui.teal=o("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),a.mui.green=o("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),a.mui.lightgreen=o("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),a.mui.lime=o("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),a.mui.yellow=o("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),a.mui.amber=o("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),a.mui.orange=o("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),a.mui.deeporange=o("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),a.mui.brown=o("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),a.mui.grey=o("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),a.mui.bluegrey=o("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),a.flat.turquoise="#1abc9c",a.flat.greensea="#16a085",a.flat.sunflower="#f1c40f",a.flat.orange="#f39c12",a.flat.emerland="#2ecc71",a.flat.nephritis="#27ae60",a.flat.carrot="#e67e22",a.flat.pumpkin="#d35400",a.flat.peterriver="#3498db",a.flat.belizehole="#2980b9",a.flat.alizarin="#e74c3c",a.flat.pomegranate="#c0392b",a.flat.amethyst="#9b59b6",a.flat.wisteria="#8e44ad",a.flat.clouds="#ecf0f1",a.flat.silver="#bdc3c7",a.flat.wetasphalt="#34495e",a.flat.midnightblue="#2c3e50",a.flat.concrete="#95a5a6",a.flat.asbestos="#7f8c8d",a.importMUIColors=function(){for(var fe in a.mui)a.mui.hasOwnProperty(fe)&&(J[fe]=a.mui[fe])}}),q}),function(J){"object"==typeof exports&&"undefined"!=typeof module?module.exports=J():"function"==typeof define&&define.amd?define([],J):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).rdfstore=J()}(function(){var define,module,exports;return function J(ie,ue,q){function a(e,o){if(!ue[e]){if(!ie[e]){var u="function"==typeof require&&require;if(!o&&u)return u(e,!0);if(F)return F(e,!0);var d=new Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d}var m=ue[e]={exports:{}};ie[e][0].call(m.exports,function(h){return a(ie[e][1][h]||h)},m,m.exports,J,ie,ue,q)}return ue[e].exports}for(var F="function"==typeof require&&require,y=0;y<q.length;y++)a(q[y]);return a}({1:[function(J,ie,ue){(function(q){(function(){"use strict";var a=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],F="undefined"==typeof globalThis?q:globalThis;ie.exports=function(){for(var y=[],e=0;e<a.length;e++)"function"==typeof F[a[e]]&&(y[y.length]=a[e]);return y}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(J,ie,ue){"use strict";ue.byteLength=function(m){var h=u(m),k=h[0],v=h[1];return 3*(k+v)/4-v},ue.toByteArray=function(m){var h,k,O,v=u(m),f=v[0],w=v[1],T=new F(3*(f+(O=w))/4-O),E=0,P=w>0?f-4:f;for(k=0;k<P;k+=4)h=a[m.charCodeAt(k)]<<18|a[m.charCodeAt(k+1)]<<12|a[m.charCodeAt(k+2)]<<6|a[m.charCodeAt(k+3)],T[E++]=h>>16&255,T[E++]=h>>8&255,T[E++]=255&h;return 2===w&&(h=a[m.charCodeAt(k)]<<2|a[m.charCodeAt(k+1)]>>4,T[E++]=255&h),1===w&&(h=a[m.charCodeAt(k)]<<10|a[m.charCodeAt(k+1)]<<4|a[m.charCodeAt(k+2)]>>2,T[E++]=h>>8&255,T[E++]=255&h),T},ue.fromByteArray=function(m){for(var h,k=m.length,v=k%3,f=[],w=0,T=k-v;w<T;w+=16383)f.push(d(m,w,w+16383>T?T:w+16383));return 1===v?(h=m[k-1],f.push(q[h>>2]+q[h<<4&63]+"==")):2===v&&(h=(m[k-2]<<8)+m[k-1],f.push(q[h>>10]+q[h>>4&63]+q[h<<2&63]+"=")),f.join("")};for(var q=[],a=[],F="undefined"!=typeof Uint8Array?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,o=y.length;e<o;++e)q[e]=y[e],a[y.charCodeAt(e)]=e;function u(m){var h=m.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=m.indexOf("=");return-1===k&&(k=h),[k,k===h?0:4-k%4]}function d(m,h,k){for(var v,f,w=[],T=h;T<k;T+=3)v=(m[T]<<16&16711680)+(m[T+1]<<8&65280)+(255&m[T+2]),w.push(q[(f=v)>>18&63]+q[f>>12&63]+q[f>>6&63]+q[63&f]);return w.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],3:[function(J,ie,ue){},{}],4:[function(J,ie,ue){arguments[4][3][0].apply(ue,arguments)},{dup:3}],5:[function(J,ie,ue){(function(q){(function(){!function(a){var F="object"==typeof ue&&ue&&!ue.nodeType&&ue,y="object"==typeof ie&&ie&&!ie.nodeType&&ie,e="object"==typeof q&&q;e.global!==e&&e.window!==e&&e.self!==e||(a=e);var o,u,d=2147483647,m=36,P=/^xn--/,M=/[^\x20-\x7E]/,j=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=Math.floor,W=String.fromCharCode;function V(Ce){throw new RangeError(O[Ce])}function $(Ce,be){for(var de=Ce.length,ye=[];de--;)ye[de]=be(Ce[de]);return ye}function fe(Ce,be){var de=Ce.split("@"),ye="";return de.length>1&&(ye=de[0]+"@",Ce=de[1]),ye+$((Ce=Ce.replace(j,".")).split("."),be).join(".")}function ce(Ce){for(var be,de,ye=[],Fe=0,Be=Ce.length;Fe<Be;)(be=Ce.charCodeAt(Fe++))>=55296&&be<=56319&&Fe<Be?56320==(64512&(de=Ce.charCodeAt(Fe++)))?ye.push(((1023&be)<<10)+(1023&de)+65536):(ye.push(be),Fe--):ye.push(be);return ye}function xe(Ce){return $(Ce,function(be){var de="";return be>65535&&(de+=W((be-=65536)>>>10&1023|55296),be=56320|1023&be),de+W(be)}).join("")}function te(Ce,be){return Ce+22+75*(Ce<26)-((0!=be)<<5)}function se(Ce,be,de){var ye=0;for(Ce=de?U(Ce/700):Ce>>1,Ce+=U(Ce/be);Ce>455;ye+=m)Ce=U(Ce/35);return U(ye+36*Ce/(Ce+38))}function ne(Ce){var be,de,ye,Fe,Be,Ie,Je,G,H,ee,pe,Ne=[],_e=Ce.length,Pe=0,We=128,Ye=72;for((de=Ce.lastIndexOf("-"))<0&&(de=0),ye=0;ye<de;++ye)Ce.charCodeAt(ye)>=128&&V("not-basic"),Ne.push(Ce.charCodeAt(ye));for(Fe=de>0?de+1:0;Fe<_e;){for(Be=Pe,Ie=1,Je=m;Fe>=_e&&V("invalid-input"),((G=(pe=Ce.charCodeAt(Fe++))-48<10?pe-22:pe-65<26?pe-65:pe-97<26?pe-97:m)>=m||G>U((d-Pe)/Ie))&&V("overflow"),Pe+=G*Ie,!(G<(H=Je<=Ye?1:Je>=Ye+26?26:Je-Ye));Je+=m)Ie>U(d/(ee=m-H))&&V("overflow"),Ie*=ee;Ye=se(Pe-Be,be=Ne.length+1,0==Be),U(Pe/be)>d-We&&V("overflow"),We+=U(Pe/be),Pe%=be,Ne.splice(Pe++,0,We)}return xe(Ne)}function ve(Ce){var be,de,ye,Fe,Be,Ie,Je,G,H,ee,pe,Ne,_e,Pe,We,Ye=[];for(Ne=(Ce=ce(Ce)).length,be=128,de=0,Be=72,Ie=0;Ie<Ne;++Ie)(pe=Ce[Ie])<128&&Ye.push(W(pe));for(ye=Fe=Ye.length,Fe&&Ye.push("-");ye<Ne;){for(Je=d,Ie=0;Ie<Ne;++Ie)(pe=Ce[Ie])>=be&&pe<Je&&(Je=pe);for(Je-be>U((d-de)/(_e=ye+1))&&V("overflow"),de+=(Je-be)*_e,be=Je,Ie=0;Ie<Ne;++Ie)if((pe=Ce[Ie])<be&&++de>d&&V("overflow"),pe==be){for(G=de,H=m;!(G<(ee=H<=Be?1:H>=Be+26?26:H-Be));H+=m)We=G-ee,Pe=m-ee,Ye.push(W(te(ee+We%Pe,0))),G=U(We/Pe);Ye.push(W(te(G,0))),Be=se(de,_e,ye==Fe),de=0,++ye}++de,++be}return Ye.join("")}if(o={version:"1.4.1",ucs2:{decode:ce,encode:xe},decode:ne,encode:ve,toASCII:function(Ce){return fe(Ce,function(be){return M.test(be)?"xn--"+ve(be):be})},toUnicode:function(Ce){return fe(Ce,function(be){return P.test(be)?ne(be.slice(4).toLowerCase()):be})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return o});else if(F&&y)if(ie.exports==F)y.exports=o;else for(u in o)o.hasOwnProperty(u)&&(F[u]=o[u]);else a.punycode=o}(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(J,ie,ue){ie.exports=function(q){return q&&"object"==typeof q&&"function"==typeof q.copy&&"function"==typeof q.fill&&"function"==typeof q.readUInt8}},{}],7:[function(J,ie,ue){"use strict";var q=J("is-arguments"),a=J("is-generator-function"),F=J("which-typed-array"),y=J("is-typed-array");function e(ne){return ne.call.bind(ne)}var o="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,d=e(Object.prototype.toString),m=e(Number.prototype.valueOf),h=e(String.prototype.valueOf),k=e(Boolean.prototype.valueOf);if(o)var v=e(BigInt.prototype.valueOf);if(u)var f=e(Symbol.prototype.valueOf);function w(ne,ve){if("object"!=typeof ne)return!1;try{return ve(ne),!0}catch(Ce){return!1}}function T(ne){return"[object Map]"===d(ne)}function E(ne){return"[object Set]"===d(ne)}function P(ne){return"[object WeakMap]"===d(ne)}function M(ne){return"[object WeakSet]"===d(ne)}function j(ne){return"[object ArrayBuffer]"===d(ne)}function O(ne){return"undefined"!=typeof ArrayBuffer&&(j.working?j(ne):ne instanceof ArrayBuffer)}function L(ne){return"[object DataView]"===d(ne)}function U(ne){return"undefined"!=typeof DataView&&(L.working?L(ne):ne instanceof DataView)}ue.isArgumentsObject=q,ue.isGeneratorFunction=a,ue.isTypedArray=y,ue.isPromise=function(ne){return"undefined"!=typeof Promise&&ne instanceof Promise||null!==ne&&"object"==typeof ne&&"function"==typeof ne.then&&"function"==typeof ne.catch},ue.isArrayBufferView=function(ne){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(ne):y(ne)||U(ne)},ue.isUint8Array=function(ne){return"Uint8Array"===F(ne)},ue.isUint8ClampedArray=function(ne){return"Uint8ClampedArray"===F(ne)},ue.isUint16Array=function(ne){return"Uint16Array"===F(ne)},ue.isUint32Array=function(ne){return"Uint32Array"===F(ne)},ue.isInt8Array=function(ne){return"Int8Array"===F(ne)},ue.isInt16Array=function(ne){return"Int16Array"===F(ne)},ue.isInt32Array=function(ne){return"Int32Array"===F(ne)},ue.isFloat32Array=function(ne){return"Float32Array"===F(ne)},ue.isFloat64Array=function(ne){return"Float64Array"===F(ne)},ue.isBigInt64Array=function(ne){return"BigInt64Array"===F(ne)},ue.isBigUint64Array=function(ne){return"BigUint64Array"===F(ne)},T.working="undefined"!=typeof Map&&T(new Map),ue.isMap=function(ne){return"undefined"!=typeof Map&&(T.working?T(ne):ne instanceof Map)},E.working="undefined"!=typeof Set&&E(new Set),ue.isSet=function(ne){return"undefined"!=typeof Set&&(E.working?E(ne):ne instanceof Set)},P.working="undefined"!=typeof WeakMap&&P(new WeakMap),ue.isWeakMap=function(ne){return"undefined"!=typeof WeakMap&&(P.working?P(ne):ne instanceof WeakMap)},M.working="undefined"!=typeof WeakSet&&M(new WeakSet),ue.isWeakSet=function(ne){return M(ne)},j.working="undefined"!=typeof ArrayBuffer&&j(new ArrayBuffer),ue.isArrayBuffer=O,L.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&L(new DataView(new ArrayBuffer(1),0,1)),ue.isDataView=U;var W="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function V(ne){return"[object SharedArrayBuffer]"===d(ne)}function $(ne){return void 0!==W&&(void 0===V.working&&(V.working=V(new W)),V.working?V(ne):ne instanceof W)}function fe(ne){return w(ne,m)}function ce(ne){return w(ne,h)}function xe(ne){return w(ne,k)}function te(ne){return o&&w(ne,v)}function se(ne){return u&&w(ne,f)}ue.isSharedArrayBuffer=$,ue.isAsyncFunction=function(ne){return"[object AsyncFunction]"===d(ne)},ue.isMapIterator=function(ne){return"[object Map Iterator]"===d(ne)},ue.isSetIterator=function(ne){return"[object Set Iterator]"===d(ne)},ue.isGeneratorObject=function(ne){return"[object Generator]"===d(ne)},ue.isWebAssemblyCompiledModule=function(ne){return"[object WebAssembly.Module]"===d(ne)},ue.isNumberObject=fe,ue.isStringObject=ce,ue.isBooleanObject=xe,ue.isBigIntObject=te,ue.isSymbolObject=se,ue.isBoxedPrimitive=function(ne){return fe(ne)||ce(ne)||xe(ne)||te(ne)||se(ne)},ue.isAnyArrayBuffer=function(ne){return"undefined"!=typeof Uint8Array&&(O(ne)||$(ne))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ne){Object.defineProperty(ue,ne,{enumerable:!1,value:function(){throw new Error(ne+" is not supported in userland")}})})},{"is-arguments":27,"is-generator-function":29,"is-typed-array":30,"which-typed-array":118}],8:[function(J,ie,ue){(function(q){(function(){var a=Object.getOwnPropertyDescriptors||function(te){for(var se=Object.keys(te),ne={},ve=0;ve<se.length;ve++)ne[se[ve]]=Object.getOwnPropertyDescriptor(te,se[ve]);return ne},F=/%[sdj%]/g;ue.format=function(te){if(!P(te)){for(var se=[],ne=0;ne<arguments.length;ne++)se.push(u(arguments[ne]));return se.join(" ")}ne=1;for(var ve=arguments,Ce=ve.length,be=String(te).replace(F,function(ye){if("%%"===ye)return"%";if(ne>=Ce)return ye;switch(ye){case"%s":return String(ve[ne++]);case"%d":return Number(ve[ne++]);case"%j":try{return JSON.stringify(ve[ne++])}catch(Fe){return"[Circular]"}default:return ye}}),de=ve[ne];ne<Ce;de=ve[++ne])T(de)||!O(de)?be+=" "+de:be+=" "+u(de);return be},ue.deprecate=function(te,se){if(void 0!==q&&!0===q.noDeprecation)return te;if(void 0===q)return function(){return ue.deprecate(te,se).apply(this,arguments)};var ne=!1;return function(){if(!ne){if(q.throwDeprecation)throw new Error(se);q.traceDeprecation?console.trace(se):console.error(se),ne=!0}return te.apply(this,arguments)}};var y={},e=/^$/;if(q.env.NODE_DEBUG){var o=q.env.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),e=new RegExp("^"+o+"$","i")}function u(te,se){var ne={seen:[],stylize:m};return arguments.length>=3&&(ne.depth=arguments[2]),arguments.length>=4&&(ne.colors=arguments[3]),w(se)?ne.showHidden=se:se&&ue._extend(ne,se),M(ne.showHidden)&&(ne.showHidden=!1),M(ne.depth)&&(ne.depth=2),M(ne.colors)&&(ne.colors=!1),M(ne.customInspect)&&(ne.customInspect=!0),ne.colors&&(ne.stylize=d),h(ne,te,ne.depth)}function d(te,se){var ne=u.styles[se];return ne?"\x1b["+u.colors[ne][0]+"m"+te+"\x1b["+u.colors[ne][1]+"m":te}function m(te,se){return te}function h(te,se,ne){if(te.customInspect&&se&&W(se.inspect)&&se.inspect!==ue.inspect&&(!se.constructor||se.constructor.prototype!==se)){var ve=se.inspect(ne,te);return P(ve)||(ve=h(te,ve,ne)),ve}var Ce=function(G,H){if(M(H))return G.stylize("undefined","undefined");if(P(H)){var ee="'"+JSON.stringify(H).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return G.stylize(ee,"string")}return E(H)?G.stylize(""+H,"number"):w(H)?G.stylize(""+H,"boolean"):T(H)?G.stylize("null","null"):void 0}(te,se);if(Ce)return Ce;var H,be=Object.keys(se),de=(H={},be.forEach(function(ee,pe){H[ee]=!0}),H);if(te.showHidden&&(be=Object.getOwnPropertyNames(se)),U(se)&&(be.indexOf("message")>=0||be.indexOf("description")>=0))return k(se);if(0===be.length){if(W(se)){var ye=se.name?": "+se.name:"";return te.stylize("[Function"+ye+"]","special")}if(j(se))return te.stylize(RegExp.prototype.toString.call(se),"regexp");if(L(se))return te.stylize(Date.prototype.toString.call(se),"date");if(U(se))return k(se)}var Fe,Be="",Ie=!1,Je=["{","}"];return f(se)&&(Ie=!0,Je=["[","]"]),W(se)&&(Be=" [Function"+(se.name?": "+se.name:"")+"]"),j(se)&&(Be=" "+RegExp.prototype.toString.call(se)),L(se)&&(Be=" "+Date.prototype.toUTCString.call(se)),U(se)&&(Be=" "+k(se)),0!==be.length||Ie&&0!=se.length?ne<0?j(se)?te.stylize(RegExp.prototype.toString.call(se),"regexp"):te.stylize("[Object]","special"):(te.seen.push(se),Fe=Ie?function(G,H,ee,pe,Ne){for(var _e=[],Pe=0,We=H.length;Pe<We;++Pe)ce(H,String(Pe))?_e.push(v(G,H,ee,pe,String(Pe),!0)):_e.push("");return Ne.forEach(function(Ye){Ye.match(/^\d+$/)||_e.push(v(G,H,ee,pe,Ye,!0))}),_e}(te,se,ne,de,be):be.map(function(G){return v(te,se,ne,de,G,Ie)}),te.seen.pop(),function(G,H,ee){return G.reduce(function(pe,Ne){return Ne.indexOf("\n"),pe+Ne.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?ee[0]+(""===H?"":H+"\n ")+" "+G.join(",\n  ")+" "+ee[1]:ee[0]+H+" "+G.join(", ")+" "+ee[1]}(Fe,Be,Je)):Je[0]+Be+Je[1]}function k(te){return"["+Error.prototype.toString.call(te)+"]"}function v(te,se,ne,ve,Ce,be){var de,ye,Fe;if((Fe=Object.getOwnPropertyDescriptor(se,Ce)||{value:se[Ce]}).get?ye=Fe.set?te.stylize("[Getter/Setter]","special"):te.stylize("[Getter]","special"):Fe.set&&(ye=te.stylize("[Setter]","special")),ce(ve,Ce)||(de="["+Ce+"]"),ye||(te.seen.indexOf(Fe.value)<0?(ye=T(ne)?h(te,Fe.value,null):h(te,Fe.value,ne-1)).indexOf("\n")>-1&&(ye=be?ye.split("\n").map(function(Be){return"  "+Be}).join("\n").substr(2):"\n"+ye.split("\n").map(function(Be){return"   "+Be}).join("\n")):ye=te.stylize("[Circular]","special")),M(de)){if(be&&Ce.match(/^\d+$/))return ye;(de=JSON.stringify(""+Ce)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(de=de.substr(1,de.length-2),de=te.stylize(de,"name")):(de=de.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),de=te.stylize(de,"string"))}return de+": "+ye}function f(te){return Array.isArray(te)}function w(te){return"boolean"==typeof te}function T(te){return null===te}function E(te){return"number"==typeof te}function P(te){return"string"==typeof te}function M(te){return void 0===te}function j(te){return O(te)&&"[object RegExp]"===V(te)}function O(te){return"object"==typeof te&&null!==te}function L(te){return O(te)&&"[object Date]"===V(te)}function U(te){return O(te)&&("[object Error]"===V(te)||te instanceof Error)}function W(te){return"function"==typeof te}function V(te){return Object.prototype.toString.call(te)}function $(te){return te<10?"0"+te.toString(10):te.toString(10)}ue.debuglog=function(te){if(te=te.toUpperCase(),!y[te])if(e.test(te)){var se=q.pid;y[te]=function(){var ne=ue.format.apply(ue,arguments);console.error("%s %d: %s",te,se,ne)}}else y[te]=function(){};return y[te]},ue.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ue.types=J("./support/types"),ue.isArray=f,ue.isBoolean=w,ue.isNull=T,ue.isNullOrUndefined=function(te){return null==te},ue.isNumber=E,ue.isString=P,ue.isSymbol=function(te){return"symbol"==typeof te},ue.isUndefined=M,ue.isRegExp=j,ue.types.isRegExp=j,ue.isObject=O,ue.isDate=L,ue.types.isDate=L,ue.isError=U,ue.types.isNativeError=U,ue.isFunction=W,ue.isPrimitive=function(te){return null===te||"boolean"==typeof te||"number"==typeof te||"string"==typeof te||"symbol"==typeof te||void 0===te},ue.isBuffer=J("./support/isBuffer");var fe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ce(te,se){return Object.prototype.hasOwnProperty.call(te,se)}ue.log=function(){var te,se;console.log("%s - %s",(se=[$((te=new Date).getHours()),$(te.getMinutes()),$(te.getSeconds())].join(":"),[te.getDate(),fe[te.getMonth()],se].join(" ")),ue.format.apply(ue,arguments))},ue.inherits=J("inherits"),ue._extend=function(te,se){if(!se||!O(se))return te;for(var ne=Object.keys(se),ve=ne.length;ve--;)te[ne[ve]]=se[ne[ve]];return te};var xe="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;ue.promisify=function(te){if("function"!=typeof te)throw new TypeError('The "original" argument must be of type Function');if(xe&&te[xe]){var se;if("function"!=typeof(se=te[xe]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(se,xe,{value:se,enumerable:!1,writable:!1,configurable:!0}),se}function se(){for(var ne,ve,Ce=new Promise(function(ye,Fe){ne=ye,ve=Fe}),be=[],de=0;de<arguments.length;de++)be.push(arguments[de]);be.push(function(ye,Fe){ye?ve(ye):ne(Fe)});try{te.apply(this,be)}catch(ye){ve(ye)}return Ce}return Object.setPrototypeOf(se,Object.getPrototypeOf(te)),xe&&Object.defineProperty(se,xe,{value:se,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(se,a(te))},ue.promisify.custom=xe,ue.callbackify=function(te){if("function"!=typeof te)throw new TypeError('The "original" argument must be of type Function');function se(){for(var ne=[],ve=0;ve<arguments.length;ve++)ne.push(arguments[ve]);var Ce=ne.pop();if("function"!=typeof Ce)throw new TypeError("The last argument must be of type Function");var be=this,de=function(){return Ce.apply(be,arguments)};te.apply(this,ne).then(function(ye){q.nextTick(de.bind(null,null,ye))},function(ye){q.nextTick(function(Fe,Be){if(!Fe){var Ie=new Error("Promise was rejected with a falsy value");Ie.reason=Fe,Fe=Ie}return Be(Fe)}.bind(null,ye,de))})}return Object.setPrototypeOf(se,Object.getPrototypeOf(te)),Object.defineProperties(se,a(te)),se}}).call(this)}).call(this,J("_process"))},{"./support/isBuffer":6,"./support/types":7,_process:62,inherits:26}],9:[function(J,ie,ue){(function(q){(function(){"use strict";var a=J("base64-js"),F=J("ieee754");ue.Buffer=o,ue.SlowBuffer=function(G){return+G!=G&&(G=0),o.alloc(+G)},ue.INSPECT_MAX_BYTES=50;var y=2147483647;function e(G){if(G>y)throw new RangeError('The value "'+G+'" is invalid for option "size"');var H=new Uint8Array(G);return H.__proto__=o.prototype,H}function o(G,H,ee){if("number"==typeof G){if("string"==typeof H)throw new TypeError('The "string" argument must be of type string. Received type number');return m(G)}return u(G,H,ee)}function u(G,H,ee){if("string"==typeof G)return function(_e,Pe){if("string"==typeof Pe&&""!==Pe||(Pe="utf8"),!o.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);var We=0|v(_e,Pe),Ye=e(We),mt=Ye.write(_e,Pe);return mt!==We&&(Ye=Ye.slice(0,mt)),Ye}(G,H);if(ArrayBuffer.isView(G))return h(G);if(null==G)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(Ie(G,ArrayBuffer)||G&&Ie(G.buffer,ArrayBuffer))return function(_e,Pe,We){if(Pe<0||_e.byteLength<Pe)throw new RangeError('"offset" is outside of buffer bounds');if(_e.byteLength<Pe+(We||0))throw new RangeError('"length" is outside of buffer bounds');var Ye;return(Ye=void 0===Pe&&void 0===We?new Uint8Array(_e):void 0===We?new Uint8Array(_e,Pe):new Uint8Array(_e,Pe,We)).__proto__=o.prototype,Ye}(G,H,ee);if("number"==typeof G)throw new TypeError('The "value" argument must not be of type number. Received type number');var pe=G.valueOf&&G.valueOf();if(null!=pe&&pe!==G)return o.from(pe,H,ee);var Ne=function(_e){if(o.isBuffer(_e)){var Pe=0|k(_e.length),We=e(Pe);return 0===We.length||_e.copy(We,0,0,Pe),We}return void 0!==_e.length?"number"!=typeof _e.length||Je(_e.length)?e(0):h(_e):"Buffer"===_e.type&&Array.isArray(_e.data)?h(_e.data):void 0}(G);if(Ne)return Ne;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof G[Symbol.toPrimitive])return o.from(G[Symbol.toPrimitive]("string"),H,ee);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}function d(G){if("number"!=typeof G)throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function m(G){return d(G),e(G<0?0:0|k(G))}function h(G){for(var H=G.length<0?0:0|k(G.length),ee=e(H),pe=0;pe<H;pe+=1)ee[pe]=255&G[pe];return ee}function k(G){if(G>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return 0|G}function v(G,H){if(o.isBuffer(G))return G.length;if(ArrayBuffer.isView(G)||Ie(G,ArrayBuffer))return G.byteLength;if("string"!=typeof G)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);var ee=G.length,pe=arguments.length>2&&!0===arguments[2];if(!pe&&0===ee)return 0;for(var Ne=!1;;)switch(H){case"ascii":case"latin1":case"binary":return ee;case"utf8":case"utf-8":return ye(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ee;case"hex":return ee>>>1;case"base64":return Fe(G).length;default:if(Ne)return pe?-1:ye(G).length;H=(""+H).toLowerCase(),Ne=!0}}function f(G,H,ee){var pe=G[H];G[H]=G[ee],G[ee]=pe}function w(G,H,ee,pe,Ne){if(0===G.length)return-1;if("string"==typeof ee?(pe=ee,ee=0):ee>2147483647?ee=2147483647:ee<-2147483648&&(ee=-2147483648),Je(ee=+ee)&&(ee=Ne?0:G.length-1),ee<0&&(ee=G.length+ee),ee>=G.length){if(Ne)return-1;ee=G.length-1}else if(ee<0){if(!Ne)return-1;ee=0}if("string"==typeof H&&(H=o.from(H,pe)),o.isBuffer(H))return 0===H.length?-1:T(G,H,ee,pe,Ne);if("number"==typeof H)return H&=255,"function"==typeof Uint8Array.prototype.indexOf?Ne?Uint8Array.prototype.indexOf.call(G,H,ee):Uint8Array.prototype.lastIndexOf.call(G,H,ee):T(G,[H],ee,pe,Ne);throw new TypeError("val must be string, number or Buffer")}function T(G,H,ee,pe,Ne){var _e,Pe=1,We=G.length,Ye=H.length;if(void 0!==pe&&("ucs2"===(pe=String(pe).toLowerCase())||"ucs-2"===pe||"utf16le"===pe||"utf-16le"===pe)){if(G.length<2||H.length<2)return-1;Pe=2,We/=2,Ye/=2,ee/=2}function mt(Te,Re){return 1===Pe?Te[Re]:Te.readUInt16BE(Re*Pe)}if(Ne){var ht=-1;for(_e=ee;_e<We;_e++)if(mt(G,_e)===mt(H,-1===ht?0:_e-ht)){if(-1===ht&&(ht=_e),_e-ht+1===Ye)return ht*Pe}else-1!==ht&&(_e-=_e-ht),ht=-1}else for(ee+Ye>We&&(ee=We-Ye),_e=ee;_e>=0;_e--){for(var Gt=!0,Xt=0;Xt<Ye;Xt++)if(mt(G,_e+Xt)!==mt(H,Xt)){Gt=!1;break}if(Gt)return _e}return-1}function E(G,H,ee,pe){ee=Number(ee)||0;var Ne=G.length-ee;pe?(pe=Number(pe))>Ne&&(pe=Ne):pe=Ne;var _e=H.length;pe>_e/2&&(pe=_e/2);for(var Pe=0;Pe<pe;++Pe){var We=parseInt(H.substr(2*Pe,2),16);if(Je(We))return Pe;G[ee+Pe]=We}return Pe}function P(G,H,ee,pe){return Be(ye(H,G.length-ee),G,ee,pe)}function M(G,H,ee,pe){return Be(function(Ne){for(var _e=[],Pe=0;Pe<Ne.length;++Pe)_e.push(255&Ne.charCodeAt(Pe));return _e}(H),G,ee,pe)}function j(G,H,ee,pe){return M(G,H,ee,pe)}function O(G,H,ee,pe){return Be(Fe(H),G,ee,pe)}function L(G,H,ee,pe){return Be(function(Ne,_e){for(var Pe,We,Ye,mt=[],ht=0;ht<Ne.length&&!((_e-=2)<0);++ht)We=(Pe=Ne.charCodeAt(ht))>>8,Ye=Pe%256,mt.push(Ye),mt.push(We);return mt}(H,G.length-ee),G,ee,pe)}function U(G,H,ee){return 0===H&&ee===G.length?a.fromByteArray(G):a.fromByteArray(G.slice(H,ee))}function W(G,H,ee){ee=Math.min(G.length,ee);for(var pe=[],Ne=H;Ne<ee;){var _e,Pe,We,Ye,mt=G[Ne],ht=null,Gt=mt>239?4:mt>223?3:mt>191?2:1;if(Ne+Gt<=ee)switch(Gt){case 1:mt<128&&(ht=mt);break;case 2:128==(192&(_e=G[Ne+1]))&&(Ye=(31&mt)<<6|63&_e)>127&&(ht=Ye);break;case 3:_e=G[Ne+1],Pe=G[Ne+2],128==(192&_e)&&128==(192&Pe)&&(Ye=(15&mt)<<12|(63&_e)<<6|63&Pe)>2047&&(Ye<55296||Ye>57343)&&(ht=Ye);break;case 4:_e=G[Ne+1],Pe=G[Ne+2],We=G[Ne+3],128==(192&_e)&&128==(192&Pe)&&128==(192&We)&&(Ye=(15&mt)<<18|(63&_e)<<12|(63&Pe)<<6|63&We)>65535&&Ye<1114112&&(ht=Ye)}null===ht?(ht=65533,Gt=1):ht>65535&&(ht-=65536,pe.push(ht>>>10&1023|55296),ht=56320|1023&ht),pe.push(ht),Ne+=Gt}return function(Xt){var Te=Xt.length;if(Te<=V)return String.fromCharCode.apply(String,Xt);for(var Re="",je=0;je<Te;)Re+=String.fromCharCode.apply(String,Xt.slice(je,je+=V));return Re}(pe)}ue.kMaxLength=y,o.TYPED_ARRAY_SUPPORT=function(){try{var G=new Uint8Array(1);return G.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===G.foo()}catch(H){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(G,H,ee){return u(G,H,ee)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(G,H,ee){return Ne=H,_e=ee,d(pe=G),pe<=0?e(pe):void 0!==Ne?"string"==typeof _e?e(pe).fill(Ne,_e):e(pe).fill(Ne):e(pe);var pe,Ne,_e},o.allocUnsafe=function(G){return m(G)},o.allocUnsafeSlow=function(G){return m(G)},o.isBuffer=function(G){return null!=G&&!0===G._isBuffer&&G!==o.prototype},o.compare=function(G,H){if(Ie(G,Uint8Array)&&(G=o.from(G,G.offset,G.byteLength)),Ie(H,Uint8Array)&&(H=o.from(H,H.offset,H.byteLength)),!o.isBuffer(G)||!o.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(G===H)return 0;for(var ee=G.length,pe=H.length,Ne=0,_e=Math.min(ee,pe);Ne<_e;++Ne)if(G[Ne]!==H[Ne]){ee=G[Ne],pe=H[Ne];break}return ee<pe?-1:pe<ee?1:0},o.isEncoding=function(G){switch(String(G).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(G,H){if(!Array.isArray(G))throw new TypeError('"list" argument must be an Array of Buffers');if(0===G.length)return o.alloc(0);var ee;if(void 0===H)for(H=0,ee=0;ee<G.length;++ee)H+=G[ee].length;var pe=o.allocUnsafe(H),Ne=0;for(ee=0;ee<G.length;++ee){var _e=G[ee];if(Ie(_e,Uint8Array)&&(_e=o.from(_e)),!o.isBuffer(_e))throw new TypeError('"list" argument must be an Array of Buffers');_e.copy(pe,Ne),Ne+=_e.length}return pe},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var G=this.length;if(G%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var H=0;H<G;H+=2)f(this,H,H+1);return this},o.prototype.swap32=function(){var G=this.length;if(G%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var H=0;H<G;H+=4)f(this,H,H+3),f(this,H+1,H+2);return this},o.prototype.swap64=function(){var G=this.length;if(G%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var H=0;H<G;H+=8)f(this,H,H+7),f(this,H+1,H+6),f(this,H+2,H+5),f(this,H+3,H+4);return this},o.prototype.toString=function(){var G=this.length;return 0===G?"":0===arguments.length?W(this,0,G):function(H,ee,pe){var Ne=!1;if((void 0===ee||ee<0)&&(ee=0),ee>this.length||((void 0===pe||pe>this.length)&&(pe=this.length),pe<=0)||(pe>>>=0)<=(ee>>>=0))return"";for(H||(H="utf8");;)switch(H){case"hex":return ce(this,ee,pe);case"utf8":case"utf-8":return W(this,ee,pe);case"ascii":return $(this,ee,pe);case"latin1":case"binary":return fe(this,ee,pe);case"base64":return U(this,ee,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,ee,pe);default:if(Ne)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),Ne=!0}}.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(G){if(!o.isBuffer(G))throw new TypeError("Argument must be a Buffer");return this===G||0===o.compare(this,G)},o.prototype.inspect=function(){var G="",H=ue.INSPECT_MAX_BYTES;return G=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&(G+=" ... "),"<Buffer "+G+">"},o.prototype.compare=function(G,H,ee,pe,Ne){if(Ie(G,Uint8Array)&&(G=o.from(G,G.offset,G.byteLength)),!o.isBuffer(G))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof G);if(void 0===H&&(H=0),void 0===ee&&(ee=G?G.length:0),void 0===pe&&(pe=0),void 0===Ne&&(Ne=this.length),H<0||ee>G.length||pe<0||Ne>this.length)throw new RangeError("out of range index");if(pe>=Ne&&H>=ee)return 0;if(pe>=Ne)return-1;if(H>=ee)return 1;if(this===G)return 0;for(var _e=(Ne>>>=0)-(pe>>>=0),Pe=(ee>>>=0)-(H>>>=0),We=Math.min(_e,Pe),Ye=this.slice(pe,Ne),mt=G.slice(H,ee),ht=0;ht<We;++ht)if(Ye[ht]!==mt[ht]){_e=Ye[ht],Pe=mt[ht];break}return _e<Pe?-1:Pe<_e?1:0},o.prototype.includes=function(G,H,ee){return-1!==this.indexOf(G,H,ee)},o.prototype.indexOf=function(G,H,ee){return w(this,G,H,ee,!0)},o.prototype.lastIndexOf=function(G,H,ee){return w(this,G,H,ee,!1)},o.prototype.write=function(G,H,ee,pe){if(void 0===H)pe="utf8",ee=this.length,H=0;else if(void 0===ee&&"string"==typeof H)pe=H,ee=this.length,H=0;else{if(!isFinite(H))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");H>>>=0,isFinite(ee)?(ee>>>=0,void 0===pe&&(pe="utf8")):(pe=ee,ee=void 0)}var Ne=this.length-H;if((void 0===ee||ee>Ne)&&(ee=Ne),G.length>0&&(ee<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");pe||(pe="utf8");for(var _e=!1;;)switch(pe){case"hex":return E(this,G,H,ee);case"utf8":case"utf-8":return P(this,G,H,ee);case"ascii":return M(this,G,H,ee);case"latin1":case"binary":return j(this,G,H,ee);case"base64":return O(this,G,H,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,G,H,ee);default:if(_e)throw new TypeError("Unknown encoding: "+pe);pe=(""+pe).toLowerCase(),_e=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var V=4096;function $(G,H,ee){var pe="";ee=Math.min(G.length,ee);for(var Ne=H;Ne<ee;++Ne)pe+=String.fromCharCode(127&G[Ne]);return pe}function fe(G,H,ee){var pe="";ee=Math.min(G.length,ee);for(var Ne=H;Ne<ee;++Ne)pe+=String.fromCharCode(G[Ne]);return pe}function ce(G,H,ee){var pe=G.length;(!H||H<0)&&(H=0),(!ee||ee<0||ee>pe)&&(ee=pe);for(var Ne="",_e=H;_e<ee;++_e)Ne+=de(G[_e]);return Ne}function xe(G,H,ee){for(var pe=G.slice(H,ee),Ne="",_e=0;_e<pe.length;_e+=2)Ne+=String.fromCharCode(pe[_e]+256*pe[_e+1]);return Ne}function te(G,H,ee){if(G%1!=0||G<0)throw new RangeError("offset is not uint");if(G+H>ee)throw new RangeError("Trying to access beyond buffer length")}function se(G,H,ee,pe,Ne,_e){if(!o.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>Ne||H<_e)throw new RangeError('"value" argument is out of bounds');if(ee+pe>G.length)throw new RangeError("Index out of range")}function ne(G,H,ee,pe,Ne,_e){if(ee+pe>G.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("Index out of range")}function ve(G,H,ee,pe,Ne){return H=+H,ee>>>=0,Ne||ne(G,0,ee,4),F.write(G,H,ee,pe,23,4),ee+4}function Ce(G,H,ee,pe,Ne){return H=+H,ee>>>=0,Ne||ne(G,0,ee,8),F.write(G,H,ee,pe,52,8),ee+8}o.prototype.slice=function(G,H){var ee=this.length;(G=~~G)<0?(G+=ee)<0&&(G=0):G>ee&&(G=ee),(H=void 0===H?ee:~~H)<0?(H+=ee)<0&&(H=0):H>ee&&(H=ee),H<G&&(H=G);var pe=this.subarray(G,H);return pe.__proto__=o.prototype,pe},o.prototype.readUIntLE=function(G,H,ee){G>>>=0,H>>>=0,ee||te(G,H,this.length);for(var pe=this[G],Ne=1,_e=0;++_e<H&&(Ne*=256);)pe+=this[G+_e]*Ne;return pe},o.prototype.readUIntBE=function(G,H,ee){G>>>=0,H>>>=0,ee||te(G,H,this.length);for(var pe=this[G+--H],Ne=1;H>0&&(Ne*=256);)pe+=this[G+--H]*Ne;return pe},o.prototype.readUInt8=function(G,H){return G>>>=0,H||te(G,1,this.length),this[G]},o.prototype.readUInt16LE=function(G,H){return G>>>=0,H||te(G,2,this.length),this[G]|this[G+1]<<8},o.prototype.readUInt16BE=function(G,H){return G>>>=0,H||te(G,2,this.length),this[G]<<8|this[G+1]},o.prototype.readUInt32LE=function(G,H){return G>>>=0,H||te(G,4,this.length),(this[G]|this[G+1]<<8|this[G+2]<<16)+16777216*this[G+3]},o.prototype.readUInt32BE=function(G,H){return G>>>=0,H||te(G,4,this.length),16777216*this[G]+(this[G+1]<<16|this[G+2]<<8|this[G+3])},o.prototype.readIntLE=function(G,H,ee){G>>>=0,H>>>=0,ee||te(G,H,this.length);for(var pe=this[G],Ne=1,_e=0;++_e<H&&(Ne*=256);)pe+=this[G+_e]*Ne;return pe>=(Ne*=128)&&(pe-=Math.pow(2,8*H)),pe},o.prototype.readIntBE=function(G,H,ee){G>>>=0,H>>>=0,ee||te(G,H,this.length);for(var pe=H,Ne=1,_e=this[G+--pe];pe>0&&(Ne*=256);)_e+=this[G+--pe]*Ne;return _e>=(Ne*=128)&&(_e-=Math.pow(2,8*H)),_e},o.prototype.readInt8=function(G,H){return G>>>=0,H||te(G,1,this.length),128&this[G]?-1*(255-this[G]+1):this[G]},o.prototype.readInt16LE=function(G,H){G>>>=0,H||te(G,2,this.length);var ee=this[G]|this[G+1]<<8;return 32768&ee?4294901760|ee:ee},o.prototype.readInt16BE=function(G,H){G>>>=0,H||te(G,2,this.length);var ee=this[G+1]|this[G]<<8;return 32768&ee?4294901760|ee:ee},o.prototype.readInt32LE=function(G,H){return G>>>=0,H||te(G,4,this.length),this[G]|this[G+1]<<8|this[G+2]<<16|this[G+3]<<24},o.prototype.readInt32BE=function(G,H){return G>>>=0,H||te(G,4,this.length),this[G]<<24|this[G+1]<<16|this[G+2]<<8|this[G+3]},o.prototype.readFloatLE=function(G,H){return G>>>=0,H||te(G,4,this.length),F.read(this,G,!0,23,4)},o.prototype.readFloatBE=function(G,H){return G>>>=0,H||te(G,4,this.length),F.read(this,G,!1,23,4)},o.prototype.readDoubleLE=function(G,H){return G>>>=0,H||te(G,8,this.length),F.read(this,G,!0,52,8)},o.prototype.readDoubleBE=function(G,H){return G>>>=0,H||te(G,8,this.length),F.read(this,G,!1,52,8)},o.prototype.writeUIntLE=function(G,H,ee,pe){G=+G,H>>>=0,ee>>>=0,pe||se(this,G,H,ee,Math.pow(2,8*ee)-1,0);var Ne=1,_e=0;for(this[H]=255&G;++_e<ee&&(Ne*=256);)this[H+_e]=G/Ne&255;return H+ee},o.prototype.writeUIntBE=function(G,H,ee,pe){G=+G,H>>>=0,ee>>>=0,pe||se(this,G,H,ee,Math.pow(2,8*ee)-1,0);var Ne=ee-1,_e=1;for(this[H+Ne]=255&G;--Ne>=0&&(_e*=256);)this[H+Ne]=G/_e&255;return H+ee},o.prototype.writeUInt8=function(G,H,ee){return G=+G,H>>>=0,ee||se(this,G,H,1,255,0),this[H]=255&G,H+1},o.prototype.writeUInt16LE=function(G,H,ee){return G=+G,H>>>=0,ee||se(this,G,H,2,65535,0),this[H]=255&G,this[H+1]=G>>>8,H+2},o.prototype.writeUInt16BE=function(G,H,ee){return G=+G,H>>>=0,ee||se(this,G,H,2,65535,0),this[H]=G>>>8,this[H+1]=255&G,H+2},o.prototype.writeUInt32LE=function(G,H,ee){return G=+G,H>>>=0,ee||se(this,G,H,4,4294967295,0),this[H+3]=G>>>24,this[H+2]=G>>>16,this[H+1]=G>>>8,this[H]=255&G,H+4},o.prototype.writeUInt32BE=function(G,H,ee){return G=+G,H>>>=0,ee||se(this,G,H,4,4294967295,0),this[H]=G>>>24,this[H+1]=G>>>16,this[H+2]=G>>>8,this[H+3]=255&G,H+4},o.prototype.writeIntLE=function(G,H,ee,pe){if(G=+G,H>>>=0,!pe){var Ne=Math.pow(2,8*ee-1);se(this,G,H,ee,Ne-1,-Ne)}var _e=0,Pe=1,We=0;for(this[H]=255&G;++_e<ee&&(Pe*=256);)G<0&&0===We&&0!==this[H+_e-1]&&(We=1),this[H+_e]=(G/Pe>>0)-We&255;return H+ee},o.prototype.writeIntBE=function(G,H,ee,pe){if(G=+G,H>>>=0,!pe){var Ne=Math.pow(2,8*ee-1);se(this,G,H,ee,Ne-1,-Ne)}var _e=ee-1,Pe=1,We=0;for(this[H+_e]=255&G;--_e>=0&&(Pe*=256);)G<0&&0===We&&0!==this[H+_e+1]&&(We=1),this[H+_e]=(G/Pe>>0)-We&255;return H+ee},o.prototype.writeInt8=function(G,H,ee){return G=+G,H>>>=0,ee||se(this,G,H,1,127,-128),G<0&&(G=255+G+1),this[H]=255&G,H+1},o.prototype.writeInt16LE=function(G,H,ee){return G=+G,H>>>=0,ee||se(this,G,H,2,32767,-32768),this[H]=255&G,this[H+1]=G>>>8,H+2},o.prototype.writeInt16BE=function(G,H,ee){return G=+G,H>>>=0,ee||se(this,G,H,2,32767,-32768),this[H]=G>>>8,this[H+1]=255&G,H+2},o.prototype.writeInt32LE=function(G,H,ee){return G=+G,H>>>=0,ee||se(this,G,H,4,2147483647,-2147483648),this[H]=255&G,this[H+1]=G>>>8,this[H+2]=G>>>16,this[H+3]=G>>>24,H+4},o.prototype.writeInt32BE=function(G,H,ee){return G=+G,H>>>=0,ee||se(this,G,H,4,2147483647,-2147483648),G<0&&(G=4294967295+G+1),this[H]=G>>>24,this[H+1]=G>>>16,this[H+2]=G>>>8,this[H+3]=255&G,H+4},o.prototype.writeFloatLE=function(G,H,ee){return ve(this,G,H,!0,ee)},o.prototype.writeFloatBE=function(G,H,ee){return ve(this,G,H,!1,ee)},o.prototype.writeDoubleLE=function(G,H,ee){return Ce(this,G,H,!0,ee)},o.prototype.writeDoubleBE=function(G,H,ee){return Ce(this,G,H,!1,ee)},o.prototype.copy=function(G,H,ee,pe){if(!o.isBuffer(G))throw new TypeError("argument should be a Buffer");if(ee||(ee=0),pe||0===pe||(pe=this.length),H>=G.length&&(H=G.length),H||(H=0),pe>0&&pe<ee&&(pe=ee),pe===ee||0===G.length||0===this.length)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(ee<0||ee>=this.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("sourceEnd out of bounds");pe>this.length&&(pe=this.length),G.length-H<pe-ee&&(pe=G.length-H+ee);var Ne=pe-ee;if(this===G&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(H,ee,pe);else if(this===G&&ee<H&&H<pe)for(var _e=Ne-1;_e>=0;--_e)G[_e+H]=this[_e+ee];else Uint8Array.prototype.set.call(G,this.subarray(ee,pe),H);return Ne},o.prototype.fill=function(G,H,ee,pe){if("string"==typeof G){if("string"==typeof H?(pe=H,H=0,ee=this.length):"string"==typeof ee&&(pe=ee,ee=this.length),void 0!==pe&&"string"!=typeof pe)throw new TypeError("encoding must be a string");if("string"==typeof pe&&!o.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);if(1===G.length){var Ne=G.charCodeAt(0);("utf8"===pe&&Ne<128||"latin1"===pe)&&(G=Ne)}}else"number"==typeof G&&(G&=255);if(H<0||this.length<H||this.length<ee)throw new RangeError("Out of range index");if(ee<=H)return this;var _e;if(H>>>=0,ee=void 0===ee?this.length:ee>>>0,G||(G=0),"number"==typeof G)for(_e=H;_e<ee;++_e)this[_e]=G;else{var Pe=o.isBuffer(G)?G:o.from(G,pe),We=Pe.length;if(0===We)throw new TypeError('The value "'+G+'" is invalid for argument "value"');for(_e=0;_e<ee-H;++_e)this[_e+H]=Pe[_e%We]}return this};var be=/[^+/0-9A-Za-z-_]/g;function de(G){return G<16?"0"+G.toString(16):G.toString(16)}function ye(G,H){var ee;H=H||1/0;for(var pe=G.length,Ne=null,_e=[],Pe=0;Pe<pe;++Pe){if((ee=G.charCodeAt(Pe))>55295&&ee<57344){if(!Ne){if(ee>56319){(H-=3)>-1&&_e.push(239,191,189);continue}if(Pe+1===pe){(H-=3)>-1&&_e.push(239,191,189);continue}Ne=ee;continue}if(ee<56320){(H-=3)>-1&&_e.push(239,191,189),Ne=ee;continue}ee=65536+(Ne-55296<<10|ee-56320)}else Ne&&(H-=3)>-1&&_e.push(239,191,189);if(Ne=null,ee<128){if((H-=1)<0)break;_e.push(ee)}else if(ee<2048){if((H-=2)<0)break;_e.push(ee>>6|192,63&ee|128)}else if(ee<65536){if((H-=3)<0)break;_e.push(ee>>12|224,ee>>6&63|128,63&ee|128)}else{if(!(ee<1114112))throw new Error("Invalid code point");if((H-=4)<0)break;_e.push(ee>>18|240,ee>>12&63|128,ee>>6&63|128,63&ee|128)}}return _e}function Fe(G){return a.toByteArray(function(H){if((H=(H=H.split("=")[0]).trim().replace(be,"")).length<2)return"";for(;H.length%4!=0;)H+="=";return H}(G))}function Be(G,H,ee,pe){for(var Ne=0;Ne<pe&&!(Ne+ee>=H.length||Ne>=G.length);++Ne)H[Ne+ee]=G[Ne];return Ne}function Ie(G,H){return G instanceof H||null!=G&&null!=G.constructor&&null!=G.constructor.name&&G.constructor.name===H.name}function Je(G){return G!=G}}).call(this)}).call(this,J("buffer").Buffer)},{"base64-js":2,buffer:9,ieee754:25}],10:[function(J,ie,ue){ie.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],11:[function(J,ie,ue){"use strict";var q=J("get-intrinsic"),a=J("./"),F=a(q("String.prototype.indexOf"));ie.exports=function(y,e){var o=q(y,!!e);return"function"==typeof o&&F(y,".prototype.")>-1?a(o):o}},{"./":12,"get-intrinsic":19}],12:[function(J,ie,ue){"use strict";var q=J("function-bind"),a=J("get-intrinsic"),F=a("%Function.prototype.apply%"),y=a("%Function.prototype.call%"),e=a("%Reflect.apply%",!0)||q.call(y,F),o=a("%Object.getOwnPropertyDescriptor%",!0),u=a("%Object.defineProperty%",!0),d=a("%Math.max%");if(u)try{u({},"a",{value:1})}catch(h){u=null}ie.exports=function(h){var k=e(q,y,arguments);return o&&u&&o(k,"length").configurable&&u(k,"length",{value:1+d(0,h.length-(arguments.length-1))}),k};var m=function(){return e(q,F,arguments)};u?u(ie.exports,"apply",{value:m}):ie.exports.apply=m},{"function-bind":18,"get-intrinsic":19}],13:[function(J,ie,ue){"use strict";ie.exports=function q(a){return null===a||"object"!=typeof a||null!=a.toJSON?JSON.stringify(a):Array.isArray(a)?"["+a.reduce((F,y,e)=>F+(0===e?"":",")+q(void 0===y||"symbol"==typeof y?null:y),"")+"]":"{"+Object.keys(a).sort().reduce((F,y,e)=>void 0===a[y]||"symbol"==typeof a[y]?F:F+(0===F.length?"":",")+q(y)+":"+q(a[y]),"")+"}"}},{}],14:[function(J,ie,ue){"use strict";var q=J("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if(q)try{q([],"length")}catch(a){q=null}ie.exports=q},{"get-intrinsic":19}],15:[function(J,ie,ue){"use strict";var q,a="object"==typeof Reflect?Reflect:null,F=a&&"function"==typeof a.apply?a.apply:function(T,E,P){return Function.prototype.apply.call(T,E,P)};q=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:function(T){return Object.getOwnPropertyNames(T)};var y=Number.isNaN||function(T){return T!=T};function e(){e.init.call(this)}ie.exports=e,ie.exports.once=function(T,E){return new Promise(function(P,M){function j(L){T.removeListener(E,O),M(L)}function O(){"function"==typeof T.removeListener&&T.removeListener("error",j),P([].slice.call(arguments))}var L,U;w(T,E,O,{once:!0}),"error"!==E&&(U=j,"function"==typeof(L=T).on&&w(L,"error",U,{once:!0}))})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var o=10;function u(T){if("function"!=typeof T)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}function d(T){return void 0===T._maxListeners?e.defaultMaxListeners:T._maxListeners}function m(T,E,P,M){var j,O,L,U;if(u(P),void 0===(O=T._events)?(O=T._events=Object.create(null),T._eventsCount=0):(void 0!==O.newListener&&(T.emit("newListener",E,P.listener?P.listener:P),O=T._events),L=O[E]),void 0===L)L=O[E]=P,++T._eventsCount;else if("function"==typeof L?L=O[E]=M?[P,L]:[L,P]:M?L.unshift(P):L.push(P),(j=d(T))>0&&L.length>j&&!L.warned){L.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");W.name="MaxListenersExceededWarning",W.emitter=T,W.type=E,W.count=L.length,U=W,console&&console.warn&&console.warn(U)}return T}function h(T,E,P){var M={fired:!1,wrapFn:void 0,target:T,type:E,listener:P},j=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(M);return j.listener=P,M.wrapFn=j,j}function k(T,E,P){var M=T._events;if(void 0===M)return[];var j=M[E];return void 0===j?[]:"function"==typeof j?P?[j.listener||j]:[j]:P?function(O){for(var L=new Array(O.length),U=0;U<L.length;++U)L[U]=O[U].listener||O[U];return L}(j):f(j,j.length)}function v(T){var E=this._events;if(void 0!==E){var P=E[T];if("function"==typeof P)return 1;if(void 0!==P)return P.length}return 0}function f(T,E){for(var P=new Array(E),M=0;M<E;++M)P[M]=T[M];return P}function w(T,E,P,M){if("function"==typeof T.on)M.once?T.once(E,P):T.on(E,P);else{if("function"!=typeof T.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T);T.addEventListener(E,function j(O){M.once&&T.removeEventListener(E,j),P(O)})}}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(T){if("number"!=typeof T||T<0||y(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");o=T}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(T){if("number"!=typeof T||T<0||y(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this},e.prototype.getMaxListeners=function(){return d(this)},e.prototype.emit=function(T){for(var E=[],P=1;P<arguments.length;P++)E.push(arguments[P]);var M="error"===T,j=this._events;if(void 0!==j)M=M&&void 0===j.error;else if(!M)return!1;if(M){var O;if(E.length>0&&(O=E[0]),O instanceof Error)throw O;var L=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw L.context=O,L}var U=j[T];if(void 0===U)return!1;if("function"==typeof U)F(U,this,E);else{var W=U.length,V=f(U,W);for(P=0;P<W;++P)F(V[P],this,E)}return!0},e.prototype.addListener=function(T,E){return m(this,T,E,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(T,E){return m(this,T,E,!0)},e.prototype.once=function(T,E){return u(E),this.on(T,h(this,T,E)),this},e.prototype.prependOnceListener=function(T,E){return u(E),this.prependListener(T,h(this,T,E)),this},e.prototype.removeListener=function(T,E){var P,M,j,O,L;if(u(E),void 0===(M=this._events))return this;if(void 0===(P=M[T]))return this;if(P===E||P.listener===E)0==--this._eventsCount?this._events=Object.create(null):(delete M[T],M.removeListener&&this.emit("removeListener",T,P.listener||E));else if("function"!=typeof P){for(j=-1,O=P.length-1;O>=0;O--)if(P[O]===E||P[O].listener===E){L=P[O].listener,j=O;break}if(j<0)return this;0===j?P.shift():function(U,W){for(;W+1<U.length;W++)U[W]=U[W+1];U.pop()}(P,j),1===P.length&&(M[T]=P[0]),void 0!==M.removeListener&&this.emit("removeListener",T,L||E)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(T){var E,P,M;if(void 0===(P=this._events))return this;if(void 0===P.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==P[T]&&(0==--this._eventsCount?this._events=Object.create(null):delete P[T]),this;if(0===arguments.length){var j,O=Object.keys(P);for(M=0;M<O.length;++M)"removeListener"!==(j=O[M])&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(E=P[T]))this.removeListener(T,E);else if(void 0!==E)for(M=E.length-1;M>=0;M--)this.removeListener(T,E[M]);return this},e.prototype.listeners=function(T){return k(this,T,!0)},e.prototype.rawListeners=function(T){return k(this,T,!1)},e.listenerCount=function(T,E){return"function"==typeof T.listenerCount?T.listenerCount(E):v.call(T,E)},e.prototype.listenerCount=v,e.prototype.eventNames=function(){return this._eventsCount>0?q(this._events):[]}},{}],16:[function(J,ie,ue){"use strict";var q=J("is-callable"),a=Object.prototype.toString,F=Object.prototype.hasOwnProperty;ie.exports=function(y,e,o){if(!q(e))throw new TypeError("iterator must be a function");var u;arguments.length>=3&&(u=o),"[object Array]"===a.call(y)?function(d,m,h){for(var k=0,v=d.length;k<v;k++)F.call(d,k)&&(null==h?m(d[k],k,d):m.call(h,d[k],k,d))}(y,e,u):"string"==typeof y?function(d,m,h){for(var k=0,v=d.length;k<v;k++)null==h?m(d.charAt(k),k,d):m.call(h,d.charAt(k),k,d)}(y,e,u):function(d,m,h){for(var k in d)F.call(d,k)&&(null==h?m(d[k],k,d):m.call(h,d[k],k,d))}(y,e,u)}},{"is-callable":28}],17:[function(J,ie,ue){"use strict";var q=Array.prototype.slice,a=Object.prototype.toString;ie.exports=function(F){var y=this;if("function"!=typeof y||"[object Function]"!==a.call(y))throw new TypeError("Function.prototype.bind called on incompatible "+y);for(var e,o=q.call(arguments,1),u=Math.max(0,y.length-o.length),d=[],m=0;m<u;m++)d.push("$"+m);if(e=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof e){var k=y.apply(this,o.concat(q.call(arguments)));return Object(k)===k?k:this}return y.apply(F,o.concat(q.call(arguments)))}),y.prototype){var h=function(){};h.prototype=y.prototype,e.prototype=new h,h.prototype=null}return e}},{}],18:[function(J,ie,ue){"use strict";var q=J("./implementation");ie.exports=Function.prototype.bind||q},{"./implementation":17}],19:[function(J,ie,ue){"use strict";var q=SyntaxError,a=Function,F=TypeError,y=function(V){try{return a('"use strict"; return ('+V+").constructor;")()}catch($){}},e=Object.getOwnPropertyDescriptor;if(e)try{e({},"")}catch(V){e=null}var o=function(){throw new F},u=e?function(){try{return arguments.callee,o}catch(V){try{return e(arguments,"callee").get}catch($){return o}}}():o,d=J("has-symbols")(),m=Object.getPrototypeOf||function(V){return V.__proto__},h={},k="undefined"==typeof Uint8Array?void 0:m(Uint8Array),v={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":d?m([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":h,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?m(m([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?m((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?m((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?m(""[Symbol.iterator]()):void 0,"%Symbol%":d?Symbol:void 0,"%SyntaxError%":q,"%ThrowTypeError%":u,"%TypedArray%":k,"%TypeError%":F,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},f={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=J("function-bind"),T=J("has"),E=w.call(Function.call,Array.prototype.concat),P=w.call(Function.apply,Array.prototype.splice),M=w.call(Function.call,String.prototype.replace),j=w.call(Function.call,String.prototype.slice),O=w.call(Function.call,RegExp.prototype.exec),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,U=/\\(\\)?/g,W=function(V,$){var fe,ce=V;if(T(f,ce)&&(ce="%"+(fe=f[ce])[0]+"%"),T(v,ce)){var xe=v[ce];if(xe===h&&(xe=function te(se){var ne;if("%AsyncFunction%"===se)ne=y("async function () {}");else if("%GeneratorFunction%"===se)ne=y("function* () {}");else if("%AsyncGeneratorFunction%"===se)ne=y("async function* () {}");else if("%AsyncGenerator%"===se){var ve=te("%AsyncGeneratorFunction%");ve&&(ne=ve.prototype)}else if("%AsyncIteratorPrototype%"===se){var Ce=te("%AsyncGenerator%");Ce&&(ne=m(Ce.prototype))}return v[se]=ne,ne}(ce)),void 0===xe&&!$)throw new F("intrinsic "+V+" exists, but is not available. Please file an issue!");return{alias:fe,name:ce,value:xe}}throw new q("intrinsic "+V+" does not exist!")};ie.exports=function(V,$){if("string"!=typeof V||0===V.length)throw new F("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof $)throw new F('"allowMissing" argument must be a boolean');if(null===O(/^%?[^%]*%?$/g,V))throw new q("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var fe=function(Ie){var Je=j(Ie,0,1),G=j(Ie,-1);if("%"===Je&&"%"!==G)throw new q("invalid intrinsic syntax, expected closing `%`");if("%"===G&&"%"!==Je)throw new q("invalid intrinsic syntax, expected opening `%`");var H=[];return M(Ie,L,function(ee,pe,Ne,_e){H[H.length]=Ne?M(_e,U,"$1"):pe||ee}),H}(V),ce=fe.length>0?fe[0]:"",xe=W("%"+ce+"%",$),te=xe.name,se=xe.value,ne=!1,ve=xe.alias;ve&&(ce=ve[0],P(fe,E([0,1],ve)));for(var Ce=1,be=!0;Ce<fe.length;Ce+=1){var de=fe[Ce],ye=j(de,0,1),Fe=j(de,-1);if(('"'===ye||"'"===ye||"`"===ye||'"'===Fe||"'"===Fe||"`"===Fe)&&ye!==Fe)throw new q("property names with quotes must have matching quotes");if("constructor"!==de&&be||(ne=!0),T(v,te="%"+(ce+="."+de)+"%"))se=v[te];else if(null!=se){if(!(de in se)){if(!$)throw new F("base intrinsic for "+V+" exists, but the property is not available.");return}if(e&&Ce+1>=fe.length){var Be=e(se,de);se=(be=!!Be)&&"get"in Be&&!("originalValue"in Be.get)?Be.get:se[de]}else be=T(se,de),se=se[de];be&&!ne&&(v[te]=se)}}return se}},{"function-bind":18,has:23,"has-symbols":20}],20:[function(J,ie,ue){"use strict";var q="undefined"!=typeof Symbol&&Symbol,a=J("./shams");ie.exports=function(){return"function"==typeof q&&"function"==typeof Symbol&&"symbol"==typeof q("foo")&&"symbol"==typeof Symbol("bar")&&a()}},{"./shams":21}],21:[function(J,ie,ue){"use strict";ie.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var q={},a=Symbol("test"),F=Object(a);if("string"==typeof a||"[object Symbol]"!==Object.prototype.toString.call(a)||"[object Symbol]"!==Object.prototype.toString.call(F))return!1;for(a in q[a]=42,q)return!1;if("function"==typeof Object.keys&&0!==Object.keys(q).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(q).length)return!1;var y=Object.getOwnPropertySymbols(q);if(1!==y.length||y[0]!==a||!Object.prototype.propertyIsEnumerable.call(q,a))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var e=Object.getOwnPropertyDescriptor(q,a);if(42!==e.value||!0!==e.enumerable)return!1}return!0}},{}],22:[function(J,ie,ue){"use strict";var q=J("has-symbols/shams");ie.exports=function(){return q()&&!!Symbol.toStringTag}},{"has-symbols/shams":21}],23:[function(J,ie,ue){"use strict";var q=J("function-bind");ie.exports=q.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":18}],24:[function(J,ie,ue){var q=J("http"),a=J("url"),F=ie.exports;for(var y in q)q.hasOwnProperty(y)&&(F[y]=q[y]);function e(o){if("string"==typeof o&&(o=a.parse(o)),o.protocol||(o.protocol="https:"),"https:"!==o.protocol)throw new Error('Protocol "'+o.protocol+'" not supported. Expected "https:"');return o}F.request=function(o,u){return o=e(o),q.request.call(this,o,u)},F.get=function(o,u){return o=e(o),q.get.call(this,o,u)}},{http:94,url:115}],25:[function(J,ie,ue){ue.read=function(q,a,F,y,e){var o,u,d=8*e-y-1,m=(1<<d)-1,h=m>>1,k=-7,v=F?e-1:0,f=F?-1:1,w=q[a+v];for(v+=f,o=w&(1<<-k)-1,w>>=-k,k+=d;k>0;o=256*o+q[a+v],v+=f,k-=8);for(u=o&(1<<-k)-1,o>>=-k,k+=y;k>0;u=256*u+q[a+v],v+=f,k-=8);if(0===o)o=1-h;else{if(o===m)return u?NaN:1/0*(w?-1:1);u+=Math.pow(2,y),o-=h}return(w?-1:1)*u*Math.pow(2,o-y)},ue.write=function(q,a,F,y,e,o){var u,d,m,h=8*o-e-1,k=(1<<h)-1,v=k>>1,f=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,w=y?0:o-1,T=y?1:-1,E=a<0||0===a&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(d=isNaN(a)?1:0,u=k):(u=Math.floor(Math.log(a)/Math.LN2),a*(m=Math.pow(2,-u))<1&&(u--,m*=2),(a+=u+v>=1?f/m:f*Math.pow(2,1-v))*m>=2&&(u++,m/=2),u+v>=k?(d=0,u=k):u+v>=1?(d=(a*m-1)*Math.pow(2,e),u+=v):(d=a*Math.pow(2,v-1)*Math.pow(2,e),u=0));e>=8;q[F+w]=255&d,w+=T,d/=256,e-=8);for(u=u<<e|d,h+=e;h>0;q[F+w]=255&u,w+=T,u/=256,h-=8);q[F+w-T]|=128*E}},{}],26:[function(J,ie,ue){"function"==typeof Object.create?ie.exports=function(q,a){a&&(q.super_=a,q.prototype=Object.create(a.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}))}:ie.exports=function(q,a){if(a){q.super_=a;var F=function(){};F.prototype=a.prototype,q.prototype=new F,q.prototype.constructor=q}}},{}],27:[function(J,ie,ue){"use strict";var q=J("has-tostringtag/shams")(),a=J("call-bind/callBound")("Object.prototype.toString"),F=function(o){return!(q&&o&&"object"==typeof o&&Symbol.toStringTag in o)&&"[object Arguments]"===a(o)},y=function(o){return!!F(o)||null!==o&&"object"==typeof o&&"number"==typeof o.length&&o.length>=0&&"[object Array]"!==a(o)&&"[object Function]"===a(o.callee)},e=function(){return F(arguments)}();F.isLegacyArguments=y,ie.exports=e?F:y},{"call-bind/callBound":11,"has-tostringtag/shams":22}],28:[function(J,ie,ue){"use strict";var q,a,F=Function.prototype.toString,y="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof y&&"function"==typeof Object.defineProperty)try{q=Object.defineProperty({},"length",{get:function(){throw a}}),a={},y(function(){throw 42},null,q)}catch(h){h!==a&&(y=null)}else y=null;var e=/^\s*class\b/,o=function(h){try{var k=F.call(h);return e.test(k)}catch(v){return!1}},u=Object.prototype.toString,d="function"==typeof Symbol&&!!Symbol.toStringTag,m="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};ie.exports=y?function(h){if(h===m)return!0;if(!h||"function"!=typeof h&&"object"!=typeof h)return!1;if("function"==typeof h&&!h.prototype)return!0;try{y(h,null,q)}catch(k){if(k!==a)return!1}return!o(h)}:function(h){if(h===m)return!0;if(!h||"function"!=typeof h&&"object"!=typeof h)return!1;if("function"==typeof h&&!h.prototype)return!0;if(d)return function(v){try{return!o(v)&&(F.call(v),!0)}catch(f){return!1}}(h);if(o(h))return!1;var k=u.call(h);return"[object Function]"===k||"[object GeneratorFunction]"===k}},{}],29:[function(J,ie,ue){"use strict";var q,a=Object.prototype.toString,F=Function.prototype.toString,y=/^\s*(?:function)?\*/,e=J("has-tostringtag/shams")(),o=Object.getPrototypeOf;ie.exports=function(u){if("function"!=typeof u)return!1;if(y.test(F.call(u)))return!0;if(!e)return"[object GeneratorFunction]"===a.call(u);if(!o)return!1;if(void 0===q){var d=function(){if(!e)return!1;try{return Function("return function*() {}")()}catch(m){}}();q=!!d&&o(d)}return o(u)===q}},{"has-tostringtag/shams":22}],30:[function(J,ie,ue){(function(q){(function(){"use strict";var a=J("for-each"),F=J("available-typed-arrays"),y=J("call-bind/callBound"),e=y("Object.prototype.toString"),o=J("has-tostringtag/shams")(),u="undefined"==typeof globalThis?q:globalThis,d=F(),m=y("Array.prototype.indexOf",!0)||function(w,T){for(var E=0;E<w.length;E+=1)if(w[E]===T)return E;return-1},h=y("String.prototype.slice"),k={},v=J("es-abstract/helpers/getOwnPropertyDescriptor"),f=Object.getPrototypeOf;o&&v&&f&&a(d,function(w){var T=new u[w];if(Symbol.toStringTag in T){var E=f(T),P=v(E,Symbol.toStringTag);if(!P){var M=f(E);P=v(M,Symbol.toStringTag)}k[w]=P.get}}),ie.exports=function(w){if(!w||"object"!=typeof w)return!1;if(!o||!(Symbol.toStringTag in w)){var T=h(e(w),8,-1);return m(d,T)>-1}return!!v&&(E=w,P=!1,a(k,function(M,j){if(!P)try{P=M.call(E)===j}catch(O){}}),P);var E,P}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":1,"call-bind/callBound":11,"es-abstract/helpers/getOwnPropertyDescriptor":14,"for-each":16,"has-tostringtag/shams":22}],31:[function(J,ie,ue){"use strict";const{isArray:q,isObject:a,isString:F}=J("./types"),{asArray:y}=J("./util"),{prependBase:e}=J("./url"),o=J("./JsonLdError"),u=J("./ResolvedContext");function d(m){throw new o("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:m})}ie.exports=class{constructor({sharedCache:m}){this.perOpCache=new Map,this.sharedCache=m}async resolve({activeCtx:m,context:h,documentLoader:k,base:v,cycles:f=new Set}){h&&a(h)&&h["@context"]&&(h=h["@context"]),h=y(h);const w=[];for(const T of h){if(F(T)){let M=this._get(T);M||(M=await this._resolveRemoteContext({activeCtx:m,url:T,documentLoader:k,base:v,cycles:f})),q(M)?w.push(...M):w.push(M);continue}if(null===T){w.push(new u({document:null}));continue}a(T)||d(h);const E=JSON.stringify(T);let P=this._get(E);P||(P=new u({document:T}),this._cacheResolvedContext({key:E,resolved:P,tag:"static"})),w.push(P)}return w}_get(m){let h=this.perOpCache.get(m);if(!h){const k=this.sharedCache.get(m);k&&(h=k.get("static"))&&this.perOpCache.set(m,h)}return h}_cacheResolvedContext({key:m,resolved:h,tag:k}){if(this.perOpCache.set(m,h),void 0!==k){let v=this.sharedCache.get(m);v||(v=new Map,this.sharedCache.set(m,v)),v.set(k,h)}return h}async _resolveRemoteContext({activeCtx:m,url:h,documentLoader:k,base:v,cycles:f}){h=e(v,h);const{context:w,remoteDoc:T}=await this._fetchContext({activeCtx:m,url:h,documentLoader:k,cycles:f});!function P({context:M,base:j}){if(!M)return;const O=M["@context"];if(F(O))M["@context"]=e(j,O);else if(q(O))for(let L=0;L<O.length;++L){const U=O[L];F(U)?O[L]=e(j,U):a(U)&&P({context:{"@context":U},base:j})}else if(a(O))for(const L in O)P({context:O[L],base:j})}({context:w,base:v=T.documentUrl||h});const E=await this.resolve({activeCtx:m,context:w,documentLoader:k,base:v,cycles:f});return this._cacheResolvedContext({key:h,resolved:E,tag:T.tag}),E}async _fetchContext({activeCtx:m,url:h,documentLoader:k,cycles:v}){if(v.size>10)throw new o("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===m.processingMode?"loading remote context failed":"context overflow",max:10});if(v.has(h))throw new o("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===m.processingMode?"recursive context inclusion":"context overflow",url:h});let f,w;v.add(h);try{f=(w=await k(h)).document||null,F(f)&&(f=JSON.parse(f))}catch(T){throw new o("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:h,cause:T})}if(!a(f))throw new o("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:h});return f="@context"in f?{"@context":f["@context"]}:{"@context":{}},w.contextUrl&&(q(f["@context"])||(f["@context"]=[f["@context"]]),f["@context"].push(w.contextUrl)),{context:f,remoteDoc:w}}}},{"./JsonLdError":32,"./ResolvedContext":36,"./types":50,"./url":51,"./util":52}],32:[function(J,ie,ue){"use strict";ie.exports=class extends Error{constructor(q="An unspecified JSON-LD error occurred.",a="jsonld.Error",F={}){super(q),this.name=a,this.message=q,this.details=F}}},{}],33:[function(J,ie,ue){"use strict";ie.exports=q=>{class a{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(a,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(a.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:a}),a.compact=function(F,y){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):q.compact(F,y)},a.expand=function(F){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):q.expand(F)},a.flatten=function(F){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):q.flatten(F)},a}},{}],34:[function(J,ie,ue){"use strict";ie.exports=J("rdf-canonize").NQuads},{"rdf-canonize":66}],35:[function(J,ie,ue){"use strict";ie.exports=class{constructor(){this._requests={}}wrapLoader(q){const a=this;return a._loader=q,function(){return a.add.apply(a,arguments)}}async add(q){let a=this._requests[q];if(a)return Promise.resolve(a);a=this._requests[q]=this._loader(q);try{return await a}finally{delete this._requests[q]}}}},{}],36:[function(J,ie,ue){"use strict";const q=J("lru-cache");ie.exports=class{constructor({document:a}){this.document=a,this.cache=new q({max:10})}getProcessed(a){return this.cache.get(a)}setProcessed(a,F){this.cache.set(a,F)}}},{"lru-cache":53}],37:[function(J,ie,ue){"use strict";const q=J("./JsonLdError"),{isArray:a,isObject:F,isString:y,isUndefined:e}=J("./types"),{isList:o,isValue:u,isGraph:d,isSimpleGraph:m,isSubjectReference:h}=J("./graphTypes"),{expandIri:k,getContextValue:v,isKeyword:f,process:w,processingMode:T}=J("./context"),{removeBase:E,prependBase:P}=J("./url"),{addValue:M,asArray:j,compareShortestLeast:O}=J("./util"),L={};function U(W,V,$){if("@nest"!==k(W,V,{vocab:!0},$))throw new q("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}ie.exports=L,L.compact=async({activeCtx:W,activeProperty:V=null,element:$,options:fe={},compactionMap:ce=(()=>{})})=>{if(a($)){let te=[];for(let se=0;se<$.length;++se){let ne=await L.compact({activeCtx:W,activeProperty:V,element:$[se],options:fe,compactionMap:ce});null===ne&&void 0===(ne=await ce({unmappedValue:$[se],activeCtx:W,activeProperty:V,parent:$,index:se,options:fe}))||te.push(ne)}return fe.compactArrays&&1===te.length&&0===(v(W,V,"@container")||[]).length&&(te=te[0]),te}const xe=v(W,V,"@context");if(e(xe)||(W=await w({activeCtx:W,localCtx:xe,propagate:!0,overrideProtected:!0,options:fe})),F($)){if(fe.link&&"@id"in $&&fe.link.hasOwnProperty($["@id"])){const ye=fe.link[$["@id"]];for(let Fe=0;Fe<ye.length;++Fe)if(ye[Fe].expanded===$)return ye[Fe].compacted}if(u($)||h($)){const ye=L.compactValue({activeCtx:W,activeProperty:V,value:$,options:fe});return fe.link&&h($)&&(fe.link.hasOwnProperty($["@id"])||(fe.link[$["@id"]]=[]),fe.link[$["@id"]].push({expanded:$,compacted:ye})),ye}if(o($)&&(v(W,V,"@container")||[]).includes("@list"))return L.compact({activeCtx:W,activeProperty:V,element:$["@list"],options:fe,compactionMap:ce});const te="@reverse"===V,se={},ne=W;u($)||h($)||(W=W.revertToPreviousContext());const ve=v(ne,V,"@context");e(ve)||(W=await w({activeCtx:W,localCtx:ve,propagate:!0,overrideProtected:!0,options:fe})),fe.link&&"@id"in $&&(fe.link.hasOwnProperty($["@id"])||(fe.link[$["@id"]]=[]),fe.link[$["@id"]].push({expanded:$,compacted:se}));let Ce=$["@type"]||[];Ce.length>1&&(Ce=Array.from(Ce).sort());const be=W;for(const ye of Ce){const Fe=L.compactIri({activeCtx:be,iri:ye,relativeTo:{vocab:!0}}),Be=v(ne,Fe,"@context");e(Be)||(W=await w({activeCtx:W,localCtx:Be,options:fe,propagate:!1}))}const de=Object.keys($).sort();for(const ye of de){const Fe=$[ye];if("@id"!==ye)if("@type"!==ye)if("@reverse"!==ye)if("@preserve"!==ye)if("@index"!==ye)if("@graph"!==ye&&"@list"!==ye&&"@included"!==ye&&f(ye)){const Be=L.compactIri({activeCtx:W,iri:ye,relativeTo:{vocab:!0}});M(se,Be,Fe)}else{if(!a(Fe))throw new q("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===Fe.length){const Be=L.compactIri({activeCtx:W,iri:ye,value:Fe,relativeTo:{vocab:!0},reverse:te}),Ie=W.mappings.has(Be)?W.mappings.get(Be)["@nest"]:null;let Je=se;Ie&&(U(W,Ie,fe),F(se[Ie])||(se[Ie]={}),Je=se[Ie]),M(Je,Be,Fe,{propertyIsArray:!0})}for(const Be of Fe){const Ie=L.compactIri({activeCtx:W,iri:ye,value:Be,relativeTo:{vocab:!0},reverse:te}),Je=W.mappings.has(Ie)?W.mappings.get(Ie)["@nest"]:null;let G=se;Je&&(U(W,Je,fe),F(se[Je])||(se[Je]={}),G=se[Je]);const H=v(W,Ie,"@container")||[],ee=d(Be),pe=o(Be);let Ne;pe?Ne=Be["@list"]:ee&&(Ne=Be["@graph"]);let _e=await L.compact({activeCtx:W,activeProperty:Ie,element:pe||ee?Ne:Be,options:fe,compactionMap:ce});if(pe){if(a(_e)||(_e=[_e]),H.includes("@list")){M(G,Ie,_e,{valueIsArray:!0,allowDuplicate:!0});continue}_e={[L.compactIri({activeCtx:W,iri:"@list",relativeTo:{vocab:!0}})]:_e},"@index"in Be&&(_e[L.compactIri({activeCtx:W,iri:"@index",relativeTo:{vocab:!0}})]=Be["@index"])}if(ee)if(H.includes("@graph")&&(H.includes("@id")||H.includes("@index")&&m(Be))){let Pe;G.hasOwnProperty(Ie)?Pe=G[Ie]:G[Ie]=Pe={};const We=(H.includes("@id")?Be["@id"]:Be["@index"])||L.compactIri({activeCtx:W,iri:"@none",relativeTo:{vocab:!0}});M(Pe,We,_e,{propertyIsArray:!fe.compactArrays||H.includes("@set")})}else H.includes("@graph")&&m(Be)?(a(_e)&&_e.length>1&&(_e={"@included":_e}),M(G,Ie,_e,{propertyIsArray:!fe.compactArrays||H.includes("@set")})):(a(_e)&&1===_e.length&&fe.compactArrays&&(_e=_e[0]),_e={[L.compactIri({activeCtx:W,iri:"@graph",relativeTo:{vocab:!0}})]:_e},"@id"in Be&&(_e[L.compactIri({activeCtx:W,iri:"@id",relativeTo:{vocab:!0}})]=Be["@id"]),"@index"in Be&&(_e[L.compactIri({activeCtx:W,iri:"@index",relativeTo:{vocab:!0}})]=Be["@index"]),M(G,Ie,_e,{propertyIsArray:!fe.compactArrays||H.includes("@set")}));else if(H.includes("@language")||H.includes("@index")||H.includes("@id")||H.includes("@type")){let Pe,We;if(G.hasOwnProperty(Ie)?Pe=G[Ie]:G[Ie]=Pe={},H.includes("@language"))u(_e)&&(_e=_e["@value"]),We=Be["@language"];else if(H.includes("@index")){const Ye=v(W,Ie,"@index")||"@index",mt=L.compactIri({activeCtx:W,iri:Ye,relativeTo:{vocab:!0}});if("@index"===Ye)We=Be["@index"],delete _e[mt];else{let ht;if([We,...ht]=j(_e[Ye]||[]),y(We))switch(ht.length){case 0:delete _e[Ye];break;case 1:_e[Ye]=ht[0];break;default:_e[Ye]=ht}else We=null}}else if(H.includes("@id")){const Ye=L.compactIri({activeCtx:W,iri:"@id",relativeTo:{vocab:!0}});We=_e[Ye],delete _e[Ye]}else if(H.includes("@type")){const Ye=L.compactIri({activeCtx:W,iri:"@type",relativeTo:{vocab:!0}});let mt;switch([We,...mt]=j(_e[Ye]||[]),mt.length){case 0:delete _e[Ye];break;case 1:_e[Ye]=mt[0];break;default:_e[Ye]=mt}1===Object.keys(_e).length&&"@id"in Be&&(_e=await L.compact({activeCtx:W,activeProperty:Ie,element:{"@id":Be["@id"]},options:fe,compactionMap:ce}))}We||(We=L.compactIri({activeCtx:W,iri:"@none",relativeTo:{vocab:!0}})),M(Pe,We,_e,{propertyIsArray:H.includes("@set")})}else{const Pe=!fe.compactArrays||H.includes("@set")||H.includes("@list")||a(_e)&&0===_e.length||"@list"===ye||"@graph"===ye;M(G,Ie,_e,{propertyIsArray:Pe})}}}else{if((v(W,V,"@container")||[]).includes("@index"))continue;const Be=L.compactIri({activeCtx:W,iri:ye,relativeTo:{vocab:!0}});M(se,Be,Fe)}else{const Be=await L.compact({activeCtx:W,activeProperty:V,element:Fe,options:fe,compactionMap:ce});a(Be)&&0===Be.length||M(se,ye,Be)}else{const Be=await L.compact({activeCtx:W,activeProperty:"@reverse",element:Fe,options:fe,compactionMap:ce});for(const Ie in Be)if(W.mappings.has(Ie)&&W.mappings.get(Ie).reverse){const Je=Be[Ie],G=(v(W,Ie,"@container")||[]).includes("@set")||!fe.compactArrays;M(se,Ie,Je,{propertyIsArray:G}),delete Be[Ie]}if(Object.keys(Be).length>0){const Ie=L.compactIri({activeCtx:W,iri:ye,relativeTo:{vocab:!0}});M(se,Ie,Be)}}else{let Be=j(Fe).map(G=>L.compactIri({activeCtx:ne,iri:G,relativeTo:{vocab:!0}}));1===Be.length&&(Be=Be[0]);const Ie=L.compactIri({activeCtx:W,iri:"@type",relativeTo:{vocab:!0}}),Je=(v(W,Ie,"@container")||[]).includes("@set")&&T(W,1.1)||a(Be)&&0===Fe.length;M(se,Ie,Be,{propertyIsArray:Je})}else{let Be=j(Fe).map(Ie=>L.compactIri({activeCtx:W,iri:Ie,relativeTo:{vocab:!1},base:fe.base}));1===Be.length&&(Be=Be[0]),se[L.compactIri({activeCtx:W,iri:"@id",relativeTo:{vocab:!0}})]=Be}}return se}return $},L.compactIri=({activeCtx:W,iri:V,value:$=null,relativeTo:fe={vocab:!1},reverse:ce=!1,base:xe=null})=>{if(null===V)return V;W.isPropertyTermScoped&&W.previousContext&&(W=W.previousContext);const te=W.getInverse();if(f(V)&&V in te&&"@none"in te[V]&&"@type"in te[V]["@none"]&&"@none"in te[V]["@none"]["@type"])return te[V]["@none"]["@type"]["@none"];if(fe.vocab&&V in te){const be=W["@language"]||"@none",de=[];F($)&&"@index"in $&&!("@graph"in $)&&de.push("@index","@index@set"),F($)&&"@preserve"in $&&($=$["@preserve"][0]),d($)?("@index"in $&&de.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in $&&de.push("@graph@id","@graph@id@set"),de.push("@graph","@graph@set","@set"),"@index"in $||de.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in $||de.push("@graph@id","@graph@id@set")):F($)&&!u($)&&de.push("@id","@id@set","@type","@set@type");let ye="@language",Fe="@null";if(ce)ye="@type",Fe="@reverse",de.push("@set");else if(o($)){"@index"in $||de.push("@list");const Ie=$["@list"];if(0===Ie.length)ye="@any",Fe="@none";else{let Je=0===Ie.length?be:null,G=null;for(let H=0;H<Ie.length;++H){const ee=Ie[H];let pe="@none",Ne="@none";if(u(ee)?"@direction"in ee?pe=`${(ee["@language"]||"").toLowerCase()}_${ee["@direction"]}`:"@language"in ee?pe=ee["@language"].toLowerCase():"@type"in ee?Ne=ee["@type"]:pe="@null":Ne="@id",null===Je?Je=pe:pe!==Je&&u(ee)&&(Je="@none"),null===G?G=Ne:Ne!==G&&(G="@none"),"@none"===Je&&"@none"===G)break}Je=Je||"@none","@none"!==(G=G||"@none")?(ye="@type",Fe=G):Fe=Je}}else{if(u($))if("@language"in $&&!("@index"in $)){de.push("@language","@language@set"),Fe=$["@language"];const Ie=$["@direction"];Ie&&(Fe=`${Fe}_${Ie}`)}else"@direction"in $&&!("@index"in $)?Fe=`_${$["@direction"]}`:"@type"in $&&(ye="@type",Fe=$["@type"]);else ye="@type",Fe="@id";de.push("@set")}de.push("@none"),!F($)||"@index"in $||de.push("@index","@index@set"),u($)&&1===Object.keys($).length&&de.push("@language","@language@set");const Be=function(Ie,Je,G,H,ee,pe){null===pe&&(pe="@null");const Ne=[];if(("@id"===pe||"@reverse"===pe)&&F(G)&&"@id"in G){"@reverse"===pe&&Ne.push("@reverse");const Pe=L.compactIri({activeCtx:Ie,iri:G["@id"],relativeTo:{vocab:!0}});Ie.mappings.has(Pe)&&Ie.mappings.get(Pe)&&Ie.mappings.get(Pe)["@id"]===G["@id"]?Ne.push.apply(Ne,["@vocab","@id"]):Ne.push.apply(Ne,["@id","@vocab"])}else{Ne.push(pe);const Pe=Ne.find(We=>We.includes("_"));Pe&&Ne.push(Pe.replace(/^[^_]+_/,"_"))}Ne.push("@none");const _e=Ie.inverse[Je];for(const Pe of H){if(!(Pe in _e))continue;const We=_e[Pe][ee];for(const Ye of Ne)if(Ye in We)return We[Ye]}return null}(W,V,$,de,ye,Fe);if(null!==Be)return Be}if(fe.vocab&&"@vocab"in W){const be=W["@vocab"];if(0===V.indexOf(be)&&V!==be){const de=V.substr(be.length);if(!W.mappings.has(de))return de}}let se=null;const ne=[];let ve=W.fastCurieMap;const Ce=V.length-1;for(let be=0;be<Ce&&V[be]in ve;++be)""in(ve=ve[V[be]])&&ne.push(ve[""][0]);for(let be=ne.length-1;be>=0;--be){const de=ne[be],ye=de.terms;for(const Fe of ye){const Be=Fe+":"+V.substr(de.iri.length);W.mappings.get(Fe)._prefix&&(!W.mappings.has(Be)||null===$&&W.mappings.get(Be)["@id"]===V)&&(null===se||O(Be,se)<0)&&(se=Be)}}if(null!==se)return se;for(const[be,de]of W.mappings)if(de&&de._prefix&&V.startsWith(be+":"))throw new q(`Absolute IRI "${V}" confused with prefix "${be}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:W});return fe.vocab?V:"@base"in W?W["@base"]?E(P(xe,W["@base"]),V):V:E(xe,V)},L.compactValue=({activeCtx:W,activeProperty:V,value:$,options:fe})=>{if(u($)){const se=v(W,V,"@type"),ne=v(W,V,"@language"),ve=v(W,V,"@direction"),Ce=v(W,V,"@container")||[],be="@index"in $&&!Ce.includes("@index");if(!be&&"@none"!==se&&($["@type"]===se||"@language"in $&&$["@language"]===ne&&"@direction"in $&&$["@direction"]===ve||"@language"in $&&$["@language"]===ne||"@direction"in $&&$["@direction"]===ve))return $["@value"];const de=Object.keys($).length,ye=1===de||2===de&&"@index"in $&&!be,Fe="@language"in W,Be=y($["@value"]),Ie=W.mappings.has(V)&&null===W.mappings.get(V)["@language"];if(ye&&"@none"!==se&&(!Fe||!Be||Ie))return $["@value"];const Je={};return be&&(Je[L.compactIri({activeCtx:W,iri:"@index",relativeTo:{vocab:!0}})]=$["@index"]),"@type"in $?Je[L.compactIri({activeCtx:W,iri:"@type",relativeTo:{vocab:!0}})]=L.compactIri({activeCtx:W,iri:$["@type"],relativeTo:{vocab:!0}}):"@language"in $&&(Je[L.compactIri({activeCtx:W,iri:"@language",relativeTo:{vocab:!0}})]=$["@language"]),"@direction"in $&&(Je[L.compactIri({activeCtx:W,iri:"@direction",relativeTo:{vocab:!0}})]=$["@direction"]),Je[L.compactIri({activeCtx:W,iri:"@value",relativeTo:{vocab:!0}})]=$["@value"],Je}const ce=k(W,V,{vocab:!0},fe),xe=v(W,V,"@type"),te=L.compactIri({activeCtx:W,iri:$["@id"],relativeTo:{vocab:"@vocab"===xe},base:fe.base});return"@id"===xe||"@vocab"===xe||"@graph"===ce?te:{[L.compactIri({activeCtx:W,iri:"@id",relativeTo:{vocab:!0}})]:te}}},{"./JsonLdError":32,"./context":39,"./graphTypes":45,"./types":50,"./url":51,"./util":52}],38:[function(J,ie,ue){"use strict";const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a="http://www.w3.org/2001/XMLSchema#";ie.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:q,RDF_LIST:q+"List",RDF_FIRST:q+"first",RDF_REST:q+"rest",RDF_NIL:q+"nil",RDF_TYPE:q+"type",RDF_PLAIN_LITERAL:q+"PlainLiteral",RDF_XML_LITERAL:q+"XMLLiteral",RDF_JSON_LITERAL:q+"JSON",RDF_OBJECT:q+"object",RDF_LANGSTRING:q+"langString",XSD:a,XSD_BOOLEAN:a+"boolean",XSD_DOUBLE:a+"double",XSD_INTEGER:a+"integer",XSD_STRING:a+"string"}},{}],39:[function(J,ie,ue){"use strict";const q=J("./util"),a=J("./JsonLdError"),{isArray:F,isObject:y,isString:e,isUndefined:o}=J("./types"),{isAbsolute:u,isRelative:d,prependBase:m}=J("./url"),{asArray:h,compareShortestLeast:k}=J("./util"),v=new Map,f=/^@[a-zA-Z]+$/,w={};function T(E,P,M,j,O,L){if(null===P||!e(P)||w.isKeyword(P))return P;if(P.match(f))return null;if(j&&j.hasOwnProperty(P)&&!0!==O.get(P)&&w.createTermDefinition({activeCtx:E,localCtx:j,term:P,defined:O,options:L}),(M=M||{}).vocab){const W=E.mappings.get(P);if(null===W)return null;if(y(W)&&"@id"in W)return W["@id"]}const U=P.indexOf(":");if(U>0){const W=P.substr(0,U),V=P.substr(U+1);if("_"===W||0===V.indexOf("//"))return P;j&&j.hasOwnProperty(W)&&w.createTermDefinition({activeCtx:E,localCtx:j,term:W,defined:O,options:L});const $=E.mappings.get(W);if($&&$._prefix)return $["@id"]+V;if(u(P))return P}if(M.vocab&&"@vocab"in E)return E["@vocab"]+P;if(M.base&&"@base"in E){if(E["@base"])return m(m(L.base,E["@base"]),P)}else if(M.base)return m(L.base,P);return P}ie.exports=w,w.process=async({activeCtx:E,localCtx:P,options:M,propagate:j=!0,overrideProtected:O=!1,cycles:L=new Set})=>{if(y(P)&&"@context"in P&&F(P["@context"])&&(P=P["@context"]),0===h(P).length)return E;const U=await M.contextResolver.resolve({activeCtx:E,context:P,documentLoader:M.documentLoader,base:M.base});y(U[0].document)&&"boolean"==typeof U[0].document["@propagate"]&&(j=U[0].document["@propagate"]);let W=E;j||W.previousContext||((W=W.clone()).previousContext=E);for(const V of U){let{document:$}=V;if(E=W,null===$){if(!O&&0!==Object.keys(E.protected).length){const xe=M&&M.protectedMode||"error";if("error"===xe)throw new a("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===xe){console.warn("WARNING: invalid context nullification");const te=V.getProcessed(E);if(te){W=E=te;continue}const se=E;W=E=w.getInitialContext(M).clone();for(const[ne,ve]of Object.entries(se.protected))ve&&(E.mappings[ne]=q.clone(se.mappings[ne]));E.protected=q.clone(se.protected),V.setProcessed(se,W);continue}throw new a("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:P,protectedMode:xe})}W=E=w.getInitialContext(M).clone();continue}const fe=V.getProcessed(E);if(fe){W=E=fe;continue}if(y($)&&"@context"in $&&($=$["@context"]),!y($))throw new a("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:$});W=W.clone();const ce=new Map;if("@version"in $){if(1.1!==$["@version"])throw new a("Unsupported JSON-LD version: "+$["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:$});if(E.processingMode&&"json-ld-1.0"===E.processingMode)throw new a("@version: "+$["@version"]+" not compatible with "+E.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:$});W.processingMode="json-ld-1.1",W["@version"]=$["@version"],ce.set("@version",!0)}if(W.processingMode=W.processingMode||E.processingMode,"@base"in $){let xe=$["@base"];if(null!==xe&&!u(xe)){if(!d(xe))throw new a('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:$});xe=m(W["@base"],xe)}W["@base"]=xe,ce.set("@base",!0)}if("@vocab"in $){const xe=$["@vocab"];if(null===xe)delete W["@vocab"];else{if(!e(xe))throw new a('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:$});if(!u(xe)&&w.processingMode(W,1))throw new a('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:$});W["@vocab"]=T(W,xe,{vocab:!0,base:!0},void 0,void 0,M)}ce.set("@vocab",!0)}if("@language"in $){const xe=$["@language"];if(null===xe)delete W["@language"];else{if(!e(xe))throw new a('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:$});W["@language"]=xe.toLowerCase()}ce.set("@language",!0)}if("@direction"in $){const xe=$["@direction"];if("json-ld-1.0"===E.processingMode)throw new a("Invalid JSON-LD syntax; @direction not compatible with "+E.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:$});if(null===xe)delete W["@direction"];else{if("ltr"!==xe&&"rtl"!==xe)throw new a('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:$});W["@direction"]=xe}ce.set("@direction",!0)}if("@propagate"in $){const xe=$["@propagate"];if("json-ld-1.0"===E.processingMode)throw new a("Invalid JSON-LD syntax; @propagate not compatible with "+E.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:$});if("boolean"!=typeof xe)throw new a("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:P});ce.set("@propagate",!0)}if("@import"in $){const xe=$["@import"];if("json-ld-1.0"===E.processingMode)throw new a("Invalid JSON-LD syntax; @import not compatible with "+E.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:$});if(!e(xe))throw new a("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:P});const te=await M.contextResolver.resolve({activeCtx:E,context:xe,documentLoader:M.documentLoader,base:M.base});if(1!==te.length)throw new a("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:P});const se=te[0].getProcessed(E);if(se)$=se;else{const ne=te[0].document;if("@import"in ne)throw new a("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:P});for(const ve in ne)$.hasOwnProperty(ve)||($[ve]=ne[ve]);te[0].setProcessed(E,$)}ce.set("@import",!0)}ce.set("@protected",$["@protected"]||!1);for(const xe in $)if(w.createTermDefinition({activeCtx:W,localCtx:$,term:xe,defined:ce,options:M,overrideProtected:O}),y($[xe])&&"@context"in $[xe]){const te=$[xe]["@context"];let se=!0;if(e(te)){const ne=m(M.base,te);L.has(ne)?se=!1:L.add(ne)}if(se)try{await w.process({activeCtx:W.clone(),localCtx:$[xe]["@context"],overrideProtected:!0,options:M,cycles:L})}catch(ne){throw new a("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:$[xe]["@context"],term:xe})}}V.setProcessed(E,W)}return W},w.createTermDefinition=({activeCtx:E,localCtx:P,term:M,defined:j,options:O,overrideProtected:L=!1})=>{if(j.has(M)){if(j.get(M))return;throw new a("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:P,term:M})}let U;if(j.set(M,!1),P.hasOwnProperty(M)&&(U=P[M]),"@type"===M&&y(U)&&"@set"===(U["@container"]||"@set")&&w.processingMode(E,1.1)){const te=["@container","@id","@protected"],se=Object.keys(U);if(0===se.length||se.some(ne=>!te.includes(ne)))throw new a("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:P,term:M})}else{if(w.isKeyword(M))throw new a("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:P,term:M});if(M.match(f))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:M});if(""===M)throw new a("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:P})}const W=E.mappings.get(M);E.mappings.has(M)&&E.mappings.delete(M);let V=!1;if((e(U)||null===U)&&(V=!0,U={"@id":U}),!y(U))throw new a("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:P});const $={};E.mappings.set(M,$),$.reverse=!1;const fe=["@container","@id","@language","@reverse","@type"];w.processingMode(E,1.1)&&fe.push("@context","@direction","@index","@nest","@prefix","@protected");for(const te in U)if(!fe.includes(te))throw new a("Invalid JSON-LD syntax; a term definition must not contain "+te,"jsonld.SyntaxError",{code:"invalid term definition",context:P});const ce=M.indexOf(":");if($._termHasColon=ce>0,"@reverse"in U){if("@id"in U)throw new a("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});if("@nest"in U)throw new a("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});const te=U["@reverse"];if(!e(te))throw new a("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(!w.isKeyword(te)&&te.match(f))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:te}),void(W?E.mappings.set(M,W):E.mappings.delete(M));const se=T(E,te,{vocab:!0,base:!1},P,j,O);if(!u(se))throw new a("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});$["@id"]=se,$.reverse=!0}else if("@id"in U){let te=U["@id"];if(te&&!e(te))throw new a("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(null===te)$["@id"]=null;else{if(!w.isKeyword(te)&&te.match(f))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:te}),void(W?E.mappings.set(M,W):E.mappings.delete(M));if(te!==M){if(te=T(E,te,{vocab:!0,base:!1},P,j,O),!u(te)&&!w.isKeyword(te))throw new a("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});if(M.match(/(?::[^:])|\//)&&T(E,M,{vocab:!0,base:!1},P,new Map(j).set(M,!0),O)!==te)throw new a("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P});$["@id"]=te,$._prefix=V&&!$._termHasColon&&te.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in $))if($._termHasColon){const te=M.substr(0,ce);if(P.hasOwnProperty(te)&&w.createTermDefinition({activeCtx:E,localCtx:P,term:te,defined:j,options:O}),E.mappings.has(te)){const se=M.substr(ce+1);$["@id"]=E.mappings.get(te)["@id"]+se}else $["@id"]=M}else if("@type"===M)$["@id"]=M;else{if(!("@vocab"in E))throw new a("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:P,term:M});$["@id"]=E["@vocab"]+M}if((!0===U["@protected"]||!0===j.get("@protected")&&!1!==U["@protected"])&&(E.protected[M]=!0,$.protected=!0),j.set(M,!0),"@type"in U){let te=U["@type"];if(!e(te))throw new a("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:P});if("@json"===te||"@none"===te){if(w.processingMode(E,1))throw new a(`Invalid JSON-LD syntax; an @context @type value must not be "${te}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:P})}else if("@id"!==te&&"@vocab"!==te){if(te=T(E,te,{vocab:!0,base:!1},P,j,O),!u(te))throw new a("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:P});if(0===te.indexOf("_:"))throw new a("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:P})}$["@type"]=te}if("@container"in U){const te=e(U["@container"])?[U["@container"]]:U["@container"]||[],se=["@list","@set","@index","@language"];let ne=!0;const ve=te.includes("@set");if(w.processingMode(E,1.1)){if(se.push("@graph","@id","@type"),te.includes("@list")){if(1!==te.length)throw new a("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:P})}else if(te.includes("@graph")){if(te.some(Ce=>"@graph"!==Ce&&"@id"!==Ce&&"@index"!==Ce&&"@set"!==Ce))throw new a("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:P})}else ne&=te.length<=(ve?2:1);if(te.includes("@type")&&($["@type"]=$["@type"]||"@id",!["@id","@vocab"].includes($["@type"])))throw new a("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:P})}else ne&=!F(U["@container"]),ne&=te.length<=1;if(ne&=te.every(Ce=>se.includes(Ce)),!(ne&=!(ve&&te.includes("@list"))))throw new a("Invalid JSON-LD syntax; @context @container value must be one of the following: "+se.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:P});if($.reverse&&!te.every(Ce=>["@index","@set"].includes(Ce)))throw new a("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:P});$["@container"]=te}if("@index"in U){if(!("@container"in U)||!$["@container"].includes("@index"))throw new a(`Invalid JSON-LD syntax; @index without @index in @container: "${U["@index"]}" on term "${M}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:P});if(!e(U["@index"])||0===U["@index"].indexOf("@"))throw new a(`Invalid JSON-LD syntax; @index must expand to an IRI: "${U["@index"]}" on term "${M}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:P});$["@index"]=U["@index"]}if("@context"in U&&($["@context"]=U["@context"]),"@language"in U&&!("@type"in U)){let te=U["@language"];if(null!==te&&!e(te))throw new a("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:P});null!==te&&(te=te.toLowerCase()),$["@language"]=te}if("@prefix"in U){if(M.match(/:|\//))throw new a("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:P});if(w.isKeyword($["@id"]))throw new a("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:P});if("boolean"!=typeof U["@prefix"])throw new a("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:P});$._prefix=!0===U["@prefix"]}if("@direction"in U){const te=U["@direction"];if(null!==te&&"ltr"!==te&&"rtl"!==te)throw new a('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:P});$["@direction"]=te}if("@nest"in U){const te=U["@nest"];if(!e(te)||"@nest"!==te&&0===te.indexOf("@"))throw new a("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:P});$["@nest"]=te}const xe=$["@id"];if("@context"===xe||"@preserve"===xe)throw new a("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:P});if(W&&W.protected&&!L&&(E.protected[M]=!0,$.protected=!0,!function te(se,ne){if(!se||"object"!=typeof se||!ne||"object"!=typeof ne)return se===ne;const ve=Array.isArray(se);if(ve!==Array.isArray(ne))return!1;if(ve){if(se.length!==ne.length)return!1;for(let de=0;de<se.length;++de)if(!te(se[de],ne[de]))return!1;return!0}const Ce=Object.keys(se),be=Object.keys(ne);if(Ce.length!==be.length)return!1;for(const de in se){let ye=se[de],Fe=ne[de];if("@container"===de&&Array.isArray(ye)&&Array.isArray(Fe)&&(ye=ye.slice().sort(),Fe=Fe.slice().sort()),!te(ye,Fe))return!1}return!0}(W,$))){const te=O&&O.protectedMode||"error";if("error"===te)throw new a(`Invalid JSON-LD syntax; tried to redefine "${M}" which is a protected term.`,"jsonld.SyntaxError",{code:"protected term redefinition",context:P,term:M});if("warn"===te)return void console.warn("WARNING: protected term redefinition",{term:M});throw new a("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:P,term:M,protectedMode:te})}},w.expandIri=(E,P,M,j)=>T(E,P,M,void 0,void 0,j),w.getInitialContext=E=>{const P=JSON.stringify({processingMode:E.processingMode}),M=v.get(P);if(M)return M;const j={processingMode:E.processingMode,mappings:new Map,inverse:null,getInverse:function(){const U=this;if(U.inverse)return U.inverse;const W=U.inverse={},V=U.fastCurieMap={},$={},fe=(U["@language"]||"@none").toLowerCase(),ce=U["@direction"],xe=U.mappings,te=[...xe.keys()].sort(k);for(const se of te){const ne=xe.get(se);if(null===ne)continue;let ve=ne["@container"]||"@none";if(ve=[].concat(ve).sort().join(""),null===ne["@id"])continue;const Ce=h(ne["@id"]);for(const be of Ce){let de=W[be];const ye=w.isKeyword(be);if(de)ye||ne._termHasColon||$[be].push(se);else if(W[be]=de={},!ye&&!ne._termHasColon){$[be]=[se];const Fe={iri:be,terms:$[be]};be[0]in V?V[be[0]].push(Fe):V[be[0]]=[Fe]}if(de[ve]||(de[ve]={"@language":{},"@type":{},"@any":{}}),de=de[ve],L(se,de["@any"],"@none"),ne.reverse)L(se,de["@type"],"@reverse");else if("@none"===ne["@type"])L(se,de["@any"],"@none"),L(se,de["@language"],"@none"),L(se,de["@type"],"@none");else if("@type"in ne)L(se,de["@type"],ne["@type"]);else if("@language"in ne&&"@direction"in ne){const Fe=ne["@language"],Be=ne["@direction"];L(se,de["@language"],Fe&&Be?`${Fe}_${Be}`.toLowerCase():Fe?Fe.toLowerCase():Be?`_${Be}`:"@null")}else"@language"in ne?L(se,de["@language"],(ne["@language"]||"@null").toLowerCase()):"@direction"in ne?ne["@direction"]?L(se,de["@language"],`_${ne["@direction"]}`):L(se,de["@language"],"@none"):ce?(L(se,de["@language"],`_${ce}`),L(se,de["@language"],"@none"),L(se,de["@type"],"@none")):(L(se,de["@language"],fe),L(se,de["@language"],"@none"),L(se,de["@type"],"@none"))}}for(const se in V)O(V,se,1);return W},clone:function(){const U={};return U.mappings=q.clone(this.mappings),U.clone=this.clone,U.inverse=null,U.getInverse=this.getInverse,U.protected=q.clone(this.protected),this.previousContext&&(U.previousContext=this.previousContext.clone()),U.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(U["@base"]=this["@base"]),"@language"in this&&(U["@language"]=this["@language"]),"@vocab"in this&&(U["@vocab"]=this["@vocab"]),U},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===v.size&&v.clear(),v.set(P,j),j;function O(U,W,V){const $=U[W],fe=U[W]={};let ce,xe;for(const te of $)(xe=V>=(ce=te.iri).length?"":ce[V])in fe?fe[xe].push(te):fe[xe]=[te];for(const te in fe)""!==te&&O(fe,te,V+1)}function L(U,W,V){W.hasOwnProperty(V)||(W[V]=U)}},w.getContextValue=(E,P,M)=>{if(null===P)return"@context"===M?void 0:null;if(E.mappings.has(P)){const j=E.mappings.get(P);if(o(M))return j;if(j.hasOwnProperty(M))return j[M]}return"@language"===M&&M in E||"@direction"===M&&M in E?E[M]:"@context"!==M?null:void 0},w.processingMode=(E,P)=>P.toString()>="1.1"?!E.processingMode||E.processingMode>="json-ld-"+P.toString():"json-ld-1.0"===E.processingMode,w.isKeyword=E=>{if(!e(E)||"@"!==E[0])return!1;switch(E){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},{"./JsonLdError":32,"./types":50,"./url":51,"./util":52}],40:[function(J,ie,ue){"use strict";const{parseLinkHeader:q,buildHeaders:a}=J("../util"),{LINK_HEADER_CONTEXT:F}=J("../constants"),y=J("../JsonLdError"),e=J("../RequestQueue"),{prependBase:o}=J("../url"),u=/(^|(\r\n))link:/i;ie.exports=({secure:d,headers:m={},xhr:h}={headers:{}})=>(m=a(m),(new e).wrapLoader(async function k(v){if(0!==v.indexOf("http:")&&0!==v.indexOf("https:"))throw new y('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:v});if(d&&0!==v.indexOf("https"))throw new y('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:v});let f;try{f=await function(M,j,O){const L=new(M=M||XMLHttpRequest);return new Promise((U,W)=>{L.onload=()=>U(L),L.onerror=V=>W(V),L.open("GET",j,!0);for(const V in O)L.setRequestHeader(V,O[V]);L.send()})}(h,v,m)}catch(M){throw new y("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:v,cause:M})}if(f.status>=400)throw new y("URL could not be dereferenced: "+f.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:v,httpStatusCode:f.status});let w={contextUrl:null,documentUrl:v,document:f.response},T=null;const E=f.getResponseHeader("Content-Type");let P;if(u.test(f.getAllResponseHeaders())&&(P=f.getResponseHeader("Link")),P&&"application/ld+json"!==E){const M=q(P),j=M[F];if(Array.isArray(j))throw new y("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:v});j&&(w.contextUrl=j.target),(T=M.alternate)&&"application/ld+json"==T.type&&!(E||"").match(/^application\/(\w*\+)?json$/)&&(w=await k(o(v,T.target)))}return w}))},{"../JsonLdError":32,"../RequestQueue":35,"../constants":38,"../url":51,"../util":52}],41:[function(J,ie,ue){"use strict";const q=J("./JsonLdError"),{isArray:a,isObject:F,isEmptyObject:y,isString:e,isUndefined:o}=J("./types"),{isList:u,isValue:d,isGraph:m,isSubject:h}=J("./graphTypes"),{expandIri:k,getContextValue:v,isKeyword:f,process:w,processingMode:T}=J("./context"),{isAbsolute:E}=J("./url"),{addValue:P,asArray:M,getValues:j,validateTypeValue:O}=J("./util"),L={};ie.exports=L;const U=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;function W({activeCtx:fe,activeProperty:ce,value:xe,options:te}){if(null==xe)return null;const se=k(fe,ce,{vocab:!0},te);if("@id"===se)return k(fe,xe,{base:!0},te);if("@type"===se)return k(fe,xe,{vocab:!0,base:!0},te);const ne=v(fe,ce,"@type");if(("@id"===ne||"@graph"===se)&&e(xe))return{"@id":k(fe,xe,{base:!0},te)};if("@vocab"===ne&&e(xe))return{"@id":k(fe,xe,{vocab:!0,base:!0},te)};if(f(se))return xe;const ve={};if(ne&&!["@id","@vocab","@none"].includes(ne))ve["@type"]=ne;else if(e(xe)){const Ce=v(fe,ce,"@language");null!==Ce&&(ve["@language"]=Ce);const be=v(fe,ce,"@direction");null!==be&&(ve["@direction"]=be)}return["boolean","number","string"].includes(typeof xe)||(xe=xe.toString()),ve["@value"]=xe,ve}function V(fe,ce,xe,te){const se=[],ne=Object.keys(ce).sort();for(const ve of ne){const Ce=k(fe,ve,{vocab:!0},te);let be=ce[ve];a(be)||(be=[be]);for(const de of be){if(null===de)continue;if(!e(de))throw new q("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:ce});const ye={"@value":de};"@none"!==Ce&&(ye["@language"]=ve.toLowerCase()),xe&&(ye["@direction"]=xe),se.push(ye)}}return se}async function $({activeCtx:fe,options:ce,activeProperty:xe,value:te,expansionMap:se,asGraph:ne,indexKey:ve,propertyIndex:Ce}){const be=[],de=Object.keys(te).sort(),ye="@type"===ve;for(let Fe of de){if(ye){const Je=v(fe,Fe,"@context");o(Je)||(fe=await w({activeCtx:fe,localCtx:Je,propagate:!1,options:ce}))}let Be,Ie=te[Fe];a(Ie)||(Ie=[Ie]),Ie=await L.expand({activeCtx:fe,activeProperty:xe,element:Ie,options:ce,insideList:!1,insideIndex:!0,expansionMap:se}),Be=Ce?"@none"===Fe?"@none":W({activeCtx:fe,activeProperty:ve,value:Fe,options:ce}):k(fe,Fe,{vocab:!0},ce),"@id"===ve?Fe=k(fe,Fe,{base:!0},ce):ye&&(Fe=Be);for(let Je of Ie){if(ne&&!m(Je)&&(Je={"@graph":[Je]}),"@type"===ve)"@none"===Be||(Je["@type"]?Je["@type"]=[Fe].concat(Je["@type"]):Je["@type"]=[Fe]);else{if(d(Je)&&!["@language","@type","@index"].includes(ve))throw new q(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${ve}".`,"jsonld.SyntaxError",{code:"invalid value object",value:Je});Ce?"@none"!==Be&&P(Je,Ce,Be,{propertyIsArray:!0,prependValue:!0}):"@none"===Be||ve in Je||(Je[ve]=Fe)}be.push(Je)}}return be}L.expand=async({activeCtx:fe,activeProperty:ce=null,element:xe,options:te={},insideList:se=!1,insideIndex:ne=!1,typeScopedContext:ve=null,expansionMap:Ce=(()=>{})})=>{if(null==xe)return null;if("@default"===ce&&(te=Object.assign({},te,{isFrame:!1})),!a(xe)&&!F(xe)){if(!se&&(null===ce||"@graph"===k(fe,ce,{vocab:!0},te))){const G=await Ce({unmappedValue:xe,activeCtx:fe,activeProperty:ce,options:te,insideList:se});return void 0===G?null:G}return W({activeCtx:fe,activeProperty:ce,value:xe,options:te})}if(a(xe)){let G=[];const H=v(fe,ce,"@container")||[];se=se||H.includes("@list");for(let ee=0;ee<xe.length;++ee){let pe=await L.expand({activeCtx:fe,activeProperty:ce,element:xe[ee],options:te,expansionMap:Ce,insideIndex:ne,typeScopedContext:ve});se&&a(pe)&&(pe={"@list":pe}),null===pe&&void 0===(pe=await Ce({unmappedValue:xe[ee],activeCtx:fe,activeProperty:ce,parent:xe,index:ee,options:te,expandedParent:G,insideList:se}))||(a(pe)?G=G.concat(pe):G.push(pe))}return G}const be=k(fe,ce,{vocab:!0},te),de=v(fe,ce,"@context");ve=ve||(fe.previousContext?fe:null);let ye=Object.keys(xe).sort(),Fe=!ne;if(Fe&&ve&&ye.length<=2&&!ye.includes("@context"))for(const G of ye){const H=k(ve,G,{vocab:!0},te);if("@value"===H){Fe=!1,fe=ve;break}if("@id"===H&&1===ye.length){Fe=!1;break}}Fe&&(fe=fe.revertToPreviousContext()),o(de)||(fe=await w({activeCtx:fe,localCtx:de,propagate:!0,overrideProtected:!0,options:te})),"@context"in xe&&(fe=await w({activeCtx:fe,localCtx:xe["@context"],options:te})),ve=fe;let Be=null;for(const G of ye)if("@type"===k(fe,G,{vocab:!0},te)){Be=Be||G;const H=xe[G],ee=Array.isArray(H)?H.length>1?H.slice().sort():H:[H];for(const pe of ee){const Ne=v(ve,pe,"@context");o(Ne)||(fe=await w({activeCtx:fe,localCtx:Ne,options:te,propagate:!1}))}}let Ie={};await async function G({activeCtx:H,activeProperty:ee,expandedActiveProperty:pe,element:Ne,expandedParent:_e,options:Pe={},insideList:We,typeKey:Ye,typeScopedContext:mt,expansionMap:ht}){const Gt=Object.keys(Ne).sort(),Xt=[];let Te;const Re=Ne[Ye]&&"@json"===k(H,a(Ne[Ye])?Ne[Ye][0]:Ne[Ye],{vocab:!0},Pe);for(const je of Gt){let K,oe=Ne[je];if("@context"===je)continue;let he=k(H,je,{vocab:!0},Pe);if((null===he||!E(he)&&!f(he))&&void 0===(he=ht({unmappedProperty:je,activeCtx:H,activeProperty:ee,parent:Ne,options:Pe,insideList:We,value:oe,expandedParent:_e})))continue;if(f(he)){if("@reverse"===pe)throw new q("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:oe});if(he in _e&&"@included"!==he&&"@type"!==he)throw new q("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:he})}if("@id"===he){if(!e(oe)){if(!Pe.isFrame)throw new q('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:oe});if(F(oe)){if(!y(oe))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:oe})}else{if(!a(oe))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:oe});if(!oe.every(ke=>e(ke)))throw new q('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:oe})}}P(_e,"@id",M(oe).map(ke=>e(ke)?k(H,ke,{base:!0},Pe):ke),{propertyIsArray:Pe.isFrame});continue}if("@type"===he){F(oe)&&(oe=Object.fromEntries(Object.entries(oe).map(([ke,De])=>[k(mt,ke,{vocab:!0}),M(De).map(He=>k(mt,He,{base:!0,vocab:!0}))]))),O(oe,Pe.isFrame),P(_e,"@type",M(oe).map(ke=>e(ke)?k(mt,ke,{base:!0,vocab:!0},Pe):ke),{propertyIsArray:Pe.isFrame});continue}if("@included"===he&&T(H,1.1)){const ke=M(await L.expand({activeCtx:H,activeProperty:ee,element:oe,options:Pe,expansionMap:ht}));if(!ke.every(De=>h(De)))throw new q("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:oe});P(_e,"@included",ke,{propertyIsArray:!0});continue}if("@graph"===he&&!F(oe)&&!a(oe))throw new q('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:oe});if("@value"===he){Te=oe,Re&&T(H,1.1)?_e["@value"]=oe:P(_e,"@value",oe,{propertyIsArray:Pe.isFrame});continue}if("@language"===he){if(null===oe)continue;if(!e(oe)&&!Pe.isFrame)throw new q('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:oe});oe=M(oe).map(ke=>e(ke)?ke.toLowerCase():ke);for(const ke of oe)e(ke)&&!ke.match(U)&&console.warn(`@language must be valid BCP47: ${ke}`);P(_e,"@language",oe,{propertyIsArray:Pe.isFrame});continue}if("@direction"===he){if(!e(oe)&&!Pe.isFrame)throw new q('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:oe});oe=M(oe);for(const ke of oe)if(e(ke)&&"ltr"!==ke&&"rtl"!==ke)throw new q('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:oe});P(_e,"@direction",oe,{propertyIsArray:Pe.isFrame});continue}if("@index"===he){if(!e(oe))throw new q('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:oe});P(_e,"@index",oe);continue}if("@reverse"===he){if(!F(oe))throw new q('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:oe});if("@reverse"in(K=await L.expand({activeCtx:H,activeProperty:"@reverse",element:oe,options:Pe,expansionMap:ht})))for(const De in K["@reverse"])P(_e,De,K["@reverse"][De],{propertyIsArray:!0});let ke=_e["@reverse"]||null;for(const De in K){if("@reverse"===De)continue;null===ke&&(ke=_e["@reverse"]={}),P(ke,De,[],{propertyIsArray:!0});const He=K[De];for(let $e=0;$e<He.length;++$e){const Xe=He[$e];if(d(Xe)||u(Xe))throw new q('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:K});P(ke,De,Xe,{propertyIsArray:!0})}}continue}if("@nest"===he){Xt.push(je);continue}let me=H;const Le=v(H,je,"@context");o(Le)||(me=await w({activeCtx:H,localCtx:Le,propagate:!0,overrideProtected:!0,options:Pe}));const Se=v(me,je,"@container")||[];if(Se.includes("@language")&&F(oe)){K=V(me,oe,v(me,je,"@direction"),Pe)}else if(Se.includes("@index")&&F(oe)){const ke=Se.includes("@graph"),De=v(me,je,"@index")||"@index",He="@index"!==De&&k(H,De,{vocab:!0},Pe);K=await $({activeCtx:me,options:Pe,activeProperty:je,value:oe,expansionMap:ht,asGraph:ke,indexKey:De,propertyIndex:He})}else if(Se.includes("@id")&&F(oe)){const ke=Se.includes("@graph");K=await $({activeCtx:me,options:Pe,activeProperty:je,value:oe,expansionMap:ht,asGraph:ke,indexKey:"@id"})}else if(Se.includes("@type")&&F(oe))K=await $({activeCtx:me.revertToPreviousContext(),options:Pe,activeProperty:je,value:oe,expansionMap:ht,asGraph:!1,indexKey:"@type"});else{const ke="@list"===he;if(ke||"@set"===he){let De=ee;ke&&"@graph"===pe&&(De=null),K=await L.expand({activeCtx:me,activeProperty:De,element:oe,options:Pe,insideList:ke,expansionMap:ht})}else K="@json"===v(H,je,"@type")?{"@type":"@json","@value":oe}:await L.expand({activeCtx:me,activeProperty:je,element:oe,options:Pe,insideList:!1,expansionMap:ht})}if(null!==K||"@value"===he||void 0!==(K=ht({unmappedValue:oe,expandedProperty:he,activeCtx:me,activeProperty:ee,parent:Ne,options:Pe,insideList:We,key:je,expandedParent:_e})))if("@list"!==he&&!u(K)&&Se.includes("@list")&&(K={"@list":M(K)}),Se.includes("@graph")&&!Se.some(ke=>"@id"===ke||"@index"===ke)&&(K=M(K).map(ke=>({"@graph":M(ke)}))),me.mappings.has(je)&&me.mappings.get(je).reverse){const ke=_e["@reverse"]=_e["@reverse"]||{};K=M(K);for(let De=0;De<K.length;++De){const He=K[De];if(d(He)||u(He))throw new q('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:K});P(ke,he,He,{propertyIsArray:!0})}}else P(_e,he,K,{propertyIsArray:!0})}if("@value"in _e&&("@json"!==_e["@type"]||!T(H,1.1))&&(F(Te)||a(Te))&&!Pe.isFrame)throw new q('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Te});for(const je of Xt){const K=a(Ne[je])?Ne[je]:[Ne[je]];for(const oe of K){if(!F(oe)||Object.keys(oe).some(he=>"@value"===k(H,he,{vocab:!0},Pe)))throw new q("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:oe});await G({activeCtx:H,activeProperty:ee,expandedActiveProperty:pe,element:oe,expandedParent:_e,options:Pe,insideList:We,typeScopedContext:mt,typeKey:Ye,expansionMap:ht})}}}({activeCtx:fe,activeProperty:ce,expandedActiveProperty:be,element:xe,expandedParent:Ie,options:te,insideList:se,typeKey:Be,typeScopedContext:ve,expansionMap:Ce});let Je=(ye=Object.keys(Ie)).length;if("@value"in Ie){if("@type"in Ie&&("@language"in Ie||"@direction"in Ie))throw new q('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Ie});let G=Je-1;if("@type"in Ie&&(G-=1),"@index"in Ie&&(G-=1),"@language"in Ie&&(G-=1),"@direction"in Ie&&(G-=1),0!==G)throw new q('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Ie});const H=null===Ie["@value"]?[]:M(Ie["@value"]),ee=j(Ie,"@type");if(!T(fe,1.1)||!ee.includes("@json")||1!==ee.length)if(0===H.length){const pe=await Ce({unmappedValue:Ie,activeCtx:fe,activeProperty:ce,element:xe,options:te,insideList:se});Ie=void 0!==pe?pe:null}else{if(!H.every(pe=>e(pe)||y(pe))&&"@language"in Ie)throw new q("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Ie});if(!ee.every(pe=>E(pe)&&!(e(pe)&&0===pe.indexOf("_:"))||y(pe)))throw new q('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Ie})}}else if("@type"in Ie&&!a(Ie["@type"]))Ie["@type"]=[Ie["@type"]];else if("@set"in Ie||"@list"in Ie){if(Je>1&&(2!==Je||!("@index"in Ie)))throw new q('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Ie});"@set"in Ie&&(Ie=Ie["@set"],Je=(ye=Object.keys(Ie)).length)}else if(1===Je&&"@language"in Ie){const G=await Ce(Ie,{unmappedValue:Ie,activeCtx:fe,activeProperty:ce,element:xe,options:te,insideList:se});Ie=void 0!==G?G:null}if(F(Ie)&&!te.keepFreeFloatingNodes&&!se&&(null===ce||"@graph"===be)&&(0===Je||"@value"in Ie||"@list"in Ie||1===Je&&"@id"in Ie)){const G=await Ce({unmappedValue:Ie,activeCtx:fe,activeProperty:ce,element:xe,options:te,insideList:se});Ie=void 0!==G?G:null}return Ie}},{"./JsonLdError":32,"./context":39,"./graphTypes":45,"./types":50,"./url":51,"./util":52}],42:[function(J,ie,ue){"use strict";const{isSubjectReference:q}=J("./graphTypes"),{createMergedNodeMap:a}=J("./nodeMap"),F={};ie.exports=F,F.flatten=y=>{const e=a(y),o=[],u=Object.keys(e).sort();for(let d=0;d<u.length;++d){const m=e[u[d]];q(m)||o.push(m)}return o}},{"./graphTypes":45,"./nodeMap":47}],43:[function(J,ie,ue){"use strict";const{isKeyword:q}=J("./context"),a=J("./graphTypes"),F=J("./types"),y=J("./util"),e=J("./url"),o=J("./JsonLdError"),{createNodeMap:u,mergeNodeMapGraphs:d}=J("./nodeMap"),m={};function h(j){const O={};for(const L in j)void 0!==j[L]&&(O["@"+L]=[j[L]]);return[O]}function k(j,O,L){for(let U=L.length-1;U>=0;--U){const W=L[U];if(W.graph===O&&W.subject["@id"]===j["@id"])return!0}return!1}function v(j,O,L){const U="@"+L;let W=U in j?j[U][0]:O[L];if("embed"===L)if(!0===W)W="@once";else if(!1===W)W="@never";else if("@always"!==W&&"@never"!==W&&"@link"!==W&&"@first"!==W&&"@last"!==W&&"@once"!==W)throw new o("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:j});return W}function f(j){if(!F.isArray(j)||1!==j.length||!F.isObject(j[0]))throw new o("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:j});if("@id"in j[0])for(const O of y.asArray(j[0]["@id"]))if(!F.isObject(O)&&!e.isAbsolute(O)||F.isString(O)&&0===O.indexOf("_:"))throw new o("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:j});if("@type"in j[0])for(const O of y.asArray(j[0]["@type"]))if(!F.isObject(O)&&!e.isAbsolute(O)||F.isString(O)&&0===O.indexOf("_:"))throw new o("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:j})}function w(j,O,L,U){let W=!0,V=!1;for(const $ in L){let fe=!1;const ce=y.getValues(O,$),xe=0===y.getValues(L,$).length;if("@id"===$){if(F.isEmptyObject(L["@id"][0]||{})?fe=!0:L["@id"].length>=0&&(fe=L["@id"].includes(ce[0])),!U.requireAll)return fe}else if("@type"===$){if(W=!1,xe){if(ce.length>0)return!1;fe=!0}else if(1===L["@type"].length&&F.isEmptyObject(L["@type"][0]))fe=ce.length>0;else for(const te of L["@type"])fe=!(!F.isObject(te)||!("@default"in te))||fe||ce.some(se=>se===te);if(!U.requireAll)return fe}else{if(q($))continue;{const te=y.getValues(L,$)[0];let se=!1;if(te&&(f([te]),se="@default"in te),W=!1,0===ce.length&&se)continue;if(ce.length>0&&xe)return!1;if(void 0===te){if(ce.length>0)return!1;fe=!0}else if(a.isList(te)){const ne=te["@list"][0];if(a.isList(ce[0])){const ve=ce[0]["@list"];a.isValue(ne)?fe=ve.some(Ce=>M(ne,Ce)):(a.isSubject(ne)||a.isSubjectReference(ne))&&(fe=ve.some(Ce=>P(j,ne,Ce,U)))}}else fe=a.isValue(te)?ce.some(ne=>M(te,ne)):a.isSubjectReference(te)?ce.some(ne=>P(j,te,ne,U)):!!F.isObject(te)&&ce.length>0}}if(!fe&&U.requireAll)return!1;V=V||fe}return W||V}function T(j,O){const L=j.uniqueEmbeds[j.graph],U=L[O],W=U.parent,V=U.property,$={"@id":O};if(F.isArray(W)){for(let ce=0;ce<W.length;++ce)if(y.compareValues(W[ce],$)){W[ce]=$;break}}else{const ce=F.isArray(W[V]);y.removeValue(W,V,$,{propertyIsArray:ce}),y.addValue(W,V,$,{propertyIsArray:ce})}const fe=ce=>{const xe=Object.keys(L);for(const te of xe)te in L&&F.isObject(L[te].parent)&&L[te].parent["@id"]===ce&&(delete L[te],fe(te))};fe(O)}function E(j,O,L){F.isObject(j)?y.addValue(j,O,L,{propertyIsArray:!0}):j.push(L)}function P(j,O,L,U){if(!("@id"in L))return!1;const W=j.subjects[L["@id"]];return W&&w(j,W,O,U)}function M(j,O){const L=O["@value"],U=O["@type"],W=O["@language"],V=j["@value"]?F.isArray(j["@value"])?j["@value"]:[j["@value"]]:[],$=j["@type"]?F.isArray(j["@type"])?j["@type"]:[j["@type"]]:[],fe=j["@language"]?F.isArray(j["@language"])?j["@language"]:[j["@language"]]:[];return 0===V.length&&0===$.length&&0===fe.length||!(!V.includes(L)&&!F.isEmptyObject(V[0]))&&!!(!U&&0===$.length||$.includes(U)||U&&F.isEmptyObject($[0]))&&!!(!W&&0===fe.length||fe.includes(W)||W&&F.isEmptyObject(fe[0]))}ie.exports=m,m.frameMergedOrDefault=(j,O,L)=>{const U={options:L,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},W=new y.IdentifierIssuer("_:b");u(j,U.graphMap,"@default",W),L.merged&&(U.graphMap["@merged"]=d(U.graphMap),U.graph="@merged"),U.subjects=U.graphMap[U.graph];const V=[];return m.frame(U,Object.keys(U.subjects).sort(),O,V),L.pruneBlankNodeIdentifiers&&(L.bnodesToClear=Object.keys(U.bnodeMap).filter($=>1===U.bnodeMap[$].length)),L.link={},function $(fe,ce){if(F.isArray(fe))return fe.map(xe=>$(xe,ce));if(F.isObject(fe)){if("@preserve"in fe)return fe["@preserve"][0];if(a.isValue(fe))return fe;if(a.isList(fe))return fe["@list"]=$(fe["@list"],ce),fe;if("@id"in fe){const xe=fe["@id"];if(ce.link.hasOwnProperty(xe)){const te=ce.link[xe].indexOf(fe);if(-1!==te)return ce.link[xe][te];ce.link[xe].push(fe)}else ce.link[xe]=[fe]}for(const xe in fe)"@id"===xe&&ce.bnodesToClear.includes(fe[xe])?delete fe["@id"]:fe[xe]=$(fe[xe],ce)}return fe}(V,L)},m.frame=(j,O,L,U,W=null)=>{f(L),L=L[0];const V=j.options,$={embed:v(L,V,"embed"),explicit:v(L,V,"explicit"),requireAll:v(L,V,"requireAll")};j.link.hasOwnProperty(j.graph)||(j.link[j.graph]={});const fe=j.link[j.graph],ce=function(te,se,ne,ve){const Ce={};for(const be of se){const de=te.graphMap[te.graph][be];w(te,de,ne,ve)&&(Ce[be]=de)}return Ce}(j,O,L,$),xe=Object.keys(ce).sort();for(const te of xe){const se=ce[te];if(null===W?j.uniqueEmbeds={[j.graph]:{}}:j.uniqueEmbeds[j.graph]=j.uniqueEmbeds[j.graph]||{},"@link"===$.embed&&te in fe){E(U,W,fe[te]);continue}const ne={"@id":te};if(0===te.indexOf("_:")&&y.addValue(j.bnodeMap,te,ne,{propertyIsArray:!0}),fe[te]=ne,("@first"===$.embed||"@last"===$.embed)&&j.is11)throw new o("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:L});if(j.embedded||!j.uniqueEmbeds[j.graph].hasOwnProperty(te))if(!j.embedded||"@never"!==$.embed&&!k(se,j.graph,j.subjectStack))if(!j.embedded||"@first"!=$.embed&&"@once"!=$.embed||!j.uniqueEmbeds[j.graph].hasOwnProperty(te)){if("@last"===$.embed&&te in j.uniqueEmbeds[j.graph]&&T(j,te),j.uniqueEmbeds[j.graph][te]={parent:U,property:W},j.subjectStack.push({subject:se,graph:j.graph}),te in j.graphMap){let ve=!1,Ce=null;"@graph"in L?(Ce=L["@graph"][0],ve=!("@merged"===te||"@default"===te),F.isObject(Ce)||(Ce={})):(ve="@merged"!==j.graph,Ce={}),ve&&m.frame(us(cn({},j),{graph:te,embedded:!1}),Object.keys(j.graphMap[te]).sort(),[Ce],ne,"@graph")}"@included"in L&&m.frame(us(cn({},j),{embedded:!1}),O,L["@included"],ne,"@included");for(const ve of Object.keys(se).sort())if(q(ve)){if(ne[ve]=y.clone(se[ve]),"@type"===ve)for(const Ce of se["@type"])0===Ce.indexOf("_:")&&y.addValue(j.bnodeMap,Ce,ne,{propertyIsArray:!0})}else if(!$.explicit||ve in L)for(const Ce of se[ve]){const be=ve in L?L[ve]:h($);if(a.isList(Ce)){const de=L[ve]&&L[ve][0]&&L[ve][0]["@list"]?L[ve][0]["@list"]:h($),ye={"@list":[]};E(ne,ve,ye);const Fe=Ce["@list"];for(const Be of Fe)a.isSubjectReference(Be)?m.frame(us(cn({},j),{embedded:!0}),[Be["@id"]],de,ye,"@list"):E(ye,"@list",y.clone(Be))}else a.isSubjectReference(Ce)?m.frame(us(cn({},j),{embedded:!0}),[Ce["@id"]],be,ne,ve):M(be[0],Ce)&&E(ne,ve,y.clone(Ce))}for(const ve of Object.keys(L).sort()){if("@type"===ve){if(!F.isObject(L[ve][0])||!("@default"in L[ve][0]))continue}else if(q(ve))continue;const Ce=L[ve][0]||{};if(!v(Ce,V,"omitDefault")&&!(ve in ne)){let be="@null";"@default"in Ce&&(be=y.clone(Ce["@default"])),F.isArray(be)||(be=[be]),ne[ve]=[{"@preserve":be}]}}for(const ve of Object.keys(L["@reverse"]||{}).sort()){const Ce=L["@reverse"][ve];for(const be of Object.keys(j.subjects))y.getValues(j.subjects[be],ve).some(de=>de["@id"]===te)&&(ne["@reverse"]=ne["@reverse"]||{},y.addValue(ne["@reverse"],ve,[],{propertyIsArray:!0}),m.frame(us(cn({},j),{embedded:!0}),[be],Ce,ne["@reverse"][ve],W))}E(U,W,ne),j.subjectStack.pop()}else E(U,W,ne);else E(U,W,ne)}},m.cleanupNull=(j,O)=>{if(F.isArray(j))return j.map(L=>m.cleanupNull(L,O)).filter(L=>L);if("@null"===j)return null;if(F.isObject(j)){if("@id"in j){const L=j["@id"];if(O.link.hasOwnProperty(L)){const U=O.link[L].indexOf(j);if(-1!==U)return O.link[L][U];O.link[L].push(j)}else O.link[L]=[j]}for(const L in j)j[L]=m.cleanupNull(j[L],O)}return j}},{"./JsonLdError":32,"./context":39,"./graphTypes":45,"./nodeMap":47,"./types":50,"./url":51,"./util":52}],44:[function(J,ie,ue){"use strict";const q=J("./JsonLdError"),a=J("./graphTypes"),F=J("./types"),y=J("./util"),{RDF_LIST:e,RDF_FIRST:o,RDF_REST:u,RDF_NIL:d,RDF_TYPE:m,RDF_JSON_LITERAL:h,XSD_BOOLEAN:k,XSD_DOUBLE:v,XSD_INTEGER:f,XSD_STRING:w}=J("./constants"),T=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,E={};function P(M,j,O){if(M.termType.endsWith("Node"))return{"@id":M.value};const L={"@value":M.value};if(M.language)L["@language"]=M.language;else{let U=M.datatype.value;if(U||(U=w),U===h){U="@json";try{L["@value"]=JSON.parse(L["@value"])}catch(W){throw new q("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:L["@value"],cause:W})}}if(j){if(U===k)"true"===L["@value"]?L["@value"]=!0:"false"===L["@value"]&&(L["@value"]=!1);else if(F.isNumeric(L["@value"]))if(U===f){const W=parseInt(L["@value"],10);W.toFixed(0)===L["@value"]&&(L["@value"]=W)}else U===v&&(L["@value"]=parseFloat(L["@value"]));[k,f,v,w].includes(U)||(L["@type"]=U)}else if("i18n-datatype"===O&&U.startsWith("https://www.w3.org/ns/i18n#")){const[,W,V]=U.split(/[#_]/);W.length>0&&(L["@language"]=W,W.match(T)||console.warn(`@language must be valid BCP47: ${W}`)),L["@direction"]=V}else U!==w&&(L["@type"]=U)}return L}ie.exports=E,E.fromRDF=async(M,{useRdfType:j=!1,useNativeTypes:O=!1,rdfDirection:L=null})=>{const U={},W={"@default":U},V={};for(const ce of M){const xe="DefaultGraph"===ce.graph.termType?"@default":ce.graph.value;xe in W||(W[xe]={}),"@default"===xe||xe in U||(U[xe]={"@id":xe});const te=W[xe],se=ce.subject.value,ne=ce.predicate.value,ve=ce.object;se in te||(te[se]={"@id":se});const Ce=te[se],be=ve.termType.endsWith("Node");if(!be||ve.value in te||(te[ve.value]={"@id":ve.value}),ne===m&&!j&&be){y.addValue(Ce,"@type",ve.value,{propertyIsArray:!0});continue}const de=P(ve,O,L);if(y.addValue(Ce,ne,de,{propertyIsArray:!0}),be)if(ve.value===d){const ye=te[ve.value];"usages"in ye||(ye.usages=[]),ye.usages.push({node:Ce,property:ne,value:de})}else ve.value in V?V[ve.value]=!1:V[ve.value]={node:Ce,property:ne,value:de}}for(const ce in W){const xe=W[ce];if(!(d in xe))continue;const te=xe[d];if(te.usages){for(let se of te.usages){let ne=se.node,ve=se.property,Ce=se.value;const be=[],de=[];let ye=Object.keys(ne).length;for(;ve===u&&F.isObject(V[ne["@id"]])&&F.isArray(ne[o])&&1===ne[o].length&&F.isArray(ne[u])&&1===ne[u].length&&(3===ye||4===ye&&F.isArray(ne["@type"])&&1===ne["@type"].length&&ne["@type"][0]===e)&&(be.push(ne[o][0]),de.push(ne["@id"]),ne=(se=V[ne["@id"]]).node,ve=se.property,Ce=se.value,ye=Object.keys(ne).length,a.isBlankNode(ne)););delete Ce["@id"],Ce["@list"]=be.reverse();for(const Fe of de)delete xe[Fe]}delete te.usages}}const $=[],fe=Object.keys(U).sort();for(const ce of fe){const xe=U[ce];if(ce in W){const te=xe["@graph"]=[],se=W[ce],ne=Object.keys(se).sort();for(const ve of ne){const Ce=se[ve];a.isSubjectReference(Ce)||te.push(Ce)}}a.isSubjectReference(xe)||$.push(xe)}return $}},{"./JsonLdError":32,"./constants":38,"./graphTypes":45,"./types":50,"./util":52}],45:[function(J,ie,ue){"use strict";const q=J("./types"),a={};ie.exports=a,a.isSubject=F=>!(!q.isObject(F)||"@value"in F||"@set"in F||"@list"in F)&&(Object.keys(F).length>1||!("@id"in F)),a.isSubjectReference=F=>q.isObject(F)&&1===Object.keys(F).length&&"@id"in F,a.isValue=F=>q.isObject(F)&&"@value"in F,a.isList=F=>q.isObject(F)&&"@list"in F,a.isGraph=F=>q.isObject(F)&&"@graph"in F&&1===Object.keys(F).filter(y=>"@id"!==y&&"@index"!==y).length,a.isSimpleGraph=F=>a.isGraph(F)&&!("@id"in F),a.isBlankNode=F=>!!q.isObject(F)&&("@id"in F?0===F["@id"].indexOf("_:"):0===Object.keys(F).length||!("@value"in F||"@set"in F||"@list"in F))},{"./types":50}],46:[function(J,ie,ue){const q=J("rdf-canonize"),a=J("./platform"),F=J("./util"),y=J("./ContextResolver"),e=F.IdentifierIssuer,o=J("./JsonLdError"),u=J("lru-cache"),d=J("./NQuads"),{expand:m}=J("./expand"),{flatten:h}=J("./flatten"),{fromRDF:k}=J("./fromRdf"),{toRDF:v}=J("./toRdf"),{frameMergedOrDefault:f,cleanupNull:w}=J("./frame"),{isArray:T,isObject:E,isString:P}=J("./types"),{isSubjectReference:M}=J("./graphTypes"),{expandIri:j,getInitialContext:O,process:L,processingMode:U}=J("./context"),{compact:W,compactIri:V}=J("./compact"),{createNodeMap:$,createMergedNodeMap:fe,mergeNodeMaps:ce}=J("./nodeMap"),xe=function(se){const ne={},ve=new u({max:100});function Ce(be,Fe){var Be=Fe,{documentLoader:de=se.documentLoader}=Be,ye=mp(Be,["documentLoader"]);return Object.assign({},{documentLoader:de},ye,be)}return se.compact=async function(be,de,ye){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===de)throw new o("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===be)return null;let Fe;(ye=Ce(ye,{base:P(be)?be:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new e("_:b"),contextResolver:new y({sharedCache:ve})})).link&&(ye.skipExpansion=!0),ye.compactToRelative||delete ye.base,Fe=ye.skipExpansion?be:await se.expand(be,ye);const Be=await se.processContext(O(ye),de,ye);let Ie=await W({activeCtx:Be,element:Fe,options:ye,compactionMap:ye.compactionMap});ye.compactArrays&&!ye.graph&&T(Ie)?1===Ie.length?Ie=Ie[0]:0===Ie.length&&(Ie={}):ye.graph&&E(Ie)&&(Ie=[Ie]),E(de)&&"@context"in de&&(de=de["@context"]),de=F.clone(de),T(de)||(de=[de]);const Je=de;de=[];for(let H=0;H<Je.length;++H)(!E(Je[H])||Object.keys(Je[H]).length>0)&&de.push(Je[H]);const G=de.length>0;if(1===de.length&&(de=de[0]),T(Ie)){const H=V({activeCtx:Be,iri:"@graph",relativeTo:{vocab:!0}}),ee=Ie;Ie={},G&&(Ie["@context"]=de),Ie[H]=ee}else if(E(Ie)&&G){const H=Ie;Ie={"@context":de};for(const ee in H)Ie[ee]=H[ee]}return Ie},se.expand=async function(be,de){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(de=Ce(de,{keepFreeFloatingNodes:!1,contextResolver:new y({sharedCache:ve})})).expansionMap&&(de.expansionMap=void 0);const ye={},Fe=[];if("expandContext"in de){const G=F.clone(de.expandContext);E(G)&&"@context"in G?ye.expandContext=G:ye.expandContext={"@context":G},Fe.push(ye.expandContext)}let Be;if(P(be)){const G=await se.get(be,de);Be=G.documentUrl,ye.input=G.document,G.contextUrl&&(ye.remoteContext={"@context":G.contextUrl},Fe.push(ye.remoteContext))}else ye.input=F.clone(be);"base"in de||(de.base=Be||"");let Ie=O(de);for(const G of Fe)Ie=await L({activeCtx:Ie,localCtx:G,options:de});let Je=await m({activeCtx:Ie,element:ye.input,options:de,expansionMap:de.expansionMap});return E(Je)&&"@graph"in Je&&1===Object.keys(Je).length?Je=Je["@graph"]:null===Je&&(Je=[]),T(Je)||(Je=[Je]),Je},se.flatten=async function(be,de,ye){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");de="function"==typeof de?null:de||null,ye=Ce(ye,{base:P(be)?be:"",contextResolver:new y({sharedCache:ve})});const Fe=await se.expand(be,ye),Be=h(Fe);return null===de?Be:(ye.graph=!0,ye.skipExpansion=!0,await se.compact(Be,de,ye))},se.frame=async function(be,de,ye){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(ye=Ce(ye,{base:P(be)?be:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new y({sharedCache:ve})}),P(de)){const Ne=await se.get(de,ye);if(de=Ne.document,Ne.contextUrl){let _e=de["@context"];_e?T(_e)?_e.push(Ne.contextUrl):_e=[_e,Ne.contextUrl]:_e=Ne.contextUrl,de["@context"]=_e}}const Fe=de&&de["@context"]||{},Be=await se.processContext(O(ye),Fe,ye);ye.hasOwnProperty("omitGraph")||(ye.omitGraph=U(Be,1.1)),ye.hasOwnProperty("pruneBlankNodeIdentifiers")||(ye.pruneBlankNodeIdentifiers=U(Be,1.1));const Ie=await se.expand(be,ye),Je=cn({},ye);Je.isFrame=!0,Je.keepFreeFloatingNodes=!0;const G=await se.expand(de,Je),H=Object.keys(de).map(Ne=>j(Be,Ne,{vocab:!0}));Je.merged=!H.includes("@graph"),Je.is11=U(Be,1.1);const ee=f(Ie,G,Je);Je.graph=!ye.omitGraph,Je.skipExpansion=!0,Je.link={},Je.framing=!0;let pe=await se.compact(ee,Fe,Je);return Je.link={},w(pe,Je)},se.link=async function(be,de,ye){const Fe={};return de&&(Fe["@context"]=de),Fe["@embed"]="@link",se.frame(be,Fe,ye)},se.normalize=se.canonize=async function(be,de){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(de=Ce(de,{base:P(be)?be:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new y({sharedCache:ve})}))){if("application/n-quads"!==de.inputFormat&&"application/nquads"!==de.inputFormat)throw new o("Unknown canonicalization input format.","jsonld.CanonizeError");const Be=d.parse(be);return q.canonize(Be,de)}const ye=cn({},de);delete ye.format,ye.produceGeneralizedRdf=!1;const Fe=await se.toRDF(be,ye);return q.canonize(Fe,de)},se.fromRDF=async function(be,de){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");de=Ce(de,{format:P(be)?"application/n-quads":void 0});const{format:ye}=de;let{rdfParser:Fe}=de;if(ye){if(!(Fe=Fe||ne[ye]))throw new o("Unknown input format.","jsonld.UnknownFormat",{format:ye})}else Fe=()=>be;const Be=await Fe(be);return k(Be,de)},se.toRDF=async function(be,de){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let ye;ye=(de=Ce(de,{base:P(be)?be:"",skipExpansion:!1,contextResolver:new y({sharedCache:ve})})).skipExpansion?be:await se.expand(be,de);const Fe=v(ye,de);if(de.format){if("application/n-quads"===de.format||"application/nquads"===de.format)return d.serialize(Fe);throw new o("Unknown output format.","jsonld.UnknownFormat",{format:de.format})}return Fe},se.createNodeMap=async function(be,de){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");de=Ce(de,{base:P(be)?be:"",contextResolver:new y({sharedCache:ve})});const ye=await se.expand(be,de);return fe(ye,de)},se.merge=async function(be,de,ye){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!T(be))throw new TypeError('Could not merge, "docs" must be an array.');de="function"==typeof de?null:de||null,ye=Ce(ye,{contextResolver:new y({sharedCache:ve})});const Fe=await Promise.all(be.map(pe=>{const Ne=cn({},ye);return se.expand(pe,Ne)}));let Be=!0;"mergeNodes"in ye&&(Be=ye.mergeNodes);const Ie=ye.issuer||new e("_:b"),Je={"@default":{}};for(let pe=0;pe<Fe.length;++pe){const Ne=F.relabelBlankNodes(Fe[pe],{issuer:new e("_:b"+pe+"-")}),_e=Be||0===pe?Je:{"@default":{}};if($(Ne,_e,"@default",Ie),_e!==Je)for(const Pe in _e){const We=_e[Pe];if(!(Pe in Je)){Je[Pe]=We;continue}const Ye=Je[Pe];for(const mt in We)mt in Ye||(Ye[mt]=We[mt])}}const G=ce(Je),H=[],ee=Object.keys(G).sort();for(let pe=0;pe<ee.length;++pe){const Ne=G[ee[pe]];M(Ne)||H.push(Ne)}return null===de?H:(ye.graph=!0,ye.skipExpansion=!0,await se.compact(H,de,ye))},Object.defineProperty(se,"documentLoader",{get:()=>se._documentLoader,set:be=>se._documentLoader=be}),se.documentLoader=async be=>{throw new o("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:be})},se.get=async function(be,de){let ye;ye="function"==typeof de.documentLoader?de.documentLoader:se.documentLoader;const Fe=await ye(be);try{if(!Fe.document)throw new o("No remote document found at the given URL.","jsonld.NullRemoteDocument");P(Fe.document)&&(Fe.document=JSON.parse(Fe.document))}catch(Be){throw new o("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Be,remoteDoc:Fe})}return Fe},se.processContext=async function(be,de,ye){return ye=Ce(ye,{base:"",contextResolver:new y({sharedCache:ve})}),null===de?O(ye):(de=F.clone(de),E(de)&&"@context"in de||(de={"@context":de}),L({activeCtx:be,localCtx:de,options:ye}))},se.getContextValue=J("./context").getContextValue,se.documentLoaders={},se.useDocumentLoader=function(be){if(!(be in se.documentLoaders))throw new o('Unknown document loader type: "'+be+'"',"jsonld.UnknownDocumentLoader",{type:be});se.documentLoader=se.documentLoaders[be].apply(se,Array.prototype.slice.call(arguments,1))},se.registerRDFParser=function(be,de){ne[be]=de},se.unregisterRDFParser=function(be){delete ne[be]},se.registerRDFParser("application/n-quads",d.parse),se.registerRDFParser("application/nquads",d.parse),se.url=J("./url"),se.util=F,Object.assign(se,F),se.promises=se,se.RequestQueue=J("./RequestQueue"),se.JsonLdProcessor=J("./JsonLdProcessor")(se),a.setupGlobals(se),a.setupDocumentLoaders(se),se},te=function(){return xe(function(){return te()})};xe(te),ie.exports=te},{"./ContextResolver":31,"./JsonLdError":32,"./JsonLdProcessor":33,"./NQuads":34,"./RequestQueue":35,"./compact":37,"./context":39,"./expand":41,"./flatten":42,"./frame":43,"./fromRdf":44,"./graphTypes":45,"./nodeMap":47,"./platform":48,"./toRdf":49,"./types":50,"./url":51,"./util":52,"lru-cache":53,"rdf-canonize":66}],47:[function(J,ie,ue){"use strict";const{isKeyword:q}=J("./context"),a=J("./graphTypes"),F=J("./types"),y=J("./util"),e=J("./JsonLdError"),o={};ie.exports=o,o.createMergedNodeMap=(u,d)=>{const m=(d=d||{}).issuer||new y.IdentifierIssuer("_:b"),h={"@default":{}};return o.createNodeMap(u,h,"@default",m),o.mergeNodeMaps(h)},o.createNodeMap=(u,d,m,h,k,v)=>{if(F.isArray(u)){for(const E of u)o.createNodeMap(E,d,m,h,void 0,v);return}if(!F.isObject(u))return void(v&&v.push(u));if(a.isValue(u)){if("@type"in u){let E=u["@type"];0===E.indexOf("_:")&&(u["@type"]=E=h.getId(E))}return void(v&&v.push(u))}if(v&&a.isList(u)){const E=[];return o.createNodeMap(u["@list"],d,m,h,k,E),void v.push({"@list":E})}if("@type"in u){const E=u["@type"];for(const P of E)0===P.indexOf("_:")&&h.getId(P)}F.isUndefined(k)&&(k=a.isBlankNode(u)?h.getId(u["@id"]):u["@id"]),v&&v.push({"@id":k});const f=d[m],w=f[k]=f[k]||{};w["@id"]=k;const T=Object.keys(u).sort();for(let E of T){if("@id"===E)continue;if("@reverse"===E){const M={"@id":k},j=u["@reverse"];for(const O in j){const L=j[O];for(const U of L){let W=U["@id"];a.isBlankNode(U)&&(W=h.getId(W)),o.createNodeMap(U,d,m,h,W),y.addValue(f[W],O,M,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===E){k in d||(d[k]={}),o.createNodeMap(u[E],d,k,h);continue}if("@included"===E){o.createNodeMap(u[E],d,m,h);continue}if("@type"!==E&&q(E)){if("@index"===E&&E in w&&(u[E]!==w[E]||u[E]["@id"]!==w[E]["@id"]))throw new e("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:w});w[E]=u[E];continue}const P=u[E];if(0===E.indexOf("_:")&&(E=h.getId(E)),0!==P.length)for(let M of P)if("@type"===E&&(M=0===M.indexOf("_:")?h.getId(M):M),a.isSubject(M)||a.isSubjectReference(M)){if("@id"in M&&!M["@id"])continue;const j=a.isBlankNode(M)?h.getId(M["@id"]):M["@id"];y.addValue(w,E,{"@id":j},{propertyIsArray:!0,allowDuplicate:!1}),o.createNodeMap(M,d,m,h,j)}else if(a.isValue(M))y.addValue(w,E,M,{propertyIsArray:!0,allowDuplicate:!1});else if(a.isList(M)){const j=[];o.createNodeMap(M["@list"],d,m,h,k,j),M={"@list":j},y.addValue(w,E,M,{propertyIsArray:!0,allowDuplicate:!1})}else o.createNodeMap(M,d,m,h,k),y.addValue(w,E,M,{propertyIsArray:!0,allowDuplicate:!1});else y.addValue(w,E,[],{propertyIsArray:!0})}},o.mergeNodeMapGraphs=u=>{const d={};for(const m of Object.keys(u).sort())for(const h of Object.keys(u[m]).sort()){const k=u[m][h];h in d||(d[h]={"@id":h});const v=d[h];for(const f of Object.keys(k).sort())if(q(f)&&"@type"!==f)v[f]=y.clone(k[f]);else for(const w of k[f])y.addValue(v,f,y.clone(w),{propertyIsArray:!0,allowDuplicate:!1})}return d},o.mergeNodeMaps=u=>{const d=u["@default"],m=Object.keys(u).sort();for(const h of m){if("@default"===h)continue;const k=u[h];let v=d[h];v?"@graph"in v||(v["@graph"]=[]):d[h]=v={"@id":h,"@graph":[]};const f=v["@graph"];for(const w of Object.keys(k).sort()){const T=k[w];a.isSubjectReference(T)||f.push(T)}}return d}},{"./JsonLdError":32,"./context":39,"./graphTypes":45,"./types":50,"./util":52}],48:[function(J,ie,ue){"use strict";const q=J("./documentLoaders/xhr"),a={};ie.exports=a,a.setupDocumentLoaders=function(F){"undefined"!=typeof XMLHttpRequest&&(F.documentLoaders.xhr=q,F.useDocumentLoader("xhr"))},a.setupGlobals=function(F){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:F.JsonLdProcessor})}},{"./documentLoaders/xhr":40}],49:[function(J,ie,ue){"use strict";const{createNodeMap:q}=J("./nodeMap"),{isKeyword:a}=J("./context"),F=J("./graphTypes"),y=J("canonicalize"),e=J("./types"),o=J("./util"),{RDF_FIRST:u,RDF_REST:d,RDF_NIL:m,RDF_TYPE:h,RDF_JSON_LITERAL:k,RDF_LANGSTRING:v,XSD_BOOLEAN:f,XSD_DOUBLE:w,XSD_INTEGER:T,XSD_STRING:E}=J("./constants"),{isAbsolute:P}=J("./url"),M={};function j(L,U,W,V,$){const fe=Object.keys(U).sort();for(const ce of fe){const xe=U[ce],te=Object.keys(xe).sort();for(let se of te){const ne=xe[se];if("@type"===se)se=h;else if(a(se))continue;for(const ve of ne){const Ce={termType:ce.startsWith("_:")?"BlankNode":"NamedNode",value:ce};if(!P(ce))continue;const be={termType:se.startsWith("_:")?"BlankNode":"NamedNode",value:se};if(!P(se)||"BlankNode"===be.termType&&!$.produceGeneralizedRdf)continue;const de=O(ve,V,L,W,$.rdfDirection);de&&L.push({subject:Ce,predicate:be,object:de,graph:W})}}}}function O(L,U,W,V,$){const fe={};if(F.isValue(L)){fe.termType="Literal",fe.value=void 0,fe.datatype={termType:"NamedNode"};let ce=L["@value"];const xe=L["@type"]||null;if("@json"===xe)fe.value=y(ce),fe.datatype.value=k;else if(e.isBoolean(ce))fe.value=ce.toString(),fe.datatype.value=xe||f;else if(e.isDouble(ce)||xe===w)e.isDouble(ce)||(ce=parseFloat(ce)),fe.value=ce.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),fe.datatype.value=xe||w;else if(e.isNumber(ce))fe.value=ce.toFixed(0),fe.datatype.value=xe||T;else if("i18n-datatype"===$&&"@direction"in L){const te="https://www.w3.org/ns/i18n#"+(L["@language"]||"")+`_${L["@direction"]}`;fe.datatype.value=te,fe.value=ce}else"@language"in L?(fe.value=ce,fe.datatype.value=xe||v,fe.language=L["@language"]):(fe.value=ce,fe.datatype.value=xe||E)}else if(F.isList(L)){const ce=function(xe,te,se,ne,ve){const Ce={termType:"NamedNode",value:u},be={termType:"NamedNode",value:d},de={termType:"NamedNode",value:m},ye=xe.pop(),Fe=ye?{termType:"BlankNode",value:te.getId()}:de;let Be=Fe;for(const Ie of xe){const Je=O(Ie,te,se,ne,ve),G={termType:"BlankNode",value:te.getId()};se.push({subject:Be,predicate:Ce,object:Je,graph:ne}),se.push({subject:Be,predicate:be,object:G,graph:ne}),Be=G}if(ye){const Ie=O(ye,te,se,ne,ve);se.push({subject:Be,predicate:Ce,object:Ie,graph:ne}),se.push({subject:Be,predicate:be,object:de,graph:ne})}return Fe}(L["@list"],U,W,V,$);fe.termType=ce.termType,fe.value=ce.value}else{const ce=e.isObject(L)?L["@id"]:L;fe.termType=ce.startsWith("_:")?"BlankNode":"NamedNode",fe.value=ce}return"NamedNode"!==fe.termType||P(fe.value)?fe:null}ie.exports=M,M.toRDF=(L,U)=>{const W=new o.IdentifierIssuer("_:b"),V={"@default":{}};q(L,V,"@default",W);const $=[],fe=Object.keys(V).sort();for(const ce of fe){let xe;if("@default"===ce)xe={termType:"DefaultGraph",value:""};else{if(!P(ce))continue;(xe=ce.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"}).value=ce}j($,V[ce],xe,W,U)}return $}},{"./constants":38,"./context":39,"./graphTypes":45,"./nodeMap":47,"./types":50,"./url":51,"./util":52,canonicalize:13}],50:[function(J,ie,ue){"use strict";const q={};ie.exports=q,q.isArray=Array.isArray,q.isBoolean=a=>"boolean"==typeof a||"[object Boolean]"===Object.prototype.toString.call(a),q.isDouble=a=>q.isNumber(a)&&(-1!==String(a).indexOf(".")||Math.abs(a)>=1e21),q.isEmptyObject=a=>q.isObject(a)&&0===Object.keys(a).length,q.isNumber=a=>"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a),q.isNumeric=a=>!isNaN(parseFloat(a))&&isFinite(a),q.isObject=a=>"[object Object]"===Object.prototype.toString.call(a),q.isString=a=>"string"==typeof a||"[object String]"===Object.prototype.toString.call(a),q.isUndefined=a=>void 0===a},{}],51:[function(J,ie,ue){"use strict";const q=J("./types"),a={};ie.exports=a,a.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},a.parse=(y,e)=>{const o={},u=a.parsers[e||"full"],d=u.regex.exec(y);let m=u.keys.length;for(;m--;)o[u.keys[m]]=void 0===d[m]?null:d[m];return("https"===o.scheme&&"443"===o.port||"http"===o.scheme&&"80"===o.port)&&(o.href=o.href.replace(":"+o.port,""),o.authority=o.authority.replace(":"+o.port,""),o.port=null),o.normalizedPath=a.removeDotSegments(o.path),o},a.prependBase=(y,e)=>{if(null===y||a.isAbsolute(e))return e;y&&!q.isString(y)||(y=a.parse(y||""));const o=a.parse(e),u={protocol:y.protocol||""};if(null!==o.authority)u.authority=o.authority,u.path=o.path,u.query=o.query;else if(u.authority=y.authority,""===o.path)u.path=y.path,null!==o.query?u.query=o.query:u.query=y.query;else{if(0===o.path.indexOf("/"))u.path=o.path;else{let m=y.path;((m=m.substr(0,m.lastIndexOf("/")+1)).length>0||y.authority)&&"/"!==m.substr(-1)&&(m+="/"),m+=o.path,u.path=m}u.query=o.query}""!==o.path&&(u.path=a.removeDotSegments(u.path));let d=u.protocol;return null!==u.authority&&(d+="//"+u.authority),d+=u.path,null!==u.query&&(d+="?"+u.query),null!==o.fragment&&(d+="#"+o.fragment),""===d&&(d="./"),d},a.removeBase=(y,e)=>{if(null===y)return e;y&&!q.isString(y)||(y=a.parse(y||""));let o="";if(""!==y.href?o+=(y.protocol||"")+"//"+(y.authority||""):e.indexOf("//")&&(o+="//"),0!==e.indexOf(o))return e;const u=a.parse(e.substr(o.length)),d=y.normalizedPath.split("/"),m=u.normalizedPath.split("/"),h=u.fragment||u.query?0:1;for(;d.length>0&&m.length>h&&d[0]===m[0];)d.shift(),m.shift();let k="";if(d.length>0){d.pop();for(let v=0;v<d.length;++v)k+="../"}return k+=m.join("/"),null!==u.query&&(k+="?"+u.query),null!==u.fragment&&(k+="#"+u.fragment),""===k&&(k="./"),k},a.removeDotSegments=y=>{if(0===y.length)return"";const e=y.split("/"),o=[];for(;e.length>0;){const u=e.shift(),d=0===e.length;"."!==u?".."!==u?o.push(u):(o.pop(),d&&o.push("")):d&&o.push("")}return"/"===y[0]&&o.length>0&&""!==o[0]&&o.unshift(""),1===o.length&&""===o[0]?"/":o.join("/")};const F=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;a.isAbsolute=y=>q.isString(y)&&F.test(y),a.isRelative=y=>q.isString(y)},{"./types":50}],52:[function(J,ie,ue){"use strict";const q=J("./graphTypes"),a=J("./types"),F=J("rdf-canonize").IdentifierIssuer,y=J("./JsonLdError"),e=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,o=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,u=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,d_accept="application/ld+json, application/json",m={};ie.exports=m,m.IdentifierIssuer=F,m.clone=function(h){if(h&&"object"==typeof h){let k;if(a.isArray(h)){k=[];for(let v=0;v<h.length;++v)k[v]=m.clone(h[v])}else if(h instanceof Map){k=new Map;for(const[v,f]of h)k.set(v,m.clone(f))}else if(h instanceof Set){k=new Set;for(const v of h)k.add(m.clone(v))}else if(a.isObject(h)){k={};for(const v in h)k[v]=m.clone(h[v])}else k=h.toString();return k}return h},m.asArray=function(h){return Array.isArray(h)?h:[h]},m.buildHeaders=(h={})=>{if(Object.keys(h).some(k=>"accept"===k.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+d_accept+'" is supported.');return Object.assign({Accept:d_accept},h)},m.parseLinkHeader=h=>{const k={},v=h.match(e);for(let f=0;f<v.length;++f){let w=v[f].match(o);if(!w)continue;const T={target:w[1]},E=w[2];for(;w=u.exec(E);)T[w[1]]=void 0===w[2]?w[3]:w[2];const P=T.rel||"";Array.isArray(k[P])?k[P].push(T):k.hasOwnProperty(P)?k[P]=[k[P],T]:k[P]=T}return k},m.validateTypeValue=(h,k)=>{if(!(a.isString(h)||a.isArray(h)&&h.every(v=>a.isString(v)))){if(k&&a.isObject(h))switch(Object.keys(h).length){case 0:return;case 1:if("@default"in h&&m.asArray(h["@default"]).every(v=>a.isString(v)))return}throw new y('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:h})}},m.hasProperty=(h,k)=>{if(h.hasOwnProperty(k)){const v=h[k];return!a.isArray(v)||v.length>0}return!1},m.hasValue=(h,k,v)=>{if(m.hasProperty(h,k)){let f=h[k];const w=q.isList(f);if(a.isArray(f)||w){w&&(f=f["@list"]);for(let T=0;T<f.length;++T)if(m.compareValues(v,f[T]))return!0}else if(!a.isArray(v))return m.compareValues(v,f)}return!1},m.addValue=(h,k,v,f)=>{if("propertyIsArray"in(f=f||{})||(f.propertyIsArray=!1),"valueIsArray"in f||(f.valueIsArray=!1),"allowDuplicate"in f||(f.allowDuplicate=!0),"prependValue"in f||(f.prependValue=!1),f.valueIsArray)h[k]=v;else if(a.isArray(v)){0===v.length&&f.propertyIsArray&&!h.hasOwnProperty(k)&&(h[k]=[]),f.prependValue&&(v=v.concat(h[k]),h[k]=[]);for(let w=0;w<v.length;++w)m.addValue(h,k,v[w],f)}else if(h.hasOwnProperty(k)){const w=!f.allowDuplicate&&m.hasValue(h,k,v);a.isArray(h[k])||w&&!f.propertyIsArray||(h[k]=[h[k]]),w||(f.prependValue?h[k].unshift(v):h[k].push(v))}else h[k]=f.propertyIsArray?[v]:v},m.getValues=(h,k)=>[].concat(h[k]||[]),m.removeProperty=(h,k)=>{delete h[k]},m.removeValue=(h,k,v,f)=>{"propertyIsArray"in(f=f||{})||(f.propertyIsArray=!1);const w=m.getValues(h,k).filter(T=>!m.compareValues(T,v));0===w.length?m.removeProperty(h,k):1!==w.length||f.propertyIsArray?h[k]=w:h[k]=w[0]},m.relabelBlankNodes=(h,k)=>function v(f,w){if(a.isArray(w))for(let T=0;T<w.length;++T)w[T]=v(f,w[T]);else if(q.isList(w))w["@list"]=v(f,w["@list"]);else if(a.isObject(w)){q.isBlankNode(w)&&(w["@id"]=f.getId(w["@id"]));const T=Object.keys(w).sort();for(let E=0;E<T.length;++E){const P=T[E];"@id"!==P&&(w[P]=v(f,w[P]))}}return w}((k=k||{}).issuer||new F("_:b"),h),m.compareValues=(h,k)=>h===k||!(!q.isValue(h)||!q.isValue(k)||h["@value"]!==k["@value"]||h["@type"]!==k["@type"]||h["@language"]!==k["@language"]||h["@index"]!==k["@index"])||!!(a.isObject(h)&&"@id"in h&&a.isObject(k)&&"@id"in k)&&h["@id"]===k["@id"],m.compareShortestLeast=(h,k)=>h.length<k.length?-1:k.length<h.length?1:h===k?0:h<k?-1:1},{"./JsonLdError":32,"./graphTypes":45,"./types":50,"rdf-canonize":66}],53:[function(J,ie,ue){"use strict";const q=J("yallist"),a=Symbol("max"),F=Symbol("length"),y=Symbol("lengthCalculator"),e=Symbol("allowStale"),o=Symbol("maxAge"),u=Symbol("dispose"),d=Symbol("noDisposeOnSet"),m=Symbol("lruList"),h=Symbol("cache"),k=Symbol("updateAgeOnGet"),v=()=>1,f=(j,O,L)=>{const U=j[h].get(O);if(U){const W=U.value;if(w(j,W)){if(E(j,U),!j[e])return}else L&&(j[k]&&(U.value.now=Date.now()),j[m].unshiftNode(U));return W.value}},w=(j,O)=>{if(!O||!O.maxAge&&!j[o])return!1;const L=Date.now()-O.now;return O.maxAge?L>O.maxAge:j[o]&&L>j[o]},T=j=>{if(j[F]>j[a])for(let O=j[m].tail;j[F]>j[a]&&null!==O;){const L=O.prev;E(j,O),O=L}},E=(j,O)=>{if(O){const L=O.value;j[u]&&j[u](L.key,L.value),j[F]-=L.length,j[h].delete(L.key),j[m].removeNode(O)}};class P{constructor(O,L,U,W,V){this.key=O,this.value=L,this.length=U,this.now=W,this.maxAge=V||0}}const M=(j,O,L,U)=>{let W=L.value;w(j,W)&&(E(j,L),j[e]||(W=void 0)),W&&O.call(U,W.value,W.key,j)};ie.exports=class{constructor(j){if("number"==typeof j&&(j={max:j}),j||(j={}),j.max&&("number"!=typeof j.max||j.max<0))throw new TypeError("max must be a non-negative number");this[a]=j.max||1/0;const O=j.length||v;if(this[y]="function"!=typeof O?v:O,this[e]=j.stale||!1,j.maxAge&&"number"!=typeof j.maxAge)throw new TypeError("maxAge must be a number");this[o]=j.maxAge||0,this[u]=j.dispose,this[d]=j.noDisposeOnSet||!1,this[k]=j.updateAgeOnGet||!1,this.reset()}set max(j){if("number"!=typeof j||j<0)throw new TypeError("max must be a non-negative number");this[a]=j||1/0,T(this)}get max(){return this[a]}set allowStale(j){this[e]=!!j}get allowStale(){return this[e]}set maxAge(j){if("number"!=typeof j)throw new TypeError("maxAge must be a non-negative number");this[o]=j,T(this)}get maxAge(){return this[o]}set lengthCalculator(j){"function"!=typeof j&&(j=v),j!==this[y]&&(this[y]=j,this[F]=0,this[m].forEach(O=>{O.length=this[y](O.value,O.key),this[F]+=O.length})),T(this)}get lengthCalculator(){return this[y]}get length(){return this[F]}get itemCount(){return this[m].length}rforEach(j,O){O=O||this;for(let L=this[m].tail;null!==L;){const U=L.prev;M(this,j,L,O),L=U}}forEach(j,O){O=O||this;for(let L=this[m].head;null!==L;){const U=L.next;M(this,j,L,O),L=U}}keys(){return this[m].toArray().map(j=>j.key)}values(){return this[m].toArray().map(j=>j.value)}reset(){this[u]&&this[m]&&this[m].length&&this[m].forEach(j=>this[u](j.key,j.value)),this[h]=new Map,this[m]=new q,this[F]=0}dump(){return this[m].map(j=>!w(this,j)&&{k:j.key,v:j.value,e:j.now+(j.maxAge||0)}).toArray().filter(j=>j)}dumpLru(){return this[m]}set(j,O,L){if((L=L||this[o])&&"number"!=typeof L)throw new TypeError("maxAge must be a number");const U=L?Date.now():0,W=this[y](O,j);if(this[h].has(j)){if(W>this[a])return E(this,this[h].get(j)),!1;const $=this[h].get(j).value;return this[u]&&(this[d]||this[u](j,$.value)),$.now=U,$.maxAge=L,$.value=O,this[F]+=W-$.length,$.length=W,this.get(j),T(this),!0}const V=new P(j,O,W,U,L);return V.length>this[a]?(this[u]&&this[u](j,O),!1):(this[F]+=V.length,this[m].unshift(V),this[h].set(j,this[m].head),T(this),!0)}has(j){if(!this[h].has(j))return!1;const O=this[h].get(j).value;return!w(this,O)}get(j){return f(this,j,!0)}peek(j){return f(this,j,!1)}pop(){const j=this[m].tail;return j?(E(this,j),j.value):null}del(j){E(this,this[h].get(j))}load(j){this.reset();const O=Date.now();for(let L=j.length-1;L>=0;L--){const U=j[L],W=U.e||0;if(0===W)this.set(U.k,U.v);else{const V=W-O;V>0&&this.set(U.k,U.v,V)}}}prune(){this[h].forEach((j,O)=>f(this,O,!1))}}},{yallist:121}],54:[function(J,ie,ue){var q=J;J=function(){},ue=ie.exports={Lexer:J("./lib/N3Lexer"),Parser:J("./lib/N3Parser"),Writer:J("./lib/N3Writer"),Store:J("./lib/N3Store"),StreamParser:J("./lib/N3StreamParser"),StreamWriter:J("./lib/N3StreamWriter"),Util:J("./lib/N3Util")},Object.keys(ue).forEach(function(a){Object.defineProperty(ue,a,{configurable:!0,enumerable:!0,get:function(){return delete ue[a],ue[a]=q("./lib/N3"+a)}})})},{"./lib/N3Lexer":55,"./lib/N3Parser":56,"./lib/N3Store":57,"./lib/N3StreamParser":58,"./lib/N3StreamWriter":59,"./lib/N3Util":60,"./lib/N3Writer":61}],55:[function(J,ie,ue){(function(q){(function(){var a=String.fromCharCode,F="function"==typeof q?q:function(d){setTimeout(d,0)},y=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,e={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},o=/[\x00-\x20<>\\"\{\}\|\^\`]/;function u(d){if(!(this instanceof u))return new u(d);if((d=d||{}).lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var m=this;this._tokenize=this.tokenize,this.tokenize=function(h,k){this._tokenize(h,function(v,f){!v&&/^(?:IRI|blank|literal|langcode|typeIRI|\.|eof)$/.test(f.type)?k&&k(v,f):k&&k(v||m._syntaxError(f.type,k=null))})}}this._n3Mode=!1!==d.n3,this._comments=!!d.comments}u.prototype={_iri:/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,_unescapedString:/^"[^"\\\r\n]+"/,_singleQuotedString:/^"(?:[^"\\\r\n]|\\.)*"(?=[^"])|^'(?:[^'\\\r\n]|\\.)*'(?=[^'])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<]))/,_variable:/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<]))/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/i,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_comment:/#([^\n\r]*)/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(d,m){for(var h=this._input,k=this._comments;;){for(var v,f;v=this._newline.exec(h);)k&&(f=this._comment.exec(v[0]))&&d(null,{line:this._line,type:"comment",value:f[1],prefix:""}),h=h.substr(v[0].length,h.length),this._line++;if((v=this._whitespace.exec(h))&&(h=h.substr(v[0].length,h.length)),this._endOfFile.test(h))return m&&(k&&(f=this._comment.exec(h))&&d(null,{line:this._line,type:"comment",value:f[1],prefix:""}),d(h=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=h;var w,T=this._line,E="",P="",M="",j=h[0],O=null,L=0,U=!1;switch(j){case"^":if(h.length<3)break;if("^"!==h[1]){this._n3Mode&&(L=1,E="^");break}if(this._previousMarker="^^","<"!==(h=h.substr(2))[0]){U=!0;break}case"<":if(O=this._unescapedIri.exec(h))E="IRI",P=O[1];else if(O=this._iri.exec(h)){if(null===(w=this._unescape(O[1]))||o.test(w))return V(this);E="IRI",P=w}else this._n3Mode&&h.length>1&&"="===h[1]&&(E="inverse",L=2,P="http://www.w3.org/2000/10/swap/log#implies");break;case"_":((O=this._blank.exec(h))||m&&(O=this._blank.exec(h+" ")))&&(E="blank",M="_",P=O[1]);break;case'"':case"'":if(O=this._unescapedString.exec(h))E="literal",P=O[0];else if(O=this._singleQuotedString.exec(h)){if(null===(w=this._unescape(O[0])))return V(this);E="literal",P=w.replace(/^'|'$/g,'"')}else if(O=this._tripleQuotedString.exec(h)){if(w=O[1]||O[2],this._line+=w.split(/\r\n|\r|\n/).length-1,null===(w=this._unescape(w)))return V(this);E="literal",P=w.replace(/^'|'$/g,'"')}break;case"?":this._n3Mode&&(O=this._variable.exec(h))&&(E="var",P=O[0]);break;case"@":"literal"===this._previousMarker&&(O=this._langcode.exec(h))?(E="langcode",P=O[1]):(O=this._keyword.exec(h))&&(E=O[0]);break;case".":if(1===h.length?m:h[1]<"0"||h[1]>"9"){E=".",L=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(O=this._number.exec(h)||m&&(O=this._number.exec(h+" ")))&&(E="literal",P='"'+O[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(O[1]?"double":/^[+\-]?\d+$/.test(O[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(O=this._sparqlKeyword.exec(h))?E=O[0].toUpperCase():U=!0;break;case"f":case"t":(O=this._boolean.exec(h))?(E="literal",P='"'+O[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):U=!0;break;case"a":(O=this._shortPredicates.exec(h))?(E="abbreviation",P="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):U=!0;break;case"=":this._n3Mode&&h.length>1&&(E="abbreviation",">"!==h[1]?(L=1,P="http://www.w3.org/2002/07/owl#sameAs"):(L=2,P="http://www.w3.org/2000/10/swap/log#implies"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":L=1,E=j;break;default:U=!0}if(U&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(O=this._prefix.exec(h))?((O=this._prefixed.exec(h))||m&&(O=this._prefixed.exec(h+" ")))&&(E="prefixed",M=O[1]||"",P=this._unescape(O[2])):(E="prefix",P=O[1]||"")),"^^"===this._previousMarker)switch(E){case"prefixed":E="type";break;case"IRI":E="typeIRI";break;default:E=""}if(!E)return m||!/^'''|^"""/.test(h)&&/\n|\r/.test(h)?V(this):this._input=h;var W={line:T,type:E,value:P,prefix:M};d(null,W),this.previousToken=W,this._previousMarker=E,h=h.substr(L||O[0].length,h.length)}function V($){d($._syntaxError(/^\S*/.exec(h)[0]))}},_unescape:function(d){try{return d.replace(y,function(m,h,k,v){var f;if(h){if(f=parseInt(h,16),isNaN(f))throw new Error;return a(f)}if(k){if(f=parseInt(k,16),isNaN(f))throw new Error;return f<=65535?a(f):a(55296+(f-=65536)/1024,56320+(1023&f))}var w=e[v];if(!w)throw new Error;return w})}catch(m){return null}},_syntaxError:function(d){this._input=null;var m=new Error('Unexpected "'+d+'" on line '+this._line+".");return m.context={token:void 0,line:this._line,previousToken:this.previousToken},m},tokenize:function(d,m){var h=this;if(this._line=1,"string"==typeof d){if(this._input=d,"function"!=typeof m){var k,v=[];if(this._tokenizeToEnd(function(f,w){f?k=f:v.push(w)},!0),k)throw k;return v}F(function(){h._tokenizeToEnd(m,!0)})}else this._input="","function"==typeof d.setEncoding&&d.setEncoding("utf8"),d.on("data",function(f){null!==h._input&&(h._input+=f,h._tokenizeToEnd(m,!1))}),d.on("end",function(){null!==h._input&&h._tokenizeToEnd(m,!0)}),d.on("error",m)}},ie.exports=u}).call(this)}).call(this,J("timers").setImmediate)},{timers:114}],56:[function(J,ie,ue){var q=J("./N3Lexer"),a="http://www.w3.org/1999/02/22-rdf-syntax-ns#",F=a+"nil",y=a+"first",e=a+"rest",o=/^[a-z][a-z0-9+.-]*:/i,u=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,d=/(?:^|\/)\.\.?(?:$|[\/#?])/,m=0,h=0;function k(f){if(!(this instanceof k))return new k(f);this._contextStack=[],this._graph=null,f=f||{},this._setBase(f.documentIRI);var w="string"==typeof f.format?f.format.match(/\w*$/)[0].toLowerCase():"",T="turtle"===w,E="trig"===w,P=/triple/.test(w),M=/quad/.test(w),j=this._n3Mode=/n3/.test(w),O=P||M;(this._supportsNamedGraphs=!(T||j))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(T||E||P||j),O&&(this._base="",this._resolveIRI=function(L){return this._error("Disallowed relative IRI",L),this._callback=v,this._subject=null}),this._blankNodePrefix="string"!=typeof f.blankNodePrefix?"":"_:"+f.blankNodePrefix.replace(/^_:/,""),this._lexer=f.lexer||new q({lineMode:O,n3:j}),this._explicitQuantifiers=!!f.explicitQuantifiers}function v(){}k._resetBlankNodeIds=function(){m=h=0},k.prototype={_setBase:function(f){if(f){var w=f.indexOf("#");w>=0&&(f=f.substr(0,w)),this._base=f,this._basePath=f.indexOf("/")<0?f:f.replace(/[^\/?]*(?:\?.*)?$/,""),f=f.match(u),this._baseRoot=f[0],this._baseScheme=f[1]}else this._base=null},_saveContext:function(f,w,T,E,P){var M=this._n3Mode;this._contextStack.push({subject:T,predicate:E,object:P,graph:w,type:f,inverse:!!M&&this._inversePredicate,blankPrefix:M?this._prefixes._:"",quantified:M?this._quantified:null}),M&&(this._inversePredicate=!1,this._prefixes._=this._graph+".",this._quantified=Object.create(this._quantified))},_restoreContext:function(){var f=this._contextStack.pop(),w=this._n3Mode;this._subject=f.subject,this._predicate=f.predicate,this._object=f.object,this._graph=f.graph,w&&(this._inversePredicate=f.inverse,this._prefixes._=f.blankPrefix,this._quantified=f.quantified)},_readInTopContext:function(f){switch(f.type){case"eof":return null!==this._graph?this._error("Unclosed graph",f):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(f)}},_readEntity:function(f,w){var T;switch(f.type){case"IRI":case"typeIRI":T=null===this._base||o.test(f.value)?f.value:this._resolveIRI(f);break;case"type":case"blank":case"prefixed":var E=this._prefixes[f.prefix];if(void 0===E)return this._error('Undefined prefix "'+f.prefix+':"',f);T=E+f.value;break;case"var":return f.value;default:return this._error("Expected entity but got "+f.type,f)}return!w&&this._n3Mode&&T in this._quantified&&(T=this._quantified[T]),T},_readSubject:function(f){switch(this._predicate=null,f.type){case"[":return this._saveContext("blank",this._graph,this._subject="_:b"+h++,null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,F,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph="_:b"+h++,null,null),this._readSubject):this._error("Unexpected graph",f);case"}":return this._readPunctuation(f);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forSome",this._quantifiedPrefix="_:b",this._readQuantifierList):this._error('Unexpected "@forSome"',f);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forAll",this._quantifiedPrefix="?b-",this._readQuantifierList):this._error('Unexpected "@forAll"',f);default:if(void 0===(this._subject=this._readEntity(f)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph},_readPredicate:function(f){var w=f.type;switch(w){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=f.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+w,f):(this._subject=null,"]"===w?this._readBlankNodeTail(f):this._readPunctuation(f));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",f);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",f);default:if(void 0===(this._predicate=this._readEntity(f)))return}return this._readObject},_readObject:function(f){switch(f.type){case"literal":return this._object=f.value,this._readDataTypeOrLang;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject="_:b"+h++),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,F),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph="_:b"+h++),this._readSubject):this._error("Unexpected graph",f);default:if(void 0===(this._object=this._readEntity(f)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()},_readPredicateOrNamedGraph:function(f){return"{"===f.type?this._readGraph(f):this._readPredicate(f)},_readGraph:function(f){return"{"!==f.type?this._error("Expected graph but got "+f.type,f):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(f){return"]"===f.type?(this._subject=null,this._readBlankNodeTail(f)):(this._predicate=null,this._readPredicate(f))},_readBlankNodeTail:function(f){if("]"!==f.type)return this._readBlankNodePunctuation(f);null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph);var w=null===this._predicate;return this._restoreContext(),null===this._object?w?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader()},_readPredicateAfterBlank:function(f){return"."!==f.type||this._contextStack.length?this._readPredicate(f):(this._subject=null,this._readPunctuation(f))},_readListItem:function(f){var w=null,T=null,E=this._subject,P=this._contextStack,M=P[P.length-1],j=this._readListItem,O=!0;switch(f.type){case"[":this._saveContext("blank",this._graph,T="_:b"+h++,y,this._subject=w="_:b"+h++),j=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,T="_:b"+h++,y,F),this._subject=null;break;case")":if(this._restoreContext(),0!==P.length&&"list"===P[P.length-1].type&&this._triple(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(j=this._readPredicate,this._subject===F)return j}else if(j=this._getContextEndReader(),this._object===F)return j;T=F;break;case"literal":w=f.value,O=!1,j=this._readListItemDataTypeOrLang;break;default:if(void 0===(w=this._readEntity(f)))return}if(null===T&&(this._subject=T="_:b"+h++),null===E?null===M.predicate?M.subject=T:M.object=T:this._triple(E,e,T,this._graph),null!==w){if(this._n3Mode&&("IRI"===f.type||"prefixed"===f.type))return this._saveContext("item",this._graph,T,y,w),this._subject=w,this._predicate=null,this._getPathReader(this._readListItem);O?this._triple(T,y,w,this._graph):this._object=w}return j},_readDataTypeOrLang:function(f){return this._completeLiteral(f,!1)},_readListItemDataTypeOrLang:function(f){return this._completeLiteral(f,!0)},_completeLiteral:function(f,w){var T=!1;switch(f.type){case"type":case"typeIRI":var E=this._readEntity(f);if(void 0===E)return;T=!0,this._object+="^^"+E;break;case"langcode":T=!0,this._object+="@"+f.value.toLowerCase()}return w&&this._triple(this._subject,y,this._object,this._graph),T?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(f))},_readFormulaTail:function(f){return"}"!==f.type?this._readPunctuation(f):(null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())},_readPunctuation:function(f){var w,T=this._subject,E=this._graph,P=this._inversePredicate;switch(f.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",f);if(this._n3Mode)return this._readFormulaTail(f);this._graph=null;case".":this._subject=null,w=this._contextStack.length?this._readSubject:this._readInTopContext,P&&(this._inversePredicate=!1);break;case";":w=this._readPredicate;break;case",":w=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(E=this._readEntity(f))){w=this._readQuadPunctuation;break}return this._error('Expected punctuation to follow "'+this._object+'"',f)}if(null!==T){var M=this._predicate,j=this._object;P?this._triple(j,M,T,E):this._triple(T,M,j,E)}return w},_readBlankNodePunctuation:function(f){var w;switch(f.type){case";":w=this._readPredicate;break;case",":w=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',f)}return this._triple(this._subject,this._predicate,this._object,this._graph),w},_readQuadPunctuation:function(f){return"."!==f.type?this._error("Expected dot to follow quad",f):this._readInTopContext},_readPrefix:function(f){return"prefix"!==f.type?this._error("Expected prefix to follow @prefix",f):(this._prefix=f.value,this._readPrefixIRI)},_readPrefixIRI:function(f){if("IRI"!==f.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',f);var w=this._readEntity(f);return this._prefixes[this._prefix]=w,this._prefixCallback(this._prefix,w),this._readDeclarationPunctuation},_readBaseIRI:function(f){return"IRI"!==f.type?this._error("Expected IRI to follow base declaration",f):(this._setBase(null===this._base||o.test(f.value)?f.value:this._resolveIRI(f)),this._readDeclarationPunctuation)},_readNamedGraphLabel:function(f){switch(f.type){case"IRI":case"blank":case"prefixed":return this._readSubject(f),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",f)}},_readNamedGraphBlankLabel:function(f){return"]"!==f.type?this._error("Invalid graph label",f):(this._subject="_:b"+h++,this._readGraph)},_readDeclarationPunctuation:function(f){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(f)):"."!==f.type?this._error("Expected declaration to end with a dot",f):this._readInTopContext},_readQuantifierList:function(f){var w;switch(f.type){case"IRI":case"prefixed":if(void 0!==(w=this._readEntity(f,!0)))break;default:return this._error("Unexpected "+f.type,f)}return this._explicitQuantifiers?(null===this._subject?this._triple(this._graph||"",this._predicate,this._subject="_:b"+h++,"urn:n3:quantifiers"):this._triple(this._subject,e,this._subject="_:b"+h++,"urn:n3:quantifiers"),this._triple(this._subject,y,w,"urn:n3:quantifiers")):this._quantified[w]=this._quantifiedPrefix+h++,this._readQuantifierPunctuation},_readQuantifierPunctuation:function(f){return","===f.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._triple(this._subject,e,F,"urn:n3:quantifiers"),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(f))},_getPathReader:function(f){return this._afterPath=f,this._readPath},_readPath:function(f){switch(f.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:var w=this._contextStack,T=w.length&&w[w.length-1];if(T&&"item"===T.type){var E=this._subject;this._restoreContext(),this._triple(this._subject,y,E,this._graph)}return this._afterPath(f)}},_readForwardPath:function(f){var w,T,E="_:b"+h++;if(void 0!==(T=this._readEntity(f)))return null===this._predicate?(w=this._subject,this._subject=E):(w=this._object,this._object=E),this._triple(w,T,E,this._graph),this._readPath},_readBackwardPath:function(f){var w,T,E="_:b"+h++;if(void 0!==(w=this._readEntity(f)))return null===this._predicate?(T=this._subject,this._subject=E):(T=this._object,this._object=E),this._triple(E,w,T,this._graph),this._readPath},_getContextEndReader:function(){var f=this._contextStack;if(!f.length)return this._readPunctuation;switch(f[f.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail}},_triple:function(f,w,T,E){this._callback(null,{subject:f,predicate:w,object:T,graph:E||""})},_error:function(f,w){var T=new Error(f+" on line "+w.line+".");T.context={token:w,line:w.line,previousToken:this._lexer.previousToken},this._callback(T),this._callback=v},_resolveIRI:function(f){var w=f.value;switch(w[0]){case void 0:return this._base;case"#":return this._base+w;case"?":return this._base.replace(/(?:\?.*)?$/,w);case"/":return("/"===w[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(w);default:return this._removeDotSegments(this._basePath+w)}},_removeDotSegments:function(f){if(!d.test(f))return f;for(var w="",T=f.length,E=-1,P=-1,M=0,j="/";E<T;){switch(j){case":":if(P<0&&"/"===f[++E]&&"/"===f[++E])for(;(P=E+1)<T&&"/"!==f[P];)E=P;break;case"?":case"#":E=T;break;case"/":if("."===f[E+1])switch(j=f[1+ ++E]){case"/":w+=f.substring(M,E-1),M=E+1;break;case void 0:case"?":case"#":return w+f.substring(M,E)+f.substr(E+1);case".":if(void 0===(j=f[1+ ++E])||"/"===j||"?"===j||"#"===j){if((M=(w+=f.substring(M,E-2)).lastIndexOf("/"))>=P&&(w=w.substr(0,M)),"/"!==j)return w+"/"+f.substr(E+1);M=E+1}}}j=f[++E]}return w+f.substring(M)},parse:function(f,w,T){var E=this;if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+m+++"_",this._prefixCallback=T||v,this._inversePredicate=!1,this._quantified=Object.create(null),!w){var P,M=[];if(this._callback=function(j,O){j?P=j:O&&M.push(O)},this._lexer.tokenize(f).every(function(j){return E._readCallback=E._readCallback(j)}),P)throw P;return M}this._callback=w,this._lexer.tokenize(f,function(j,O){null!==j?(E._callback(j),E._callback=v):E._readCallback&&(E._readCallback=E._readCallback(O))})}},ie.exports=k},{"./N3Lexer":55}],57:[function(J,ie,ue){var q=J("./N3Util").expandPrefixedName;function a(y,e){if(!(this instanceof a))return new a(y,e);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,e||!y||y[0]||(e=y,y=null),e=e||{},this._prefixes=Object.create(null),e.prefixes&&this.addPrefixes(e.prefixes),y&&this.addTriples(y)}function F(y){return"string"==typeof y||y instanceof String}a.prototype={get size(){var y=this._size;if(null!==y)return y;y=0;var e,o,u=this._graphs;for(var d in u)for(var m in e=u[d].subjects)for(var h in o=e[m])y+=Object.keys(o[h]).length;return this._size=y},_addToIndex:function(y,e,o,u){var d=y[e]||(y[e]={}),m=d[o]||(d[o]={}),h=u in m;return h||(m[u]=null),!h},_removeFromIndex:function(y,e,o,u){var d,m=y[e],h=m[o];for(d in delete h[u],h)return;for(d in delete m[o],m)return;delete y[e]},_findInIndex:function(y,e,o,u,d,m,h,k,v,f){var w,T,E,P=!e+!o+!u>1?Object.keys(this._ids):this._entities;for(var M in e&&((w=y,y={})[e]=w[e]),y){var j=P[M];if(T=y[M])for(var O in o&&((w=T,T={})[o]=w[o]),T){var L=P[O];if(E=T[O])for(var U=(u?u in E?[u]:[]:Object.keys(E)),W=U.length-1;W>=0;W--){var V={subject:"",predicate:"",object:"",graph:k};if(V[d]=j,V[m]=L,V[h]=P[U[W]],f)f.push(V);else if(v(V))return!0}}}return f},_loop:function(y,e){for(var o in y)e(o)},_loopByKey0:function(y,e,o){var u,d;if(u=y[e])for(d in u)o(d)},_loopByKey1:function(y,e,o){var u;for(u in y)y[u][e]&&o(u)},_loopBy2Keys:function(y,e,o,u){var d,m,h;if((d=y[e])&&(m=d[o]))for(h in m)u(h)},_countInIndex:function(y,e,o,u){var d,m,h,k=0;for(var v in e&&((d=y,y={})[e]=d[e]),y)if(m=y[v])for(var f in o&&((d=m,m={})[o]=d[o]),m)(h=m[f])&&(u?u in h&&k++:k+=Object.keys(h).length);return k},_getGraphs:function(y){if(!F(y))return this._graphs;var e={};return e[y]=this._graphs[y],e},_uniqueEntities:function(y){var e=Object.create(null),o=this._entities;return function(u){u in e||(e[u]=!0,y(o[u]))}},addTriple:function(y,e,o,u){e||(u=y.graph,o=y.object,e=y.predicate,y=y.subject),u=u||"";var d=this._graphs[u];d||(d=this._graphs[u]={subjects:{},predicates:{},objects:{}},Object.freeze(d));var m=this._ids,h=this._entities;y=m[y]||(m[h[++this._id]=y]=this._id),e=m[e]||(m[h[++this._id]=e]=this._id),o=m[o]||(m[h[++this._id]=o]=this._id);var k=this._addToIndex(d.subjects,y,e,o);return this._addToIndex(d.predicates,e,o,y),this._addToIndex(d.objects,o,y,e),this._size=null,k},addTriples:function(y){for(var e=y.length-1;e>=0;e--)this.addTriple(y[e])},addPrefix:function(y,e){this._prefixes[y]=e},addPrefixes:function(y){for(var e in y)this.addPrefix(e,y[e])},removeTriple:function(y,e,o,u){e||(u=y.graph,o=y.object,e=y.predicate,y=y.subject),u=u||"";var d,m,h,k=this._ids,v=this._graphs;if(!((y=k[y])&&(e=k[e])&&(o=k[o])&&(d=v[u])&&(m=d.subjects[y])&&(h=m[e])&&o in h))return!1;for(y in this._removeFromIndex(d.subjects,y,e,o),this._removeFromIndex(d.predicates,e,o,y),this._removeFromIndex(d.objects,o,y,e),null!==this._size&&this._size--,d.subjects)return!0;return delete v[u],!0},removeTriples:function(y){for(var e=y.length-1;e>=0;e--)this.removeTriple(y[e])},getTriples:function(y,e,o,u){var d=this._prefixes;return this.getTriplesByIRI(q(y,d),q(e,d),q(o,d),q(u,d))},getTriplesByIRI:function(y,e,o,u){var d,m,h,k,v=[],f=this._getGraphs(u),w=this._ids;if(F(y)&&!(m=w[y])||F(e)&&!(h=w[e])||F(o)&&!(k=w[o]))return v;for(var T in f)(d=f[T])&&(m?k?this._findInIndex(d.objects,k,m,h,"object","subject","predicate",T,null,v):this._findInIndex(d.subjects,m,h,null,"subject","predicate","object",T,null,v):h?this._findInIndex(d.predicates,h,k,null,"predicate","object","subject",T,null,v):k?this._findInIndex(d.objects,k,null,null,"object","subject","predicate",T,null,v):this._findInIndex(d.subjects,null,null,null,"subject","predicate","object",T,null,v));return v},countTriples:function(y,e,o,u){var d=this._prefixes;return this.countTriplesByIRI(q(y,d),q(e,d),q(o,d),q(u,d))},countTriplesByIRI:function(y,e,o,u){var d,m,h,k,v=0,f=this._getGraphs(u),w=this._ids;if(F(y)&&!(m=w[y])||F(e)&&!(h=w[e])||F(o)&&!(k=w[o]))return 0;for(var T in f)(d=f[T])&&(v+=y?o?this._countInIndex(d.objects,k,m,h):this._countInIndex(d.subjects,m,h,k):e?this._countInIndex(d.predicates,h,k,m):this._countInIndex(d.objects,k,m,h));return v},forEach:function(y,e,o,u,d){var m=this._prefixes;this.forEachByIRI(y,q(e,m),q(o,m),q(u,m),q(d,m))},forEachByIRI:function(y,e,o,u,d){this.someByIRI(function(m){return y(m),!1},e,o,u,d)},every:function(y,e,o,u,d){var m=this._prefixes;return this.everyByIRI(y,q(e,m),q(o,m),q(u,m),q(d,m))},everyByIRI:function(y,e,o,u,d){var m=!1,h=!this.someByIRI(function(k){return m=!0,!y(k)},e,o,u,d);return m&&h},some:function(y,e,o,u,d){var m=this._prefixes;return this.someByIRI(y,q(e,m),q(o,m),q(u,m),q(d,m))},someByIRI:function(y,e,o,u,d){var m,h,k,v,f=this._getGraphs(d),w=this._ids;if(F(e)&&!(h=w[e])||F(o)&&!(k=w[o])||F(u)&&!(v=w[u]))return!1;for(var T in f)if(m=f[T])if(h){if(v){if(this._findInIndex(m.objects,v,h,k,"object","subject","predicate",T,y,null))return!0}else if(this._findInIndex(m.subjects,h,k,null,"subject","predicate","object",T,y,null))return!0}else if(k){if(this._findInIndex(m.predicates,k,v,null,"predicate","object","subject",T,y,null))return!0}else if(v){if(this._findInIndex(m.objects,v,null,null,"object","subject","predicate",T,y,null))return!0}else if(this._findInIndex(m.subjects,null,null,null,"subject","predicate","object",T,y,null))return!0;return!1},getSubjects:function(y,e,o){var u=this._prefixes;return this.getSubjectsByIRI(q(y,u),q(e,u),q(o,u))},getSubjectsByIRI:function(y,e,o){var u=[];return this.forSubjectsByIRI(function(d){u.push(d)},y,e,o),u},forSubjects:function(y,e,o,u){var d=this._prefixes;this.forSubjectsByIRI(y,q(e,d),q(o,d),q(u,d))},forSubjectsByIRI:function(y,e,o,u){var d,m,h,k=this._ids,v=this._getGraphs(u);if(y=this._uniqueEntities(y),!(F(e)&&!(m=k[e])||F(o)&&!(h=k[o])))for(u in v)(d=v[u])&&(m?h?this._loopBy2Keys(d.predicates,m,h,y):this._loopByKey1(d.subjects,m,y):h?this._loopByKey0(d.objects,h,y):this._loop(d.subjects,y))},getPredicates:function(y,e,o){var u=this._prefixes;return this.getPredicatesByIRI(q(y,u),q(e,u),q(o,u))},getPredicatesByIRI:function(y,e,o){var u=[];return this.forPredicatesByIRI(function(d){u.push(d)},y,e,o),u},forPredicates:function(y,e,o,u){var d=this._prefixes;this.forPredicatesByIRI(y,q(e,d),q(o,d),q(u,d))},forPredicatesByIRI:function(y,e,o,u){var d,m,h,k=this._ids,v=this._getGraphs(u);if(y=this._uniqueEntities(y),!(F(e)&&!(m=k[e])||F(o)&&!(h=k[o])))for(u in v)(d=v[u])&&(m?h?this._loopBy2Keys(d.objects,h,m,y):this._loopByKey0(d.subjects,m,y):h?this._loopByKey1(d.predicates,h,y):this._loop(d.predicates,y))},getObjects:function(y,e,o){var u=this._prefixes;return this.getObjectsByIRI(q(y,u),q(e,u),q(o,u))},getObjectsByIRI:function(y,e,o){var u=[];return this.forObjectsByIRI(function(d){u.push(d)},y,e,o),u},forObjects:function(y,e,o,u){var d=this._prefixes;this.forObjectsByIRI(y,q(e,d),q(o,d),q(u,d))},forObjectsByIRI:function(y,e,o,u){var d,m,h,k=this._ids,v=this._getGraphs(u);if(y=this._uniqueEntities(y),!(F(e)&&!(m=k[e])||F(o)&&!(h=k[o])))for(u in v)(d=v[u])&&(m?h?this._loopBy2Keys(d.subjects,m,h,y):this._loopByKey1(d.objects,m,y):h?this._loopByKey0(d.predicates,h,y):this._loop(d.objects,y))},getGraphs:function(y,e,o){var u=this._prefixes;return this.getGraphsByIRI(q(y,u),q(e,u),q(o,u))},getGraphsByIRI:function(y,e,o){var u=[];return this.forGraphsByIRI(function(d){u.push(d)},y,e,o),u},forGraphs:function(y,e,o,u){var d=this._prefixes;this.forGraphsByIRI(y,q(e,d),q(o,d),q(u,d))},forGraphsByIRI:function(y,e,o,u){for(var d in this._graphs)this.someByIRI(function(m){return y(m.graph),!0},e,o,u,d)},createBlankNode:function(y){var e,o;if(y)for(e=y="_:"+y,o=1;this._ids[e];)e=y+o++;else do{e="_:b"+this._blankNodeIndex++}while(this._ids[e]);return this._ids[e]=++this._id,this._entities[this._id]=e,e}},ie.exports=a},{"./N3Util":60}],58:[function(J,ie,ue){var q=J("stream").Transform,a=J("util"),F=J("./N3Parser.js");function y(e){if(!(this instanceof y))return new y(e);q.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var o,u,d=this;new F(e).parse({on:function(m,h){switch(m){case"data":o=h;break;case"end":u=h}}},function(m,h){m&&d.emit("error",m)||h&&d.push(h)},function(m,h){d.emit("prefix",m,h)}),this._transform=function(m,h,k){o(m),k()},this._flush=function(m){u(),m()}}a.inherits(y,q),ie.exports=y},{"./N3Parser.js":56,stream:78,util:8}],59:[function(J,ie,ue){var q=J("stream").Transform,a=J("util"),F=J("./N3Writer.js");function y(e){if(!(this instanceof y))return new y(e);q.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var o=this,u=new F({write:function(d,m,h){o.push(d),h&&h()},end:function(d){o.push(null),d&&d()}},e);this._transform=function(d,m,h){u.addTriple(d,h)},this._flush=function(d){u.end(d)}}a.inherits(y,q),ie.exports=y},{"./N3Writer.js":61,stream:78,util:8}],60:[function(J,ie,ue){var a="http://www.w3.org/2001/XMLSchema#double",F={isIRI:function(y){if("string"!=typeof y)return!1;if(0===y.length)return!0;var e=y[0];return'"'!==e&&"_"!==e},isLiteral:function(y){return"string"==typeof y&&'"'===y[0]},isBlank:function(y){return"string"==typeof y&&"_:"===y.substr(0,2)},isDefaultGraph:function(y){return!y},inDefaultGraph:function(y){return!y.graph},getLiteralValue:function(y){var e=/^"([^]*)"/.exec(y);if(!e)throw new Error(y+" is not a literal");return e[1]},getLiteralType:function(y){var e=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(y);if(!e)throw new Error(y+" is not a literal");return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(y){var e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(y);if(!e)throw new Error(y+" is not a literal");return e[1]?e[1].toLowerCase():""},isPrefixedName:function(y){return"string"==typeof y&&/^[^:\/"']*:[^:\/"']+$/.test(y)},expandPrefixedName:function(y,e){var o,u,d,m=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(y);return m&&(u=e[o=m[1]],d=m.index),void 0===u?y:0===d?u+y.substr(o.length+1):y.substr(0,d+3)+u+y.substr(d+o.length+4)},createIRI:function(y){return y&&'"'===y[0]?F.getLiteralValue(y):y},createLiteral:function(y,e){if(!e)switch(typeof y){case"boolean":e="http://www.w3.org/2001/XMLSchema#boolean";break;case"number":isFinite(y)?e=y%1==0?"http://www.w3.org/2001/XMLSchema#integer":a:(e=a,isNaN(y)||(y=y>0?"INF":"-INF"));break;default:return'"'+y+'"'}return'"'+y+(/^[a-z]+(-[a-z0-9]+)*$/i.test(e)?'"@'+e.toLowerCase():'"^^'+e)},prefix:function(y){return F.prefixes({"":y})("")},prefixes:function(y){var e=Object.create(null);for(var o in y)u(o,y[o]);function u(d,m){if(m||!(d in e)){var h=Object.create(null);m=m||"",e[d]=function(k){return h[k]||(h[k]=m+k)}}return e[d]}return u}};ie.exports=F},{}],61:[function(J,ie,ue){var q=/^"([^]*)"(?:\^\^(.+)|@([a-z]+(?:-[a-z0-9]+)*))?$/i,a=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,F=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,y={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function e(u,d){if(!(this instanceof e))return new e(u,d);if(u&&"function"!=typeof u.write&&(d=u,u=null),d=d||{},u)this._outputStream=u,this._endStream=void 0===d.end||!!d.end;else{var m="";this._outputStream={write:function(h,k,v){m+=h,v&&v()},end:function(h){h&&h(null,m)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(d.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),d.prefixes&&this.addPrefixes(d.prefixes))}function o(u){var d=y[u];return void 0===d&&(1===u.length?(d=u.charCodeAt(0).toString(16),d="\\u0000".substr(0,6-d.length)+d):(d=(1024*(u.charCodeAt(0)-55296)+u.charCodeAt(1)+9216).toString(16),d="\\U00000000".substr(0,10-d.length)+d)),d}e.prototype={_write:function(u,d){this._outputStream.write(u,"utf8",d)},_writeTriple:function(u,d,m,h,k){try{this._graph!==h&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(h?this._encodeIriOrBlankNode(h)+" {\n":"")),this._subject=null,this._graph="["!==h[0]?h:"]"),this._subject===u?this._predicate===d?this._write(", "+this._encodeObject(m),k):this._write(";\n    "+this._encodePredicate(this._predicate=d)+" "+this._encodeObject(m),k):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=u)+" "+this._encodePredicate(this._predicate=d)+" "+this._encodeObject(m),k)}catch(v){k&&k(v)}},_writeTripleLine:function(u,d,m,h,k){delete this._prefixMatch;try{this._write(this.tripleToString(u,d,m,h),k)}catch(v){k&&k(v)}},tripleToString:function(u,d,m,h){return this._encodeIriOrBlankNode(u)+" "+this._encodeIriOrBlankNode(d)+" "+this._encodeObject(m)+(h?" "+this._encodeIriOrBlankNode(h)+".\n":".\n")},triplesToString:function(u){return u.map(function(d){return this.tripleToString(d.subject,d.predicate,d.object,d.graph)},this).join("")},_encodeIriOrBlankNode:function(u){var d=u[0];if("["===d||"("===d||"_"===d&&":"===u[1])return u;a.test(u)&&(u=u.replace(F,o));var m=this._prefixRegex.exec(u);return m?m[1]?this._prefixIRIs[m[1]]+m[2]:u:"<"+u+">"},_encodeLiteral:function(u,d,m){return a.test(u)&&(u=u.replace(F,o)),m?'"'+u+'"@'+m:d?'"'+u+'"^^'+this._encodeIriOrBlankNode(d):'"'+u+'"'},_encodeSubject:function(u){if('"'===u[0])throw new Error("A literal as subject is not allowed: "+u);return"["===u[0]&&(this._subject="]"),this._encodeIriOrBlankNode(u)},_encodePredicate:function(u){if('"'===u[0])throw new Error("A literal as predicate is not allowed: "+u);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===u?"a":this._encodeIriOrBlankNode(u)},_encodeObject:function(u){if('"'!==u[0])return this._encodeIriOrBlankNode(u);var d=q.exec(u);if(!d)throw new Error("Invalid literal: "+u);return this._encodeLiteral(d[1],d[2],d[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(u,d,m,h,k){void 0===m?this._writeTriple(u.subject,u.predicate,u.object,u.graph||"",d):"string"!=typeof h?this._writeTriple(u,d,m,"",h):this._writeTriple(u,d,m,h,k)},addTriples:function(u){for(var d=0;d<u.length;d++)this.addTriple(u[d])},addPrefix:function(u,d,m){var h={};h[u]=d,this.addPrefixes(h,m)},addPrefixes:function(u,d){var m=this._prefixIRIs,h=!1;for(var k in u){var v=u[k];/[#\/]$/.test(v)&&m[v]!==(k+=":")&&(h=!0,m[v]=k,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+k+" <"+v+">.\n"))}if(h){var f="",w="";for(var T in m)f+=f?"|"+T:T,w+=(w?"|":"")+m[T];f=f.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+w+")[^/]*$|^("+f+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(h?"\n":"",d)},blank:function(u,d){var m,h,k=u;switch(void 0===u?k=[]:"string"==typeof u?k=[{predicate:u,object:d}]:"length"in u||(k=[u]),h=k.length){case 0:return"[]";case 1:if("["!==(m=k[0]).object[0])return"[ "+this._encodePredicate(m.predicate)+" "+this._encodeObject(m.object)+" ]";default:for(var v="[",f=0;f<h;f++)(m=k[f]).predicate===u?v+=", "+this._encodeObject(m.object):(v+=(f?";\n  ":"\n  ")+this._encodePredicate(m.predicate)+" "+this._encodeObject(m.object),u=m.predicate);return v+"\n]"}},list:function(u){for(var d=u&&u.length||0,m=new Array(d),h=0;h<d;h++)m[h]=this._encodeObject(u[h]);return"("+m.join(" ")+")"},_prefixRegex:/$0^/,end:function(u){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var d=u&&function(m,h){d=null,u(m,h)};if(this._endStream)try{return this._outputStream.end(d)}catch(m){}d&&d()}},ie.exports=e},{}],62:[function(J,ie,ue){var q,a,F=ie.exports={};function y(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function o(T){if(q===setTimeout)return setTimeout(T,0);if((q===y||!q)&&setTimeout)return q=setTimeout,setTimeout(T,0);try{return q(T,0)}catch(E){try{return q.call(null,T,0)}catch(P){return q.call(this,T,0)}}}!function(){try{q="function"==typeof setTimeout?setTimeout:y}catch(T){q=y}try{a="function"==typeof clearTimeout?clearTimeout:e}catch(T){a=e}}();var u,d=[],m=!1,h=-1;function k(){m&&u&&(m=!1,u.length?d=u.concat(d):h=-1,d.length&&v())}function v(){if(!m){var T=o(k);m=!0;for(var E=d.length;E;){for(u=d,d=[];++h<E;)u&&u[h].run();h=-1,E=d.length}u=null,m=!1,function(P){if(a===clearTimeout)return clearTimeout(P);if((a===e||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(P);try{a(P)}catch(M){try{return a.call(null,P)}catch(j){return a.call(this,P)}}}(T)}}function f(T,E){this.fun=T,this.array=E}function w(){}F.nextTick=function(T){var E=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)E[P-1]=arguments[P];d.push(new f(T,E)),1!==d.length||m||o(v)},f.prototype.run=function(){this.fun.apply(null,this.array)},F.title="browser",F.browser=!0,F.env={},F.argv=[],F.version="",F.versions={},F.on=w,F.addListener=w,F.once=w,F.off=w,F.removeListener=w,F.removeAllListeners=w,F.emit=w,F.prependListener=w,F.prependOnceListener=w,F.listeners=function(T){return[]},F.binding=function(T){throw new Error("process.binding is not supported")},F.cwd=function(){return"/"},F.chdir=function(T){throw new Error("process.chdir is not supported")},F.umask=function(){return 0}},{}],63:[function(J,ie,ue){"use strict";function q(F,y){return Object.prototype.hasOwnProperty.call(F,y)}ie.exports=function(F,y,e,o){y=y||"&",e=e||"=";var u={};if("string"!=typeof F||0===F.length)return u;var d=/\+/g;F=F.split(y);var m=1e3;o&&"number"==typeof o.maxKeys&&(m=o.maxKeys);var h=F.length;m>0&&h>m&&(h=m);for(var k=0;k<h;++k){var v,f,w,T,E=F[k].replace(d,"%20"),P=E.indexOf(e);P>=0?(v=E.substr(0,P),f=E.substr(P+1)):(v=E,f=""),w=decodeURIComponent(v),T=decodeURIComponent(f),q(u,w)?a(u[w])?u[w].push(T):u[w]=[u[w],T]:u[w]=T}return u};var a=Array.isArray||function(F){return"[object Array]"===Object.prototype.toString.call(F)}},{}],64:[function(J,ie,ue){"use strict";var q=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};ie.exports=function(e,o,u,d){return o=o||"&",u=u||"=",null===e&&(e=void 0),"object"==typeof e?F(y(e),function(m){var h=encodeURIComponent(q(m))+u;return a(e[m])?F(e[m],function(k){return h+encodeURIComponent(q(k))}).join(o):h+encodeURIComponent(q(e[m]))}).join(o):d?encodeURIComponent(q(d))+u+encodeURIComponent(q(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function F(e,o){if(e.map)return e.map(o);for(var u=[],d=0;d<e.length;d++)u.push(o(e[d],d));return u}var y=Object.keys||function(e){var o=[];for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&o.push(u);return o}},{}],65:[function(J,ie,ue){"use strict";ue.decode=ue.parse=J("./decode"),ue.encode=ue.stringify=J("./encode")},{"./decode":63,"./encode":64}],66:[function(J,ie,ue){ie.exports=J("./lib")},{"./lib":75}],67:[function(J,ie,ue){"use strict";ie.exports=class bp{constructor(a,F=new Map,y=0){this.prefix=a,this._existing=F,this.counter=y}clone(){const{prefix:a,_existing:F,counter:y}=this;return new bp(a,new Map(F),y)}getId(a){const F=a&&this._existing.get(a);if(F)return F;const y=this.prefix+this.counter;return this.counter++,a&&this._existing.set(a,y),y}hasId(a){return this._existing.has(a)}getOldIds(){return[...this._existing.keys()]}}},{}],68:[function(J,ie,ue){"use strict";J("setimmediate");const q=self.crypto||self.msCrypto;ie.exports=class{constructor(a){if(!q||!q.subtle)throw new Error("crypto.subtle not found.");if("sha256"===a)this.algorithm={name:"SHA-256"};else{if("sha1"!==a)throw new Error(`Unsupport algorithm "${a}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(a){this._content+=a}async digest(){const a=(new TextEncoder).encode(this._content),F=new Uint8Array(await q.subtle.digest(this.algorithm,a));let y="";for(let e=0;e<F.length;++e)y+=F[e].toString(16).padStart(2,"0");return y}}},{setimmediate:77}],69:[function(J,ie,ue){"use strict";const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",a="http://www.w3.org/2001/XMLSchema#string",F="Literal",y={};function e(d,m){return d.subject.termType===m.subject.termType&&d.object.termType===m.object.termType&&d.subject.value===m.subject.value&&d.predicate.value===m.predicate.value&&d.object.value===m.object.value&&(d.object.termType!==F||d.object.datatype.termType===m.object.datatype.termType&&d.object.language===m.object.language&&d.object.datatype.value===m.object.datatype.value)}y.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,y.empty=new RegExp("^[ \\t]*$"),y.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9])(?:(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040.])*(?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_0-9-\xb7\u0300-\u036f\u203f-\u2040]))?))[ \\t]*\\.))[ \\t]*$'),ie.exports=class Cc{static parse(m){const h=[],k={},v=m.split(y.eoln);let f=0;for(const w of v){if(f++,y.empty.test(w))continue;const T=w.match(y.quad);if(null===T)throw new Error("N-Quads parse error on line "+f+".");const E={subject:null,predicate:null,object:null,graph:null};if(void 0!==T[1]?E.subject={termType:"NamedNode",value:T[1]}:E.subject={termType:"BlankNode",value:T[2]},E.predicate={termType:"NamedNode",value:T[3]},void 0!==T[4]?E.object={termType:"NamedNode",value:T[4]}:void 0!==T[5]?E.object={termType:"BlankNode",value:T[5]}:(E.object={termType:F,value:void 0,datatype:{termType:"NamedNode"}},void 0!==T[7]?E.object.datatype.value=T[7]:void 0!==T[8]?(E.object.datatype.value=q,E.object.language=T[8]):E.object.datatype.value=a,E.object.value=T[6].replace(u,function(P,M,j,O){if(M)switch(M){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(j)return String.fromCharCode(parseInt(j,16));if(O)throw new Error("Unsupported U escape")})),void 0!==T[9]?E.graph={termType:"NamedNode",value:T[9]}:void 0!==T[10]?E.graph={termType:"BlankNode",value:T[10]}:E.graph={termType:"DefaultGraph",value:""},E.graph.value in k){let P=!0;const M=k[E.graph.value];for(const j of M)if(e(j,E)){P=!1;break}P&&(M.push(E),h.push(E))}else k[E.graph.value]=[E],h.push(E)}return h}static serialize(m){Array.isArray(m)||(m=Cc.legacyDatasetToQuads(m));const h=[];for(const k of m)h.push(Cc.serializeQuad(k));return h.sort().join("")}static serializeQuad(m){const h=m.subject,k=m.predicate,v=m.object,f=m.graph;let w="";return"NamedNode"===h.termType?w+=`<${h.value}>`:w+=`${h.value}`,w+=` <${k.value}> `,"NamedNode"===v.termType?w+=`<${v.value}>`:"BlankNode"===v.termType?w+=v.value:(w+=`"${T=v.value,T.replace(o,function(E){switch(E){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}"`,v.datatype.value===q?v.language&&(w+=`@${v.language}`):v.datatype.value!==a&&(w+=`^^<${v.datatype.value}>`)),"NamedNode"===f.termType?w+=` <${f.value}>`:"BlankNode"===f.termType&&(w+=` ${f.value}`),w+" .\n";var T}static legacyDatasetToQuads(m){const h=[],k={"blank node":"BlankNode",IRI:"NamedNode",literal:F};for(const v in m)m[v].forEach(f=>{const w={};for(const T in f){const E=f[T],P={termType:k[E.type],value:E.value};P.termType===F&&(P.datatype={termType:"NamedNode"},"datatype"in E&&(P.datatype.value=E.datatype),"language"in E?("datatype"in E||(P.datatype.value=q),P.language=E.language):"datatype"in E||(P.datatype.value=a)),w[T]=P}w.graph="@default"===v?{termType:"DefaultGraph",value:""}:{termType:v.startsWith("_:")?"BlankNode":"NamedNode",value:v},h.push(w)});return h}};const o=/["\\\n\r]/g,u=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},{}],70:[function(J,ie,ue){"use strict";ie.exports=class{constructor(q){this.current=q.sort(),this.done=!1,this.dir=new Map;for(let a=0;a<q.length;++a)this.dir.set(q[a],!0)}hasNext(){return!this.done}next(){const{current:q,dir:a}=this,F=q.slice();let y=null,e=0;const o=q.length;for(let u=0;u<o;++u){const d=q[u],m=a.get(d);(null===y||d>y)&&(m&&u>0&&d>q[u-1]||!m&&u<o-1&&d>q[u+1])&&(y=d,e=u)}if(null===y)this.done=!0;else{const u=a.get(y)?e-1:e+1;q[e]=q[u],q[u]=y;for(const d of q)d>y&&a.set(d,!a.get(d))}return F}}},{}],71:[function(J,ie,ue){(function(q){(function(){"use strict";const a=J("./IdentifierIssuer"),F=J("./MessageDigest"),y=J("./Permuter"),e=J("./NQuads");function o(u,d){return u.hash<d.hash?-1:u.hash>d.hash?1:0}ie.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new a("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}async main(u){this.quads=u;for(const w of u)this._addBlankNodeQuadInfo({quad:w,component:w.subject}),this._addBlankNodeQuadInfo({quad:w,component:w.object}),this._addBlankNodeQuadInfo({quad:w,component:w.graph});const d=new Map,m=[...this.blankNodeInfo.keys()];let h=0;for(const w of m)++h%100==0&&await this._yield(),await this._hashAndTrackBlankNode({id:w,hashToBlankNodes:d});const k=[...d.keys()].sort(),v=[];for(const w of k){const T=d.get(w);if(T.length>1){v.push(T);continue}const E=T[0];this.canonicalIssuer.getId(E)}for(const w of v){const T=[];for(const E of w){if(this.canonicalIssuer.hasId(E))continue;const P=new a("_:b");P.getId(E);const M=await this.hashNDegreeQuads(E,P);T.push(M)}T.sort(o);for(const E of T){const P=E.issuer.getOldIds();for(const M of P)this.canonicalIssuer.getId(M)}}const f=[];for(const w of this.quads){const T=cn({},w);T.subject=this._useCanonicalId({component:T.subject}),T.object=this._useCanonicalId({component:T.object}),T.graph=this._useCanonicalId({component:T.graph}),f.push(e.serializeQuad(T))}return f.sort(),f.join("")}async hashFirstDegreeQuads(u){const d=[],m=this.blankNodeInfo.get(u),h=m.quads;for(const v of h){const f={subject:null,predicate:v.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(u,v.subject,"subject"),f.object=this.modifyFirstDegreeComponent(u,v.object,"object"),f.graph=this.modifyFirstDegreeComponent(u,v.graph,"graph"),d.push(e.serializeQuad(f))}d.sort();const k=new F(this.hashAlgorithm);for(const v of d)k.update(v);return m.hash=await k.digest(),m.hash}async hashRelatedBlankNode(u,d,m,h){let k;k=this.canonicalIssuer.hasId(u)?this.canonicalIssuer.getId(u):m.hasId(u)?m.getId(u):this.blankNodeInfo.get(u).hash;const v=new F(this.hashAlgorithm);return v.update(h),"g"!==h&&v.update(this.getRelatedPredicate(d)),v.update(k),v.digest()}async hashNDegreeQuads(u,d){const m=new F(this.hashAlgorithm),h=await this.createHashToRelated(u,d),k=[...h.keys()].sort();for(const v of k){m.update(v);let f,w="";const T=new y(h.get(v));let E=0;for(;T.hasNext();){const P=T.next();++E%3==0&&await this._yield();let M=d.clone(),j="";const O=[];let L=!1;for(const U of P)if(this.canonicalIssuer.hasId(U)?j+=this.canonicalIssuer.getId(U):(M.hasId(U)||O.push(U),j+=M.getId(U)),0!==w.length&&j>w){L=!0;break}if(!L){for(const U of O){const W=await this.hashNDegreeQuads(U,M);if(j+=M.getId(U),j+=`<${W.hash}>`,M=W.issuer,0!==w.length&&j>w){L=!0;break}}L||(0===w.length||j<w)&&(w=j,f=M)}}m.update(w),d=f}return{hash:await m.digest(),issuer:d}}modifyFirstDegreeComponent(u,d){return"BlankNode"!==d.termType?d:{termType:"BlankNode",value:d.value===u?"_:a":"_:z"}}getRelatedPredicate(u){return`<${u.predicate.value}>`}async createHashToRelated(u,d){const m=new Map,h=this.blankNodeInfo.get(u).quads;let k=0;for(const v of h)++k%100==0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:v,component:v.subject,position:"s",id:u,issuer:d,hashToRelated:m}),this._addRelatedBlankNodeHash({quad:v,component:v.object,position:"o",id:u,issuer:d,hashToRelated:m}),this._addRelatedBlankNodeHash({quad:v,component:v.graph,position:"g",id:u,issuer:d,hashToRelated:m})]);return m}async _hashAndTrackBlankNode({id:u,hashToBlankNodes:d}){const m=await this.hashFirstDegreeQuads(u),h=d.get(m);h?h.push(u):d.set(m,[u])}_addBlankNodeQuadInfo({quad:u,component:d}){if("BlankNode"!==d.termType)return;const m=d.value,h=this.blankNodeInfo.get(m);h?h.quads.add(u):this.blankNodeInfo.set(m,{quads:new Set([u]),hash:null})}async _addRelatedBlankNodeHash({quad:u,component:d,position:m,id:h,issuer:k,hashToRelated:v}){if("BlankNode"!==d.termType||d.value===h)return;const f=d.value,w=await this.hashRelatedBlankNode(f,u,k,m),T=v.get(w);T?T.push(f):v.set(w,[f])}_useCanonicalId({component:u}){return"BlankNode"!==u.termType||u.value.startsWith(this.canonicalIssuer.prefix)?u:{termType:"BlankNode",value:this.canonicalIssuer.getId(u.value)}}async _yield(){return new Promise(u=>q(u))}}}).call(this)}).call(this,J("timers").setImmediate)},{"./IdentifierIssuer":67,"./MessageDigest":68,"./NQuads":69,"./Permuter":70,timers:114}],72:[function(J,ie,ue){"use strict";const q=J("./IdentifierIssuer"),a=J("./MessageDigest"),F=J("./Permuter"),y=J("./NQuads");function e(o,u){return o.hash<u.hash?-1:o.hash>u.hash?1:0}ie.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new q("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(o){this.quads=o;for(const v of o)this._addBlankNodeQuadInfo({quad:v,component:v.subject}),this._addBlankNodeQuadInfo({quad:v,component:v.object}),this._addBlankNodeQuadInfo({quad:v,component:v.graph});const u=new Map,d=[...this.blankNodeInfo.keys()];for(const v of d)this._hashAndTrackBlankNode({id:v,hashToBlankNodes:u});const m=[...u.keys()].sort(),h=[];for(const v of m){const f=u.get(v);if(f.length>1){h.push(f);continue}const w=f[0];this.canonicalIssuer.getId(w)}for(const v of h){const f=[];for(const w of v){if(this.canonicalIssuer.hasId(w))continue;const T=new q("_:b");T.getId(w);const E=this.hashNDegreeQuads(w,T);f.push(E)}f.sort(e);for(const w of f){const T=w.issuer.getOldIds();for(const E of T)this.canonicalIssuer.getId(E)}}const k=[];for(const v of this.quads){const f=cn({},v);f.subject=this._useCanonicalId({component:f.subject}),f.object=this._useCanonicalId({component:f.object}),f.graph=this._useCanonicalId({component:f.graph}),k.push(y.serializeQuad(f))}return k.sort(),k.join("")}hashFirstDegreeQuads(o){const u=[],d=this.blankNodeInfo.get(o),m=d.quads;for(const k of m){const v={subject:null,predicate:k.predicate,object:null,graph:null};v.subject=this.modifyFirstDegreeComponent(o,k.subject,"subject"),v.object=this.modifyFirstDegreeComponent(o,k.object,"object"),v.graph=this.modifyFirstDegreeComponent(o,k.graph,"graph"),u.push(y.serializeQuad(v))}u.sort();const h=new a(this.hashAlgorithm);for(const k of u)h.update(k);return d.hash=h.digest(),d.hash}hashRelatedBlankNode(o,u,d,m){let h;h=this.canonicalIssuer.hasId(o)?this.canonicalIssuer.getId(o):d.hasId(o)?d.getId(o):this.blankNodeInfo.get(o).hash;const k=new a(this.hashAlgorithm);return k.update(m),"g"!==m&&k.update(this.getRelatedPredicate(u)),k.update(h),k.digest()}hashNDegreeQuads(o,u){const d=new a(this.hashAlgorithm),m=this.createHashToRelated(o,u),h=[...m.keys()].sort();for(const k of h){d.update(k);let v,f="";const w=new F(m.get(k));for(;w.hasNext();){const T=w.next();let E=u.clone(),P="";const M=[];let j=!1;for(const O of T)if(this.canonicalIssuer.hasId(O)?P+=this.canonicalIssuer.getId(O):(E.hasId(O)||M.push(O),P+=E.getId(O)),0!==f.length&&P>f){j=!0;break}if(!j){for(const O of M){const L=this.hashNDegreeQuads(O,E);if(P+=E.getId(O),P+=`<${L.hash}>`,E=L.issuer,0!==f.length&&P>f){j=!0;break}}j||(0===f.length||P<f)&&(f=P,v=E)}}d.update(f),u=v}return{hash:d.digest(),issuer:u}}modifyFirstDegreeComponent(o,u){return"BlankNode"!==u.termType?u:{termType:"BlankNode",value:u.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}createHashToRelated(o,u){const d=new Map,m=this.blankNodeInfo.get(o).quads;for(const h of m)this._addRelatedBlankNodeHash({quad:h,component:h.subject,position:"s",id:o,issuer:u,hashToRelated:d}),this._addRelatedBlankNodeHash({quad:h,component:h.object,position:"o",id:o,issuer:u,hashToRelated:d}),this._addRelatedBlankNodeHash({quad:h,component:h.graph,position:"g",id:o,issuer:u,hashToRelated:d});return d}_hashAndTrackBlankNode({id:o,hashToBlankNodes:u}){const d=this.hashFirstDegreeQuads(o),m=u.get(d);m?m.push(o):u.set(d,[o])}_addBlankNodeQuadInfo({quad:o,component:u}){if("BlankNode"!==u.termType)return;const d=u.value,m=this.blankNodeInfo.get(d);m?m.quads.add(o):this.blankNodeInfo.set(d,{quads:new Set([o]),hash:null})}_addRelatedBlankNodeHash({quad:o,component:u,position:d,id:m,issuer:h,hashToRelated:k}){if("BlankNode"!==u.termType||u.value===m)return;const v=u.value,f=this.hashRelatedBlankNode(v,o,h,d),w=k.get(f);w?w.push(v):k.set(f,[v])}_useCanonicalId({component:o}){return"BlankNode"!==o.termType||o.value.startsWith(this.canonicalIssuer.prefix)?o:{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}}}},{"./IdentifierIssuer":67,"./MessageDigest":68,"./NQuads":69,"./Permuter":70}],73:[function(J,ie,ue){"use strict";const q=J("./URDNA2015");ie.exports=class extends q{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(a,F,y){return"BlankNode"!==F.termType?F:"graph"===y?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:F.value===a?"_:a":"_:z"}}getRelatedPredicate(a){return a.predicate.value}async createHashToRelated(a,F){const y=new Map,e=this.blankNodeInfo.get(a).quads;let o=0;for(const u of e){let d,m;if("BlankNode"===u.subject.termType&&u.subject.value!==a)m=u.subject.value,d="p";else{if("BlankNode"!==u.object.termType||u.object.value===a)continue;m=u.object.value,d="r"}++o%100==0&&await this._yield();const h=await this.hashRelatedBlankNode(m,u,F,d),k=y.get(h);k?k.push(m):y.set(h,[m])}return y}}},{"./URDNA2015":71}],74:[function(J,ie,ue){"use strict";const q=J("./URDNA2015Sync");ie.exports=class extends q{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(a,F,y){return"BlankNode"!==F.termType?F:"graph"===y?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:F.value===a?"_:a":"_:z"}}getRelatedPredicate(a){return a.predicate.value}createHashToRelated(a,F){const y=new Map,e=this.blankNodeInfo.get(a).quads;for(const o of e){let u,d;if("BlankNode"===o.subject.termType&&o.subject.value!==a)d=o.subject.value,u="p";else{if("BlankNode"!==o.object.termType||o.object.value===a)continue;d=o.object.value,u="r"}const m=this.hashRelatedBlankNode(d,o,F,u),h=y.get(m);h?h.push(d):y.set(m,[d])}return y}}},{"./URDNA2015Sync":72}],75:[function(J,ie,ue){"use strict";const q=J("./URDNA2015"),a=J("./URGNA2012"),F=J("./URDNA2015Sync"),y=J("./URGNA2012Sync");let e;try{e=J("rdf-canonize-native")}catch(u){}const o={};ie.exports=o,o.NQuads=J("./NQuads"),o.IdentifierIssuer=J("./IdentifierIssuer"),o._rdfCanonizeNative=function(u){return u&&(e=u),e},o.canonize=async function(u,d){if(Array.isArray(u)||(u=o.NQuads.legacyDatasetToQuads(u)),d.useNative){if(!e)throw new Error("rdf-canonize-native not available");return new Promise((m,h)=>e.canonize(u,d,(k,v)=>k?h(k):m(v)))}if("URDNA2015"===d.algorithm)return new q(d).main(u);if("URGNA2012"===d.algorithm)return new a(d).main(u);throw"algorithm"in d?new Error("Invalid RDF Dataset Canonicalization algorithm: "+d.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},o._canonizeSync=function(u,d){if(Array.isArray(u)||(u=o.NQuads.legacyDatasetToQuads(u)),d.useNative){if(e)return e.canonizeSync(u,d);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===d.algorithm)return new F(d).main(u);if("URGNA2012"===d.algorithm)return new y(d).main(u);throw"algorithm"in d?new Error("Invalid RDF Dataset Canonicalization algorithm: "+d.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},{"./IdentifierIssuer":67,"./NQuads":69,"./URDNA2015":71,"./URDNA2015Sync":72,"./URGNA2012":73,"./URGNA2012Sync":74,"rdf-canonize-native":4}],76:[function(J,ie,ue){var q=J("buffer"),a=q.Buffer;function F(e,o){for(var u in e)o[u]=e[u]}function y(e,o,u){return a(e,o,u)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?ie.exports=q:(F(q,ue),ue.Buffer=y),y.prototype=Object.create(a.prototype),F(a,y),y.from=function(e,o,u){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,o,u)},y.alloc=function(e,o,u){if("number"!=typeof e)throw new TypeError("Argument must be a number");var d=a(e);return void 0!==o?"string"==typeof u?d.fill(o,u):d.fill(o):d.fill(0),d},y.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},y.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return q.SlowBuffer(e)}},{buffer:9}],77:[function(J,ie,ue){(function(q,a){(function(){!function(F,y){"use strict";if(!F.setImmediate){var e,o,u,d,m,h=1,k={},v=!1,f=F.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(F);w=w&&w.setTimeout?w:F,"[object process]"==={}.toString.call(F.process)?e=function(P){q.nextTick(function(){E(P)})}:function(){if(F.postMessage&&!F.importScripts){var P=!0,M=F.onmessage;return F.onmessage=function(){P=!1},F.postMessage("","*"),F.onmessage=M,P}}()?(d="setImmediate$"+Math.random()+"$",m=function(P){P.source===F&&"string"==typeof P.data&&0===P.data.indexOf(d)&&E(+P.data.slice(d.length))},F.addEventListener?F.addEventListener("message",m,!1):F.attachEvent("onmessage",m),e=function(P){F.postMessage(d+P,"*")}):F.MessageChannel?((u=new MessageChannel).port1.onmessage=function(P){E(P.data)},e=function(P){u.port2.postMessage(P)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,e=function(P){var M=f.createElement("script");M.onreadystatechange=function(){E(P),M.onreadystatechange=null,o.removeChild(M),M=null},o.appendChild(M)}):e=function(P){setTimeout(E,0,P)},w.setImmediate=function(P){"function"!=typeof P&&(P=new Function(""+P));for(var M=new Array(arguments.length-1),j=0;j<M.length;j++)M[j]=arguments[j+1];var O={callback:P,args:M};return k[h]=O,e(h),h++},w.clearImmediate=T}function T(P){delete k[P]}function E(P){if(v)setTimeout(E,0,P);else{var M=k[P];if(M){v=!0;try{!function(j){var O=j.callback,L=j.args;switch(L.length){case 0:O();break;case 1:O(L[0]);break;case 2:O(L[0],L[1]);break;case 3:O(L[0],L[1],L[2]);break;default:O.apply(undefined,L)}}(M)}finally{T(P),v=!1}}}}}("undefined"==typeof self?void 0===a?this:a:self)}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:62}],78:[function(J,ie,ue){ie.exports=a;var q=J("events").EventEmitter;function a(){q.call(this)}J("inherits")(a,q),a.Readable=J("readable-stream/lib/_stream_readable.js"),a.Writable=J("readable-stream/lib/_stream_writable.js"),a.Duplex=J("readable-stream/lib/_stream_duplex.js"),a.Transform=J("readable-stream/lib/_stream_transform.js"),a.PassThrough=J("readable-stream/lib/_stream_passthrough.js"),a.finished=J("readable-stream/lib/internal/streams/end-of-stream.js"),a.pipeline=J("readable-stream/lib/internal/streams/pipeline.js"),a.Stream=a,a.prototype.pipe=function(F,y){var e=this;function o(f){F.writable&&!1===F.write(f)&&e.pause&&e.pause()}function u(){e.readable&&e.resume&&e.resume()}e.on("data",o),F.on("drain",u),F._isStdio||y&&!1===y.end||(e.on("end",m),e.on("close",h));var d=!1;function m(){d||(d=!0,F.end())}function h(){d||(d=!0,"function"==typeof F.destroy&&F.destroy())}function k(f){if(v(),0===q.listenerCount(this,"error"))throw f}function v(){e.removeListener("data",o),F.removeListener("drain",u),e.removeListener("end",m),e.removeListener("close",h),e.removeListener("error",k),F.removeListener("error",k),e.removeListener("end",v),e.removeListener("close",v),F.removeListener("close",v)}return e.on("error",k),F.on("error",k),e.on("end",v),e.on("close",v),F.on("close",v),F.emit("pipe",e),F}},{events:15,inherits:26,"readable-stream/lib/_stream_duplex.js":80,"readable-stream/lib/_stream_passthrough.js":81,"readable-stream/lib/_stream_readable.js":82,"readable-stream/lib/_stream_transform.js":83,"readable-stream/lib/_stream_writable.js":84,"readable-stream/lib/internal/streams/end-of-stream.js":88,"readable-stream/lib/internal/streams/pipeline.js":90}],79:[function(J,ie,ue){"use strict";var q={};function a(y,e,o){o||(o=Error);var u=function(d){var m,h;function k(v,f,w){return d.call(this,(T=v,E=f,P=w,"string"==typeof e?e:e(T,E,P)))||this;var T,E,P}return h=d,(m=k).prototype=Object.create(h.prototype),m.prototype.constructor=m,m.__proto__=h,k}(o);u.prototype.name=o.name,u.prototype.code=y,q[y]=u}function F(y,e){if(Array.isArray(y)){var o=y.length;return y=y.map(function(u){return String(u)}),o>2?"one of ".concat(e," ").concat(y.slice(0,o-1).join(", "),", or ")+y[o-1]:2===o?"one of ".concat(e," ").concat(y[0]," or ").concat(y[1]):"of ".concat(e," ").concat(y[0])}return"of ".concat(e," ").concat(String(y))}a("ERR_INVALID_OPT_VALUE",function(y,e){return'The value "'+e+'" is invalid for option "'+y+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(y,e,o){var u,d,h,v,f,w;if("string"==typeof e&&(d="not ",e.substr(0,d.length)===d)?(u="must not be",e=e.replace(/^not /,"")):u="must be",v=y,f=" argument",(void 0===w||w>v.length)&&(w=v.length),v.substring(w-f.length,w)===f)h="The ".concat(y," ").concat(u," ").concat(F(e,"type"));else{var k=function(v,f,w){return"number"!=typeof w&&(w=0),!(w+".".length>v.length)&&-1!==v.indexOf(".",w)}(y)?"property":"argument";h='The "'.concat(y,'" ').concat(k," ").concat(u," ").concat(F(e,"type"))}return h+". Received type ".concat(typeof o)},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(y){return"The "+y+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(y){return"Cannot call "+y+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(y){return"Unknown encoding: "+y},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ie.exports.codes=q},{}],80:[function(J,ie,ue){(function(q){(function(){"use strict";var a=Object.keys||function(k){var v=[];for(var f in k)v.push(f);return v};ie.exports=d;var F=J("./_stream_readable"),y=J("./_stream_writable");J("inherits")(d,F);for(var e=a(y.prototype),o=0;o<e.length;o++){var u=e[o];d.prototype[u]||(d.prototype[u]=y.prototype[u])}function d(k){if(!(this instanceof d))return new d(k);F.call(this,k),y.call(this,k),this.allowHalfOpen=!0,k&&(!1===k.readable&&(this.readable=!1),!1===k.writable&&(this.writable=!1),!1===k.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",m)))}function m(){this._writableState.ended||q.nextTick(h,this)}function h(k){k.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(k){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=k,this._writableState.destroyed=k)}})}).call(this)}).call(this,J("_process"))},{"./_stream_readable":82,"./_stream_writable":84,_process:62,inherits:26}],81:[function(J,ie,ue){"use strict";ie.exports=a;var q=J("./_stream_transform");function a(F){if(!(this instanceof a))return new a(F);q.call(this,F)}J("inherits")(a,q),a.prototype._transform=function(F,y,e){e(null,F)}},{"./_stream_transform":83,inherits:26}],82:[function(J,ie,ue){(function(q,a){(function(){"use strict";var F;ie.exports=V,V.ReadableState=W,J("events").EventEmitter;var d,y=function(G,H){return G.listeners(H).length},e=J("./internal/streams/stream"),o=J("buffer").Buffer,u=a.Uint8Array||function(){},m=J("util");d=m&&m.debuglog?m.debuglog("stream"):function(){};var h,k,v,f=J("./internal/streams/buffer_list"),w=J("./internal/streams/destroy"),T=J("./internal/streams/state").getHighWaterMark,E=J("../errors").codes,P=E.ERR_INVALID_ARG_TYPE,M=E.ERR_STREAM_PUSH_AFTER_EOF,j=E.ERR_METHOD_NOT_IMPLEMENTED,O=E.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;J("inherits")(V,e);var L=w.errorOrDestroy,U=["error","close","destroy","pause","resume"];function W(G,H,ee){F=F||J("./_stream_duplex"),G=G||{},"boolean"!=typeof ee&&(ee=H instanceof F),this.objectMode=!!G.objectMode,ee&&(this.objectMode=this.objectMode||!!G.readableObjectMode),this.highWaterMark=T(this,G,"readableHighWaterMark",ee),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==G.emitClose,this.autoDestroy=!!G.autoDestroy,this.destroyed=!1,this.defaultEncoding=G.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,G.encoding&&(h||(h=J("string_decoder/").StringDecoder),this.decoder=new h(G.encoding),this.encoding=G.encoding)}function V(G){if(F=F||J("./_stream_duplex"),!(this instanceof V))return new V(G);var H=this instanceof F;this._readableState=new W(G,this,H),this.readable=!0,G&&("function"==typeof G.read&&(this._read=G.read),"function"==typeof G.destroy&&(this._destroy=G.destroy)),e.call(this)}function $(G,H,ee,pe,Ne){d("readableAddChunk",H);var _e,We,Ye,mt,ht,Pe=G._readableState;if(null===H)Pe.reading=!1,function(We,Ye){if(d("onEofChunk"),!Ye.ended){if(Ye.decoder){var mt=Ye.decoder.end();mt&&mt.length&&(Ye.buffer.push(mt),Ye.length+=Ye.objectMode?1:mt.length)}Ye.ended=!0,Ye.sync?te(We):(Ye.needReadable=!1,Ye.emittedReadable||(Ye.emittedReadable=!0,se(We)))}}(G,Pe);else if(Ne||(We=Pe,ht=Ye=H,o.isBuffer(ht)||ht instanceof u||"string"==typeof Ye||void 0===Ye||We.objectMode||(mt=new P("chunk",["string","Buffer","Uint8Array"],Ye)),_e=mt),_e)L(G,_e);else if(Pe.objectMode||H&&H.length>0)if("string"==typeof H||Pe.objectMode||Object.getPrototypeOf(H)===o.prototype||(H=function(We){return o.from(We)}(H)),pe)Pe.endEmitted?L(G,new O):fe(G,Pe,H,!0);else if(Pe.ended)L(G,new M);else{if(Pe.destroyed)return!1;Pe.reading=!1,Pe.decoder&&!ee?(H=Pe.decoder.write(H),Pe.objectMode||0!==H.length?fe(G,Pe,H,!1):ne(G,Pe)):fe(G,Pe,H,!1)}else pe||(Pe.reading=!1,ne(G,Pe));return!Pe.ended&&(Pe.length<Pe.highWaterMark||0===Pe.length)}function fe(G,H,ee,pe){H.flowing&&0===H.length&&!H.sync?(H.awaitDrain=0,G.emit("data",ee)):(H.length+=H.objectMode?1:ee.length,pe?H.buffer.unshift(ee):H.buffer.push(ee),H.needReadable&&te(G)),ne(G,H)}Object.defineProperty(V.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(G){this._readableState&&(this._readableState.destroyed=G)}}),V.prototype.destroy=w.destroy,V.prototype._undestroy=w.undestroy,V.prototype._destroy=function(G,H){H(G)},V.prototype.push=function(G,H){var ee,pe=this._readableState;return pe.objectMode?ee=!0:"string"==typeof G&&((H=H||pe.defaultEncoding)!==pe.encoding&&(G=o.from(G,H),H=""),ee=!0),$(this,G,H,!1,ee)},V.prototype.unshift=function(G){return $(this,G,null,!0,!1)},V.prototype.isPaused=function(){return!1===this._readableState.flowing},V.prototype.setEncoding=function(G){h||(h=J("string_decoder/").StringDecoder);var H=new h(G);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var ee=this._readableState.buffer.head,pe="";null!==ee;)pe+=H.write(ee.data),ee=ee.next;return this._readableState.buffer.clear(),""!==pe&&this._readableState.buffer.push(pe),this._readableState.length=pe.length,this};var ce=1073741824;function xe(G,H){return G<=0||0===H.length&&H.ended?0:H.objectMode?1:G!=G?H.flowing&&H.length?H.buffer.head.data.length:H.length:(G>H.highWaterMark&&(H.highWaterMark=((ee=G)>=ce?ee=ce:(ee--,ee|=ee>>>1,ee|=ee>>>2,ee|=ee>>>4,ee|=ee>>>8,ee|=ee>>>16,ee++),ee)),G<=H.length?G:H.ended?H.length:(H.needReadable=!0,0));var ee}function te(G){var H=G._readableState;d("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(d("emitReadable",H.flowing),H.emittedReadable=!0,q.nextTick(se,G))}function se(G){var H=G._readableState;d("emitReadable_",H.destroyed,H.length,H.ended),H.destroyed||!H.length&&!H.ended||(G.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,ye(G)}function ne(G,H){H.readingMore||(H.readingMore=!0,q.nextTick(ve,G,H))}function ve(G,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&0===H.length);){var ee=H.length;if(d("maybeReadMore read 0"),G.read(0),ee===H.length)break}H.readingMore=!1}function Ce(G){var H=G._readableState;H.readableListening=G.listenerCount("readable")>0,H.resumeScheduled&&!H.paused?H.flowing=!0:G.listenerCount("data")>0&&G.resume()}function be(G){d("readable nexttick read 0"),G.read(0)}function de(G,H){d("resume",H.reading),H.reading||G.read(0),H.resumeScheduled=!1,G.emit("resume"),ye(G),H.flowing&&!H.reading&&G.read(0)}function ye(G){var H=G._readableState;for(d("flow",H.flowing);H.flowing&&null!==G.read(););}function Fe(G,H){return 0===H.length?null:(H.objectMode?ee=H.buffer.shift():!G||G>=H.length?(ee=H.decoder?H.buffer.join(""):1===H.buffer.length?H.buffer.first():H.buffer.concat(H.length),H.buffer.clear()):ee=H.buffer.consume(G,H.decoder),ee);var ee}function Be(G){var H=G._readableState;d("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,q.nextTick(Ie,H,G))}function Ie(G,H){if(d("endReadableNT",G.endEmitted,G.length),!G.endEmitted&&0===G.length&&(G.endEmitted=!0,H.readable=!1,H.emit("end"),G.autoDestroy)){var ee=H._writableState;(!ee||ee.autoDestroy&&ee.finished)&&H.destroy()}}function Je(G,H){for(var ee=0,pe=G.length;ee<pe;ee++)if(G[ee]===H)return ee;return-1}V.prototype.read=function(G){d("read",G),G=parseInt(G,10);var H=this._readableState,ee=G;if(0!==G&&(H.emittedReadable=!1),0===G&&H.needReadable&&((0!==H.highWaterMark?H.length>=H.highWaterMark:H.length>0)||H.ended))return d("read: emitReadable",H.length,H.ended),0===H.length&&H.ended?Be(this):te(this),null;if(0===(G=xe(G,H))&&H.ended)return 0===H.length&&Be(this),null;var pe,Ne=H.needReadable;return d("need readable",Ne),(0===H.length||H.length-G<H.highWaterMark)&&d("length less than watermark",Ne=!0),H.ended||H.reading?d("reading or ended",Ne=!1):Ne&&(d("do read"),H.reading=!0,H.sync=!0,0===H.length&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(G=xe(ee,H))),null===(pe=G>0?Fe(G,H):null)?(H.needReadable=H.length<=H.highWaterMark,G=0):(H.length-=G,H.awaitDrain=0),0===H.length&&(H.ended||(H.needReadable=!0),ee!==G&&H.ended&&Be(this)),null!==pe&&this.emit("data",pe),pe},V.prototype._read=function(G){L(this,new j("_read()"))},V.prototype.pipe=function(G,H){var ee=this,pe=this._readableState;switch(pe.pipesCount){case 0:pe.pipes=G;break;case 1:pe.pipes=[pe.pipes,G];break;default:pe.pipes.push(G)}pe.pipesCount+=1,d("pipe count=%d opts=%j",pe.pipesCount,H);var Ne=H&&!1===H.end||G===q.stdout||G===q.stderr?Te:Pe;function Pe(){d("onend"),G.end()}pe.endEmitted?q.nextTick(Ne):ee.once("end",Ne),G.on("unpipe",function _e(Re,je){d("onunpipe"),Re===ee&&je&&!1===je.hasUnpiped&&(je.hasUnpiped=!0,d("cleanup"),G.removeListener("close",Gt),G.removeListener("finish",Xt),G.removeListener("drain",We),G.removeListener("error",ht),G.removeListener("unpipe",_e),ee.removeListener("end",Pe),ee.removeListener("end",Te),ee.removeListener("data",mt),Ye=!0,!pe.awaitDrain||G._writableState&&!G._writableState.needDrain||We())});var Re,We=(Re=ee,function(){var je=Re._readableState;d("pipeOnDrain",je.awaitDrain),je.awaitDrain&&je.awaitDrain--,0===je.awaitDrain&&y(Re,"data")&&(je.flowing=!0,ye(Re))});G.on("drain",We);var Ye=!1;function mt(Re){d("ondata");var je=G.write(Re);d("dest.write",je),!1===je&&((1===pe.pipesCount&&pe.pipes===G||pe.pipesCount>1&&-1!==Je(pe.pipes,G))&&!Ye&&(d("false write response, pause",pe.awaitDrain),pe.awaitDrain++),ee.pause())}function ht(Re){d("onerror",Re),Te(),G.removeListener("error",ht),0===y(G,"error")&&L(G,Re)}function Gt(){G.removeListener("finish",Xt),Te()}function Xt(){d("onfinish"),G.removeListener("close",Gt),Te()}function Te(){d("unpipe"),ee.unpipe(G)}return ee.on("data",mt),function(Re,je,K){if("function"==typeof Re.prependListener)return Re.prependListener(je,K);Re._events&&Re._events[je]?Array.isArray(Re._events[je])?Re._events[je].unshift(K):Re._events[je]=[K,Re._events[je]]:Re.on(je,K)}(G,"error",ht),G.once("close",Gt),G.once("finish",Xt),G.emit("pipe",ee),pe.flowing||(d("pipe resume"),ee.resume()),G},V.prototype.unpipe=function(G){var H=this._readableState,ee={hasUnpiped:!1};if(0===H.pipesCount)return this;if(1===H.pipesCount)return G&&G!==H.pipes||(G||(G=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,G&&G.emit("unpipe",this,ee)),this;if(!G){var pe=H.pipes,Ne=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var _e=0;_e<Ne;_e++)pe[_e].emit("unpipe",this,{hasUnpiped:!1});return this}var Pe=Je(H.pipes,G);return-1===Pe||(H.pipes.splice(Pe,1),H.pipesCount-=1,1===H.pipesCount&&(H.pipes=H.pipes[0]),G.emit("unpipe",this,ee)),this},V.prototype.on=function(G,H){var ee=e.prototype.on.call(this,G,H),pe=this._readableState;return"data"===G?(pe.readableListening=this.listenerCount("readable")>0,!1!==pe.flowing&&this.resume()):"readable"===G&&(pe.endEmitted||pe.readableListening||(pe.readableListening=pe.needReadable=!0,pe.flowing=!1,pe.emittedReadable=!1,d("on readable",pe.length,pe.reading),pe.length?te(this):pe.reading||q.nextTick(be,this))),ee},V.prototype.addListener=V.prototype.on,V.prototype.removeListener=function(G,H){var ee=e.prototype.removeListener.call(this,G,H);return"readable"===G&&q.nextTick(Ce,this),ee},V.prototype.removeAllListeners=function(G){var H=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==G&&void 0!==G||q.nextTick(Ce,this),H},V.prototype.resume=function(){var H,ee,G=this._readableState;return G.flowing||(d("resume"),G.flowing=!G.readableListening,H=this,(ee=G).resumeScheduled||(ee.resumeScheduled=!0,q.nextTick(de,H,ee))),G.paused=!1,this},V.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},V.prototype.wrap=function(G){var H=this,ee=this._readableState,pe=!1;for(var Ne in G.on("end",function(){if(d("wrapped end"),ee.decoder&&!ee.ended){var Pe=ee.decoder.end();Pe&&Pe.length&&H.push(Pe)}H.push(null)}),G.on("data",function(Pe){d("wrapped data"),ee.decoder&&(Pe=ee.decoder.write(Pe)),ee.objectMode&&null==Pe||(ee.objectMode||Pe&&Pe.length)&&(H.push(Pe)||(pe=!0,G.pause()))}),G)void 0===this[Ne]&&"function"==typeof G[Ne]&&(this[Ne]=function(Pe){return function(){return G[Pe].apply(G,arguments)}}(Ne));for(var _e=0;_e<U.length;_e++)G.on(U[_e],this.emit.bind(this,U[_e]));return this._read=function(Pe){d("wrapped _read",Pe),pe&&(pe=!1,G.resume())},this},"function"==typeof Symbol&&(V.prototype[Symbol.asyncIterator]=function(){return void 0===k&&(k=J("./internal/streams/async_iterator")),k(this)}),Object.defineProperty(V.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(V.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(V.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(G){this._readableState&&(this._readableState.flowing=G)}}),V._fromList=Fe,Object.defineProperty(V.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(V.from=function(G,H){return void 0===v&&(v=J("./internal/streams/from")),v(V,G,H)})}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":79,"./_stream_duplex":80,"./internal/streams/async_iterator":85,"./internal/streams/buffer_list":86,"./internal/streams/destroy":87,"./internal/streams/from":89,"./internal/streams/state":91,"./internal/streams/stream":92,_process:62,buffer:9,events:15,inherits:26,"string_decoder/":93,util:4}],83:[function(J,ie,ue){"use strict";ie.exports=d;var q=J("../errors").codes,a=q.ERR_METHOD_NOT_IMPLEMENTED,F=q.ERR_MULTIPLE_CALLBACK,y=q.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=q.ERR_TRANSFORM_WITH_LENGTH_0,o=J("./_stream_duplex");function u(k,v){var f=this._transformState;f.transforming=!1;var w=f.writecb;if(null===w)return this.emit("error",new F);f.writechunk=null,f.writecb=null,null!=v&&this.push(v),w(k);var T=this._readableState;T.reading=!1,(T.needReadable||T.length<T.highWaterMark)&&this._read(T.highWaterMark)}function d(k){if(!(this instanceof d))return new d(k);o.call(this,k),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,k&&("function"==typeof k.transform&&(this._transform=k.transform),"function"==typeof k.flush&&(this._flush=k.flush)),this.on("prefinish",m)}function m(){var k=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush(function(v,f){h(k,v,f)})}function h(k,v,f){if(v)return k.emit("error",v);if(null!=f&&k.push(f),k._writableState.length)throw new e;if(k._transformState.transforming)throw new y;return k.push(null)}J("inherits")(d,o),d.prototype.push=function(k,v){return this._transformState.needTransform=!1,o.prototype.push.call(this,k,v)},d.prototype._transform=function(k,v,f){f(new a("_transform()"))},d.prototype._write=function(k,v,f){var w=this._transformState;if(w.writecb=f,w.writechunk=k,w.writeencoding=v,!w.transforming){var T=this._readableState;(w.needTransform||T.needReadable||T.length<T.highWaterMark)&&this._read(T.highWaterMark)}},d.prototype._read=function(k){var v=this._transformState;null===v.writechunk||v.transforming?v.needTransform=!0:(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform))},d.prototype._destroy=function(k,v){o.prototype._destroy.call(this,k,function(f){v(f)})}},{"../errors":79,"./_stream_duplex":80,inherits:26}],84:[function(J,ie,ue){(function(q,a){(function(){"use strict";function F(ne){var ve=this;this.next=null,this.entry=null,this.finish=function(){!function(Ce,be,de){var ye=Ce.entry;for(Ce.entry=null;ye;){var Fe=ye.callback;be.pendingcb--,Fe(undefined),ye=ye.next}be.corkedRequestsFree.next=Ce}(ve,ne)}}var y;ie.exports=V,V.WritableState=W;var m,e={deprecate:J("util-deprecate")},o=J("./internal/streams/stream"),u=J("buffer").Buffer,d=a.Uint8Array||function(){},h=J("./internal/streams/destroy"),k=J("./internal/streams/state").getHighWaterMark,v=J("../errors").codes,f=v.ERR_INVALID_ARG_TYPE,w=v.ERR_METHOD_NOT_IMPLEMENTED,T=v.ERR_MULTIPLE_CALLBACK,E=v.ERR_STREAM_CANNOT_PIPE,P=v.ERR_STREAM_DESTROYED,M=v.ERR_STREAM_NULL_VALUES,j=v.ERR_STREAM_WRITE_AFTER_END,O=v.ERR_UNKNOWN_ENCODING,L=h.errorOrDestroy;function U(){}function W(ne,ve,Ce){y=y||J("./_stream_duplex"),ne=ne||{},"boolean"!=typeof Ce&&(Ce=ve instanceof y),this.objectMode=!!ne.objectMode,Ce&&(this.objectMode=this.objectMode||!!ne.writableObjectMode),this.highWaterMark=k(this,ne,"writableHighWaterMark",Ce),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var be=!1===ne.decodeStrings;this.decodeStrings=!be,this.defaultEncoding=ne.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(de){!function(ye,Fe){var H,Be=ye._writableState,Ie=Be.sync,Je=Be.writecb;if("function"!=typeof Je)throw new T;if((H=Be).writing=!1,H.writecb=null,H.length-=H.writelen,H.writelen=0,Fe)!function(H,ee,pe,Ne,_e){--ee.pendingcb,pe?(q.nextTick(_e,Ne),q.nextTick(se,H,ee),H._writableState.errorEmitted=!0,L(H,Ne)):(_e(Ne),H._writableState.errorEmitted=!0,L(H,Ne),se(H,ee))}(ye,Be,Ie,Fe,Je);else{var G=xe(Be)||ye.destroyed;G||Be.corked||Be.bufferProcessing||!Be.bufferedRequest||ce(ye,Be),Ie?q.nextTick(fe,ye,Be,G,Je):fe(ye,Be,G,Je)}}(ve,de)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==ne.emitClose,this.autoDestroy=!!ne.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new F(this)}function V(ne){var ve=this instanceof(y=y||J("./_stream_duplex"));if(!ve&&!m.call(V,this))return new V(ne);this._writableState=new W(ne,this,ve),this.writable=!0,ne&&("function"==typeof ne.write&&(this._write=ne.write),"function"==typeof ne.writev&&(this._writev=ne.writev),"function"==typeof ne.destroy&&(this._destroy=ne.destroy),"function"==typeof ne.final&&(this._final=ne.final)),o.call(this)}function $(ne,ve,Ce,be,de,ye,Fe){ve.writelen=be,ve.writecb=Fe,ve.writing=!0,ve.sync=!0,ve.destroyed?ve.onwrite(new P("write")):Ce?ne._writev(de,ve.onwrite):ne._write(de,ye,ve.onwrite),ve.sync=!1}function fe(ne,ve,Ce,be){var de,ye;Ce||(de=ne,0===(ye=ve).length&&ye.needDrain&&(ye.needDrain=!1,de.emit("drain"))),ve.pendingcb--,be(),se(ne,ve)}function ce(ne,ve){ve.bufferProcessing=!0;var Ce=ve.bufferedRequest;if(ne._writev&&Ce&&Ce.next){var be=ve.bufferedRequestCount,de=new Array(be),ye=ve.corkedRequestsFree;ye.entry=Ce;for(var Fe=0,Be=!0;Ce;)de[Fe]=Ce,Ce.isBuf||(Be=!1),Ce=Ce.next,Fe+=1;de.allBuffers=Be,$(ne,ve,!0,ve.length,de,"",ye.finish),ve.pendingcb++,ve.lastBufferedRequest=null,ye.next?(ve.corkedRequestsFree=ye.next,ye.next=null):ve.corkedRequestsFree=new F(ve),ve.bufferedRequestCount=0}else{for(;Ce;){var Ie=Ce.chunk,Je=Ce.encoding,G=Ce.callback;if($(ne,ve,!1,ve.objectMode?1:Ie.length,Ie,Je,G),Ce=Ce.next,ve.bufferedRequestCount--,ve.writing)break}null===Ce&&(ve.lastBufferedRequest=null)}ve.bufferedRequest=Ce,ve.bufferProcessing=!1}function xe(ne){return ne.ending&&0===ne.length&&null===ne.bufferedRequest&&!ne.finished&&!ne.writing}function te(ne,ve){ne._final(function(Ce){ve.pendingcb--,Ce&&L(ne,Ce),ve.prefinished=!0,ne.emit("prefinish"),se(ne,ve)})}function se(ne,ve){var de,ye,Ce=xe(ve);if(Ce&&(de=ne,(ye=ve).prefinished||ye.finalCalled||("function"!=typeof de._final||ye.destroyed?(ye.prefinished=!0,de.emit("prefinish")):(ye.pendingcb++,ye.finalCalled=!0,q.nextTick(te,de,ye))),0===ve.pendingcb&&(ve.finished=!0,ne.emit("finish"),ve.autoDestroy))){var be=ne._readableState;(!be||be.autoDestroy&&be.endEmitted)&&ne.destroy()}return Ce}J("inherits")(V,o),W.prototype.getBuffer=function(){for(var ne=this.bufferedRequest,ve=[];ne;)ve.push(ne),ne=ne.next;return ve},function(){try{Object.defineProperty(W.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(ne){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(V,Symbol.hasInstance,{value:function(ne){return!!m.call(this,ne)||this===V&&ne&&ne._writableState instanceof W}})):m=function(ne){return ne instanceof this},V.prototype.pipe=function(){L(this,new E)},V.prototype.write=function(ne,ve,Ce){var be,Be,de=this._writableState,ye=!1,Fe=!de.objectMode&&(be=ne,u.isBuffer(be)||be instanceof d);return Fe&&!u.isBuffer(ne)&&(Be=ne,ne=u.from(Be)),"function"==typeof ve&&(Ce=ve,ve=null),Fe?ve="buffer":ve||(ve=de.defaultEncoding),"function"!=typeof Ce&&(Ce=U),de.ending?function(Be,Ie){var Je=new j;L(Be,Je),q.nextTick(Ie,Je)}(this,Ce):(Fe||function(Be,Ie,Je,G){var H;return null===Je?H=new M:"string"==typeof Je||Ie.objectMode||(H=new f("chunk",["string","Buffer"],Je)),!H||(L(Be,H),q.nextTick(G,H),!1)}(this,de,ne,Ce))&&(de.pendingcb++,ye=function(Be,Ie,Je,G,H,ee){if(!Je){var pe=(Ye=G,mt=H,(We=Ie).objectMode||!1===We.decodeStrings||"string"!=typeof Ye||(Ye=u.from(Ye,mt)),Ye);G!==pe&&(Je=!0,H="buffer",G=pe)}var We,Ye,mt,Ne=Ie.objectMode?1:G.length;Ie.length+=Ne;var _e=Ie.length<Ie.highWaterMark;if(_e||(Ie.needDrain=!0),Ie.writing||Ie.corked){var Pe=Ie.lastBufferedRequest;Ie.lastBufferedRequest={chunk:G,encoding:H,isBuf:Je,callback:ee,next:null},Pe?Pe.next=Ie.lastBufferedRequest:Ie.bufferedRequest=Ie.lastBufferedRequest,Ie.bufferedRequestCount+=1}else $(Be,Ie,!1,Ne,G,H,ee);return _e}(this,de,Fe,ne,ve,Ce)),ye},V.prototype.cork=function(){this._writableState.corked++},V.prototype.uncork=function(){var ne=this._writableState;ne.corked&&(ne.corked--,ne.writing||ne.corked||ne.bufferProcessing||!ne.bufferedRequest||ce(this,ne))},V.prototype.setDefaultEncoding=function(ne){if("string"==typeof ne&&(ne=ne.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ne+"").toLowerCase())>-1))throw new O(ne);return this._writableState.defaultEncoding=ne,this},Object.defineProperty(V.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(V.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),V.prototype._write=function(ne,ve,Ce){Ce(new w("_write()"))},V.prototype._writev=null,V.prototype.end=function(ne,ve,Ce){var de,ye,Fe,be=this._writableState;return"function"==typeof ne?(Ce=ne,ne=null,ve=null):"function"==typeof ve&&(Ce=ve,ve=null),null!=ne&&this.write(ne,ve),be.corked&&(be.corked=1,this.uncork()),be.ending||(de=this,Fe=Ce,(ye=be).ending=!0,se(de,ye),Fe&&(ye.finished?q.nextTick(Fe):de.once("finish",Fe)),ye.ended=!0,de.writable=!1),this},Object.defineProperty(V.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(V.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ne){this._writableState&&(this._writableState.destroyed=ne)}}),V.prototype.destroy=h.destroy,V.prototype._undestroy=h.undestroy,V.prototype._destroy=function(ne,ve){ve(ne)}}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":79,"./_stream_duplex":80,"./internal/streams/destroy":87,"./internal/streams/state":91,"./internal/streams/stream":92,_process:62,buffer:9,inherits:26,"util-deprecate":117}],85:[function(J,ie,ue){(function(q){(function(){"use strict";var a;function F(E,P,M){return P in E?Object.defineProperty(E,P,{value:M,enumerable:!0,configurable:!0,writable:!0}):E[P]=M,E}var y=J("./end-of-stream"),e=Symbol("lastResolve"),o=Symbol("lastReject"),u=Symbol("error"),d=Symbol("ended"),m=Symbol("lastPromise"),h=Symbol("handlePromise"),k=Symbol("stream");function v(E,P){return{value:E,done:P}}function f(E){var P=E[e];if(null!==P){var M=E[k].read();null!==M&&(E[m]=null,E[e]=null,E[o]=null,P(v(M,!1)))}}var w=Object.getPrototypeOf(function(){}),T=Object.setPrototypeOf((F(a={get stream(){return this[k]},next:function(){var E=this,P=this[u];if(null!==P)return Promise.reject(P);if(this[d])return Promise.resolve(v(void 0,!0));if(this[k].destroyed)return new Promise(function(L,U){q.nextTick(function(){E[u]?U(E[u]):L(v(void 0,!0))})});var M,L,U,j=this[m];if(j)M=new Promise((L=j,U=this,function(W,V){L.then(function(){U[d]?W(v(void 0,!0)):U[h](W,V)},V)}));else{var O=this[k].read();if(null!==O)return Promise.resolve(v(O,!1));M=new Promise(this[h])}return this[m]=M,M}},Symbol.asyncIterator,function(){return this}),F(a,"return",function(){var E=this;return new Promise(function(P,M){E[k].destroy(null,function(j){j?M(j):P(v(void 0,!0))})})}),a),w);ie.exports=function(E){var P,M=Object.create(T,(F(P={},k,{value:E,writable:!0}),F(P,e,{value:null,writable:!0}),F(P,o,{value:null,writable:!0}),F(P,u,{value:null,writable:!0}),F(P,d,{value:E._readableState.endEmitted,writable:!0}),F(P,h,{value:function(j,O){var L=M[k].read();L?(M[m]=null,M[e]=null,M[o]=null,j(v(L,!1))):(M[e]=j,M[o]=O)},writable:!0}),P));return M[m]=null,y(E,function(j){if(j&&"ERR_STREAM_PREMATURE_CLOSE"!==j.code){var O=M[o];return null!==O&&(M[m]=null,M[e]=null,M[o]=null,O(j)),void(M[u]=j)}var L=M[e];null!==L&&(M[m]=null,M[e]=null,M[o]=null,L(v(void 0,!0))),M[d]=!0}),E.on("readable",function(j){q.nextTick(f,j)}.bind(null,M)),M}}).call(this)}).call(this,J("_process"))},{"./end-of-stream":88,_process:62}],86:[function(J,ie,ue){"use strict";function q(u,d){var m=Object.keys(u);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(u);d&&(h=h.filter(function(k){return Object.getOwnPropertyDescriptor(u,k).enumerable})),m.push.apply(m,h)}return m}function a(u,d,m){return d in u?Object.defineProperty(u,d,{value:m,enumerable:!0,configurable:!0,writable:!0}):u[d]=m,u}function F(u,d){for(var m=0;m<d.length;m++){var h=d[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}var y=J("buffer").Buffer,e=J("util").inspect,o=e&&e.custom||"inspect";ie.exports=function(){function u(){(function(k,v){if(!(k instanceof v))throw new TypeError("Cannot call a class as a function")})(this,u),this.head=null,this.tail=null,this.length=0}var d,m;return d=u,(m=[{key:"push",value:function(k){var v={data:k,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(k){var v={data:k,next:this.head};0===this.length&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(0!==this.length){var k=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,k}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(k){if(0===this.length)return"";for(var v=this.head,f=""+v.data;v=v.next;)f+=k+v.data;return f}},{key:"concat",value:function(k){if(0===this.length)return y.alloc(0);for(var v,f,w,T=y.allocUnsafe(k>>>0),E=this.head,P=0;E;)v=E.data,f=T,w=P,y.prototype.copy.call(v,f,w),P+=E.data.length,E=E.next;return T}},{key:"consume",value:function(k,v){var f;return k<this.head.data.length?(f=this.head.data.slice(0,k),this.head.data=this.head.data.slice(k)):f=k===this.head.data.length?this.shift():v?this._getString(k):this._getBuffer(k),f}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(k){var v=this.head,f=1,w=v.data;for(k-=w.length;v=v.next;){var T=v.data,E=k>T.length?T.length:k;if(E===T.length?w+=T:w+=T.slice(0,k),0==(k-=E)){E===T.length?(++f,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=T.slice(E));break}++f}return this.length-=f,w}},{key:"_getBuffer",value:function(k){var v=y.allocUnsafe(k),f=this.head,w=1;for(f.data.copy(v),k-=f.data.length;f=f.next;){var T=f.data,E=k>T.length?T.length:k;if(T.copy(v,v.length-k,0,E),0==(k-=E)){E===T.length?(++w,f.next?this.head=f.next:this.head=this.tail=null):(this.head=f,f.data=T.slice(E));break}++w}return this.length-=w,v}},{key:o,value:function(k,v){return e(this,function(f){for(var w=1;w<arguments.length;w++){var T=null!=arguments[w]?arguments[w]:{};w%2?q(Object(T),!0).forEach(function(E){a(f,E,T[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(T)):q(Object(T)).forEach(function(E){Object.defineProperty(f,E,Object.getOwnPropertyDescriptor(T,E))})}return f}({},v,{depth:0,customInspect:!1}))}}])&&F(d.prototype,m),u}()},{buffer:9,util:4}],87:[function(J,ie,ue){(function(q){(function(){"use strict";function a(e,o){y(e,o),F(e)}function F(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function y(e,o){e.emit("error",o)}ie.exports={destroy:function(e,o){var u=this,d=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return d||m?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,q.nextTick(y,this,e)):q.nextTick(y,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(h){!o&&h?u._writableState?u._writableState.errorEmitted?q.nextTick(F,u):(u._writableState.errorEmitted=!0,q.nextTick(a,u,h)):q.nextTick(a,u,h):o?(q.nextTick(F,u),o(h)):q.nextTick(F,u)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,o){var u=e._readableState,d=e._writableState;u&&u.autoDestroy||d&&d.autoDestroy?e.destroy(o):e.emit("error",o)}}}).call(this)}).call(this,J("_process"))},{_process:62}],88:[function(J,ie,ue){"use strict";var q=J("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function a(){}ie.exports=function F(y,e,o){if("function"==typeof e)return F(y,null,e);var P,M;e||(e={}),P=o||a,M=!1,o=function(){if(!M){M=!0;for(var j=arguments.length,O=new Array(j),L=0;L<j;L++)O[L]=arguments[L];P.apply(this,O)}};var u=e.readable||!1!==e.readable&&y.readable,d=e.writable||!1!==e.writable&&y.writable,m=function(){y.writable||k()},h=y._writableState&&y._writableState.finished,k=function(){d=!1,h=!0,u||o.call(y)},v=y._readableState&&y._readableState.endEmitted,f=function(){u=!1,v=!0,d||o.call(y)},w=function(P){o.call(y,P)},T=function(){var P;return u&&!v?(y._readableState&&y._readableState.ended||(P=new q),o.call(y,P)):d&&!h?(y._writableState&&y._writableState.ended||(P=new q),o.call(y,P)):void 0},E=function(){y.req.on("finish",k)};return function(P){return P.setHeader&&"function"==typeof P.abort}(y)?(y.on("complete",k),y.on("abort",T),y.req?E():y.on("request",E)):d&&!y._writableState&&(y.on("end",m),y.on("close",m)),y.on("end",f),y.on("finish",k),!1!==e.error&&y.on("error",w),y.on("close",T),function(){y.removeListener("complete",k),y.removeListener("abort",T),y.removeListener("request",E),y.req&&y.req.removeListener("finish",k),y.removeListener("end",m),y.removeListener("close",m),y.removeListener("finish",k),y.removeListener("end",f),y.removeListener("error",w),y.removeListener("close",T)}}},{"../../../errors":79}],89:[function(J,ie,ue){ie.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],90:[function(J,ie,ue){"use strict";var q,a=J("../../../errors").codes,F=a.ERR_MISSING_ARGS,y=a.ERR_STREAM_DESTROYED;function e(d){if(d)throw d}function o(d){d()}function u(d,m){return d.pipe(m)}ie.exports=function(){for(var d=arguments.length,m=new Array(d),h=0;h<d;h++)m[h]=arguments[h];var k,w,v=(w=m).length?"function"!=typeof w[w.length-1]?e:w.pop():e;if(Array.isArray(m[0])&&(m=m[0]),m.length<2)throw new F("streams");var f=m.map(function(w,T){var E=T<m.length-1;return function(P,M,j,O){var W,V;W=O,V=!1,O=function(){V||(V=!0,W.apply(void 0,arguments))};var L=!1;P.on("close",function(){L=!0}),void 0===q&&(q=J("./end-of-stream")),q(P,{readable:M,writable:j},function(W){if(W)return O(W);L=!0,O()});var U=!1;return function(W){if(!L&&!U)return U=!0,function(V){return V.setHeader&&"function"==typeof V.abort}(P)?P.abort():"function"==typeof P.destroy?P.destroy():void O(W||new y("pipe"))}}(w,E,T>0,function(P){k||(k=P),P&&f.forEach(o),E||(f.forEach(o),v(k))})});return m.reduce(u)}},{"../../../errors":79,"./end-of-stream":88}],91:[function(J,ie,ue){"use strict";var q=J("../../../errors").codes.ERR_INVALID_OPT_VALUE;ie.exports={getHighWaterMark:function(a,F,y,e){var u,d,m,o=(d=e,m=y,null!=(u=F).highWaterMark?u.highWaterMark:d?u[m]:null);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new q(e?y:"highWaterMark",o);return Math.floor(o)}return a.objectMode?16:16384}}},{"../../../errors":79}],92:[function(J,ie,ue){ie.exports=J("events").EventEmitter},{events:15}],93:[function(J,ie,ue){"use strict";var q=J("safe-buffer").Buffer,a=q.isEncoding||function(v){switch((v=""+v)&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function F(v){var f;switch(this.encoding=function(w){var T=function(E){if(!E)return"utf8";for(var P;;)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(P)return;E=(""+E).toLowerCase(),P=!0}}(w);if("string"!=typeof T&&(q.isEncoding===a||!a(w)))throw new Error("Unknown encoding: "+w);return T||w}(v),this.encoding){case"utf16le":this.text=o,this.end=u,f=4;break;case"utf8":this.fillLast=e,f=4;break;case"base64":this.text=d,this.end=m,f=3;break;default:return this.write=h,void(this.end=k)}this.lastNeed=0,this.lastTotal=0,this.lastChar=q.allocUnsafe(f)}function y(v){return v<=127?0:v>>5==6?2:v>>4==14?3:v>>3==30?4:v>>6==2?-1:-2}function e(v){var f=this.lastTotal-this.lastNeed,w=function(T,E,P){if(128!=(192&E[0]))return T.lastNeed=0,"\ufffd";if(T.lastNeed>1&&E.length>1){if(128!=(192&E[1]))return T.lastNeed=1,"\ufffd";if(T.lastNeed>2&&E.length>2&&128!=(192&E[2]))return T.lastNeed=2,"\ufffd"}}(this,v);return void 0!==w?w:this.lastNeed<=v.length?(v.copy(this.lastChar,f,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(v.copy(this.lastChar,f,0,v.length),void(this.lastNeed-=v.length))}function o(v,f){if((v.length-f)%2==0){var w=v.toString("utf16le",f);if(w){var T=w.charCodeAt(w.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",f,v.length-1)}function u(v){var f=v&&v.length?this.write(v):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return f+this.lastChar.toString("utf16le",0,w)}return f}function d(v,f){var w=(v.length-f)%3;return 0===w?v.toString("base64",f):(this.lastNeed=3-w,this.lastTotal=3,1===w?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",f,v.length-w))}function m(v){var f=v&&v.length?this.write(v):"";return this.lastNeed?f+this.lastChar.toString("base64",0,3-this.lastNeed):f}function h(v){return v.toString(this.encoding)}function k(v){return v&&v.length?this.write(v):""}ue.StringDecoder=F,F.prototype.write=function(v){if(0===v.length)return"";var f,w;if(this.lastNeed){if(void 0===(f=this.fillLast(v)))return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<v.length?f?f+this.text(v,w):this.text(v,w):f||""},F.prototype.end=function(v){var f=v&&v.length?this.write(v):"";return this.lastNeed?f+"\ufffd":f},F.prototype.text=function(v,f){var w=function(E,P,M){var j=P.length-1;if(j<M)return 0;var O=y(P[j]);return O>=0?(O>0&&(E.lastNeed=O-1),O):--j<M||-2===O?0:(O=y(P[j]))>=0?(O>0&&(E.lastNeed=O-2),O):--j<M||-2===O?0:(O=y(P[j]))>=0?(O>0&&(2===O?O=0:E.lastNeed=O-3),O):0}(this,v,f);if(!this.lastNeed)return v.toString("utf8",f);this.lastTotal=w;var T=v.length-(w-this.lastNeed);return v.copy(this.lastChar,0,T),v.toString("utf8",f,T)},F.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length}},{"safe-buffer":76}],94:[function(J,ie,ue){(function(q){(function(){var a=J("./lib/request"),F=J("./lib/response"),y=J("xtend"),e=J("builtin-status-codes"),o=J("url"),u=ue;u.request=function(d,m){d="string"==typeof d?o.parse(d):y(d);var h=-1===q.location.protocol.search(/^https?:$/)?"http:":"",k=d.protocol||h,v=d.hostname||d.host,f=d.port,w=d.path||"/";v&&-1!==v.indexOf(":")&&(v="["+v+"]"),d.url=(v?k+"//"+v:"")+(f?":"+f:"")+w,d.method=(d.method||"GET").toUpperCase(),d.headers=d.headers||{};var T=new a(d);return m&&T.on("response",m),T},u.get=function(d,m){var h=u.request(d,m);return h.end(),h},u.ClientRequest=a,u.IncomingMessage=F.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=e,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":96,"./lib/response":97,"builtin-status-codes":10,url:115,xtend:119}],95:[function(J,ie,ue){(function(q){(function(){var a;function F(){if(void 0!==a)return a;if(q.XMLHttpRequest){a=new q.XMLHttpRequest;try{a.open("GET",q.XDomainRequest?"/":"https://example.com")}catch(o){a=null}}else a=null;return a}function y(o){var u=F();if(!u)return!1;try{return u.responseType=o,u.responseType===o}catch(d){}return!1}function e(o){return"function"==typeof o}ue.fetch=e(q.fetch)&&e(q.ReadableStream),ue.writableStream=e(q.WritableStream),ue.abortController=e(q.AbortController),ue.arraybuffer=ue.fetch||y("arraybuffer"),ue.msstream=!ue.fetch&&y("ms-stream"),ue.mozchunkedarraybuffer=!ue.fetch&&y("moz-chunked-arraybuffer"),ue.overrideMimeType=ue.fetch||!!F()&&e(F().overrideMimeType),a=null}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],96:[function(J,ie,ue){(function(q,a,F){(function(){var y=J("./capability"),e=J("inherits"),o=J("./response"),u=J("readable-stream"),d=o.IncomingMessage,m=o.readyStates,h=ie.exports=function(v){var f,w=this;u.Writable.call(w),w._opts=v,w._body=[],w._headers={},v.auth&&w.setHeader("Authorization","Basic "+F.from(v.auth).toString("base64")),Object.keys(v.headers).forEach(function(E){w.setHeader(E,v.headers[E])});var E,P,T=!0;if("disable-fetch"===v.mode||"requestTimeout"in v&&!y.abortController)T=!1,f=!0;else if("prefer-streaming"===v.mode)f=!1;else if("allow-wrong-content-type"===v.mode)f=!y.overrideMimeType;else{if(v.mode&&"default"!==v.mode&&"prefer-fast"!==v.mode)throw new Error("Invalid value for opts.mode");f=!0}w._mode=(E=f,P=T,y.fetch&&P?"fetch":y.mozchunkedarraybuffer?"moz-chunked-arraybuffer":y.msstream?"ms-stream":y.arraybuffer&&E?"arraybuffer":"text"),w._fetchTimer=null,w._socketTimeout=null,w._socketTimer=null,w.on("finish",function(){w._onFinish()})};e(h,u.Writable),h.prototype.setHeader=function(v,f){var w=v.toLowerCase();-1===k.indexOf(w)&&(this._headers[w]={name:v,value:f})},h.prototype.getHeader=function(v){var f=this._headers[v.toLowerCase()];return f?f.value:null},h.prototype.removeHeader=function(v){delete this._headers[v.toLowerCase()]},h.prototype._onFinish=function(){var v=this;if(!v._destroyed){var f=v._opts;"timeout"in f&&0!==f.timeout&&v.setTimeout(f.timeout);var w=v._headers,T=null;"GET"!==f.method&&"HEAD"!==f.method&&(T=new Blob(v._body,{type:(w["content-type"]||{}).value||""}));var E=[];if(Object.keys(w).forEach(function(O){var L=w[O].name,U=w[O].value;Array.isArray(U)?U.forEach(function(W){E.push([L,W])}):E.push([L,U])}),"fetch"===v._mode){var P=null;if(y.abortController){var M=new AbortController;P=M.signal,v._fetchAbortController=M,"requestTimeout"in f&&0!==f.requestTimeout&&(v._fetchTimer=a.setTimeout(function(){v.emit("requestTimeout"),v._fetchAbortController&&v._fetchAbortController.abort()},f.requestTimeout))}a.fetch(v._opts.url,{method:v._opts.method,headers:E,body:T||void 0,mode:"cors",credentials:f.withCredentials?"include":"same-origin",signal:P}).then(function(O){v._fetchResponse=O,v._resetTimers(!1),v._connect()},function(O){v._resetTimers(!0),v._destroyed||v.emit("error",O)})}else{var j=v._xhr=new a.XMLHttpRequest;try{j.open(v._opts.method,v._opts.url,!0)}catch(O){return void q.nextTick(function(){v.emit("error",O)})}"responseType"in j&&(j.responseType=v._mode),"withCredentials"in j&&(j.withCredentials=!!f.withCredentials),"text"===v._mode&&"overrideMimeType"in j&&j.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in f&&(j.timeout=f.requestTimeout,j.ontimeout=function(){v.emit("requestTimeout")}),E.forEach(function(O){j.setRequestHeader(O[0],O[1])}),v._response=null,j.onreadystatechange=function(){switch(j.readyState){case m.LOADING:case m.DONE:v._onXHRProgress()}},"moz-chunked-arraybuffer"===v._mode&&(j.onprogress=function(){v._onXHRProgress()}),j.onerror=function(){v._destroyed||(v._resetTimers(!0),v.emit("error",new Error("XHR error")))};try{j.send(T)}catch(O){return void q.nextTick(function(){v.emit("error",O)})}}}},h.prototype._onXHRProgress=function(){this._resetTimers(!1),function(v){try{var f=v.status;return null!==f&&0!==f}catch(w){return!1}}(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress(this._resetTimers.bind(this)))},h.prototype._connect=function(){var v=this;v._destroyed||(v._response=new d(v._xhr,v._fetchResponse,v._mode,v._resetTimers.bind(v)),v._response.on("error",function(f){v.emit("error",f)}),v.emit("response",v._response))},h.prototype._write=function(v,f,w){this._body.push(v),w()},h.prototype._resetTimers=function(v){var f=this;a.clearTimeout(f._socketTimer),f._socketTimer=null,v?(a.clearTimeout(f._fetchTimer),f._fetchTimer=null):f._socketTimeout&&(f._socketTimer=a.setTimeout(function(){f.emit("timeout")},f._socketTimeout))},h.prototype.abort=h.prototype.destroy=function(v){this._destroyed=!0,this._resetTimers(!0),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort(),v&&this.emit("error",v)},h.prototype.end=function(v,f,w){"function"==typeof v&&(w=v,v=void 0),u.Writable.prototype.end.call(this,v,f,w)},h.prototype.setTimeout=function(v,f){f&&this.once("timeout",f),this._socketTimeout=v,this._resetTimers(!1)},h.prototype.flushHeaders=function(){},h.prototype.setNoDelay=function(){},h.prototype.setSocketKeepAlive=function(){};var k=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},J("buffer").Buffer)},{"./capability":95,"./response":97,_process:62,buffer:9,inherits:26,"readable-stream":112}],97:[function(J,ie,ue){(function(q,a,F){(function(){var y=J("./capability"),e=J("inherits"),o=J("readable-stream"),u=ue.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},d=ue.IncomingMessage=function(m,h,k,v){var f=this;if(o.Readable.call(f),f._mode=k,f.headers={},f.rawHeaders=[],f.trailers={},f.rawTrailers=[],f.on("end",function(){q.nextTick(function(){f.emit("close")})}),"fetch"===k){if(f._fetchResponse=h,f.url=h.url,f.statusCode=h.status,f.statusMessage=h.statusText,h.headers.forEach(function(M,j){f.headers[j.toLowerCase()]=M,f.rawHeaders.push(j,M)}),y.writableStream){var w=new WritableStream({write:function(M){return v(!1),new Promise(function(j,O){f._destroyed?O():f.push(F.from(M))?j():f._resumeFetch=j})},close:function(){v(!0),f._destroyed||f.push(null)},abort:function(M){v(!0),f._destroyed||f.emit("error",M)}});try{return void h.body.pipeTo(w).catch(function(M){v(!0),f._destroyed||f.emit("error",M)})}catch(M){}}var T=h.body.getReader();!function M(){T.read().then(function(j){f._destroyed||(v(j.done),j.done?f.push(null):(f.push(F.from(j.value)),M()))}).catch(function(j){v(!0),f._destroyed||f.emit("error",j)})}()}else if(f._xhr=m,f._pos=0,f.url=m.responseURL,f.statusCode=m.status,f.statusMessage=m.statusText,m.getAllResponseHeaders().split(/\r?\n/).forEach(function(M){var j=M.match(/^([^:]+):\s*(.*)/);if(j){var O=j[1].toLowerCase();"set-cookie"===O?(void 0===f.headers[O]&&(f.headers[O]=[]),f.headers[O].push(j[2])):void 0!==f.headers[O]?f.headers[O]+=", "+j[2]:f.headers[O]=j[2],f.rawHeaders.push(j[1],j[2])}}),f._charset="x-user-defined",!y.overrideMimeType){var E=f.rawHeaders["mime-type"];if(E){var P=E.match(/;\s*charset=([^;])(;|$)/);P&&(f._charset=P[1].toLowerCase())}f._charset||(f._charset="utf-8")}};e(d,o.Readable),d.prototype._read=function(){var m=this._resumeFetch;m&&(this._resumeFetch=null,m())},d.prototype._onXHRProgress=function(m){var h=this,k=h._xhr,v=null;switch(h._mode){case"text":if((v=k.responseText).length>h._pos){var f=v.substr(h._pos);if("x-user-defined"===h._charset){for(var w=F.alloc(f.length),T=0;T<f.length;T++)w[T]=255&f.charCodeAt(T);h.push(w)}else h.push(f,h._charset);h._pos=v.length}break;case"arraybuffer":if(k.readyState!==u.DONE||!k.response)break;v=k.response,h.push(F.from(new Uint8Array(v)));break;case"moz-chunked-arraybuffer":if(v=k.response,k.readyState!==u.LOADING||!v)break;h.push(F.from(new Uint8Array(v)));break;case"ms-stream":if(v=k.response,k.readyState!==u.LOADING)break;var E=new a.MSStreamReader;E.onprogress=function(){E.result.byteLength>h._pos&&(h.push(F.from(new Uint8Array(E.result.slice(h._pos)))),h._pos=E.result.byteLength)},E.onload=function(){m(!0),h.push(null)},E.readAsArrayBuffer(v)}h._xhr.readyState===u.DONE&&"ms-stream"!==h._mode&&(m(!0),h.push(null))}}).call(this)}).call(this,J("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},J("buffer").Buffer)},{"./capability":95,_process:62,buffer:9,inherits:26,"readable-stream":112}],98:[function(J,ie,ue){arguments[4][79][0].apply(ue,arguments)},{dup:79}],99:[function(J,ie,ue){arguments[4][80][0].apply(ue,arguments)},{"./_stream_readable":101,"./_stream_writable":103,_process:62,dup:80,inherits:26}],100:[function(J,ie,ue){arguments[4][81][0].apply(ue,arguments)},{"./_stream_transform":102,dup:81,inherits:26}],101:[function(J,ie,ue){arguments[4][82][0].apply(ue,arguments)},{"../errors":98,"./_stream_duplex":99,"./internal/streams/async_iterator":104,"./internal/streams/buffer_list":105,"./internal/streams/destroy":106,"./internal/streams/from":108,"./internal/streams/state":110,"./internal/streams/stream":111,_process:62,buffer:9,dup:82,events:15,inherits:26,"string_decoder/":113,util:4}],102:[function(J,ie,ue){arguments[4][83][0].apply(ue,arguments)},{"../errors":98,"./_stream_duplex":99,dup:83,inherits:26}],103:[function(J,ie,ue){arguments[4][84][0].apply(ue,arguments)},{"../errors":98,"./_stream_duplex":99,"./internal/streams/destroy":106,"./internal/streams/state":110,"./internal/streams/stream":111,_process:62,buffer:9,dup:84,inherits:26,"util-deprecate":117}],104:[function(J,ie,ue){arguments[4][85][0].apply(ue,arguments)},{"./end-of-stream":107,_process:62,dup:85}],105:[function(J,ie,ue){arguments[4][86][0].apply(ue,arguments)},{buffer:9,dup:86,util:4}],106:[function(J,ie,ue){arguments[4][87][0].apply(ue,arguments)},{_process:62,dup:87}],107:[function(J,ie,ue){arguments[4][88][0].apply(ue,arguments)},{"../../../errors":98,dup:88}],108:[function(J,ie,ue){arguments[4][89][0].apply(ue,arguments)},{dup:89}],109:[function(J,ie,ue){arguments[4][90][0].apply(ue,arguments)},{"../../../errors":98,"./end-of-stream":107,dup:90}],110:[function(J,ie,ue){arguments[4][91][0].apply(ue,arguments)},{"../../../errors":98,dup:91}],111:[function(J,ie,ue){arguments[4][92][0].apply(ue,arguments)},{dup:92,events:15}],112:[function(J,ie,ue){(ue=ie.exports=J("./lib/_stream_readable.js")).Stream=ue,ue.Readable=ue,ue.Writable=J("./lib/_stream_writable.js"),ue.Duplex=J("./lib/_stream_duplex.js"),ue.Transform=J("./lib/_stream_transform.js"),ue.PassThrough=J("./lib/_stream_passthrough.js"),ue.finished=J("./lib/internal/streams/end-of-stream.js"),ue.pipeline=J("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":99,"./lib/_stream_passthrough.js":100,"./lib/_stream_readable.js":101,"./lib/_stream_transform.js":102,"./lib/_stream_writable.js":103,"./lib/internal/streams/end-of-stream.js":107,"./lib/internal/streams/pipeline.js":109}],113:[function(J,ie,ue){arguments[4][93][0].apply(ue,arguments)},{dup:93,"safe-buffer":76}],114:[function(J,ie,ue){(function(q,a){(function(){var F=J("process/browser.js").nextTick,y=Function.prototype.apply,e=Array.prototype.slice,o={},u=0;function d(m,h){this._id=m,this._clearFn=h}ue.setTimeout=function(){return new d(y.call(setTimeout,window,arguments),clearTimeout)},ue.setInterval=function(){return new d(y.call(setInterval,window,arguments),clearInterval)},ue.clearTimeout=ue.clearInterval=function(m){m.close()},d.prototype.unref=d.prototype.ref=function(){},d.prototype.close=function(){this._clearFn.call(window,this._id)},ue.enroll=function(m,h){clearTimeout(m._idleTimeoutId),m._idleTimeout=h},ue.unenroll=function(m){clearTimeout(m._idleTimeoutId),m._idleTimeout=-1},ue._unrefActive=ue.active=function(m){clearTimeout(m._idleTimeoutId);var h=m._idleTimeout;h>=0&&(m._idleTimeoutId=setTimeout(function(){m._onTimeout&&m._onTimeout()},h))},ue.setImmediate="function"==typeof q?q:function(m){var h=u++,k=!(arguments.length<2)&&e.call(arguments,1);return o[h]=!0,F(function(){o[h]&&(k?m.apply(null,k):m.call(null),ue.clearImmediate(h))}),h},ue.clearImmediate="function"==typeof a?a:function(m){delete o[m]}}).call(this)}).call(this,J("timers").setImmediate,J("timers").clearImmediate)},{"process/browser.js":62,timers:114}],115:[function(J,ie,ue){"use strict";var q=J("punycode"),a=J("./util");function F(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}ue.parse=P,ue.resolve=function(M,j){return P(M,!1,!0).resolve(j)},ue.resolveObject=function(M,j){return M?P(M,!1,!0).resolveObject(j):j},ue.format=function(M){return a.isString(M)&&(M=P(M)),M instanceof F?M.format():F.prototype.format.call(M)},ue.Url=F;var y=/^([a-z0-9.+-]+:)/i,e=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(u),m=["%","/","?",";","#"].concat(d),h=["/","?","#"],k=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=J("querystring");function P(M,j,O){if(M&&a.isObject(M)&&M instanceof F)return M;var L=new F;return L.parse(M,j,O),L}F.prototype.parse=function(M,j,O){if(!a.isString(M))throw new TypeError("Parameter 'url' must be a string, not "+typeof M);var L=M.indexOf("?"),U=-1!==L&&L<M.indexOf("#")?"?":"#",W=M.split(U);W[0]=W[0].replace(/\\/g,"/");var V=M=W.join(U);if(V=V.trim(),!O&&1===M.split("#").length){var $=o.exec(V);if($)return this.path=V,this.href=V,this.pathname=$[1],$[2]?(this.search=$[2],this.query=j?E.parse(this.search.substr(1)):this.search.substr(1)):j&&(this.search="",this.query={}),this}var fe=y.exec(V);if(fe){var ce=(fe=fe[0]).toLowerCase();this.protocol=ce,V=V.substr(fe.length)}if(O||fe||V.match(/^\/\/[^@\/]+@[^@\/]+/)){var xe="//"===V.substr(0,2);!xe||fe&&w[fe]||(V=V.substr(2),this.slashes=!0)}if(!w[fe]&&(xe||fe&&!T[fe])){for(var te,se,ne=-1,ve=0;ve<h.length;ve++)-1!==(Ce=V.indexOf(h[ve]))&&(-1===ne||Ce<ne)&&(ne=Ce);for(-1!==(se=-1===ne?V.lastIndexOf("@"):V.lastIndexOf("@",ne))&&(te=V.slice(0,se),V=V.slice(se+1),this.auth=decodeURIComponent(te)),ne=-1,ve=0;ve<m.length;ve++){var Ce;-1!==(Ce=V.indexOf(m[ve]))&&(-1===ne||Ce<ne)&&(ne=Ce)}-1===ne&&(ne=V.length),this.host=V.slice(0,ne),V=V.slice(ne),this.parseHost(),this.hostname=this.hostname||"";var be="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!be)for(var de=this.hostname.split(/\./),ye=(ve=0,de.length);ve<ye;ve++){var Fe=de[ve];if(Fe&&!Fe.match(k)){for(var Be="",Ie=0,Je=Fe.length;Ie<Je;Ie++)Fe.charCodeAt(Ie)>127?Be+="x":Be+=Fe[Ie];if(!Be.match(k)){var G=de.slice(0,ve),H=de.slice(ve+1),ee=Fe.match(v);ee&&(G.push(ee[1]),H.unshift(ee[2])),H.length&&(V="/"+H.join(".")+V),this.hostname=G.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),be||(this.hostname=q.toASCII(this.hostname));var pe=this.port?":"+this.port:"",Ne=this.hostname||"";this.host=Ne+pe,this.href+=this.host,be&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==V[0]&&(V="/"+V))}if(!f[ce])for(ve=0,ye=d.length;ve<ye;ve++){var _e=d[ve];if(-1!==V.indexOf(_e)){var Pe=encodeURIComponent(_e);Pe===_e&&(Pe=escape(_e)),V=V.split(_e).join(Pe)}}var We=V.indexOf("#");-1!==We&&(this.hash=V.substr(We),V=V.slice(0,We));var Ye=V.indexOf("?");if(-1!==Ye?(this.search=V.substr(Ye),this.query=V.substr(Ye+1),j&&(this.query=E.parse(this.query)),V=V.slice(0,Ye)):j&&(this.search="",this.query={}),V&&(this.pathname=V),T[ce]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){pe=this.pathname||"";var mt=this.search||"";this.path=pe+mt}return this.href=this.format(),this},F.prototype.format=function(){var M=this.auth||"";M&&(M=(M=encodeURIComponent(M)).replace(/%3A/i,":"),M+="@");var j=this.protocol||"",O=this.pathname||"",L=this.hash||"",U=!1,W="";this.host?U=M+this.host:this.hostname&&(U=M+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(U+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(W=E.stringify(this.query));var V=this.search||W&&"?"+W||"";return j&&":"!==j.substr(-1)&&(j+=":"),this.slashes||(!j||T[j])&&!1!==U?(U="//"+(U||""),O&&"/"!==O.charAt(0)&&(O="/"+O)):U||(U=""),L&&"#"!==L.charAt(0)&&(L="#"+L),V&&"?"!==V.charAt(0)&&(V="?"+V),j+U+(O=O.replace(/[?#]/g,function($){return encodeURIComponent($)}))+(V=V.replace("#","%23"))+L},F.prototype.resolve=function(M){return this.resolveObject(P(M,!1,!0)).format()},F.prototype.resolveObject=function(M){if(a.isString(M)){var j=new F;j.parse(M,!1,!0),M=j}for(var O=new F,L=Object.keys(this),U=0;U<L.length;U++){var W=L[U];O[W]=this[W]}if(O.hash=M.hash,""===M.href)return O.href=O.format(),O;if(M.slashes&&!M.protocol){for(var V=Object.keys(M),$=0;$<V.length;$++){var fe=V[$];"protocol"!==fe&&(O[fe]=M[fe])}return T[O.protocol]&&O.hostname&&!O.pathname&&(O.path=O.pathname="/"),O.href=O.format(),O}if(M.protocol&&M.protocol!==O.protocol){if(!T[M.protocol]){for(var ce=Object.keys(M),xe=0;xe<ce.length;xe++){var te=ce[xe];O[te]=M[te]}return O.href=O.format(),O}if(O.protocol=M.protocol,M.host||w[M.protocol])O.pathname=M.pathname;else{for(var se=(M.pathname||"").split("/");se.length&&!(M.host=se.shift()););M.host||(M.host=""),M.hostname||(M.hostname=""),""!==se[0]&&se.unshift(""),se.length<2&&se.unshift(""),O.pathname=se.join("/")}if(O.search=M.search,O.query=M.query,O.host=M.host||"",O.auth=M.auth,O.hostname=M.hostname||M.host,O.port=M.port,O.pathname||O.search){var ne=O.pathname||"",ve=O.search||"";O.path=ne+ve}return O.slashes=O.slashes||M.slashes,O.href=O.format(),O}var Ce=O.pathname&&"/"===O.pathname.charAt(0),be=M.host||M.pathname&&"/"===M.pathname.charAt(0),de=be||Ce||O.host&&M.pathname,ye=de,Fe=O.pathname&&O.pathname.split("/")||[],Be=(se=M.pathname&&M.pathname.split("/")||[],O.protocol&&!T[O.protocol]);if(Be&&(O.hostname="",O.port=null,O.host&&(""===Fe[0]?Fe[0]=O.host:Fe.unshift(O.host)),O.host="",M.protocol&&(M.hostname=null,M.port=null,M.host&&(""===se[0]?se[0]=M.host:se.unshift(M.host)),M.host=null),de=de&&(""===se[0]||""===Fe[0])),be)O.host=M.host||""===M.host?M.host:O.host,O.hostname=M.hostname||""===M.hostname?M.hostname:O.hostname,O.search=M.search,O.query=M.query,Fe=se;else if(se.length)Fe||(Fe=[]),Fe.pop(),Fe=Fe.concat(se),O.search=M.search,O.query=M.query;else if(!a.isNullOrUndefined(M.search))return Be&&(O.hostname=O.host=Fe.shift(),(ee=!!(O.host&&O.host.indexOf("@")>0)&&O.host.split("@"))&&(O.auth=ee.shift(),O.host=O.hostname=ee.shift())),O.search=M.search,O.query=M.query,a.isNull(O.pathname)&&a.isNull(O.search)||(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.href=O.format(),O;if(!Fe.length)return O.pathname=null,O.search?O.path="/"+O.search:O.path=null,O.href=O.format(),O;for(var Ie=Fe.slice(-1)[0],Je=(O.host||M.host||Fe.length>1)&&("."===Ie||".."===Ie)||""===Ie,G=0,H=Fe.length;H>=0;H--)"."===(Ie=Fe[H])?Fe.splice(H,1):".."===Ie?(Fe.splice(H,1),G++):G&&(Fe.splice(H,1),G--);if(!de&&!ye)for(;G--;G)Fe.unshift("..");!de||""===Fe[0]||Fe[0]&&"/"===Fe[0].charAt(0)||Fe.unshift(""),Je&&"/"!==Fe.join("/").substr(-1)&&Fe.push("");var ee,pe=""===Fe[0]||Fe[0]&&"/"===Fe[0].charAt(0);return Be&&(O.hostname=O.host=pe?"":Fe.length?Fe.shift():"",(ee=!!(O.host&&O.host.indexOf("@")>0)&&O.host.split("@"))&&(O.auth=ee.shift(),O.host=O.hostname=ee.shift())),(de=de||O.host&&Fe.length)&&!pe&&Fe.unshift(""),Fe.length?O.pathname=Fe.join("/"):(O.pathname=null,O.path=null),a.isNull(O.pathname)&&a.isNull(O.search)||(O.path=(O.pathname?O.pathname:"")+(O.search?O.search:"")),O.auth=M.auth||O.auth,O.slashes=O.slashes||M.slashes,O.href=O.format(),O},F.prototype.parseHost=function(){var M=this.host,j=e.exec(M);j&&(":"!==(j=j[0])&&(this.port=j.substr(1)),M=M.substr(0,M.length-j.length)),M&&(this.hostname=M)}},{"./util":116,punycode:5,querystring:65}],116:[function(J,ie,ue){"use strict";ie.exports={isString:function(q){return"string"==typeof q},isObject:function(q){return"object"==typeof q&&null!==q},isNull:function(q){return null===q},isNullOrUndefined:function(q){return null==q}}},{}],117:[function(J,ie,ue){(function(q){(function(){function a(F){try{if(!q.localStorage)return!1}catch(e){return!1}var y=q.localStorage[F];return null!=y&&"true"===String(y).toLowerCase()}ie.exports=function(F,y){if(a("noDeprecation"))return F;var e=!1;return function(){if(!e){if(a("throwDeprecation"))throw new Error(y);a("traceDeprecation")?console.trace(y):console.warn(y),e=!0}return F.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],118:[function(J,ie,ue){(function(q){(function(){"use strict";var a=J("for-each"),F=J("available-typed-arrays"),y=J("call-bind/callBound"),e=y("Object.prototype.toString"),o=J("has-tostringtag/shams")(),u="undefined"==typeof globalThis?q:globalThis,d=F(),m=y("String.prototype.slice"),h={},k=J("es-abstract/helpers/getOwnPropertyDescriptor"),v=Object.getPrototypeOf;o&&k&&v&&a(d,function(w){if("function"==typeof u[w]){var T=new u[w];if(Symbol.toStringTag in T){var E=v(T),P=k(E,Symbol.toStringTag);if(!P){var M=v(E);P=k(M,Symbol.toStringTag)}h[w]=P.get}}});var f=J("is-typed-array");ie.exports=function(w){return!!f(w)&&(o&&Symbol.toStringTag in w?(T=w,E=!1,a(h,function(P,M){if(!E)try{var j=P.call(T);j===M&&(E=j)}catch(O){}}),E):m(e(w),8,-1));var T,E}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":1,"call-bind/callBound":11,"es-abstract/helpers/getOwnPropertyDescriptor":14,"for-each":16,"has-tostringtag/shams":22,"is-typed-array":30}],119:[function(J,ie,ue){ie.exports=function(){for(var a={},F=0;F<arguments.length;F++){var y=arguments[F];for(var e in y)q.call(y,e)&&(a[e]=y[e])}return a};var q=Object.prototype.hasOwnProperty},{}],120:[function(J,ie,ue){"use strict";ie.exports=function(q){q.prototype[Symbol.iterator]=function*(){for(let a=this.head;a;a=a.next)yield a.value}}},{}],121:[function(J,ie,ue){"use strict";function q(o){var u=this;if(u instanceof q||(u=new q),u.tail=null,u.head=null,u.length=0,o&&"function"==typeof o.forEach)o.forEach(function(h){u.push(h)});else if(arguments.length>0)for(var d=0,m=arguments.length;d<m;d++)u.push(arguments[d]);return u}function a(o,u,d){var m=u===o.head?new e(d,null,u,o):new e(d,u,u.next,o);return null===m.next&&(o.tail=m),null===m.prev&&(o.head=m),o.length++,m}function F(o,u){o.tail=new e(u,o.tail,null,o),o.head||(o.head=o.tail),o.length++}function y(o,u){o.head=new e(u,null,o.head,o),o.tail||(o.tail=o.head),o.length++}function e(o,u,d,m){if(!(this instanceof e))return new e(o,u,d,m);this.list=m,this.value=o,u?(u.next=this,this.prev=u):this.prev=null,d?(d.prev=this,this.next=d):this.next=null}ie.exports=q,q.Node=e,q.create=q,q.prototype.removeNode=function(o){if(o.list!==this)throw new Error("removing node which does not belong to this list");var u=o.next,d=o.prev;return u&&(u.prev=d),d&&(d.next=u),o===this.head&&(this.head=u),o===this.tail&&(this.tail=d),o.list.length--,o.next=null,o.prev=null,o.list=null,u},q.prototype.unshiftNode=function(o){if(o!==this.head){o.list&&o.list.removeNode(o);var u=this.head;o.list=this,o.next=u,u&&(u.prev=o),this.head=o,this.tail||(this.tail=o),this.length++}},q.prototype.pushNode=function(o){if(o!==this.tail){o.list&&o.list.removeNode(o);var u=this.tail;o.list=this,o.prev=u,u&&(u.next=o),this.tail=o,this.head||(this.head=o),this.length++}},q.prototype.push=function(){for(var o=0,u=arguments.length;o<u;o++)F(this,arguments[o]);return this.length},q.prototype.unshift=function(){for(var o=0,u=arguments.length;o<u;o++)y(this,arguments[o]);return this.length},q.prototype.pop=function(){if(this.tail){var o=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,o}},q.prototype.shift=function(){if(this.head){var o=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,o}},q.prototype.forEach=function(o,u){u=u||this;for(var d=this.head,m=0;null!==d;m++)o.call(u,d.value,m,this),d=d.next},q.prototype.forEachReverse=function(o,u){u=u||this;for(var d=this.tail,m=this.length-1;null!==d;m--)o.call(u,d.value,m,this),d=d.prev},q.prototype.get=function(o){for(var u=0,d=this.head;null!==d&&u<o;u++)d=d.next;if(u===o&&null!==d)return d.value},q.prototype.getReverse=function(o){for(var u=0,d=this.tail;null!==d&&u<o;u++)d=d.prev;if(u===o&&null!==d)return d.value},q.prototype.map=function(o,u){u=u||this;for(var d=new q,m=this.head;null!==m;)d.push(o.call(u,m.value,this)),m=m.next;return d},q.prototype.mapReverse=function(o,u){u=u||this;for(var d=new q,m=this.tail;null!==m;)d.push(o.call(u,m.value,this)),m=m.prev;return d},q.prototype.reduce=function(o,u){var d,m=this.head;if(arguments.length>1)d=u;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");m=this.head.next,d=this.head.value}for(var h=0;null!==m;h++)d=o(d,m.value,h),m=m.next;return d},q.prototype.reduceReverse=function(o,u){var d,m=this.tail;if(arguments.length>1)d=u;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");m=this.tail.prev,d=this.tail.value}for(var h=this.length-1;null!==m;h--)d=o(d,m.value,h),m=m.prev;return d},q.prototype.toArray=function(){for(var o=new Array(this.length),u=0,d=this.head;null!==d;u++)o[u]=d.value,d=d.next;return o},q.prototype.toArrayReverse=function(){for(var o=new Array(this.length),u=0,d=this.tail;null!==d;u++)o[u]=d.value,d=d.prev;return o},q.prototype.slice=function(o,u){(u=u||this.length)<0&&(u+=this.length),(o=o||0)<0&&(o+=this.length);var d=new q;if(u<o||u<0)return d;o<0&&(o=0),u>this.length&&(u=this.length);for(var m=0,h=this.head;null!==h&&m<o;m++)h=h.next;for(;null!==h&&m<u;m++,h=h.next)d.push(h.value);return d},q.prototype.sliceReverse=function(o,u){(u=u||this.length)<0&&(u+=this.length),(o=o||0)<0&&(o+=this.length);var d=new q;if(u<o||u<0)return d;o<0&&(o=0),u>this.length&&(u=this.length);for(var m=this.length,h=this.tail;null!==h&&m>u;m--)h=h.prev;for(;null!==h&&m>o;m--,h=h.prev)d.push(h.value);return d},q.prototype.splice=function(o,u,...d){o>this.length&&(o=this.length-1),o<0&&(o=this.length+o);for(var m=0,h=this.head;null!==h&&m<o;m++)h=h.next;var k=[];for(m=0;h&&m<u;m++)k.push(h.value),h=this.removeNode(h);for(null===h&&(h=this.tail),h!==this.head&&h!==this.tail&&(h=h.prev),m=0;m<d.length;m++)h=a(this,h,d[m]);return k},q.prototype.reverse=function(){for(var o=this.head,u=this.tail,d=o;null!==d;d=d.prev){var m=d.prev;d.prev=d.next,d.next=m}return this.head=u,this.tail=o,this};try{J("./iterator.js")(q)}catch(o){}},{"./iterator.js":120}],122:[function(J,ie,ue){var q=J("./parser"),a=J("./utils"),F=a;function y(o,u){this.name="NonSupportedSparqlFeatureError",this.feature=o,this.message=u||"SPARQL feature "+o+" non supported"}function e(o){this.name=ParserError,this.message=o||"Error parsing SPARQL query"}y.prototype=new Error,y.constructor=y,e.prototype=new Error,e.constructor=e,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(o){return q.parse(o)},AbstractQueryTree.prototype.parseExecutableUnit=function(o){if("select"===o.kind)return this.parseSelect(o);if("ask"===o.kind)return this.parseSelect(o);if("modify"===o.kind)return this.parseSelect(o);if("construct"===o.kind)return this.parseSelect(o);if("insertdata"===o.kind)return this.parseInsertData(o);if("deletedata"===o.kind)return this.parseInsertData(o);if("load"===o.kind||"clear"===o.kind||"drop"===o.kind||"create"===o.kind)return o;throw new Error("unknown executable unit: "+o.kind)},AbstractQueryTree.prototype.parseSelect=function(o){return null==o?(console.log("error parsing query"),null):(o.pattern=this.build(o.pattern,{freshCounter:0}),o)},AbstractQueryTree.prototype.parseInsertData=function(o){return null==o?(console.log("error parsing query"),null):o},AbstractQueryTree.prototype.build=function(o,u){if("groupgraphpattern"===o.token)return this._buildGroupGraphPattern(o,u);if("basicgraphpattern"===o.token){var d={kind:"BGP",value:o.triplesContext};return AbstractQueryTree.translatePathExpressionsInBGP(d,u)}if("graphunionpattern"===o.token)return{kind:"UNION",value:[this.build(o.value[0],u),this.build(o.value[1],u)]};if("graphgraphpattern"===o.token)return{kind:"GRAPH",value:this.build(o.value,u),graph:o.graph};throw null!=o.token?new y(o.token,"Non implemented SPARQL graph pattern: '"+o.token+"'"):new e("Error parsing graph pattern: '"+JSON.stringify(o)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(o,u){for(var d,m,h,k=[],v=0;v<o.value.length;v++)if(o.value[v].predicate&&"path"===o.value[v].predicate.token){d=o.value[v],m=o.value.slice(v+1);var f=AbstractQueryTree.translatePathExpression(d,u),w=null;if("BGP"!==f.kind){if("ZERO_OR_MORE_PATH"===f.kind||"ONE_OR_MORE_PATH"===f.kind){if(h=k.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:k},rvalue:f}:f,"ZERO_OR_MORE_PATH"===f.kind)if("var"===f.y.token&&0===f.y.value.indexOf("fresh:")&&"var"===f.x.token&&0===f.x.value.indexOf("fresh:"))for(var T=0;T<o.value.length;T++)o.value[T].object&&"var"===o.value[T].object.token&&o.value[T].object.value===f.x.value&&((w=F.clone(o.value[T],!0)).object=f.y);else if("var"===f.y.token&&0===f.y.value.indexOf("fresh:"))for(T=0;T<o.value.length;T++)o.value[T].subject&&"var"===o.value[T].subject.token&&o.value[T].subject.value===f.y.value&&((w=F.clone(o.value[T],!0)).subject=f.x);if(m.length>0){var E=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:m},u);return null!=w?{kind:"UNION",value:[{kind:"JOIN",lvalue:h,rvalue:E},{kind:"BGP",value:k.concat([w]).concat(m)}]}:{kind:"JOIN",lvalue:h,rvalue:E}}return h}return f}k=k.concat(f.value)}else k.push(o.value[v]);return o.value=k,o},AbstractQueryTree.translatePathExpression=function(o,u){if("element"===o.predicate.kind)return"+"===o.predicate.modifier?(o.predicate.modifier=null,{kind:"ONE_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(o,u),x:o.subject,y:o.object}):"*"===o.predicate.modifier?(o.predicate.modifier=null,{kind:"ZERO_OR_MORE_PATH",path:AbstractQueryTree.translatePathExpression(o,u),x:o.subject,y:o.object}):(o.predicate=o.predicate.value,{kind:"BGP",value:[o]});if("sequence"===o.predicate.kind){for(var d,m,h=o.subject,k=o.object,v=o.graph,f=[],w=0;w<o.predicate.value.length;w++)w!=o.predicate.value.length-1?(d={token:"var",value:"fresh:"+u.freshCounter},u.freshCounter++):d=k,m={subject:h,predicate:o.predicate.value[w],object:d},null!=v&&(m.graph=F.clone(v,!0)),f.push(m),w!=o.predicate.value.length-1&&(h=F.clone(d,!0));var T={kind:"BGP",value:f};return AbstractQueryTree.translatePathExpressionsInBGP(T,u)}throw new y("Non supported path expression "+o.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(o,u){for(var d=o.filters||[],m=o.binds||[],h={kind:"EMPTY_PATTERN"},k=0;k<o.patterns.length;k++){var v=o.patterns[k];if("optionalgraphpattern"===v.token)h="FILTER"===(f=this.build(v.value,u)).kind?{kind:"LEFT_JOIN",lvalue:h,rvalue:f.value,filter:f.filter}:{kind:"LEFT_JOIN",lvalue:h,rvalue:f,filter:!0};else{var f=this.build(v,u);h="EMPTY_PATTERN"==h.kind?f:{kind:"JOIN",lvalue:h,rvalue:f}}}if(h.binds=m,0!=d.length){if("EMPTY_PATTERN"===h.kind)return{kind:"FILTER",filter:d,value:h};if("LEFT_JOIN"===h.kind&&!0===h.filter)return{kind:"FILTER",filter:d,value:h};if("LEFT_JOIN"===h.kind)return{kind:"FILTER",filter:d,value:h};if("JOIN"===h.kind)return{kind:"FILTER",filter:d,value:h};if("UNION"===h.kind)return{kind:"FILTER",filter:d,value:h};if("GRAPH"===h.kind)return{kind:"FILTER",filter:d,value:h};if("BGP"===h.kind)return{kind:"FILTER",filter:d,value:h};throw new Error("Unknow kind of algebra expression: "+h.kind)}return h},AbstractQueryTree.prototype.collectBasicTriples=function(o,u){if(null==u&&(u=[]),"select"===o.kind)u=this.collectBasicTriples(o.pattern,u);else if("BGP"===o.kind)u=u.concat(o.value);else if("ZERO_OR_MORE_PATH"===o.kind)u=this.collectBasicTriples(o.path);else if("UNION"===o.kind)u=this.collectBasicTriples(o.value[0],u),u=this.collectBasicTriples(o.value[1],u);else if("GRAPH"===o.kind)u=this.collectBasicTriples(o.value,u);else if("LEFT_JOIN"===o.kind||"JOIN"===o.kind)u=this.collectBasicTriples(o.lvalue,u),u=this.collectBasicTriples(o.rvalue,u);else if("FILTER"===o.kind)u=this.collectBasicTriples(o.value,u);else if("construct"===o.kind)u=this.collectBasicTriples(o.pattern,u);else if("EMPTY_PATTERN"!==o.kind)throw"Unknown pattern: "+o.kind;return u},AbstractQueryTree.prototype.bind=function(o,u){if(null!=o.graph&&o.graph.token&&"var"===o.graph.token&&null!=u[o.graph.value]&&(o.graph=u[o.graph.value]),null!=o.filter){for(var d=[],m=0;m<o.filter.length;m++)o.filter[m].value=this._bindFilter(o.filter[m].value,u),d.push(o.filter[m]);o.filter=d}if("select"===o.kind)o.pattern=this.bind(o.pattern,u);else if("BGP"===o.kind)o.value=this._bindTripleContext(o.value,u);else if("ZERO_OR_MORE_PATH"===o.kind)o.path=this._bindTripleContext(o.path,u),o.x&&"var"===o.x.token&&null!=u[o.x.value]&&(o.x=u[o.x.value]),o.y&&"var"===o.y.token&&null!=u[o.y.value]&&(o.y=u[o.y.value]);else if("UNION"===o.kind)o.value[0]=this.bind(o.value[0],u),o.value[1]=this.bind(o.value[1],u);else if("GRAPH"===o.kind)o.value=this.bind(o.value,u);else if("LEFT_JOIN"===o.kind||"JOIN"===o.kind)o.lvalue=this.bind(o.lvalue,u),o.rvalue=this.bind(o.rvalue,u);else if("FILTER"===o.kind){var h=this;o.value=this.bind(o.value,u),o.filter=o.filter.map(function(k){return{token:"filter",value:h._bindFilter(k.value,u)}})}else if("EMPTY_PATTERN"!==o.kind)throw"Unknown pattern: "+o.kind;return o},AbstractQueryTree.prototype._bindTripleContext=function(o,u){for(var d=0;d<o.length;d++)for(var m in delete o[d].graph,delete o[d].variables,o[d]){var h=o[d][m];"var"===h.token&&null!=u[h.value]&&(o[d][m]=u[h.value])}return o},AbstractQueryTree.prototype._bindFilter=function(o,u){if(null!=o.expressionType){var d=o.expressionType;if("relationalexpression"==d)o.op1=this._bindFilter(o.op1,u),o.op2=this._bindFilter(o.op2,u);else if("conditionalor"==d||"conditionaland"==d)for(var m=0;m<o.operands.length;m++)o.operands[m]=this._bindFilter(o.operands[m],u);else if("additiveexpression"==d)for(o.summand=this._bindFilter(o.summand,u),m=0;m<o.summands.length;m++)o.summands[m].expression=this._bindFilter(o.summands[m].expression,u);else if("builtincall"==d)for(m=0;m<o.args.length;m++)o.args[m]=this._bindFilter(o.args[m],u);else if("multiplicativeexpression"==d)for(o.factor=this._bindFilter(o.factor,u),m=0;m<o.factors.length;m++)o.factors[m].expression=this._bindFilter(o.factors[m].expression,u);else if("unaryexpression"==d)o.expression=this._bindFilter(o.expression,u);else if("irireforfunction"==d)for(m=0;m<o.factors.args;m++)o.args[m]=this._bindFilter(o.args[m],u);else if("atomic"==d&&"var"==o.primaryexpression&&null!=u[o.value.value]){var h=u[o.value.value];"uri"===h.token?o.primaryexpression="iri":o.primaryexpression="literal",o.value=h}}return o},AbstractQueryTree.prototype.replace=function(o,u,d,m){if(null!=o.graph&&o.graph.token&&o.graph.token===u.token&&o.graph.value==u.value&&(o.graph=F.clone(d,!0)),null!=o.filter){for(var h=[],k=0;k<o.filter.length;k++)o.filter[k].value=this._replaceFilter(o.filter[k].value,u,d,m),h.push(o.filter[k]);o.filter=h}if("select"===o.kind)o.pattern=this.replace(o.pattern,u,d,m);else if("BGP"===o.kind)o.value=this._replaceTripleContext(o.value,u,d,m);else if("ZERO_OR_MORE_PATH"===o.kind)o.path=this._replaceTripleContext(o.path,u,d,m),o.x&&o.x.token===u.token&&o.value===u.value&&(o.x=F.clone(d,!0)),o.y&&o.y.token===u.token&&o.value===u.value&&(o.y=F.clone(d,!0));else if("UNION"===o.kind)o.value[0]=this.replace(o.value[0],u,d,m),o.value[1]=this.replace(o.value[1],u,d,m);else if("GRAPH"===o.kind)o.value=this.replace(o.value,u,d);else if("LEFT_JOIN"===o.kind||"JOIN"===o.kind)o.lvalue=this.replace(o.lvalue,u,d,m),o.rvalue=this.replace(o.rvalue,u,d,m);else if("FILTER"===o.kind)o.value=this._replaceFilter(o.value,u,d,m);else if("EMPTY_PATTERN"!==o.kind)throw"Unknown pattern: "+o.kind;return o},AbstractQueryTree.prototype._replaceTripleContext=function(o,u,d,m){for(var h=0;h<o.length;h++)for(var k in o[h]){var v=o[h][k];"var"===v.token&&"var"===u.token&&v.value===u.value||"blank"===v.token&&"blank"===u.token&&v.value===u.value?o[h][k]=d:"literal"!==v.token&&"uri"!==v.token||"literal"!==u.token&&"uri"!==u.token||v.token!==u.token||a.lexicalFormTerm(v,m)[v.token]!==a.lexicalFormTerm(u,m)[v.token]||(o[h][k]=d)}return o},AbstractQueryTree.prototype._replaceFilter=function(o,u,d,m){if(null!=o.expressionType){var h=o.expressionType;if("relationalexpression"==h)o.op1=this._replaceFilter(o.op1,u,d,m),o.op2=this._replaceFilter(o.op2,u,d,m);else if("conditionalor"==h||"conditionaland"==h)for(var k=0;k<o.operands.length;k++)o.operands[k]=this._replaceFilter(o.operands[k],u,d,m);else if("additiveexpression"==h)for(o.summand=this._replaceFilter(o.summand,u,d,m),k=0;k<o.summands.length;k++)o.summands[k].expression=this._replaceFilter(o.summands[k].expression,u,d,m);else if("builtincall"==h)for(k=0;k<o.args.length;k++)o.args[k]=this._replaceFilter(o.args[k],u,d,m);else if("multiplicativeexpression"==h)for(o.factor=this._replaceFilter(o.factor,u,d,m),k=0;k<o.factors.length;k++)o.factors[k].expression=this._replaceFilter(o.factors[k].expression,u,d,m);else if("unaryexpression"==h)o.expression=this._replaceFilter(o.expression,u,d,m);else if("irireforfunction"==h)for(k=0;k<o.factors.args;k++)o.args[k]=this._replaceFilter(o.args[k],u,d,m);else if("atomic"==h){var v=null;(o.primaryexpression==u.token&&o.value==u.value||"iri"==o.primaryexpression&&"uri"==u.token&&o.value==u.value)&&(v=d.value),null!=v&&("uri"===d.token?o.primaryexpression="iri":o.primaryexpression=d.token,o.value=v)}}return o},AbstractQueryTree.prototype.treeWithUnion=function(o){if(null==o||null==o.kind)return!1;if("select"===o.kind)return this.treeWithUnion(o.pattern);if("BGP"===o.kind)return this.treeWithUnion(o.value);if("ZERO_OR_MORE_PATH"===o.kind)return!1;if("UNION"===o.kind){if(null==o.value[0].value||null==o.value[0].value.variables||null==o.value[1].value||null==o.value[1].value.variables)return!0;if(o.value[0].variables.join("/")===o.values[1].variables.join("/"))return!!this.treeWithUnion(o.value[0])||this.treeWithUnion(o.value[1])}else{if("GRAPH"===o.kind)return!1;if("LEFT_JOIN"!==o.kind&&"JOIN"!==o.kind)return"FILTER"!==o.kind&&(o.kind,!1);if(this.treeWithUnion(o.lvalue))return!0;this.treeWithUnion(o.rvalue)}},ie.exports={AbstractQueryTree,NonSupportedSparqlFeatureError:y,SparqlParserError:e}},{"./parser":128,"./utils":140}],123:[function(J,ie,ue){"use strict";var q=J("./utils"),a=q,F=q.nextTick,y=function(o,u){if(0!=arguments.length){this.order=o,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var d=this;this._diskWrite(this.root,function(m){d.root=m,d._updateRootNode(d.root,function(h){d.comparator=function(k,v){return k<v?-1:k>v?1:0},d.merger=null,null!=u&&u(d)})})}};y.prototype._allocateNode=function(){return new e},y.prototype._diskWrite=function(o,u){F(function(){u(o)})},y.prototype._diskRead=function(o,u){F(function(){u(o)})},y.prototype._diskDelete=function(o,u){F(function(){u()})},y.prototype._updateRootNode=function(o,u){u(o)},y.prototype.search=function(o,u,d){var m=this.root;this.__search(this,o,m,u,d)},y.prototype.__search=function(o,u,d,m,h){for(var k=0;k<d.numberActives&&1===o.comparator(u,d.keys[k].key);)k++;k<d.numberActives&&0===o.comparator(d.keys[k].key,u)?m(null!=h&&1==h||d.keys[k].data):!0===d.isLeaf?m(null):o._diskRead(d.children[k],function(v){o.__search(o,u,v,m,h)})},y.prototype.walk=function(o,u){this.__walk(this,this.root,o,u)},y.prototype.__walk=function(o,u,d,m){var h=u.numberActives,k=0;if(u.isLeaf){for(k=0;k<u.numberActives;k++)d(u.keys[k]);return m()}a.whilst(function(){return k<h},function(v){o._diskRead(u.children[k],function(f){o.__walk(o,f,d,function(){o._diskRead(u.keys[k],function(w){d(w),k++,v()})})})},function(){o._diskRead(u.children[h],function(v){o.__walk(o,v,d,function(){m()})})})},y.prototype.walkNodes=function(o){this.__walkNodes(this,root,o,function(){})},y.prototype.__walkNodes=function(o,u,d,m){if(u.isLeaf)return d(u),m();d(u);var h=u.numberActives,k=0;a.whilst(function(){return k<h},function(v){o._diskRead(u.children[k],function(f){o.__walkNodes(o,f,d,function(){k++,v()})})},function(){o._diskRead(u.children[h],function(v){o.__walkNodes(o,v,d,function(){})})})},y.prototype._splitChild=function(o,u,d,m){var h=this._allocateNode();h.isLeaf=d.isLeaf,h.level=d.level,h.numberActives=this.order-1;var k=d.keys[this.order-1];d.keys[this.order-1]=null;for(var v=0;v<this.order-1;v++)h.keys[v]=d.keys[v+this.order],d.keys[v+this.order]=null,d.isLeaf||(h.children[v]=d.children[v+this.order],d.children[v+this.order]=null);for(d.isLeaf||(h.children[v]=d.children[v+this.order],d.children[v+this.order]=null),d.numberActives=this.order-1,v=o.numberActives+1;v>u+1;v--)o.children[v]=o.children[v-1];for(o.children[u+1]=h,v=o.numberActives;v>u;v--)o.keys[v]=o.keys[v-1];o.keys[u]=k,o.numberActives++;var f=this;this._diskWrite(h,function(w){f._diskWrite(o,function(T){T.children[u+1]=w,f._diskWrite(d,function(E){return m(T)})})})},y.prototype.insert=function(o,u,d){if(this.root.numberActives===2*this.order-1){var m=this._allocateNode();m.isLeaf=!1,m.level=this.root.level+1,m.numberActives=0,m.children[0]=this.root;var h=this;this._splitChild(m,0,this.root,function(k){m=k,h.root=m,h._updateRootNode(m,function(v){h._insertNonFull(v,o,u,d)})})}else this._insertNonFull(this.root,o,u,d)},y.prototype._insertNonFull=function(o,u,d,m){var h=o.numberActives-1;this.__insertNonFull(this,o,h,u,d,m)},y.prototype.__insertNonFull=function(o,u,d,m,h,k){if(u.isLeaf){for(;d>=0&&-1===o.comparator(m,u.keys[d].key);)u.keys[d+1]=u.keys[d],d--;d>=0&&0===o.comparator(m,u.keys[d].key)?u.keys[d]={key:m,data:h}:(u.keys[d+1]={key:m,data:h},u.numberActives++),o._diskWrite(u,function(f){return k(f)})}else{for(;d>=0&&-1===o.comparator(m,u.keys[d].key);)d--;d++;var v=o;o._diskRead(u.children[d],function(f){f.numberActives===2*v.order-1?v._splitChild(u,d,f,function(){1===v.comparator(m,u.keys[d].key)&&d++,v._diskRead(u.children[d],function(w){d=w.numberActives-1,v.__insertNonFull(o,w,d,m,h,k)})}):v._diskRead(u.children[d],function(w){d=w.numberActives-1,v.__insertNonFull(o,w,d,m,h,k)})})}},y.prototype.delete=function(o,u){var d=this.root;y.prototype.__deleteSearchNode(this,o,d,u)},y.prototype.__deleteSearchNode=function(o,u,d,m){var h=0;if(0===d.numberActives)return m(!1);for(;h<d.numberActives&&1===o.comparator(u,d.keys[h].key);)h++;var k=h;if(h<d.numberActives&&0===o.comparator(u,d.keys[h].key))return o.__deleteNodeFound(o,k,u,d,m);if(!0===d.isLeaf)return m(!1);var v=d;o._diskRead(d.children[h],function(f){if(null===f)return m(!1);var w=!1,T=!1,E=null,P=null;k===v.numberActives?(T=!0,P=v.children[k-1],E=v.children[k-1]):0===k?(w=!0,E=v.children[1],P=v.children[1]):(P=v.children[k-1],E=v.children[k+1]),o._diskRead(P,function(M){o._diskRead(E,function(j){!0===T&&(j=null),!0===w&&(M=null),f.numberActives===o.order-1&&null!=v?null!=j&&j.numberActives>o.order-1?o._moveKey(v,h,-1,function(O){o.__deleteSearchNode(o,u,f,m)}):null!=M&&M.numberActives>o.order-1?o._moveKey(v,h,1,function(O){o.__deleteSearchNode(o,u,f,m)}):null!=M&&M.numberActives===o.order-1?o._mergeSiblings(v,h,-1,function(O){o.__deleteSearchNode(o,u,O,m)}):null!=j&&j.numberActives===o.order-1&&o._mergeSiblings(v,h,1,function(O){o.__deleteSearchNode(o,u,O,m)}):o.__deleteSearchNode(o,u,f,m)})})})},y.prototype.__deleteNodeFound=function(o,u,d,m,h){return m.isLeaf&&m.numberActives>o.order-1||m.isLeaf&&m===o.root?(o._deleteKeyFromNode(m,u,function(){h(!0)}),!0):(!1===m.isLeaf&&o._diskRead(m.children[u],function(k){k.numberActives>o.order-1?o._getMaxKeyPos(o,k,function(v){d=v.node.keys[v.index],m.keys[u]=d,o._diskWrite(m,function(f){f=k,d=d.key,o.__deleteSearchNode(o,d,f,h)})}):o._diskRead(m.children[u+1],function(v){v.numberActives>o.order-1?o._getMinKeyPos(o,v,function(f){d=f.node.keys[f.index],m.keys[u]=d,o._diskWrite(m,function(w){w=v,d=d.key,o.__deleteSearchNode(o,d,w,h)})}):k.numberActives===o.order-1&&v.numberActives===o.order-1&&o._mergeNodes(k,m.keys[u],v,function(f){m.children[u]=f;for(var w=++u;w<m.numberActives;w++)m.children[w]=m.children[w+1],m.keys[w-1]=m.keys[w];m.children[w]=null,m.keys[w-1]=null,m.numberActives--,0===m.numberActives&&o.root===m&&(o.root=f),o._diskWrite(m,function(T){o.__deleteSearchNode(o,d,f,h)})})})}),void(m.isLeaf&&m.numberActives>o.order-1&&o._deleteKeyFromNode(m,u,function(k){o.__deleteSearchNode(o,d,k,h)})))},y.prototype._moveKey=function(o,u,d,m){1===d&&u--;var h=this;h._diskRead(o.children[u],function(k){h._diskRead(o.children[u+1],function(v){if(-1==d){k.keys[k.numberActives]=o.keys[u],k.children[k.numberActives+1]=v.children[0],v.children[0]=null,k.numberActives++,o.keys[u]=v.keys[0];for(var f=1;f<v.numberActives;f++)v.keys[f-1]=v.keys[f],v.children[f-1]=v.children[f];v.children[v.numberActives-1]=v.children[v.numberActives],v.numberActives--}else{for(v.children[v.numberActives+1]=v.children[v.numberActives],f=v.numberActives;f>0;f--)v.children[f]=v.children[f-1],v.keys[f]=v.keys[f-1];v.keys[0]=null,v.children[0]=null,v.children[0]=k.children[k.numberActives],v.keys[0]=o.keys[u],v.numberActives++,k.children[k.numberActives]=null,o.keys[u]=k.keys[k.numberActives-1],k.keys[k.numberActives-1]=null,k.numberActives--}h._diskWrite(k,function(w){h._diskWrite(v,function(T){h._diskWrite(o,function(E){return m(E)})})})})})},y.prototype._mergeSiblings=function(o,u,d,m){var h,k,v,f;u===o.numberActives?(u--,v=o.children[o.numberActives-1],f=o.children[o.numberActives]):(v=o.children[u],f=o.children[u+1]);var w=this;w._diskRead(v,function(T){w._diskRead(f,function(E){var P=w._allocateNode();for(P.isLeaf=T.isLeaf,P.level=T.level,k=0;k<w.order-1;k++)P.keys[k]=T.keys[k],P.children[k]=T.children[k];for(P.keys[w.order-1]=o.keys[u],P.children[w.order-1]=T.children[w.order-1],k=0;k<w.order-1;k++)P.keys[k+w.order]=E.keys[k],P.children[k+w.order]=E.children[k];for(P.children[2*w.order-1]=E.children[w.order-1],o.children[u]=P,k=u;k<o.numberActives;k++)o.keys[k]=o.keys[k+1],o.children[k+1]=o.children[k+2];for(P.numberActives=T.numberActives+E.numberActives+1,o.numberActives--,h=o.numberActives;h<2*w.order-1;h++)o.keys[h]=null;0===o.numberActives&&w.root===o&&(w.root=P,P.level?P.isLeaf=!1:P.isLeaf=!0),w._diskWrite(P,function(M){w._diskWrite(o,function(j){w._diskDelete(T,function(){w._diskDelete(E,function(){if(w.root!==M)return m(M);w._updateRootNode(w.root,function(){return m(M)})})})})})})})},y.prototype._deleteKeyFromNode=function(o,u,d){var m,h=2*this.order-1;if(o.numberActives<h&&(h=o.numberActives),!1===o.isLeaf)return!1;for(o.keys[u],m=u;m<h-1;m++)o.keys[m]=o.keys[m+1];o.keys.pop(),o.numberActives--,this._diskWrite(o,function(k){return d(k)})},y.prototype._mergeNodes=function(o,u,d,m){var h,k;for((h=this._allocateNode()).isLeaf=!0,k=0;k<o.numberActives;k++)h.keys[k]=o.keys[k],h.children[k]=o.children[k];for(h.children[o.numberActives]=o.children[o.numberActives],h.keys[o.numberActives]=u,k=0;k<d.numberActives;k++)h.keys[k+o.numberActives+1]=d.keys[k],h.children[k+o.numberActives+1]=d.children[k];h.children[2*this.order-1]=d.children[d.numberActives],h.numberActives=o.numberActives+d.numberActives+1,h.isLeaf=o.isLeaf,h.level=o.level;var v=this;this._diskWrite(h,function(f){v._diskDelete(o,function(){v._diskDelete(d,function(){return m(f)})})})},y.prototype.audit=function(o){var u=[],d=[],m=this,h=function(v){for(var f=0;f<d.length;f++)if(0===m.comparator(d[f],v)){var w=" !!! duplicated key "+v;!0===o&&console.log(w),u.push(w)}},k=null;return m=this,this.walkNodes(function(v){!0===o&&(console.log("--- Node at "+v.level+" level"),console.log(" - leaf? "+v.isLeaf),console.log(" - num actives? "+v.numberActives),console.log(" - keys: "));for(var f=v.numberActives;f<v.keys.length;f++)null!=v.keys[f]&&!0===o&&(console.log(" * warning : redundant key data"),u.push(" * warning : redundant key data"));for(f=v.numberActives+1;f<v.children.length;f++)null!=v.children[f]&&!0===o&&(console.log(" * warning : redundant children data"),u.push(" * warning : redundant key data"));if(!1===v.isLeaf)for(f=0;f<v.numberActives;f++){var w=this._diskRead(v.children[f]).keys[this._diskRead(v.children[f]).numberActives-1].key,T=this._diskRead(v.children[f+1]).keys[0].key;if(!0===o&&console.log("   "+v.keys[f].key+"("+w+","+T+")"),-1===m.comparator(v.keys[f].key,w)){var E=" !!! value max left "+w+" > key "+v.keys[f].key;!0===o&&console.log(E),u.push(E)}1===m.comparator(v.keys[f].key,T)&&(E=" !!! value min right "+T+" < key "+v.keys[f].key,!0===o&&console.log(E),u.push(E)),h(v.keys[f].key),d.push(v.keys[f].key)}else for(null===k?k=v.level:k!=v.level&&(E=" !!! Leaf node with wrong level value",!0===o&&console.log(E),u.push(E)),f=0;f<v.numberActives;f++)!0===o&&console.log(" "+v.keys[f].key),h(v.keys[f].key),d.push(v.keys[f].key);v!=m.root&&(v.numberActives>2*m.order-1&&(!0===o&&(E=" !!!! MAX num keys restriction violated "),console.log(E),u.push(E)),v.numberActives<m.order-1&&(!0===o&&(E=" !!!! MIN num keys restriction violated "),console.log(E),u.push(E)))}),u},y.prototype._getMaxKeyPos=function(o,u,d){var m={};return null===u?d(null):!0===u.isLeaf?(m.node=u,m.index=u.numberActives-1,d(m)):(m.node=u,m.index=u.numberActives-1,void o._diskRead(u.children[u.numberActives],function(h){return o._getMaxKeyPos(o,h,d)}))},y.prototype._getMinKeyPos=function(o,u,d){var m={};if(null===u&&d(null),!0===u.isLeaf)return m.node=u,m.index=0,d(m);m.node=u,m.index=0,o._diskRead(u.children[0],function(h){return o._getMinKeyPos(o,h,d)})};var e=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};ie.exports={Tree:y,Node:e}},{"./utils":140}],124:[function(J,ie,ue){var q=J("./utils"),a=J("./utils"),F=(J("./quad_index").QuadIndex,J("./quad_index").Pattern),y=J("./rdf_model"),e=J("./abstract_query_tree").AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new e,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var o=0;o<this.indices.length;o++){var u=this.indices[o];this.indexMap[u]={},this.queriesIndexMap[u]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(o,u){this.updateInProgress[o].push(u)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(o){if(!0!==this.ongoingModification){var u=this;if(null!=this.updateInProgress){var d=u.updateInProgress;u.updateInProgress=null,this.sendNotification(Callbacks.deleted,d[Callbacks.deleted],function(){u.sendNotification(Callbacks.added,d[Callbacks.added],function(){u.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){u.dispatchQueries(function(){o(!0)})})})})}else o(!0)}else o(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(o,u,d){for(var m={},h=0;h<u.length;h++){var k=u[h];for(var v in this.indexMap){var f=this.indexMap[v],w=this.componentOrders[v];this._searchCallbacksInIndex(f,w,o,k,m),0!=this.pendingQueries.length&&(f=this.queriesIndexMap[v],this._searchQueriesInIndex(f,w,k))}}this.dispatchNotifications(m),null!=d&&d(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(o,u,d){for(var m=this.emptyNotificationsMap[o]||[],h=0;h<m.length;h++)m[h](o,u);d()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(o){for(var u in o){var d=this.callbacksMap[u],m=o[u][Callbacks.deleted];if(null!=m)try{d(Callbacks.deleted,m)}catch(k){}for(var h in o[u])if(h!=Callbacks.deleted)try{d(h,o[u][h])}catch(k){}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(o,u,d,m,h){for(var k=m[1],v=(m=m[0],0);v<u.length+1;v++){for(var f=o._||[],w=[],T=0;T<f.length;T++){var E=f[T];null!=this.callbacksMap[E]&&(h[E]=h[E]||{},h[E][d]=h[E][d]||[],h[E][d].push(m),w.push(E))}o._=w;var P=u[v];if(null==o[""+k[P]])break;o=o[""+k[P]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(o,u){var d=this.emptyNotificationsMap[o]||[];d.push(u),this.emptyNotificationsMap[o]=d},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(o,u){var d=this.emptyNotificationsMap[o];null!=d&&(d=q.reject(d,function(m){return m===u})),this.emptyNotificationsMap[o]=d},Callbacks.CallbacksBackend.prototype.subscribe=function(o,u,d,m,h,k){var v=this._tokenizeComponents(o,u,d,m),f={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,f);var w=this;this.engine.normalizeQuad(v,f,!0,function(T){for(var E=new F(T),P=w._indexForPattern(E),M=w.componentOrders[P],j=w.indexMap[P],O=0;O<M.length;O++){var L=T[M[O]];if("_"===L){null==j._&&(j._=[]),w.callbackCounter++,j._.push(w.callbackCounter),w.callbacksMap[w.callbackCounter]=h,w.callbacksInverseMap[h]=w.callbackCounter;break}O===M.length-1?(j[L]=j[L]||{_:[]},w.callbackCounter++,j[L]._.push(w.callbackCounter),w.callbacksMap[w.callbackCounter]=h,w.callbacksInverseMap[h]=w.callbackCounter):(j[L]=j[L]||{},j=j[L])}null!=k&&k(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(o){var u=this.callbacksInverseMap[o];null!=u&&(delete this.callbacksInverseMap[o],delete this.callbacksMap[u])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(o,u,d,m){var h={};return null==o?h.subject=Callbacks.ANYTHING:0==o.indexOf("_:")?h.subject={token:"blank",value:o}:h.subject={token:"uri",value:o},h.predicate=null==u?Callbacks.ANYTHING:{token:"uri",value:u},h.object=null==d?Callbacks.ANYTHING:{token:"uri",value:d},h.graph=null==m?Callbacks.ANYTHING:{token:"uri",value:m},h},Callbacks.CallbacksBackend.prototype._indexForPattern=function(o){for(var u=o.indexKey,d=this.indices,m=0;m<d.length;m++)for(var h=d[m],k=this.componentOrders[h],v=0;v<k.length&&!1!==q.include(u,k[v]);v++)if(v==u.length-1)return h;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var o,u,d,m;4===arguments.length?(o=arguments[0],u=arguments[1],d=arguments[2],m=arguments[3]):(o=arguments[0],u=this.engine.lexicon.defaultGraphUri,d=arguments[1],m=arguments[2]);var h="CONSTRUCT { <"+o+"> ?p ?o } WHERE { GRAPH <"+u+"> { <"+o+"> ?p ?o } }",k=this,v={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,v);var f=[];this.engine.execute(h,function(w,T){if(w)m&&m(!1);else{var E=T,P=!1,M=function(j,O){if("eventsFlushed"===j&&P){P=!1;try{d(E)}catch(fe){}}else if("eventsFlushed"!==j){P=!0;for(var L=0;L<O.length;L++){var U=O[L],W=y.buildRDFResource(U.subject,f,k.engine,v),V=y.buildRDFResource(U.predicate,f,k.engine,v),$=y.buildRDFResource(U.object,f,k.engine,v);null!=W&&null!=V&&null!=$&&(U=new y.Triple(W,V,$),j===Callbacks.added?E.add(U):j===Callbacks.deleted&&E.remove(U))}}};k.observersMap[d]=M,k.subscribeEmpty(Callbacks.eventsFlushed,M),k.subscribe(o,null,null,null,M,function(){try{d(E)}catch(j){}m&&m(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(o){var u=this.observersMap[o];return!!u&&(this.unsubscribe(u),this.unsubscribeEmpty(Callbacks.eventsFlushed,u),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(o,u,d){var m=this.aqt.parseQueryString(o),h=this.aqt.parseSelect(m.units[0]),k=this.aqt.collectBasicTriples(h),v=this,f={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,f);var w=this.queryCounter;this.queryCounter++,this.queriesMap[w]=o,this.queriesInverseMap[o]=w,this.queriesList.push(w),this.queriesCallbacksMap[w]=u,a.eachSeries(k,function(T,E){null==T.graph&&(T.graph=v.engine.lexicon.defaultGraphUriTerm),v.engine.normalizeQuad(T,f,!0,function(P){for(var M=new F(P),j=v._indexForPattern(M),O=v.componentOrders[j],L=v.queriesIndexMap[j],U=0;U<O.length;U++){var W=P[O[U]];if("string"==typeof W){null==L._&&(L._=[]),L._.push(w);break}U===O.length-1?(L[W]=L[W]||{_:[]},L[W]._.push(w)):(L[W]=L[W]||{},L=L[W])}E()})},function(){v.engine.execute(o,function(T,E){T?console.log("ERROR in query callback "+E):u(E)}),null!=d&&d()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(o){var u=this.queriesInverseMap[o];null!=u&&(delete this.queriesInverseMap[o],delete this.queriesMap[u],this.queriesList=q.reject(this.queriesList,function(d){return d===u}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(o,u,d){for(var m=d[1],h=(d=d[0],0);h<u.length+1;h++){for(var k=o._||[],v=[],f=0;f<k.length;f++){var w=k[f];q.include(this.pendingQueries,w)&&(q.remove(this.pendingQueries,function(E){return E===w}),this.matchedQueries.push(w)),null!=this.queriesMap[w]&&v.push(w)}o._=v;var T=u[h];if(null==o[""+m[T]])break;o=o[""+m[T]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(o){var u,d,m=this,h={};a.eachSeries(this.matchedQueries,function(k,v){null==h[k]?(h[k]=!0,u=m.queriesMap[k],d=m.queriesCallbacksMap[k],m.engine.execute(u,function(f,w){if(!f)try{d(w)}catch(T){}v()})):v()},function(){o()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,ie.exports=Callbacks},{"./abstract_query_tree":122,"./quad_index":132,"./rdf_model":137,"./utils":140}],125:[function(J,ie,ue){var q=J("jsonld");ue.JSONLDParser={};var a=ue.JSONLDParser;a.parser={async:!0,parse:function(F,y,e,o){try{"string"==typeof F&&(F=JSON.parse(F)),async function(u,d,m){var h=null;var v=function(j){return"BlankNode"===j.termType?{blank:j.value}:"NamedNode"===j.termType?{token:"uri",value:j.value}:"Literal"===j.termType?null!=j.language?{literal:'"'+j.value+'"@'+j.language}:null!==j.datatype?{literal:'"'+j.value+'"^^<'+j.datatype.value+">"}:{literal:'"'+j.value+'"'}:void 0};h=[];for(var f,w,T,E=await q.toRDF(u,{}),P=0;P<E.length;P++){var M=E[P];f=M.subject,w=M.predicate,T=M.object,h.push({subject:v(f),predicate:v(w),object:v(T),graph:d})}m(null,h)}(F,y,o)}catch(u){o(u)}}},ie.exports={JSONLDParser:a}},{jsonld:46}],126:[function(J,ie,ue){var q=J("./utils"),a=J("./btree").Tree;Lexicon=function(F){var y=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,q.seq(function(e){new a(2,function(o){y.uris=o,e()})},function(e){new a(2,function(o){y.literals=o,e()})},function(e){new a(2,function(o){y.knownGraphs=o,e()})},function(e){new a(2,function(o){y.oidUris=o,e()})},function(e){new a(2,function(o){y.oidLiterals=o,e()})},function(e){new a(2,function(o){y.oidBlanks=o,e()})})(function(){null!=F&&F(y)})},Lexicon.prototype.registerGraph=function(F,y,e){F!=this.defaultGraphOid?this.knownGraphs.insert(F,y,function(){e()}):e()},Lexicon.prototype.registeredGraphs=function(F,y){var e=[];this.knownGraphs.walk(function(o){!0===F?e.push(o.data):e.push(o.key)},function(){y(e)})},Lexicon.prototype.registerUri=function(F,y){var e=this;F===this.defaultGraphUri?y(this.defaultGraphOid):this.uris.search(F,function(o){if(null==o){var u=e.oidCounter,d="u"+u;e.oidCounter++,q.seq(function(m){e.uris.insert(F,[u,0],function(){m()})},function(m){e.oidUris.insert(d,F,function(){m()})})(function(){y(u)})}else u=o[0],o[1]=o[1]+1,y(u)})},Lexicon.prototype.resolveUri=function(F,y){F===this.defaultGraphUri?y(this.defaultGraphOid):this.uris.search(F,function(e){y(null!=e?e[0]:-1)})},Lexicon.prototype.resolveUriCost=function(F,y){F===this.defaultGraphUri?y(0):this.uris.search(F,function(e){y(null!=e?e[1]:-1)})},Lexicon.prototype.registerBlank=function(F){var y=this.oidCounter;this.oidCounter++;var e=""+y;this.oidBlanks.insert(e,e,function(){F(y)})},Lexicon.prototype.resolveBlank=function(F,y){var e=this;this.oidBlanks.search(F,function(o){if(null!=o)y(o);else{var u=e.oidCounter;this.oidCounter++,y(""+u)}})},Lexicon.prototype.resolveBlankCost=function(F,y){y(0)},Lexicon.prototype.registerLiteral=function(F,y){var e=this;this.literals.search(F,function(o){if(null==o){var u="l"+(d=e.oidCounter);e.oidCounter++,q.seq(function(m){e.literals.insert(F,[d,0],function(){m()})},function(m){e.oidLiterals.insert(u,F,function(){m()})})(function(){y(d)})}else{var d=o[0];o[1]=o[1]+1,y(d)}})},Lexicon.prototype.resolveLiteral=function(F,y){this.literals.search(F,function(e){y(null!=e?e[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(F,y){this.literals.search(F,function(e){y(null!=e?e[1]:-1)})},Lexicon.prototype.parseLiteral=function(F){var y;return-1!=(y=F.lastIndexOf("@"))&&'"'===F[y-1]&&null!=F.substring(y,F.length).match(/^@[a-zA-Z\-]+$/g)?{token:"literal",value:F.substring(1,y-1),lang:F.substring(y+1,F.length)}:-1!=(y=F.lastIndexOf("^^"))&&'"'===F[y-1]&&"<"===F[y+2]&&">"===F[F.length-1]?{token:"literal",value:F.substring(1,y-1),type:F.substring(y+3,F.length-1)}:{token:"literal",value:F.substring(1,F.length-1)}},Lexicon.prototype.parseUri=function(F){return{token:"uri",value:F}},Lexicon.prototype.retrieve=function(F,y){var e=this;F===this.defaultGraphOid?y({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):q.seq(function(o,u){e.oidUris.search("u"+F,function(d){u(null,null!=d?e.parseUri(d):null)})},function(o,u){null==o?e.oidLiterals.search("l"+F,function(d){u(null,null!=d?e.parseLiteral(d):null)}):u(null,o)},function(o,u){null==o?e.oidBlanks.search(""+F,function(d){u(null,null!=d?{token:"blank",value:"_:"+F}:null)}):u(null,o)})(null,function(o,u){y(u)})},Lexicon.prototype.clear=function(F){var y=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,q.seq(function(e){new a(2,function(o){y.uris=o,e()})},function(e){new a(2,function(o){y.literals=o,e()})},function(e){new a(2,function(o){y.knownGraphs=o,e()})},function(e){new a(2,function(o){y.oidUris=o,e()})},function(e){new a(2,function(o){y.oidLiterals=o,e()})},function(e){new a(2,function(o){y.oidBlanks=o,e()})})(function(){null!=F&&F()})},Lexicon.prototype.unregister=function(F,y,e){var o=this;q.seq(function(u){o._unregisterTerm(F.subject.token,y.subject,u)},function(u){o._unregisterTerm(F.predicate.token,y.predicate,u)},function(u){o._unregisterTerm(F.object.token,y.object,u)},function(u){null!=F.graph?o._unregisterTerm(F.graph.token,y.graph,u):u()})(function(){e(!0)})},Lexicon.prototype._unregisterTerm=function(F,y,e){var o=this;if("uri"===F)if(y!=this.defaultGraphOid){var u="u"+y;o.oidUris.search(u,function(d){o.uris.search(d,function(m){var h=m[1];""+m[0]==""+y?0===h?q.seq(function(k){o.oidUris.delete(u,function(){k()})},function(k){o.uris.delete(d,function(){k()})},function(k){o.knownGraphs.delete(y,function(){k()})})(function(){e()}):o.uris.insert(d,[y,h-1],function(){e()}):e()})})}else e();else"literal"===F?(this.oidCounter++,u="l"+y,o.oidLiterals.search(u,function(d){o.literals.search(d,function(m){var h=m[1];""+m[0]==""+y?0===h?q.seq(function(k){o.oidLiterals.delete(u,function(){k()})},function(k){o.literals.delete(d,function(){k()})})(function(){e()}):o.literals.insert(d,[y,h-1],function(){e()}):e()})})):"blank"===F?o.oidBlanks.delete(""+y,function(){e()}):e()},ie.exports={Lexicon}},{"./btree":123,"./utils":140}],127:[function(J,ie,ue){if(!J("./utils").isWorker()){var q=J("http"),a=J("https"),F=J("url");NetworkTransport={load:function(y,e,o,u){var d=null==u?3:u,m=F.parse(y,!0,!0),h={host:m.host,hostname:m.hostname,method:"GET",path:m.path,headers:{host:m.hostname,Accept:e}},k=null;"http:"===m.protocol?(h.port=m.port||80,k=q):"https:"===m.protocol&&(h.port=m.port||443,k=a);var v=k.request(h,function(f){var w=f.headers,T="";if("2"==(""+f.statusCode)[0])f.on("end",function(){o(null,{headers:w,data:T})}),f.on("data",function(P){T+=P});else if("3"==(""+f.statusCode)[0])if(0==d)o(new Error("Too many redirections"));else{var E=w.Location||w.location;null!=E?NetworkTransport.load(E,e,o,d-1):o(new Error("Redirection without location header"))}else o(new Error("HTTP error: "+f.statusCode))});v.on("error",o),v.end()}},ie.exports={NetworkTransport}}},{"./utils":140,http:94,https:24,url:115}],128:[function(J,ie,ue){ie.exports=function(){"use strict";function q(a,F,y,e){this.message=a,this.expected=F,this.found=y,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,q)}return function(a,F){function y(){this.constructor=a}y.prototype=F.prototype,a.prototype=new y}(q,Error),q.buildMessage=function(a,F){var d,y={literal:function(d){return'"'+o(d.text)+'"'},class:function(d){var m,h="";for(m=0;m<d.parts.length;m++)h+=d.parts[m]instanceof Array?u(d.parts[m][0])+"-"+u(d.parts[m][1]):u(d.parts[m]);return"["+(d.inverted?"^":"")+h+"]"},any:function(d){return"any character"},end:function(d){return"end of input"},other:function(d){return d.description}};function e(d){return d.charCodeAt(0).toString(16).toUpperCase()}function o(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+e(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+e(m)})}function u(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+e(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+e(m)})}return"Expected "+function(d){var m,h,k,v=new Array(d.length);for(m=0;m<d.length;m++)v[m]=(k=d[m],y[k.type](k));if(v.sort(),v.length>0){for(m=1,h=1;m<v.length;m++)v[m-1]!==v[m]&&(v[h]=v[m],h++);v.length=h}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}(a)+" but "+(((d=F)?'"'+o(d)+'"':"end of input")+" found.")},{SyntaxError:q,parse:function(a,F){F=void 0!==F?F:{};var y,e={},o={DOCUMENT:Rh},u=Rh,d=qe("[1] QueryUnit"),m=qe("[2] Query"),k=qe("[3] Prologue"),f=qe("[4] BaseDecl"),w="BASE",T=Ge("BASE",!1),E="base",P=Ge("base",!1),j=qe("[5] PrefixDecl"),O="PREFIX",L=Ge("PREFIX",!1),U="prefix",W=Ge("prefix",!1),$=qe("[6] SelectQuery"),ce=qe("[7] SubSelect"),te=qe("[8] SelectClause"),ne=Ge("SELECT",!1),Ce=Ge("select",!1),be="DISTINCT",de=Ge("DISTINCT",!1),ye="distinct",Fe=Ge("distinct",!1),Be="REDUCED",Ie=Ge("REDUCED",!1),Je="reduced",G=Ge("reduced",!1),H="(",ee=Ge("(",!1),pe="AS",Ne=Ge("AS",!1),_e="as",Pe=Ge("as",!1),We=")",Ye=Ge(")",!1),mt="*",ht=Ge("*",!1),Xt=qe("[9] ConstructQuery"),Te="CONSTRUCT",Re=Ge("CONSTRUCT",!1),je="construct",K=Ge("construct",!1),he="WHERE",me=Ge("WHERE",!1),Le="where",Se=Ge("where",!1),ke="{",De=Ge("{",!1),He="}",$e=Ge("}",!1),Ke=qe("[10] DescribeQuery"),ct="DESCRIBE",vt=Ge("DESCRIBE",!1),pt=qe("[11] AskQuery"),kt=Ge("ASK",!1),it=Ge("ask",!1),Ot=qe("[12] DatasetClause"),On=Ge("FROM",!1),fs=Ge("from",!1),cs=qe("[13] DefaultGraphClause"),hs=qe("[14] NamedGraphClause"),Hr="NAMED",li=Ge("NAMED",!1),rn="named",hn=Ge("named",!1),Wr=qe("[15] SourceSelector"),nn=qe("[16] WhereClause"),xo=qe("[17] SolutionModifier"),Pi=qe("[18] GroupClause"),wo=Ge("GROUP",!1),Bi=Ge("group",!1),Jt=Ge("BY",!1),pn=Ge("by",!1),qr=qe("[19] GroupCondition"),ot=qe("[20] HavingClause"),ds=Ge("HAVING",!1),vs=qe("[21] HavingCondition"),_o=qe("[22] OrderClause"),Aa=Ge("ORDER",!1),Ou=Ge("order",!1),Co=qe("[23] OrderCondition"),Ea=Ge("ASC",!1),Gi=Ge("asc",!1),Ta=Ge("DESC",!1),Na=Ge("desc",!1),Oa=qe("[24] LimitOffsetClauses"),ju=qe("[25] LimitClause"),on=Ge("LIMIT",!1),Du=Ge("limit",!1),Hi=qe("[26] OffsetClause"),Mu=Ge("OFFSET",!1),Pu=Ge("offset",!1),Ma=qe("[27] BindingsClause"),Pa="BINDINGS",Ba=Ge("BINDINGS",!1),Qa=qe("[28] BindingValue"),Dn="UNDEF",Wi=Ge("UNDEF",!1),bs=qe("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),zi="VALUES",xs=Ge("VALUES",!1),Mn="values",Ua=Ge("values",!1),jr=qe("[29] UpdateUnit"),Bu=qe("[30] Update"),sn=";",Dr=Ge(";",!1),dn=qe("[31] Update1"),ws=qe("[32] Load"),Eo=Ge("LOAD",!1),ui=Ge("load",!1),Qu=Ge("INTO",!1),Uu=Ge("into",!1),Xa=qe("[33] Clear"),Gu=Ge("CLEAR",!1),Hu=Ge("clear",!1),Pn="SILENT",ks=Ge("SILENT",!1),Bn="silent",fi=Ge("silent",!1),Wu=qe("[34] Drop"),zu=Ge("DROP",!1),nr=Ge("drop",!1),Ya=qe("[35] Create"),Xu=Ge("CREATE",!1),Ju=Ge("create",!1),Za=qe("[36] InsertData"),No="INSERT",$a=Ge("INSERT",!1),qi="insert",Ss=Ge("insert",!1),Lo="DATA",di=Ge("DATA",!1),Ir="data",Xi=Ge("data",!1),el=qe("[37] DeleteData"),yr="DELETE",an=Ge("DELETE",!1),vn="delete",Fs=Ge("delete",!1),Vu=qe("[38] DeleteWhere"),Es=qe("[39] Modify"),Jr=Ge("WITH",!1),nl=Ge("with",!1),Yu=qe("[40] DeleteClause"),ol=qe("[41] InsertClause"),sl=qe("[42] UsingClause"),al=Ge("USING",!1),Ls=Ge("using",!1),ll=qe("[43] GraphRef"),ln="GRAPH",Nr=Ge("GRAPH",!1),Un="graph",Ji=Ge("graph",!1),ul=qe("[44] GraphRefAll"),Os="DEFAULT",Rs=Ge("DEFAULT",!1),fl="default",Zu=Ge("default",!1),gi=Ge("ALL",!1),js=Ge("all",!1),Ds=qe("[45] QuadPattern"),gn=function(s){return s.quadsContext},Wn=qe("[46] QuadData"),mr=qe("[47] Quads"),Wt=".",zt=Ge(".",!1),ef=qe("[48] QuadsNotTriples"),Vi=qe("[49] TriplesTemplate"),Ms=qe("[50] GroupGraphPattern"),tf=qe("[51] GroupGraphPatternSub"),dl=qe("[54] TriplesBlock"),Qs=qe("[53] GraphPatternNotTriples"),mi=qe("[54] OptionalGraphPattern"),Ki="OPTIONAL",vl=Ge("OPTIONAL",!1),Yi="optional",rf=Ge("optional",!1),of=qe("[55] GraphGraphPattern"),Gs=qe("[56] ServiceGraphPattern"),zn="SERVICE",Zi=Ge("SERVICE",!1),jo=qe("[57] MinusGraphPattern"),$i=Ge("MINUS",!1),qn=Ge("minus",!1),Xn=qe("[58] GroupOrUnionGraphPattern"),yn="UNION",Jn=Ge("UNION",!1),to="union",zs=Ge("union",!1),af=qe("[59] Filter"),Vn=Ge("FILTER",!1),lf=Ge("filter",!1),ff=qe("[60] Bind"),cf=Ge("BIND",!1),ir=Ge("bind",!1),or=qe("[60] Constraint"),ro=qe("[61] InlineData"),Do=qe("[62] DataBlock"),pf=qe("[63] InlineDataOneVar"),vf=qe("[64] InlineDataFull"),bl=qe("[65] DataBlockValue"),Xs=qe("[61] FunctionCall"),Js=qe("[62] ArgList"),$t=",",er=Ge(",",!1),xl=qe("[63] ExpressionList"),yf=qe("[64] ConstructTemplate"),un=qe("[65] ConstructTriples"),mf=qe("[66] TriplesSameSubject"),Dt=qe("[83] PropertyListPathNotEmpty"),bn=qe("[67] PropertyListNotEmpty"),_l=qe("[68] PropertyList"),Ks=qe("[86] ObjectListPath"),bf=qe("[69] ObjectList"),io=qe("[87] ObjectPath"),Sl=qe("[70] Object"),Zs=qe("[71] Verb"),oo=Ge("a",!1),xf=qe("[72] TriplesSameSubjectPath"),Al=qe("[73] PropertyListNotEmptyPath"),Fl=qe("[74] PropertyListPath"),kf=qe("[75]"),Qo=qe("[76] VerbSimple"),El=qe("[77] Path"),Cf=qe("[78] PathAlternative"),so=Ge("|",!1),ta=qe("[79] PathSequence"),wn=Ge("/",!1),Tl=qe("[88] PathElt"),Nl=qe("[81] PathEltOrInverse"),ao=Ge("^",!1),Il=qe("[82] PathMod"),kn=Ge("?",!1),Br="+",fn=Ge("+",!1),Ol=qe("[83] PathPrimary"),_n=Ge("!",!1),Rl=qe("[85] PathOneInPropertySet"),Wo=qe("[86] Integer"),jl=qe("[100] TriplesNodePath"),Af=qe("[87] TriplesNode"),Dl=qe("[101] BlankNodePropertyListPath"),qo=Ge("[",!1),Yn=Ge("]",!1),fo=qe("[88] BlankNodePropertyList"),Ff=qe("[103] CollectionPath"),Cn=qe("[89] Collection"),wi=qe("[105] GraphNodePath"),ki=function(s){return s[1]},Ef=qe("[90] GraphNode"),Pl=qe("[91] VarOrTerm"),Tf=qe("[92] VarOrIRIref"),Nf=qe("[93] Var"),xr=qe("[94] GraphTerm"),Bl=qe("[95] Expression"),If=qe("[96] ConditionalOrExpression"),Ql=Ge("||",!1),Gl=qe("[97] ConditionalAndExpression"),Hl=Ge("&&",!1),Rf=qe("[98] ValueLogical"),Sn=qe("[99] RelationalExpression"),Zn=Ge("=",!1),Kr=Ge("!=",!1),oa=Ge("<",!1),Jo=Ge(">",!1),sa=Ge("<=",!1),ei=Ge(">=",!1),Ci=Ge("I",!1),Vo=Ge("i",!1),ti=Ge("N",!1),ri=Ge("n",!1),Wl=Ge("O",!1),Fi=Ge("o",!1),la=Ge("T",!1),Ko=Ge("t",!1),jf=qe("[100] NumericExpression"),Jl=qe("[101] AdditiveExpression"),Qr="-",Zr=Ge("-",!1),vo=qe("[102] MultiplicativeExpression"),Df=qe("[103] UnaryExpression"),Bf=qe("[104] PrimaryExpression"),Yl=qe("[105] BrackettedExpression"),Zl=qe("[106] BuiltInCall"),eu=Ge("STR",!1),tu=Ge("str",!1),Hf=Ge("LANG",!1),Qt=Ge("lang",!1),Zo="LANGMATCHES",yo=Ge("LANGMATCHES",!1),Or="langmatches",$o=Ge("langmatches",!1),ha="DATATYPE",iu=Ge("DATATYPE",!1),pa="datatype",ou=Ge("datatype",!1),da=Ge("BOUND",!1),Pt=Ge("bound",!1),Ei=Ge("IRI",!1),es=Ge("iri",!1),qf=Ge("URI",!1),Xf=Ge("uri",!1),t="BNODE",n=Ge("BNODE",!1),c="bnode",l=Ge("bnode",!1),D="COALESCE",X=Ge("COALESCE",!1),Z="coalesce",re=Ge("coalesce",!1),Ee=Ge("IF",!1),Qe=Ge("if",!1),tt="ISLITERAL",st=Ge("ISLITERAL",!1),ut="isliteral",dt=Ge("isliteral",!1),ft="isLITERAL",yt=Ge("isLITERAL",!1),xt="ISBLANK",Et=Ge("ISBLANK",!1),Bt="isblank",sr=Ge("isblank",!1),Ut="isBLANK",Fr=Ge("isBLANK",!1),Vt="SAMETERM",kr=Ge("SAMETERM",!1),ar="sameterm",tr=Ge("sameterm",!1),_r=Ge("ISURI",!1),Tn=Ge("isuri",!1),$r=Ge("isURI",!1),ga=Ge("ISIRI",!1),oi=Ge("isiri",!1),dr=Ge("isIRI",!1),rs="custom:",xp=Ge("custom:",!1),Sc="CUSTOM:",wp=Ge("CUSTOM:",!1),Ac=/^[a-zA-Z0-9_]/,Fc=Rt([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),_p=qe("[107] RegexExpression"),Cp=Ge("REGEX",!1),Sp=Ge("regex",!1),Fp=qe("[108] ExistsFunc"),hu="EXISTS",Nc=Ge("EXISTS",!1),pu="exists",Lc=Ge("exists",!1),Tp=qe("[109] NotExistsFunc"),Np=Ge("NOT",!1),Lp=Ge("not",!1),Op=qe("[110] Aggregate"),Rp=Ge("COUNT",!1),jp=Ge("count",!1),Dc="GROUP_CONCAT",Mp=Ge("GROUP_CONCAT",!1),Mc="group_concat",Pp=Ge("group_concat",!1),Pc="SEPARATOR",Bp=Ge("SEPARATOR",!1),Up=Ge("SUM",!1),Gp=Ge("sum",!1),Wp=Ge("MIN",!1),zp=Ge("min",!1),Xp=Ge("MAX",!1),Jp=Ge("max",!1),Kp=Ge("AVG",!1),Yp=Ge("avg",!1),$p=qe("[117] IRIrefOrFunction"),td=qe("[112] RDFLiteral"),rd=Ge("^^",!1),id=qe("[113] NumericLiteral"),od=qe("[114] NumericLiteralUnsigned"),sd=qe("[115] NumericLiteralPositive"),ad=qe("[116] NumericLiteralNegative"),ld=qe("[117] BooleanLiteral"),ud=Ge("TRUE",!1),fd=Ge("true",!1),hd=Ge("FALSE",!1),pd=Ge("false",!1),vd=qe("[118] String"),du=function(s){return{token:"string",value:s}},gd=qe("[119] IRIref"),md=qe("[120] PrefixedName"),wd=qe("[121] BlankNode"),Cd=qe("[122] IRI_REF"),$c=/^[^<>"{}|\^`\\]/,eh=Rt(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),Ad=qe("[123] PNAME_NS"),ma=Ge(":",!1),Fd=qe("[124] PNAME_LN"),Td=qe("[125] BLANK_NODE_LABEL"),Nd=Ge("_:",!1),Id=qe("[126] VAR1"),Od=qe("[127] VAR2"),ih=Ge("$",!1),Rd=qe("[128] LANGTAG"),sh=Ge("@",!1),ah=/^[a-zA-Z]/,lh=Rt([["a","z"],["A","Z"]],!1,!1),vu=/^[a-zA-Z0-9]/,gu=Rt([["a","z"],["A","Z"],["0","9"]],!1,!1),Dd=qe("[129] INTEGER"),Kt=/^[0-9]/,Yt=Rt([["0","9"]],!1,!1),Pd=qe("[130] DECIMAL"),Ud=qe("[131] DOUBLE"),zd=qe("[132] INTEGER_POSITIVE"),Xd=qe("[133] DECIMAL_POSITIVE"),uh=function(s){return s.value="+"+s.value,s},Jd=qe("[134] DOUBLE_POSITIVE"),Vd=qe("[135] INTEGER_NEGATIVE"),Jf=function(s){return s.value="-"+s.value,s},Kd=qe("[136] DECIMAL_NEGATIVE"),Yd=qe("[137] DOUBLE_NEGATIVE"),Zd=qe("[138] EXPONENT"),$d=/^[eE]/,ev=Rt(["e","E"],!1,!1),tv=/^[+\-]/,rv=Rt(["+","-"],!1,!1),iv=qe("[139] STRING_LITERAL1"),Kf=Ge("'",!1),fh=/^[^'\\\n\r]/,ch=Rt(["'","\\","\n","\r"],!0,!1),yu=function(s){return Li(s)},ov=qe("[140] STRING_LITERAL2"),ph=Ge('"',!1),dh=/^[^"\\\n\r]/,vh=Rt(['"',"\\","\n","\r"],!0,!1),sv=qe("[141] STRING_LITERAL_LONG1"),mu="'''",gh=Ge("'''",!1),yh=/^[^'\\]/,mh=Rt(["'","\\"],!0,!1),av=qe("[142] STRING_LITERAL_LONG2"),bu='"""',bh=Ge('"""',!1),xh=/^[^"\\]/,wh=Rt(['"',"\\"],!0,!1),lv=qe("[143] ECHAR"),_h=Ge("\\",!1),uv=/^[tbnrf"']/,fv=Rt(["t","b","n","r","f",'"',"'"],!1,!1),cv=qe("[144] NIL"),pv=qe("[145] WS"),dv=/^[ ]/,vv=Rt([" "],!1,!1),gv=/^[\t]/,yv=Rt(["\t"],!1,!1),mv=/^[\r]/,bv=Rt(["\r"],!1,!1),xv=/^[\n]/,wv=Rt(["\n"],!1,!1),kv=qe(" COMMENT"),Sh=Ge("#",!1),Ah=/^[^\n\r]/,Fh=Rt(["\n","\r"],!0,!1),_v=qe("[146] ANON"),Cv=qe("[147] PN_CHARS_BASE"),Sv=/^[A-Z]/,Av=Rt([["A","Z"]],!1,!1),Fv=/^[a-z]/,Ev=Rt([["a","z"]],!1,!1),Tv=/^[\xC0-\xD6]/,Nv=Rt([["\xc0","\xd6"]],!1,!1),Lv=/^[\xD8-\xF6]/,Iv=Rt([["\xd8","\xf6"]],!1,!1),Ov=/^[\xF8-\u02FF]/,Rv=Rt([["\xf8","\u02ff"]],!1,!1),jv=/^[\u0370-\u037D]/,Dv=Rt([["\u0370","\u037d"]],!1,!1),Mv=/^[\u037F-\u1FFF]/,Pv=Rt([["\u037f","\u1fff"]],!1,!1),Bv=/^[\u200C-\u200D]/,Qv=Rt([["\u200c","\u200d"]],!1,!1),Uv=/^[\u2070-\u218F]/,Gv=Rt([["\u2070","\u218f"]],!1,!1),Hv=/^[\u2C00-\u2FEF]/,Wv=Rt([["\u2c00","\u2fef"]],!1,!1),zv=/^[\u3001-\uD7FF]/,qv=Rt([["\u3001","\ud7ff"]],!1,!1),Xv=/^[\uF900-\uFDCF]/,Jv=Rt([["\uf900","\ufdcf"]],!1,!1),Vv=/^[\uFDF0-\uFFFD]/,Kv=Rt([["\ufdf0","\ufffd"]],!1,!1),Yv=/^[\u1000-\uEFFF]/,Zv=Rt([["\u1000","\uefff"]],!1,!1),$v=qe("[148] PN_CHARS_U"),Th=Ge("_",!1),eg=qe("[149] VARNAME"),Yf=/^[\xB7]/,Zf=Rt(["\xb7"],!1,!1),$f=/^[\u0300-\u036F]/,ec=Rt([["\u0300","\u036f"]],!1,!1),tc=/^[\u203F-\u2040]/,rc=Rt([["\u203f","\u2040"]],!1,!1),rg=qe("[150] PN_CHARS"),ng=qe("[151] PN_PREFIX"),og=qe("[152] PN_LOCAL"),ag=qe("[170] PLX"),lg=qe("[171] PERCENT"),Lh=Ge("%",!1),fg=qe("[172] HEX"),cg=/^[A-F]/,hg=Rt([["A","F"]],!1,!1),pg=/^[a-f]/,dg=Rt([["a","f"]],!1,!1),vg=qe("[173] PN_LOCAL_ESC"),yg=Ge("~",!1),bg=Ge("&",!1),r=0,xu=[{line:1,column:1}],Ln=0,nc=[],A=0;if("startRule"in F){if(!(F.startRule in o))throw new Error("Can't start parsing from rule \""+F.startRule+'".');u=o[F.startRule]}function Ge(s,x){return{type:"literal",text:s,ignoreCase:x}}function Rt(s,x,C){return{type:"class",parts:s,inverted:x,ignoreCase:C}}function qe(s){return{type:"other",description:s}}function Ih(s){var x,C=xu[s];if(C)return C;for(x=s-1;!xu[x];)x--;for(C={line:(C=xu[x]).line,column:C.column};x<s;)10===a.charCodeAt(x)?(C.line++,C.column=1):C.column++,x++;return xu[s]=C,C}function Oh(s,x){var C=Ih(s),_=Ih(x);return{start:{offset:s,line:C.line,column:C.column},end:{offset:x,line:_.line,column:_.column}}}function z(s){r<Ln||(r>Ln&&(Ln=r,nc=[]),nc.push(s))}function Rh(){return A++,A++,C=r,(_=jh())!==e?((N=function(){var I,B,Y,le,ge,Oe,ze,Ae,Ve,rt;if(A++,I=r,(B=Mh())!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e){for(le=[],ge=In();ge!==e;)le.push(ge),ge=In();if(le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if((Oe=ba())!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();if(ze!==e)if((Ae=xa())!==e){for(Ve=[],rt=Q();rt!==e;)Ve.push(rt),rt=Q();Ve!==e&&(rt=function(){var Me,et,nt,lt,Tt,at,It,jt,Ft;if(A++,Me=r,a.substr(r,8)===Pa?(et=Pa,r+=8):(et=e,0===A&&z(Ba)),et!==e){for(nt=[],lt=vr();lt!==e;)nt.push(lt),lt=vr();if(nt!==e)if(123===a.charCodeAt(r)?(lt=ke,r++):(lt=e,0===A&&z(De)),lt!==e){if(Tt=[],at=r,40===a.charCodeAt(r)?(It=H,r++):(It=e,0===A&&z(ee)),It!==e){if(jt=[],(Ft=wu())!==e)for(;Ft!==e;)jt.push(Ft),Ft=wu();else jt=e;jt!==e?(41===a.charCodeAt(r)?(Ft=We,r++):(Ft=e,0===A&&z(Ye)),Ft!==e?at=It=[It,jt,Ft]:(r=at,at=e)):(r=at,at=e)}else r=at,at=e;for(at===e&&(at=ai());at!==e;){if(Tt.push(at),at=r,40===a.charCodeAt(r)?(It=H,r++):(It=e,0===A&&z(ee)),It!==e){if(jt=[],(Ft=wu())!==e)for(;Ft!==e;)jt.push(Ft),Ft=wu();else jt=e;jt!==e?(41===a.charCodeAt(r)?(Ft=We,r++):(Ft=e,0===A&&z(Ye)),Ft!==e?at=It=[It,jt,Ft]:(r=at,at=e)):(r=at,at=e)}else r=at,at=e;at===e&&(at=ai())}Tt!==e?(125===a.charCodeAt(r)?(at=He,r++):(at=e,0===A&&z($e)),at!==e?Me=et=[et,nt,lt,Tt,at]:(r=Me,Me=e)):(r=Me,Me=e)}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;return Me===e&&(Me=null),A--,Me===e&&(et=e,0===A&&z(Ma)),Me}())!==e?(B=function(s,x,C,_){for(var N={named:[],implicit:[]},R=0;R<x.length;R++){var I=x[R];"default"===I.kind?N.implicit.push(I.graph):N.named.push(I.graph)}0===N.named.length&&0===N.implicit.length&&N.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var B={kind:"select",token:"executableunit"};return B.dataset=N,B.projection=s.vars,B.modifier=s.modifier,B.pattern=C,null!=_&&null!=_.limit&&(B.limit=_.limit),null!=_&&null!=_.offset&&(B.offset=_.offset),null!=_&&null!=_.order&&""!=_.order&&(B.order=_.order),null!=_&&null!=_.group&&(B.group=_.group),B}(B,le,Oe,Ae),I=B):(r=I,I=e)}else r=I,I=e;else r=I,I=e}else r=I,I=e;else r=I,I=e}else r=I,I=e}else r=I,I=e}else r=I,I=e;return A--,I===e&&(B=e,0===A&&z($)),I}())===e&&(N=function(){var I,B,Y,le,ge,Oe,ze,Ae,Ve,rt,Me,et,nt,lt,Tt;for(A++,I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(a.substr(r,9)===Te?(Y=Te,r+=9):(Y=e,0===A&&z(Re)),Y===e&&(a.substr(r,9)===je?(Y=je,r+=9):(Y=e,0===A&&z(K))),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e)if((ge=function(){var at,It,jt,Ft,Cr,lr;if(A++,at=r,123===a.charCodeAt(r)?(It=ke,r++):(It=e,0===A&&z(De)),It!==e){for(jt=[],Ft=Q();Ft!==e;)jt.push(Ft),Ft=Q();if(jt!==e)if((Ft=function hr(){var Sr,Ar,ur,Sa,Ii,Lu,Oi;if(A++,Sr=r,(Ar=tp())!==e){for(ur=r,Sa=[],Ii=Q();Ii!==e;)Sa.push(Ii),Ii=Q();if(Sa!==e)if(46===a.charCodeAt(r)?(Ii=Wt,r++):(Ii=e,0===A&&z(zt)),Ii!==e){for(Lu=[],Oi=Q();Oi!==e;)Lu.push(Oi),Oi=Q();Lu!==e?((Oi=hr())===e&&(Oi=null),Oi!==e?ur=Sa=[Sa,Ii,Lu,Oi]:(r=ur,ur=e)):(r=ur,ur=e)}else r=ur,ur=e;else r=ur,ur=e;ur===e&&(ur=null),ur!==e?(Ar=function(s,x){var C=s.triplesContext;return null!=x&&"object"==typeof x&&null!=x.length&&null!=x[3]&&null!=x[3].triplesContext&&(C=C.concat(x[3].triplesContext)),{token:"triplestemplate",triplesContext:C}}(Ar,ur),Sr=Ar):(r=Sr,Sr=e)}else r=Sr,Sr=e;return A--,Sr===e&&(Ar=e,0===A&&z(un)),Sr}())===e&&(Ft=null),Ft!==e){for(Cr=[],lr=Q();lr!==e;)Cr.push(lr),lr=Q();Cr!==e?(125===a.charCodeAt(r)?(lr=He,r++):(lr=e,0===A&&z($e)),lr!==e?at=It=Ft:(r=at,at=e)):(r=at,at=e)}else r=at,at=e;else r=at,at=e}else r=at,at=e;return A--,at===e&&(It=e,0===A&&z(yf)),at}())!==e){for(Oe=[],ze=Q();ze!==e;)Oe.push(ze),ze=Q();if(Oe!==e){for(ze=[],Ae=In();Ae!==e;)ze.push(Ae),Ae=In();if(ze!==e){for(Ae=[],Ve=Q();Ve!==e;)Ae.push(Ve),Ve=Q();if(Ae!==e)if((Ve=ba())!==e){for(rt=[],Me=Q();Me!==e;)rt.push(Me),Me=Q();rt!==e&&(Me=xa())!==e?(B=function(s,x,C,_){for(var N={named:[],implicit:[]},R=0;R<x.length;R++){var I=x[R];"default"===I.kind?N.implicit.push(I.graph):N.named.push(I.graph)}0===N.named.length&&0===N.implicit.length&&N.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var B={kind:"construct",token:"executableunit"};return B.dataset=N,B.template=s,B.pattern=C,null!=_&&null!=_.limit&&(B.limit=_.limit),null!=_&&null!=_.offset&&(B.offset=_.offset),null!=_&&null!=_.order&&""!=_.order&&(B.order=_.order),B}(ge,ze,Ve,Me),I=B):(r=I,I=e)}else r=I,I=e;else r=I,I=e}else r=I,I=e}else r=I,I=e}else r=I,I=e;else r=I,I=e}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(a.substr(r,9)===Te?(Y=Te,r+=9):(Y=e,0===A&&z(Re)),Y===e&&(a.substr(r,9)===je?(Y=je,r+=9):(Y=e,0===A&&z(K))),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e){for(ge=[],Oe=In();Oe!==e;)ge.push(Oe),Oe=In();if(ge!==e){for(Oe=[],ze=Q();ze!==e;)Oe.push(ze),ze=Q();if(Oe!==e)if(a.substr(r,5)===he?(ze=he,r+=5):(ze=e,0===A&&z(me)),ze===e&&(a.substr(r,5)===Le?(ze=Le,r+=5):(ze=e,0===A&&z(Se))),ze!==e){for(Ae=[],Ve=Q();Ve!==e;)Ae.push(Ve),Ve=Q();if(Ae!==e)if(123===a.charCodeAt(r)?(Ve=ke,r++):(Ve=e,0===A&&z(De)),Ve!==e){for(rt=[],Me=Q();Me!==e;)rt.push(Me),Me=Q();if(rt!==e)if((Me=ns())===e&&(Me=null),Me!==e){for(et=[],nt=Q();nt!==e;)et.push(nt),nt=Q();if(et!==e)if(125===a.charCodeAt(r)?(nt=He,r++):(nt=e,0===A&&z($e)),nt!==e){for(lt=[],Tt=Q();Tt!==e;)lt.push(Tt),Tt=Q();lt!==e&&(Tt=xa())!==e?(B=function(s,x,C){for(var _={named:[],implicit:[]},N=0;N<s.length;N++){var R=s[N];"default"===R.kind?_.implicit.push(R.graph):_.named.push(R.graph)}0===_.named.length&&0===_.implicit.length&&_.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var I={kind:"construct",token:"executableunit"};return I.dataset=_,I.template=x,I.pattern={token:"basicgraphpattern",triplesContext:x.triplesContext},null!=C&&null!=C.limit&&(I.limit=C.limit),null!=C&&null!=C.offset&&(I.offset=C.offset),null!=C&&null!=C.order&&""!=C.order&&(I.order=C.order),I}(ge,Me,Tt),I=B):(r=I,I=e)}else r=I,I=e;else r=I,I=e}else r=I,I=e;else r=I,I=e}else r=I,I=e;else r=I,I=e}else r=I,I=e;else r=I,I=e}else r=I,I=e}else r=I,I=e}else r=I,I=e;else r=I,I=e}return A--,I===e&&(B=e,0===A&&z(Xt)),I}())===e&&(N=function(){var I,B,Y,le,ge,Oe;if(A++,I=r,a.substr(r,8)===ct?(B=ct,r+=8):(B=e,0===A&&z(vt)),B!==e){if(Y=[],(le=as())!==e)for(;le!==e;)Y.push(le),le=as();else Y=e;if(Y===e&&(42===a.charCodeAt(r)?(Y=mt,r++):(Y=e,0===A&&z(ht))),Y!==e){for(le=[],ge=In();ge!==e;)le.push(ge),ge=In();le!==e?((ge=ba())===e&&(ge=null),ge!==e&&(Oe=xa())!==e?I=B=[B,Y,le,ge,Oe]:(r=I,I=e)):(r=I,I=e)}else r=I,I=e}else r=I,I=e;return A--,I===e&&(B=e,0===A&&z(Ke)),I}())===e&&(N=function(){var I,B,Y,le,ge,Oe,ze;for(A++,I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if("ASK"===a.substr(r,3)?(Y="ASK",r+=3):(Y=e,0===A&&z(kt)),Y===e&&("ask"===a.substr(r,3)?(Y="ask",r+=3):(Y=e,0===A&&z(it))),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e){for(ge=[],Oe=In();Oe!==e;)ge.push(Oe),Oe=In();if(ge!==e){for(Oe=[],ze=Q();ze!==e;)Oe.push(ze),ze=Q();Oe!==e&&(ze=ba())!==e?(B=function(s,x){for(var C={named:[],implicit:[]},_=0;_<s.length;_++){var N=s[_];"implicit"===N.kind?C.implicit.push(N.graph):C.named.push(N.graph)}0===C.named.length&&0===C.implicit.length&&C.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var R={kind:"ask",token:"executableunit"};return R.dataset=C,R.pattern=x,R}(ge,ze),I=B):(r=I,I=e)}else r=I,I=e}else r=I,I=e}else r=I,I=e;else r=I,I=e;return A--,I===e&&(B=e,0===A&&z(pt)),I}()),N!==e&&(A++,B=r,a.substr(r,6)===zi?(Y=zi,r+=6):(Y=e,0===A&&z(xs)),Y===e&&(a.substr(r,6)===Mn?(Y=Mn,r+=6):(Y=e,0===A&&z(Ua))),Y!==e&&(le=Zh())!==e?B=Y=[Y,le]:(r=B,B=e),B===e&&(B=null),B!==e&&(B=function(s){return null!=s?s[1]:null}(B)),A--,(I=B)===e&&(B=e,0===A&&z(bs)),(R=I)!==e)?(_=function(s,x,C){return{token:"query",kind:"query",prologue:s,units:[x],inlineData:C}}(_,N,R),C=_):(r=C,C=e)):(r=C,C=e),A--,C===e&&(_=e,0===A&&z(m)),A--,(x=C)===e&&0===A&&z(d),(s=x)===e&&(s=function(){var x;return A++,x=function C(){var _,N,R,I,B,Y,le,ge,Oe,ze;if(A++,_=r,(N=jh())!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(A++,(ze=function(){var Ae,Ve,rt,Me,et,nt,lt,Tt,at;if(A++,Ae=r,"LOAD"===a.substr(r,4)?(Ve="LOAD",r+=4):(Ve=e,0===A&&z(Eo)),Ve===e&&("load"===a.substr(r,4)?(Ve="load",r+=4):(Ve=e,0===A&&z(ui))),Ve!==e){for(rt=[],Me=Q();Me!==e;)rt.push(Me),Me=Q();if(rt!==e)if((Me=gr())!==e){for(et=[],nt=Q();nt!==e;)et.push(nt),nt=Q();if(et!==e){if(nt=r,"INTO"===a.substr(r,4)?(lt="INTO",r+=4):(lt=e,0===A&&z(Qu)),lt===e&&("into"===a.substr(r,4)?(lt="into",r+=4):(lt=e,0===A&&z(Uu))),lt!==e){for(Tt=[],at=Q();at!==e;)Tt.push(at),at=Q();Tt!==e&&(at=ic())!==e?nt=lt=[lt,Tt,at]:(r=nt,nt=e)}else r=nt,nt=e;nt===e&&(nt=null),nt!==e?(Ve=function(s,x){var C={kind:"load",token:"executableunit"};return C.sourceGraph=s,null!=x&&(C.destinyGraph=x[2]),C}(Me,nt),Ae=Ve):(r=Ae,Ae=e)}else r=Ae,Ae=e}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return A--,Ae===e&&(Ve=e,0===A&&z(ws)),Ae}())===e&&(ze=function(){var Ae,Ve,rt,Me,et,nt;if(A++,Ae=r,"CLEAR"===a.substr(r,5)?(Ve="CLEAR",r+=5):(Ve=e,0===A&&z(Gu)),Ve===e&&("clear"===a.substr(r,5)?(Ve="clear",r+=5):(Ve=e,0===A&&z(Hu))),Ve!==e){for(rt=[],Me=Q();Me!==e;)rt.push(Me),Me=Q();if(rt!==e)if(a.substr(r,6)===Pn?(Me=Pn,r+=6):(Me=e,0===A&&z(ks)),Me===e&&(a.substr(r,6)===Bn?(Me=Bn,r+=6):(Me=e,0===A&&z(fi))),Me===e&&(Me=null),Me!==e){for(et=[],nt=Q();nt!==e;)et.push(nt),nt=Q();et!==e&&(nt=qh())!==e?(Ve=function(s){var x={kind:"clear",token:"executableunit"};return x.destinyGraph=s,x}(nt),Ae=Ve):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return A--,Ae===e&&(Ve=e,0===A&&z(Xa)),Ae}())===e&&(ze=function(){var Ae,Ve,rt,Me,et,nt;if(A++,Ae=r,"DROP"===a.substr(r,4)?(Ve="DROP",r+=4):(Ve=e,0===A&&z(zu)),Ve===e&&("drop"===a.substr(r,4)?(Ve="drop",r+=4):(Ve=e,0===A&&z(nr))),Ve!==e){for(rt=[],Me=Q();Me!==e;)rt.push(Me),Me=Q();if(rt!==e)if(a.substr(r,6)===Pn?(Me=Pn,r+=6):(Me=e,0===A&&z(ks)),Me===e&&(a.substr(r,6)===Bn?(Me=Bn,r+=6):(Me=e,0===A&&z(fi))),Me===e&&(Me=null),Me!==e){for(et=[],nt=Q();nt!==e;)et.push(nt),nt=Q();et!==e&&(nt=qh())!==e?(Ve=function(s){var x={kind:"drop",token:"executableunit"};return x.destinyGraph=s,x}(nt),Ae=Ve):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return A--,Ae===e&&(Ve=e,0===A&&z(Wu)),Ae}())===e&&(ze=function(){var Ae,Ve,rt,Me,et,nt;if(A++,Ae=r,"CREATE"===a.substr(r,6)?(Ve="CREATE",r+=6):(Ve=e,0===A&&z(Xu)),Ve===e&&("create"===a.substr(r,6)?(Ve="create",r+=6):(Ve=e,0===A&&z(Ju))),Ve!==e){for(rt=[],Me=Q();Me!==e;)rt.push(Me),Me=Q();if(rt!==e)if(a.substr(r,6)===Pn?(Me=Pn,r+=6):(Me=e,0===A&&z(ks)),Me===e&&(a.substr(r,6)===Bn?(Me=Bn,r+=6):(Me=e,0===A&&z(fi))),Me===e&&(Me=null),Me!==e){for(et=[],nt=Q();nt!==e;)et.push(nt),nt=Q();et!==e&&(nt=ic())!==e?(Ve=function(s){var x={kind:"create",token:"executableunit"};return x.destinyGraph=s,x}(nt),Ae=Ve):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return A--,Ae===e&&(Ve=e,0===A&&z(Ya)),Ae}())===e&&(ze=function(){var Ae,Ve,rt,Me,et,nt;if(A++,Ae=r,a.substr(r,6)===No?(Ve=No,r+=6):(Ve=e,0===A&&z($a)),Ve===e&&(a.substr(r,6)===qi?(Ve=qi,r+=6):(Ve=e,0===A&&z(Ss))),Ve!==e){for(rt=[],Me=Q();Me!==e;)rt.push(Me),Me=Q();if(rt!==e)if(a.substr(r,4)===Lo?(Me=Lo,r+=4):(Me=e,0===A&&z(di)),Me===e&&(a.substr(r,4)===Ir?(Me=Ir,r+=4):(Me=e,0===A&&z(Xi))),Me!==e){for(et=[],nt=Q();nt!==e;)et.push(nt),nt=Q();et!==e&&(nt=Jh())!==e?(Ve=function(s){var x={kind:"insertdata",token:"executableunit"};return x.quads=s,x}(nt),Ae=Ve):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return A--,Ae===e&&(Ve=e,0===A&&z(Za)),Ae}())===e&&(ze=function(){var Ae,Ve,rt,Me,et;if(A++,Ae=r,a.substr(r,6)===yr?(Ve=yr,r+=6):(Ve=e,0===A&&z(an)),Ve===e&&(a.substr(r,6)===vn?(Ve=vn,r+=6):(Ve=e,0===A&&z(Fs))),Ve!==e){for(rt=[],Me=Q();Me!==e;)rt.push(Me),Me=Q();rt!==e?(a.substr(r,4)===Lo?(Me=Lo,r+=4):(Me=e,0===A&&z(di)),Me===e&&(a.substr(r,4)===Ir?(Me=Ir,r+=4):(Me=e,0===A&&z(Xi))),Me!==e&&(et=Jh())!==e?(Ve=function(s){var x={kind:"deletedata",token:"executableunit"};return x.quads=s,x}(et),Ae=Ve):(r=Ae,Ae=e)):(r=Ae,Ae=e)}else r=Ae,Ae=e;return A--,Ae===e&&(Ve=e,0===A&&z(el)),Ae}())===e&&(ze=function(){var Ae,Ve,rt,Me,et,nt;if(A++,Ae=r,a.substr(r,6)===yr?(Ve=yr,r+=6):(Ve=e,0===A&&z(an)),Ve===e&&(a.substr(r,6)===vn?(Ve=vn,r+=6):(Ve=e,0===A&&z(Fs))),Ve!==e){for(rt=[],Me=Q();Me!==e;)rt.push(Me),Me=Q();if(rt!==e)if(a.substr(r,5)===he?(Me=he,r+=5):(Me=e,0===A&&z(me)),Me===e&&(a.substr(r,5)===Le?(Me=Le,r+=5):(Me=e,0===A&&z(Se))),Me!==e){for(et=[],nt=Q();nt!==e;)et.push(nt),nt=Q();et!==e&&(nt=tn())!==e?(Ve=function(s){var x={kind:"modify"};x.pattern=s,x.with=null,x.using=null;var C=[],_=s.patterns[0];_=null==_.triplesContext&&null!=_.patterns?_.patterns[0].triplesContext:_.triplesContext;for(var N=0;N<_.length;N++){var R={},I=_[N];R.subject=I.subject,R.predicate=I.predicate,R.object=I.object,R.graph=I.graph,C.push(R)}return x.delete=C,x}(nt),Ae=Ve):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;return A--,Ae===e&&(Ve=e,0===A&&z(Vu)),Ae}())===e&&(ze=function(){var Ae,Ve,rt,Me,et,nt,lt,Tt,at,It,jt,Ft,Cr,lr,hr;if(A++,Ae=r,Ve=r,"WITH"===a.substr(r,4)?(rt="WITH",r+=4):(rt=e,0===A&&z(Jr)),rt===e&&("with"===a.substr(r,4)?(rt="with",r+=4):(rt=e,0===A&&z(nl))),rt!==e){for(Me=[],et=Q();et!==e;)Me.push(et),et=Q();Me!==e&&(et=gr())!==e?Ve=rt=[rt,Me,et]:(r=Ve,Ve=e)}else r=Ve,Ve=e;if(Ve===e&&(Ve=null),Ve!==e){for(rt=[],Me=Q();Me!==e;)rt.push(Me),Me=Q();if(rt!==e){if(Me=r,A++,Cr=r,a.substr(r,6)===yr?(lr=yr,r+=6):(lr=e,0===A&&z(an)),lr===e&&(a.substr(r,6)===vn?(lr=vn,r+=6):(lr=e,0===A&&z(Fs))),lr!==e&&(hr=Xh())!==e?Cr=lr=hr:(r=Cr,Cr=e),A--,Cr===e&&(lr=e,0===A&&z(Yu)),(et=Cr)!==e){for(nt=[],lt=Q();lt!==e;)nt.push(lt),lt=Q();nt!==e?((lt=Wh())===e&&(lt=null),lt!==e?Me=et=[et,nt,lt]:(r=Me,Me=e)):(r=Me,Me=e)}else r=Me,Me=e;if(Me===e&&(Me=Wh()),Me!==e){for(et=[],nt=Q();nt!==e;)et.push(nt),nt=Q();if(et!==e){for(nt=[],lt=zh();lt!==e;)nt.push(lt),lt=zh();if(nt!==e){for(lt=[],Tt=Q();Tt!==e;)lt.push(Tt),Tt=Q();if(lt!==e)if(a.substr(r,5)===he?(Tt=he,r+=5):(Tt=e,0===A&&z(me)),Tt===e&&(a.substr(r,5)===Le?(Tt=Le,r+=5):(Tt=e,0===A&&z(Se))),Tt!==e){for(at=[],It=Q();It!==e;)at.push(It),It=Q();if(at!==e)if((It=tn())!==e){for(jt=[],Ft=Q();Ft!==e;)jt.push(Ft),Ft=Q();jt!==e?(Ve=function(s,x,C,_){var N={kind:"modify"};return N.with=""!=s&&null!=s?s[2]:null,3!==x.length||""!==x[2]&&null!=x[2]?3===x.length&&null!=x[0].length&&null!=x[1].length&&null!=x[2].length?(N.delete=x[0],N.insert=x[2]):(N.insert=x,N.delete=null):(N.delete=x[0],N.insert=null),""!=C&&(N.using=C),N.pattern=_,N}(Ve,Me,nt,It),Ae=Ve):(r=Ae,Ae=e)}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e;else r=Ae,Ae=e}else r=Ae,Ae=e}else r=Ae,Ae=e}else r=Ae,Ae=e}else r=Ae,Ae=e}else r=Ae,Ae=e;return A--,Ae===e&&(Ve=e,0===A&&z(Es)),Ae}()),A--,ze===e&&0===A&&z(dn),(I=ze)!==e){for(B=r,Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if(59===a.charCodeAt(r)?(le=sn,r++):(le=e,0===A&&z(Dr)),le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();ge!==e?((Oe=C())===e&&(Oe=null),Oe!==e?B=Y=[Y,le,ge,Oe]:(r=B,B=e)):(r=B,B=e)}else r=B,B=e;else r=B,B=e;B===e&&(B=null),B!==e?(N=function(s,x,C){var _={token:"query",kind:"update"};_.prologue=s;var N=[x];return null!=C&&null!=C.length&&null!=C[3]&&null!=C[3].units&&(N=N.concat(C[3].units)),_.units=N,_}(N,I,B),_=N):(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e;return A--,_===e&&(N=e,0===A&&z(Bu)),_}(),A--,x===e&&0===A&&z(jr),x}()),s;var s,x,C,_,N,R,I,B,Y,le}function jh(){var s,x,C,_,N;if(A++,s=r,(x=function(){var R,I,B,Y,le;for(A++,R=r,I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(a.substr(r,4)===w?(B=w,r+=4):(B=e,0===A&&z(T)),B===e&&(a.substr(r,4)===E?(B=E,r+=4):(B=e,0===A&&z(P))),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e&&(le=Tu())!==e?(I=function(s){_g(s);var x={token:"base"};return x.value=s,x}(le),R=I):(r=R,R=e)}else r=R,R=e;else r=R,R=e;return A--,R===e&&(I=e,0===A&&z(f)),R}())===e&&(x=null),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e){for(_=[],N=Dh();N!==e;)_.push(N),N=Dh();_!==e?s=x=function(s,x){return{token:"prologue",base:s,prefixes:x}}(x,_):(r=s,s=e)}else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(k)),s}function Dh(){var s,x,C,_,N,R,I;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if(a.substr(r,6)===O?(C=O,r+=6):(C=e,0===A&&z(L)),C===e&&(a.substr(r,6)===U?(C=U,r+=6):(C=e,0===A&&z(W))),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if((N=bc())!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();R!==e&&(I=Tu())!==e?s=x=function(s,x){kg(s,x);var C={token:"prefix"};return C.prefix=s,C.local=x,C}(N,I):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(j)),s}function Mh(){var s,x,C,_,N,R,I,B,Y,le,ge,Oe,ze,Ae,Ve,rt,Me,et,nt,lt;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if("SELECT"===a.substr(r,6)?(C="SELECT",r+=6):(C=e,0===A&&z(ne)),C===e&&("select"===a.substr(r,6)?(C="select",r+=6):(C=e,0===A&&z(Ce))),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if(a.substr(r,8)===be?(N=be,r+=8):(N=e,0===A&&z(de)),N===e&&(a.substr(r,8)===ye?(N=ye,r+=8):(N=e,0===A&&z(Fe))),N===e&&(a.substr(r,7)===Be?(N=Be,r+=7):(N=e,0===A&&z(Ie)),N===e&&(a.substr(r,7)===Je?(N=Je,r+=7):(N=e,0===A&&z(G)))),N===e&&(N=null),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e){for(I=[],B=r,Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=vr())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();ge!==e?B=Y=[Y,le,ge]:(r=B,B=e)}else r=B,B=e;else r=B,B=e;if(B===e){for(B=r,Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if(40===a.charCodeAt(r)?(le=H,r++):(le=e,0===A&&z(ee)),le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if((Oe=Lt())!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();if(ze!==e)if(a.substr(r,2)===pe?(Ae=pe,r+=2):(Ae=e,0===A&&z(Ne)),Ae===e&&(a.substr(r,2)===_e?(Ae=_e,r+=2):(Ae=e,0===A&&z(Pe))),Ae!==e){for(Ve=[],rt=Q();rt!==e;)Ve.push(rt),rt=Q();if(Ve!==e)if((rt=vr())!==e){for(Me=[],et=Q();et!==e;)Me.push(et),et=Q();if(Me!==e)if(41===a.charCodeAt(r)?(et=We,r++):(et=e,0===A&&z(Ye)),et!==e){for(nt=[],lt=Q();lt!==e;)nt.push(lt),lt=Q();nt!==e?B=Y=[Y,le,ge,Oe,ze,Ae,Ve,rt,Me,et,nt]:(r=B,B=e)}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}if(B!==e)for(;B!==e;){for(I.push(B),B=r,Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=vr())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();ge!==e?B=Y=[Y,le,ge]:(r=B,B=e)}else r=B,B=e;else r=B,B=e;if(B===e){for(B=r,Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if(40===a.charCodeAt(r)?(le=H,r++):(le=e,0===A&&z(ee)),le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if((Oe=Lt())!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();if(ze!==e)if(a.substr(r,2)===pe?(Ae=pe,r+=2):(Ae=e,0===A&&z(Ne)),Ae===e&&(a.substr(r,2)===_e?(Ae=_e,r+=2):(Ae=e,0===A&&z(Pe))),Ae!==e){for(Ve=[],rt=Q();rt!==e;)Ve.push(rt),rt=Q();if(Ve!==e)if((rt=vr())!==e){for(Me=[],et=Q();et!==e;)Me.push(et),et=Q();if(Me!==e)if(41===a.charCodeAt(r)?(et=We,r++):(et=e,0===A&&z(Ye)),et!==e){for(nt=[],lt=Q();lt!==e;)nt.push(lt),lt=Q();nt!==e?B=Y=[Y,le,ge,Oe,ze,Ae,Ve,rt,Me,et,nt]:(r=B,B=e)}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}else r=B,B=e;else r=B,B=e}}else I=e;if(I===e){for(I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(42===a.charCodeAt(r)?(Y=mt,r++):(Y=e,0===A&&z(ht)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e?I=B=[B,Y,le]:(r=I,I=e)}else r=I,I=e;else r=I,I=e}I!==e?s=x=function(s,x){var C=[];if(3===x.length&&"*"===x[1])return{vars:[{token:"variable",kind:"*"}],modifier:dp(s)};for(var _=0;_<x.length;_++){var N=x[_];3===N.length?C.push({token:"variable",kind:"var",value:N[1]}):C.push({token:"variable",kind:"aliased",expression:N[3],alias:N[7]})}return{vars:C,modifier:dp(s)}}(N,I):(r=s,s=e)}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(te)),s}function In(){var s,x,C,_,N,R;if(A++,s=r,"FROM"===a.substr(r,4)?(x="FROM",r+=4):(x=e,0===A&&z(On)),x===e&&("from"===a.substr(r,4)?(x="from",r+=4):(x=e,0===A&&z(fs))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=function(){var I,B,Y;for(A++,I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();return B!==e&&(Y=Ph())!==e?(B=function(s){return{graph:s,kind:"default",token:"graphClause"}}(Y),I=B):(r=I,I=e),A--,I===e&&(B=e,0===A&&z(cs)),I}())===e&&(_=function(){var I,B,Y,le;if(A++,I=r,a.substr(r,5)===Hr?(B=Hr,r+=5):(B=e,0===A&&z(li)),B===e&&(a.substr(r,5)===rn?(B=rn,r+=5):(B=e,0===A&&z(hn))),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e&&(le=Ph())!==e?(B=function(s){return{graph:s,kind:"named",token:"graphCluase"}}(le),I=B):(r=I,I=e)}else r=I,I=e;return A--,I===e&&(B=e,0===A&&z(hs)),I}()),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?s=x=_:(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Ot)),s}function Ph(){var s;return A++,s=gr(),A--,s===e&&0===A&&z(Wr),s}function ba(){var s,x,C,_,N,R;if(A++,s=r,a.substr(r,5)===he?(x=he,r+=5):(x=e,0===A&&z(me)),x===e&&(a.substr(r,5)===Le?(x=Le,r+=5):(x=e,0===A&&z(Se))),x===e&&(x=null),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=tn())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?s=x=_:(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(nn)),s}function xa(){var s,x,C,_,N,R,I,B,Y;return A++,s=r,(x=function(){var R,I,B,Y,le,ge,Oe;if(A++,R=r,"GROUP"===a.substr(r,5)?(I="GROUP",r+=5):(I=e,0===A&&z(wo)),I===e&&("group"===a.substr(r,5)?(I="group",r+=5):(I=e,0===A&&z(Bi))),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if("BY"===a.substr(r,2)?(Y="BY",r+=2):(Y=e,0===A&&z(Jt)),Y===e&&("by"===a.substr(r,2)?(Y="by",r+=2):(Y=e,0===A&&z(pn))),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e){if(ge=[],(Oe=Bh())!==e)for(;Oe!==e;)ge.push(Oe),Oe=Bh();else ge=e;ge!==e?R=I=ge:(r=R,R=e)}else r=R,R=e}else r=R,R=e;else r=R,R=e}else r=R,R=e;return A--,R===e&&(I=e,0===A&&z(Pi)),R}())===e&&(x=null),x!==e?((C=function(){var R,I,B,Y;if(A++,R=r,"HAVING"===a.substr(r,6)?(I="HAVING",r+=6):(I=e,0===A&&z(ds)),I!==e){if(B=[],(Y=Qh())!==e)for(;Y!==e;)B.push(Y),Y=Qh();else B=e;B!==e?R=I=[I,B]:(r=R,R=e)}else r=R,R=e;return A--,R===e&&(I=e,0===A&&z(ot)),R}())===e&&(C=null),C!==e?((_=function(){var R,I,B,Y,le,ge,Oe,ze;if(A++,R=r,"ORDER"===a.substr(r,5)?(I="ORDER",r+=5):(I=e,0===A&&z(Aa)),I===e&&("order"===a.substr(r,5)?(I="order",r+=5):(I=e,0===A&&z(Ou))),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if("BY"===a.substr(r,2)?(Y="BY",r+=2):(Y=e,0===A&&z(Jt)),Y===e&&("by"===a.substr(r,2)?(Y="by",r+=2):(Y=e,0===A&&z(pn))),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e){if(ge=[],(Oe=Uh())!==e)for(;Oe!==e;)ge.push(Oe),Oe=Uh();else ge=e;if(ge!==e){for(Oe=[],ze=Q();ze!==e;)Oe.push(ze),ze=Q();Oe!==e?R=I=ge:(r=R,R=e)}else r=R,R=e}else r=R,R=e}else r=R,R=e;else r=R,R=e}else r=R,R=e;return A--,R===e&&(I=e,0===A&&z(_o)),R}())===e&&(_=null),_!==e?(A++,I=r,(B=Gh())!==e?((Y=Hh())===e&&(Y=null),Y!==e?I=B=[B,Y]:(r=I,I=e)):(r=I,I=e),I===e&&(I=r,(B=Hh())!==e?((Y=Gh())===e&&(Y=null),Y!==e?I=B=[B,Y]:(r=I,I=e)):(r=I,I=e)),I!==e&&(I=function(s){for(var x={},C=0;C<s.length;C++){var _=s[C];null!=_&&null!=_.limit?x.limit=_.limit:null!=_&&null!=_.offset&&(x.offset=_.offset)}return x}(I)),A--,(R=I)===e&&(I=e,0===A&&z(Oa)),(N=R)===e&&(N=null),N!==e?s=x=function(s,x,C){var _={};return null!=C&&(null!=C.limit&&(_.limit=C.limit),null!=C.offset&&(_.offset=C.offset)),null!=s&&(_.group=s),_.order=x,_}(x,_,N):(r=s,s=e)):(r=s,s=e)):(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(xo)),s}function Bh(){var s,x,C,_,N,R,I,B,Y,le,ge;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if((C=mc())!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e?s=x=C:(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e){for(s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if((C=$h())!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e?s=x=C:(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e){for(s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if(40===a.charCodeAt(r)?(C=H,r++):(C=e,0===A&&z(ee)),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if((N=Lt())!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e){if(I=r,a.substr(r,2)===pe?(B=pe,r+=2):(B=e,0===A&&z(Ne)),B===e&&(a.substr(r,2)===_e?(B=_e,r+=2):(B=e,0===A&&z(Pe))),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e&&(le=vr())!==e?I=B=[B,Y,le]:(r=I,I=e)}else r=I,I=e;if(I===e&&(I=null),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(41===a.charCodeAt(r)?(Y=We,r++):(Y=e,0===A&&z(Ye)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e?s=x=function(s,x){return 0!=x.length?{token:"aliased_expression",expression:s,alias:x[2]}:s}(N,I):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;if(s===e){for(s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if((C=vr())!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e?s=x=C:(r=s,s=e)}else r=s,s=e;else r=s,s=e}}}return A--,s===e&&(x=e,0===A&&z(qr)),s}function Qh(){var s;return A++,s=oc(),A--,s===e&&0===A&&z(vs),s}function Uh(){var s,x,C,_,N,R;if(A++,s=r,"ASC"===a.substr(r,3)?(x="ASC",r+=3):(x=e,0===A&&z(Ea)),x===e&&("asc"===a.substr(r,3)?(x="asc",r+=3):(x=e,0===A&&z(Gi)),x===e&&("DESC"===a.substr(r,4)?(x="DESC",r+=4):(x=e,0===A&&z(Ta)),x===e&&("desc"===a.substr(r,4)?(x="desc",r+=4):(x=e,0===A&&z(Na))))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=yc())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?s=x=function(s,x){return{direction:s.toUpperCase(),expression:x}}(x,_):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e)if(s=r,(x=oc())===e&&(x=vr()),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e?s=x=function(s){return"var"===s.token&&(s={token:"expression",expressionType:"atomic",primaryexpression:"var",value:s}),{direction:"ASC",expression:s}}(x):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Co)),s}function Gh(){var s,x,C,_,N,R;if(A++,s=r,"LIMIT"===a.substr(r,5)?(x="LIMIT",r+=5):(x=e,0===A&&z(on)),x===e&&("limit"===a.substr(r,5)?(x="limit",r+=5):(x=e,0===A&&z(Du))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=ls())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?s=x=function(s){return{limit:parseInt(s.value)}}(_):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(ju)),s}function Hh(){var s,x,C,_,N,R;if(A++,s=r,"OFFSET"===a.substr(r,6)?(x="OFFSET",r+=6):(x=e,0===A&&z(Mu)),x===e&&("offset"===a.substr(r,6)?(x="offset",r+=6):(x=e,0===A&&z(Pu))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=ls())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?s=x=function(s){return{offset:parseInt(s.value)}}(_):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Hi)),s}function wu(){var s;return A++,(s=gr())===e&&(s=Au())===e&&(s=Fu())===e&&(s=Eu())===e&&(a.substr(r,5)===Dn?(s=Dn,r+=5):(s=e,0===A&&z(Wi))),A--,s===e&&0===A&&z(Qa),s}function Wh(){var s,x,C;return A++,s=r,a.substr(r,6)===No?(x=No,r+=6):(x=e,0===A&&z($a)),x===e&&(a.substr(r,6)===qi?(x=qi,r+=6):(x=e,0===A&&z(Ss))),x!==e&&(C=Xh())!==e?s=x=C:(r=s,s=e),A--,s===e&&(x=e,0===A&&z(ol)),s}function zh(){var s,x,C,_,N,R,I,B;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if("USING"===a.substr(r,5)?(C="USING",r+=5):(C=e,0===A&&z(al)),C===e&&("using"===a.substr(r,5)?(C="using",r+=5):(C=e,0===A&&z(Ls))),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e){if((N=gr())===e)if(N=r,a.substr(r,5)===Hr?(R=Hr,r+=5):(R=e,0===A&&z(li)),R===e&&(a.substr(r,5)===rn?(R=rn,r+=5):(R=e,0===A&&z(hn))),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=gr())!==e?N=R=[R,I,B]:(r=N,N=e)}else r=N,N=e;N!==e?s=x=function(s){return null!=s.length?{kind:"named",uri:s[2]}:{kind:"default",uri:s}}(N):(r=s,s=e)}else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(sl)),s}function ic(){var s,x,C,_;if(A++,s=r,a.substr(r,5)===ln?(x=ln,r+=5):(x=e,0===A&&z(Nr)),x===e&&(a.substr(r,5)===Un?(x=Un,r+=5):(x=e,0===A&&z(Ji))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e&&(_=gr())!==e?s=x=_:(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(ll)),s}function qh(){var s,x;return A++,s=r,(x=ic())!==e&&(x=x),(s=x)===e&&(s=r,a.substr(r,7)===Os?(x=Os,r+=7):(x=e,0===A&&z(Rs)),x===e&&(a.substr(r,7)===fl?(x=fl,r+=7):(x=e,0===A&&z(Zu))),x!==e&&(x="default"),(s=x)===e&&(s=r,a.substr(r,5)===Hr?(x=Hr,r+=5):(x=e,0===A&&z(li)),x===e&&(a.substr(r,5)===rn?(x=rn,r+=5):(x=e,0===A&&z(hn))),x!==e&&(x="named"),(s=x)===e&&(s=r,"ALL"===a.substr(r,3)?(x="ALL",r+=3):(x=e,0===A&&z(gi)),x===e&&("all"===a.substr(r,3)?(x="all",r+=3):(x=e,0===A&&z(js))),x!==e&&(x="all"),s=x))),A--,s===e&&(x=e,0===A&&z(ul)),s}function Xh(){var s,x,C,_,N,R,I,B,Y;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if(123===a.charCodeAt(r)?(C=ke,r++):(C=e,0===A&&z(De)),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if((N=Vh())!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(125===a.charCodeAt(r)?(I=He,r++):(I=e,0===A&&z($e)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e?s=x=gn(N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Ds)),s}function Jh(){var s,x,C,_,N,R,I,B,Y;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if(123===a.charCodeAt(r)?(C=ke,r++):(C=e,0===A&&z(De)),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if((N=Vh())!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(125===a.charCodeAt(r)?(I=He,r++):(I=e,0===A&&z($e)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e?s=x=gn(N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Wn)),s}function Vh(){var s,x,C,_,N,R,I;if(A++,s=r,(x=ns())===e&&(x=null),x!==e){for(C=[],_=r,(N=Kh())!==e?(46===a.charCodeAt(r)?(R=Wt,r++):(R=e,0===A&&z(zt)),R===e&&(R=null),R!==e?((I=ns())===e&&(I=null),I!==e?_=N=[N,R,I]:(r=_,_=e)):(r=_,_=e)):(r=_,_=e);_!==e;)C.push(_),_=r,(N=Kh())!==e?(46===a.charCodeAt(r)?(R=Wt,r++):(R=e,0===A&&z(zt)),R===e&&(R=null),R!==e?((I=ns())===e&&(I=null),I!==e?_=N=[N,R,I]:(r=_,_=e)):(r=_,_=e)):(r=_,_=e);C!==e?s=x=function(s,x){var C=[];if(null!=s&&null!=s.triplesContext)for(var _=0;_<s.triplesContext.length;_++)(N=s.triplesContext[_]).graph=null,C.push(N);if(x&&x.length>0&&x[0].length>0&&(C=C.concat(x[0][0].quadsContext),null!=x[0][2]&&null!=x[0][2].triplesContext))for(_=0;_<x[0][2].triplesContext.length;_++){var N;(N=x[0][2].triplesContext[_]).graph=null,C.push(N)}return{token:"quads",quadsContext:C}}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(mr)),s}function Kh(){var s,x,C,_,N,R,I,B,Y,le,ge,Oe,ze;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if(a.substr(r,5)===ln?(C=ln,r+=5):(C=e,0===A&&z(Nr)),C===e&&(a.substr(r,5)===Un?(C=Un,r+=5):(C=e,0===A&&z(Ji))),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if((N=as())!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(123===a.charCodeAt(r)?(I=ke,r++):(I=e,0===A&&z(De)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if((Y=ns())===e&&(Y=null),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e)if(125===a.charCodeAt(r)?(ge=He,r++):(ge=e,0===A&&z($e)),ge!==e){for(Oe=[],ze=Q();ze!==e;)Oe.push(ze),ze=Q();Oe!==e?s=x=function(s,x){var C=[];if(null!=x)for(var _=0;_<x.triplesContext.length;_++){var N=x.triplesContext[_];N.graph=s,C.push(N)}return{token:"quadsnottriples",quadsContext:C}}(N,Y):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(ef)),s}function ns(){var s,x,C,_,N,R,I;if(A++,s=r,(x=tp())!==e){for(C=r,_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if(46===a.charCodeAt(r)?(N=Wt,r++):(N=e,0===A&&z(zt)),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();R!==e?((I=ns())===e&&(I=null),I!==e?C=_=[_,N,R,I]:(r=C,C=e)):(r=C,C=e)}else r=C,C=e;else r=C,C=e;C===e&&(C=null),C!==e?s=x=function(s,x){var C=s.triplesContext;return null!=x&&"object"==typeof x&&null!=x.length&&null!=x[3]&&null!=x[3].triplesContext&&(C=C.concat(x[3].triplesContext)),{token:"triplestemplate",triplesContext:C}}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Vi)),s}function tn(){var s,x,C,_,N,R,I,B,Y,le;if(A++,s=r,123===a.charCodeAt(r)?(x=ke,r++):(x=e,0===A&&z(De)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(A++,I=r,(B=Mh())!==e&&(Y=ba())!==e&&(le=xa())!==e?I=B=function(s,x,C){var _={kind:"select",token:"subselect"};return _.projection=s.vars,_.modifier=s.modifier,_.pattern=x,null!=C&&null!=C.limit&&(_.limit=C.limit),null!=C&&null!=C.offset&&(_.offset=C.offset),null!=C&&null!=C.order&&""!=C.order&&(_.order=C.order),null!=C&&null!=C.group&&(_.group=C.group),_}(B,Y,le):(r=I,I=e),A--,I===e&&(B=e,0===A&&z(ce)),(_=I)!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?(125===a.charCodeAt(r)?(R=He,r++):(R=e,0===A&&z($e)),R!==e?s=x=_:(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e)if(s=r,123===a.charCodeAt(r)?(x=ke,r++):(x=e,0===A&&z(De)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=function(){var I,B,Y,le,ge,Oe,ze,Ae,Ve,rt;if(A++,I=r,(B=ku())===e&&(B=null),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e){if(le=[],ge=r,(Oe=Yh())!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();if(ze!==e)if(46===a.charCodeAt(r)?(Ae=Wt,r++):(Ae=e,0===A&&z(zt)),Ae===e&&(Ae=null),Ae!==e){for(Ve=[],rt=Q();rt!==e;)Ve.push(rt),rt=Q();Ve!==e?((rt=ku())===e&&(rt=null),rt!==e?ge=Oe=[Oe,ze,Ae,Ve,rt]:(r=ge,ge=e)):(r=ge,ge=e)}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;for(;ge!==e;)if(le.push(ge),ge=r,(Oe=Yh())!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();if(ze!==e)if(46===a.charCodeAt(r)?(Ae=Wt,r++):(Ae=e,0===A&&z(zt)),Ae===e&&(Ae=null),Ae!==e){for(Ve=[],rt=Q();rt!==e;)Ve.push(rt),rt=Q();Ve!==e?((rt=ku())===e&&(rt=null),rt!==e?ge=Oe=[Oe,ze,Ae,Ve,rt]:(r=ge,ge=e)):(r=ge,ge=e)}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;le!==e?(B=function(s,x){var C=[];null!=s&&s!=[]&&C.push(s);for(var _=0;_<x.length;_++)for(var N=0;N<x[_].length;N++)null!=x[_][N]&&null!=x[_][N].token&&C.push(x[_][N]);var R=[],I=[],B=[],Y=[];for(_=0;_<C.length;_++)if("triplespattern"!==C[_].token&&"filter"!==C[_].token&&"bind"!==C[_].token){if(0!=I.length||0!=B.length){var le=[];for(N=0;N<I.length;N++)le=le.concat(I[N].triplesContext);le.length>0&&R.push({token:"basicgraphpattern",triplesContext:le}),I=[]}R.push(C[_])}else"triplespattern"===C[_].token?I.push(C[_]):"bind"===C[_].token?Y.push(C[_]):B.push(C[_]);if(0!=I.length||0!=B.length){for(le=[],N=0;N<I.length;N++)le=le.concat(I[N].triplesContext);le.length>0&&R.push({token:"basicgraphpattern",triplesContext:le})}return{token:"groupgraphpattern",patterns:R,filters:B,binds:Y}}(B,le),I=B):(r=I,I=e)}else r=I,I=e}else r=I,I=e;return A--,I===e&&(B=e,0===A&&z(tf)),I}())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?(125===a.charCodeAt(r)?(R=He,r++):(R=e,0===A&&z($e)),R!==e?s=x=_:(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Ms)),s}function ku(){var s,x,C,_,N,R;if(A++,s=r,(x=function(){var I,B,Y,le,ge,Oe;for(A++,I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if((Y=Cu())!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e&&(ge=np())!==e?(B=function(s,x){var C=x.triplesContext,_=s;if(x.pairs)for(var N=0;N<x.pairs.length;N++){var R=x.pairs[N],I=null;null!=R[1].length&&(R[1]=R[1][0]),_.token&&"triplesnodecollection"===_.token?("path"===(I={subject:_.chainSubject[0],predicate:R[0],object:R[1]}).predicate.token&&"element"===I.predicate.kind&&(I.predicate=I.predicate.value),C.push(I),C=C.concat(_.triplesContext)):("path"===(I={subject:_,predicate:R[0],object:R[1]}).predicate.token&&"element"===I.predicate.kind&&(I.predicate=I.predicate.value),C.push(I))}var B={token:"triplessamesubject"};return B.triplesContext=C,B.chainSubject=_,B}(Y,ge),I=B):(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if((Y=sp())!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e&&(A++,(Oe=function(){var ze,Ae,Ve,rt,Me,et,nt,lt,Tt,at,It,jt,Ft;if(A++,ze=r,(Ae=os())===e&&(Ae=ss()),Ae!==e){for(Ve=[],rt=Q();rt!==e;)Ve.push(rt),rt=Q();if(Ve!==e)if((rt=rp())!==e){for(Me=[],et=r,nt=[],lt=Q();lt!==e;)nt.push(lt),lt=Q();if(nt!==e)if(59===a.charCodeAt(r)?(lt=sn,r++):(lt=e,0===A&&z(Dr)),lt!==e){for(Tt=[],at=Q();at!==e;)Tt.push(at),at=Q();if(Tt!==e){if(at=r,(It=os())===e&&(It=ss()),It!==e){for(jt=[],Ft=Q();Ft!==e;)jt.push(Ft),Ft=Q();jt!==e&&(Ft=mo())!==e?at=It=[It,jt,Ft]:(r=at,at=e)}else r=at,at=e;at===e&&(at=null),at!==e?et=nt=[nt,lt,Tt,at]:(r=et,et=e)}else r=et,et=e}else r=et,et=e;else r=et,et=e;for(;et!==e;){for(Me.push(et),et=r,nt=[],lt=Q();lt!==e;)nt.push(lt),lt=Q();if(nt!==e)if(59===a.charCodeAt(r)?(lt=sn,r++):(lt=e,0===A&&z(Dr)),lt!==e){for(Tt=[],at=Q();at!==e;)Tt.push(at),at=Q();if(Tt!==e){if(at=r,(It=os())===e&&(It=ss()),It!==e){for(jt=[],Ft=Q();Ft!==e;)jt.push(Ft),Ft=Q();jt!==e&&(Ft=mo())!==e?at=It=[It,jt,Ft]:(r=at,at=e)}else r=at,at=e;at===e&&(at=null),at!==e?et=nt=[nt,lt,Tt,at]:(r=et,et=e)}else r=et,et=e}else r=et,et=e;else r=et,et=e}Me!==e?(Ae=function(s,x,C){for(var _={token:"propertylist"},N=[],R=[],I=0;I<x.length;I++)null!=x[I].triplesContext?(N=N.concat(x[I].triplesContext),"triplesnodecollection"===x[I].token&&null!=x[I].chainSubject.length?R.push([s,x[I].chainSubject[0]]):R.push([s,x[I].chainSubject])):R.push([s,x[I]]);for(I=0;I<C.length;I++)for(var B=C[I][3],Y=B[0],le=B[2]||[],ge=0;ge<le.length;ge++)null!=le[ge].triplesContext?(N=N.concat(le[ge].triplesContext),R.push([Y,le[ge].chainSubject])):R.push([Y,le[ge]]);return _.pairs=R,_.triplesContext=N,_}(Ae,rt,Me),ze=Ae):(r=ze,ze=e)}else r=ze,ze=e;else r=ze,ze=e}else r=ze,ze=e;return A--,ze===e&&(Ae=e,0===A&&z(Dt)),ze}())===e&&(Oe=null),A--,Oe===e&&0===A&&z(Fl),(ge=Oe)!==e)?(B=function(s,x){var C=s.triplesContext,_=s.chainSubject;if(null!=x&&null!=x.pairs)for(var N=0;N<x.pairs.length;N++){var R=x.pairs[N];if(null!=R[1].length&&(R[1]=R[1][0]),"triplesnodecollection"===s.token)for(var I=0;I<_.length;I++){var B=_[I];if(null!=B.triplesContext){var Y={subject:B.chainSubject,predicate:R[0],object:R[1]};C.concat(B.triplesContext)}else Y={subject:_[I],predicate:R[0],object:R[1]},C.push(Y)}else Y={subject:_,predicate:R[0],object:R[1]},C.push(Y)}var le={token:"triplessamesubject"};return le.triplesContext=C,le.chainSubject=_,le}(Y,ge),I=B):(r=I,I=e)}else r=I,I=e;else r=I,I=e}return A--,I===e&&(B=e,0===A&&z(xf)),I}())!==e){for(C=r,_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e?(46===a.charCodeAt(r)?(N=Wt,r++):(N=e,0===A&&z(zt)),N!==e?((R=ku())===e&&(R=null),R!==e?C=_=[_,N,R]:(r=C,C=e)):(r=C,C=e)):(r=C,C=e),C===e&&(C=null),C!==e?s=x=function(s,x){var C=s.triplesContext;return null!=x&&"object"==typeof x&&null!=x&&null!=x.length&&null!=x[2]&&null!=x[2].triplesContext&&(C=C.concat(x[2].triplesContext)),{token:"triplespattern",triplesContext:C}}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(dl)),s}function Yh(){var s,x,C,_,N;return A++,(s=function(){var x,C,_,N,R,I,B,Y;if(A++,x=r,(C=tn())!==e){for(_=[],N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(a.substr(r,5)===yn?(I=yn,r+=5):(I=e,0===A&&z(Jn)),I===e&&(a.substr(r,5)===to?(I=to,r+=5):(I=e,0===A&&z(zs))),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=tn())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;for(;N!==e;){for(_.push(N),N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(a.substr(r,5)===yn?(I=yn,r+=5):(I=e,0===A&&z(Jn)),I===e&&(a.substr(r,5)===to?(I=to,r+=5):(I=e,0===A&&z(zs))),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=tn())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e}_!==e?(C=function(s,x){if(0===x.length)return s;for(var C={token:"graphunionpattern",value:[s]},_=0;_<x.length;_++)_==x.length-1?C.value.push(x[_][3]):(C.value.push(x[_][3]),C={token:"graphunionpattern",value:[C]});return C}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(Xn)),x}())===e&&(s=function(){var x,C,_,N,R;for(A++,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(a.substr(r,8)===Ki?(_=Ki,r+=8):(_=e,0===A&&z(vl)),_===e&&(a.substr(r,8)===Yi?(_=Yi,r+=8):(_=e,0===A&&z(rf))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e&&(R=tn())!==e?(C=function(s){return{token:"optionalgraphpattern",value:s}}(R),x=C):(r=x,x=e)}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(mi)),x}())===e&&(s=function(){var x,C,_,N;if(A++,x=r,"MINUS"===a.substr(r,5)?(C="MINUS",r+=5):(C=e,0===A&&z($i)),C===e&&("minus"===a.substr(r,5)?(C="minus",r+=5):(C=e,0===A&&z(qn))),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e&&(N=tn())!==e?(C=function(s){return{token:"minusgraphpattern",status:"todo",value:s}}(N),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(jo)),x}())===e&&(s=function(){var x,C,_,N,R,I,B;for(A++,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(a.substr(r,5)===ln?(_=ln,r+=5):(_=e,0===A&&z(Nr)),_===e&&(a.substr(r,5)===Un?(_=Un,r+=5):(_=e,0===A&&z(Ji))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=as())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=tn())!==e?(C=function(s,x){for(var C=0;C<x.patterns.length;C++)for(var _=x.patterns[C],N=0;N<_.triplesContext.length;N++)_.triplesContext[N].graph=s;return x.token="groupgraphpattern",x}(R,B),x=C):(r=x,x=e)}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(of)),x}())===e&&(A++,x=r,a.substr(r,7)===zn?(C=zn,r+=7):(C=e,0===A&&z(Zi)),C!==e&&(_=as())!==e&&(N=tn())!==e?(C=function(s,x){return{token:"servicegraphpattern",status:"todo",value:[s,x]}}(_,N),x=C):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(Gs)),(s=x)===e)&&(s=function(){var x,C,_,N,R;for(A++,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if("FILTER"===a.substr(r,6)?(_="FILTER",r+=6):(_=e,0===A&&z(Vn)),_===e&&("filter"===a.substr(r,6)?(_="filter",r+=6):(_=e,0===A&&z(lf))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e&&(R=oc())!==e?(C=function(s){return{token:"filter",value:s}}(R),x=C):(r=x,x=e)}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(af)),x}())===e&&(s=function(){var x,C,_,N,R,I,B,Y,le,ge,Oe,ze,Ae;for(A++,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if("BIND"===a.substr(r,4)?(_="BIND",r+=4):(_=e,0===A&&z(cf)),_===e&&("bind"===a.substr(r,4)?(_="bind",r+=4):(_=e,0===A&&z(ir))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(40===a.charCodeAt(r)?(R=H,r++):(R=e,0===A&&z(ee)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if((B=Lt())!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if(a.substr(r,2)===_e?(le=_e,r+=2):(le=e,0===A&&z(Pe)),le===e&&(a.substr(r,2)===pe?(le=pe,r+=2):(le=e,0===A&&z(Ne))),le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if((Oe=vr())!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();ze!==e?(41===a.charCodeAt(r)?(Ae=We,r++):(Ae=e,0===A&&z(Ye)),Ae!==e?(C=function(s,x){return{token:"bind",expression:s,as:x}}(B,Oe),x=C):(r=x,x=e)):(r=x,x=e)}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(ff)),x}())===e&&(s=function(){var x,C,_,N,R;for(A++,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(a.substr(r,6)===zi?(_=zi,r+=6):(_=e,0===A&&z(xs)),_===e&&(a.substr(r,6)===Mn?(_=Mn,r+=6):(_=e,0===A&&z(Ua))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e&&(R=Zh())!==e?x=C=R:(r=x,x=e)}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(ro)),x}()),A--,s===e&&0===A&&z(Qs),s}function oc(){var s;return A++,(s=yc())===e&&(s=mc())===e&&(s=$h()),A--,s===e&&0===A&&z(or),s}function Zh(){var s;return A++,(s=function(){var x,C,_,N,R,I,B,Y;for(A++,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=vr())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(123===a.charCodeAt(r)?(R=ke,r++):(R=e,0===A&&z(De)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e){for(B=[],Y=is();Y!==e;)B.push(Y),Y=is();B!==e?(125===a.charCodeAt(r)?(Y=He,r++):(Y=e,0===A&&z($e)),Y!==e?(C=function(s,x){return{token:"inlineData",values:[{var:s,value:x}]}}(_,B),x=C):(r=x,x=e)):(r=x,x=e)}else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e;else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(pf)),x}())===e&&(s=function(){var x,C,_,N,R,I,B,Y,le,ge,Oe,ze,Ae,Ve,rt,Me;for(A++,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e){if((_=ai())===e)if(_=r,40===a.charCodeAt(r)?(N=H,r++):(N=e,0===A&&z(ee)),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e){for(I=[],B=vr();B!==e;)I.push(B),B=vr();if(I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e?(41===a.charCodeAt(r)?(Y=We,r++):(Y=e,0===A&&z(Ye)),Y!==e?_=N=[N,R,I,B,Y]:(r=_,_=e)):(r=_,_=e)}else r=_,_=e}else r=_,_=e}else r=_,_=e;if(_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(123===a.charCodeAt(r)?(R=ke,r++):(R=e,0===A&&z(De)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e){for(B=[],Y=r,le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e)if(40===a.charCodeAt(r)?(ge=H,r++):(ge=e,0===A&&z(ee)),ge!==e){for(Oe=[],ze=Q();ze!==e;)Oe.push(ze),ze=Q();if(Oe!==e){for(ze=[],Ae=is();Ae!==e;)ze.push(Ae),Ae=is();if(ze!==e){for(Ae=[],Ve=Q();Ve!==e;)Ae.push(Ve),Ve=Q();if(Ae!==e)if(41===a.charCodeAt(r)?(Ve=We,r++):(Ve=e,0===A&&z(Ye)),Ve!==e){for(rt=[],Me=Q();Me!==e;)rt.push(Me),Me=Q();rt!==e?Y=le=[le,ge,Oe,ze,Ae,Ve,rt]:(r=Y,Y=e)}else r=Y,Y=e;else r=Y,Y=e}else r=Y,Y=e}else r=Y,Y=e}else r=Y,Y=e;else r=Y,Y=e;for(Y===e&&(Y=ai());Y!==e;){for(B.push(Y),Y=r,le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e)if(40===a.charCodeAt(r)?(ge=H,r++):(ge=e,0===A&&z(ee)),ge!==e){for(Oe=[],ze=Q();ze!==e;)Oe.push(ze),ze=Q();if(Oe!==e){for(ze=[],Ae=is();Ae!==e;)ze.push(Ae),Ae=is();if(ze!==e){for(Ae=[],Ve=Q();Ve!==e;)Ae.push(Ve),Ve=Q();if(Ae!==e)if(41===a.charCodeAt(r)?(Ve=We,r++):(Ve=e,0===A&&z(Ye)),Ve!==e){for(rt=[],Me=Q();Me!==e;)rt.push(Me),Me=Q();rt!==e?Y=le=[le,ge,Oe,ze,Ae,Ve,rt]:(r=Y,Y=e)}else r=Y,Y=e;else r=Y,Y=e}else r=Y,Y=e}else r=Y,Y=e}else r=Y,Y=e;else r=Y,Y=e;Y===e&&(Y=ai())}if(B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e?(125===a.charCodeAt(r)?(le=He,r++):(le=e,0===A&&z($e)),le!==e?x=C={token:"inlineData",values:[],todo:!0}:(r=x,x=e)):(r=x,x=e)}else r=x,x=e}else r=x,x=e}else r=x,x=e;else r=x,x=e}else r=x,x=e}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(vf)),x}()),A--,s===e&&0===A&&z(Do),s}function is(){var s,x,C,_,N;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if((C=Tu())===e&&(C=Au())===e&&(C=Fu())===e&&(C=Eu())===e&&(a.substr(r,5)===Dn?(C=Dn,r+=5):(C=e,0===A&&z(Wi))),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e?s=x=C:(r=s,s=e)}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(bl)),s}function $h(){var s,x,C,_;if(A++,s=r,(x=gr())!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e&&(_=ep())!==e?s=x=function(s,x){var C={token:"expression",expressionType:"irireforfunction"};return C.iriref=s,C.args=x.value,C}(x,_):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Xs)),s}function ep(){var s,x,C,_,N,R,I,B,Y,le,ge,Oe;if(A++,s=r,(x=ai())!==e&&(x={token:"args",value:[]}),(s=x)===e)if(s=r,40===a.charCodeAt(r)?(x=H,r++):(x=e,0===A&&z(ee)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(a.substr(r,8)===be?(_=be,r+=8):(_=e,0===A&&z(de)),_===e&&(a.substr(r,8)===ye?(_=ye,r+=8):(_=e,0===A&&z(Fe))),_===e&&(_=null),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=Lt())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e){if(B=[],Y=r,44===a.charCodeAt(r)?(le=$t,r++):(le=e,0===A&&z(er)),le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();ge!==e&&(Oe=Lt())!==e?Y=le=[le,ge,Oe]:(r=Y,Y=e)}else r=Y,Y=e;for(;Y!==e;)if(B.push(Y),Y=r,44===a.charCodeAt(r)?(le=$t,r++):(le=e,0===A&&z(er)),le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();ge!==e&&(Oe=Lt())!==e?Y=le=[le,ge,Oe]:(r=Y,Y=e)}else r=Y,Y=e;B!==e?(41===a.charCodeAt(r)?(Y=We,r++):(Y=e,0===A&&z(Ye)),Y!==e?s=x=function(s,x,C){for(var _=[],N=0;N<C.length;N++)_.push(C[N][2]);var R={token:"args"};return R.value=[x].concat(_),null!=s&&"DISTINCT"===s.toUpperCase()?R.distinct=!0:R.distinct=!1,R}(_,R,B):(r=s,s=e)):(r=s,s=e)}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Js)),s}function wa(){var s,x,C,_,N,R,I,B,Y,le;if(A++,s=r,(x=ai())!==e&&(x={token:"args",value:[]}),(s=x)===e)if(s=r,40===a.charCodeAt(r)?(x=H,r++):(x=e,0===A&&z(ee)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=gr())===e&&(_=Lt()),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e){if(R=[],I=r,44===a.charCodeAt(r)?(B=$t,r++):(B=e,0===A&&z(er)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e?((le=gr())===e&&(le=Lt()),le!==e?I=B=[B,Y,le]:(r=I,I=e)):(r=I,I=e)}else r=I,I=e;for(;I!==e;)if(R.push(I),I=r,44===a.charCodeAt(r)?(B=$t,r++):(B=e,0===A&&z(er)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e?((le=gr())===e&&(le=Lt()),le!==e?I=B=[B,Y,le]:(r=I,I=e)):(r=I,I=e)}else r=I,I=e;R!==e?(41===a.charCodeAt(r)?(I=We,r++):(I=e,0===A&&z(Ye)),I!==e?s=x=function(s,x){for(var C=[],_=0;_<x.length;_++)C.push(x[_][2]);var N={token:"args"};return N.value=[s].concat(C),N}(_,R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(xl)),s}function tp(){var s,x,C,_,N,R;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if((C=Cu())!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e&&(N=sc())!==e?s=x=function(s,x){var C=x.triplesContext,_=s;if(x.pairs)for(var N=0;N<x.pairs.length;N++){var R=x.pairs[N],I=null;null!=R[1].length&&(R[1]=R[1][0]),_.token&&"triplesnodecollection"===_.token?(I={subject:_.chainSubject[0],predicate:R[0],object:R[1]},C.push(I),C=C.concat(_.triplesContext)):(I={subject:_,predicate:R[0],object:R[1]},C.push(I))}var B={token:"triplessamesubject"};return B.triplesContext=C,B.chainSubject=_,B}(C,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e){for(s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if((C=ap())!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e&&(A++,(R=sc())===e&&(R=null),A--,R===e&&0===A&&z(_l),(N=R)!==e)?s=x=function(s,x){var C=s.triplesContext,_=s.chainSubject;if(x.pairs)for(var N=0;N<x.pairs.length;N++){var R=x.pairs[N];if(null!=R[1].length&&(R[1]=R[1][0]),"triplesnodecollection"===s.token)for(var I=0;I<_.length;I++){var B=_[I];if(null!=B.triplesContext){var Y={subject:B.chainSubject,predicate:R[0],object:R[1]};C.concat(B.triplesContext)}else Y={subject:_[I],predicate:R[0],object:R[1]},C.push(Y)}else Y={subject:_,predicate:R[0],object:R[1]},C.push(Y)}var le={token:"triplessamesubject"};return le.triplesContext=C,le.chainSubject=_,le}(C,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}return A--,s===e&&(x=e,0===A&&z(mf)),s}function sc(){var s,x,C,_,N,R,I,B,Y,le,ge,Oe,ze;if(A++,s=r,(x=uc())!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=mo())!==e){for(N=[],R=r,I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(59===a.charCodeAt(r)?(B=sn,r++):(B=e,0===A&&z(Dr)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e){if(le=r,(ge=uc())!==e){for(Oe=[],ze=Q();ze!==e;)Oe.push(ze),ze=Q();Oe!==e&&(ze=mo())!==e?le=ge=[ge,Oe,ze]:(r=le,le=e)}else r=le,le=e;le===e&&(le=null),le!==e?R=I=[I,B,Y,le]:(r=R,R=e)}else r=R,R=e}else r=R,R=e;else r=R,R=e;for(;R!==e;){for(N.push(R),R=r,I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(59===a.charCodeAt(r)?(B=sn,r++):(B=e,0===A&&z(Dr)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e){if(le=r,(ge=uc())!==e){for(Oe=[],ze=Q();ze!==e;)Oe.push(ze),ze=Q();Oe!==e&&(ze=mo())!==e?le=ge=[ge,Oe,ze]:(r=le,le=e)}else r=le,le=e;le===e&&(le=null),le!==e?R=I=[I,B,Y,le]:(r=R,R=e)}else r=R,R=e}else r=R,R=e;else r=R,R=e}N!==e?s=x=function(s,x,C){for(var _={token:"propertylist"},N=[],R=[],I=0;I<x.length;I++)null!=x[I].triplesContext?(N=N.concat(x[I].triplesContext),"triplesnodecollection"===x[I].token&&null!=x[I].chainSubject.length?R.push([s,x[I].chainSubject[0]]):R.push([s,x[I].chainSubject])):R.push([s,x[I]]);for(I=0;I<C.length;I++)for(var B=C[I][3],Y=B[0],le=B[2]||[],ge=0;ge<le.length;ge++)null!=le[ge].triplesContext?(N=N.concat(le[ge].triplesContext),R.push([Y,le[ge].chainSubject])):R.push([Y,le[ge]]);return _.pairs=R,_.triplesContext=N,_}(x,_,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(bn)),s}function rp(){var s,x,C,_,N,R,I,B;if(A++,s=r,(x=ac())!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e){if(_=[],N=r,44===a.charCodeAt(r)?(R=$t,r++):(R=e,0===A&&z(er)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=ac())!==e?N=R=[R,I,B]:(r=N,N=e)}else r=N,N=e;for(;N!==e;)if(_.push(N),N=r,44===a.charCodeAt(r)?(R=$t,r++):(R=e,0===A&&z(er)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=ac())!==e?N=R=[R,I,B]:(r=N,N=e)}else r=N,N=e;_!==e?s=x=function(s,x){var C=[];C.push(s);for(var _=0;_<x.length;_++)for(var N=0;N<x[_].length;N++)"object"==typeof x[_][N]&&null!=x[_][N].token&&C.push(x[_][N]);return C}(x,_):(r=s,s=e)}else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Ks)),s}function mo(){var s,x,C,_,N,R,I,B;if(A++,s=r,(x=lc())!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e){if(_=[],N=r,44===a.charCodeAt(r)?(R=$t,r++):(R=e,0===A&&z(er)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=lc())!==e?N=R=[R,I,B]:(r=N,N=e)}else r=N,N=e;for(;N!==e;)if(_.push(N),N=r,44===a.charCodeAt(r)?(R=$t,r++):(R=e,0===A&&z(er)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=lc())!==e?N=R=[R,I,B]:(r=N,N=e)}else r=N,N=e;_!==e?s=x=function(s,x){var C=[];C.push(s);for(var _=0;_<x.length;_++)for(var N=0;N<x[_].length;N++)"object"==typeof x[_][N]&&null!=x[_][N].token&&C.push(x[_][N]);return C}(x,_):(r=s,s=e)}else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(bf)),s}function ac(){var s;return A++,s=pc(),A--,s===e&&0===A&&z(io),s}function lc(){var s;return A++,s=dc(),A--,s===e&&0===A&&z(Sl),s}function uc(){var s,x;return A++,(s=as())===e&&(s=r,97===a.charCodeAt(r)?(x="a",r++):(x=e,0===A&&z(oo)),x!==e&&(x={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),s=x),A--,s===e&&(x=e,0===A&&z(Zs)),s}function np(){var s,x,C,_,N,R,I,B,Y,le,ge,Oe;if(A++,s=r,(x=os())===e&&(x=ss()),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=rp())!==e){for(N=[],R=r,I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(59===a.charCodeAt(r)?(B=sn,r++):(B=e,0===A&&z(Dr)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e?(le=r,(ge=os())===e&&(ge=ss()),ge!==e&&(Oe=mo())!==e?le=ge=[ge,Oe]:(r=le,le=e),le===e&&(le=null),le!==e?R=I=[I,B,Y,le]:(r=R,R=e)):(r=R,R=e)}else r=R,R=e;else r=R,R=e;for(;R!==e;){for(N.push(R),R=r,I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(59===a.charCodeAt(r)?(B=sn,r++):(B=e,0===A&&z(Dr)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e?(le=r,(ge=os())===e&&(ge=ss()),ge!==e&&(Oe=mo())!==e?le=ge=[ge,Oe]:(r=le,le=e),le===e&&(le=null),le!==e?R=I=[I,B,Y,le]:(r=R,R=e)):(r=R,R=e)}else r=R,R=e;else r=R,R=e}N!==e?s=x=function(s,x,C){for(var _={token:"propertylist"},N=[],R=[],I=0;I<x.length;I++)null!=x[I].triplesContext?(N=N.concat(x[I].triplesContext),"triplesnodecollection"===x[I].token&&null!=x[I].chainSubject.length?R.push([s,x[I].chainSubject[0]]):R.push([s,x[I].chainSubject])):R.push([s,x[I]]);for(I=0;I<C.length;I++)for(var B=C[I][3],Y=B[0],le=B[1]||[],ge=0;ge<le.length;ge++)null!=le[ge].triplesContext?(N=N.concat(le[ge].triplesContext),R.push([Y,le[ge].chainSubject])):R.push([Y,le[ge]]);return _.pairs=R,_.triplesContext=N,_}(x,_,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Al)),s}function os(){var s,x;return A++,r,(x=ip())!==e&&(x=function(s){return{token:"path",kind:"element"}.value=s,s}(x)),A--,(s=x)===e&&(x=e,0===A&&z(kf)),s}function ss(){var s;return A++,s=vr(),A--,s===e&&0===A&&z(Qo),s}function ip(){var s;return A++,s=function(){var x,C,_,N,R,I;if(A++,x=r,(C=fc())!==e){for(_=[],N=r,124===a.charCodeAt(r)?(R="|",r++):(R=e,0===A&&z(so)),R!==e&&(I=fc())!==e?N=R=[R,I]:(r=N,N=e);N!==e;)_.push(N),N=r,124===a.charCodeAt(r)?(R="|",r++):(R=e,0===A&&z(so)),R!==e&&(I=fc())!==e?N=R=[R,I]:(r=N,N=e);_!==e?(C=function(s,x){if(null==x||0===x.length)return s;for(var C=[],_=0;_<x.length;_++)C.push(x[1]);var N={token:"path",kind:"alternative"};return N.value=C,N}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(Cf)),x}(),A--,s===e&&0===A&&z(El),s}function fc(){var s,x,C,_,N,R;if(A++,s=r,(x=cc())!==e){for(C=[],_=r,47===a.charCodeAt(r)?(N="/",r++):(N=e,0===A&&z(wn)),N!==e&&(R=cc())!==e?_=N=[N,R]:(r=_,_=e);_!==e;)C.push(_),_=r,47===a.charCodeAt(r)?(N="/",r++):(N=e,0===A&&z(wn)),N!==e&&(R=cc())!==e?_=N=[N,R]:(r=_,_=e);C!==e?s=x=function(s,x){if(null==x||0===x.length)return s;for(var C=[s],_=0;_<x.length;_++)C.push(x[_][1]);var N={token:"path",kind:"sequence"};return N.value=C,N}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(ta)),s}function op(){var s,x,C,_,N,R,I;return A++,s=r,A++,(_=gr())===e&&(_=r,97===a.charCodeAt(r)?(N="a",r++):(N=e,0===A&&z(oo)),N!==e&&(N={token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}),(_=N)===e&&(_=r,33===a.charCodeAt(r)?(N="!",r++):(N=e,0===A&&z(_n)),N!==e&&(R=function(){var B,Y,le,ge,Oe,ze,Ae,Ve;if((B=_u())===e)if(B=r,40===a.charCodeAt(r)?(Y=H,r++):(Y=e,0===A&&z(ee)),Y!==e){if(le=r,(ge=_u())!==e){for(Oe=[],ze=r,124===a.charCodeAt(r)?(Ae="|",r++):(Ae=e,0===A&&z(so)),Ae!==e&&(Ve=_u())!==e?ze=Ae=[Ae,Ve]:(r=ze,ze=e);ze!==e;)Oe.push(ze),ze=r,124===a.charCodeAt(r)?(Ae="|",r++):(Ae=e,0===A&&z(so)),Ae!==e&&(Ve=_u())!==e?ze=Ae=[Ae,Ve]:(r=ze,ze=e);Oe!==e?le=ge=[ge,Oe]:(r=le,le=e)}else r=le,le=e;le===e&&(le=null),le!==e?(41===a.charCodeAt(r)?(ge=We,r++):(ge=e,0===A&&z(Ye)),ge!==e?B=Y=[Y,le,ge]:(r=B,B=e)):(r=B,B=e)}else r=B,B=e;return B}())!==e?_=N=[N,R]:(r=_,_=e),_===e&&(_=r,40===a.charCodeAt(r)?(N=H,r++):(N=e,0===A&&z(ee)),N!==e&&(R=ip())!==e?(41===a.charCodeAt(r)?(I=We,r++):(I=e,0===A&&z(Ye)),I!==e?_=N=R:(r=_,_=e)):(r=_,_=e)))),A--,_===e&&(N=e,0===A&&z(Ol)),(x=_)!==e?((C=function(){var _,N,R,I,B,Y,le,ge,Oe;return A++,42===a.charCodeAt(r)?(_=mt,r++):(_=e,0===A&&z(ht)),_===e&&(63===a.charCodeAt(r)?(_="?",r++):(_=e,0===A&&z(kn)),_===e&&(43===a.charCodeAt(r)?(_=Br,r++):(_=e,0===A&&z(fn)),_===e&&(_=r,123===a.charCodeAt(r)?(N=ke,r++):(N=e,0===A&&z(De)),N!==e?(R=r,(I=hc())!==e?(B=r,44===a.charCodeAt(r)?(Y=$t,r++):(Y=e,0===A&&z(er)),Y!==e?(125===a.charCodeAt(r)?(le=He,r++):(le=e,0===A&&z($e)),le===e&&(le=r,(ge=hc())!==e?(125===a.charCodeAt(r)?(Oe=He,r++):(Oe=e,0===A&&z($e)),Oe!==e?le=ge=[ge,Oe]:(r=le,le=e)):(r=le,le=e)),le!==e?B=Y=[Y,le]:(r=B,B=e)):(r=B,B=e),B===e&&(125===a.charCodeAt(r)?(B=He,r++):(B=e,0===A&&z($e))),B!==e?R=I=[I,B]:(r=R,R=e)):(r=R,R=e),R===e&&(R=r,44===a.charCodeAt(r)?(I=$t,r++):(I=e,0===A&&z(er)),I!==e&&(B=hc())!==e?(125===a.charCodeAt(r)?(Y=He,r++):(Y=e,0===A&&z($e)),Y!==e?R=I=[I,B,Y]:(r=R,R=e)):(r=R,R=e)),R!==e?_=N=[N,R]:(r=_,_=e)):(r=_,_=e)))),A--,_===e&&(N=e,0===A&&z(Il)),_}())===e&&(C=null),C!==e?s=x=function(s,x){if(s.token&&"path"!=s.token&&""==x)return s;if(s.token&&s.token!=C&&""!=x){var C={token:"path",kind:"element"};return C.value=s,C.modifier=x,C}return s.modifier=x,s}(x,C):(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(Tl)),s}function cc(){var s,x,C;return A++,(s=op())===e&&(s=r,94===a.charCodeAt(r)?(x="^",r++):(x=e,0===A&&z(ao)),x!==e&&(C=op())!==e?s=x=function(s){var x={token:"path",kind:"inversePath"};return x.value=s,x}(C):(r=s,s=e)),A--,s===e&&(x=e,0===A&&z(Nl)),s}function _u(){var s,x,C;return A++,(s=gr())===e&&(97===a.charCodeAt(r)?(s="a",r++):(s=e,0===A&&z(oo)),s===e&&(s=r,94===a.charCodeAt(r)?(x="^",r++):(x=e,0===A&&z(ao)),x!==e?((C=gr())===e&&(97===a.charCodeAt(r)?(C="a",r++):(C=e,0===A&&z(oo))),C!==e?s=x=[x,C]:(r=s,s=e)):(r=s,s=e))),A--,s===e&&(x=e,0===A&&z(Rl)),s}function hc(){var s;return A++,s=ls(),A--,s===e&&0===A&&z(Wo),s}function sp(){var s,x;return A++,s=r,(x=function(){var C,_,N,R,I,B,Y,le,ge;for(A++,C=r,_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if(40===a.charCodeAt(r)?(N=H,r++):(N=e,0===A&&z(ee)),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e){if(I=[],(B=pc())!==e)for(;B!==e;)I.push(B),B=pc();else I=e;if(I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(41===a.charCodeAt(r)?(Y=We,r++):(Y=e,0===A&&z(Ye)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e?C=_=I:(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e}else r=C,C=e}else r=C,C=e;else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(Ff)),C}())!==e&&(x=function(s){for(var x=[],C=[],_=null,N=0;N<s.length;N++){Gr++;var R=null;null==s[N].chainSubject&&null==s[N].triplesContext?R=s[N]:(R=s[N].chainSubject,x=x.concat(s[N].triplesContext)),_={subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:R},0==N&&C.push(_.subject),x.push(_),_=N===s.length-1?{subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Gr+1)}},x.push(_)}return{token:"triplesnodecollection",triplesContext:x,chainSubject:C}}(x)),(s=x)===e&&(s=function(){var C,_,N,R,I,B,Y,le;for(A++,C=r,_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if(91===a.charCodeAt(r)?(N="[",r++):(N=e,0===A&&z(qo)),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if((I=np())!==e)if(93===a.charCodeAt(r)?(B="]",r++):(B=e,0===A&&z(Yn)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e?(_=function(s){for(var x={token:"blank",value:"_:"+ ++Gr},C=[],_=0;_<s.pairs.length;_++){var N=s.pairs[_],R={};R.subject=x,R.predicate=N[0],null!=N[1].length&&(N[1]=N[1][0]),R.object=N[1],C.push(R)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:s.triplesContext.concat(C),chainSubject:x}}(I),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(Dl)),C}()),A--,s===e&&(x=e,0===A&&z(jl)),s}function ap(){var s,x;return A++,s=r,(x=function(){var C,_,N,R,I,B,Y,le,ge;for(A++,C=r,_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if(40===a.charCodeAt(r)?(N=H,r++):(N=e,0===A&&z(ee)),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e){if(I=[],(B=dc())!==e)for(;B!==e;)I.push(B),B=dc();else I=e;if(I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(41===a.charCodeAt(r)?(Y=We,r++):(Y=e,0===A&&z(Ye)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e?C=_=I:(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e}else r=C,C=e}else r=C,C=e;else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(Cn)),C}())!==e&&(x=function(s){for(var x=[],C=[],_=null,N=0;N<s.length;N++){Gr++;var R=null;null==s[N].chainSubject&&null==s[N].triplesContext?R=s[N]:(R=s[N].chainSubject,x=x.concat(R.triplesContext)),_={subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:R},0==N&&C.push(_.subject),x.push(_),_=N===s.length-1?{subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Gr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Gr+1)}},x.push(_)}return{token:"triplesnodecollection",triplesContext:x,chainSubject:C}}(x)),(s=x)===e&&(s=function(){var C,_,N,R,I,B,Y,le,ge;for(A++,C=r,_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if(91===a.charCodeAt(r)?(N="[",r++):(N=e,0===A&&z(qo)),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if((I=sc())!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(93===a.charCodeAt(r)?(Y="]",r++):(Y=e,0===A&&z(Yn)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e?(_=function(s){for(var x={token:"blank",value:"_:"+ ++Gr},C=[],_=0;_<s.pairs.length;_++){var N=s.pairs[_],R={};R.subject=x,R.predicate=N[0],null!=N[1].length&&(N[1]=N[1][0]),R.object=N[1],C.push(R)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:s.triplesContext.concat(C),chainSubject:x}}(I),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(fo)),C}()),A--,s===e&&(x=e,0===A&&z(Af)),s}function pc(){var s,x,C,_,N,R;for(A++,r,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=Cu())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?x=C=[C,_,N]:(r=x,x=e)}else r=x,x=e;else r=x,x=e;if(x===e){for(x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=sp())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?x=C=[C,_,N]:(r=x,x=e)}else r=x,x=e;else r=x,x=e}return x!==e&&(x=ki(x)),A--,(s=x)===e&&(x=e,0===A&&z(wi)),s}function dc(){var s,x,C,_,N,R;for(A++,r,x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=Cu())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?x=C=[C,_,N]:(r=x,x=e)}else r=x,x=e;else r=x,x=e;if(x===e){for(x=r,C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=ap())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?x=C=[C,_,N]:(r=x,x=e)}else r=x,x=e;else r=x,x=e}return x!==e&&(x=ki(x)),A--,(s=x)===e&&(x=e,0===A&&z(Ef)),s}function Cu(){var s,x,C,_,N,R,I;return A++,(s=vr())===e&&(A++,(x=gr())===e&&(x=Au())===e&&(x=Fu())===e&&(x=Eu())===e&&(A++,C=r,A++,N=r,"_:"===a.substr(r,2)?(R="_:",r+=2):(R=e,0===A&&z(Nd)),R!==e&&(I=cp())!==e?N=R=I:(r=N,N=e),A--,N===e&&(R=e,0===A&&z(Td)),(_=N)!==e&&(_=function(s){return{token:"blank",value:s}}(_)),(C=_)===e&&(C=r,(_=function(){var N,R,I,B;if(A++,N=r,91===a.charCodeAt(r)?(R="[",r++):(R=e,0===A&&z(qo)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(93===a.charCodeAt(r)?(B="]",r++):(B=e,0===A&&z(Yn)),B!==e?N=R=[R,I,B]:(r=N,N=e)):(r=N,N=e)}else r=N,N=e;return A--,N===e&&(R=e,0===A&&z(_v)),N}())!==e&&(_={token:"blank",value:"_:"+ ++Gr}),C=_),A--,C===e&&(_=e,0===A&&z(wd)),(x=C)===e)&&(x=ai()),A--,x===e&&0===A&&z(xr),s=x),A--,s===e&&0===A&&z(Pl),s}function as(){var s;return A++,(s=vr())===e&&(s=gr()),A--,s===e&&0===A&&z(Tf),s}function vr(){var s,x,C,_,N,R,I,B;for(A++,s=r,x=[],C=Q();C!==e;)x.push(C),C=Q();if(x!==e)if(A++,R=r,63===a.charCodeAt(r)?(I="?",r++):(I=e,0===A&&z(kn)),I!==e&&(B=fp())!==e?R=I=B:(r=R,R=e),A--,R===e&&(I=e,0===A&&z(Id)),(C=R)===e&&(C=function(){var R,I,B;return A++,R=r,36===a.charCodeAt(r)?(I="$",r++):(I=e,0===A&&z(ih)),I!==e&&(B=fp())!==e?R=I=B:(r=R,R=e),A--,R===e&&(I=e,0===A&&z(Od)),R}()),C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();_!==e?s=x=function(s){var x={token:"var"};return x.value=s,x}(C):(r=s,s=e)}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Nf)),s}function Lt(){var s;return A++,s=function(){var x,C,_,N,R,I,B,Y;if(A++,x=r,(C=vc())!==e){for(_=[],N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if("||"===a.substr(r,2)?(I="||",r+=2):(I=e,0===A&&z(Ql)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=vc())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;for(;N!==e;){for(_.push(N),N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if("||"===a.substr(r,2)?(I="||",r+=2):(I=e,0===A&&z(Ql)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=vc())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e}_!==e?(C=function(s,x){if(0===x.length)return s;for(var C={token:"expression",expressionType:"conditionalor"},_=[s],N=0;N<x.length;N++)_.push(x[N][3]);return C.operands=_,C}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(If)),x}(),A--,s===e&&0===A&&z(Bl),s}function vc(){var s,x,C,_,N,R,I,B;if(A++,s=r,(x=gc())!==e){for(C=[],_=r,N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if("&&"===a.substr(r,2)?(R="&&",r+=2):(R=e,0===A&&z(Hl)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=gc())!==e?_=N=[N,R,I,B]:(r=_,_=e)}else r=_,_=e;else r=_,_=e;for(;_!==e;){for(C.push(_),_=r,N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if("&&"===a.substr(r,2)?(R="&&",r+=2):(R=e,0===A&&z(Hl)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=gc())!==e?_=N=[N,R,I,B]:(r=_,_=e)}else r=_,_=e;else r=_,_=e}C!==e?s=x=function(s,x){if(0===x.length)return s;for(var C={token:"expression",expressionType:"conditionaland"},_=[s],N=0;N<x.length;N++)_.push(x[N][3]);return C.operands=_,C}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Gl)),s}function gc(){var s;return A++,s=function(){var x,C,_,N,R,I,B,Y,le,ge,Oe,ze,Ae;if(A++,x=r,(C=Ur())!==e){for(_=[],N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(61===a.charCodeAt(r)?(I="=",r++):(I=e,0===A&&z(Zn)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if("!="===a.substr(r,2)?(I="!=",r+=2):(I=e,0===A&&z(Kr)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(60===a.charCodeAt(r)?(I="<",r++):(I=e,0===A&&z(oa)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(62===a.charCodeAt(r)?(I=">",r++):(I=e,0===A&&z(Jo)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if("<="===a.substr(r,2)?(I="<=",r+=2):(I=e,0===A&&z(sa)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(">="===a.substr(r,2)?(I=">=",r+=2):(I=e,0===A&&z(ei)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(73===a.charCodeAt(r)?(I="I",r++):(I=e,0===A&&z(Ci)),I===e&&(105===a.charCodeAt(r)?(I="i",r++):(I=e,0===A&&z(Vo))),I!==e)if(78===a.charCodeAt(r)?(B="N",r++):(B=e,0===A&&z(ti)),B===e&&(110===a.charCodeAt(r)?(B="n",r++):(B=e,0===A&&z(ri))),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e&&(le=wa())!==e?N=R=[R,I,B,Y,le]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(78===a.charCodeAt(r)?(I="N",r++):(I=e,0===A&&z(ti)),I===e&&(110===a.charCodeAt(r)?(I="n",r++):(I=e,0===A&&z(ri))),I!==e)if(79===a.charCodeAt(r)?(B="O",r++):(B=e,0===A&&z(Wl)),B===e&&(111===a.charCodeAt(r)?(B="o",r++):(B=e,0===A&&z(Fi))),B!==e)if(84===a.charCodeAt(r)?(Y="T",r++):(Y=e,0===A&&z(la)),Y===e&&(116===a.charCodeAt(r)?(Y="t",r++):(Y=e,0===A&&z(Ko))),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e)if(73===a.charCodeAt(r)?(ge="I",r++):(ge=e,0===A&&z(Ci)),ge===e&&(105===a.charCodeAt(r)?(ge="i",r++):(ge=e,0===A&&z(Vo))),ge!==e)if(78===a.charCodeAt(r)?(Oe="N",r++):(Oe=e,0===A&&z(ti)),Oe===e&&(110===a.charCodeAt(r)?(Oe="n",r++):(Oe=e,0===A&&z(ri))),Oe!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();ze!==e&&(Ae=wa())!==e?N=R=[R,I,B,Y,le,ge,Oe,ze,Ae]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;else r=N,N=e}else r=N,N=e;else r=N,N=e;else r=N,N=e;else r=N,N=e}}}}}}}for(;N!==e;){for(_.push(N),N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(61===a.charCodeAt(r)?(I="=",r++):(I=e,0===A&&z(Zn)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if("!="===a.substr(r,2)?(I="!=",r+=2):(I=e,0===A&&z(Kr)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(60===a.charCodeAt(r)?(I="<",r++):(I=e,0===A&&z(oa)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(62===a.charCodeAt(r)?(I=">",r++):(I=e,0===A&&z(Jo)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if("<="===a.substr(r,2)?(I="<=",r+=2):(I=e,0===A&&z(sa)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(">="===a.substr(r,2)?(I=">=",r+=2):(I=e,0===A&&z(ei)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Ur())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(73===a.charCodeAt(r)?(I="I",r++):(I=e,0===A&&z(Ci)),I===e&&(105===a.charCodeAt(r)?(I="i",r++):(I=e,0===A&&z(Vo))),I!==e)if(78===a.charCodeAt(r)?(B="N",r++):(B=e,0===A&&z(ti)),B===e&&(110===a.charCodeAt(r)?(B="n",r++):(B=e,0===A&&z(ri))),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e&&(le=wa())!==e?N=R=[R,I,B,Y,le]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(78===a.charCodeAt(r)?(I="N",r++):(I=e,0===A&&z(ti)),I===e&&(110===a.charCodeAt(r)?(I="n",r++):(I=e,0===A&&z(ri))),I!==e)if(79===a.charCodeAt(r)?(B="O",r++):(B=e,0===A&&z(Wl)),B===e&&(111===a.charCodeAt(r)?(B="o",r++):(B=e,0===A&&z(Fi))),B!==e)if(84===a.charCodeAt(r)?(Y="T",r++):(Y=e,0===A&&z(la)),Y===e&&(116===a.charCodeAt(r)?(Y="t",r++):(Y=e,0===A&&z(Ko))),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();if(le!==e)if(73===a.charCodeAt(r)?(ge="I",r++):(ge=e,0===A&&z(Ci)),ge===e&&(105===a.charCodeAt(r)?(ge="i",r++):(ge=e,0===A&&z(Vo))),ge!==e)if(78===a.charCodeAt(r)?(Oe="N",r++):(Oe=e,0===A&&z(ti)),Oe===e&&(110===a.charCodeAt(r)?(Oe="n",r++):(Oe=e,0===A&&z(ri))),Oe!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();ze!==e&&(Ae=wa())!==e?N=R=[R,I,B,Y,le,ge,Oe,ze,Ae]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;else r=N,N=e}else r=N,N=e;else r=N,N=e;else r=N,N=e;else r=N,N=e}}}}}}}}_!==e?(C=function(s,x){if(0===x.length)return s;if("i"===x[0][1]||"I"===x[0][1]||"n"===x[0][1]||"N"===x[0][1]){var C={};if("i"===x[0][1]||"I"===x[0][1]){var _="=";C.expressionType="conditionalor"}else _="!=",C.expressionType="conditionaland";for(var N=s,R=[],I=0;I<x[0].length;I++)if("args"===x[0][I].token){R=x[0][I].value;break}C.token="expression",C.operands=[];for(var B=0;B<R.length;B++){var Y={token:"expression",expressionType:"relationalexpression"};Y.operator=_,Y.op1=N,Y.op2=R[B],C.operands.push(Y)}return C}return(C={expressionType:"relationalexpression"}).operator=x[0][1],C.op1=s,C.op2=x[0][3],C.token="expression",C}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(Sn)),x}(),A--,s===e&&0===A&&z(Rf),s}function Ur(){var s;return A++,s=function(){var x,C,_,N,R,I,B,Y,le,ge;if(A++,x=r,(C=ka())!==e){for(_=[],N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(43===a.charCodeAt(r)?(I=Br,r++):(I=e,0===A&&z(fn)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=ka())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(45===a.charCodeAt(r)?(I=Qr,r++):(I=e,0===A&&z(Zr)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=ka())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e)if(N=r,(R=_a())===e&&(R=_a()),R!==e){for(I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(42===a.charCodeAt(r)?(Y=mt,r++):(Y=e,0===A&&z(ht)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e&&(ge=si())!==e?I=B=[B,Y,le,ge]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(47===a.charCodeAt(r)?(Y="/",r++):(Y=e,0===A&&z(wn)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e&&(ge=si())!==e?I=B=[B,Y,le,ge]:(r=I,I=e)}else r=I,I=e;else r=I,I=e}I===e&&(I=null),I!==e?N=R=[R,I]:(r=N,N=e)}else r=N,N=e}for(;N!==e;){for(_.push(N),N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(43===a.charCodeAt(r)?(I=Br,r++):(I=e,0===A&&z(fn)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=ka())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e){for(N=r,R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if(45===a.charCodeAt(r)?(I=Qr,r++):(I=e,0===A&&z(Zr)),I!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=ka())!==e?N=R=[R,I,B,Y]:(r=N,N=e)}else r=N,N=e;else r=N,N=e;if(N===e)if(N=r,(R=_a())===e&&(R=_a()),R!==e){for(I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(42===a.charCodeAt(r)?(Y=mt,r++):(Y=e,0===A&&z(ht)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e&&(ge=si())!==e?I=B=[B,Y,le,ge]:(r=I,I=e)}else r=I,I=e;else r=I,I=e;if(I===e){for(I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();if(B!==e)if(47===a.charCodeAt(r)?(Y="/",r++):(Y=e,0===A&&z(wn)),Y!==e){for(le=[],ge=Q();ge!==e;)le.push(ge),ge=Q();le!==e&&(ge=si())!==e?I=B=[B,Y,le,ge]:(r=I,I=e)}else r=I,I=e;else r=I,I=e}I===e&&(I=null),I!==e?N=R=[R,I]:(r=N,N=e)}else r=N,N=e}}_!==e?(C=function(s,x){if(0===x.length)return s;var C={token:"expression",expressionType:"additiveexpression"};C.summand=s,C.summands=[];for(var _=0;_<x.length;_++){var N=x[_],R={};if(4==N.length&&"string"==typeof N[1])R.operator=N[1],R.expression=N[3];else{var I={},B=R[0],Y=(R[1][1],R[1][3]);B.value<0?(R.operator="-",B.value=-B.value):R.operator="+",I.token="expression",I.expressionType="multiplicativeexpression",I.operator=B,I.factors=[{operator:null,expression:Y}],R.expression=I}C.summands.push(R)}return C}(C,_),x=C):(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(Jl)),x}(),A--,s===e&&0===A&&z(jf),s}function ka(){var s,x,C,_,N,R,I,B;if(A++,s=r,(x=si())!==e){for(C=[],_=r,N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(42===a.charCodeAt(r)?(R=mt,r++):(R=e,0===A&&z(ht)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=si())!==e?_=N=[N,R,I,B]:(r=_,_=e)}else r=_,_=e;else r=_,_=e;if(_===e){for(_=r,N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(47===a.charCodeAt(r)?(R="/",r++):(R=e,0===A&&z(wn)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=si())!==e?_=N=[N,R,I,B]:(r=_,_=e)}else r=_,_=e;else r=_,_=e}for(;_!==e;){for(C.push(_),_=r,N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(42===a.charCodeAt(r)?(R=mt,r++):(R=e,0===A&&z(ht)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=si())!==e?_=N=[N,R,I,B]:(r=_,_=e)}else r=_,_=e;else r=_,_=e;if(_===e){for(_=r,N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(47===a.charCodeAt(r)?(R="/",r++):(R=e,0===A&&z(wn)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e&&(B=si())!==e?_=N=[N,R,I,B]:(r=_,_=e)}else r=_,_=e;else r=_,_=e}}C!==e?s=x=function(s,x){if(0===x.length)return s;var C={token:"expression",expressionType:"multiplicativeexpression"};C.factor=s,C.factors=[];for(var _=0;_<x.length;_++){var N=x[_],R={};R.operator=N[1],R.expression=N[3],C.factors.push(R)}return C}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(vo)),s}function si(){var s,x,C,_;if(A++,s=r,33===a.charCodeAt(r)?(x="!",r++):(x=e,0===A&&z(_n)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e&&(_=Su())!==e?s=x=function(s){var x={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"};return x.expression=s,x}(_):(r=s,s=e)}else r=s,s=e;if(s===e){if(s=r,43===a.charCodeAt(r)?(x=Br,r++):(x=e,0===A&&z(fn)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e&&(_=Su())!==e?s=x=function(s){var x={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"};return x.expression=s,x}(_):(r=s,s=e)}else r=s,s=e;if(s===e){if(s=r,45===a.charCodeAt(r)?(x=Qr,r++):(x=e,0===A&&z(Zr)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e&&(_=Su())!==e?s=x=function(s){var x={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"};return x.expression=s,x}(_):(r=s,s=e)}else r=s,s=e;s===e&&(s=Su())}}return A--,s===e&&(x=e,0===A&&z(Df)),s}function Su(){var s,x;return A++,(s=yc())===e&&(s=mc())===e&&(s=function(){var C,_,N,R;if(A++,C=r,(_=gr())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?((R=ep())===e&&(R=null),R!==e?(_=function(s,x){var C={token:"expression",expressionType:"irireforfunction"};return C.iriref=s,C.args=null!=x?x.value:x,C}(_,R),C=_):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z($p)),C}())===e&&(s=r,(x=Au())!==e&&(x=function(s){var x={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"};return x.value=s,x}(x)),(s=x)===e&&(s=r,(x=Fu())!==e&&(x=function(s){var x={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"};return x.value=s,x}(x)),(s=x)===e&&(s=r,(x=Eu())!==e&&(x=function(s){var x={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"};return x.value=s,x}(x)),(s=x)===e&&(s=function(){var C,_,N,R,I,B,Y,le,ge,Oe,ze,Ae,Ve,rt,Me,et,nt,lt;if(A++,C=r,"COUNT"===a.substr(r,5)?(_="COUNT",r+=5):(_=e,0===A&&z(Rp)),_===e&&("count"===a.substr(r,5)?(_="count",r+=5):(_=e,0===A&&z(jp))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(40===a.charCodeAt(r)?(R=H,r++):(R=e,0===A&&z(ee)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(a.substr(r,8)===be?(B=be,r+=8):(B=e,0===A&&z(de)),B===e&&(a.substr(r,8)===ye?(B=ye,r+=8):(B=e,0===A&&z(Fe))),B===e&&(B=null),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if(42===a.charCodeAt(r)?(le=mt,r++):(le=e,0===A&&z(ht)),le===e&&(le=Lt()),le!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if(41===a.charCodeAt(r)?(Oe=We,r++):(Oe=e,0===A&&z(Ye)),Oe!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();ze!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"count"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(B,le),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e){if(C=r,a.substr(r,12)===Dc?(_=Dc,r+=12):(_=e,0===A&&z(Mp)),_===e&&(a.substr(r,12)===Mc?(_=Mc,r+=12):(_=e,0===A&&z(Pp))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(40===a.charCodeAt(r)?(R=H,r++):(R=e,0===A&&z(ee)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(a.substr(r,8)===be?(B=be,r+=8):(B=e,0===A&&z(de)),B===e&&(a.substr(r,8)===ye?(B=ye,r+=8):(B=e,0===A&&z(Fe))),B===e&&(B=null),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=Lt())!==e){if(ge=r,59===a.charCodeAt(r)?(Oe=sn,r++):(Oe=e,0===A&&z(Dr)),Oe!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();if(ze!==e)if(a.substr(r,9)===Pc?(Ae=Pc,r+=9):(Ae=e,0===A&&z(Bp)),Ae!==e){for(Ve=[],rt=Q();rt!==e;)Ve.push(rt),rt=Q();if(Ve!==e)if(61===a.charCodeAt(r)?(rt="=",r++):(rt=e,0===A&&z(Zn)),rt!==e){for(Me=[],et=Q();et!==e;)Me.push(et),et=Q();if(Me!==e)if((et=lp())!==e){for(nt=[],lt=Q();lt!==e;)nt.push(lt),lt=Q();nt!==e?ge=Oe=[Oe,ze,Ae,Ve,rt,Me,et,nt]:(r=ge,ge=e)}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;else r=ge,ge=e}else r=ge,ge=e;if(ge===e&&(ge=null),ge!==e)if(41===a.charCodeAt(r)?(Oe=We,r++):(Oe=e,0===A&&z(Ye)),Oe!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();ze!==e?(_=function(s,x,C){var _={token:"expression",expressionType:"aggregate",aggregateType:"group_concat"};return _.distinct=""!=s&&null!=s?"DISTINCT":s,_.expression=x,_.separator=C,_}(B,le,ge),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e){if(C=r,"SUM"===a.substr(r,3)?(_="SUM",r+=3):(_=e,0===A&&z(Up)),_===e&&("sum"===a.substr(r,3)?(_="sum",r+=3):(_=e,0===A&&z(Gp))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(40===a.charCodeAt(r)?(R=H,r++):(R=e,0===A&&z(ee)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(a.substr(r,8)===be?(B=be,r+=8):(B=e,0===A&&z(de)),B===e&&(a.substr(r,8)===ye?(B=ye,r+=8):(B=e,0===A&&z(Fe))),B===e&&(B=null),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=Lt())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if(41===a.charCodeAt(r)?(Oe=We,r++):(Oe=e,0===A&&z(Ye)),Oe!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();ze!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"sum"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(B,le),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e){if(C=r,"MIN"===a.substr(r,3)?(_="MIN",r+=3):(_=e,0===A&&z(Wp)),_===e&&("min"===a.substr(r,3)?(_="min",r+=3):(_=e,0===A&&z(zp))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(40===a.charCodeAt(r)?(R=H,r++):(R=e,0===A&&z(ee)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(a.substr(r,8)===be?(B=be,r+=8):(B=e,0===A&&z(de)),B===e&&(a.substr(r,8)===ye?(B=ye,r+=8):(B=e,0===A&&z(Fe))),B===e&&(B=null),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=Lt())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if(41===a.charCodeAt(r)?(Oe=We,r++):(Oe=e,0===A&&z(Ye)),Oe!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();ze!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"min"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(B,le),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e){if(C=r,"MAX"===a.substr(r,3)?(_="MAX",r+=3):(_=e,0===A&&z(Xp)),_===e&&("max"===a.substr(r,3)?(_="max",r+=3):(_=e,0===A&&z(Jp))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(40===a.charCodeAt(r)?(R=H,r++):(R=e,0===A&&z(ee)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(a.substr(r,8)===be?(B=be,r+=8):(B=e,0===A&&z(de)),B===e&&(a.substr(r,8)===ye?(B=ye,r+=8):(B=e,0===A&&z(Fe))),B===e&&(B=null),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=Lt())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if(41===a.charCodeAt(r)?(Oe=We,r++):(Oe=e,0===A&&z(Ye)),Oe!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();ze!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"max"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(B,le),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;if(C===e)if(C=r,"AVG"===a.substr(r,3)?(_="AVG",r+=3):(_=e,0===A&&z(Kp)),_===e&&("avg"===a.substr(r,3)?(_="avg",r+=3):(_=e,0===A&&z(Yp))),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if(40===a.charCodeAt(r)?(R=H,r++):(R=e,0===A&&z(ee)),R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(a.substr(r,8)===be?(B=be,r+=8):(B=e,0===A&&z(de)),B===e&&(a.substr(r,8)===ye?(B=ye,r+=8):(B=e,0===A&&z(Fe))),B===e&&(B=null),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=Lt())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if(41===a.charCodeAt(r)?(Oe=We,r++):(Oe=e,0===A&&z(Ye)),Oe!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();ze!==e?(_=function(s,x){var C={token:"expression",expressionType:"aggregate",aggregateType:"avg"};return C.distinct=""!=s&&null!=s?"DISTINCT":s,C.expression=x,C}(B,le),C=_):(r=C,C=e)}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e;else r=C,C=e}else r=C,C=e}}}}return A--,C===e&&(_=e,0===A&&z(Op)),C}())===e&&(s=r,(x=vr())!==e&&(x=function(s){var x={token:"expression",expressionType:"atomic",primaryexpression:"var"};return x.value=s,x}(x)),s=x)))),A--,s===e&&(x=e,0===A&&z(Bf)),s}function yc(){var s,x,C,_,N,R;if(A++,s=r,40===a.charCodeAt(r)?(x=H,r++):(x=e,0===A&&z(ee)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if((_=Lt())!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();N!==e?(41===a.charCodeAt(r)?(R=We,r++):(R=e,0===A&&z(Ye)),R!==e?s=x=_:(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Yl)),s}function mc(){var s,x,C,_,N,R,I,B,Y,le,ge,Oe,ze,Ae,Ve,rt;if(A++,s=r,"STR"===a.substr(r,3)?(x="STR",r+=3):(x=e,0===A&&z(eu)),x===e&&("str"===a.substr(r,3)?(x="str",r+=3):(x=e,0===A&&z(tu))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===a.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=Lt())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===a.charCodeAt(r)?(B=We,r++):(B=e,0===A&&z(Ye)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"str"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"LANG"===a.substr(r,4)?(x="LANG",r+=4):(x=e,0===A&&z(Hf)),x===e&&("lang"===a.substr(r,4)?(x="lang",r+=4):(x=e,0===A&&z(Qt))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===a.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=Lt())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===a.charCodeAt(r)?(B=We,r++):(B=e,0===A&&z(Ye)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"lang"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,a.substr(r,11)===Zo?(x=Zo,r+=11):(x=e,0===A&&z(yo)),x===e&&(a.substr(r,11)===Or?(x=Or,r+=11):(x=e,0===A&&z($o))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===a.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=Lt())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(44===a.charCodeAt(r)?(B=$t,r++):(B=e,0===A&&z(er)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=Lt())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();ge!==e?(41===a.charCodeAt(r)?(Oe=We,r++):(Oe=e,0===A&&z(Ye)),Oe!==e?s=x=function(s,x){var C={token:"expression",expressionType:"builtincall",builtincall:"langmatches"};return C.args=[s,x],C}(R,le):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,a.substr(r,8)===ha?(x=ha,r+=8):(x=e,0===A&&z(iu)),x===e&&(a.substr(r,8)===pa?(x=pa,r+=8):(x=e,0===A&&z(ou))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===a.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=Lt())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===a.charCodeAt(r)?(B=We,r++):(B=e,0===A&&z(Ye)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"datatype"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"BOUND"===a.substr(r,5)?(x="BOUND",r+=5):(x=e,0===A&&z(da)),x===e&&("bound"===a.substr(r,5)?(x="bound",r+=5):(x=e,0===A&&z(Pt))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===a.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=vr())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===a.charCodeAt(r)?(B=We,r++):(B=e,0===A&&z(Ye)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"bound"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"IRI"===a.substr(r,3)?(x="IRI",r+=3):(x=e,0===A&&z(Ei)),x===e&&("iri"===a.substr(r,3)?(x="iri",r+=3):(x=e,0===A&&z(es))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===a.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=Lt())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===a.charCodeAt(r)?(B=We,r++):(B=e,0===A&&z(Ye)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"iri"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"URI"===a.substr(r,3)?(x="URI",r+=3):(x=e,0===A&&z(qf)),x===e&&("uri"===a.substr(r,3)?(x="uri",r+=3):(x=e,0===A&&z(Xf))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===a.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=Lt())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===a.charCodeAt(r)?(B=We,r++):(B=e,0===A&&z(Ye)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"uri"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,a.substr(r,5)===t?(x=t,r+=5):(x=e,0===A&&z(n)),x===e&&(a.substr(r,5)===c?(x=c,r+=5):(x=e,0===A&&z(l))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e){if(_=r,40===a.charCodeAt(r)?(N=H,r++):(N=e,0===A&&z(ee)),N!==e){for(R=[],I=Q();I!==e;)R.push(I),I=Q();if(R!==e)if((I=Lt())!==e){for(B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e?(41===a.charCodeAt(r)?(Y=We,r++):(Y=e,0===A&&z(Ye)),Y!==e?_=N=[N,R,I,B,Y]:(r=_,_=e)):(r=_,_=e)}else r=_,_=e;else r=_,_=e}else r=_,_=e;_===e&&(_=ai()),_!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"bnode"};return 5===s.length?x.args=[s[2]]:x.args=null,x}(_):(r=s,s=e)}else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,a.substr(r,8)===D?(x=D,r+=8):(x=e,0===A&&z(X)),x===e&&(a.substr(r,8)===Z?(x=Z,r+=8):(x=e,0===A&&z(re))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e&&(_=wa())!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"coalesce"};return x.args=s,x}(_):(r=s,s=e)}else r=s,s=e;if(s===e){if(s=r,"IF"===a.substr(r,2)?(x="IF",r+=2):(x=e,0===A&&z(Ee)),x===e&&("if"===a.substr(r,2)?(x="if",r+=2):(x=e,0===A&&z(Qe))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===a.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=Lt())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(44===a.charCodeAt(r)?(B=$t,r++):(B=e,0===A&&z(er)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=Lt())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();if(ge!==e)if(44===a.charCodeAt(r)?(Oe=$t,r++):(Oe=e,0===A&&z(er)),Oe!==e){for(ze=[],Ae=Q();Ae!==e;)ze.push(Ae),Ae=Q();if(ze!==e)if((Ae=Lt())!==e){for(Ve=[],rt=Q();rt!==e;)Ve.push(rt),rt=Q();Ve!==e?(41===a.charCodeAt(r)?(rt=We,r++):(rt=e,0===A&&z(Ye)),rt!==e?s=x=function(s,x,C){var _={token:"expression",expressionType:"builtincall",builtincall:"if"};return _.args=[s,x,C],_}(R,le,Ae):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,a.substr(r,9)===tt?(x=tt,r+=9):(x=e,0===A&&z(st)),x===e&&(a.substr(r,9)===ut?(x=ut,r+=9):(x=e,0===A&&z(dt)),x===e&&(a.substr(r,9)===ft?(x=ft,r+=9):(x=e,0===A&&z(yt)))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===a.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=Lt())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===a.charCodeAt(r)?(B=We,r++):(B=e,0===A&&z(Ye)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"isliteral"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,a.substr(r,7)===xt?(x=xt,r+=7):(x=e,0===A&&z(Et)),x===e&&(a.substr(r,7)===Bt?(x=Bt,r+=7):(x=e,0===A&&z(sr)),x===e&&(a.substr(r,7)===Ut?(x=Ut,r+=7):(x=e,0===A&&z(Fr)))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===a.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=Lt())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===a.charCodeAt(r)?(B=We,r++):(B=e,0===A&&z(Ye)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"isblank"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,a.substr(r,8)===Vt?(x=Vt,r+=8):(x=e,0===A&&z(kr)),x===e&&(a.substr(r,8)===ar?(x=ar,r+=8):(x=e,0===A&&z(tr))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===a.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=Lt())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if(44===a.charCodeAt(r)?(B=$t,r++):(B=e,0===A&&z(er)),B!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();if(Y!==e)if((le=Lt())!==e){for(ge=[],Oe=Q();Oe!==e;)ge.push(Oe),Oe=Q();ge!==e?(41===a.charCodeAt(r)?(Oe=We,r++):(Oe=e,0===A&&z(Ye)),Oe!==e?s=x=function(s,x){var C={token:"expression",expressionType:"builtincall",builtincall:"sameterm"};return C.args=[s,x],C}(R,le):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,"ISURI"===a.substr(r,5)?(x="ISURI",r+=5):(x=e,0===A&&z(_r)),x===e&&("isuri"===a.substr(r,5)?(x="isuri",r+=5):(x=e,0===A&&z(Tn)),x===e&&("isURI"===a.substr(r,5)?(x="isURI",r+=5):(x=e,0===A&&z($r)),x===e&&("ISIRI"===a.substr(r,5)?(x="ISIRI",r+=5):(x=e,0===A&&z(ga)),x===e&&("isiri"===a.substr(r,5)?(x="isiri",r+=5):(x=e,0===A&&z(oi)),x===e&&("isIRI"===a.substr(r,5)?(x="isIRI",r+=5):(x=e,0===A&&z(dr))))))),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();if(C!==e)if(40===a.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_!==e){for(N=[],R=Q();R!==e;)N.push(R),R=Q();if(N!==e)if((R=Lt())!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();I!==e?(41===a.charCodeAt(r)?(B=We,r++):(B=e,0===A&&z(Ye)),B!==e?s=x=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"isuri"};return x.args=[s],x}(R):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e;if(s===e){if(s=r,a.substr(r,7)===rs?(x=rs,r+=7):(x=e,0===A&&z(xp)),x===e&&(a.substr(r,7)===Sc?(x=Sc,r+=7):(x=e,0===A&&z(wp))),x!==e){if(C=[],Ac.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(Fc)),_!==e)for(;_!==e;)C.push(_),Ac.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(Fc));else C=e;if(C!==e){for(_=[],N=Q();N!==e;)_.push(N),N=Q();if(_!==e)if(40===a.charCodeAt(r)?(N=H,r++):(N=e,0===A&&z(ee)),N!==e){for(R=[],I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();for(B!==e&&(Y=Lt())!==e?(44===a.charCodeAt(r)?(le=$t,r++):(le=e,0===A&&z(er)),le!==e?I=B=[B,Y,le]:(r=I,I=e)):(r=I,I=e);I!==e;){for(R.push(I),I=r,B=[],Y=Q();Y!==e;)B.push(Y),Y=Q();B!==e&&(Y=Lt())!==e?(44===a.charCodeAt(r)?(le=$t,r++):(le=e,0===A&&z(er)),le!==e?I=B=[B,Y,le]:(r=I,I=e)):(r=I,I=e)}if(R!==e){for(I=[],B=Q();B!==e;)I.push(B),B=Q();if(I!==e)if((B=Lt())!==e){for(Y=[],le=Q();le!==e;)Y.push(le),le=Q();Y!==e?(41===a.charCodeAt(r)?(le=We,r++):(le=e,0===A&&z(Ye)),le!==e?s=x=function(s,x,C){var _={token:"expression",expressionType:"custom"};_.name=s.join("");for(var N=[],R=0;R<x.length;R++)N.push(x[R][1]);return N.push(C),_.args=N,_}(C,R,B):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;else r=s,s=e}else r=s,s=e}else r=s,s=e;else r=s,s=e}else r=s,s=e}else r=s,s=e;s===e&&(s=function(){var Me,et,nt,lt,Tt,at,It,jt,Ft,Cr,lr,hr,Sr,Ar,ur;if(A++,Me=r,"REGEX"===a.substr(r,5)?(et="REGEX",r+=5):(et=e,0===A&&z(Cp)),et===e&&("regex"===a.substr(r,5)?(et="regex",r+=5):(et=e,0===A&&z(Sp))),et!==e){for(nt=[],lt=Q();lt!==e;)nt.push(lt),lt=Q();if(nt!==e)if(40===a.charCodeAt(r)?(lt=H,r++):(lt=e,0===A&&z(ee)),lt!==e){for(Tt=[],at=Q();at!==e;)Tt.push(at),at=Q();if(Tt!==e)if((at=Lt())!==e){for(It=[],jt=Q();jt!==e;)It.push(jt),jt=Q();if(It!==e)if(44===a.charCodeAt(r)?(jt=$t,r++):(jt=e,0===A&&z(er)),jt!==e){for(Ft=[],Cr=Q();Cr!==e;)Ft.push(Cr),Cr=Q();if(Ft!==e)if((Cr=Lt())!==e){for(lr=[],hr=Q();hr!==e;)lr.push(hr),hr=Q();if(lr!==e){if(hr=r,44===a.charCodeAt(r)?(Sr=$t,r++):(Sr=e,0===A&&z(er)),Sr!==e){for(Ar=[],ur=Q();ur!==e;)Ar.push(ur),ur=Q();Ar!==e&&(ur=Lt())!==e?hr=Sr=[Sr,Ar,ur]:(r=hr,hr=e)}else r=hr,hr=e;if(hr===e&&(hr=null),hr!==e){for(Sr=[],Ar=Q();Ar!==e;)Sr.push(Ar),Ar=Q();Sr!==e?(41===a.charCodeAt(r)?(Ar=We,r++):(Ar=e,0===A&&z(Ye)),Ar!==e?(et=function(s,x,C){var _={token:"expression",expressionType:"regex"};return _.text=s,_.pattern=x,null!=C&&(_.flags=C[2]),_}(at,Cr,hr),Me=et):(r=Me,Me=e)):(r=Me,Me=e)}else r=Me,Me=e}else r=Me,Me=e}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;return A--,Me===e&&(et=e,0===A&&z(_p)),Me}())===e&&(s=function(){var Me,et,nt,lt;if(A++,Me=r,a.substr(r,6)===hu?(et=hu,r+=6):(et=e,0===A&&z(Nc)),et===e&&(a.substr(r,6)===pu?(et=pu,r+=6):(et=e,0===A&&z(Lc))),et!==e){for(nt=[],lt=Q();lt!==e;)nt.push(lt),lt=Q();nt!==e&&(lt=tn())!==e?(et=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"exists"};return x.args=[s],x}(lt),Me=et):(r=Me,Me=e)}else r=Me,Me=e;return A--,Me===e&&(et=e,0===A&&z(Fp)),Me}())===e&&(s=function(){var Me,et,nt,lt,Tt,at;if(A++,Me=r,"NOT"===a.substr(r,3)?(et="NOT",r+=3):(et=e,0===A&&z(Np)),et===e&&("not"===a.substr(r,3)?(et="not",r+=3):(et=e,0===A&&z(Lp))),et!==e){for(nt=[],lt=Q();lt!==e;)nt.push(lt),lt=Q();if(nt!==e)if(a.substr(r,6)===hu?(lt=hu,r+=6):(lt=e,0===A&&z(Nc)),lt===e&&(a.substr(r,6)===pu?(lt=pu,r+=6):(lt=e,0===A&&z(Lc))),lt!==e){for(Tt=[],at=Q();at!==e;)Tt.push(at),at=Q();Tt!==e&&(at=tn())!==e?(et=function(s){var x={token:"expression",expressionType:"builtincall",builtincall:"notexists"};return x.args=[s],x}(at),Me=et):(r=Me,Me=e)}else r=Me,Me=e;else r=Me,Me=e}else r=Me,Me=e;return A--,Me===e&&(et=e,0===A&&z(Tp)),Me}())}}}}}}}}}}}}}}return A--,s===e&&(x=e,0===A&&z(Zl)),s}function Au(){var s,x,C,_,N;return A++,s=r,(x=lp())!==e?((C=function(){var R,I,B,Y,le,ge,Oe,ze;if(A++,R=r,64===a.charCodeAt(r)?(I="@",r++):(I=e,0===A&&z(sh)),I!==e){if(B=[],ah.test(a.charAt(r))?(Y=a.charAt(r),r++):(Y=e,0===A&&z(lh)),Y!==e)for(;Y!==e;)B.push(Y),ah.test(a.charAt(r))?(Y=a.charAt(r),r++):(Y=e,0===A&&z(lh));else B=e;if(B!==e){if(Y=[],le=r,45===a.charCodeAt(r)?(ge=Qr,r++):(ge=e,0===A&&z(Zr)),ge!==e){if(Oe=[],vu.test(a.charAt(r))?(ze=a.charAt(r),r++):(ze=e,0===A&&z(gu)),ze!==e)for(;ze!==e;)Oe.push(ze),vu.test(a.charAt(r))?(ze=a.charAt(r),r++):(ze=e,0===A&&z(gu));else Oe=e;Oe!==e?le=ge=[ge,Oe]:(r=le,le=e)}else r=le,le=e;for(;le!==e;)if(Y.push(le),le=r,45===a.charCodeAt(r)?(ge=Qr,r++):(ge=e,0===A&&z(Zr)),ge!==e){if(Oe=[],vu.test(a.charAt(r))?(ze=a.charAt(r),r++):(ze=e,0===A&&z(gu)),ze!==e)for(;ze!==e;)Oe.push(ze),vu.test(a.charAt(r))?(ze=a.charAt(r),r++):(ze=e,0===A&&z(gu));else Oe=e;Oe!==e?le=ge=[ge,Oe]:(r=le,le=e)}else r=le,le=e;Y!==e?(I=function(s,x){return 0===x.length?("@"+s.join("")).toLowerCase():("@"+s.join("")+"-"+x[0][1].join("")).toLowerCase()}(B,Y),R=I):(r=R,R=e)}else r=R,R=e}else r=R,R=e;return A--,R===e&&(I=e,0===A&&z(Rd)),R}())===e&&(C=r,"^^"===a.substr(r,2)?(_="^^",r+=2):(_=e,0===A&&z(rd)),_!==e&&(N=gr())!==e?C=_=[_,N]:(r=C,C=e)),C===e&&(C=null),C!==e?s=x=function(s,x){return"string"==typeof x&&x.length>0?{token:"literal",value:s.value,lang:x.slice(1),type:null}:null!=x&&"object"==typeof x?(x.shift(),{token:"literal",value:s.value,lang:null,type:x[0]}):{token:"literal",value:s.value,lang:null,type:null}}(x,C):(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(td)),s}function Fu(){var s,x;return A++,A++,(x=wc())===e&&(x=xc())===e&&(x=ls()),A--,x===e&&0===A&&z(od),(s=x)===e&&(s=function(){var x,C,_,N;return A++,A++,C=r,43===a.charCodeAt(r)?(_=Br,r++):(_=e,0===A&&z(fn)),_!==e&&(N=wc())!==e?C=_=uh(N):(r=C,C=e),A--,C===e&&(_=e,0===A&&z(Jd)),(x=C)===e&&(x=function(){var C,_,N;return A++,C=r,43===a.charCodeAt(r)?(_=Br,r++):(_=e,0===A&&z(fn)),_!==e&&(N=xc())!==e?C=_=uh(N):(r=C,C=e),A--,C===e&&(_=e,0===A&&z(Xd)),C}())===e&&(x=function(){var C,_,N;return A++,C=r,43===a.charCodeAt(r)?(_=Br,r++):(_=e,0===A&&z(fn)),_!==e&&(N=ls())!==e?(_=function(s){return s.value="+"+s.value,s}(N),C=_):(r=C,C=e),A--,C===e&&(_=e,0===A&&z(zd)),C}()),A--,x===e&&0===A&&z(sd),x}())===e&&(s=_a()),A--,s===e&&0===A&&z(id),s}function _a(){var s,x,C,_;return A++,A++,x=r,45===a.charCodeAt(r)?(C=Qr,r++):(C=e,0===A&&z(Zr)),C!==e&&(_=wc())!==e?x=C=Jf(_):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(Yd)),(s=x)===e&&(s=function(){var x,C,_;return A++,x=r,45===a.charCodeAt(r)?(C=Qr,r++):(C=e,0===A&&z(Zr)),C!==e&&(_=xc())!==e?x=C=Jf(_):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(Kd)),x}())===e&&(s=function(){var x,C,_;return A++,x=r,45===a.charCodeAt(r)?(C=Qr,r++):(C=e,0===A&&z(Zr)),C!==e&&(_=ls())!==e?x=C=Jf(_):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(Vd)),x}()),A--,s===e&&0===A&&z(ad),s}function Eu(){var s,x;return A++,s=r,"TRUE"===a.substr(r,4)?(x="TRUE",r+=4):(x=e,0===A&&z(ud)),x===e&&("true"===a.substr(r,4)?(x="true",r+=4):(x=e,0===A&&z(fd))),x!==e&&(x={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}),(s=x)===e&&(s=r,"FALSE"===a.substr(r,5)?(x="FALSE",r+=5):(x=e,0===A&&z(hd)),x===e&&("false"===a.substr(r,5)?(x="false",r+=5):(x=e,0===A&&z(pd))),x!==e&&(x={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}),s=x),A--,s===e&&(x=e,0===A&&z(ld)),s}function lp(){var s,x;return A++,s=r,(x=function(){var C,_,N,R;if(A++,C=r,a.substr(r,3)===mu?(_=mu,r+=3):(_=e,0===A&&z(gh)),_!==e){for(N=[],yh.test(a.charAt(r))?(R=a.charAt(r),r++):(R=e,0===A&&z(mh)),R===e&&(R=Ni());R!==e;)N.push(R),yh.test(a.charAt(r))?(R=a.charAt(r),r++):(R=e,0===A&&z(mh)),R===e&&(R=Ni());N!==e?(a.substr(r,3)===mu?(R=mu,r+=3):(R=e,0===A&&z(gh)),R!==e?C=_=yu(N):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(sv)),C}())!==e&&(x=du(x)),(s=x)===e&&(s=r,(x=function(){var C,_,N,R;if(A++,C=r,a.substr(r,3)===bu?(_=bu,r+=3):(_=e,0===A&&z(bh)),_!==e){for(N=[],xh.test(a.charAt(r))?(R=a.charAt(r),r++):(R=e,0===A&&z(wh)),R===e&&(R=Ni());R!==e;)N.push(R),xh.test(a.charAt(r))?(R=a.charAt(r),r++):(R=e,0===A&&z(wh)),R===e&&(R=Ni());N!==e?(a.substr(r,3)===bu?(R=bu,r+=3):(R=e,0===A&&z(bh)),R!==e?C=_=yu(N):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(av)),C}())!==e&&(x=du(x)),(s=x)===e&&(s=r,(x=function(){var C,_,N,R;if(A++,C=r,39===a.charCodeAt(r)?(_="'",r++):(_=e,0===A&&z(Kf)),_!==e){for(N=[],fh.test(a.charAt(r))?(R=a.charAt(r),r++):(R=e,0===A&&z(ch)),R===e&&(R=Ni());R!==e;)N.push(R),fh.test(a.charAt(r))?(R=a.charAt(r),r++):(R=e,0===A&&z(ch)),R===e&&(R=Ni());N!==e?(39===a.charCodeAt(r)?(R="'",r++):(R=e,0===A&&z(Kf)),R!==e?C=_=yu(N):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(iv)),C}())!==e&&(x=du(x)),(s=x)===e&&(s=r,(x=function(){var C,_,N,R;if(A++,C=r,34===a.charCodeAt(r)?(_='"',r++):(_=e,0===A&&z(ph)),_!==e){for(N=[],dh.test(a.charAt(r))?(R=a.charAt(r),r++):(R=e,0===A&&z(vh)),R===e&&(R=Ni());R!==e;)N.push(R),dh.test(a.charAt(r))?(R=a.charAt(r),r++):(R=e,0===A&&z(vh)),R===e&&(R=Ni());N!==e?(34===a.charCodeAt(r)?(R='"',r++):(R=e,0===A&&z(ph)),R!==e?C=_=yu(N):(r=C,C=e)):(r=C,C=e)}else r=C,C=e;return A--,C===e&&(_=e,0===A&&z(ov)),C}())!==e&&(x=du(x)),s=x))),A--,s===e&&(x=e,0===A&&z(vd)),s}function gr(){var s,x,C,_,N,R,I;return A++,s=r,(x=Tu())!==e&&(x=function(s){return{token:"uri",prefix:null,suffix:null,value:s}}(x)),(s=x)===e&&(s=r,A++,C=r,A++,N=r,(R=bc())!==e&&(I=cp())!==e?(R=function(s,x){return[s,x]}(R,I),N=R):(r=N,N=e),A--,N===e&&(R=e,0===A&&z(Fd)),(_=N)!==e&&(_=function(s){return{token:"uri",prefix:s[0],suffix:s[1],value:null}}(_)),(C=_)===e&&(C=r,(_=bc())!==e&&(_=function(s){return{token:"uri",prefix:s,suffix:"",value:null}}(_)),C=_),A--,C===e&&(_=e,0===A&&z(md)),(x=C)!==e&&(x=x),s=x),A--,s===e&&(x=e,0===A&&z(gd)),s}function Tu(){var s,x,C,_;if(A++,s=r,60===a.charCodeAt(r)?(x="<",r++):(x=e,0===A&&z(oa)),x!==e){for(C=[],$c.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(eh));_!==e;)C.push(_),$c.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(eh));C!==e?(62===a.charCodeAt(r)?(_=">",r++):(_=e,0===A&&z(Jo)),_!==e?s=x=function(s){return s.join("")}(C):(r=s,s=e)):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Cd)),s}function bc(){var s,x,C;return A++,s=r,(x=function(){var _,N,R,I;if(A++,_=r,(N=up())!==e){for(R=[],(I=Nu())===e&&(46===a.charCodeAt(r)?(I=Wt,r++):(I=e,0===A&&z(zt)));I!==e;)R.push(I),(I=Nu())===e&&(46===a.charCodeAt(r)?(I=Wt,r++):(I=e,0===A&&z(zt)));R!==e?(N=function(s,x){if("."==x[x.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return s+x.join("")}(N,R),_=N):(r=_,_=e)}else r=_,_=e;return A--,_===e&&(N=e,0===A&&z(ng)),_}())===e&&(x=null),x!==e?(58===a.charCodeAt(r)?(C=":",r++):(C=e,0===A&&z(ma)),C!==e?s=x=x:(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(Ad)),s}function ls(){var s,x,C;if(A++,r,x=[],Kt.test(a.charAt(r))?(C=a.charAt(r),r++):(C=e,0===A&&z(Yt)),C!==e)for(;C!==e;)x.push(C),Kt.test(a.charAt(r))?(C=a.charAt(r),r++):(C=e,0===A&&z(Yt));else x=e;return x!==e&&(x=function(s){var x={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"};return x.value=Li(s),x}(x)),A--,(s=x)===e&&(x=e,0===A&&z(Dd)),s}function xc(){var s,x,C,_,N;if(A++,s=r,x=[],Kt.test(a.charAt(r))?(C=a.charAt(r),r++):(C=e,0===A&&z(Yt)),C!==e)for(;C!==e;)x.push(C),Kt.test(a.charAt(r))?(C=a.charAt(r),r++):(C=e,0===A&&z(Yt));else x=e;if(x!==e)if(46===a.charCodeAt(r)?(C=Wt,r++):(C=e,0===A&&z(zt)),C!==e){for(_=[],Kt.test(a.charAt(r))?(N=a.charAt(r),r++):(N=e,0===A&&z(Yt));N!==e;)_.push(N),Kt.test(a.charAt(r))?(N=a.charAt(r),r++):(N=e,0===A&&z(Yt));_!==e?s=x=function(s,x,C){var _={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};return _.value=Li([s,x,C]),_}(x,C,_):(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e)if(s=r,46===a.charCodeAt(r)?(x=Wt,r++):(x=e,0===A&&z(zt)),x!==e){if(C=[],Kt.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(Yt)),_!==e)for(;_!==e;)C.push(_),Kt.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(Yt));else C=e;C!==e?s=x=function(s,x){var C={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"};return C.value=Li([s,x]),C}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Pd)),s}function wc(){var s,x,C,_,N;if(A++,s=r,x=[],Kt.test(a.charAt(r))?(C=a.charAt(r),r++):(C=e,0===A&&z(Yt)),C!==e)for(;C!==e;)x.push(C),Kt.test(a.charAt(r))?(C=a.charAt(r),r++):(C=e,0===A&&z(Yt));else x=e;if(x!==e)if(46===a.charCodeAt(r)?(C=Wt,r++):(C=e,0===A&&z(zt)),C!==e){for(_=[],Kt.test(a.charAt(r))?(N=a.charAt(r),r++):(N=e,0===A&&z(Yt));N!==e;)_.push(N),Kt.test(a.charAt(r))?(N=a.charAt(r),r++):(N=e,0===A&&z(Yt));_!==e&&(N=kc())!==e?s=x=function(s,x,C,_){var N={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return N.value=Li([s,x,C,_]),N}(x,C,_,N):(r=s,s=e)}else r=s,s=e;else r=s,s=e;if(s===e){if(s=r,46===a.charCodeAt(r)?(x=Wt,r++):(x=e,0===A&&z(zt)),x!==e){if(C=[],Kt.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(Yt)),_!==e)for(;_!==e;)C.push(_),Kt.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(Yt));else C=e;C!==e&&(_=kc())!==e?s=x=function(s,x,C){var _={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return _.value=Li([s,x,C]),_}(x,C,_):(r=s,s=e)}else r=s,s=e;if(s===e){if(s=r,x=[],Kt.test(a.charAt(r))?(C=a.charAt(r),r++):(C=e,0===A&&z(Yt)),C!==e)for(;C!==e;)x.push(C),Kt.test(a.charAt(r))?(C=a.charAt(r),r++):(C=e,0===A&&z(Yt));else x=e;x!==e&&(C=kc())!==e?s=x=function(s,x){var C={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"};return C.value=Li([s,x]),C}(x,C):(r=s,s=e)}}return A--,s===e&&(x=e,0===A&&z(Ud)),s}function kc(){var s,x,C,_,N;if(A++,s=r,$d.test(a.charAt(r))?(x=a.charAt(r),r++):(x=e,0===A&&z(ev)),x!==e)if(tv.test(a.charAt(r))?(C=a.charAt(r),r++):(C=e,0===A&&z(rv)),C===e&&(C=null),C!==e){if(_=[],Kt.test(a.charAt(r))?(N=a.charAt(r),r++):(N=e,0===A&&z(Yt)),N!==e)for(;N!==e;)_.push(N),Kt.test(a.charAt(r))?(N=a.charAt(r),r++):(N=e,0===A&&z(Yt));else _=e;_!==e?s=x=function(s,x,C){return Li([s,x,C])}(x,C,_):(r=s,s=e)}else r=s,s=e;else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(Zd)),s}function Ni(){var s,x,C;return A++,s=r,92===a.charCodeAt(r)?(x="\\",r++):(x=e,0===A&&z(_h)),x!==e?(uv.test(a.charAt(r))?(C=a.charAt(r),r++):(C=e,0===A&&z(fv)),C!==e?s=x=[x,C]:(r=s,s=e)):(r=s,s=e),A--,s===e&&(x=e,0===A&&z(lv)),s}function ai(){var s,x,C,_;if(A++,s=r,40===a.charCodeAt(r)?(x=H,r++):(x=e,0===A&&z(ee)),x!==e){for(C=[],_=Q();_!==e;)C.push(_),_=Q();C!==e?(41===a.charCodeAt(r)?(_=We,r++):(_=e,0===A&&z(Ye)),_!==e?s=x={token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:(r=s,s=e)):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(cv)),s}function Q(){var s;return A++,dv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(vv)),s===e&&(gv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(yv)),s===e&&(mv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(bv)),s===e&&(xv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(wv)),s===e&&(s=function(){var x,C,_,N;if(A++,x=r,35===a.charCodeAt(r)?(C="#",r++):(C=e,0===A&&z(Sh)),C!==e){for(_=[],Ah.test(a.charAt(r))?(N=a.charAt(r),r++):(N=e,0===A&&z(Fh));N!==e;)_.push(N),Ah.test(a.charAt(r))?(N=a.charAt(r),r++):(N=e,0===A&&z(Fh));_!==e?x=C=[C,_]:(r=x,x=e)}else r=x,x=e;return A--,x===e&&(C=e,0===A&&z(kv)),x}())))),A--,s===e&&0===A&&z(pv),s}function up(){var s;return A++,Sv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Av)),s===e&&(Fv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Ev)),s===e&&(Tv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Nv)),s===e&&(Lv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Iv)),s===e&&(Ov.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Rv)),s===e&&(jv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Dv)),s===e&&(Mv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Pv)),s===e&&(Bv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Qv)),s===e&&(Uv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Gv)),s===e&&(Hv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Wv)),s===e&&(zv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(qv)),s===e&&(Xv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Jv)),s===e&&(Vv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Kv)),s===e&&(Yv.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Zv))))))))))))))),A--,s===e&&0===A&&z(Cv),s}function Ca(){var s;return A++,(s=up())===e&&(95===a.charCodeAt(r)?(s="_",r++):(s=e,0===A&&z(Th))),A--,s===e&&0===A&&z($v),s}function fp(){var s,x,C,_;if(A++,s=r,(x=Ca())===e&&(Kt.test(a.charAt(r))?(x=a.charAt(r),r++):(x=e,0===A&&z(Yt))),x!==e){for(C=[],(_=Ca())===e&&(Kt.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(Yt)),_===e&&(Yf.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(Zf)),_===e&&($f.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(ec)),_===e&&(tc.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(rc))))));_!==e;)C.push(_),(_=Ca())===e&&(Kt.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(Yt)),_===e&&(Yf.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(Zf)),_===e&&($f.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(ec)),_===e&&(tc.test(a.charAt(r))?(_=a.charAt(r),r++):(_=e,0===A&&z(rc))))));C!==e?s=x=function(s,x){return s+x.join("")}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(eg)),s}function Nu(){var s;return A++,(s=Ca())===e&&(45===a.charCodeAt(r)?(s=Qr,r++):(s=e,0===A&&z(Zr)),s===e&&(Kt.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Yt)),s===e&&(Yf.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Zf)),s===e&&($f.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(ec)),s===e&&(tc.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(rc))))))),A--,s===e&&0===A&&z(rg),s}function cp(){var s,x,C,_;if(A++,s=r,(x=Ca())===e&&(Kt.test(a.charAt(r))?(x=a.charAt(r),r++):(x=e,0===A&&z(Yt)),x===e&&(58===a.charCodeAt(r)?(x=":",r++):(x=e,0===A&&z(ma)),x===e&&(x=_c()))),x!==e){for(C=[],(_=Nu())===e&&(46===a.charCodeAt(r)?(_=Wt,r++):(_=e,0===A&&z(zt)),_===e&&(58===a.charCodeAt(r)?(_=":",r++):(_=e,0===A&&z(ma)),_===e&&(_=_c())));_!==e;)C.push(_),(_=Nu())===e&&(46===a.charCodeAt(r)?(_=Wt,r++):(_=e,0===A&&z(zt)),_===e&&(58===a.charCodeAt(r)?(_=":",r++):(_=e,0===A&&z(ma)),_===e&&(_=_c())));C!==e?s=x=function(s,x){return s+(x||[]).join("")}(x,C):(r=s,s=e)}else r=s,s=e;return A--,s===e&&(x=e,0===A&&z(og)),s}function _c(){var s,x,C,_,N,R;return A++,A++,C=r,37===a.charCodeAt(r)?(_="%",r++):(_=e,0===A&&z(Lh)),_!==e&&(N=hp())!==e&&(R=hp())!==e?C=_=[_,N,R]:(r=C,C=e),C!==e&&(C=function(s){return s.join("")}(C)),A--,(x=C)===e&&(C=e,0===A&&z(lg)),(s=x)===e&&(s=function(){var x,C,_;return A++,x=r,92===a.charCodeAt(r)?(C="\\",r++):(C=e,0===A&&z(_h)),C!==e?(95===a.charCodeAt(r)?(_="_",r++):(_=e,0===A&&z(Th)),_===e&&(126===a.charCodeAt(r)?(_="~",r++):(_=e,0===A&&z(yg)),_===e&&(46===a.charCodeAt(r)?(_=Wt,r++):(_=e,0===A&&z(zt)),_===e&&(45===a.charCodeAt(r)?(_=Qr,r++):(_=e,0===A&&z(Zr)),_===e&&(33===a.charCodeAt(r)?(_="!",r++):(_=e,0===A&&z(_n)),_===e&&(36===a.charCodeAt(r)?(_="$",r++):(_=e,0===A&&z(ih)),_===e&&(38===a.charCodeAt(r)?(_="&",r++):(_=e,0===A&&z(bg)),_===e&&(39===a.charCodeAt(r)?(_="'",r++):(_=e,0===A&&z(Kf)),_===e&&(40===a.charCodeAt(r)?(_=H,r++):(_=e,0===A&&z(ee)),_===e&&(41===a.charCodeAt(r)?(_=We,r++):(_=e,0===A&&z(Ye)),_===e&&(42===a.charCodeAt(r)?(_=mt,r++):(_=e,0===A&&z(ht)),_===e&&(43===a.charCodeAt(r)?(_=Br,r++):(_=e,0===A&&z(fn)),_===e&&(44===a.charCodeAt(r)?(_=$t,r++):(_=e,0===A&&z(er)),_===e&&(59===a.charCodeAt(r)?(_=sn,r++):(_=e,0===A&&z(Dr)),_===e&&(58===a.charCodeAt(r)?(_=":",r++):(_=e,0===A&&z(ma)),_===e&&(61===a.charCodeAt(r)?(_="=",r++):(_=e,0===A&&z(Zn)),_===e&&(47===a.charCodeAt(r)?(_="/",r++):(_=e,0===A&&z(wn)),_===e&&(63===a.charCodeAt(r)?(_="?",r++):(_=e,0===A&&z(kn)),_===e&&(35===a.charCodeAt(r)?(_="#",r++):(_=e,0===A&&z(Sh)),_===e&&(64===a.charCodeAt(r)?(_="@",r++):(_=e,0===A&&z(sh)),_===e&&(37===a.charCodeAt(r)?(_="%",r++):(_=e,0===A&&z(Lh)))))))))))))))))))))),_!==e?(C=function(s){return"\\"+s}(_),x=C):(r=x,x=e)):(r=x,x=e),A--,x===e&&(C=e,0===A&&z(vg)),x}()),A--,s===e&&0===A&&z(ag),s}function hp(){var s;return A++,Kt.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(Yt)),s===e&&(cg.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(hg)),s===e&&(pg.test(a.charAt(r))?(s=a.charAt(r),r++):(s=e,0===A&&z(dg)))),A--,s===e&&0===A&&z(fg),s}var Li=function(s){for(var x="",C=0;C<s.length;C++)"string"==typeof s[C]?x+=s[C]:x+=s[C].join("");return x},Gr=0,pp={},kg=function(s,x){pp[s]=x},_g=function(s){pp.null=s},dp=function(s){var x="";if(null==s)return null;for(var C=0;C<s.length;C++)x+=s[C];return x.toUpperCase()};if((y=u())!==e&&r===a.length)return y;throw y!==e&&r<a.length&&z({type:"end"}),function wg(s,x,C){return new q(q.buildMessage(s,x),s,x,C)}(nc,Ln<a.length?a.charAt(Ln):null,Ln<a.length?Oh(Ln,Ln+1):Oh(Ln,Ln))}}}()},{}],129:[function(J,ie,ue){J("./btree").Tree;var q=J("./utils"),a=q,F=J("./lexicon").Lexicon;PersistentLexicon=function(y,e){var o=this;q.registerIndexedDB(o),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,o.dbName=e||"rdfstorejs";var u=o.indexedDB.open(this.dbName+"_lexicon",1);u.onerror=function(d){y(null,new Error("Error opening IndexedDB: "+d.target.errorCode))},u.onsuccess=function(d){o.db=d.target.result,y(o)},u.onupgradeneeded=function(d){o.db=d.target.result,o.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),o.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(y,e,o){if(y!=this.defaultGraphOid){var u=this.db.transaction(["knownGraphs"],"readwrite");u.onerror=function(m){o(null,new Error(m.target.statusCode))};var d=u.objectStore("knownGraphs");d.get(e).onsuccess=function(m){m.target.result?o(!0):d.add({oid:y,uriToken:e}).onsuccess=function(h){o(!0)}}}else o()},PersistentLexicon.prototype.registeredGraphs=function(y,e){var o=[],u=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs").openCursor();u.onsuccess=function(d){var m=d.target.result;m?(!0===y?o.push(m.value.uriToken):o.push(m.value.oid),m.continue()):e(o)},u.onerror=function(d){e(null,new Error("Error retrieving data from the cursor: "+d.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(y,e){if(y===this.defaultGraphUri)e(this.defaultGraphOid);else{var o=this.db.transaction(["components"],"readwrite").objectStore("components"),u=o.index("value").get("_u:"+y);u.onsuccess=function(d){var m=d.target.result;if(m){m.counter++;var h=m.id,k=o.put(m);k.onsuccess=function(f){e(h)},k.onerror=function(f){e(null,new Error("Error updating the URI data"+f.target.errorCode))}}else{var v=o.add({value:"_u:"+y,counter:0,uri:!0});v.onsuccess=function(f){e(f.target.result)},v.onerror=function(f){e(null,new Error("Error inserting the URI data"+f.target.errorCode))}}},u.onerror=function(d){e(null,new Error("Error retrieving the URI data"+d.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(y,e){if(y===this.defaultGraphUri)e(this.defaultGraphOid);else{var o=this.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+y);o.onsuccess=function(u){null!=u.target.result?e(u.target.result.id):e(-1)},o.onerror=function(u){e(null,new Error("Error retrieving uri data "+u.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(y,e){if(y===this.defaultGraphUri)e(0);else{var o=that.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+y);o.onsuccess=function(u){null!=u.target.result?e(u.target.result.cost):e(-1)},o.onerror=function(u){e(null,new Error("Error retrieving uri data "+u.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(y){var e=guid(),o=this.db.transaction(["components"],"readwrite").objectStore("components").add({value:"_b:"+e,counter:0,label:!0});o.onsuccess=function(u){y(u.target.result)},o.onerror=function(u){y(null,new Error("Error inserting the URI data"+u.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(y,e){e(0)},PersistentLexicon.prototype.registerLiteral=function(y,e){var o=this.db.transaction(["components"],"readwrite").objectStore("components"),u=o.index("value").get("_l:"+y);u.onsuccess=function(d){var m=d.target.result;if(m){m.counter++;var h=m.id,k=o.put(m);k.onsuccess=function(f){e(h)},k.onerror=function(f){e(null,new Error("Error updating the literal data"+f.target.errorCode))}}else{var v=o.add({value:"_l:"+y,counter:0,literal:!0});v.onsuccess=function(f){e(f.target.result)},v.onerror=function(f){e(null,new Error("Error inserting the literal data"+f.target.errorCode))}}},u.onerror=function(d){e(null,new Error("Error retrieving the literal data"+d.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(y,e){var o=that.db.transaction(["components"]).objectStore("components").index("value").get("_l:"+y);o.onsuccess=function(u){null!=u.target.result?e(u.target.result.id):e(-1)},o.onerror=function(u){e(null,new Error("Error retrieving literal data "+u.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(y,e){var o=that.db.transaction(["components"]).objectStore("components").index("components").get(y);o.onsuccess=function(u){null!=u.target.result?e(u.target.result.cost):e(-1)},o.onerror=function(u){e(null,new Error("Error retrieving literal data "+u.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(y){return F.prototype.parseLiteral(y)},PersistentLexicon.prototype.parseUri=function(y){return F.prototype.parseUri(y)},PersistentLexicon.prototype.retrieve=function(y,e){var o,u=this;y===this.defaultGraphOid?e({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):((o=u.db.transaction(["components"]).objectStore("components").get(y)).onsuccess=function(d){if(null!=d.target.result)if(null!=d.target.result.label){var m="_:"+d.target.result.id;e({token:"blank",value:m})}else null!=d.target.result.uri?e(u.parseUri(d.target.result.value.slice(3,d.target.result.value.length))):null!=d.target.result.literal?e(u.parseLiteral(d.target.result.value.slice(3,d.target.result.value.length))):(console.log(d.target.result),e(null,new Error("Unknown type of component "+d.target.result)));else e(null,null)},o.onerror=function(d){e(null,new Error("Error searching in blanks data "+d.target.errorCode))})},PersistentLexicon.prototype.clear=function(y){this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var e,o=function(){null!=y&&y()};(e=this.db.transaction(["components"],"readwrite").objectStore("components").clear()).onsuccess=o,e.onerror=o},PersistentLexicon.prototype.unregister=function(y,e,o){var u=this;a.seq(function(d){u._unregisterTerm(y.subject.token,e.subject,d)},function(d){u._unregisterTerm(y.predicate.token,e.predicate,d)},function(d){u._unregisterTerm(y.object.token,e.object,d)},function(d){null!=y.graph?u._unregisterTerm(y.graph.token,e.graph,d):d()})(function(){o(!0)})},PersistentLexicon.prototype._unregisterTerm=function(y,e,o){var u=this.db.transaction(["components","knownGraphs"],"readwrite");"uri"===y?e!=this.defaultGraphOid?u.objectStore("components").delete(e).onsuccess=void(u.objectStore("knownGraphs").delete(e).onsuccess=function(){o()}):o():u.objectStore("components").delete(e).onsuccess=function(){o()}},ie.exports={PersistentLexicon}},{"./btree":123,"./lexicon":126,"./utils":140}],130:[function(J,ie,ue){var q=J("./utils");PersistentQuadBackend=function(a,F){var y=this;if(0!==arguments){for(var e in q.registerIndexedDB(y),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={},this.componentOrders){var o=this.componentOrders[e].slice(0,e.length).sort().join(".");this.componentOrdersMap[o]=e}y.dbName=a.name||"rdfstorejs";var u=y.indexedDB.open(this.dbName+"_db",1);u.onerror=function(d){F(null,new Error("Error opening IndexedDB: "+d.target.errorCode))},u.onsuccess=function(d){y.db=d.target.result,F(y)},u.onupgradeneeded=function(d){var m=d.target.result.createObjectStore(y.dbName,{keyPath:"SPOG"});q.each(y.indices,function(h){"SPOG"!==h&&m.createIndex(h,h,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(a,F){var y=this;q.each(this.indices,function(o){a[o]=y._genMinIndexKey(a,o)});var e=y.db.transaction([y.dbName],"readwrite");e.oncomplete=function(o){},e.onerror=function(o){F(null,new Error(o.target.statusCode))},e.objectStore(y.dbName).add(a).onsuccess=function(o){F(!0)}},PersistentQuadBackend.prototype.range=function(a,F){var y=this.db.transaction([this.dbName]).objectStore(this.dbName),e=this._indexForPattern(a),o=this._genMinIndexKey(a,e),u=this._genMaxIndexKey(a,e),d=this.IDBKeyRange.bound(o,u,!1,!1),m=[];("SPOG"===e?y:y.index(e)).openCursor(d).onsuccess=function(h){var k=h.target.result;k?(m.push(k.value),k.continue()):F(m)}},PersistentQuadBackend.prototype.search=function(a,F){var y=this.db.transaction([this.dbName]).objectStore(this.dbName),e=this._genMinIndexKey(a,"SPOG"),o=y.get(e);o.onerror=function(u){F(null,new Error(u.target.statusCode))},o.onsuccess=function(u){F(null!=u.target.result)}},PersistentQuadBackend.prototype.delete=function(a,F){var y=this._genMinIndexKey(a,"SPOG"),e=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).delete(y);e.onsuccess=function(){F(!0)},e.onerror=function(o){F(null,new Error(o.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(a,F){var y=this.componentOrders[F];return q.map(y,function(e){return"string"==typeof a[e]||null==a[e]?"0":a[e]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(a,F){for(var y=this.componentOrders[F],e=[],o=0;o<y.length;o++){var u=a[y[o]];e[o]="string"==typeof u?"z":u}return q.map(e,function(d){return""+d}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(a){var F=a.indexKey.sort().join("."),y=this.componentOrdersMap[F];if(null==y)throw new Error("Error, cannot find index for indexKey "+F);return y},PersistentQuadBackend.prototype.clear=function(a){var F;(F=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).clear()).onsuccess=function(){a()},F.onerror=function(){a()}},ie.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":140}],131:[function(J,ie,ue){var q=J("./quad_index").QuadIndex,a=J("./utils");QuadBackend=function(F,y){this.indexMap={},this.treeOrder=F.treeOrder,this.indices=F.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var e=this;a.eachSeries(this.indices,function(o,u){new q({order:e.treeOrder,componentOrder:e.componentOrders[o]},function(d){e.indexMap[o]=d,u()})},function(){y(e)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(F){for(var y=F.indexKey,e=0;e<QuadBackend.allIndices.length;e++)for(var o=QuadBackend.allIndices[e],u=QuadBackend.componentOrders[o],d=0;d<u.length&&!1!==a.include(y,u[d]);d++)if(d==y.length-1)return o;return"SPOG"},QuadBackend.prototype.index=function(F,y){var e=this;a.eachSeries(this.indices,function(o,u){e.indexMap[o].insert(F,function(){u()})},function(){y(!0)})},QuadBackend.prototype.range=function(F,y){var e=this._indexForPattern(F),o=this.indexMap[e];null!=o&&o.range(F,function(u){y(u)})},QuadBackend.prototype.search=function(F,y){var e=this.indexMap.SPOG;null!=e&&e.search(F,function(o){y(null!=o)})},QuadBackend.prototype.delete=function(F,y){var e=this;a.eachSeries(this.indices,function(o,u){e.indexMap[o].delete(F,function(){u()})},function(){y(!0)})},QuadBackend.prototype.clear=function(F){var y=this;a.eachSeries(this.indices,function(e,o){new q({order:y.treeOrder,componentOrder:y.componentOrders[e]},function(u){y.indexMap[e]=u,o()})},function(){F(!0)})},ie.exports.QuadBackend=QuadBackend},{"./quad_index":132,"./utils":140}],132:[function(J,ie,ue){var q=J("./btree").Tree,a=J("./utils"),F=J("./utils");NodeKey=function(y,e){this.subject=y.subject,this.predicate=y.predicate,this.object=y.object,this.graph=y.graph,this.order=e},NodeKey.prototype.comparator=function(y){for(var e=0;e<this.order.length;e++){var o=this.order[e];if(null==y[o])return 0;if(this[o]<y[o])return-1;if(this[o]>y[o])return 1}return 0},Pattern=function(y){this.subject=y.subject,this.predicate=y.predicate,this.object=y.object,this.graph=y.graph,this.indexKey=[],this.keyComponents={};var e=[],o=[],u=this;a.forEach(["subject","predicate","object","graph"],function(d){"string"==typeof u[d]?(o.push(d),u.keyComponents[d]=null):(e.push(d),u.keyComponents[d]=u[d],u.indexKey.push(d))}),this.order=e.concat(o),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(y,e){0!=arguments&&(this.componentOrder=y.componentOrder,q.call(this,y.order,function(o){o.comparator=function(u,d){for(var m=0;m<o.componentOrder.length;m++){var h=o.componentOrder[m],k=u[h],v=d[h];if(k<v)return-1;if(k>v)return 1}return 0},o.rangeComparator=function(u,d){for(var m=0;m<o.componentOrder.length;m++){var h=o.componentOrder[m];if(null==d[h]||null==u[h])return 0;if(u[h]<d[h])return-1;if(u[h]>d[h])return 1}return 0},e(o)}))},QuadIndex.prototype=a.create(q.prototype,{constructor:q}),QuadIndex.prototype.insert=function(y,e){q.prototype.insert.call(this,y,null,function(o){e(o)})},QuadIndex.prototype.search=function(y,e){q.prototype.search.call(this,y,function(o){e(o)},!0)},QuadIndex.prototype.range=function(y,e){this._rangeTraverse(this,this.root,y,e)},QuadIndex.prototype._rangeTraverse=function(y,e,o,u){var d=o.key,m=[],h=[e];F.whilst(function(){return h.length>0},function(k){for(var v=h.shift(),f=0;f<v.numberActives&&-1===y.rangeComparator(v.keys[f].key,d);)f++;if(!0===v.isLeaf){for(var w=f;w<v.numberActives&&0===y.rangeComparator(v.keys[w].key,d);)m.push(v.keys[w].key),w++;k()}else y._diskRead(v.children[f],function(T){h.push(T);var E=f;F.whilst(function(){return E<v.numberActives&&0===y.rangeComparator(v.keys[E].key,d)},function(P){m.push(v.keys[E].key),E++,y._diskRead(v.children[E],function(M){h.push(M),P()})},function(){k()})})},function(){u(m)})},ie.exports={QuadIndex,Pattern,NodeKey}},{"./btree":123,"./utils":140}],133:[function(J,ie,ue){var q=J("./abstract_query_tree").AbstractQueryTree,a=J("./abstract_query_tree").NonSupportedSparqlFeatureError,F=J("./utils"),y=J("./quad_index"),e=J("./query_plan").QueryPlan,o=J("./query_filters").QueryFilters,u=J("./rdf_model"),d=J("./rdf_loader").RDFLoader,m=J("./graph_callbacks").CallbacksBackend,h=J("./utils"),k=J("./utils");function v(f,w,T){this.name="BindExpressionError",this.bind=w,this.error=T,this.message=f}v.prototype=new Error,v.constructor=v,QueryEngine=function(f){0!=arguments.length&&(this.backend=f.backend,this.lexicon=f.lexicon,this.eventsOnBatchLoad=f.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new q,this.rdfLoader=new d(f.communication),this.callbacksBackend=new m(this),this.customFns=f.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(f){this.customFns=f},QueryEngine.prototype.registerNsInEnvironment=function(f,w){var T=[];null!=f&&null!=f.prefixes&&(T=f.prefixes);var E={};for(var P in this.defaultPrefixes)E[P]=this.defaultPrefixes[P];for(var M=0;M<T.length;M++){var j=T[M];"prefix"===j.token&&(E[j.prefix]=j.local)}w.namespaces=E,null!=f&&f.base&&"object"==typeof f.base?w.base=f.base.value:w.base=null},QueryEngine.prototype.applyModifier=function(f,w){if("DISTINCT"==f){for(var T={},E=[],P=0;P<w.length;P++){var M=w[P],j="";for(var O in M){var L=M[O];null==L?j=j+O+"null":"literal"==L.token?(null!=L.value&&(j+=L.value),null!=L.lang&&(j+=L.lang),null!=L.type&&(j+=L.type)):j=L.value?j+O+L.value:j+O+L}null==T[j]&&(E.push(M),T[j]=!0)}return E}return w},QueryEngine.prototype.applyLimitOffset=function(f,w,T){return null==w&&null==f?T:(null==f&&(f=0),w=null==w?T.length:f+w,T.slice(f,w))},QueryEngine.prototype.applySingleOrderBy=function(f,w,T,E,P){var M=[],j=this;h.eachSeries(f,function(O,L){o.collect(O.expression,[w],T,E,j,function(U){M.push(U[0].value),L()})},function(){P({binding:w,value:M})})},QueryEngine.prototype.applyOrderBy=function(f,w,T,E,P){var M=this,j=[];null!=f&&f.length>0?h.eachSeries(w,function(O,L){M.applySingleOrderBy(f,O,T,E,function(U){j.push(U),L()})},function(){j.sort(function(U,W){return M.compareFilteredBindings(U,W,f,E)});for(var O=[],L=0;L<j.length;L++)O.push(j[L].binding);P(O)}):P(w)},QueryEngine.prototype.compareFilteredBindings=function(f,w,T,E){for(var P=0;;){if(P==f.value.length)return 0;var M,j=T[P].direction;if(null!=f.value[P]||null!=w.value[P]){if(null==f.value[P])M={value:!1};else if(null==w.value[P])M={value:!0};else{if("blank"===f.value[P].token&&"blank"===w.value[P].token){P++;continue}if("blank"===f.value[P].token)M={value:!1};else if("blank"===w.value[P].token)M={value:!0};else if("uri"===f.value[P].token&&"uri"===w.value[P].token){if(1==o.runEqualityFunction(f.value[P],w.value[P],[],this,E).value){P++;continue}M=o.runTotalGtFunction(f.value[P],w.value[P],[])}else if("uri"===f.value[P].token)M={value:!1};else if("uri"===w.value[P].token)M={value:!0};else if("literal"===f.value[P].token&&"literal"===w.value[P].token&&null==f.value[P].type&&null==w.value[P].type){if(1==o.runEqualityFunction(f.value[P],w.value[P],[],this,E).value){P++;continue}M=o.runTotalGtFunction(f.value[P],w.value[P],[])}else if("literal"===f.value[P].token&&null==f.value[P].type)M={value:!1};else if("literal"===w.value[P].token&&null==w.value[P].type)M={value:!0};else{if(1==o.runEqualityFunction(f.value[P],w.value[P],[],this,E).value){P++;continue}M=o.runTotalGtFunction(f.value[P],w.value[P],[])}}return 1==M.value?"ASC"===j?1:-1:"ASC"===j?-1:1}P++}},QueryEngine.prototype.removeDefaultGraphBindings=function(f,w){for(var T=[],E={},P=0;P<w.named.length;P++)E[w.named[P].oid]=!0;for(P=0;P<w.implicit.length;P++)null==E[w.implicit[P].oid]&&T.push(w.implicit[P].oid);var M=[];for(P=0;P<f.length;P++){var j=f[P],O=!1;for(var L in j){for(var U=0;U<E.length;U++)if(j[L]===E[U]){O=!0;break}if(O)break}O||M.push(j)}return M},QueryEngine.prototype.aggregateBindings=function(f,w,T,E,P){this.copyDenormalizedBindings(w,E.outCache,function(M){for(var j={},O=0;O<f.length;O++){var L=o.runAggregator(f[O],M,this,T,E);f[O].alias?j[f[O].alias.value]=L:j[f[O].value.value]=L}P(j)})},QueryEngine.prototype.projectBindings=function(f,w,T){if("*"===f[0].kind)return w;for(var E=[],P=0;P<w.length;P++){for(var M=w[P],j={},O=!0,L=0;L<f.length;L++)if("variable"==f[L].token&&"aliased"!=f[L].kind)j[f[L].value.value]=M[f[L].value.value];else if("variable"==f[L].token&&"aliased"==f[L].kind){var U=o.runFilter(f[L].expression,M,this,T,{blanks:{},outCache:{}});if(o.isEbvError(U)){O=!1;break}j[f[L].alias.value]=U}!0===O&&E.push(j)}return E},QueryEngine.prototype.resolveNsInEnvironment=function(f,w){return w.namespaces[f]},QueryEngine.prototype.normalizeTerm=function(f,w,T,E){if("uri"===f.token){var P=F.lexicalFormBaseUri(f,w);null==P?E(null):T?this.lexicon.registerUri(P,E):this.lexicon.resolveUri(P,E)}else if("literal"===f.token){var M=F.lexicalFormLiteral(f,w);T?this.lexicon.registerLiteral(M,E):this.lexicon.resolveLiteral(M,E)}else if("blank"===f.token){var j=f.value,O=w.blanks[j];null!=O?E(O):T?this.lexicon.registerBlank(function(L){w.blanks[j]=L,E(L)}):this.lexicon.resolveBlank(function(L){w.blanks[j]=L,E(L)})}else"var"===f.token?E(f.value):E(null)},QueryEngine.prototype.normalizeDatasets=function(f,w,T){var E=this;h.eachSeries(f,function(P,M){P.value===E.lexicon.defaultGraphUri?(P.oid=E.lexicon.defaultGraphOid,M()):E.normalizeTerm(P,w,!1,function(j){null!=j&&(P.oid=j),M()})},function(){T(!0)})},QueryEngine.prototype.normalizeQuad=function(f,w,T,E){var P=null,M=null,j=null,O=null,L=this,U=!1;h.seq(function(W){if(null==f.graph||f.graph.value===L.lexicon.defaultGraphUri)O=0,W();else{var V=F.lexicalFormBaseUri(f.graph,w);L.normalizeTerm(f.graph,w,T,function($){null!=$?(O=$,!0===T&&"var"!=f.graph.token?L.lexicon.registerGraph($,V,function(){W()}):W()):(U=!0,W())})}},function(W){!1===U?L.normalizeTerm(f.subject,w,T,function(V){null!=V?(P=V,W()):(U=!0,W())}):W()},function(W){!1===U?L.normalizeTerm(f.predicate,w,T,function(V){null!=V?(M=V,W()):(U=!0,W())}):W()},function(W){!1===U?L.normalizeTerm(f.object,w,T,function(V){null!=V?(j=V,W()):(U=!0,W())}):W()})(function(){E(!0===U?null:{subject:P,predicate:M,object:j,graph:O})})},QueryEngine.prototype.denormalizeBindingsList=function(f,w,T){var E=this,P=[];h.eachSeries(f,function(M,j){E.denormalizeBindings(M,w,function(O){P.push(O),j()})},function(){T(P)})},QueryEngine.prototype.copyDenormalizedBindings=function(f,w,T){var E=this,P=[];h.eachSeries(f,function(M,j){var O={},L=k.keys(M);h.eachSeries(L,function(U,W){var V=M[U];if(null==V)O[U]=null,W();else if("object"==typeof V)O[U]=V,W();else{var $=w[V];null!=$?(O[U]=$,W()):E.lexicon.retrieve(V,function(fe){w[V]=fe,O[U]=fe,W()})}},function(){P.push(O),j()})},function(){T(P)})},QueryEngine.prototype.denormalizeBindings=function(f,w,T){var E=k.keys(f),P=w.outCache,M=this;h.eachSeries(E,function(j,O){var L=f[j];null==L?(f[j]=null,O()):"object"==typeof L?O():null!=P[L]?(f[j]=P[L],O()):M.lexicon.retrieve(L,function(U){f[j]=U,"blank"===U.token&&(w.blanks[U.value]=L),O()})},function(){T(f)})},QueryEngine.prototype.execute=function(f,w,T,E){f=F.normalizeUnicodeLiterals(f);var P=this.abstractQueryTree.parseQueryString(f);if(null==P)w(!1,"Error parsing query string");else if("query"===P.token&&"update"==P.kind){this.callbacksBackend.startGraphModification();var M=this;this.executeUpdate(P,function(j,O){M.lexicon.updateAfterWrite&&M.lexicon.updateAfterWrite(),j?(M.callbacksBackend.cancelGraphModification(),w(j,O)):M.callbacksBackend.endGraphModification(function(){w(j,O)})})}else"query"===P.token&&"query"==P.kind&&this.executeQuery(P,w,T,E)},QueryEngine.prototype.executeQuery=function(f,w,T,E){var P=f.prologue,M=f.units,j=this,O={blanks:{},outCache:{}};this.registerNsInEnvironment(P,O);var L=j.abstractQueryTree.parseExecutableUnit(M[0]);"select"===L.kind?this.executeSelect(L,O,T,E,function(U,W){null==U?"object"==typeof W&&!0===W.denorm?w(null,W.bindings):j.denormalizeBindingsList(W,O,function(V){w(null,V)}):w(U)}):"ask"===L.kind?(L.projection=[{token:"variable",kind:"*"}],this.executeSelect(L,O,T,E,function(U,W){null==U?W.length>0?w(null,!0):w(null,!1):w(U)})):"construct"===L.kind&&(L.projection=[{token:"variable",kind:"*"}],j=this,this.executeSelect(L,O,T,E,function(U,W){null==U?j.denormalizeBindingsList(W,O,function(V){if(null!=V){var $=new u.Graph;null==L.template&&(L.template={triplesContext:L.pattern});for(var fe=1,ce=[],xe=0;xe<V.length;xe++){for(var te=V[xe],se=0;se<ce.length;se++)delete ce[se].valuetmp;for(se=0;se<L.template.triplesContext.length;se++){for(var ne=["subject","predicate","object"],ve=L.template.triplesContext[se],Ce=0;Ce<ne.length;Ce++){var be=ne[Ce];if("blank"===ve[be].token&&(!ve[be].valuetmp||null==ve[be].valuetmp)){var de="_:b"+fe;fe++,ve[be].valuetmp=de,ce.push(ve[be])}}var ye=u.buildRDFResource(ve.subject,te,j,O),Fe=(Ce=u.buildRDFResource(ve.predicate,te,j,O),u.buildRDFResource(ve.object,te,j,O));if(null!=ye&&null!=Ce&&null!=Fe){var Be=new u.Triple(ye,Ce,Fe);$.add(Be)}}}w(null,$)}else w(new Error("Error denormalizing bindings."))}):w(U)}))},QueryEngine.prototype.executeSelect=function(f,w,T,E,P){if("select"===f.kind||"ask"===f.kind||"construct"===f.kind||"modify"===f.kind){var M=f.projection,j=f.dataset,O=f.modifier,L=f.limit,U=f.offset,W=f.order,V=this;null==T&&null==E||(j.implicit=T||[],j.named=E||[]),null!=j.implicit&&0===j.implicit.length&&null!=j.named&&0===j.named.length&&j.implicit.push(this.lexicon.defaultGraphUriTerm),V.normalizeDatasets(j.implicit.concat(j.named),w,function(){try{V.executeSelectUnit(M,j,f.pattern,w,function($){if(null!=$){if(null!=f.group&&""===f.group){for(var fe=!1,ce=0;ce<f.projection.length;ce++)if(null!=f.projection[ce].expression&&"aggregate"===f.projection[ce].expression.expressionType){fe=!0;break}!0===fe&&(f.group="singleGroup")}f.group&&""!=f.group?V.checkGroupSemantics(f.group,M)?V.groupSolution($,f.group,j,w,function(xe){var te=[];h.eachSeries(xe,function(se,ne){V.aggregateBindings(M,se,j,w,function(ve){te.push(ve),ne()})},function(){P(null,{bindings:te,denorm:!0})})}):P(new Error("Incompatible Group and Projection variables")):V.applyOrderBy(W,$,j,w,function(xe){var te=V.projectBindings(M,xe,j),se=V.applyModifier(O,te),ne=V.applyLimitOffset(U,L,se),ve=V.removeDefaultGraphBindings(ne,j);P(null,ve)})}else P(new Error("Error executing SELECT query."))})}catch($){P($)}})}else P(new Error("Cannot execute "+f.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(f,w,T,E,P){var M=[],j=[],O=!1,L=this;"singleGroup"===w?P([f]):h.eachSeries(f,function(U,W){var V=!0;h.eachSeries(w,function($,fe){var ce=null;if("var"===$.token)ce=$.value,0==O&&M.push(ce),fe();else if("aliased_expression"===$.token){if(ce=$.alias.value,0==O&&M.push(ce),"var"===$.expression.primaryexpression)U[$.alias.value]=U[$.expression.value.value];else{var xe=L.copyDenormalizedBindings([U],E.outCache),te=o.runFilter($.expression,xe[0],L,T,E);o.isEbvError(te)?V=!1:(null!=te.value&&(te.value=""+te.value),U[$.alias.value]=te)}fe()}else L.copyDenormalizedBindings([U],E.outCache,function(se){var ne=o.runFilter($,se[0],L,E);o.isEbvError(ne)?V=!1:(U["groupCondition"+env._i]=ne,ce="groupCondition"+env._i,0==O&&M.push(ce)),fe()})},function(){0==O&&(O=!0),!0===V&&j.push(U),W()})},function(){for(var U={},W={},V=0;V<j.length;V++){for(var $=j[V],fe="",ce=0;ce<M.length;ce++){var xe=$[M[ce]];fe+="object"==typeof xe?xe.value:xe}null==U[fe]?(W[fe]=0,U[fe]=[$]):U[fe].push($)}var te=[];for(var se in U)te.push(U[se]);P(te)})},QueryEngine.prototype.executeSelectUnit=function(f,w,T,E,P){if("BGP"===T.kind)this.executeAndBGP(f,w,T,E,P);else if("UNION"===T.kind)this.executeUNION(f,w,T.value,E,P);else if("JOIN"===T.kind)this.executeJOIN(f,w,T,E,P);else if("LEFT_JOIN"===T.kind)this.executeLEFT_JOIN(f,w,T,E,P);else if("FILTER"===T.kind){var M=this;this.executeSelectUnit(f,w,T.value,E,function(j){null!=j?o.checkFilters(T,j,!1,w,E,M,P):P([])})}else{if("EMPTY_PATTERN"!==T.kind)throw new a(T.kind);P([])}},QueryEngine.prototype.executeUNION=function(f,w,T,E,P){var M,j,O=T[0],L=T[1],U=null;if(2!=T.length)throw"SPARQL algebra UNION with more than two components";var W=this;h.seq(function(V){try{W.executeSelectUnit(f,w,O,E,function($){M=$,V()})}catch($){U=$,V()}},function(V){if(null==U)try{W.executeSelectUnit(f,w,L,E,function($){j=$,V()})}catch($){U=$,V()}else V()})(function(){if(null!=U)P(U);else{var V=e.unionBindings(M,j);W.runBinds(T.binds,V,w,E,function($,fe){if(null!=$)throw new v("Error processing bind expressions",T.binds,$);o.checkFilters(T,fe,!1,w,E,W,P)})}})},QueryEngine.prototype.executeAndBGP=function(f,w,T,E,P){var M=this;e.executeAndBGPsDPSize(T.value,w,this,E,function(j){null!=j?M.runBinds(T.binds,j,w,E,function(O,L){if(null!=O)throw new v("Error processing bind expressions",T.binds,O);o.checkFilters(T,L,!1,w,E,M,P)}):P(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(f,w,T,E,P){var M=T.lvalue,j=T.rvalue;if("EMPTY_PATTERN"===M.kind)this.executeSelectUnit(f,w,j,E,P);else{var O,L,U=null,W=null,V=null,$=this;h.seq(function(fe){try{$.executeSelectUnit(f,w,M,E,function(ce){U=ce,fe()})}catch(ce){V=ce,fe()}},function(fe){if(null!=V)fe();else try{$.executeSelectUnit(f,w,j,E,function(ce){W=ce,fe()})}catch(ce){V=ce,fe()}})(function(){if(null!=V)P(V);else{var fe=e.leftOuterJoinBindings(U,W);$.runBinds(T.binds,fe,w,E,function(ce,xe){if(null!=ce)throw new v("Error processing bind expressions",T.binds,ce);o.checkFilters(T,fe,!0,w,E,$,function(te){if(U.length>1&&W.length>1){var se=[],ne={};for(var ve in U[0])ne[ve]=!0;for(ve in W[0])1!=ne[ve]&&se.push(ve);O=[],L={};for(var Ce=0;Ce<te.length;Ce++)if(!0===te[Ce].__nullify__){for(var be=0;be<se.length;be++)te[Ce].bindings[se[be]]=null;var de=[],ye=[];for(var ve in te[Ce].bindings)null!=te[Ce].bindings[ve]&&(de.push(ve+te[Ce].bindings[ve]),de.sort(),ye.push(de.join("")));if(null==L[de.join("")]){for(be=0;be<ye.length;be++)L[ye[be]]=!0;O.push(te[Ce].bindings)}}else for(var ve in O.push(te[Ce]),de=[],ye=[],te[Ce])de.push(ve+te[Ce][ve]),de.sort(),L[de.join("")]=!0;P(O)}else P(te)})})}})}},QueryEngine.prototype.executeJOIN=function(f,w,T,E,P){var M=T.lvalue,j=T.rvalue,O=null,L=null,U=null,W=this;h.seq(function(V){try{W.executeSelectUnit(f,w,M,E,function($){O=$,V()})}catch($){U=$,V()}},function(V){if(null!=U)V();else try{W.executeSelectUnit(f,w,j,E,function($){L=$,V()})}catch($){U=$,V()}})(function(){var V=null;if(null!=U)P(U);else if(0===O.length||0===L.length)P([]);else{var $={},fe=[];for(var ce in O[0])$[ce]=!1;for(var ce in L[0])!1===$[ce]&&fe.push(ce);V=0==fe.length||W.abstractQueryTree.treeWithUnion(M)||W.abstractQueryTree.treeWithUnion(j)?e.joinBindings(O,L):e.joinBindings2(fe,O,L),W.runBinds(T.binds,V,w,E,function(xe,te){if(null!=xe)throw new v("Error processing bind expressions",T.binds,xe);o.checkFilters(T,te,!1,w,E,W,P)})}})},QueryEngine.prototype.rangeQuery=function(f,w,T){var E=this;E.normalizeQuad(f,w,!1,function(P){null!=P?E.backend.range(new y.Pattern(P),function(M){null==M||0==M.length?T([]):T(M)}):T(null)})},QueryEngine.prototype.executeUpdate=function(f,w){var T=f.prologue,E=f.units,P=this,M={blanks:{},outCache:{}};this.registerNsInEnvironment(T,M);for(var j=0;j<E.length;j++){var O=P.abstractQueryTree.parseExecutableUnit(E[j]);if("insertdata"===O.kind){var L=null;h.eachSeries(O.quads,function(W,V){null===L?P._executeQuadInsert(W,M,function($){null!=$&&(L=$),V()}):V()},function(){null===L?w(null,!0):w(L)})}else if("deletedata"===O.kind)L=null,h.eachSeries(O.quads,function(W,V){null===L?P._executeQuadDelete(W,M,function($){null!=$&&(L=$),V()}):V()},function(){null===L?w(null,!0):w(L)});else if("modify"===O.kind)this._executeModifyQuery(O,M,w);else if("create"===O.kind)w(!0);else if("load"===O.kind){var U={uri:F.lexicalFormBaseUri(O.sourceGraph,M)};null!=O.destinyGraph&&(U={uri:F.lexicalFormBaseUri(O.destinyGraph,M)}),P=this,this.rdfLoader.load(O.sourceGraph.value,U,function(W,V){W?w(new Error("error batch loading quads")):P.batchLoad(V,function($){null!==$?w(null,$):w(new Error("Error batch loading quads"))})})}else if("drop"===O.kind)this._executeClearGraph(O.destinyGraph,M,w);else{if("clear"!==O.kind)throw new Error("not supported execution unit");this._executeClearGraph(O.destinyGraph,M,w)}}},QueryEngine.prototype.batchLoad=function(f,w){var T=0,E={},P=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification(),h.eachSeries(f,function(M,j){var O={};h.eachSeries(["subject","predicate","object","graph"],function(L,U){!function(W,V,$,fe){var ce;if(W[V].uri||"uri"===W[V].token){var xe=W[V].uri||W[V].value;P.lexicon.registerUri(xe,function(te){var se=function(){null!=W[V].uri&&(W[V]={token:"uri",value:W[V].uri},delete W[V].uri),$[V]=te,fe()};"graph"===V?P.lexicon.registerGraph(te,xe,function(){se()}):se()})}else W[V].literal||"literal"===W[V].token?P.lexicon.registerLiteral(W[V].literal||W[V].value,function(te){null!=W[V].literal&&(W[V]=P.lexicon.parseLiteral(W[V].literal),delete W[V].literal),$[V]=te,fe()}):null==(ce=E[W[V].blank||W[V].value])?P.lexicon.registerBlank(function(te){E[W[V].blank||W[V].value]=te,null==W[V].token&&(W[V].token="blank",W[V].value=W[V].blank,delete W[V].blank),$[V]=te,fe()}):(null==W[V].token&&(W[V].token="blank",W[V].value=W[V].blank,delete W[V].blank),$[V]=ce,fe())}(M,L,O,U)},function(){var L=M;M=O;var U=new y.NodeKey(M);P.backend.search(U,function(W){W?j():P.backend.index(U,function(V){V&&(P.eventsOnBatchLoad&&P.callbacksBackend.nextGraphModification(m.added,[L,M]),T+=1),j()})})})},function(){null!=P.lexicon.updateAfterWrite&&P.lexicon.updateAfterWrite();var M=function(){w(T)};P.eventsOnBatchLoad?P.callbacksBackend.endGraphModification(M()):M()})},QueryEngine.prototype._executeModifyQuery=function(f,w,T){var E=this,P=!0,M=new Error("Error executing modify query"),j=null,O=["subject","predicate","object","graph"];f.insert=null==f.insert?[]:f.insert,f.delete=null==f.delete?[]:f.delete,h.seq(function(L){var U=[],W=[];if(null!=f.with&&U.push(f.with),null!=f.using){W=[];for(var V=0;V<f.using.length;V++){var $=f.using[V];"named"===$.kind?W.push($.uri):U.push($.uri)}}f.dataset={},f.projection=[{token:"variable",kind:"*"}],E.executeSelect(f,w,U,W,function(fe,ce){if(fe)return M=fe,P=!1,L();E.denormalizeBindingsList(ce,w,function(xe){null!=xe?j=xe:(M=new Error("Error denormalizing bindings list"),P=!1),L()})})},function(L){var U=f.with;if(P){for(var W=[],V=0;V<f.delete.length;V++)for(var $=f.delete[V],fe=0;fe<j.length;fe++){for(var ce={},xe=j[fe],te=0;te<O.length;te++){var se=O[te];"graph"==se&&null==$[se]?ce.graph=U:"var"===$[se].token?ce[se]=xe[$[se].value]:ce[se]=$[se]}W.push(ce)}h.eachSeries(W,function(ne,ve){E._executeQuadDelete(ne,w,function(){ve()})},function(){L()})}else L()},function(L){var U=f.with;if(P){for(var W=[],V=0;V<f.insert.length;V++)for(var $=f.insert[V],fe=0;fe<j.length;fe++){for(var ce={},xe=j[fe],te=0;te<O.length;te++){var se=O[te];"graph"==se&&null==$[se]?ce.graph=U:"var"===$[se].token?ce[se]=xe[$[se].value]:ce[se]=$[se]}W.push(ce)}h.eachSeries(W,function(ne,ve){E._executeQuadInsert(ne,w,function(){ve()})},function(){L()})}else L()})(function(){T(P?null:M)})},QueryEngine.prototype._executeQuadInsert=function(f,w,T){var E,P=this,M=!1,j=null;h.seq(function(O){P.normalizeQuad(f,w,!0,function(L){null!=L?E=L:(M=!0,j="Error normalizing quad."),O()})},function(O){if(!1===M){var L=new y.NodeKey(E);P.backend.search(L,function(U){!0===U?O():P.backend.index(L,function(){P.callbacksBackend.nextGraphModification(m.added,[f,E]),O()})})}else O()})(function(){M?T(new Error(j)):T(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(f,w,T){var E,P,M,j=this,O=!1;h.seq(function(L){j.normalizeQuad(f,w,!0,function(U){null!=U?E=U:(O=!0,P="Error normalizing quad."),L()})},function(L){!1===O?(M=new y.NodeKey(E),j.backend.delete(M,function(){L()})):L()},function(L){!1===O?j.lexicon.unregister(f,M,function(){j.callbacksBackend.nextGraphModification(m.deleted,[f,E]),L()}):L()})(function(){O?T(new Error(P)):T(null,!0)})},QueryEngine.prototype._executeClearGraph=function(f,w,T){var E=this;if("default"===f)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",T);else if("named"===f)E.lexicon.registeredGraphs(!0,function(M){if(null!=M){var j=!1;h.eachSeries(M,function(O,L){j?L():E.execute("DELETE { GRAPH <"+O+"> { ?s ?p ?o } } WHERE { GRAPH <"+O+"> { ?s ?p ?o } }",function(U,W){U?(j=U,L()):E.lexicon.resolveUri(O,function(V){-1!=V?E.lexicon.knownGraphs.delete(V,function(){L()}):(j="Cannot find graph "+O+" to clear it",L())})})},function(){T(!j)})}else T(!1,"Error deleting named graphs")});else if("all"===f)E=this,this.execute("CLEAR DEFAULT",function(M,j){M?T(!1,j):E.execute("CLEAR NAMED",T)});else if("uri"==f.token){var P=F.lexicalFormBaseUri(f,w);null!=P?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+P+"> { ?s ?p ?o } } WHERE { GRAPH <"+P+"> { ?s ?p ?o } }",function(M){E.callbacksBackend.ongoingModification=!1,T(M)})):T(!1,"wrong graph URI")}else T(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(f,w){if("singleGroup"===f)return!0;for(var T={},E=0;E<f.length;E++){var P=f[E];"var"===P.token?T[P.value]=!0:"aliased_expression"===P.token&&(T[P.alias.value]=!0)}for(E=0;E<w.length;E++){var M=w[E];if("var"===M.kind){if(null==T[M.value.value])return!1}else if("aliased"===M.kind&&M.expression&&"var"===M.expression.primaryexpression&&null==T[M.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(f,w,T,E,P){var M=this,j=w;null!=f&&f.length>0?M.copyDenormalizedBindings(w,E.outCache,function(O){for(var L=0;L<w.length;L++)for(var U=0;U<f.length;U++){var W=f[U],V=O[L],$=o.runFilter(W.expression,V,M,T,E);o.isEbvError($)?P($):j[L][W.as.value]=$}P(null,w)}):P(null,w)},QueryEngine.prototype.computeCosts=function(f,w,T){for(var E=0;E<f.length;E++)f[E]._cost=this.quadCost(f[E],w);T(f)},QueryEngine.prototype.quadCost=function(f,w){return 1},QueryEngine.prototype.registerDefaultNamespace=function(f,w){this.defaultPrefixes[f]=w},ie.exports={QueryEngine}},{"./abstract_query_tree":122,"./graph_callbacks":124,"./quad_index":132,"./query_filters":134,"./query_plan":135,"./rdf_loader":136,"./rdf_model":137,"./utils":140}],134:[function(J,ie,ue){var q=J("./utils"),a=q,F=J("./utils");QueryFilters={};var y="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(e,o,u,d,m,h,k){var v=[];e.filter&&"function"!=typeof e.filter&&(v=e.filter);var f=[];if(null==v||0===v.length||null!=e.length)return k(o);QueryFilters.preprocessExistentialFilters(v,o,h,d,m,function(w){F.eachSeries(w,function(T,E){QueryFilters.run(T.value,o,u,d,m,h,function(P){for(var M=[],j=0;j<P.length;j++){var O=P[j];null!=O.__nullify__?f.push(O):M.push(O)}o=M,E()})},function(){k(o.concat(f))})})},QueryFilters.preprocessExistentialFilters=function(e,o,u,d,m,h){var k=[];F.eachSeries(e,function(v,f){if("builtincall"!==v.value.expressionType||"exists"!==v.value.builtincall&&"notexists"!==v.value.builtincall)if("conditionalor"===v.value.expressionType||"conditionaland"===v.value.expressionType){var w=a.map(v.value.operands,function(M){return{value:M}});QueryFilters.preprocessExistentialFilters(w,o,u,d,m,function(M){v.value.operands=M.map(function(j){return j.value}),k.push(v),f()})}else"multiplicativeexpression"===v.value.expressionType?(w=a.map(v.value.factors,function(M){return{value:M}}),QueryFilters.preprocessExistentialFilters(w,o,u,d,m,function(M){v.value.factors=M.map(function(j){return j.value}),k.push(v),f()})):"additiveexpression"===v.value.expressionType?(w=a.map(v.value.summands,function(M){return{value:M}}),QueryFilters.preprocessExistentialFilters(w,o,u,d,m,function(M){v.value.summands=M.map(function(j){return j.value}),k.push(v),f()})):"relationalexpression"===v.value.expressionType?(w=[{value:v.value.op1},{value:v.value.op2}],QueryFilters.preprocessExistentialFilters(w,o,u,d,m,function(M){v.value.op1=M[0].value,v.value.op2=M[1].value,k.push(v),f()})):"irireforfunction"!==v.value.expressionType&&"custom"!==v.value.expressionType||null==v.value.args?(k.push(v),f()):(w=a.map(v.value.args,function(M){return{value:M}}),QueryFilters.preprocessExistentialFilters(w,o,u,d,m,function(M){v.value.args=M.map(function(j){return j.value}),k.push(v),f()}));else{var T=v.value.builtincall,E=v.value.args,P={};u.copyDenormalizedBindings(o,m.outCache,function(M){F.eachSeries(M,function(j,O){var L=a.clone(E[0],!0),U=u.abstractQueryTree.parseSelect({pattern:L},j);U=u.abstractQueryTree.bind(U.pattern,j),u.executeSelectUnit([{kind:"*"}],d,U,m,function(W){var V;V="exists"===T?QueryFilters.ebvBoolean(0!==W.length):QueryFilters.ebvBoolean(0===W.length);var $=[];for(var fe in j)$.push(JSON.stringify(j[fe]));$=$.sort().join(""),P[$]=V,O()})},function(){v.value.origArgs=v.value.args,v.value.args=P,k.push(v),f()})})}},function(){h(k)})},QueryFilters.boundVars=function(e){if(null==e.expressionType)throw"Cannot find bound expressions in a no expression token";var o=e.expressionType;if("relationalexpression"==o){var u=e.op1,d=e.op2;return QueryFilters.boundVars(u)+QueryFilters.boundVars(d)}if("conditionalor"==o||"conditionaland"==o){for(var m=[],h=0;h<e.operands;h++)m=m.concat(QueryFilters.boundVars(e.operands[h]));return m}if("builtincall"==o){if(null==e.args)return[];var k=[];for(h=0;h<e.args.length;h++)k=k.concat(QueryFilters.boundVars(e.args[h]));return k}if("multiplicativeexpression"==o){k=QueryFilters.boundVars(e.factor);for(h=0;h<e.factors.length;h++)k=k.concat(QueryFilters.boundVars(e.factors[h].expression));return k}if("additiveexpression"==o){for(k=QueryFilters.boundVars(e.summand),h=0;h<e.summands.length;h++)k=k.concat(QueryFilters.boundVars(e.summands[h].expression));return k}return"regex"==o?(k=QueryFilters.boundVars(e.expression1)).concat(QueryFilters.boundVars(e.expression2)):"unaryexpression"==o?QueryFilters.boundVars(e.expression):"atomic"==o?"var"==e.primaryexpression?[e.value]:[]:void 0},QueryFilters.run=function(e,o,u,d,m,h,k){h.copyDenormalizedBindings(o,m.outCache,function(v){for(var f=[],w=0;w<o.length;w++){var T=v[w],E=QueryFilters.runFilter(e,T,h,d,m);if(E=QueryFilters.ebv(E),QueryFilters.isEbvError(E)){if(u){var P={__nullify__:!0,bindings:o[w]};f.push(P)}}else!0===E?f.push(o[w]):u&&(P={__nullify__:!0,bindings:o[w]},f.push(P))}k(f)})},QueryFilters.collect=function(e,o,u,d,m,h){m.copyDenormalizedBindings(o,d.outCache,function(k){for(var v=[],f=0;f<k.length;f++){var w=k[f],T=QueryFilters.runFilter(e,w,m,u,d);v.push({binding:o[f],value:T})}return h(v)})},QueryFilters.runDistinct=function(e,o){},QueryFilters.runAggregator=function(e,o,u,d,m){if(null==o||0===o.length)return QueryFilters.ebvError();if("variable"===e.token&&"var"==e.kind)return o[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return o[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var h=null,k=0;k<o.length;k++){var v=o[k],f=QueryFilters.runFilter(e.expression.expression,v,u,d,m);QueryFilters.isEbvError(f)||(null===h||!0===QueryFilters.runLtFunction(h,f).value)&&(h=f)}return null===h?QueryFilters.ebvError():h}if("min"===e.expression.aggregateType){var w=null;for(k=0;k<o.length;k++)v=o[k],f=QueryFilters.runFilter(e.expression.expression,v,u,d,m),QueryFilters.isEbvError(f)||(null===w||!0===QueryFilters.runGtFunction(w,f).value)&&(w=f);return null===w?QueryFilters.ebvError():w}if("count"===e.expression.aggregateType){var T={},E=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(k=0;k<o.length;k++)v=o[k],null==T[j=q.hashTerm(v)]&&(T[j]=!0,E++);else E=o.length;else for(k=0;k<o.length;k++)v=o[k],f=QueryFilters.runFilter(e.expression.expression,v,u,d,m),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==T[j=q.hashTerm(f)]&&(T[j]=!0,E++):E++);return{token:"literal",type:y+"integer",value:""+E}}if("avg"===e.expression.aggregateType){T={};var P={token:"literal",type:y+"integer",value:"0"};for(E=0,k=0;k<o.length;k++)v=o[k],f=QueryFilters.runFilter(e.expression.expression,v,u,d,m),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==T[j=q.hashTerm(f)]&&(T[j]=!0,QueryFilters.isNumeric(f)&&(P=QueryFilters.runSumFunction(P,f),E++)):QueryFilters.isNumeric(f)&&(P=QueryFilters.runSumFunction(P,f),E++));var M=QueryFilters.runDivFunction(P,{token:"literal",type:y+"integer",value:""+E});return M.value=""+M.value,M}if("sum"===e.expression.aggregateType){for(T={},P={token:"literal",type:y+"integer",value:"0"},k=0;k<o.length;k++){var j;v=o[k],f=QueryFilters.runFilter(e.expression.expression,v,u,d,m),QueryFilters.isEbvError(f)||(null!=e.expression.distinct&&""!=e.expression.distinct?null==T[j=q.hashTerm(f)]&&(T[j]=!0,QueryFilters.isNumeric(f)&&(P=QueryFilters.runSumFunction(P,f))):QueryFilters.isNumeric(f)&&(P=QueryFilters.runSumFunction(P,f)))}return P.value=""+P.value,P}return QueryFilters.runFilter(aggregate.expression,o[0],d,{blanks:{},outCache:{}})}}},QueryFilters.runFilter=function(e,o,u,d,m){if(null!=e.expressionType){var h=e.expressionType;if("relationalexpression"==h){var k=QueryFilters.runFilter(e.op1,o,u,d,m),v=QueryFilters.runFilter(e.op2,o,u,d,m);return QueryFilters.runRelationalFilter(e,k,v,o,u,d,m)}if("conditionalor"==h)return QueryFilters.runOrFunction(e,o,u,d,m);if("conditionaland"==h)return QueryFilters.runAndFunction(e,o,u,d,m);if("additiveexpression"==h)return QueryFilters.runAddition(e.summand,e.summands,o,u,d,m);if("builtincall"==h)return QueryFilters.runBuiltInCall(e.builtincall,e.args,o,u,d,m);if("multiplicativeexpression"==h)return QueryFilters.runMultiplication(e.factor,e.factors,o,u,d,m);if("unaryexpression"==h)return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,o,u,d,m);if("irireforfunction"==h)return QueryFilters.runIriRefOrFunction(e.iriref,e.args,o,u,d,m);if("regex"==h)return QueryFilters.runRegex(e.text,e.pattern,e.flags,o,u,d,m);if("custom"==h)return QueryFilters.runBuiltInCall(e.name,e.args,o,u,d,m);if("atomic"==h)return"var"==e.primaryexpression?o[e.value.value]:("object"!=typeof e.value||null==e.value.type||"object"!=typeof e.value.type||(e.value.type=q.lexicalFormBaseUri(e.value.type,m)),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return null!=e&&!!(e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token)},QueryFilters.RDFTermEquality=function(e,o,u,d){return"literal"===e.token&&"literal"===o.token?e.lang==o.lang&&e.type==o.type&&e.value==o.value||(null!=e.type&&null!=o.type||QueryFilters.isSimpleLiteral(e)&&null!=o.type||!(!QueryFilters.isSimpleLiteral(o)||null==e.type))&&QueryFilters.ebvError():"uri"===e.token&&"uri"===o.token?q.lexicalFormBaseUri(e,d)==q.lexicalFormBaseUri(o,d):"blank"===e.token&&"blank"===o.token&&e.value==o.value},QueryFilters.isInteger=function(e){return null!=e&&"literal"===e.token&&(e.type==y+"integer"||e.type==y+"decimal"||e.type==y+"double"||e.type==y+"nonPositiveInteger"||e.type==y+"negativeInteger"||e.type==y+"long"||e.type==y+"int"||e.type==y+"short"||e.type==y+"byte"||e.type==y+"nonNegativeInteger"||e.type==y+"unsignedLong"||e.type==y+"unsignedInt"||e.type==y+"unsignedShort"||e.type==y+"unsignedByte"||e.type==y+"positiveInteger")},QueryFilters.isFloat=function(e){return null!=e&&"literal"===e.token&&e.type==y+"float"},QueryFilters.isDecimal=function(e){return null!=e&&"literal"===e.token&&e.type==y+"decimal"},QueryFilters.isDouble=function(e){return null!=e&&"literal"===e.token&&e.type==y+"double"},QueryFilters.isNumeric=function(e){return null!=e&&"literal"===e.token&&(e.type==y+"integer"||e.type==y+"decimal"||e.type==y+"float"||e.type==y+"double"||e.type==y+"nonPositiveInteger"||e.type==y+"negativeInteger"||e.type==y+"long"||e.type==y+"int"||e.type==y+"short"||e.type==y+"byte"||e.type==y+"nonNegativeInteger"||e.type==y+"unsignedLong"||e.type==y+"unsignedInt"||e.type==y+"unsignedShort"||e.type==y+"unsignedByte"||e.type==y+"positiveInteger")},QueryFilters.isSimpleLiteral=function(e){return!(!e||"literal"!=e.token)&&null==e.type&&null==e.lang},QueryFilters.isXsdType=function(e,o){return!(!o||"literal"!=o.token)&&o.type==y+""+e},QueryFilters.ebv=function(e){if(null==e||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&"literal"===e.token){if(e.type==y+"integer"||e.type==y+"decimal"||e.type==y+"double"||e.type==y+"nonPositiveInteger"||e.type==y+"negativeInteger"||e.type==y+"long"||e.type==y+"int"||e.type==y+"short"||e.type==y+"byte"||e.type==y+"nonNegativeInteger"||e.type==y+"unsignedLong"||e.type==y+"unsignedInt"||e.type==y+"unsignedShort"||e.type==y+"unsignedByte"||e.type==y+"positiveInteger"){var o=parseFloat(e.value);return!isNaN(o)&&0!=parseFloat(e.value)}return e.type===y+"boolean"?"true"===e.value||!0===e.value||"True"===e.value:e.type===y+"string"?""!=e.value:e.type===y+"dateTime"?null!=new Date(e.value):QueryFilters.isEbvError(e)?e:null==e.type?""!=e.value:QueryFilters.ebvError()}return!0===e.value},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:y+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:y+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(e){return"object"==typeof e&&null!=e&&"https://github.com/antoniogarrote/js-tools/types#error"===e.type},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:!0===e?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,o,u,d,m,h,k){var v=e.operator;if("="===v)return QueryFilters.runEqualityFunction(o,u,d,m,h,k);if("!="===v){var f=QueryFilters.runEqualityFunction(o,u,d,m,h,k);return QueryFilters.isEbvError(f)||(f.value=!f.value),f}if("<"===v)return QueryFilters.runLtFunction(o,u,d);if(">"===v)return QueryFilters.runGtFunction(o,u,d);if("<="===v)return QueryFilters.runLtEqFunction(o,u,d);if(">="===v)return QueryFilters.runGtEqFunction(o,u,d);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==y+"integer")return parseInt(e.value);if(e.type==y+"decimal"||e.type==y+"float"||e.type==y+"double"||e.type==y+"nonPositiveInteger")return parseFloat(e.value);if(e.type==y+"negativeInteger"||e.type==y+"long"||e.type==y+"int"||e.type==y+"short"||e.type==y+"byte"||e.type==y+"nonNegativeInteger"||e.type==y+"unsignedLong"||e.type==y+"unsignedInt"||e.type==y+"unsignedShort"||e.type==y+"unsignedByte"||e.type==y+"positiveInteger")return parseInt(e.value);if(e.type!=y+"date"&&e.type!=y+"dateTime")return e.type==y+"boolean"?!0===e.value||"true"===e.value||"1"===e.value||1===e.value||!0===e.value||!1!==e.value&&"false"!==e.value&&"0"!==e.value&&0!==e.value&&!1!==e.value&&void 0:e.type==y+"string"?null===e.value||void 0===e.value?void 0:""+e.value:(e.type,e.value);try{return q.parseISO8601(e.value)}catch(o){return null}},QueryFilters.runOrFunction=function(e,o,u,d,m){for(var h=null,k=0;k<e.operands.length;k++){var v=QueryFilters.runFilter(e.operands[k],o,u,d,m);0==QueryFilters.isEbvError(v)&&(v=QueryFilters.ebv(v)),null==h?h=v:QueryFilters.isEbvError(v)?h=QueryFilters.isEbvError(h)?QueryFilters.ebvError():!0===h||QueryFilters.ebvError():!0===v?h=!0:QueryFilters.isEbvError(h)&&(h=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(h)},QueryFilters.runAndFunction=function(e,o,u,d,m){for(var h=null,k=0;k<e.operands.length;k++){var v=QueryFilters.runFilter(e.operands[k],o,u,d,m);0==QueryFilters.isEbvError(v)&&(v=QueryFilters.ebv(v)),null==h?h=v:QueryFilters.isEbvError(v)?h=(QueryFilters.isEbvError(h)||!0===h)&&QueryFilters.ebvError():!0===v?QueryFilters.isEbvError(h)&&(h=QueryFilters.ebvError()):h=!1}return QueryFilters.ebvBoolean(h)},QueryFilters.runEqualityFunction=function(e,o,u,d,m,h){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)){var k=QueryFilters.effectiveTypeValue(e),v=QueryFilters.effectiveTypeValue(o);return isNaN(k)||isNaN(v)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,o,d,h)):QueryFilters.ebvBoolean(k==v)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",o))||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var f=q.compareDateComponents(e.value,o.value);return null!=f?0==f?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(o)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,o,d,h)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,o,u){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var d=q.compareDateComponents(e.value,o.value);return null!=d?1==d?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,o){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",o)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",o)?QueryFilters.runGtFunction(e,o,[]):e.token&&"uri"===e.token&&o.token&&"uri"===o.token?QueryFilters.ebvBoolean(e.value>o.value):e.token&&"literal"===e.token&&o.token&&"literal"===o.token?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+o.value+o.type+o.lang):e.token&&"blank"===e.token&&o.token&&"blank"===o.token||e.value&&o.value?QueryFilters.ebvBoolean(e.value>o.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,o,u){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var d=q.compareDateComponents(e.value,o.value);return null!=d?-1==d?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,o,u){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var d=q.compareDateComponents(e.value,o.value);return null!=d?-1!=d?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,o,u){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(o)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(o)||QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",o)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",o))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(o));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",o)||QueryFilters.isXsdType("date",o))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",o)||QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",o))return QueryFilters.ebvFalse();var d=q.compareDateComponents(e.value,o.value);return null!=d?1!=d?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,o,u,d,m,h){var k=QueryFilters.runFilter(e,u,d,m,h);if(QueryFilters.isEbvError(k))return QueryFilters.ebvError();var v=k;if(QueryFilters.isNumeric(k)){for(var f=0;f<o.length;f++){var w=QueryFilters.runFilter(o[f].expression,u,d,m,h);if(!QueryFilters.isNumeric(w))return QueryFilters.ebvFalse();"+"===o[f].operator?v=QueryFilters.runSumFunction(v,w):"-"===o[f].operator&&(v=QueryFilters.runSubFunction(v,w))}return v}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var u=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:y+"double",value:u}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:y+"float",value:u}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:y+"decimal",value:u}:{token:"literal",type:y+"integer",value:u}},QueryFilters.runSubFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var u=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:y+"double",value:u}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:y+"float",value:u}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:y+"decimal",value:u}:{token:"literal",type:y+"integer",value:u}},QueryFilters.runMultiplication=function(e,o,u,d,m,h){var k=QueryFilters.runFilter(e,u,d,m,h);if(QueryFilters.isEbvError(k))return k;var v=k;if(QueryFilters.isNumeric(k)){for(var f=0;f<o.length;f++){var w=QueryFilters.runFilter(o[f].expression,u,d,m,h);if(QueryFilters.isEbvError(w))return k;if(!QueryFilters.isNumeric(w))return QueryFilters.ebvFalse();"*"===o[f].operator?v=QueryFilters.runMulFunction(v,w):"/"===o[f].operator&&(v=QueryFilters.runDivFunction(v,w))}return v}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var u=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:y+"double",value:u}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:y+"float",value:u}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:y+"decimal",value:u}:{token:"literal",type:y+"integer",value:u}},QueryFilters.runDivFunction=function(e,o){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(o))return QueryFilters.ebvError();var u=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(o);return QueryFilters.isDouble(e)||QueryFilters.isDouble(o)?{token:"literal",type:y+"double",value:u}:QueryFilters.isFloat(e)||QueryFilters.isFloat(o)?{token:"literal",type:y+"float",value:u}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(o)?{token:"literal",type:y+"decimal",value:u}:{token:"literal",type:y+"integer",value:u}},QueryFilters.runBuiltInCall=function(e,o,u,d,m,h){if("notexists"===e||"exists"===e){var k=[];for(var v in u)k.push(JSON.stringify(u[v]));return o[k=k.sort().join("")]}for(var f=[],w=0;w<o.length;w++)if("var"===o[w].token)f.push(o[w]);else{var T=QueryFilters.runFilter(o[w],u,d,m,h);if(QueryFilters.isEbvError(T))return T;f.push(T)}if("str"===e)return"literal"===f[0].token?{token:"literal",type:null,value:""+f[0].value}:"uri"===f[0].token?{token:"literal",type:null,value:f[0].value}:QueryFilters.ebvFalse();if("lang"===e)return"literal"===f[0].token?null!=f[0].lang?{token:"literal",value:""+f[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===e){if("literal"===f[0].token){var E=f[0];return null!=E.type?"string"==typeof E.type?{token:"uri",value:E.type,prefix:null,suffix:null}:E.type:null==E.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===e)return"literal"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===e)return"blank"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===f[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===e){var P=f[0],M=f[1],j=QueryFilters.RDFTermEquality(P,M,d,h);return QueryFilters.isEbvError(j)&&(j=!1),QueryFilters.ebvBoolean(j)}if("langmatches"===e){var O=f[0],L=f[1];return"literal"===O.token&&"literal"===L.token?"*"===L.value&&""!=O.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===O.value.toLowerCase().indexOf(L.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===e){var U=f[0].value;return null==U?QueryFilters.ebvError():null!=u[U]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=d.customFns[e])return d.customFns[e](QueryFilters,f);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,o,u,d,m,h){var k=QueryFilters.runFilter(o,u,d,m,h);if(QueryFilters.isEbvError(k))return k;if("!"===e){var v=QueryFilters.ebv(k);return QueryFilters.isEbvError(v)?QueryFilters.ebvFalse():(v=!v,QueryFilters.ebvBoolean(v))}if("+"===e)return QueryFilters.isNumeric(k)?k:QueryFilters.ebvError();if("-"===e){if(QueryFilters.isNumeric(k)){var f={};for(var w in k)f[w]=k[w];return f.value=-f.value,f}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,o,u,d,m,h,k){if(null==e||(e=QueryFilters.runFilter(e,d,m,h,k),null==o)||(o=QueryFilters.runFilter(o,d,m,h,k),null!=u&&(u=QueryFilters.runFilter(u,d,m,h,k)),null==o||"literal"!==o.token||null!=u&&"literal"!==u.token))return QueryFilters.ebvError();if(o=o.value,u=null==u?null:u.value,null!=e&&"var"==e.token){if(null==d[e.value])return QueryFilters.ebvError();e=d[e.value]}else{if(null==e||"literal"!==e.token||null!=e.type&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}return(null==u?new RegExp(o):new RegExp(o,u.toLowerCase())).exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,o,u){return null==e.value.type||"object"!=typeof e.value.type||(e.value.type=q.lexicalFormBaseUri(e.value.type,u)),e},QueryFilters.runIriRefOrFunction=function(e,o,u,d,m,h){if(null==o)return e;for(var k=[],v=0;v<o.length;v++)k.push(QueryFilters.runFilter(o[v],u,d,m,h));var f=q.lexicalFormBaseUri(e,h);if(f==y+"integer"||f==y+"decimal"||f==y+"double"||f==y+"nonPositiveInteger"||f==y+"negativeInteger"||f==y+"long"||f==y+"int"||f==y+"short"||f==y+"byte"||f==y+"nonNegativeInteger"||f==y+"unsignedLong"||f==y+"unsignedInt"||f==y+"unsignedShort"||f==y+"unsignedByte"||f==y+"positiveInteger"){if("literal"!==(w=k[0]).token)return QueryFilters.ebvError();if((w=QueryFilters.normalizeLiteralDatatype(w,d,h)).type==y+"integer"||w.type==y+"decimal"||w.type==y+"double"||w.type==y+"nonPositiveInteger"||w.type==y+"negativeInteger"||w.type==y+"long"||w.type==y+"int"||w.type==y+"short"||w.type==y+"byte"||w.type==y+"nonNegativeInteger"||w.type==y+"unsignedLong"||w.type==y+"unsignedInt"||w.type==y+"unsignedShort"||w.type==y+"unsignedByte"||w.type==y+"positiveInteger")return w.type=f,w;if("http://www.w3.org/2001/XMLSchema#boolean"==w.type)return 1==QueryFilters.ebv(w)?(w.type=f,w.value=1):(w.type=f,w.value=0),w;if("http://www.w3.org/2001/XMLSchema#float"==w.type||"http://www.w3.org/2001/XMLSchema#double"==w.type)return w.type=f,w.value=parseInt(w.value),w;if("http://www.w3.org/2001/XMLSchema#string"!=w.type&&null!=w.type||w.value.split(".").length>2||w.value.split("-").length>2||w.value.split("/").length>2||w.value.split("+").length>2||f==y+"decimal"&&(-1!=w.value.indexOf("e")||-1!=w.value.indexOf("E"))||!(f!=y+"int"&&f!=y+"integer"||-1==w.value.indexOf("e")&&-1==w.value.indexOf("E")&&-1==w.value.indexOf(".")))return QueryFilters.ebvError();try{return w.value=parseInt(parseFloat(w.value)),isNaN(w.value)?QueryFilters.ebvError():(w.type=f,w)}catch(T){return QueryFilters.ebvError()}}else{if(f==y+"boolean")return"literal"===(w=k[0]).token&&null==w.type?"true"===w.value||"1"===w.value?QueryFilters.ebvTrue():"false"===w.value||"0"===w.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===w.token?QueryFilters.isEbvError(w)?w:QueryFilters.ebvBoolean(w):QueryFilters.ebvError();if(f==y+"string")return"literal"===(w=k[0]).token?(w=QueryFilters.normalizeLiteralDatatype(w,d,h)).type==y+"integer"||w.type==y+"decimal"||w.type==y+"double"||w.type==y+"nonPositiveInteger"||w.type==y+"negativeInteger"||w.type==y+"long"||w.type==y+"int"||w.type==y+"short"||w.type==y+"byte"||w.type==y+"nonNegativeInteger"||w.type==y+"unsignedLong"||w.type==y+"unsignedInt"||w.type==y+"unsignedShort"||w.type==y+"unsignedByte"||w.type==y+"positiveInteger"||w.type==y+"float"?(w.type=f,w.value=""+w.value,w):w.type==y+"string"?w:w.type==y+"boolean"?(QueryFilters.ebv(w)?(w.type=f,w.value="true"):(w.type=f,w.value="false"),w):w.type==y+"dateTime"||w.type==y+"date"?(w.type=f,"string"!=typeof w.value&&(w.value=q.iso8601(w.value)),w):null==w.type?(w.value=""+w.value,w.type=f,w):QueryFilters.ebvError():"uri"===w.token?{token:"literal",value:q.lexicalFormBaseUri(w,h),type:f,lang:null}:QueryFilters.ebvError();if(f==y+"dateTime"||f==y+"date"){if((w=k[0]).type==y+"dateTime"||w.type==y+"date")return w;if(w.type!=y+"string"&&null!=w.type)return QueryFilters.ebvError();try{return w.value=q.iso8601(q.parseISO8601(w.value)),w.type=f,w}catch(T){return QueryFilters.ebvError()}}else{if(f!=y+"float")return null!=d.customFns[f]?d.customFns[f](QueryFilters,k):QueryFilters.ebvError();var w;if("literal"!==(w=k[0]).token)return QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#decimal"==(w=QueryFilters.normalizeLiteralDatatype(w,d,h)).type||"http://www.w3.org/2001/XMLSchema#int"==w.type)return w.type=f,w.value=parseFloat(w.value),w;if("http://www.w3.org/2001/XMLSchema#boolean"==w.type)return 1==QueryFilters.ebv(w)?(w.type=f,w.value=1):(w.type=f,w.value=0),w;if("http://www.w3.org/2001/XMLSchema#float"==w.type||"http://www.w3.org/2001/XMLSchema#double"==w.type)return w.type=f,w.value=parseFloat(w.value),w;if("http://www.w3.org/2001/XMLSchema#string"==w.type)try{return w.value=parseFloat(w.value),isNaN(w.value)?QueryFilters.ebvError():(w.type=f,w)}catch(T){return QueryFilters.ebvError()}else{if(null!=w.type||w.value.split(".").length>2||w.value.split("-").length>2||w.value.split("/").length>2||w.value.split("+").length>2)return QueryFilters.ebvError();try{return w.value=parseFloat(w.value),isNaN(w.value)?QueryFilters.ebvError():(w.type=f,w)}catch(T){return QueryFilters.ebvError()}}}}},ie.exports={QueryFilters}},{"./utils":140}],135:[function(J,ie,ue){var q=J("./utils"),a=J("./utils"),F={variablesInBGP:function(y){var e=y.variables;if(e)return e;var o=y.value||y;for(var u in e=[],o)o[u]&&"var"===o[u].token?e.push(o[u].value):o[u]&&"blank"===o[u].token&&e.push("blank:"+o[u].value);return y.variables=e,e},connected:function(y,e){for(var o="/"+y.vars.join("/")+"/",u=0;u<e.vars.length;u++)if(-1!=o.indexOf("/"+e.vars[u]+"/"))return!0;return!1},variablesIntersectionBGP:function(y,e){return function(o,u){for(var d={},m=0;m<o.lenght;m++)d[o[m]]=1;for(m=0;m<u.length;m++){var h=d[u[m]]||0;h++,d[u[m]]=h}var k=[];for(var v in d)2==d[v]&&k.push(d[v]);return k}(F.variablesInBGP(y),F.variablesInBGP(e))},executeAndBGPsGroups:function(y){for(var e={},o={},u=0,d=function(P,M){for(var j=0;j<P.length;j++){var O="/"+P[j]+"/";if(-1!=M.indexOf(O))return!0}return!1},m=function(P,M,j,O){var L=[],U="",W="";for(var V in M)U+=V,L=L.concat(e[V]),W+=o[V];W=W+w.join("/")+"/",L.push(P),j[U]=L,O[U]=W},h=0;h<y.length;h++){var k=y[h],v={},f={},w=F.variablesInBGP(k),T={};for(var E in o)d(w,o[E])?T[E]=!0:(v[E]=e[E],f[E]=o[E]);0===q.size(T)?(v["g"+u]=[k],f["g"+u]="/"+w.join("/")+"/",u++):m(k,T,v,f),e=v,o=f}return q.values(e)},intersectionSize:function(y,e){for(var o=e.i.split("_"),u=0;u<o.length;u++)if(""!=o[u]&&-1!=y.i.indexOf("_"+o[u]+"_"))return 1;return 0},createJoinTree:function(y,e){for(var o="/"+y.vars.join("/")+"/",u=y.vars.concat([]),d=[],m=0;m<e.vars.length;m++)-1!=o.indexOf("/"+e.vars[m]+"/")?0==e.vars[m].indexOf("_:")?d.push("blank:"+e.vars[m]):d.push(e.vars[m]):u.push(e.vars[m]);var h=e.i.split("_"),k=y.i.split("_"),v={};for(m=0;m<h.length;m++)""!=h[m]&&(v[h[m]]=!0);for(m=0;m<k.length;m++)""!=k[m]&&(v[k[m]]=!0);var f=q.keys(v);return{left:y,right:e,cost:y.cost+e.cost,i:"_"+f.sort().join("_")+"_",vars:u,join:d}},executeBushyTree:function(y,e,o,u,d){null==y.left?F.executeEmptyJoinBGP(y.right,e,o,u,d):null==y.right?F.executeEmptyJoinBGP(y.left,e,o,u,d):F.executeBushyTree(y.left,e,o,u,function(m){null!=m?F.executeBushyTree(y.right,e,o,u,function(h){d(null!=h?F.joinBindings2(y.join,m,h):null)}):d(null)})},executeAndBGPsDPSize:function(y,e,o,u,d){var m=F.executeAndBGPsGroups(y),h=[];a.eachSeries(m,function(k,v){o.computeCosts(k,u,function(f){var w={},T={},E={},P=1,M=null,j={};E[1]=[];for(var O=0;O<f.length;O++){var L=[];for(var U in delete f[O].variables,f[O])"_cost"!=U&&("var"===f[O][U].token||"blank"===f[O][U].token)&&L.push(f[O][U].value);T["_"+O+"_"]={left:f[O],right:null,cost:f[O]._cost,i:"_"+O+"_",vars:L};var W={left:f[O],right:null,cost:f[O]._cost,i:"_"+O+"_",vars:L};w["_"+O+"_"]=W,delete f[O]._cost,j["_"+O+"_"]=!0,E[1].push("_"+O+"_"),(null==M||M.cost>W.cost)&&(M=W)}for(var V=2;V<=f.length;V++)for(var $=1;$<V;$++){var fe=V-$,ce=E[""+$]||[],xe=E[""+fe]||[];for(O=0;O<ce.length;O++)for(var te=0;te<xe.length;te++)if(ce[O]!==xe[te]){var se=T[ce[O]],ne=T[xe[te]];if(0==F.intersectionSize(se,ne)&&F.connected(se,ne)){P=V;var ve=w[se.i],Ce=w[ne.i],be=F.createJoinTree(ve,Ce);if(!j[be.i]){j[be.i]=!0;var de=be.cost+1;null!=w[be.i]&&(de=w[be.i].cost);var ye=E[V]||[];ye.push(be.i),T[be.i]=be,E[V]=ye,de>be.cost&&(P===V&&(M=be),w[be.i]=be)}}}}h.push(M),v()})},function(){var k=null;a.eachSeries(h,function(v,f){F.executeBushyTree(v,e,o,u,function(w){w?null==k?(k=w,f()):(k=F.crossProductBindings(k,w),f()):f("Error executing bushy tree")})},function(v){v?d(null,v):d(k)})})},executeEmptyJoinBGP:function(y,e,o,u,d){return F.executeBGPDatasets(y,e,o,u,d)},executeBGPDatasets:function(y,e,o,u,d){var m={};if(null==y.graph){var h=[];a.eachSeries(e.implicit,function(v,f){null==m[v.oid]?(m[v.oid]=!0,y.graph=v,o.rangeQuery(y,u,function(w){w=F.buildBindingsFromRange(w,y),h.push(w),f()})):f()},function(){var v=F.unionManyBindings(h);d(v)})}else if("var"===y.graph.token){var k=y.graph.value;h=[],a.eachSeries(e.named,function(v,f){null==m[v.oid]?(m[v.oid]=!0,y.graph=v,null!=h?o.rangeQuery(y,u,function(w){if(null!=w){w=F.buildBindingsFromRange(w,y);for(var T=0;T<w.length;T++)w[T][k]=v.oid;h.push(w)}else h=null;f()}):f()):f()},function(){if(null==h)d(null);else{var v=F.unionManyBindings(h);d(v)}})}else o.rangeQuery(y,u,function(v){null!=v?(v=F.buildBindingsFromRange(v,y),d(v)):d(null)})},buildBindingsFromRange:function(y,e){F.variablesInBGP(e);var o=e.value||e,u={};for(f in o)o[f]&&"var"===o[f].token?u[f]=o[f].value:o[f]&&"blank"===o[f].token&&(u[f]="blank:"+o[f].value);var d=[];if(null!=y)for(var m=0;m<y.length;m++){var h={},k=y[m],v=!1;for(var f in u){var w=k[f];if(null!=h[u[f]]&&h[u[f]]!==w){v=!0;break}h[u[f]]=w}v||d.push(h)}return d},areCompatibleBindings:function(y,e){for(var o in y)if(null!=e[o]&&e[o]!=y[o])return!1;return!0},mergeBindings:function(y,e){var o={};for(var u in y)o[u]=y[u];for(var u in e)o[u]=e[u];return o},joinBindings2:function(y,e,o){for(var u,d,m,h,k={},v=[],f=0;f<e.length;f++){u=e[f],h=k;for(var w=0;w<y.length;w++)d=u[y[w]],w==y.length-1?((m=h[d]||[]).push(u),h[d]=m):(m=h[d]||{},h[d]=m,h=m)}for(f=0;f<o.length;f++)for(u=o[f],h=k,w=0;w<y.length;w++)if(null!=h[d=u[y[w]]])if(w==y.length-1)for(var T=0;T<h[d].length;T++)v.push(F.mergeBindings(h[d][T],u));else h=h[d];return v},joinBindings:function(y,e){for(var o=[],u=0;u<y.length;u++)for(var d=y[u],m=0;m<e.length;m++){var h=e[m];F.areCompatibleBindings(d,h)&&o.push(F.mergeBindings(d,h))}return o},augmentMissingBindings:function(y,e){for(var o in e)null==y[o]&&(y[o]=null);return y},leftOuterJoinBindings:function(y,e){for(var o=[],u=0;u<y.length;u++){for(var d=y[u],m=!1,h=0;h<e.length;h++){var k=e[h];F.areCompatibleBindings(d,k)&&(m=!0,o.push(F.mergeBindings(d,k)))}!1===m&&(F.augmentMissingBindings(d,k),o.push(d))}return o},crossProductBindings:function(y,e){for(var o=[],u=0;u<y.length;u++)for(var d=y[u],m=0;m<e.length;m++){var h=e[m];o.push(F.mergeBindings(d,h))}return o},unionBindings:function(y,e){return y.concat(e)},unionManyBindings:function(y){for(var e=[],o=0;o<y.length;o++){var u=y[o];e=F.unionBindings(e,u)}return e}};ie.exports={QueryPlan:F}},{"./utils":140}],136:[function(J,ie,ue){var q=J("./network_transport").NetworkTransport,a=J("./rvn3_parser").RVN3Parser,F=J("./jsonld_parser").JSONLDParser,y=J("./utils"),e=function(o){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":a.parser,"text/n3":a.parser,"application/ld+json":F.parser,"application/json":F.parser},"undefined"!=typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=o)for(var u in o.parsers)this.parsers[u]=o.parsers[u];if(o&&null!=o.precedences)for(var u in this.precedences=o.precedences,o.parsers)y.include(this.precedences,u)||this.precedences.push(u);this.acceptHeaderValue="";for(var d=0;d<this.precedences.length;d++)this.acceptHeaderValue=0!=d?this.acceptHeaderValue+","+this.precedences[d]:this.acceptHeaderValue+this.precedences[d]};e.prototype.registerParser=function(o,u){this.parsers[o]=u,this.precedences.push(o)},e.prototype.unregisterParser=function(o){delete this.parsers[o];for(var u=[],d=0;d<this.precedences.length;d++)this.precedences[d]!=o&&u.push(this.precedences[d]);this.precedences=u},e.prototype.setAcceptHeaderPrecedence=function(o){this.precedences=o},e.prototype.load=function(o,u,d){var m=this;q.load(o,this.acceptHeaderValue,function(h,k){if(h)d(h);else{var v=k.headers["Content-Type"]||k.headers["content-type"],f=k.data;if(null!=v){for(var w in v=v.split(";")[0],m.parsers)if(-1!=w.indexOf("/")){var T=w.split("/");if("*"===T[1]){if(-1!=v.indexOf(T[0]))return m.tryToParse(m.parsers[w],u,f,{documentURI:o},d)}else{if(-1!=v.indexOf(w))return m.tryToParse(m.parsers[w],u,f,{documentURI:o},d);if(-1!=v.indexOf(T[1]))return m.tryToParse(m.parsers[w],u,f,{documentURI:o},d)}}else if(-1!=v.indexOf(w))return m.tryToParse(m.parsers[w],u,f,{documentURI:o},d);d(new Error("Unknown media type : "+v))}else d(new Error("Uknown media type"))}})},e.prototype.loadFromFile=function(o,u,d,m){try{var h=this;J("fs").readFile(d.split("file:/")[1],function(k,v){k?m(k):(v=v.toString("utf8"),h.tryToParse(o,u,v,{documentURI:d},m))})}catch(k){m(k)}},e.prototype.tryToParse=function(o,u,d,m,h){try{"string"==typeof d&&(d=y.normalizeUnicodeLiterals(d)),o.parse(d,u,m,h)}catch(k){console.log(k.message),console.log(k.stack),h(k)}},ie.exports={RDFLoader:e}},{"./jsonld_parser":125,"./network_transport":127,"./rvn3_parser":138,"./utils":140,fs:3}],137:[function(J,ie,ue){var q=J("./utils"),a=J("./query_filters").QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var F={};for(var y in this)q.include(this.interfaceProperties,y)||"function"==typeof this[y]||"defaultNs"===y||"interfaceProperties"===y||(F[y]=this[y]);return F},RDFModel.UrisMap.prototype.get=function(F){if(-1!=F.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[F]},RDFModel.UrisMap.prototype.remove=function(F){if(-1!=F.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[F],null},RDFModel.UrisMap.prototype.set=function(F,y){if(-1!=F.indexOf(" "))throw"Prefix must not contain any whitespaces";this[F]=y},RDFModel.UrisMap.prototype.setDefault=function(F){this.defaultNs=F},RDFModel.UrisMap.prototype.addAll=function(F,y){for(var e in F)q.include(this.interfaceProperties,e)||(null!=this[e]?!0===y&&(this[e]=F[e]):this[e]=F[e]);return this},RDFModel.UrisMap.prototype.resolve=function(F){var y=F.split(":"),e=y[0],o=y[1];return""===e?null==this.defaultNs?null:this.defaultNs+o:null!=this[e]?this[e]+o:null},RDFModel.UrisMap.prototype.shrink=function(F){for(var y in this){var e=this[y];if(0===F.indexOf(e)&&""!==e&&"defaultNs"!=y)return y+":"+F.split(e)[1]}return F},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(F,y){this.prefixes.addAll(F.prefixes,y),this.terms.addAll(F.terms,y)},RDFModel.Profile.prototype.resolve=function(F){return-1!=F.indexOf(":")?this.prefixes.resolve(F):null!=this.terms[F]?this.terms.resolve(F):null},RDFModel.Profile.prototype.setDefaultPrefix=function(F){this.prefixes.setDefault(F)},RDFModel.Profile.prototype.setDefaultVocabulary=function(F){this.terms.setDefault(F)},RDFModel.Profile.prototype.setPrefix=function(F,y){this.prefixes.set(F,y)},RDFModel.Profile.prototype.setTerm=function(F,y){this.terms.set(F,y)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var F=this;for(var y in this.filters={s:function(e){return function(o){return o.subject.equals(e)}},p:function(e){return function(o){return o.predicate.equals(e)}},o:function(e){return function(o){return o.object.equals(e)}},sp:function(e,o){return function(u){return u.subject.equals(e)&&u.predicate.equals(o)}},so:function(e,o){return function(u){return u.subject.equals(e)&&u.object.equals(o)}},po:function(e,o){return function(u){return u.predicate.equals(e)&&u.object.equals(o)}},spo:function(e,o,u){return function(d){return d.subject.equals(e)&&d.predicate.equals(o)&&d.object.equals(u)}},describes:function(e){return function(o){return o.subject.equals(e)||o.object.equals(e)}},type:function(e){var o=F.resolve("rdf:type");return function(u){return u.predicate.equals(o)&&u.object.equals(e)}}},RDFModel.defaultContext)this.prefixes.set(y,RDFModel.defaultContext[y])},RDFModel.RDFEnvironment.prototype=q.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var F=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,F},RDFModel.RDFEnvironment.prototype.createNamedNode=function(F){var y=this.resolve(F);return null!=y?new RDFModel.NamedNode(y):new RDFModel.NamedNode(F)},RDFModel.RDFEnvironment.prototype.createLiteral=function(F,y,e){return null!=e?new RDFModel.Literal(F,y,e.toString()):new RDFModel.Literal(F,y,e)},RDFModel.RDFEnvironment.prototype.createTriple=function(F,y,e){return new RDFModel.Triple(F,y,e)},RDFModel.RDFEnvironment.prototype.createGraph=function(F){var y=new RDFModel.Graph;if(null!=F)for(var e=0;e<F.length;e++)y.add(F[e]);return y},RDFModel.RDFEnvironment.prototype.createAction=function(F,y){return function(e){return F(e)?y(e):e}},RDFModel.RDFEnvironment.prototype.createProfile=function(F){if(!0===F)return new RDFModel.RDFEnvironment.Profile;var y=new RDFModel.RDFEnvironment.Profile;return y.importProfile(this),y},RDFModel.RDFEnvironment.prototype.createTermMap=function(F){if(!0===F)return new RDFModel.UrisMap;var y=this.terms.values(),e=new RDFModel.UrisMap;for(var o in y)e[o]=y[o];return e},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(F){if(!0===F)return new RDFModel.UrisMap;var y=this.prefixes.values(),e=new RDFModel.UrisMap;for(var o in y)e[o]=y[o];return e},RDFModel.RDFNode=function(F){this.interfaceName=F,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(F){if(null==F.interfaceName)return this.valueOf()==F;for(var y in this.attributes){var e=this.attributes[y];if(this[e]!=F[e])return!1}return!0},RDFModel.BlankNode=function(F){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+F,this.bnodeId=F},RDFModel.BlankNode.prototype=q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(F,y,e){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=F,null!=y?this.language=y:null!=e&&(this.datatype=e)},RDFModel.Literal.prototype=q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var F='"'+this.nominalValue+'"';return null!=this.language?F=F+"@"+this.language:(null!=this.datatype||this.type)&&(F=F+"^^<"+(this.datatype||this.type)+">"),F},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return a.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(F){RDFModel.RDFNode.call(this,"NamedNode"),null!=F.value?this.nominalValue=F.value:this.nominalValue=F},RDFModel.NamedNode.prototype=q.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(F,y,e){this.subject=F,this.predicate=y,this.object=e},RDFModel.Triple.prototype.equals=function(F){return this.subject.equals(F.subject)&&this.predicate.equals(F.predicate)&&this.object.equals(F.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(F){for(var y=0;y<this.actions.length;y++)F=this.actions[y](F);var e=F.subject.toString()+F.predicate.toString()+F.object.toString();return this.duplicates[e]||(this.duplicates[e]=!0,this.triples.push(F)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(F,y){if(this.actions.push(F),1==y)for(var e=0;e<this.triples.length;e++)this.triples[e]=F(this.triples[e]);return this},RDFModel.Graph.prototype.addAll=function(F){for(var y=F.toArray(),e=0;e<y.length;e++)this.add(y[e]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(F){for(var y=null,e=0;e<this.triples.length;e++)if(this.triples[e].equals(F)){var o=F.subject.toString()+F.predicate.toString()+F.object.toString();delete this.duplicates[o],y=e;break}return null!=y&&this.triples.splice(y,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(F){for(var y=0;y<this.triples.length;y++)if(!0===F(this.triples[y],this))return!0;return!1},RDFModel.Graph.prototype.every=function(F){for(var y=0;y<this.triples.length;y++)if(!1===F(this.triples[y],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(F){for(var y=new RDFModel.Graph,e=0;e<this.triples.length;e++)!0===F(this.triples[e],this)&&y.add(this.triples[e]);return y},RDFModel.Graph.prototype.forEach=function(F){for(var y=0;y<this.triples.length;y++)F(this.triples[y],this)},RDFModel.Graph.prototype.merge=function(F){for(var y=new RDFModel.Graph,e=0;e<this.triples.length;e++)y.add(this.triples[e]);return y},RDFModel.Graph.prototype.match=function(F,y,e,o){for(var u=new RDFModel.Graph,d=0,m=0;m<this.triples.length;m++){var h=this.triples[m];if((null==F||h.subject.equals(F))&&(null==y||h.predicate.equals(y))&&(null==e||h.object.equals(e))){if(!(null==o||d<o))return u;d++,u.add(h)}}return u},RDFModel.Graph.prototype.removeMatches=function(F,y,e){for(var o=[],u=0;u<this.triples.length;u++){var d=this.triples[u];(null==F||d.subject.equals(F))&&(null==y||d.predicate.equals(y))&&(null==e||d.object.equals(e))&&o.push(d)}for(u=0;u<o.length;u++)this.remove(o[u]);return this},RDFModel.Graph.prototype.toNT=function(){var F="";return this.forEach(function(y){F+=y.toString()}),F},RDFModel.buildRDFResource=function(F,y,e,o){if("blank"===F.token)return RDFModel.buildBlankNode(F,y,e,o);if("literal"===F.token)return RDFModel.buildLiteral(F,y,e,o);if("uri"===F.token)return RDFModel.buildNamedNode(F,y,e,o);if("var"===F.token){var u=y[F.value];return null!=u?RDFModel.buildRDFResource(u,y,e,o):null}return null},RDFModel.buildBlankNode=function(F,y,e,o){return null!=F.valuetmp&&(F.value=F.valuetmp),0===F.value.indexOf("_:")&&(F.value=F.value.split("_:")[1]),new RDFModel.BlankNode(F.value)},RDFModel.buildLiteral=function(F,y,e,o){return new RDFModel.Literal(F.value,F.lang,F.type)},RDFModel.buildNamedNode=function(F,y,e,o){if(null!=F.value)return new RDFModel.NamedNode(F);if(null!=F.prefix){var u=e.resolveNsInEnvironment(F.prefix,o);return F.value=u+F.suffix,new RDFModel.NamedNode(F)}return new RDFModel.NamedNode(F)},RDFModel.rdf=new RDFModel.RDFEnvironment,ie.exports=RDFModel},{"./query_filters":134,"./utils":140}],138:[function(J,ie,ue){var q=J("n3").Parser,a={};function F(y){switch(y[0]){case'"':if(y.indexOf("^^")>0){var e=y.split("^^");return{literal:e[0]+"^^<"+e[1]+">"}}return{literal:y};case"_":return{blank:y.replace("b","")};default:return{token:"uri",value:y,prefix:null,suffix:null}}}a.parser={async:!0,parse:function(y,e,o,u){u||(u=o,o=e,e=null),e&&"string"==typeof e&&(e={token:"uri",value:e,prefix:null,suffix:null}),o&&o.baseURI&&(o.documentIRI=o.baseURI);var d=[];new q(o).parse(y,function(m,h){m?u(m):h?d.push({subject:F(h.subject),predicate:F(h.predicate),object:F(h.object),graph:e}):u(!1,d)})},resetBlankNodeIds:function(){q._resetBlankNodeIds()}},ie.exports={RVN3Parser:a}},{n3:54}],139:[function(J,ie,ue){var q=J("./query_engine").QueryEngine,a=J("./quad_backend").QuadBackend,F=J("./persistent_quad_backend").PersistentQuadBackend,y=J("./lexicon").Lexicon,e=J("./persistent_lexicon").PersistentLexicon,o=J("./rdf_model"),u=J("./utils");Store=function(d,m){var h=null,k=null;if(0==arguments.length)k={};else if(1==arguments.length)k={},h=d;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";k=d,h=m}null==k.treeOrder&&(k.treeOrder=15);var v=y,f=a;!0===k.persistent&&(v=e,f=F),this.functionMap={};var w=this;this.customFns={},new v(function(T){var E=function(){new f(k,function(P){var M=function(){k.backend=P,k.lexicon=T,w.engine=new q(k),h(null,w)};k.overwrite?P.clear(M):M()})};!0===k.overwrite?T.clear(E):E()},k.name)},Store.prototype.rdf=o.rdf,Store.prototype.rdf.api=o,Store.prototype.registerCustomFunction=function(d,m){this.customFns[d]=m,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var d;if(1===arguments.length){d=arguments[0];var m=function(){}}else 2===arguments.length&&(d=arguments[0],m=arguments[1]);this.engine.execute(d,m)}},Store.prototype.executeWithEnvironment=function(){var d,m,h;if(3===arguments.length){d=arguments[0];var k=function(){};m=arguments[1],h=arguments[2]}else 4===arguments.length&&(d=arguments[0],k=arguments[3],m=arguments[1],h=arguments[2]);m=u.map(m,function(v){return{token:"uri",value:v}}),h=u.map(h,function(v){return{token:"uri",value:v}}),this.engine.execute(d,k,m,h)},Store.prototype.graph=function(){var d=null,m=null;if(1===arguments.length)m=arguments[0]||function(){},d=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";m=arguments[1]||function(){},d=arguments[0]}null!=this.rdf.resolve(d)&&(d=this.rdf.resolve(d)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+d+"> { ?s ?p ?o } }",m)},Store.prototype.node=function(){var d=null,m=null,h=null;if(2===arguments.length)h=arguments[0],m=arguments[1]||function(){},d=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";h=arguments[0],d=arguments[1],m=arguments[2]||function(){}}null!=this.rdf.resolve(d)&&(d=this.rdf.resolve(d)),null!=this.rdf.resolve(h)&&(h=this.rdf.resolve(h)),this.engine.execute("CONSTRUCT { <"+h+"> ?p ?o } WHERE { GRAPH <"+d+"> { <"+h+"> ?p ?o } }",m)},Store.prototype.startObservingNode=function(){var d,m,h;2===arguments.length?(d=arguments[0],h=arguments[1],this.engine.callbacksBackend.observeNode(d,h,function(){})):3===arguments.length&&(d=arguments[0],m=arguments[1],h=arguments[2],this.engine.callbacksBackend.observeNode(d,m,h,function(){}))},Store.prototype.stopObservingNode=function(d){this.engine.callbacksBackend.stopObservingNode(d)},Store.prototype.startObservingQuery=function(){var d=arguments[0],m=arguments[1],h=arguments[2];null!=h?this.engine.callbacksBackend.observeQuery(d,m,h):this.engine.callbacksBackend.observeQuery(d,m,function(){})},Store.prototype.stopObservingQuery=function(d){this.engine.callbacksBackend.stopObservingQuery(d)},Store.prototype.subscribe=function(d,m,h,k,v){var f=this,w=function(T,E){var P=[],M={blanks:{},outCache:{}},j=[];u.each(E,function(O){var L=o.buildRDFResource(O.subject,j,f.engine,M),U=o.buildRDFResource(O.predicate,j,f.engine,M),W=o.buildRDFResource(O.object,j,f.engine,M);null!=L&&null!=U&&null!=W&&(O=new o.Triple(L,U,W),P.push(O))}),v(T,P)};this.functionMap[v]=w,this.engine.callbacksBackend.subscribe(d,m,h,k,w,function(){})},Store.prototype.unsubscribe=function(d){var m=this.functionMap[d];this.engine.callbacksBackend.unsubscribe(m),delete this.functionMap[d]},Store.prototype.setPrefix=function(d,m){this.rdf.setPrefix(d,m)},Store.prototype.setDefaultPrefix=function(d){this.rdf.setDefaultPrefix(d)},Store.prototype.insert=function(){var d,m,h;if(1===arguments.length)m=arguments[0],h=function(){};else if(2===arguments.length)m=arguments[0],h=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";m=arguments[0],d=this.rdf.createNamedNode(arguments[1]),h=arguments[2]||function(){}}var k="",v=this;m.forEach(function(f){k=k+v._nodeToQuery(f.subject)+v._nodeToQuery(f.predicate)+v._nodeToQuery(f.object)+"."}),k=null!=d?"INSERT DATA { GRAPH "+this._nodeToQuery(d)+" { "+k+" } }":"INSERT DATA { "+k+" }",this.engine.execute(k,h)},Store.prototype._nodeToQuery=function(d){if("NamedNode"===d.interfaceName){var m=this.rdf.resolve(d.valueOf());return null!=m?"<"+m+">":"<"+d.valueOf()+">"}return d.toString()},Store.prototype.delete=function(){var d,m,h;if(1===arguments.length)m=arguments[0],h=function(){};else if(2===arguments.length)m=arguments[0],h=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";m=arguments[0],d=this.rdf.createNamedNode(arguments[1]),h=arguments[2]||function(){}}var k="",v=this;m.forEach(function(f){k=k+v._nodeToQuery(f.subject)+v._nodeToQuery(f.predicate)+v._nodeToQuery(f.object)+"."}),k=null!=d?"DELETE DATA { GRAPH "+this._nodeToQuery(d)+" { "+k+" } }":"DELETE DATA { "+k+" }",this.engine.execute(k,h)},Store.prototype.clear=function(){var d;if(0===arguments.length){d=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var m=function(){}}else if(1===arguments.length)d=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),m=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";d=this.rdf.createNamedNode(arguments[0]),m=arguments[1]||function(){}}var h="CLEAR GRAPH "+this._nodeToQuery(d);this.engine.execute(h,m)},Store.prototype.setBatchLoadEvents=function(d){this.engine.eventsOnBatchLoad=d},Store.prototype.registerDefaultNamespace=function(d,m){this.rdf.prefixes.set(d,m),this.engine.registerDefaultNamespace(d,m)},Store.prototype.registerDefaultProfileNamespaces=function(){var d=this.rdf.prefixes.values();for(var m in d)this.registerDefaultNamespace(m,d[m])},Store.prototype.load=function(){var d,m,h,k,v={};if(3===arguments.length)h=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),d=arguments[0],m=arguments[1],k=arguments[2]||function(){};else if(4===arguments.length)d=arguments[0],m=arguments[1],"string"==typeof(v=arguments[2])?(h=this.rdf.createNamedNode(v),v={}):(h=this.rdf.createNamedNode(v.graph||this.engine.lexicon.defaultGraphUri),delete v.graph),k=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===d){var f="LOAD <"+(m=this.rdf.createNamedNode(m)).valueOf()+"> INTO GRAPH <"+h.valueOf()+">";this.engine.execute(f,k)}else{var w=this,T=this.engine.rdfLoader.parsers[d];if(!T)return k(new Error("Cannot find parser for the provided media type:"+d));var E=[T,{token:"uri",value:h.valueOf()},m,v,function(P,M){P?k(P,M):w.engine.batchLoad(M,function(j){null!=j?k(null,j):k(new Error("Error batch-loading triples."))})}];m&&"string"==typeof m&&0===m.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,E):this.engine.rdfLoader.tryToParse.apply(null,E)}},Store.prototype.registerParser=function(d,m){this.engine.rdfLoader.registerParser(d,m)},Store.prototype.registeredGraphs=function(d){this.engine.lexicon.registeredGraphs(!0,function(m){var h=u.map(m,function(k){return new o.NamedNode(k)});d(null,h)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(d){NetworkTransport=d},Store.prototype.close=function(d){null==d&&(d=function(){}),this.engine.close?this.engine.close(d):d()},Store.VERSION="0.9.18-alpha.4",Store.yieldFrequency=function(d){u.yieldFrequency(d)},ie.exports.Store=Store,ie.exports.create=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store},ie.exports.connect=function(){(1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))}},{"./lexicon":126,"./persistent_lexicon":129,"./persistent_quad_backend":130,"./quad_backend":131,"./query_engine":133,"./rdf_model":137,"./utils":140}],140:[function(require,module,exports){(function(process){(function(){var slowNextTick=void 0!==process&&process.nextTick?process.nextTick:"undefined"!=typeof window&&window.setImmediate?window.setImmediate:function(J){setTimeout(J,0)},spin=0,yieldFrequency=100,nextTick=function(J){++spin<yieldFrequency?J():(spin=0,slowNextTick(J))},hashTerm=function(J){try{if(null==J)return"";if("uri"===J.token)return"u"+J.value;if("blank"===J.token)return"b"+J.value;if("literal"===J.token){var ie="l"+J.value;return ie+=J.type||"",ie+=J.lang||""}}catch(q){if("object"==typeof J){var ue="";for(p in J)ue=ue+p+J[p];return ue}return J}},lexicalFormBaseUri=function(J,ie){var ue=null;if(ie=ie||{},null==J.value){var q=J.prefix,a=J.suffix,F=ie.namespaces[q];ue=null!=F?F+a:q+":"+a}else ue=J.value;return null===ue?null:(-1==ue.indexOf(":")&&(ue=(ie.base||"")+ue),ue)};parseISO8601=function(J){return Date.parse(J)},Date.prototype.toISOString||function(){function J(ie){return ie<10?"0"+ie:ie}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+J(this.getUTCMonth()+1)+"-"+J(this.getUTCDate())+"T"+J(this.getUTCHours())+":"+J(this.getUTCMinutes())+":"+J(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(J){return J.toISOString()},compareDateComponents=function(J,ie){var ue=parseISO8601(J),q=parseISO8601(ie);return ue==q?0:ue<q?-1:1},lexicalFormLiteral=function(J,ie){var ue=J.value,q=J.lang,a=J.type,F=null;if(null!=ue&&null!=a&&"string"!=typeof a){var y=a.value;if(null==y){var e=a.prefix,o=a.suffix,u=ie.namespaces[e];J.type=u+o,y=u+o}F=-1!=y.indexOf("hexBinary")?'"'+J.value.toLowerCase()+'"^^<'+y+">":'"'+J.value+'"^^<'+y+">"}else F=null==q&&null==a?'"'+ue+'"':null==a?'"'+ue+'"@'+q:-1!=a.indexOf("hexBinary")?'"'+J.value.toLowerCase()+'"^^<'+a+">":'"'+J.value+'"^^<'+a+">";return F},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(J){if("undefined"==typeof window&&void 0!==process&&!1===process.browser){var ie=_dereq_("sqlite3"),ue=_dereq_("indexeddb-js"),q=new ie.Database(":memory:"),a=ue.makeScope("sqlite3",q);J.indexedDB=a.indexedDB,J.IDBKeyRange=a.IDBKeyRange}else{var F;(F="undefined"==typeof window?self:window).indexedDB=F.indexedDB||F.mozIndexedDB||F.webkitIndexedDB||F.msIndexedDB,F.IDBKeyRange=F.IDBKeyRange||F.webkitIDBKeyRange||F.msIDBKeyRange,F.indexedDB?(J.indexedDB=F.indexedDB,J.IDBKeyRange=F.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function J(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return J()+J()+"-"+J()+"-"+J()+"-"+J()+"-"+J()+J()+J()},hashTerm=function(J){try{if(null==J)return"";if("uri"===J.token)return"u"+J.value;if("blank"===J.token)return"b"+J.value;if("literal"===J.token){var ie="l"+J.value;return ie+=J.type||"",ie+=J.lang||""}}catch(q){if("object"==typeof J){var ue="";for(p in J)ue=ue+p+J[p];return ue}return J}};var reject=function(J,ie){for(var ue=[],q=0;q<J.length;q++)ie(J[q])&&ue.push(J[q]);return ue},include=function(J,ie){for(var ue=0;ue<J.length;ue++)if(J[ue]===ie)return!0;return!1},each=function(J,ie){if(J.forEach)J.forEach(ie);else for(var ue=0;ue<J.length;ue++)ie(J[ue])},map=function(J,ie){if(J.map)return J.map(ie);for(var ue=[],q=0;q<J.length;q++)ue[q]=ie(J[q]);return ue},keys=function(J){var ie=[];for(var ue in J)ie.push(ue);return ie},values=function(J){var ie=[];for(var ue in J)ie.push(J[ue]);return ie},size=function(J){if(J.length)return J.length;var ie=0;for(var ue in J)ie++;return ie};clone=function(J){return JSON.parse(JSON.stringify(J))};var isObject=function(J){var ie=typeof J;return"function"==ie||J&&"object"==ie||!1},create=function(){function J(){}return function(ie){if(isObject(ie)){J.prototype=ie;var ue=new J;J.prototype=null}return ue||void 0}}(),whilst=function(J,ie,ue){J()?ie(function(q){if(q)return ue(q);whilst(J,ie,ue)}):ue()},eachSeries=function(J,ie,ue){if(ue=ue||function(){},!J.length)return ue();var q=0,a=function(){ie(J[q],function(F){F?(ue(F),ue=function(){}):(q+=1)>=J.length?ue():nextTick(a)})};a()},eachParallel=function(J,ie,ue){if(ue=ue||function(){},!J.length)return ue();for(var q=!1,a=0,F=function(e){if(e)throw q=!0,new Error(e);q||++a===J.length&&ue()},y=0;y<J.length;y++)!function(e,o,u,d){nextTick(function(){try{d(e[o],function(){u()})}catch(m){u(m)}})}(J,y,F,ie)},reduce=function(J,ie,ue,q){eachSeries(J,function(a,F){ue(ie,a,function(y,e){ie=e,F(y)})},function(a){q(a,ie)})},seq=function(){var J=arguments;return function(){var ie=this,ue=Array.prototype.slice.call(arguments),q=ue.pop();reduce(J,ue,function(a,F,y){F.apply(ie,a.concat([function(){var e=arguments[0],o=Array.prototype.slice.call(arguments,1);y(e,o)}]))},function(a,F){q.apply(ie,[a].concat(F))})}},isWorker=function(){return(void 0===process||!0===process.browser)&&"undefined"==typeof window};module.exports={isWorker,nextTick,hasTerm:hashTerm,lexicalFormBaseUri,parseISO8601,compareDateComponents,iso8601,normalizeUnicodeLiterals,lexicalFormLiteral,registerIndexedDB,guid,hashTerm,keys,values,size,map,each,forEach:each,include,reject,remove:reject,clone,create,whilst,eachSeries,eachParallel,seq,yieldFrequency:function(J){yieldFrequency=J}}}).call(this)}).call(this,require("_process"))},{_process:62}]},{},[139])(139)}),function(J,ie){"object"==typeof exports&&"undefined"!=typeof module?module.exports=ie():"function"==typeof define&&define.amd?define(ie):(J=J||self).CodeMirror=ie()}(this,function(){"use strict";var J=navigator.userAgent,ie=navigator.platform,ue=/gecko\/\d/i.test(J),q=/MSIE \d/.test(J),a=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(J),F=/Edge\/(\d+)/.exec(J),y=q||a||F,e=y&&(q?document.documentMode||6:+(F||a)[1]),o=!F&&/WebKit\//.test(J),u=o&&/Qt\/\d+\.\d+/.test(J),d=!F&&/Chrome\/(\d+)/.exec(J),m=d&&+d[1],h=/Opera\//.test(J),k=/Apple Computer/.test(navigator.vendor),v=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(J),f=/PhantomJS/.test(J),w=k&&(/Mobile\/\w+/.test(J)||navigator.maxTouchPoints>2),T=/Android/.test(J),E=w||T||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(J),P=w||/Mac/.test(ie),M=/\bCrOS\b/.test(J),j=/win/i.test(ie),O=h&&J.match(/Version\/(\d*\.\d*)/);O&&(O=Number(O[1])),O&&O>=15&&(h=!1,o=!0);var L=P&&(u||h&&(null==O||O<12.11)),U=ue||y&&e>=9;function W(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var te,V=function(t,n){var c=t.className,l=W(n).exec(c);if(l){var b=c.slice(l.index+l[0].length);t.className=c.slice(0,l.index)+(b?l[1]+b:"")}};function $(t){for(var n=t.childNodes.length;n>0;--n)t.removeChild(t.firstChild);return t}function fe(t,n){return $(t).appendChild(n)}function ce(t,n,c,l){var b=document.createElement(t);if(c&&(b.className=c),l&&(b.style.cssText=l),"string"==typeof n)b.appendChild(document.createTextNode(n));else if(n)for(var D=0;D<n.length;++D)b.appendChild(n[D]);return b}function xe(t,n,c,l){var b=ce(t,n,c,l);return b.setAttribute("role","presentation"),b}function se(t,n){if(3==n.nodeType&&(n=n.parentNode),t.contains)return t.contains(n);do{if(11==n.nodeType&&(n=n.host),n==t)return!0}while(n=n.parentNode)}function ne(){var t;try{t=document.activeElement}catch(n){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function ve(t,n){var c=t.className;W(n).test(c)||(t.className+=(c?" ":"")+n)}function Ce(t,n){for(var c=t.split(" "),l=0;l<c.length;l++)c[l]&&!W(c[l]).test(n)&&(n+=" "+c[l]);return n}te=document.createRange?function(t,n,c,l){var b=document.createRange();return b.setEnd(l||t,c),b.setStart(t,n),b}:function(t,n,c){var l=document.body.createTextRange();try{l.moveToElementText(t.parentNode)}catch(b){return l}return l.collapse(!0),l.moveEnd("character",c),l.moveStart("character",n),l};var be=function(t){t.select()};function de(t){var n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,n)}}function ye(t,n,c){for(var l in n||(n={}),t)t.hasOwnProperty(l)&&(!1!==c||!n.hasOwnProperty(l))&&(n[l]=t[l]);return n}function Fe(t,n,c,l,b){null==n&&(-1==(n=t.search(/[^\s\u00a0]/))&&(n=t.length));for(var D=l||0,X=b||0;;){var Z=t.indexOf("\t",D);if(Z<0||Z>=n)return X+(n-D);X+=Z-D,X+=c-X%c,D=Z+1}}w?be=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:y&&(be=function(t){try{t.select()}catch(n){}});var Be=function(){this.id=null,this.f=null,this.time=0,this.handler=de(this.onTimeout,this)};function Ie(t,n){for(var c=0;c<t.length;++c)if(t[c]==n)return c;return-1}Be.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},Be.prototype.set=function(t,n){this.f=n;var c=+new Date+t;(!this.id||c<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=c)};var G={toString:function(){return"CodeMirror.Pass"}},H={scroll:!1},ee={origin:"*mouse"},pe={origin:"+move"};function Ne(t,n,c){for(var l=0,b=0;;){var D=t.indexOf("\t",l);-1==D&&(D=t.length);var X=D-l;if(D==t.length||b+X>=n)return l+Math.min(X,n-b);if(b+=D-l,l=D+1,(b+=c-b%c)>=n)return l}}var _e=[""];function Pe(t){for(;_e.length<=t;)_e.push(We(_e)+" ");return _e[t]}function We(t){return t[t.length-1]}function Ye(t,n){for(var c=[],l=0;l<t.length;l++)c[l]=n(t[l],l);return c}function ht(){}function Gt(t,n){var c;return Object.create?c=Object.create(t):(ht.prototype=t,c=new ht),n&&ye(n,c),c}var Xt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Te(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||Xt.test(t))}function Re(t,n){return n?!!(n.source.indexOf("\\w")>-1&&Te(t))||n.test(t):Te(t)}function je(t){for(var n in t)if(t.hasOwnProperty(n)&&t[n])return!1;return!0}var K=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function oe(t){return t.charCodeAt(0)>=768&&K.test(t)}function he(t,n,c){for(;(c<0?n>0:n<t.length)&&oe(t.charAt(n));)n+=c;return n}function me(t,n,c){for(var l=n>c?-1:1;;){if(n==c)return n;var b=(n+c)/2,D=l<0?Math.ceil(b):Math.floor(b);if(D==n)return t(D)?n:c;t(D)?c=D:n=D+l}}var Se=null;function ke(t,n,c){var l;Se=null;for(var b=0;b<t.length;++b){var D=t[b];if(D.from<n&&D.to>n)return b;D.to==n&&(D.from!=D.to&&"before"==c?l=b:Se=b),D.from==n&&(D.from!=D.to&&"before"!=c?l=b:Se=b)}return null!=l?l:Se}var De=function(){function c(ae){return ae<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(ae):1424<=ae&&ae<=1524?"R":1536<=ae&&ae<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(ae-1536):1774<=ae&&ae<=2220?"r":8192<=ae&&ae<=8203?"w":8204==ae?"b":"L"}var l=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,b=/[stwN]/,D=/[LRr]/,X=/[Lb1n]/,Z=/[1n]/;function re(ae,we,Ee){this.level=ae,this.from=we,this.to=Ee}return function(ae,we){var Ee="ltr"==we?"L":"R";if(0==ae.length||"ltr"==we&&!l.test(ae))return!1;for(var Ue=ae.length,Qe=[],Ze=0;Ze<Ue;++Ze)Qe.push(c(ae.charCodeAt(Ze)));for(var tt=0,st=Ee;tt<Ue;++tt){var ut=Qe[tt];"m"==ut?Qe[tt]=st:st=ut}for(var dt=0,ft=Ee;dt<Ue;++dt){var yt=Qe[dt];"1"==yt&&"r"==ft?Qe[dt]="n":D.test(yt)&&(ft=yt,"r"==yt&&(Qe[dt]="R"))}for(var wt=1,xt=Qe[0];wt<Ue-1;++wt){var Et=Qe[wt];"+"==Et&&"1"==xt&&"1"==Qe[wt+1]?Qe[wt]="1":","==Et&&xt==Qe[wt+1]&&("1"==xt||"n"==xt)&&(Qe[wt]=xt),xt=Et}for(var Bt=0;Bt<Ue;++Bt){var sr=Qe[Bt];if(","==sr)Qe[Bt]="N";else if("%"==sr){var Ut=void 0;for(Ut=Bt+1;Ut<Ue&&"%"==Qe[Ut];++Ut);for(var Fr=Bt&&"!"==Qe[Bt-1]||Ut<Ue&&"1"==Qe[Ut]?"1":"N",wr=Bt;wr<Ut;++wr)Qe[wr]=Fr;Bt=Ut-1}}for(var Vt=0,kr=Ee;Vt<Ue;++Vt){var ar=Qe[Vt];"L"==kr&&"1"==ar?Qe[Vt]="L":D.test(ar)&&(kr=ar)}for(var tr=0;tr<Ue;++tr)if(b.test(Qe[tr])){var Zt=void 0;for(Zt=tr+1;Zt<Ue&&b.test(Qe[Zt]);++Zt);for(var Ht="L"==(tr?Qe[tr-1]:Ee),ii=Ht==("L"==(Zt<Ue?Qe[Zt]:Ee))?Ht?"L":"R":Ee,Tn=tr;Tn<Zt;++Tn)Qe[Tn]=ii;tr=Zt-1}for(var $r,cr=[],rr=0;rr<Ue;)if(X.test(Qe[rr])){var ga=rr;for(++rr;rr<Ue&&X.test(Qe[rr]);++rr);cr.push(new re(0,ga,rr))}else{var en=rr,oi=cr.length,Nn="rtl"==we?1:0;for(++rr;rr<Ue&&"L"!=Qe[rr];++rr);for(var dr=en;dr<rr;)if(Z.test(Qe[dr])){en<dr&&(cr.splice(oi,0,new re(1,en,dr)),oi+=Nn);var Ti=dr;for(++dr;dr<rr&&Z.test(Qe[dr]);++dr);cr.splice(oi,0,new re(2,Ti,dr)),oi+=Nn,en=dr}else++dr;en<rr&&cr.splice(oi,0,new re(1,en,rr))}return"ltr"==we&&(1==cr[0].level&&($r=ae.match(/^\s+/))&&(cr[0].from=$r[0].length,cr.unshift(new re(0,0,$r[0].length))),1==We(cr).level&&($r=ae.match(/\s+$/))&&(We(cr).to-=$r[0].length,cr.push(new re(0,Ue-$r[0].length,Ue)))),"rtl"==we?cr.reverse():cr}}();function He(t,n){var c=t.order;return null==c&&(c=t.order=De(t.text,n)),c}var $e=[],Xe=function(t,n,c){if(t.addEventListener)t.addEventListener(n,c,!1);else if(t.attachEvent)t.attachEvent("on"+n,c);else{var l=t._handlers||(t._handlers={});l[n]=(l[n]||$e).concat(c)}};function Ke(t,n){return t._handlers&&t._handlers[n]||$e}function ct(t,n,c){if(t.removeEventListener)t.removeEventListener(n,c,!1);else if(t.detachEvent)t.detachEvent("on"+n,c);else{var l=t._handlers,b=l&&l[n];if(b){var D=Ie(b,c);D>-1&&(l[n]=b.slice(0,D).concat(b.slice(D+1)))}}}function vt(t,n){var c=Ke(t,n);if(c.length)for(var l=Array.prototype.slice.call(arguments,2),b=0;b<c.length;++b)c[b].apply(null,l)}function pt(t,n,c){return"string"==typeof n&&(n={type:n,preventDefault:function(){this.defaultPrevented=!0}}),vt(t,c||n.type,t,n),Ot(n)||n.codemirrorIgnore}function _t(t){var n=t._handlers&&t._handlers.cursorActivity;if(n)for(var c=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),l=0;l<n.length;++l)-1==Ie(c,n[l])&&c.push(n[l])}function kt(t,n){return Ke(t,n).length>0}function gt(t){t.prototype.on=function(n,c){Xe(this,n,c)},t.prototype.off=function(n,c){ct(this,n,c)}}function it(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Nt(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Ot(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function At(t){it(t),Nt(t)}function On(t){return t.target||t.srcElement}function Ri(t){var n=t.which;return null==n&&(1&t.button?n=1:2&t.button?n=3:4&t.button&&(n=2)),P&&t.ctrlKey&&1==n&&(n=3),n}var ji,Di,fs=function(){if(y&&e<9)return!1;var t=ce("div");return"draggable"in t||"dragDrop"in t}();function cs(t){if(null==ji){var n=ce("span","\u200b");fe(t,ce("span",[n,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(ji=n.offsetWidth<=1&&n.offsetHeight>2&&!(y&&e<8))}var c=ji?ce("span","\u200b"):ce("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return c.setAttribute("cm-text",""),c}function hs(t){if(null!=Di)return Di;var n=fe(t,document.createTextNode("A\u062eA")),c=te(n,0,1).getBoundingClientRect(),l=te(n,1,2).getBoundingClientRect();return $(t),!(!c||c.left==c.right)&&(Di=l.right-c.right<3)}var t,Hr=3!="\n\nb".split(/\n/).length?function(t){for(var n=0,c=[],l=t.length;n<=l;){var b=t.indexOf("\n",n);-1==b&&(b=t.length);var D=t.slice(n,"\r"==t.charAt(b-1)?b-1:b),X=D.indexOf("\r");-1!=X?(c.push(D.slice(0,X)),n+=X+1):(c.push(D),n=b+1)}return c}:function(t){return t.split(/\r\n?|\n/)},li=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(n){return!1}}:function(t){var n;try{n=t.ownerDocument.selection.createRange()}catch(c){}return!(!n||n.parentElement()!=t)&&0!=n.compareEndPoints("StartToEnd",n)},rn="oncopy"in(t=ce("div"))||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy),hn=null;var Wr={},nn={};function Mi(t,n){arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),Wr[t]=n}function Er(t){if("string"==typeof t&&nn.hasOwnProperty(t))t=nn[t];else if(t&&"string"==typeof t.name&&nn.hasOwnProperty(t.name)){var n=nn[t.name];"string"==typeof n&&(n={name:n}),(t=Gt(n,t)).name=n.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Er("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Er("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Pi(t,n){n=Er(n);var c=Wr[n.name];if(!c)return Pi(t,"text/plain");var l=c(t,n);if(zr.hasOwnProperty(n.name)){var b=zr[n.name];for(var D in b)!b.hasOwnProperty(D)||(l.hasOwnProperty(D)&&(l["_"+D]=l[D]),l[D]=b[D])}if(l.name=n.name,n.helperType&&(l.helperType=n.helperType),n.modeProps)for(var X in n.modeProps)l[X]=n.modeProps[X];return l}var zr={};function wo(t,n){ye(n,zr.hasOwnProperty(t)?zr[t]:zr[t]={})}function Tr(t,n){if(!0===n)return n;if(t.copyState)return t.copyState(n);var c={};for(var l in n){var b=n[l];b instanceof Array&&(b=b.concat([])),c[l]=b}return c}function Bi(t,n){for(var c;t.innerMode&&((c=t.innerMode(n))&&c.mode!=t);)n=c.state,t=c.mode;return c||{mode:t,state:n}}function Rn(t,n,c){return!t.startState||t.startState(n,c)}var Jt=function(t,n,c){this.pos=this.start=0,this.string=t,this.tabSize=n||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=c};function bt(t,n){if((n-=t.first)<0||n>=t.size)throw new Error("There is no line "+(n+t.first)+" in the document.");for(var c=t;!c.lines;)for(var l=0;;++l){var b=c.children[l],D=b.chunkSize();if(n<D){c=b;break}n-=D}return c.lines[n]}function pn(t,n,c){var l=[],b=n.line;return t.iter(n.line,c.line+1,function(D){var X=D.text;b==c.line&&(X=X.slice(0,c.ch)),b==n.line&&(X=X.slice(n.ch)),l.push(X),++b}),l}function ps(t,n,c){var l=[];return t.iter(n,c,function(b){l.push(b.text)}),l}function qr(t,n){var c=n-t.height;if(c)for(var l=t;l;l=l.parent)l.height+=c}function Mt(t){if(null==t.parent)return null;for(var n=t.parent,c=Ie(n.lines,t),l=n.parent;l;n=l,l=l.parent)for(var b=0;l.children[b]!=n;++b)c+=l.children[b].chunkSize();return c+n.first}function jn(t,n){var c=t.first;e:do{for(var l=0;l<t.children.length;++l){var b=t.children[l],D=b.height;if(n<D){t=b;continue e}n-=D,c+=b.chunkSize()}return c}while(!t.lines);for(var X=0;X<t.lines.length;++X){var re=t.lines[X].height;if(n<re)break;n-=re}return c+X}function Qi(t,n){return n>=t.first&&n<t.first+t.size}function ko(t,n){return String(t.lineNumberFormatter(n+t.firstLineNumber))}function ot(t,n,c){if(void 0===c&&(c=null),!(this instanceof ot))return new ot(t,n,c);this.line=t,this.ch=n,this.sticky=c}function Ct(t,n){return t.line-n.line||t.ch-n.ch}function ds(t,n){return t.sticky==n.sticky&&0==Ct(t,n)}function vs(t){return ot(t.line,t.ch)}function _o(t,n){return Ct(t,n)<0?n:t}function Ui(t,n){return Ct(t,n)<0?t:n}function Aa(t,n){return Math.max(t.first,Math.min(n,t.first+t.size-1))}function St(t,n){if(n.line<t.first)return ot(t.first,0);var c=t.first+t.size-1;return n.line>c?ot(c,bt(t,c).text.length):function Ou(t,n){var c=t.ch;return null==c||c>n?ot(t.line,n):c<0?ot(t.line,0):t}(n,bt(t,n.line).text.length)}function Fa(t,n){for(var c=[],l=0;l<n.length;l++)c[l]=St(t,n[l]);return c}Jt.prototype.eol=function(){return this.pos>=this.string.length},Jt.prototype.sol=function(){return this.pos==this.lineStart},Jt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Jt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Jt.prototype.eat=function(t){var n=this.string.charAt(this.pos);if("string"==typeof t?n==t:n&&(t.test?t.test(n):t(n)))return++this.pos,n},Jt.prototype.eatWhile=function(t){for(var n=this.pos;this.eat(t););return this.pos>n},Jt.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Jt.prototype.skipToEnd=function(){this.pos=this.string.length},Jt.prototype.skipTo=function(t){var n=this.string.indexOf(t,this.pos);if(n>-1)return this.pos=n,!0},Jt.prototype.backUp=function(t){this.pos-=t},Jt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Fe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Fe(this.string,this.lineStart,this.tabSize):0)},Jt.prototype.indentation=function(){return Fe(this.string,null,this.tabSize)-(this.lineStart?Fe(this.string,this.lineStart,this.tabSize):0)},Jt.prototype.match=function(t,n,c){if("string"!=typeof t){var D=this.string.slice(this.pos).match(t);return D&&D.index>0?null:(D&&!1!==n&&(this.pos+=D[0].length),D)}var l=function(X){return c?X.toLowerCase():X};if(l(this.string.substr(this.pos,t.length))==l(t))return!1!==n&&(this.pos+=t.length),!0},Jt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Jt.prototype.hideFirstChars=function(t,n){this.lineStart+=t;try{return n()}finally{this.lineStart-=t}},Jt.prototype.lookAhead=function(t){var n=this.lineOracle;return n&&n.lookAhead(t)},Jt.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var Co=function(t,n){this.state=t,this.lookAhead=n},Rr=function(t,n,c,l){this.state=n,this.doc=t,this.line=c,this.maxLookAhead=l||0,this.baseTokens=null,this.baseTokenPos=1};function Ea(t,n,c,l){var b=[t.state.modeGen],D={};Oa(t,n.text,t.doc.mode,c,function(ae,we){return b.push(ae,we)},D,l);for(var X=c.state,Z=function(ae){c.baseTokens=b;var we=t.state.overlays[ae],Ee=1,Ue=0;c.state=!0,Oa(t,n.text,we.mode,c,function(Qe,Ze){for(var tt=Ee;Ue<Qe;){var st=b[Ee];st>Qe&&b.splice(Ee,1,Qe,b[Ee+1],st),Ee+=2,Ue=Math.min(Qe,st)}if(Ze)if(we.opaque)b.splice(tt,Ee-tt,Qe,"overlay "+Ze),Ee=tt+2;else for(;tt<Ee;tt+=2){var ut=b[tt+1];b[tt+1]=(ut?ut+" ":"")+"overlay "+Ze}},D),c.state=X,c.baseTokens=null,c.baseTokenPos=1},re=0;re<t.state.overlays.length;++re)Z(re);return{styles:b,classes:D.bgClass||D.textClass?D:null}}function gs(t,n,c){if(!n.styles||n.styles[0]!=t.state.modeGen){var l=Gi(t,Mt(n)),b=n.text.length>t.options.maxHighlightLength&&Tr(t.doc.mode,l.state),D=Ea(t,n,l);b&&(l.state=b),n.stateAfter=l.save(!b),n.styles=D.styles,D.classes?n.styleClasses=D.classes:n.styleClasses&&(n.styleClasses=null),c===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return n.styles}function Gi(t,n,c){var l=t.doc,b=t.display;if(!l.mode.startState)return new Rr(l,!0,n);var D=function Ru(t,n,c){for(var l,b,D=t.doc,X=c?-1:n-(t.doc.mode.innerMode?1e3:100),Z=n;Z>X;--Z){if(Z<=D.first)return D.first;var re=bt(D,Z-1),ae=re.stateAfter;if(ae&&(!c||Z+(ae instanceof Co?ae.lookAhead:0)<=D.modeFrontier))return Z;var we=Fe(re.text,null,t.options.tabSize);(null==b||l>we)&&(b=Z-1,l=we)}return b}(t,n,c),X=D>l.first&&bt(l,D-1).stateAfter,Z=X?Rr.fromSaved(l,X,D):new Rr(l,Rn(l.mode),D);return l.iter(D,n,function(re){So(t,re.text,Z);var ae=Z.line;re.stateAfter=ae==n-1||ae%5==0||ae>=b.viewFrom&&ae<b.viewTo?Z.save():null,Z.nextLine()}),c&&(l.modeFrontier=Z.line),Z}function So(t,n,c,l){var b=t.doc.mode,D=new Jt(n,t.options.tabSize,c);for(D.start=D.pos=l||0,""==n&&Ta(b,c.state);!D.eol();)Ao(b,D,c.state),D.start=D.pos}function Ta(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var c=Bi(t,n);if(c.mode.blankLine)return c.mode.blankLine(c.state)}}function Ao(t,n,c,l){for(var b=0;b<10;b++){l&&(l[0]=Bi(t,c).mode);var D=t.token(n,c);if(n.pos>n.start)return D}throw new Error("Mode "+t.name+" failed to advance stream.")}Rr.prototype.lookAhead=function(t){var n=this.doc.getLine(this.line+t);return null!=n&&t>this.maxLookAhead&&(this.maxLookAhead=t),n},Rr.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var n=this.baseTokens[this.baseTokenPos+1];return{type:n&&n.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},Rr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Rr.fromSaved=function(t,n,c){return n instanceof Co?new Rr(t,Tr(t.mode,n.state),c,n.lookAhead):new Rr(t,Tr(t.mode,n),c)},Rr.prototype.save=function(t){var n=!1!==t?Tr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Co(n,this.maxLookAhead):n};var Na=function(t,n,c){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=n||null,this.state=c};function La(t,n,c,l){var X,we,b=t.doc,D=b.mode,Z=bt(b,(n=St(b,n)).line),re=Gi(t,n.line,c),ae=new Jt(Z.text,t.options.tabSize,re);for(l&&(we=[]);(l||ae.pos<n.ch)&&!ae.eol();)ae.start=ae.pos,X=Ao(D,ae,re.state),l&&we.push(new Na(ae,X,Tr(b.mode,re.state)));return l?we:new Na(ae,X,re.state)}function Ia(t,n){if(t)for(;;){var c=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;t=t.slice(0,c.index)+t.slice(c.index+c[0].length);var l=c[1]?"bgClass":"textClass";null==n[l]?n[l]=c[2]:new RegExp("(?:^|\\s)"+c[2]+"(?:$|\\s)").test(n[l])||(n[l]+=" "+c[2])}return t}function Oa(t,n,c,l,b,D,X){var Z=c.flattenSpans;null==Z&&(Z=t.options.flattenSpans);var Ee,re=0,ae=null,we=new Jt(n,t.options.tabSize,l),Ue=t.options.addModeClass&&[null];for(""==n&&Ia(Ta(c,l.state),D);!we.eol();){if(we.pos>t.options.maxHighlightLength?(Z=!1,X&&So(t,n,l,we.pos),we.pos=n.length,Ee=null):Ee=Ia(Ao(c,we,l.state,Ue),D),Ue){var Qe=Ue[0].name;Qe&&(Ee="m-"+(Ee?Qe+" "+Ee:Qe))}if(!Z||ae!=Ee){for(;re<we.start;)b(re=Math.min(we.start,re+5e3),ae);ae=Ee}we.start=we.pos}for(;re<we.pos;){var Ze=Math.min(we.pos,re+5e3);b(Ze,ae),re=Ze}}var ys=!1,on=!1;function Fo(t,n,c){this.marker=t,this.from=n,this.to=c}function Hi(t,n){if(t)for(var c=0;c<t.length;++c){var l=t[c];if(l.marker==n)return l}}function ja(t,n){for(var c,l=0;l<t.length;++l)t[l]!=n&&(c||(c=[])).push(t[l]);return c}function ms(t,n){if(n.full)return null;var c=Qi(t,n.from.line)&&bt(t,n.from.line).markedSpans,l=Qi(t,n.to.line)&&bt(t,n.to.line).markedSpans;if(!c&&!l)return null;var b=n.from.ch,D=n.to.ch,X=0==Ct(n.from,n.to),Z=function Da(t,n,c){var l;if(t)for(var b=0;b<t.length;++b){var D=t[b],X=D.marker;if(null==D.from||(X.inclusiveLeft?D.from<=n:D.from<n)||D.from==n&&"bookmark"==X.type&&(!c||!D.marker.insertLeft)){var re=null==D.to||(X.inclusiveRight?D.to>=n:D.to>n);(l||(l=[])).push(new Fo(X,D.from,re?null:D.to))}}return l}(c,b,X),re=function Pu(t,n,c){var l;if(t)for(var b=0;b<t.length;++b){var D=t[b],X=D.marker;if(null==D.to||(X.inclusiveRight?D.to>=n:D.to>n)||D.from==n&&"bookmark"==X.type&&(!c||D.marker.insertLeft)){var re=null==D.from||(X.inclusiveLeft?D.from<=n:D.from<n);(l||(l=[])).push(new Fo(X,re?null:D.from-n,null==D.to?null:D.to-n))}}return l}(l,D,X),ae=1==n.text.length,we=We(n.text).length+(ae?b:0);if(Z)for(var Ee=0;Ee<Z.length;++Ee){var Ue=Z[Ee];if(null==Ue.to){var Qe=Hi(re,Ue.marker);Qe?ae&&(Ue.to=null==Qe.to?null:Qe.to+we):Ue.to=b}}if(re)for(var Ze=0;Ze<re.length;++Ze){var tt=re[Ze];if(null!=tt.to&&(tt.to+=we),null==tt.from)Hi(Z,tt.marker)||(tt.from=we,ae&&(Z||(Z=[])).push(tt));else tt.from+=we,ae&&(Z||(Z=[])).push(tt)}Z&&(Z=Ma(Z)),re&&re!=Z&&(re=Ma(re));var ut=[Z];if(!ae){var ft,dt=n.text.length-2;if(dt>0&&Z)for(var yt=0;yt<Z.length;++yt)null==Z[yt].to&&(ft||(ft=[])).push(new Fo(Z[yt].marker,null,null));for(var wt=0;wt<dt;++wt)ut.push(ft);ut.push(re)}return ut}function Ma(t){for(var n=0;n<t.length;++n){var c=t[n];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&t.splice(n--,1)}return t.length?t:null}function Ba(t){var n=t.markedSpans;if(n){for(var c=0;c<n.length;++c)n[c].marker.detachLine(t);t.markedSpans=null}}function Qa(t,n){if(n){for(var c=0;c<n.length;++c)n[c].marker.attachLine(t);t.markedSpans=n}}function Dn(t){return t.inclusiveLeft?-1:0}function Wi(t){return t.inclusiveRight?1:0}function bs(t,n){var c=t.lines.length-n.lines.length;if(0!=c)return c;var l=t.find(),b=n.find(),D=Ct(l.from,b.from)||Dn(t)-Dn(n);return D?-D:Ct(l.to,b.to)||Wi(t)-Wi(n)||n.id-t.id}function zi(t,n){var l,c=on&&t.markedSpans;if(c)for(var b=void 0,D=0;D<c.length;++D)(b=c[D]).marker.collapsed&&null==(n?b.from:b.to)&&(!l||bs(l,b.marker)<0)&&(l=b.marker);return l}function xs(t){return zi(t,!0)}function Mn(t){return zi(t,!1)}function Ua(t,n){var l,c=on&&t.markedSpans;if(c)for(var b=0;b<c.length;++b){var D=c[b];D.marker.collapsed&&(null==D.from||D.from<n)&&(null==D.to||D.to>n)&&(!l||bs(l,D.marker)<0)&&(l=D.marker)}return l}function Ga(t,n,c,l,b){var D=bt(t,n),X=on&&D.markedSpans;if(X)for(var Z=0;Z<X.length;++Z){var re=X[Z];if(re.marker.collapsed){var ae=re.marker.find(0),we=Ct(ae.from,c)||Dn(re.marker)-Dn(b),Ee=Ct(ae.to,l)||Wi(re.marker)-Wi(b);if(!(we>=0&&Ee<=0||we<=0&&Ee>=0)&&(we<=0&&(re.marker.inclusiveRight&&b.inclusiveLeft?Ct(ae.to,c)>=0:Ct(ae.to,c)>0)||we>=0&&(re.marker.inclusiveRight&&b.inclusiveLeft?Ct(ae.from,l)<=0:Ct(ae.from,l)<0)))return!0}}}function jr(t){for(var n;n=xs(t);)t=n.find(-1,!0).line;return t}function Dr(t,n){var c=bt(t,n),l=jr(c);return c==l?n:Mt(l)}function Ha(t,n){if(n>t.lastLine())return n;var l,c=bt(t,n);if(!dn(t,c))return n;for(;l=Mn(c);)c=l.find(1,!0).line;return Mt(c)+1}function dn(t,n){var c=on&&n.markedSpans;if(c)for(var l=void 0,b=0;b<c.length;++b)if((l=c[b]).marker.collapsed){if(null==l.from)return!0;if(!l.marker.widgetNode&&0==l.from&&l.marker.inclusiveLeft&&ws(t,n,l))return!0}}function ws(t,n,c){if(null==c.to){var l=c.marker.find(1,!0);return ws(t,l.line,Hi(l.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==n.text.length)return!0;for(var b=void 0,D=0;D<n.markedSpans.length;++D)if((b=n.markedSpans[D]).marker.collapsed&&!b.marker.widgetNode&&b.from==c.to&&(null==b.to||b.to!=c.from)&&(b.marker.inclusiveLeft||c.marker.inclusiveRight)&&ws(t,n,b))return!0}function Xr(t){for(var n=0,c=(t=jr(t)).parent,l=0;l<c.lines.length;++l){var b=c.lines[l];if(b==t)break;n+=b.height}for(var D=c.parent;D;D=(c=D).parent)for(var X=0;X<D.children.length;++X){var Z=D.children[X];if(Z==c)break;n+=Z.height}return n}function Eo(t){if(0==t.height)return 0;for(var c,n=t.text.length,l=t;c=xs(l);){var b=c.find(0,!0);l=b.from.line,n+=b.from.ch-b.to.ch}for(l=t;c=Mn(l);){var D=c.find(0,!0);n-=l.text.length-D.from.ch,n+=(l=D.to.line).text.length-D.to.ch}return n}function To(t){var n=t.display,c=t.doc;n.maxLine=bt(c,c.first),n.maxLineLength=Eo(n.maxLine),n.maxLineChanged=!0,c.iter(function(l){var b=Eo(l);b>n.maxLineLength&&(n.maxLineLength=b,n.maxLine=l)})}var ui=function(t,n,c){this.text=t,Qa(this,n),this.height=c?c(this):1};function Qu(t){t.parent=null,Ba(t)}ui.prototype.lineNo=function(){return Mt(this)},gt(ui);var za={},Uu={};function qa(t,n){if(!t||/^\s*$/.test(t))return null;var c=n.addModeClass?Uu:za;return c[t]||(c[t]=t.replace(/\S+/g,"cm-$&"))}function Xa(t,n){var c=xe("span",null,null,o?"padding-right: .1px":null),l={pre:xe("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};n.measure={};for(var b=0;b<=(n.rest?n.rest.length:0);b++){var D=b?n.rest[b-1]:n.line,X=void 0;l.pos=0,l.addToken=Gu,hs(t.display.measure)&&(X=He(D,t.doc.direction))&&(l.addToken=Hu(l.addToken,X)),l.map=[],ks(D,l,gs(t,D,n!=t.display.externalMeasured&&Mt(D))),D.styleClasses&&(D.styleClasses.bgClass&&(l.bgClass=Ce(D.styleClasses.bgClass,l.bgClass||"")),D.styleClasses.textClass&&(l.textClass=Ce(D.styleClasses.textClass,l.textClass||""))),0==l.map.length&&l.map.push(0,0,l.content.appendChild(cs(t.display.measure))),0==b?(n.measure.map=l.map,n.measure.cache={}):((n.measure.maps||(n.measure.maps=[])).push(l.map),(n.measure.caches||(n.measure.caches=[])).push({}))}if(o){var re=l.content.lastChild;(/\bcm-tab\b/.test(re.className)||re.querySelector&&re.querySelector(".cm-tab"))&&(l.content.className="cm-tab-wrap-hack")}return vt(t,"renderLine",t,n.line,l.pre),l.pre.className&&(l.textClass=Ce(l.pre.className,l.textClass||"")),l}function Ja(t){var n=ce("span","\u2022","cm-invalidchar");return n.title="\\u"+t.charCodeAt(0).toString(16),n.setAttribute("aria-label",n.title),n}function Gu(t,n,c,l,b,D,X){if(n){var we,Z=t.splitSpaces?function Va(t,n){if(t.length>1&&!/  /.test(t))return t;for(var c=n,l="",b=0;b<t.length;b++){var D=t.charAt(b);" "==D&&c&&(b==t.length-1||32==t.charCodeAt(b+1))&&(D="\xa0"),l+=D,c=" "==D}return l}(n,t.trailingSpace):n,re=t.cm.state.specialChars,ae=!1;if(re.test(n)){we=document.createDocumentFragment();for(var Ee=0;;){re.lastIndex=Ee;var Ue=re.exec(n),Qe=Ue?Ue.index-Ee:n.length-Ee;if(Qe){var Ze=document.createTextNode(Z.slice(Ee,Ee+Qe));y&&e<9?we.appendChild(ce("span",[Ze])):we.appendChild(Ze),t.map.push(t.pos,t.pos+Qe,Ze),t.col+=Qe,t.pos+=Qe}if(!Ue)break;Ee+=Qe+1;var tt=void 0;if("\t"==Ue[0]){var st=t.cm.options.tabSize,ut=st-t.col%st;(tt=we.appendChild(ce("span",Pe(ut),"cm-tab"))).setAttribute("role","presentation"),tt.setAttribute("cm-text","\t"),t.col+=ut}else"\r"==Ue[0]||"\n"==Ue[0]?((tt=we.appendChild(ce("span","\r"==Ue[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",Ue[0]),t.col+=1):((tt=t.cm.options.specialCharPlaceholder(Ue[0])).setAttribute("cm-text",Ue[0]),y&&e<9?we.appendChild(ce("span",[tt])):we.appendChild(tt),t.col+=1);t.map.push(t.pos,t.pos+1,tt),t.pos++}}else t.col+=n.length,we=document.createTextNode(Z),t.map.push(t.pos,t.pos+n.length,we),y&&e<9&&(ae=!0),t.pos+=n.length;if(t.trailingSpace=32==Z.charCodeAt(n.length-1),c||l||b||ae||D||X){var dt=c||"";l&&(dt+=l),b&&(dt+=b);var ft=ce("span",[we],dt,D);if(X)for(var yt in X)X.hasOwnProperty(yt)&&"style"!=yt&&"class"!=yt&&ft.setAttribute(yt,X[yt]);return t.content.appendChild(ft)}t.content.appendChild(we)}}function Hu(t,n){return function(c,l,b,D,X,Z,re){b=b?b+" cm-force-border":"cm-force-border";for(var ae=c.pos,we=ae+l.length;;){for(var Ee=void 0,Ue=0;Ue<n.length&&!((Ee=n[Ue]).to>ae&&Ee.from<=ae);Ue++);if(Ee.to>=we)return t(c,l,b,D,X,Z,re);t(c,l.slice(0,Ee.to-ae),b,D,null,Z,re),D=null,l=l.slice(Ee.to-ae),ae=Ee.to}}}function Pn(t,n,c,l){var b=!l&&c.widgetNode;b&&t.map.push(t.pos,t.pos+n,b),!l&&t.cm.display.input.needsContentAttribute&&(b||(b=t.content.appendChild(document.createElement("span"))),b.setAttribute("cm-marker",c.id)),b&&(t.cm.display.input.setUneditable(b),t.content.appendChild(b)),t.pos+=n,t.trailingSpace=!1}function ks(t,n,c){var l=t.markedSpans,b=t.text,D=0;if(l)for(var Ee,Ue,Ze,tt,st,ut,dt,Z=b.length,re=0,ae=1,we="",Qe=0;;){if(Qe==re){Ze=tt=st=Ue="",dt=null,ut=null,Qe=1/0;for(var ft=[],yt=void 0,wt=0;wt<l.length;++wt){var xt=l[wt],Et=xt.marker;if("bookmark"==Et.type&&xt.from==re&&Et.widgetNode)ft.push(Et);else if(xt.from<=re&&(null==xt.to||xt.to>re||Et.collapsed&&xt.to==re&&xt.from==re)){if(null!=xt.to&&xt.to!=re&&Qe>xt.to&&(Qe=xt.to,tt=""),Et.className&&(Ze+=" "+Et.className),Et.css&&(Ue=(Ue?Ue+";":"")+Et.css),Et.startStyle&&xt.from==re&&(st+=" "+Et.startStyle),Et.endStyle&&xt.to==Qe&&(yt||(yt=[])).push(Et.endStyle,xt.to),Et.title&&((dt||(dt={})).title=Et.title),Et.attributes)for(var Bt in Et.attributes)(dt||(dt={}))[Bt]=Et.attributes[Bt];Et.collapsed&&(!ut||bs(ut.marker,Et)<0)&&(ut=xt)}else xt.from>re&&Qe>xt.from&&(Qe=xt.from)}if(yt)for(var sr=0;sr<yt.length;sr+=2)yt[sr+1]==Qe&&(tt+=" "+yt[sr]);if(!ut||ut.from==re)for(var Ut=0;Ut<ft.length;++Ut)Pn(n,0,ft[Ut]);if(ut&&(ut.from||0)==re){if(Pn(n,(null==ut.to?Z+1:ut.to)-re,ut.marker,null==ut.from),null==ut.to)return;ut.to==re&&(ut=!1)}}if(re>=Z)break;for(var Fr=Math.min(Z,Qe);;){if(we){var wr=re+we.length;if(!ut){var Vt=wr>Fr?we.slice(0,Fr-re):we;n.addToken(n,Vt,Ee?Ee+Ze:Ze,st,re+Vt.length==Qe?tt:"",Ue,dt)}if(wr>=Fr){we=we.slice(Fr-re),re=Fr;break}re=wr,st=""}we=b.slice(D,D=c[ae++]),Ee=qa(c[ae++],n.cm.options)}}else for(var X=1;X<c.length;X+=2)n.addToken(n,b.slice(D,D=c[X]),qa(c[X+1],n.cm.options))}function Bn(t,n,c){this.line=n,this.rest=function sn(t){for(var n,c;n=Mn(t);)t=n.find(1,!0).line,(c||(c=[])).push(t);return c}(n),this.size=this.rest?Mt(We(this.rest))-c+1:1,this.node=this.text=null,this.hidden=dn(t,n)}function fi(t,n,c){for(var b,l=[],D=n;D<c;D=b){var X=new Bn(t.doc,bt(t.doc,D),D);b=D+X.size,l.push(X)}return l}var ci=null;var hi=null;function nr(t,n){var c=Ke(t,n);if(c.length){var b,l=Array.prototype.slice.call(arguments,2);ci?b=ci.delayedCallbacks:hi?b=hi:(b=hi=[],setTimeout(qu,0));for(var D=function(Z){b.push(function(){return c[Z].apply(null,l)})},X=0;X<c.length;++X)D(X)}}function qu(){var t=hi;hi=null;for(var n=0;n<t.length;++n)t[n]()}function Ya(t,n,c,l){for(var b=0;b<n.changes.length;b++){var D=n.changes[b];"text"==D?Ju(t,n):"gutter"==D?Za(t,n,c,l):"class"==D?Cs(t,n):"widget"==D&&No(t,n,l)}n.changes=null}function pi(t){return t.node==t.text&&(t.node=ce("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),y&&e<8&&(t.node.style.zIndex=2)),t.node}function _s(t,n){var c=t.display.externalMeasured;return c&&c.line==n.line?(t.display.externalMeasured=null,n.measure=c.measure,c.built):Xa(t,n)}function Ju(t,n){var c=n.text.className,l=_s(t,n);n.text==n.node&&(n.node=l.pre),n.text.parentNode.replaceChild(l.pre,n.text),n.text=l.pre,l.bgClass!=n.bgClass||l.textClass!=n.textClass?(n.bgClass=l.bgClass,n.textClass=l.textClass,Cs(t,n)):c&&(n.text.className=c)}function Cs(t,n){(function Xu(t,n){var c=n.bgClass?n.bgClass+" "+(n.line.bgClass||""):n.line.bgClass;if(c&&(c+=" CodeMirror-linebackground"),n.background)c?n.background.className=c:(n.background.parentNode.removeChild(n.background),n.background=null);else if(c){var l=pi(n);n.background=l.insertBefore(ce("div",null,c),l.firstChild),t.display.input.setUneditable(n.background)}})(t,n),n.line.wrapClass?pi(n).className=n.line.wrapClass:n.node!=n.text&&(n.node.className="");var c=n.textClass?n.textClass+" "+(n.line.textClass||""):n.line.textClass;n.text.className=c||""}function Za(t,n,c,l){if(n.gutter&&(n.node.removeChild(n.gutter),n.gutter=null),n.gutterBackground&&(n.node.removeChild(n.gutterBackground),n.gutterBackground=null),n.line.gutterClass){var b=pi(n);n.gutterBackground=ce("div",null,"CodeMirror-gutter-background "+n.line.gutterClass,"left: "+(t.options.fixedGutter?l.fixedPos:-l.gutterTotalWidth)+"px; width: "+l.gutterTotalWidth+"px"),t.display.input.setUneditable(n.gutterBackground),b.insertBefore(n.gutterBackground,n.text)}var D=n.line.gutterMarkers;if(t.options.lineNumbers||D){var X=pi(n),Z=n.gutter=ce("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?l.fixedPos:-l.gutterTotalWidth)+"px");if(Z.setAttribute("aria-hidden","true"),t.display.input.setUneditable(Z),X.insertBefore(Z,n.text),n.line.gutterClass&&(Z.className+=" "+n.line.gutterClass),t.options.lineNumbers&&(!D||!D["CodeMirror-linenumbers"])&&(n.lineNumber=Z.appendChild(ce("div",ko(t.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+l.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),D)for(var re=0;re<t.display.gutterSpecs.length;++re){var ae=t.display.gutterSpecs[re].className,we=D.hasOwnProperty(ae)&&D[ae];we&&Z.appendChild(ce("div",[we],"CodeMirror-gutter-elt","left: "+l.gutterLeft[ae]+"px; width: "+l.gutterWidth[ae]+"px"))}}}function No(t,n,c){n.alignable&&(n.alignable=null);for(var l=W("CodeMirror-linewidget"),b=n.node.firstChild,D=void 0;b;b=D)D=b.nextSibling,l.test(b.className)&&n.node.removeChild(b);qi(t,n,c)}function $a(t,n,c,l){var b=_s(t,n);return n.text=n.node=b.pre,b.bgClass&&(n.bgClass=b.bgClass),b.textClass&&(n.textClass=b.textClass),Cs(t,n),Za(t,n,c,l),qi(t,n,l),n.node}function qi(t,n,c){if(Ss(t,n.line,n,c,!0),n.rest)for(var l=0;l<n.rest.length;l++)Ss(t,n.rest[l],n,c,!1)}function Ss(t,n,c,l,b){if(n.widgets)for(var D=pi(c),X=0,Z=n.widgets;X<Z.length;++X){var re=Z[X],ae=ce("div",[re.node],"CodeMirror-linewidget"+(re.className?" "+re.className:""));re.handleMouseEvents||ae.setAttribute("cm-ignore-events","true"),Lo(re,ae,c,l),t.display.input.setUneditable(ae),b&&re.above?D.insertBefore(ae,c.gutter||c.text):D.appendChild(ae),nr(re,"redraw")}}function Lo(t,n,c,l){if(t.noHScroll){(c.alignable||(c.alignable=[])).push(n);var b=l.wrapperWidth;n.style.left=l.fixedPos+"px",t.coverGutter||(b-=l.gutterTotalWidth,n.style.paddingLeft=l.gutterTotalWidth+"px"),n.style.width=b+"px"}t.coverGutter&&(n.style.zIndex=5,n.style.position="relative",t.noHScroll||(n.style.marginLeft=-l.gutterTotalWidth+"px"))}function di(t){if(null!=t.height)return t.height;var n=t.doc.cm;if(!n)return 0;if(!se(document.body,t.node)){var c="position: relative;";t.coverGutter&&(c+="margin-left: -"+n.display.gutters.offsetWidth+"px;"),t.noHScroll&&(c+="width: "+n.display.wrapper.clientWidth+"px;"),fe(n.display.measure,ce("div",[t.node],null,c))}return t.height=t.node.parentNode.offsetHeight}function Ir(t,n){for(var c=On(n);c!=t.wrapper;c=c.parentNode)if(!c||1==c.nodeType&&"true"==c.getAttribute("cm-ignore-events")||c.parentNode==t.sizer&&c!=t.mover)return!0}function Xi(t){return t.lineSpace.offsetTop}function As(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function el(t){if(t.cachedPaddingH)return t.cachedPaddingH;var n=fe(t.measure,ce("pre","x","CodeMirror-line-like")),c=window.getComputedStyle?window.getComputedStyle(n):n.currentStyle,l={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};return!isNaN(l.left)&&!isNaN(l.right)&&(t.cachedPaddingH=l),l}function yr(t){return 50-t.display.nativeBarWidth}function an(t){return t.display.scroller.clientWidth-yr(t)-t.display.barWidth}function vn(t){return t.display.scroller.clientHeight-yr(t)-t.display.barHeight}function tl(t,n,c){if(t.line==n)return{map:t.measure.map,cache:t.measure.cache};if(t.rest){for(var l=0;l<t.rest.length;l++)if(t.rest[l]==n)return{map:t.measure.maps[l],cache:t.measure.caches[l]};for(var b=0;b<t.rest.length;b++)if(Mt(t.rest[b])>c)return{map:t.measure.maps[b],cache:t.measure.caches[b],before:!0}}}function rl(t,n,c,l){return Jr(t,Qn(t,n),c,l)}function Es(t,n){if(n>=t.display.viewFrom&&n<t.display.viewTo)return t.display.view[Wn(t,n)];var c=t.display.externalMeasured;return c&&n>=c.lineN&&n<c.lineN+c.size?c:void 0}function Qn(t,n){var c=Mt(n),l=Es(t,c);l&&!l.text?l=null:l&&l.changes&&(Ya(t,l,c,Oo(t)),t.curOp.forceUpdate=!0),l||(l=function Vu(t,n){var c=Mt(n=jr(n)),l=t.display.externalMeasured=new Bn(t.doc,n,c);l.lineN=c;var b=l.built=Xa(t,l);return l.text=b.pre,fe(t.display.lineMeasure,b.pre),l}(t,n));var b=tl(l,n,c);return{line:n,view:l,rect:null,map:b.map,cache:b.cache,before:b.before,hasHeights:!1}}function Jr(t,n,c,l,b){n.before&&(c=-1);var X,D=c+(l||"");return n.cache.hasOwnProperty(D)?X=n.cache[D]:(n.rect||(n.rect=n.view.text.getBoundingClientRect()),n.hasHeights||(function Fs(t,n,c){var l=t.options.lineWrapping,b=l&&an(t);if(!n.measure.heights||l&&n.measure.width!=b){var D=n.measure.heights=[];if(l){n.measure.width=b;for(var X=n.text.firstChild.getClientRects(),Z=0;Z<X.length-1;Z++){var re=X[Z],ae=X[Z+1];Math.abs(re.bottom-ae.bottom)>2&&D.push((re.bottom+ae.top)/2-c.top)}}D.push(c.bottom-c.top)}}(t,n.view,n.rect),n.hasHeights=!0),X=function Yu(t,n,c,l){var ae,b=nl(n.map,c,l),D=b.node,X=b.start,Z=b.end,re=b.collapse;if(3==D.nodeType){for(var we=0;we<4;we++){for(;X&&oe(n.line.text.charAt(b.coverStart+X));)--X;for(;b.coverStart+Z<b.coverEnd&&oe(n.line.text.charAt(b.coverStart+Z));)++Z;if((ae=y&&e<9&&0==X&&Z==b.coverEnd-b.coverStart?D.parentNode.getBoundingClientRect():Ku(te(D,X,Z).getClientRects(),l)).left||ae.right||0==X)break;Z=X,X-=1,re="right"}y&&e<11&&(ae=function il(t,n){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function bo(t){if(null!=hn)return hn;var n=fe(t,ce("span","x")),c=n.getBoundingClientRect(),l=te(n,0,1).getBoundingClientRect();return hn=Math.abs(c.left-l.left)>1}(t))return n;var c=screen.logicalXDPI/screen.deviceXDPI,l=screen.logicalYDPI/screen.deviceYDPI;return{left:n.left*c,right:n.right*c,top:n.top*l,bottom:n.bottom*l}}(t.display.measure,ae))}else{var Ee;X>0&&(re=l="right"),ae=t.options.lineWrapping&&(Ee=D.getClientRects()).length>1?Ee["right"==l?Ee.length-1:0]:D.getBoundingClientRect()}if(y&&e<9&&!X&&(!ae||!ae.left&&!ae.right)){var Ue=D.parentNode.getClientRects()[0];ae=Ue?{left:Ue.left,right:Ue.left+gi(t.display),top:Ue.top,bottom:Ue.bottom}:Ts}for(var Qe=ae.top-n.rect.top,Ze=ae.bottom-n.rect.top,tt=(Qe+Ze)/2,st=n.view.measure.heights,ut=0;ut<st.length-1&&!(tt<st[ut]);ut++);var dt=ut?st[ut-1]:0,ft=st[ut],yt={left:("right"==re?ae.right:ae.left)-n.rect.left,right:("left"==re?ae.left:ae.right)-n.rect.left,top:dt,bottom:ft};return!ae.left&&!ae.right&&(yt.bogus=!0),t.options.singleCursorHeightPerLine||(yt.rtop=Qe,yt.rbottom=Ze),yt}(t,n,c,l),X.bogus||(n.cache[D]=X)),{left:X.left,right:X.right,top:b?X.rtop:X.top,bottom:b?X.rbottom:X.bottom}}var Gn,Ts={left:0,right:0,top:0,bottom:0};function nl(t,n,c){for(var l,b,D,X,Z,re,ae=0;ae<t.length;ae+=3)if(Z=t[ae],re=t[ae+1],n<Z?(b=0,D=1,X="left"):n<re?D=(b=n-Z)+1:(ae==t.length-3||n==re&&t[ae+3]>n)&&(b=(D=re-Z)-1,n>=re&&(X="right")),null!=b){if(l=t[ae+2],Z==re&&c==(l.insertLeft?"left":"right")&&(X=c),"left"==c&&0==b)for(;ae&&t[ae-2]==t[ae-3]&&t[ae-1].insertLeft;)l=t[2+(ae-=3)],X="left";if("right"==c&&b==re-Z)for(;ae<t.length-3&&t[ae+3]==t[ae+4]&&!t[ae+5].insertLeft;)l=t[(ae+=3)+2],X="right";break}return{node:l,start:b,end:D,collapse:X,coverStart:Z,coverEnd:re}}function Ku(t,n){var c=Ts;if("left"==n)for(var l=0;l<t.length&&(c=t[l]).left==c.right;l++);else for(var b=t.length-1;b>=0&&(c=t[b]).left==c.right;b--);return c}function ol(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var n=0;n<t.rest.length;n++)t.measure.caches[n]={}}function sl(t){t.display.externalMeasure=null,$(t.display.lineMeasure);for(var n=0;n<t.display.view.length;n++)ol(t.display.view[n])}function vi(t){sl(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function al(){return d&&T?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ns(){return d&&T?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ls(t){var c=jr(t).widgets,l=0;if(c)for(var b=0;b<c.length;++b)c[b].above&&(l+=di(c[b]));return l}function Io(t,n,c,l,b){if(!b){var D=Ls(n);c.top+=D,c.bottom+=D}if("line"==l)return c;l||(l="local");var X=Xr(n);if("local"==l?X+=Xi(t.display):X-=t.display.viewOffset,"page"==l||"window"==l){var Z=t.display.lineSpace.getBoundingClientRect();X+=Z.top+("window"==l?0:Ns());var re=Z.left+("window"==l?0:al());c.left+=re,c.right+=re}return c.top+=X,c.bottom+=X,c}function ll(t,n,c){if("div"==c)return n;var l=n.left,b=n.top;if("page"==c)l-=al(),b-=Ns();else if("local"==c||!c){var D=t.display.sizer.getBoundingClientRect();l+=D.left,b+=D.top}var X=t.display.lineSpace.getBoundingClientRect();return{left:l-X.left,top:b-X.top}}function ln(t,n,c,l,b){return l||(l=bt(t.doc,n.line)),Io(t,l,rl(t,l,n.ch,b),c)}function Nr(t,n,c,l,b,D){function X(Ze,tt){var st=Jr(t,b,Ze,tt?"right":"left",D);return tt?st.left=st.right:st.right=st.left,Io(t,l,st,c)}l=l||bt(t.doc,n.line),b||(b=Qn(t,l));var Z=He(l,t.doc.direction),re=n.ch,ae=n.sticky;if(re>=l.text.length?(re=l.text.length,ae="before"):re<=0&&(re=0,ae="after"),!Z)return X("before"==ae?re-1:re,"before"==ae);function we(Ze,tt,st){return X(st?Ze-1:Ze,1==Z[tt].level!=st)}var Ee=ke(Z,re,ae),Ue=Se,Qe=we(re,Ee,"before"==ae);return null!=Ue&&(Qe.other=we(re,Ue,"before"!=ae)),Qe}function Un(t,n){var c=0;n=St(t.doc,n),t.options.lineWrapping||(c=gi(t.display)*n.ch);var l=bt(t.doc,n.line),b=Xr(l)+Xi(t.display);return{left:c,right:c,top:b,bottom:b+l.height}}function Ji(t,n,c,l,b){var D=ot(t,n,c);return D.xRel=b,l&&(D.outside=l),D}function Is(t,n,c){var l=t.doc;if((c+=t.display.viewOffset)<0)return Ji(l.first,0,null,-1,-1);var b=jn(l,c),D=l.first+l.size-1;if(b>D)return Ji(l.first+l.size-1,bt(l,D).text.length,null,1,1);n<0&&(n=0);for(var X=bt(l,b);;){var Z=fl(t,X,b,n,c),re=Ua(X,Z.ch+(Z.xRel>0||Z.outside>0?1:0));if(!re)return Z;var ae=re.find(1);if(ae.line==b)return ae;X=bt(l,b=ae.line)}}function ul(t,n,c,l){l-=Ls(n);var b=n.text.length,D=me(function(X){return Jr(t,c,X-1).bottom<=l},b,0);return{begin:D,end:b=me(function(X){return Jr(t,c,X).top>l},D,b)}}function Os(t,n,c,l){return c||(c=Qn(t,n)),ul(t,n,c,Io(t,n,Jr(t,c,l),"line").top)}function Rs(t,n,c,l){return!(t.bottom<=c)&&(t.top>c||(l?t.left:t.right)>n)}function fl(t,n,c,l,b){b-=Xr(n);var D=Qn(t,n),X=Ls(n),Z=0,re=n.text.length,ae=!0,we=He(n,t.doc.direction);if(we){var Ee=(t.options.lineWrapping?$u:Zu)(t,n,c,D,we,l,b);Z=(ae=1!=Ee.level)?Ee.from:Ee.to-1,re=ae?Ee.to:Ee.from-1}var tt,st,Ue=null,Qe=null,Ze=me(function(wt){var xt=Jr(t,D,wt);return xt.top+=X,xt.bottom+=X,!!Rs(xt,l,b,!1)&&(xt.top<=b&&xt.left<=l&&(Ue=wt,Qe=xt),!0)},Z,re),ut=!1;if(Qe){var dt=l-Qe.left<Qe.right-l,ft=dt==ae;Ze=Ue+(ft?0:1),st=ft?"after":"before",tt=dt?Qe.left:Qe.right}else{!ae&&(Ze==re||Ze==Z)&&Ze++,st=0==Ze?"after":Ze==n.text.length?"before":Jr(t,D,Ze-(ae?1:0)).bottom+X<=b==ae?"after":"before";var yt=Nr(t,ot(c,Ze,st),"line",n,D);tt=yt.left,ut=b<yt.top?-1:b>=yt.bottom?1:0}return Ji(c,Ze=he(n.text,Ze,1),st,ut,l-tt)}function Zu(t,n,c,l,b,D,X){var Z=me(function(Ee){var Ue=b[Ee],Qe=1!=Ue.level;return Rs(Nr(t,ot(c,Qe?Ue.to:Ue.from,Qe?"before":"after"),"line",n,l),D,X,!0)},0,b.length-1),re=b[Z];if(Z>0){var ae=1!=re.level,we=Nr(t,ot(c,ae?re.from:re.to,ae?"after":"before"),"line",n,l);Rs(we,D,X,!0)&&we.top>X&&(re=b[Z-1])}return re}function $u(t,n,c,l,b,D,X){var Z=ul(t,n,l,X),re=Z.begin,ae=Z.end;/\s/.test(n.text.charAt(ae-1))&&ae--;for(var we=null,Ee=null,Ue=0;Ue<b.length;Ue++){var Qe=b[Ue];if(!(Qe.from>=ae||Qe.to<=re)){var tt=Jr(t,l,1!=Qe.level?Math.min(ae,Qe.to)-1:Math.max(re,Qe.from)).right,st=tt<D?D-tt+1e9:tt-D;(!we||Ee>st)&&(we=Qe,Ee=st)}}return we||(we=b[b.length-1]),we.from<re&&(we={from:re,to:we.to,level:we.level}),we.to>ae&&(we={from:we.from,to:ae,level:we.level}),we}function Hn(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Gn){Gn=ce("pre",null,"CodeMirror-line-like");for(var n=0;n<49;++n)Gn.appendChild(document.createTextNode("x")),Gn.appendChild(ce("br"));Gn.appendChild(document.createTextNode("x"))}fe(t.measure,Gn);var c=Gn.offsetHeight/50;return c>3&&(t.cachedTextHeight=c),$(t.measure),c||1}function gi(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var n=ce("span","xxxxxxxxxx"),c=ce("pre",[n],"CodeMirror-line-like");fe(t.measure,c);var l=n.getBoundingClientRect(),b=(l.right-l.left)/10;return b>2&&(t.cachedCharWidth=b),b||10}function Oo(t){for(var n=t.display,c={},l={},b=n.gutters.clientLeft,D=n.gutters.firstChild,X=0;D;D=D.nextSibling,++X){var Z=t.display.gutterSpecs[X].className;c[Z]=D.offsetLeft+D.clientLeft+b,l[Z]=D.clientWidth}return{fixedPos:js(n),gutterTotalWidth:n.gutters.offsetWidth,gutterLeft:c,gutterWidth:l,wrapperWidth:n.wrapper.clientWidth}}function js(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function cl(t){var n=Hn(t.display),c=t.options.lineWrapping,l=c&&Math.max(5,t.display.scroller.clientWidth/gi(t.display)-3);return function(b){if(dn(t.doc,b))return 0;var D=0;if(b.widgets)for(var X=0;X<b.widgets.length;X++)b.widgets[X].height&&(D+=b.widgets[X].height);return c?D+(Math.ceil(b.text.length/l)||1)*n:D+n}}function Ds(t){var n=t.doc,c=cl(t);n.iter(function(l){var b=c(l);b!=l.height&&qr(l,b)})}function gn(t,n,c,l){var b=t.display;if(!c&&"true"==On(n).getAttribute("cm-not-content"))return null;var D,X,Z=b.lineSpace.getBoundingClientRect();try{D=n.clientX-Z.left,X=n.clientY-Z.top}catch(Ee){return null}var ae,re=Is(t,D,X);if(l&&re.xRel>0&&(ae=bt(t.doc,re.line).text).length==re.ch){var we=Fe(ae,ae.length,t.options.tabSize)-ae.length;re=ot(re.line,Math.max(0,Math.round((D-el(t.display).left)/gi(t.display))-we))}return re}function Wn(t,n){if(n>=t.display.viewTo||(n-=t.display.viewFrom)<0)return null;for(var c=t.display.view,l=0;l<c.length;l++)if((n-=c[l].size)<0)return l}function mr(t,n,c,l){null==n&&(n=t.doc.first),null==c&&(c=t.doc.first+t.doc.size),l||(l=0);var b=t.display;if(l&&c<b.viewTo&&(null==b.updateLineNumbers||b.updateLineNumbers>n)&&(b.updateLineNumbers=n),t.curOp.viewChanged=!0,n>=b.viewTo)on&&Dr(t.doc,n)<b.viewTo&&zt(t);else if(c<=b.viewFrom)on&&Ha(t.doc,c+l)>b.viewFrom?zt(t):(b.viewFrom+=l,b.viewTo+=l);else if(n<=b.viewFrom&&c>=b.viewTo)zt(t);else if(n<=b.viewFrom){var D=Ro(t,c,c+l,1);D?(b.view=b.view.slice(D.index),b.viewFrom=D.lineN,b.viewTo+=l):zt(t)}else if(c>=b.viewTo){var X=Ro(t,n,n,-1);X?(b.view=b.view.slice(0,X.index),b.viewTo=X.lineN):zt(t)}else{var Z=Ro(t,n,n,-1),re=Ro(t,c,c+l,1);Z&&re?(b.view=b.view.slice(0,Z.index).concat(fi(t,Z.lineN,re.lineN)).concat(b.view.slice(re.index)),b.viewTo+=l):zt(t)}var ae=b.externalMeasured;ae&&(c<ae.lineN?ae.lineN+=l:n<ae.lineN+ae.size&&(b.externalMeasured=null))}function Wt(t,n,c){t.curOp.viewChanged=!0;var l=t.display,b=t.display.externalMeasured;if(b&&n>=b.lineN&&n<b.lineN+b.size&&(l.externalMeasured=null),!(n<l.viewFrom||n>=l.viewTo)){var D=l.view[Wn(t,n)];if(null!=D.node){var X=D.changes||(D.changes=[]);-1==Ie(X,c)&&X.push(c)}}}function zt(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function Ro(t,n,c,l){var D,b=Wn(t,n),X=t.display.view;if(!on||c==t.doc.first+t.doc.size)return{index:b,lineN:c};for(var Z=t.display.viewFrom,re=0;re<b;re++)Z+=X[re].size;if(Z!=n){if(l>0){if(b==X.length-1)return null;D=Z+X[b].size-n,b++}else D=Z-n;n+=D,c+=D}for(;Dr(t.doc,c)!=c;){if(b==(l<0?0:X.length-1))return null;c+=l*X[b-(l<0?1:0)].size,b+=l}return{index:b,lineN:c}}function hl(t){for(var n=t.display.view,c=0,l=0;l<n.length;l++){var b=n[l];!b.hidden&&(!b.node||b.changes)&&++c}return c}function Vi(t){t.display.input.showSelection(t.display.input.prepareSelection())}function pl(t,n){void 0===n&&(n=!0);var c=t.doc,l={},b=l.cursors=document.createDocumentFragment(),D=l.selection=document.createDocumentFragment(),X=t.options.$customCursor;X&&(n=!0);for(var Z=0;Z<c.sel.ranges.length;Z++)if(n||Z!=c.sel.primIndex){var re=c.sel.ranges[Z];if(!(re.from().line>=t.display.viewTo||re.to().line<t.display.viewFrom)){var ae=re.empty();if(X){var we=X(t,re);we&&Ms(t,we,b)}else(ae||t.options.showCursorWhenSelecting)&&Ms(t,re.head,b);ae||tf(t,re,D)}}return l}function Ms(t,n,c){var l=Nr(t,n,"div",null,null,!t.options.singleCursorHeightPerLine),b=c.appendChild(ce("div","\xa0","CodeMirror-cursor"));if(b.style.left=l.left+"px",b.style.top=l.top+"px",b.style.height=Math.max(0,l.bottom-l.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var D=ln(t,n,"div",null,null),X=D.right-D.left;b.style.width=(X>0?X:t.defaultCharWidth())+"px"}if(l.other){var Z=c.appendChild(ce("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));Z.style.display="",Z.style.left=l.other.left+"px",Z.style.top=l.other.top+"px",Z.style.height=.85*(l.other.bottom-l.other.top)+"px"}}function yi(t,n){return t.top-n.top||t.left-n.left}function tf(t,n,c){var l=t.display,b=t.doc,D=document.createDocumentFragment(),X=el(t.display),Z=X.left,re=Math.max(l.sizerWidth,an(t)-l.sizer.offsetLeft)-X.right,ae="ltr"==b.direction;function we(ft,yt,wt,xt){yt<0&&(yt=0),yt=Math.round(yt),xt=Math.round(xt),D.appendChild(ce("div",null,"CodeMirror-selected","position: absolute; left: "+ft+"px;\n                             top: "+yt+"px; width: "+(null==wt?re-ft:wt)+"px;\n                             height: "+(xt-yt)+"px"))}function Ee(ft,yt,wt){var Bt,sr,xt=bt(b,ft),Et=xt.text.length;function Ut(Vt,kr){return ln(t,ot(ft,Vt),"div",xt,kr)}function Fr(Vt,kr,ar){var tr=Os(t,xt,null,Vt),Zt="ltr"==kr==("after"==ar)?"left":"right";return Ut("after"==ar?tr.begin:tr.end-(/\s/.test(xt.text.charAt(tr.end-1))?2:1),Zt)[Zt]}var wr=He(xt,b.direction);return function Le(t,n,c,l){if(!t)return l(n,c,"ltr",0);for(var b=!1,D=0;D<t.length;++D){var X=t[D];(X.from<c&&X.to>n||n==c&&X.to==n)&&(l(Math.max(X.from,n),Math.min(X.to,c),1==X.level?"rtl":"ltr",D),b=!0)}b||l(n,c,"ltr")}(wr,yt||0,null==wt?Et:wt,function(Vt,kr,ar,tr){var Zt="ltr"==ar,Ht=Ut(Vt,Zt?"left":"right"),_r=Ut(kr-1,Zt?"right":"left"),ii=null==yt&&0==Vt,Tn=null==wt&&kr==Et,cr=0==tr,$r=!wr||tr==wr.length-1;if(_r.top-Ht.top<=3){var ga=(ae?Tn:ii)&&$r,en=(ae?ii:Tn)&&cr?Z:(Zt?Ht:_r).left,oi=ga?re:(Zt?_r:Ht).right;we(en,Ht.top,oi-en,Ht.bottom)}else{var Nn,dr,Ti,rs;Zt?(Nn=ae&&ii&&cr?Z:Ht.left,dr=ae?re:Fr(Vt,ar,"before"),Ti=ae?Z:Fr(kr,ar,"after"),rs=ae&&Tn&&$r?re:_r.right):(Nn=ae?Fr(Vt,ar,"before"):Z,dr=!ae&&ii&&cr?re:Ht.right,Ti=!ae&&Tn&&$r?Z:_r.left,rs=ae?Fr(kr,ar,"after"):re),we(Nn,Ht.top,dr-Nn,Ht.bottom),Ht.bottom<_r.top&&we(Z,Ht.bottom,null,_r.top),we(Ti,_r.top,rs-Ti,_r.bottom)}(!Bt||yi(Ht,Bt)<0)&&(Bt=Ht),yi(_r,Bt)<0&&(Bt=_r),(!sr||yi(Ht,sr)<0)&&(sr=Ht),yi(_r,sr)<0&&(sr=_r)}),{start:Bt,end:sr}}var Ue=n.from(),Qe=n.to();if(Ue.line==Qe.line)Ee(Ue.line,Ue.ch,Qe.ch);else{var Ze=bt(b,Ue.line),tt=bt(b,Qe.line),st=jr(Ze)==jr(tt),ut=Ee(Ue.line,Ue.ch,st?Ze.text.length+1:null).end,dt=Ee(Qe.line,st?0:null,Qe.ch).start;st&&(ut.top<dt.top-2?(we(ut.right,ut.top,null,ut.bottom),we(Z,dt.top,dt.left,dt.bottom)):we(ut.right,ut.top,dt.left-ut.right,ut.bottom)),ut.bottom<dt.top&&we(Z,ut.bottom,null,dt.top)}c.appendChild(D)}function Ps(t){if(t.state.focused){var n=t.display;clearInterval(n.blinker);var c=!0;n.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?n.blinker=setInterval(function(){t.hasFocus()||mi(t),n.cursorDiv.style.visibility=(c=!c)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(n.cursorDiv.style.visibility="hidden")}}function dl(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||Qs(t))}function Bs(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&mi(t))},100)}function Qs(t,n){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(vt(t,"focus",t,n),t.state.focused=!0,ve(t.display.wrapper,"CodeMirror-focused"),!t.curOp&&t.display.selForContextMenu!=t.doc.sel&&(t.display.input.reset(),o&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),Ps(t))}function mi(t,n){t.state.delayingBlurEvent||(t.state.focused&&(vt(t,"blur",t,n),t.state.focused=!1,V(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function Ki(t){for(var n=t.display,c=n.lineDiv.offsetTop,l=Math.max(0,n.scroller.getBoundingClientRect().top),b=n.lineDiv.getBoundingClientRect().top,D=0,X=0;X<n.view.length;X++){var Z=n.view[X],re=t.options.lineWrapping,ae=void 0,we=0;if(!Z.hidden){if(b+=Z.line.height,y&&e<8){var Ee=Z.node.offsetTop+Z.node.offsetHeight;ae=Ee-c,c=Ee}else{var Ue=Z.node.getBoundingClientRect();ae=Ue.bottom-Ue.top,!re&&Z.text.firstChild&&(we=Z.text.firstChild.getBoundingClientRect().right-Ue.left-1)}var Qe=Z.line.height-ae;if((Qe>.005||Qe<-.005)&&(b<l&&(D-=Qe),qr(Z.line,ae),vl(Z.line),Z.rest))for(var Ze=0;Ze<Z.rest.length;Ze++)vl(Z.rest[Ze]);if(we>t.display.sizerWidth){var tt=Math.ceil(we/gi(t.display));tt>t.display.maxLineLength&&(t.display.maxLineLength=tt,t.display.maxLine=Z.line,t.display.maxLineChanged=!0)}}}Math.abs(D)>2&&(n.scroller.scrollTop+=D)}function vl(t){if(t.widgets)for(var n=0;n<t.widgets.length;++n){var c=t.widgets[n],l=c.node.parentNode;l&&(c.height=l.offsetHeight)}}function Yi(t,n,c){var l=c&&null!=c.top?Math.max(0,c.top):t.scroller.scrollTop;l=Math.floor(l-Xi(t));var b=c&&null!=c.bottom?c.bottom:l+t.wrapper.clientHeight,D=jn(n,l),X=jn(n,b);if(c&&c.ensure){var Z=c.ensure.from.line,re=c.ensure.to.line;Z<D?(D=Z,X=jn(n,Xr(bt(n,Z))+t.wrapper.clientHeight)):Math.min(re,n.lastLine())>=X&&(D=jn(n,Xr(bt(n,re))-t.wrapper.clientHeight),X=re)}return{from:D,to:Math.max(X,D+1)}}function Us(t,n){var c=t.display,l=Hn(t.display);n.top<0&&(n.top=0);var b=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:c.scroller.scrollTop,D=vn(t),X={};n.bottom-n.top>D&&(n.bottom=n.top+D);var Z=t.doc.height+As(c),re=n.top<l,ae=n.bottom>Z-l;if(n.top<b)X.scrollTop=re?0:n.top;else if(n.bottom>b+D){var we=Math.min(n.top,(ae?Z:n.bottom)-D);we!=b&&(X.scrollTop=we)}var Ee=t.options.fixedGutter?0:c.gutters.offsetWidth,Ue=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:c.scroller.scrollLeft-Ee,Qe=an(t)-c.gutters.offsetWidth,Ze=n.right-n.left>Qe;return Ze&&(n.right=n.left+Qe),n.left<10?X.scrollLeft=0:n.left<Ue?X.scrollLeft=Math.max(0,n.left+Ee-(Ze?0:10)):n.right>Qe+Ue-3&&(X.scrollLeft=n.right+(Ze?0:10)-Qe),X}function Gs(t,n){null!=n&&(jo(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+n)}function zn(t){jo(t);var n=t.getCursor();t.curOp.scrollToPos={from:n,to:n,margin:t.options.cursorScrollMargin}}function Zi(t,n,c){(null!=n||null!=c)&&jo(t),null!=n&&(t.curOp.scrollLeft=n),null!=c&&(t.curOp.scrollTop=c)}function jo(t){var n=t.curOp.scrollToPos;n&&(t.curOp.scrollToPos=null,Hs(t,Un(t,n.from),Un(t,n.to),n.margin))}function Hs(t,n,c,l){var b=Us(t,{left:Math.min(n.left,c.left),top:Math.min(n.top,c.top)-l,right:Math.max(n.right,c.right),bottom:Math.max(n.bottom,c.bottom)+l});Zi(t,b.scrollLeft,b.scrollTop)}function $i(t,n){Math.abs(t.doc.scrollTop-n)<2||(ue||Xs(t,{top:n}),Ws(t,n,!0),ue&&Xs(t),ro(t,100))}function Ws(t,n,c){n=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,n)),(t.display.scroller.scrollTop!=n||c)&&(t.doc.scrollTop=n,t.display.scrollbars.setScrollTop(n),t.display.scroller.scrollTop!=n&&(t.display.scroller.scrollTop=n))}function qn(t,n,c,l){n=Math.max(0,Math.min(n,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(!(c?n==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-n)<2)||l)&&(t.doc.scrollLeft=n,$t(t),t.display.scroller.scrollLeft!=n&&(t.display.scroller.scrollLeft=n),t.display.scrollbars.setScrollLeft(n))}function eo(t){var n=t.display,c=n.gutters.offsetWidth,l=Math.round(t.doc.height+As(t.display));return{clientHeight:n.scroller.clientHeight,viewHeight:n.wrapper.clientHeight,scrollWidth:n.scroller.scrollWidth,clientWidth:n.scroller.clientWidth,viewWidth:n.wrapper.clientWidth,barLeft:t.options.fixedGutter?c:0,docHeight:l,scrollHeight:l+yr(t)+n.barHeight,nativeBarWidth:n.nativeBarWidth,gutterWidth:c}}var Xn=function(t,n,c){this.cm=c;var l=this.vert=ce("div",[ce("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),b=this.horiz=ce("div",[ce("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");l.tabIndex=b.tabIndex=-1,t(l),t(b),Xe(l,"scroll",function(){l.clientHeight&&n(l.scrollTop,"vertical")}),Xe(b,"scroll",function(){b.clientWidth&&n(b.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,y&&e<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Xn.prototype.update=function(t){var n=t.scrollWidth>t.clientWidth+1,c=t.scrollHeight>t.clientHeight+1,l=t.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=n?l+"px":"0";var b=t.viewHeight-(n?l:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+b)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(n){this.horiz.style.display="block",this.horiz.style.right=c?l+"px":"0",this.horiz.style.left=t.barLeft+"px";var D=t.viewWidth-t.barLeft-(c?l:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+D)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==l&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?l:0,bottom:n?l:0}},Xn.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Xn.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Xn.prototype.zeroWidthHack=function(){var t=P&&!v?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Be,this.disableVert=new Be},Xn.prototype.enableZeroWidthBar=function(t,n,c){t.style.visibility="",n.set(1e3,function l(){var b=t.getBoundingClientRect();("vert"==c?document.elementFromPoint(b.right-1,(b.top+b.bottom)/2):document.elementFromPoint((b.right+b.left)/2,b.bottom-1))!=t?t.style.visibility="hidden":n.set(1e3,l)})},Xn.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var yn=function(){};function Jn(t,n){n||(n=eo(t));var c=t.display.barWidth,l=t.display.barHeight;to(t,n);for(var b=0;b<4&&c!=t.display.barWidth||l!=t.display.barHeight;b++)c!=t.display.barWidth&&t.options.lineWrapping&&Ki(t),to(t,eo(t)),c=t.display.barWidth,l=t.display.barHeight}function to(t,n){var c=t.display,l=c.scrollbars.update(n);c.sizer.style.paddingRight=(c.barWidth=l.right)+"px",c.sizer.style.paddingBottom=(c.barHeight=l.bottom)+"px",c.heightForcer.style.borderBottom=l.bottom+"px solid transparent",l.right&&l.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=l.bottom+"px",c.scrollbarFiller.style.width=l.right+"px"):c.scrollbarFiller.style.display="",l.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=l.bottom+"px",c.gutterFiller.style.width=n.gutterWidth+"px"):c.gutterFiller.style.display=""}yn.prototype.update=function(){return{bottom:0,right:0}},yn.prototype.setScrollLeft=function(){},yn.prototype.setScrollTop=function(){},yn.prototype.clear=function(){};var zs={native:Xn,null:yn};function gl(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&V(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new zs[t.options.scrollbarStyle](function(n){t.display.wrapper.insertBefore(n,t.display.scrollbarFiller),Xe(n,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),n.setAttribute("cm-not-content","true")},function(n,c){"horizontal"==c?qn(t,n):$i(t,n)},t),t.display.scrollbars.addClass&&ve(t.display.wrapper,t.display.scrollbars.addClass)}var af=0;function mn(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++af,markArrays:null},function Wu(t){ci?ci.ops.push(t):t.ownsGroup=ci={ops:[t],delayedCallbacks:[]}}(t.curOp)}function Vn(t){var n=t.curOp;n&&function zu(t,n){var c=t.ownsGroup;if(c)try{!function Ka(t){var n=t.delayedCallbacks,c=0;do{for(;c<n.length;c++)n[c].call(null);for(var l=0;l<t.ops.length;l++){var b=t.ops[l];if(b.cursorActivityHandlers)for(;b.cursorActivityCalled<b.cursorActivityHandlers.length;)b.cursorActivityHandlers[b.cursorActivityCalled++].call(null,b.cm)}}while(c<n.length)}(c)}finally{ci=null,n(c)}}(n,function(c){for(var l=0;l<c.ops.length;l++)c.ops[l].cm.curOp=null;!function yl(t){for(var n=t.ops,c=0;c<n.length;c++)lf(n[c]);for(var l=0;l<n.length;l++)uf(n[l]);for(var b=0;b<n.length;b++)ff(n[b]);for(var D=0;D<n.length;D++)ml(n[D]);for(var X=0;X<n.length;X++)cf(n[X])}(c)})}function lf(t){var n=t.cm,c=n.display;(function pf(t){var n=t.display;!n.scrollbarsClipped&&n.scroller.offsetWidth&&(n.nativeBarWidth=n.scroller.offsetWidth-n.scroller.clientWidth,n.heightForcer.style.height=yr(t)+"px",n.sizer.style.marginBottom=-n.nativeBarWidth+"px",n.sizer.style.borderRightWidth=yr(t)+"px",n.scrollbarsClipped=!0)})(n),t.updateMaxLine&&To(n),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<c.viewFrom||t.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&n.options.lineWrapping,t.update=t.mustUpdate&&new Do(n,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function uf(t){t.updatedDisplay=t.mustUpdate&&qs(t.cm,t.update)}function ff(t){var n=t.cm,c=n.display;t.updatedDisplay&&Ki(n),t.barMeasure=eo(n),c.maxLineChanged&&!n.options.lineWrapping&&(t.adjustWidthTo=rl(n,c.maxLine,c.maxLine.text.length).left+3,n.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+t.adjustWidthTo+yr(n)+n.display.barWidth),t.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+t.adjustWidthTo-an(n))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=c.input.prepareSelection())}function ml(t){var n=t.cm;null!=t.adjustWidthTo&&(n.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<n.doc.scrollLeft&&qn(n,Math.min(n.display.scroller.scrollLeft,t.maxScrollLeft),!0),n.display.maxLineChanged=!1);var c=t.focus&&t.focus==ne();t.preparedSelection&&n.display.input.showSelection(t.preparedSelection,c),(t.updatedDisplay||t.startHeight!=n.doc.height)&&Jn(n,t.barMeasure),t.updatedDisplay&&Mo(n,t.barMeasure),t.selectionChanged&&Ps(n),n.state.focused&&t.updateInput&&n.display.input.reset(t.typing),c&&dl(t.cm)}function cf(t){var n=t.cm,c=n.display,l=n.doc;if(t.updatedDisplay&&bl(n,t.update),null!=c.wheelStartX&&(null!=t.scrollTop||null!=t.scrollLeft||t.scrollToPos)&&(c.wheelStartX=c.wheelStartY=null),null!=t.scrollTop&&Ws(n,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&qn(n,t.scrollLeft,!0,!0),t.scrollToPos){var b=function nf(t,n,c,l){var b;null==l&&(l=0),!t.options.lineWrapping&&n==c&&(c="before"==n.sticky?ot(n.line,n.ch+1,"before"):n,n=n.ch?ot(n.line,"before"==n.sticky?n.ch-1:n.ch,"after"):n);for(var D=0;D<5;D++){var X=!1,Z=Nr(t,n),re=c&&c!=n?Nr(t,c):Z,ae=Us(t,b={left:Math.min(Z.left,re.left),top:Math.min(Z.top,re.top)-l,right:Math.max(Z.left,re.left),bottom:Math.max(Z.bottom,re.bottom)+l}),we=t.doc.scrollTop,Ee=t.doc.scrollLeft;if(null!=ae.scrollTop&&($i(t,ae.scrollTop),Math.abs(t.doc.scrollTop-we)>1&&(X=!0)),null!=ae.scrollLeft&&(qn(t,ae.scrollLeft),Math.abs(t.doc.scrollLeft-Ee)>1&&(X=!0)),!X)break}return b}(n,St(l,t.scrollToPos.from),St(l,t.scrollToPos.to),t.scrollToPos.margin);!function rf(t,n){if(!pt(t,"scrollCursorIntoView")){var c=t.display,l=c.sizer.getBoundingClientRect(),b=null;if(n.top+l.top<0?b=!0:n.bottom+l.top>(window.innerHeight||document.documentElement.clientHeight)&&(b=!1),null!=b&&!f){var D=ce("div","\u200b",null,"position: absolute;\n                         top: "+(n.top-c.viewOffset-Xi(t.display))+"px;\n                         height: "+(n.bottom-n.top+yr(t)+c.barHeight)+"px;\n                         left: "+n.left+"px; width: "+Math.max(2,n.right-n.left)+"px;");t.display.lineSpace.appendChild(D),D.scrollIntoView(b),t.display.lineSpace.removeChild(D)}}}(n,b)}var D=t.maybeHiddenMarkers,X=t.maybeUnhiddenMarkers;if(D)for(var Z=0;Z<D.length;++Z)D[Z].lines.length||vt(D[Z],"hide");if(X)for(var re=0;re<X.length;++re)X[re].lines.length&&vt(X[re],"unhide");c.wrapper.offsetHeight&&(l.scrollTop=n.display.scroller.scrollTop),t.changeObjs&&vt(n,"changes",n,t.changeObjs),t.update&&t.update.finish()}function br(t,n){if(t.curOp)return n();mn(t);try{return n()}finally{Vn(t)}}function ir(t,n){return function(){if(t.curOp)return n.apply(t,arguments);mn(t);try{return n.apply(t,arguments)}finally{Vn(t)}}}function pr(t){return function(){if(this.curOp)return t.apply(this,arguments);mn(this);try{return t.apply(this,arguments)}finally{Vn(this)}}}function or(t){return function(){var n=this.cm;if(!n||n.curOp)return t.apply(this,arguments);mn(n);try{return t.apply(this,arguments)}finally{Vn(n)}}}function ro(t,n){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(n,de(hf,t))}function hf(t){var n=t.doc;if(!(n.highlightFrontier>=t.display.viewTo)){var c=+new Date+t.options.workTime,l=Gi(t,n.highlightFrontier),b=[];n.iter(l.line,Math.min(n.first+n.size,t.display.viewTo+500),function(D){if(l.line>=t.display.viewFrom){var X=D.styles,Z=D.text.length>t.options.maxHighlightLength?Tr(n.mode,l.state):null,re=Ea(t,D,l,!0);Z&&(l.state=Z),D.styles=re.styles;var ae=D.styleClasses,we=re.classes;we?D.styleClasses=we:ae&&(D.styleClasses=null);for(var Ee=!X||X.length!=D.styles.length||ae!=we&&(!ae||!we||ae.bgClass!=we.bgClass||ae.textClass!=we.textClass),Ue=0;!Ee&&Ue<X.length;++Ue)Ee=X[Ue]!=D.styles[Ue];Ee&&b.push(l.line),D.stateAfter=l.save(),l.nextLine()}else D.text.length<=t.options.maxHighlightLength&&So(t,D.text,l),D.stateAfter=l.line%5==0?l.save():null,l.nextLine();if(+new Date>c)return ro(t,t.options.workDelay),!0}),n.highlightFrontier=l.line,n.modeFrontier=Math.max(n.modeFrontier,l.line),b.length&&br(t,function(){for(var D=0;D<b.length;D++)Wt(t,b[D],"text")})}}var Do=function(t,n,c){var l=t.display;this.viewport=n,this.visible=Yi(l,t.doc,n),this.editorIsHidden=!l.wrapper.offsetWidth,this.wrapperHeight=l.wrapper.clientHeight,this.wrapperWidth=l.wrapper.clientWidth,this.oldDisplayWidth=an(t),this.force=c,this.dims=Oo(t),this.events=[]};function qs(t,n){var c=t.display,l=t.doc;if(n.editorIsHidden)return zt(t),!1;if(!n.force&&n.visible.from>=c.viewFrom&&n.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&0==hl(t))return!1;er(t)&&(zt(t),n.dims=Oo(t));var b=l.first+l.size,D=Math.max(n.visible.from-t.options.viewportMargin,l.first),X=Math.min(b,n.visible.to+t.options.viewportMargin);c.viewFrom<D&&D-c.viewFrom<20&&(D=Math.max(l.first,c.viewFrom)),c.viewTo>X&&c.viewTo-X<20&&(X=Math.min(b,c.viewTo)),on&&(D=Dr(t.doc,D),X=Ha(t.doc,X));var Z=D!=c.viewFrom||X!=c.viewTo||c.lastWrapHeight!=n.wrapperHeight||c.lastWrapWidth!=n.wrapperWidth;(function ef(t,n,c){var l=t.display;0==l.view.length||n>=l.viewTo||c<=l.viewFrom?(l.view=fi(t,n,c),l.viewFrom=n):(l.viewFrom>n?l.view=fi(t,n,l.viewFrom).concat(l.view):l.viewFrom<n&&(l.view=l.view.slice(Wn(t,n))),l.viewFrom=n,l.viewTo<c?l.view=l.view.concat(fi(t,l.viewTo,c)):l.viewTo>c&&(l.view=l.view.slice(0,Wn(t,c)))),l.viewTo=c})(t,D,X),c.viewOffset=Xr(bt(t.doc,c.viewFrom)),t.display.mover.style.top=c.viewOffset+"px";var re=hl(t);if(!Z&&0==re&&!n.force&&c.renderedView==c.view&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;var ae=function df(t){if(t.hasFocus())return null;var n=ne();if(!n||!se(t.display.lineDiv,n))return null;var c={activeElt:n};if(window.getSelection){var l=window.getSelection();l.anchorNode&&l.extend&&se(t.display.lineDiv,l.anchorNode)&&(c.anchorNode=l.anchorNode,c.anchorOffset=l.anchorOffset,c.focusNode=l.focusNode,c.focusOffset=l.focusOffset)}return c}(t);return re>4&&(c.lineDiv.style.display="none"),function gf(t,n,c){var l=t.display,b=t.options.lineNumbers,D=l.lineDiv,X=D.firstChild;function Z(Ze){var tt=Ze.nextSibling;return o&&P&&t.display.currentWheelTarget==Ze?Ze.style.display="none":Ze.parentNode.removeChild(Ze),tt}for(var re=l.view,ae=l.viewFrom,we=0;we<re.length;we++){var Ee=re[we];if(!Ee.hidden)if(Ee.node&&Ee.node.parentNode==D){for(;X!=Ee.node;)X=Z(X);var Qe=b&&null!=n&&n<=ae&&Ee.lineNumber;Ee.changes&&(Ie(Ee.changes,"gutter")>-1&&(Qe=!1),Ya(t,Ee,ae,c)),Qe&&($(Ee.lineNumber),Ee.lineNumber.appendChild(document.createTextNode(ko(t.options,ae)))),X=Ee.node.nextSibling}else{var Ue=$a(t,Ee,ae,c);D.insertBefore(Ue,X)}ae+=Ee.size}for(;X;)X=Z(X)}(t,c.updateLineNumbers,n.dims),re>4&&(c.lineDiv.style.display=""),c.renderedView=c.view,function vf(t){if(t&&t.activeElt&&t.activeElt!=ne()&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&se(document.body,t.anchorNode)&&se(document.body,t.focusNode))){var n=window.getSelection(),c=document.createRange();c.setEnd(t.anchorNode,t.anchorOffset),c.collapse(!1),n.removeAllRanges(),n.addRange(c),n.extend(t.focusNode,t.focusOffset)}}(ae),$(c.cursorDiv),$(c.selectionDiv),c.gutters.style.height=c.sizer.style.minHeight=0,Z&&(c.lastWrapHeight=n.wrapperHeight,c.lastWrapWidth=n.wrapperWidth,ro(t,400)),c.updateLineNumbers=null,!0}function bl(t,n){for(var c=n.viewport,l=!0;;l=!1){if(l&&t.options.lineWrapping&&n.oldDisplayWidth!=an(t))l&&(n.visible=Yi(t.display,t.doc,c));else if(c&&null!=c.top&&(c={top:Math.min(t.doc.height+As(t.display)-vn(t),c.top)}),n.visible=Yi(t.display,t.doc,c),n.visible.from>=t.display.viewFrom&&n.visible.to<=t.display.viewTo)break;if(!qs(t,n))break;Ki(t);var b=eo(t);Vi(t),Jn(t,b),Mo(t,b),n.force=!1}n.signal(t,"update",t),(t.display.viewFrom!=t.display.reportedViewFrom||t.display.viewTo!=t.display.reportedViewTo)&&(n.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function Xs(t,n){var c=new Do(t,n);if(qs(t,c)){Ki(t),bl(t,c);var l=eo(t);Vi(t),Jn(t,l),Mo(t,l),c.finish()}}function Js(t){var n=t.gutters.offsetWidth;t.sizer.style.marginLeft=n+"px",nr(t,"gutterChanged",t)}function Mo(t,n){t.display.sizer.style.minHeight=n.docHeight+"px",t.display.heightForcer.style.top=n.docHeight+"px",t.display.gutters.style.height=n.docHeight+t.display.barHeight+yr(t)+"px"}function $t(t){var n=t.display,c=n.view;if(n.alignWidgets||n.gutters.firstChild&&t.options.fixedGutter){for(var l=js(n)-n.scroller.scrollLeft+t.doc.scrollLeft,b=n.gutters.offsetWidth,D=l+"px",X=0;X<c.length;X++)if(!c[X].hidden){t.options.fixedGutter&&(c[X].gutter&&(c[X].gutter.style.left=D),c[X].gutterBackground&&(c[X].gutterBackground.style.left=D));var Z=c[X].alignable;if(Z)for(var re=0;re<Z.length;re++)Z[re].style.left=D}t.options.fixedGutter&&(n.gutters.style.left=l+b+"px")}}function er(t){if(!t.options.lineNumbers)return!1;var n=t.doc,c=ko(t.options,n.first+n.size-1),l=t.display;if(c.length!=l.lineNumChars){var b=l.measure.appendChild(ce("div",[ce("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),D=b.firstChild.offsetWidth,X=b.offsetWidth-D;return l.lineGutter.style.width="",l.lineNumInnerWidth=Math.max(D,l.lineGutter.offsetWidth-X)+1,l.lineNumWidth=l.lineNumInnerWidth+X,l.lineNumChars=l.lineNumInnerWidth?c.length:-1,l.lineGutter.style.width=l.lineNumWidth+"px",Js(t.display),!0}return!1}function Vs(t,n){for(var c=[],l=!1,b=0;b<t.length;b++){var D=t[b],X=null;if("string"!=typeof D&&(X=D.style,D=D.className),"CodeMirror-linenumbers"==D){if(!n)continue;l=!0}c.push({className:D,style:X})}return n&&!l&&c.push({className:"CodeMirror-linenumbers",style:null}),c}function xl(t){var n=t.gutters,c=t.gutterSpecs;$(n),t.lineGutter=null;for(var l=0;l<c.length;++l){var b=c[l],D=b.className,X=b.style,Z=n.appendChild(ce("div",null,"CodeMirror-gutter "+D));X&&(Z.style.cssText=X),"CodeMirror-linenumbers"==D&&(t.lineGutter=Z,Z.style.width=(t.lineNumWidth||1)+"px")}n.style.display=c.length?"":"none",Js(t)}function no(t){xl(t.display),mr(t),$t(t)}function yf(t,n,c,l){var b=this;this.input=c,b.scrollbarFiller=ce("div",null,"CodeMirror-scrollbar-filler"),b.scrollbarFiller.setAttribute("cm-not-content","true"),b.gutterFiller=ce("div",null,"CodeMirror-gutter-filler"),b.gutterFiller.setAttribute("cm-not-content","true"),b.lineDiv=xe("div",null,"CodeMirror-code"),b.selectionDiv=ce("div",null,null,"position: relative; z-index: 1"),b.cursorDiv=ce("div",null,"CodeMirror-cursors"),b.measure=ce("div",null,"CodeMirror-measure"),b.lineMeasure=ce("div",null,"CodeMirror-measure"),b.lineSpace=xe("div",[b.measure,b.lineMeasure,b.selectionDiv,b.cursorDiv,b.lineDiv],null,"position: relative; outline: none");var D=xe("div",[b.lineSpace],"CodeMirror-lines");b.mover=ce("div",[D],null,"position: relative"),b.sizer=ce("div",[b.mover],"CodeMirror-sizer"),b.sizerWidth=null,b.heightForcer=ce("div",null,null,"position: absolute; height: 50px; width: 1px;"),b.gutters=ce("div",null,"CodeMirror-gutters"),b.lineGutter=null,b.scroller=ce("div",[b.sizer,b.heightForcer,b.gutters],"CodeMirror-scroll"),b.scroller.setAttribute("tabIndex","-1"),b.wrapper=ce("div",[b.scrollbarFiller,b.gutterFiller,b.scroller],"CodeMirror"),b.wrapper.setAttribute("translate","no"),y&&e<8&&(b.gutters.style.zIndex=-1,b.scroller.style.paddingRight=0),!o&&!(ue&&E)&&(b.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(b.wrapper):t(b.wrapper)),b.viewFrom=b.viewTo=n.first,b.reportedViewFrom=b.reportedViewTo=n.first,b.view=[],b.renderedView=null,b.externalMeasured=null,b.viewOffset=0,b.lastWrapHeight=b.lastWrapWidth=0,b.updateLineNumbers=null,b.nativeBarWidth=b.barHeight=b.barWidth=0,b.scrollbarsClipped=!1,b.lineNumWidth=b.lineNumInnerWidth=b.lineNumChars=null,b.alignWidgets=!1,b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.maxLine=null,b.maxLineLength=0,b.maxLineChanged=!1,b.wheelDX=b.wheelDY=b.wheelStartX=b.wheelStartY=null,b.shift=!1,b.selForContextMenu=null,b.activeTouch=null,b.gutterSpecs=Vs(l.gutters,l.lineNumbers),xl(b),c.init(b)}Do.prototype.signal=function(t,n){kt(t,n)&&this.events.push(arguments)},Do.prototype.finish=function(){for(var t=0;t<this.events.length;t++)vt.apply(null,this.events[t])};var Po=0,un=null;function wl(t){var n=t.wheelDeltaX,c=t.wheelDeltaY;return null==n&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(n=t.detail),null==c&&t.detail&&t.axis==t.VERTICAL_AXIS?c=t.detail:null==c&&(c=t.wheelDelta),{x:n,y:c}}function mf(t){var n=wl(t);return n.x*=un,n.y*=un,n}function kl(t,n){d&&m>=102&&(null==t.display.chromeScrollHack?t.display.sizer.style.pointerEvents="none":clearTimeout(t.display.chromeScrollHack),t.display.chromeScrollHack=setTimeout(function(){t.display.chromeScrollHack=null,t.display.sizer.style.pointerEvents=""},100));var c=wl(n),l=c.x,b=c.y,D=un;0===n.deltaMode&&(l=n.deltaX,b=n.deltaY,D=1);var X=t.display,Z=X.scroller,re=Z.scrollWidth>Z.clientWidth,ae=Z.scrollHeight>Z.clientHeight;if(l&&re||b&&ae){if(b&&P&&o)e:for(var we=n.target,Ee=X.view;we!=Z;we=we.parentNode)for(var Ue=0;Ue<Ee.length;Ue++)if(Ee[Ue].node==we){t.display.currentWheelTarget=we;break e}if(l&&!ue&&!h&&null!=D)return b&&ae&&$i(t,Math.max(0,Z.scrollTop+b*D)),qn(t,Math.max(0,Z.scrollLeft+l*D)),(!b||b&&ae)&&it(n),void(X.wheelStartX=null);if(b&&null!=D){var Qe=b*D,Ze=t.doc.scrollTop,tt=Ze+X.wrapper.clientHeight;Qe<0?Ze=Math.max(0,Ze+Qe-50):tt=Math.min(t.doc.height,tt+Qe+50),Xs(t,{top:Ze,bottom:tt})}Po<20&&0!==n.deltaMode&&(null==X.wheelStartX?(X.wheelStartX=Z.scrollLeft,X.wheelStartY=Z.scrollTop,X.wheelDX=l,X.wheelDY=b,setTimeout(function(){if(null!=X.wheelStartX){var st=Z.scrollLeft-X.wheelStartX,ut=Z.scrollTop-X.wheelStartY,dt=ut&&X.wheelDY&&ut/X.wheelDY||st&&X.wheelDX&&st/X.wheelDX;X.wheelStartX=X.wheelStartY=null,dt&&(un=(un*Po+dt)/(Po+1),++Po)}},200)):(X.wheelDX+=l,X.wheelDY+=b))}}y?un=-.53:ue?un=15:d?un=-.7:k&&(un=-1/3);var Lr=function(t,n){this.ranges=t,this.primIndex=n};Lr.prototype.primary=function(){return this.ranges[this.primIndex]},Lr.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++){var c=this.ranges[n],l=t.ranges[n];if(!ds(c.anchor,l.anchor)||!ds(c.head,l.head))return!1}return!0},Lr.prototype.deepCopy=function(){for(var t=[],n=0;n<this.ranges.length;n++)t[n]=new Dt(vs(this.ranges[n].anchor),vs(this.ranges[n].head));return new Lr(t,this.primIndex)},Lr.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},Lr.prototype.contains=function(t,n){n||(n=t);for(var c=0;c<this.ranges.length;c++){var l=this.ranges[c];if(Ct(n,l.from())>=0&&Ct(t,l.to())<=0)return c}return-1};var Dt=function(t,n){this.anchor=t,this.head=n};function Mr(t,n,c){var l=t&&t.options.selectionsMayTouch,b=n[c];n.sort(function(Ue,Qe){return Ct(Ue.from(),Qe.from())}),c=Ie(n,b);for(var D=1;D<n.length;D++){var X=n[D],Z=n[D-1],re=Ct(Z.to(),X.from());if(l&&!X.empty()?re>0:re>=0){var ae=Ui(Z.from(),X.from()),we=_o(Z.to(),X.to()),Ee=Z.empty()?X.from()==X.head:Z.from()==Z.head;D<=c&&--c,n.splice(--D,2,new Dt(Ee?we:ae,Ee?ae:we))}}return new Lr(n,c)}function bn(t,n){return new Lr([new Dt(t,n||t)],0)}function xn(t){return t.text?ot(t.from.line+t.text.length-1,We(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function _l(t,n){if(Ct(t,n.from)<0)return t;if(Ct(t,n.to)<=0)return xn(n);var c=t.line+n.text.length-(n.to.line-n.from.line)-1,l=t.ch;return t.line==n.to.line&&(l+=xn(n).ch-n.to.ch),ot(c,l)}function Ks(t,n){for(var c=[],l=0;l<t.sel.ranges.length;l++){var b=t.sel.ranges[l];c.push(new Dt(_l(b.anchor,n),_l(b.head,n)))}return Mr(t.cm,c,t.sel.primIndex)}function Cl(t,n,c){return t.line==n.line?ot(c.line,t.ch-n.ch+c.ch):ot(c.line+(t.line-n.line),t.ch)}function Ys(t){t.doc.mode=Pi(t.options,t.doc.modeOption),io(t)}function io(t){t.doc.iter(function(n){n.stateAfter&&(n.stateAfter=null),n.styles&&(n.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,ro(t,100),t.state.modeGen++,t.curOp&&mr(t)}function Sl(t,n){return 0==n.from.ch&&0==n.to.ch&&""==We(n.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Zs(t,n,c,l){function b(dt){return c?c[dt]:null}function D(dt,ft,yt){(function Wa(t,n,c,l){t.text=n,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Ba(t),Qa(t,c);var b=l?l(t):1;b!=t.height&&qr(t,b)})(dt,ft,yt,l),nr(dt,"change",dt,n)}function X(dt,ft){for(var yt=[],wt=dt;wt<ft;++wt)yt.push(new ui(ae[wt],b(wt),l));return yt}var Z=n.from,re=n.to,ae=n.text,we=bt(t,Z.line),Ee=bt(t,re.line),Ue=We(ae),Qe=b(ae.length-1),Ze=re.line-Z.line;if(n.full)t.insert(0,X(0,ae.length)),t.remove(ae.length,t.size-ae.length);else if(Sl(t,n)){var tt=X(0,ae.length-1);D(Ee,Ee.text,Qe),Ze&&t.remove(Z.line,Ze),tt.length&&t.insert(Z.line,tt)}else if(we==Ee)if(1==ae.length)D(we,we.text.slice(0,Z.ch)+Ue+we.text.slice(re.ch),Qe);else{var st=X(1,ae.length-1);st.push(new ui(Ue+we.text.slice(re.ch),Qe,l)),D(we,we.text.slice(0,Z.ch)+ae[0],b(0)),t.insert(Z.line+1,st)}else if(1==ae.length)D(we,we.text.slice(0,Z.ch)+ae[0]+Ee.text.slice(re.ch),b(0)),t.remove(Z.line+1,Ze);else{D(we,we.text.slice(0,Z.ch)+ae[0],b(0)),D(Ee,Ue+Ee.text.slice(re.ch),Qe);var ut=X(1,ae.length-1);Ze>1&&t.remove(Z.line+1,Ze-1),t.insert(Z.line+1,ut)}nr(t,"change",t,n)}function Pr(t,n,c){!function l(b,D,X){if(b.linked)for(var Z=0;Z<b.linked.length;++Z){var re=b.linked[Z];if(re.doc!=D){var ae=X&&re.sharedHist;c&&!ae||(n(re.doc,ae),l(re.doc,b,ae))}}}(t,null,!0)}function oo(t,n){if(n.cm)throw new Error("This document is already in use.");t.doc=n,n.cm=t,Ds(t),Ys(t),$s(t),t.options.direction=n.direction,t.options.lineWrapping||To(t),t.options.mode=n.modeOption,mr(t)}function $s(t){("rtl"==t.doc.direction?ve:V)(t.display.lineDiv,"CodeMirror-rtl")}function Bo(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function ea(t,n){var c={from:vs(n.from),to:xn(n),text:pn(t,n.from,n.to)};return El(t,c,n.from.line,n.to.line+1),Pr(t,function(l){return El(l,c,n.from.line,n.to.line+1)},!0),c}function Al(t){for(;t.length;){if(!We(t).ranges)break;t.pop()}}function Fl(t,n,c,l){var b=t.history;b.undone.length=0;var X,Z,D=+new Date;if((b.lastOp==l||b.lastOrigin==n.origin&&n.origin&&("+"==n.origin.charAt(0)&&b.lastModTime>D-(t.cm?t.cm.options.historyEventDelay:500)||"*"==n.origin.charAt(0)))&&(X=function wf(t,n){return n?(Al(t.done),We(t.done)):t.done.length&&!We(t.done).ranges?We(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),We(t.done)):void 0}(b,b.lastOp==l)))Z=We(X.changes),0==Ct(n.from,n.to)&&0==Ct(n.from,Z.to)?Z.to=xn(n):X.changes.push(ea(t,n));else{var re=We(b.done);for((!re||!re.ranges)&&Qo(t.sel,b.done),X={changes:[ea(t,n)],generation:b.generation},b.done.push(X);b.done.length>b.undoDepth;)b.done.shift(),b.done[0].ranges||b.done.shift()}b.done.push(c),b.generation=++b.maxGeneration,b.lastModTime=b.lastSelTime=D,b.lastOp=b.lastSelOp=l,b.lastOrigin=b.lastSelOrigin=n.origin,Z||vt(t,"historyAdded")}function _f(t,n,c,l){var b=t.history,D=l&&l.origin;c==b.lastSelOp||D&&b.lastSelOrigin==D&&(b.lastModTime==b.lastSelTime&&b.lastOrigin==D||function kf(t,n,c,l){var b=n.charAt(0);return"*"==b||"+"==b&&c.ranges.length==l.ranges.length&&c.somethingSelected()==l.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,D,We(b.done),n))?b.done[b.done.length-1]=n:Qo(n,b.done),b.lastSelTime=+new Date,b.lastSelOrigin=D,b.lastSelOp=c,l&&!1!==l.clearRedo&&Al(b.undone)}function Qo(t,n){var c=We(n);c&&c.ranges&&c.equals(t)||n.push(t)}function El(t,n,c,l){var b=n["spans_"+t.id],D=0;t.iter(Math.max(t.first,c),Math.min(t.first+t.size,l),function(X){X.markedSpans&&((b||(b=n["spans_"+t.id]={}))[D]=X.markedSpans),++D})}function Cf(t){if(!t)return null;for(var n,c=0;c<t.length;++c)t[c].marker.explicitlyCleared?n||(n=t.slice(0,c)):n&&n.push(t[c]);return n?n.length?n:null:t}function so(t,n){var c=function Uo(t,n){var c=n["spans_"+t.id];if(!c)return null;for(var l=[],b=0;b<n.text.length;++b)l.push(Cf(c[b]));return l}(t,n),l=ms(t,n);if(!c)return l;if(!l)return c;for(var b=0;b<c.length;++b){var D=c[b],X=l[b];if(D&&X)e:for(var Z=0;Z<X.length;++Z){for(var re=X[Z],ae=0;ae<D.length;++ae)if(D[ae].marker==re.marker)continue e;D.push(re)}else X&&(c[b]=X)}return c}function bi(t,n,c){for(var l=[],b=0;b<t.length;++b){var D=t[b];if(D.ranges)l.push(c?Lr.prototype.deepCopy.call(D):D);else{var X=D.changes,Z=[];l.push({changes:Z});for(var re=0;re<X.length;++re){var ae=X[re],we=void 0;if(Z.push({from:ae.from,to:ae.to,text:ae.text}),n)for(var Ee in ae)(we=Ee.match(/^spans_(\d+)$/))&&Ie(n,Number(we[1]))>-1&&(We(Z)[Ee]=ae[Ee],delete ae[Ee])}}}return l}function ta(t,n,c,l){if(l){var b=t.anchor;if(c){var D=Ct(n,b)<0;D!=Ct(c,b)<0?(b=n,n=c):D!=Ct(n,c)<0&&(n=c)}return new Dt(b,n)}return new Dt(c||n,n)}function Vr(t,n,c,l,b){null==b&&(b=t.cm&&(t.cm.display.shift||t.extend)),fr(t,new Lr([ta(t.sel.primary(),n,c,b)],0),l)}function wn(t,n,c){for(var l=[],b=t.cm&&(t.cm.display.shift||t.extend),D=0;D<t.sel.ranges.length;D++)l[D]=ta(t.sel.ranges[D],n[D],null,b);fr(t,Mr(t.cm,l,t.sel.primIndex),c)}function ra(t,n,c,l){var b=t.sel.ranges.slice(0);b[n]=c,fr(t,Mr(t.cm,b,t.sel.primIndex),l)}function Tl(t,n,c,l){fr(t,bn(n,c),l)}function Nl(t,n,c){var l=t.history.done,b=We(l);b&&b.ranges?(l[l.length-1]=n,ao(t,n,c)):fr(t,n,c)}function fr(t,n,c){ao(t,n,c),_f(t,t.sel,t.cm?t.cm.curOp.id:NaN,c)}function ao(t,n,c){(kt(t,"beforeSelectionChange")||t.cm&&kt(t.cm,"beforeSelectionChange"))&&(n=function Sf(t,n,c){var l={ranges:n.ranges,update:function(b){this.ranges=[];for(var D=0;D<b.length;D++)this.ranges[D]=new Dt(St(t,b[D].anchor),St(t,b[D].head))},origin:c&&c.origin};return vt(t,"beforeSelectionChange",t,l),t.cm&&vt(t.cm,"beforeSelectionChange",t.cm,l),l.ranges!=n.ranges?Mr(t.cm,l.ranges,l.ranges.length-1):n}(t,n,c));var l=c&&c.bias||(Ct(n.primary().head,t.sel.primary().head)<0?-1:1);Ll(t,Go(t,n,l,!0)),(!c||!1!==c.scroll)&&t.cm&&"nocursor"!=t.cm.getOption("readOnly")&&zn(t.cm)}function Ll(t,n){n.equals(t.sel)||(t.sel=n,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,_t(t.cm)),nr(t,"cursorActivity",t))}function Il(t){Ll(t,Go(t,t.sel,null,!1))}function Go(t,n,c,l){for(var b,D=0;D<n.ranges.length;D++){var X=n.ranges[D],Z=n.ranges.length==t.sel.ranges.length&&t.sel.ranges[D],re=Br(t,X.anchor,Z&&Z.anchor,c,l),ae=X.head==X.anchor?re:Br(t,X.head,Z&&Z.head,c,l);(b||re!=X.anchor||ae!=X.head)&&(b||(b=n.ranges.slice(0,D)),b[D]=new Dt(re,ae))}return b?Mr(t.cm,b,n.primIndex):n}function kn(t,n,c,l,b){var D=bt(t,n.line);if(D.markedSpans)for(var X=0;X<D.markedSpans.length;++X){var Z=D.markedSpans[X],re=Z.marker,ae="selectLeft"in re?!re.selectLeft:re.inclusiveLeft,we="selectRight"in re?!re.selectRight:re.inclusiveRight;if((null==Z.from||(ae?Z.from<=n.ch:Z.from<n.ch))&&(null==Z.to||(we?Z.to>=n.ch:Z.to>n.ch))){if(b&&(vt(re,"beforeCursorEnter"),re.explicitlyCleared)){if(D.markedSpans){--X;continue}break}if(!re.atomic)continue;if(c){var Ee=re.find(l<0?1:-1),Ue=void 0;if((l<0?we:ae)&&(Ee=fn(t,Ee,-l,Ee&&Ee.line==n.line?D:null)),Ee&&Ee.line==n.line&&(Ue=Ct(Ee,c))&&(l<0?Ue<0:Ue>0))return kn(t,Ee,n,l,b)}var Qe=re.find(l<0?-1:1);return(l<0?ae:we)&&(Qe=fn(t,Qe,l,Qe.line==n.line?D:null)),Qe?kn(t,Qe,n,l,b):null}}return n}function Br(t,n,c,l,b){var D=l||1;return kn(t,n,c,D,b)||!b&&kn(t,n,c,D,!0)||kn(t,n,c,-D,b)||!b&&kn(t,n,c,-D,!0)||(t.cantEdit=!0,ot(t.first,0))}function fn(t,n,c,l){return c<0&&0==n.ch?n.line>t.first?St(t,ot(n.line-1)):null:c>0&&n.ch==(l||bt(t,n.line)).text.length?n.line<t.first+t.size-1?ot(n.line+1,0):null:new ot(n.line,n.ch+c)}function Ol(t){t.setSelection(ot(t.firstLine(),0),ot(t.lastLine()),H)}function Ho(t,n,c){var l={canceled:!1,from:n.from,to:n.to,text:n.text,origin:n.origin,cancel:function(){return l.canceled=!0}};return c&&(l.update=function(b,D,X,Z){b&&(l.from=St(t,b)),D&&(l.to=St(t,D)),X&&(l.text=X),void 0!==Z&&(l.origin=Z)}),vt(t,"beforeChange",t,l),t.cm&&vt(t.cm,"beforeChange",t.cm,l),l.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:l.from,to:l.to,text:l.text,origin:l.origin}}function _n(t,n,c){if(t.cm){if(!t.cm.curOp)return ir(t.cm,_n)(t,n,c);if(t.cm.state.suppressEdits)return}if(!(kt(t,"beforeChange")||t.cm&&kt(t.cm,"beforeChange"))||(n=Ho(t,n,!0))){var l=ys&&!c&&function Pa(t,n,c){var l=null;if(t.iter(n.line,c.line+1,function(Qe){if(Qe.markedSpans)for(var Ze=0;Ze<Qe.markedSpans.length;++Ze){var tt=Qe.markedSpans[Ze].marker;tt.readOnly&&(!l||-1==Ie(l,tt))&&(l||(l=[])).push(tt)}}),!l)return null;for(var b=[{from:n,to:c}],D=0;D<l.length;++D)for(var X=l[D],Z=X.find(0),re=0;re<b.length;++re){var ae=b[re];if(!(Ct(ae.to,Z.from)<0||Ct(ae.from,Z.to)>0)){var we=[re,1],Ee=Ct(ae.from,Z.from),Ue=Ct(ae.to,Z.to);(Ee<0||!X.inclusiveLeft&&!Ee)&&we.push({from:ae.from,to:Z.from}),(Ue>0||!X.inclusiveRight&&!Ue)&&we.push({from:Z.to,to:ae.to}),b.splice.apply(b,we),re+=we.length-3}}return b}(t,n.from,n.to);if(l)for(var b=l.length-1;b>=0;--b)Rl(t,{from:l[b].from,to:l[b].to,text:b?[""]:n.text,origin:n.origin});else Rl(t,n)}}function Rl(t,n){if(1!=n.text.length||""!=n.text[0]||0!=Ct(n.from,n.to)){var c=Ks(t,n);Fl(t,n,c,t.cm?t.cm.curOp.id:NaN),lo(t,n,c,ms(t,n));var l=[];Pr(t,function(b,D){!D&&-1==Ie(l,b.history)&&(qo(b.history,n),l.push(b.history)),lo(b,n,null,ms(b,n))})}}function Wo(t,n,c){var l=t.cm&&t.cm.state.suppressEdits;if(!l||c){for(var D,b=t.history,X=t.sel,Z="undo"==n?b.done:b.undone,re="undo"==n?b.undone:b.done,ae=0;ae<Z.length&&(D=Z[ae],!(c?D.ranges&&!D.equals(t.sel):!D.ranges));ae++);if(ae!=Z.length){for(b.lastOrigin=b.lastSelOrigin=null;;){if(!(D=Z.pop()).ranges){if(l)return void Z.push(D);break}if(Qo(D,re),c&&!D.equals(t.sel))return void fr(t,D,{clearRedo:!1});X=D}var we=[];Qo(X,re),re.push({changes:we,generation:b.generation}),b.generation=D.generation||++b.maxGeneration;for(var Ee=kt(t,"beforeChange")||t.cm&&kt(t.cm,"beforeChange"),Ue=function(tt){var st=D.changes[tt];if(st.origin=n,Ee&&!Ho(t,st,!1))return Z.length=0,{};we.push(ea(t,st));var ut=tt?Ks(t,st):We(Z);lo(t,st,ut,so(t,st)),!tt&&t.cm&&t.cm.scrollIntoView({from:st.from,to:xn(st)});var dt=[];Pr(t,function(ft,yt){!yt&&-1==Ie(dt,ft.history)&&(qo(ft.history,st),dt.push(ft.history)),lo(ft,st,null,so(ft,st))})},Qe=D.changes.length-1;Qe>=0;--Qe){var Ze=Ue(Qe);if(Ze)return Ze.v}}}}function jl(t,n){if(0!=n&&(t.first+=n,t.sel=new Lr(Ye(t.sel.ranges,function(b){return new Dt(ot(b.anchor.line+n,b.anchor.ch),ot(b.head.line+n,b.head.ch))}),t.sel.primIndex),t.cm)){mr(t.cm,t.first,t.first-n,n);for(var c=t.cm.display,l=c.viewFrom;l<c.viewTo;l++)Wt(t.cm,l,"gutter")}}function lo(t,n,c,l){if(t.cm&&!t.cm.curOp)return ir(t.cm,lo)(t,n,c,l);if(n.to.line<t.first)jl(t,n.text.length-1-(n.to.line-n.from.line));else if(!(n.from.line>t.lastLine())){if(n.from.line<t.first){var b=n.text.length-1-(t.first-n.from.line);jl(t,b),n={from:ot(t.first,0),to:ot(n.to.line+b,n.to.ch),text:[We(n.text)],origin:n.origin}}var D=t.lastLine();n.to.line>D&&(n={from:n.from,to:ot(D,bt(t,D).text.length),text:[n.text[0]],origin:n.origin}),n.removed=pn(t,n.from,n.to),c||(c=Ks(t,n)),t.cm?function Af(t,n,c){var l=t.doc,b=t.display,D=n.from,X=n.to,Z=!1,re=D.line;t.options.lineWrapping||(re=Mt(jr(bt(l,D.line))),l.iter(re,X.line+1,function(Qe){if(Qe==b.maxLine)return Z=!0,!0})),l.sel.contains(n.from,n.to)>-1&&_t(t),Zs(l,n,c,cl(t)),t.options.lineWrapping||(l.iter(re,D.line+n.text.length,function(Qe){var Ze=Eo(Qe);Ze>b.maxLineLength&&(b.maxLine=Qe,b.maxLineLength=Ze,b.maxLineChanged=!0,Z=!1)}),Z&&(t.curOp.updateMaxLine=!0)),function ju(t,n){if(t.modeFrontier=Math.min(t.modeFrontier,n),!(t.highlightFrontier<n-10)){for(var c=t.first,l=n-1;l>c;l--){var b=bt(t,l).stateAfter;if(b&&(!(b instanceof Co)||l+b.lookAhead<n)){c=l+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,c)}}(l,D.line),ro(t,400);var ae=n.text.length-(X.line-D.line)-1;n.full?mr(t):D.line!=X.line||1!=n.text.length||Sl(t.doc,n)?mr(t,D.line,X.line+1,ae):Wt(t,D.line,"text");var we=kt(t,"changes"),Ee=kt(t,"change");if(Ee||we){var Ue={from:D,to:X,text:n.text,removed:n.removed,origin:n.origin};Ee&&nr(t,"change",t,Ue),we&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(Ue)}t.display.selForContextMenu=null}(t.cm,n,l):Zs(t,n,l),ao(t,c,H),t.cantEdit&&Br(t,ot(t.firstLine(),0))&&(t.cantEdit=!1)}}function xi(t,n,c,l,b){var D;l||(l=c),Ct(l,c)<0&&(c=(D=[l,c])[0],l=D[1]),"string"==typeof n&&(n=t.splitLines(n)),_n(t,{from:c,to:l,text:n,origin:b})}function Dl(t,n,c,l){c<t.line?t.line+=l:n<t.line&&(t.line=n,t.ch=0)}function zo(t,n,c,l){for(var b=0;b<t.length;++b){var D=t[b],X=!0;if(D.ranges){D.copied||((D=t[b]=D.deepCopy()).copied=!0);for(var Z=0;Z<D.ranges.length;Z++)Dl(D.ranges[Z].anchor,n,c,l),Dl(D.ranges[Z].head,n,c,l)}else{for(var re=0;re<D.changes.length;++re){var ae=D.changes[re];if(c<ae.from.line)ae.from=ot(ae.from.line+l,ae.from.ch),ae.to=ot(ae.to.line+l,ae.to.ch);else if(n<=ae.to.line){X=!1;break}}X||(t.splice(0,b+1),b=0)}}}function qo(t,n){var c=n.from.line,l=n.to.line,b=n.text.length-(l-c)-1;zo(t.done,c,l,b),zo(t.undone,c,l,b)}function Kn(t,n,c,l){var b=n,D=n;return"number"==typeof n?D=bt(t,Aa(t,n)):b=Mt(n),null==b?null:(l(D,b)&&t.cm&&Wt(t.cm,b,c),D)}function Yn(t){this.lines=t,this.parent=null;for(var n=0,c=0;c<t.length;++c)t[c].parent=this,n+=t[c].height;this.height=n}function uo(t){this.children=t;for(var n=0,c=0,l=0;l<t.length;++l){var b=t[l];n+=b.chunkSize(),c+=b.height,b.parent=this}this.size=n,this.height=c,this.parent=null}Dt.prototype.from=function(){return Ui(this.anchor,this.head)},Dt.prototype.to=function(){return _o(this.anchor,this.head)},Dt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Yn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,n){for(var c=t,l=t+n;c<l;++c){var b=this.lines[c];this.height-=b.height,Qu(b),nr(b,"delete")}this.lines.splice(t,n)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,n,c){this.height+=c,this.lines=this.lines.slice(0,t).concat(n).concat(this.lines.slice(t));for(var l=0;l<n.length;++l)n[l].parent=this},iterN:function(t,n,c){for(var l=t+n;t<l;++t)if(c(this.lines[t]))return!0}},uo.prototype={chunkSize:function(){return this.size},removeInner:function(t,n){this.size-=n;for(var c=0;c<this.children.length;++c){var l=this.children[c],b=l.chunkSize();if(t<b){var D=Math.min(n,b-t),X=l.height;if(l.removeInner(t,D),this.height-=X-l.height,b==D&&(this.children.splice(c--,1),l.parent=null),0==(n-=D))break;t=0}else t-=b}if(this.size-n<25&&(this.children.length>1||!(this.children[0]instanceof Yn))){var Z=[];this.collapse(Z),this.children=[new Yn(Z)],this.children[0].parent=this}},collapse:function(t){for(var n=0;n<this.children.length;++n)this.children[n].collapse(t)},insertInner:function(t,n,c){this.size+=n.length,this.height+=c;for(var l=0;l<this.children.length;++l){var b=this.children[l],D=b.chunkSize();if(t<=D){if(b.insertInner(t,n,c),b.lines&&b.lines.length>50){for(var X=b.lines.length%25+25,Z=X;Z<b.lines.length;){var re=new Yn(b.lines.slice(Z,Z+=25));b.height-=re.height,this.children.splice(++l,0,re),re.parent=this}b.lines=b.lines.slice(0,X),this.maybeSpill()}break}t-=D}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var c=new uo(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=c.size,t.height-=c.height;var b=Ie(t.parent.children,t);t.parent.children.splice(b+1,0,c)}else{var l=new uo(t.children);l.parent=t,t.children=[l,c],t=l}c.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,n,c){for(var l=0;l<this.children.length;++l){var b=this.children[l],D=b.chunkSize();if(t<D){var X=Math.min(n,D-t);if(b.iterN(t,X,c))return!0;if(0==(n-=X))break;t=0}else t-=D}}};var fo=function(t,n,c){if(c)for(var l in c)c.hasOwnProperty(l)&&(this[l]=c[l]);this.doc=t,this.node=n};function Ml(t,n,c){Xr(n)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Gs(t,c)}fo.prototype.clear=function(){var t=this.doc.cm,n=this.line.widgets,c=this.line,l=Mt(c);if(null!=l&&n){for(var b=0;b<n.length;++b)n[b]==this&&n.splice(b--,1);n.length||(c.widgets=null);var D=di(this);qr(c,Math.max(0,c.height-D)),t&&(br(t,function(){Ml(t,c,-D),Wt(t,l,"widget")}),nr(t,"lineWidgetCleared",t,this,l))}},fo.prototype.changed=function(){var t=this,n=this.height,c=this.doc.cm,l=this.line;this.height=null;var b=di(this)-n;!b||(dn(this.doc,l)||qr(l,l.height+b),c&&br(c,function(){c.curOp.forceUpdate=!0,Ml(c,l,b),nr(c,"lineWidgetChanged",c,t,Mt(l))}))},gt(fo);var na=0,Cn=function(t,n){this.lines=[],this.type=n,this.doc=t,this.id=++na};function wi(t,n,c,l,b){if(l&&l.shared)return function Ef(t,n,c,l,b){(l=ye(l)).shared=!1;var D=[wi(t,n,c,l,b)],X=D[0],Z=l.widgetNode;return Pr(t,function(re){Z&&(l.widgetNode=Z.cloneNode(!0)),D.push(wi(re,St(re,n),St(re,c),l,b));for(var ae=0;ae<re.linked.length;++ae)if(re.linked[ae].isParent)return;X=We(D)}),new ki(D,X)}(t,n,c,l,b);if(t.cm&&!t.cm.curOp)return ir(t.cm,wi)(t,n,c,l,b);var D=new Cn(t,b),X=Ct(n,c);if(l&&ye(l,D,!1),X>0||0==X&&!1!==D.clearWhenEmpty)return D;if(D.replacedWith&&(D.collapsed=!0,D.widgetNode=xe("span",[D.replacedWith],"CodeMirror-widget"),l.handleMouseEvents||D.widgetNode.setAttribute("cm-ignore-events","true"),l.insertLeft&&(D.widgetNode.insertLeft=!0)),D.collapsed){if(Ga(t,n.line,n,c,D)||n.line!=c.line&&Ga(t,c.line,n,c,D))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Du(){on=!0}()}D.addToHistory&&Fl(t,{from:n,to:c,origin:"markText"},t.sel,NaN);var ae,Z=n.line,re=t.cm;if(t.iter(Z,c.line+1,function(Ee){re&&D.collapsed&&!re.options.lineWrapping&&jr(Ee)==re.display.maxLine&&(ae=!0),D.collapsed&&Z!=n.line&&qr(Ee,0),function Mu(t,n,c){var l=c&&window.WeakSet&&(c.markedSpans||(c.markedSpans=new WeakSet));l&&t.markedSpans&&l.has(t.markedSpans)?t.markedSpans.push(n):(t.markedSpans=t.markedSpans?t.markedSpans.concat([n]):[n],l&&l.add(t.markedSpans)),n.marker.attachLine(t)}(Ee,new Fo(D,Z==n.line?n.ch:null,Z==c.line?c.ch:null),t.cm&&t.cm.curOp),++Z}),D.collapsed&&t.iter(n.line,c.line+1,function(Ee){dn(t,Ee)&&qr(Ee,0)}),D.clearOnEnter&&Xe(D,"beforeCursorEnter",function(){return D.clear()}),D.readOnly&&(function Ra(){ys=!0}(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),D.collapsed&&(D.id=++na,D.atomic=!0),re){if(ae&&(re.curOp.updateMaxLine=!0),D.collapsed)mr(re,n.line,c.line+1);else if(D.className||D.startStyle||D.endStyle||D.css||D.attributes||D.title)for(var we=n.line;we<=c.line;we++)Wt(re,we,"text");D.atomic&&Il(re.doc),nr(re,"markerAdded",re,D)}return D}Cn.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,n=t&&!t.curOp;if(n&&mn(t),kt(this,"clear")){var c=this.find();c&&nr(this,"clear",c.from,c.to)}for(var l=null,b=null,D=0;D<this.lines.length;++D){var X=this.lines[D],Z=Hi(X.markedSpans,this);t&&!this.collapsed?Wt(t,Mt(X),"text"):t&&(null!=Z.to&&(b=Mt(X)),null!=Z.from&&(l=Mt(X))),X.markedSpans=ja(X.markedSpans,Z),null==Z.from&&this.collapsed&&!dn(this.doc,X)&&t&&qr(X,Hn(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var re=0;re<this.lines.length;++re){var ae=jr(this.lines[re]),we=Eo(ae);we>t.display.maxLineLength&&(t.display.maxLine=ae,t.display.maxLineLength=we,t.display.maxLineChanged=!0)}null!=l&&t&&this.collapsed&&mr(t,l,b+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Il(t.doc)),t&&nr(t,"markerCleared",t,this,l,b),n&&Vn(t),this.parent&&this.parent.clear()}},Cn.prototype.find=function(t,n){null==t&&"bookmark"==this.type&&(t=1);for(var c,l,b=0;b<this.lines.length;++b){var D=this.lines[b],X=Hi(D.markedSpans,this);if(null!=X.from&&(c=ot(n?D:Mt(D),X.from),-1==t))return c;if(null!=X.to&&(l=ot(n?D:Mt(D),X.to),1==t))return l}return c&&{from:c,to:l}},Cn.prototype.changed=function(){var t=this,n=this.find(-1,!0),c=this,l=this.doc.cm;!n||!l||br(l,function(){var b=n.line,D=Mt(n.line),X=Es(l,D);if(X&&(ol(X),l.curOp.selectionChanged=l.curOp.forceUpdate=!0),l.curOp.updateMaxLine=!0,!dn(c.doc,b)&&null!=c.height){var Z=c.height;c.height=null;var re=di(c)-Z;re&&qr(b,b.height+re)}nr(l,"markerChanged",l,t)})},Cn.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var n=this.doc.cm.curOp;(!n.maybeHiddenMarkers||-1==Ie(n.maybeHiddenMarkers,this))&&(n.maybeUnhiddenMarkers||(n.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Cn.prototype.detachLine=function(t){if(this.lines.splice(Ie(this.lines,t),1),!this.lines.length&&this.doc.cm){var n=this.doc.cm.curOp;(n.maybeHiddenMarkers||(n.maybeHiddenMarkers=[])).push(this)}},gt(Cn);var ki=function(t,n){this.markers=t,this.primary=n;for(var c=0;c<t.length;++c)t[c].parent=this};function Pl(t){return t.findMarks(ot(t.first,0),t.clipPos(ot(t.lastLine())),function(n){return n.parent})}function Nf(t){for(var n=function(l){var b=t[l],D=[b.primary.doc];Pr(b.primary.doc,function(re){return D.push(re)});for(var X=0;X<b.markers.length;X++){var Z=b.markers[X];-1==Ie(D,Z.doc)&&(Z.parent=null,b.markers.splice(X--,1))}},c=0;c<t.length;c++)n(c)}ki.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();nr(this,"clear")}},ki.prototype.find=function(t,n){return this.primary.find(t,n)},gt(ki);var Lf=0,xr=function(t,n,c,l,b){if(!(this instanceof xr))return new xr(t,n,c,l,b);null==c&&(c=0),uo.call(this,[new Yn([new ui("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=c;var D=ot(c,0);this.sel=bn(D),this.history=new Bo(null),this.id=++Lf,this.modeOption=n,this.lineSep=l,this.direction="rtl"==b?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Zs(this,{from:D,to:D,text:t}),fr(this,bn(D),H)};xr.prototype=Gt(uo.prototype,{constructor:xr,iter:function(t,n,c){c?this.iterN(t-this.first,n-t,c):this.iterN(this.first,this.first+this.size,t)},insert:function(t,n){for(var c=0,l=0;l<n.length;++l)c+=n[l].height;this.insertInner(t-this.first,n,c)},remove:function(t,n){this.removeInner(t-this.first,n)},getValue:function(t){var n=ps(this,this.first,this.first+this.size);return!1===t?n:n.join(t||this.lineSeparator())},setValue:or(function(t){var n=ot(this.first,0),c=this.first+this.size-1;_n(this,{from:n,to:ot(c,bt(this,c).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Zi(this.cm,0,0),fr(this,bn(n),H)}),replaceRange:function(t,n,c,l){xi(this,t,n=St(this,n),c=c?St(this,c):n,l)},getRange:function(t,n,c){var l=pn(this,St(this,t),St(this,n));return!1===c?l:""===c?l.join(""):l.join(c||this.lineSeparator())},getLine:function(t){var n=this.getLineHandle(t);return n&&n.text},getLineHandle:function(t){if(Qi(this,t))return bt(this,t)},getLineNumber:function(t){return Mt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=bt(this,t)),jr(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return St(this,t)},getCursor:function(t){var n=this.sel.primary();return null==t||"head"==t?n.head:"anchor"==t?n.anchor:"end"==t||"to"==t||!1===t?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:or(function(t,n,c){Tl(this,St(this,"number"==typeof t?ot(t,n||0):t),null,c)}),setSelection:or(function(t,n,c){Tl(this,St(this,t),St(this,n||t),c)}),extendSelection:or(function(t,n,c){Vr(this,St(this,t),n&&St(this,n),c)}),extendSelections:or(function(t,n){wn(this,Fa(this,t),n)}),extendSelectionsBy:or(function(t,n){wn(this,Fa(this,Ye(this.sel.ranges,t)),n)}),setSelections:or(function(t,n,c){if(t.length){for(var l=[],b=0;b<t.length;b++)l[b]=new Dt(St(this,t[b].anchor),St(this,t[b].head||t[b].anchor));null==n&&(n=Math.min(t.length-1,this.sel.primIndex)),fr(this,Mr(this.cm,l,n),c)}}),addSelection:or(function(t,n,c){var l=this.sel.ranges.slice(0);l.push(new Dt(St(this,t),St(this,n||t))),fr(this,Mr(this.cm,l,l.length-1),c)}),getSelection:function(t){for(var c,n=this.sel.ranges,l=0;l<n.length;l++){var b=pn(this,n[l].from(),n[l].to());c=c?c.concat(b):b}return!1===t?c:c.join(t||this.lineSeparator())},getSelections:function(t){for(var n=[],c=this.sel.ranges,l=0;l<c.length;l++){var b=pn(this,c[l].from(),c[l].to());!1!==t&&(b=b.join(t||this.lineSeparator())),n[l]=b}return n},replaceSelection:function(t,n,c){for(var l=[],b=0;b<this.sel.ranges.length;b++)l[b]=t;this.replaceSelections(l,n,c||"+input")},replaceSelections:or(function(t,n,c){for(var l=[],b=this.sel,D=0;D<b.ranges.length;D++){var X=b.ranges[D];l[D]={from:X.from(),to:X.to(),text:this.splitLines(t[D]),origin:c}}for(var Z=n&&"end"!=n&&function bf(t,n,c){for(var l=[],b=ot(t.first,0),D=b,X=0;X<n.length;X++){var Z=n[X],re=Cl(Z.from,b,D),ae=Cl(xn(Z),b,D);if(b=Z.to,D=ae,"around"==c){var we=t.sel.ranges[X],Ee=Ct(we.head,we.anchor)<0;l[X]=new Dt(Ee?ae:re,Ee?re:ae)}else l[X]=new Dt(re,re)}return new Lr(l,t.sel.primIndex)}(this,l,n),re=l.length-1;re>=0;re--)_n(this,l[re]);Z?Nl(this,Z):this.cm&&zn(this.cm)}),undo:or(function(){Wo(this,"undo")}),redo:or(function(){Wo(this,"redo")}),undoSelection:or(function(){Wo(this,"undo",!0)}),redoSelection:or(function(){Wo(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,n=0,c=0,l=0;l<t.done.length;l++)t.done[l].ranges||++n;for(var b=0;b<t.undone.length;b++)t.undone[b].ranges||++c;return{undo:n,redo:c}},clearHistory:function(){var t=this;this.history=new Bo(this.history),Pr(this,function(n){return n.history=t.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:bi(this.history.done),undone:bi(this.history.undone)}},setHistory:function(t){var n=this.history=new Bo(this.history);n.done=bi(t.done.slice(0),null,!0),n.undone=bi(t.undone.slice(0),null,!0)},setGutterMarker:or(function(t,n,c){return Kn(this,t,"gutter",function(l){var b=l.gutterMarkers||(l.gutterMarkers={});return b[n]=c,!c&&je(b)&&(l.gutterMarkers=null),!0})}),clearGutter:or(function(t){var n=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[t]&&Kn(n,c,"gutter",function(){return c.gutterMarkers[t]=null,je(c.gutterMarkers)&&(c.gutterMarkers=null),!0})})}),lineInfo:function(t){var n;if("number"==typeof t){if(!Qi(this,t)||(n=t,!(t=bt(this,t))))return null}else if(null==(n=Mt(t)))return null;return{line:n,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:or(function(t,n,c){return Kn(this,t,"gutter"==n?"gutter":"class",function(l){var b="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(l[b]){if(W(c).test(l[b]))return!1;l[b]+=" "+c}else l[b]=c;return!0})}),removeLineClass:or(function(t,n,c){return Kn(this,t,"gutter"==n?"gutter":"class",function(l){var b="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",D=l[b];if(!D)return!1;if(null==c)l[b]=null;else{var X=D.match(W(c));if(!X)return!1;var Z=X.index+X[0].length;l[b]=D.slice(0,X.index)+(X.index&&Z!=D.length?" ":"")+D.slice(Z)||null}return!0})}),addLineWidget:or(function(t,n,c){return function Ff(t,n,c,l){var b=new fo(t,c,l),D=t.cm;return D&&b.noHScroll&&(D.display.alignWidgets=!0),Kn(t,n,"widget",function(X){var Z=X.widgets||(X.widgets=[]);if(null==b.insertAt?Z.push(b):Z.splice(Math.min(Z.length,Math.max(0,b.insertAt)),0,b),b.line=X,D&&!dn(t,X)){var re=Xr(X)<t.scrollTop;qr(X,X.height+di(b)),re&&Gs(D,b.height),D.curOp.forceUpdate=!0}return!0}),D&&nr(D,"lineWidgetAdded",D,b,"number"==typeof n?n:Mt(n)),b}(this,t,n,c)}),removeLineWidget:function(t){t.clear()},markText:function(t,n,c){return wi(this,St(this,t),St(this,n),c,c&&c.type||"range")},setBookmark:function(t,n){var c={replacedWith:n&&(null==n.nodeType?n.widget:n),insertLeft:n&&n.insertLeft,clearWhenEmpty:!1,shared:n&&n.shared,handleMouseEvents:n&&n.handleMouseEvents};return wi(this,t=St(this,t),t,c,"bookmark")},findMarksAt:function(t){var n=[],c=bt(this,(t=St(this,t)).line).markedSpans;if(c)for(var l=0;l<c.length;++l){var b=c[l];(null==b.from||b.from<=t.ch)&&(null==b.to||b.to>=t.ch)&&n.push(b.marker.parent||b.marker)}return n},findMarks:function(t,n,c){t=St(this,t),n=St(this,n);var l=[],b=t.line;return this.iter(t.line,n.line+1,function(D){var X=D.markedSpans;if(X)for(var Z=0;Z<X.length;Z++){var re=X[Z];!(null!=re.to&&b==t.line&&t.ch>=re.to||null==re.from&&b!=t.line||null!=re.from&&b==n.line&&re.from>=n.ch)&&(!c||c(re.marker))&&l.push(re.marker.parent||re.marker)}++b}),l},getAllMarks:function(){var t=[];return this.iter(function(n){var c=n.markedSpans;if(c)for(var l=0;l<c.length;++l)null!=c[l].from&&t.push(c[l].marker)}),t},posFromIndex:function(t){var n,c=this.first,l=this.lineSeparator().length;return this.iter(function(b){var D=b.text.length+l;if(D>t)return n=t,!0;t-=D,++c}),St(this,ot(c,n))},indexFromPos:function(t){var n=(t=St(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,t.line,function(l){n+=l.text.length+c}),n},copy:function(t){var n=new xr(ps(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return n.scrollTop=this.scrollTop,n.scrollLeft=this.scrollLeft,n.sel=this.sel,n.extend=!1,t&&(n.history.undoDepth=this.history.undoDepth,n.setHistory(this.getHistory())),n},linkedDoc:function(t){t||(t={});var n=this.first,c=this.first+this.size;null!=t.from&&t.from>n&&(n=t.from),null!=t.to&&t.to<c&&(c=t.to);var l=new xr(ps(this,n,c),t.mode||this.modeOption,n,this.lineSep,this.direction);return t.sharedHist&&(l.history=this.history),(this.linked||(this.linked=[])).push({doc:l,sharedHist:t.sharedHist}),l.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function Tf(t,n){for(var c=0;c<n.length;c++){var l=n[c],b=l.find(),D=t.clipPos(b.from),X=t.clipPos(b.to);if(Ct(D,X)){var Z=wi(t,D,X,l.primary,l.primary.type);l.markers.push(Z),Z.parent=l}}}(l,Pl(this)),l},unlinkDoc:function(t){if(t instanceof Qt&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){if(this.linked[n].doc==t){this.linked.splice(n,1),t.unlinkDoc(this),Nf(Pl(this));break}}if(t.history==this.history){var l=[t.id];Pr(t,function(b){return l.push(b.id)},!0),t.history=new Bo(null),t.history.done=bi(this.history.done,l),t.history.undone=bi(this.history.undone,l)}},iterLinkedDocs:function(t){Pr(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Hr(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:or(function(t){"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(n){return n.order=null}),this.cm&&function xf(t){br(t,function(){$s(t),mr(t)})}(this.cm))})}),xr.prototype.eachLine=xr.prototype.iter;var Bl=0;function If(t){var n=this;if(Ul(n),!pt(n,t)&&!Ir(n.display,t)){it(t),y&&(Bl=+new Date);var c=gn(n,t,!0),l=t.dataTransfer.files;if(c&&!n.isReadOnly())if(l&&l.length&&window.FileReader&&window.File)for(var b=l.length,D=Array(b),X=0,Z=function(){++X==b&&ir(n,function(){var Qe={from:c=St(n.doc,c),to:c,text:n.doc.splitLines(D.filter(function(Ze){return null!=Ze}).join(n.doc.lineSeparator())),origin:"paste"};_n(n.doc,Qe),Nl(n.doc,bn(St(n.doc,c),St(n.doc,xn(Qe))))})()},re=function(Qe,Ze){if(n.options.allowDropFileTypes&&-1==Ie(n.options.allowDropFileTypes,Qe.type))Z();else{var tt=new FileReader;tt.onerror=function(){return Z()},tt.onload=function(){var st=tt.result;/[\x00-\x08\x0e-\x1f]{2}/.test(st)||(D[Ze]=st),Z()},tt.readAsText(Qe)}},ae=0;ae<l.length;ae++)re(l[ae],ae);else{if(n.state.draggingText&&n.doc.sel.contains(c)>-1)return n.state.draggingText(t),void setTimeout(function(){return n.display.input.focus()},20);try{var we=t.dataTransfer.getData("Text");if(we){var Ee;if(n.state.draggingText&&!n.state.draggingText.copy&&(Ee=n.listSelections()),ao(n.doc,bn(c,c)),Ee)for(var Ue=0;Ue<Ee.length;++Ue)xi(n.doc,"",Ee[Ue].anchor,Ee[Ue].head,"drag");n.replaceSelection(we,"around","paste"),n.display.input.focus()}}catch(Qe){}}}}function Ul(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Gl(t){if(document.getElementsByClassName){for(var n=document.getElementsByClassName("CodeMirror"),c=[],l=0;l<n.length;l++){var b=n[l].CodeMirror;b&&c.push(b)}c.length&&c[0].operation(function(){for(var D=0;D<c.length;D++)t(c[D])})}}var co=!1;function Hl(){co||(function Of(){var t;Xe(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Gl(Rf)},100))}),Xe(window,"blur",function(){return Gl(mi)})}(),co=!0)}function Rf(t){var n=t.display;n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.scrollbarsClipped=!1,t.setSize()}for(var Sn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},An=0;An<10;An++)Sn[An+48]=Sn[An+96]=String(An);for(var Zn=65;Zn<=90;Zn++)Sn[Zn]=String.fromCharCode(Zn);for(var Fn=1;Fn<=12;Fn++)Sn[Fn+111]=Sn[Fn+63235]="F"+Fn;var Kr={};function ia(t){var n=t.split(/-(?!$)/);t=n[n.length-1];for(var c,l,b,D,X=0;X<n.length-1;X++){var Z=n[X];if(/^(cmd|meta|m)$/i.test(Z))D=!0;else if(/^a(lt)?$/i.test(Z))c=!0;else if(/^(c|ctrl|control)$/i.test(Z))l=!0;else{if(!/^s(hift)?$/i.test(Z))throw new Error("Unrecognized modifier name: "+Z);b=!0}}return c&&(t="Alt-"+t),l&&(t="Ctrl-"+t),D&&(t="Cmd-"+t),b&&(t="Shift-"+t),t}function oa(t){var n={};for(var c in t)if(t.hasOwnProperty(c)){var l=t[c];if(/^(name|fallthrough|(de|at)tach)$/.test(c))continue;if("..."==l){delete t[c];continue}for(var b=Ye(c.split(" "),ia),D=0;D<b.length;D++){var X=void 0,Z=void 0;D==b.length-1?(Z=b.join(" "),X=l):(Z=b.slice(0,D+1).join(" "),X="...");var re=n[Z];if(re){if(re!=X)throw new Error("Inconsistent bindings for "+Z)}else n[Z]=X}delete t[c]}for(var ae in n)t[ae]=n[ae];return t}function En(t,n,c,l){var b=(n=$n(n)).call?n.call(t,l):n[t];if(!1===b)return"nothing";if("..."===b)return"multi";if(null!=b&&c(b))return"handled";if(n.fallthrough){if("[object Array]"!=Object.prototype.toString.call(n.fallthrough))return En(t,n.fallthrough,c,l);for(var D=0;D<n.fallthrough.length;D++){var X=En(t,n.fallthrough[D],c,l);if(X)return X}}}function Jo(t){var n="string"==typeof t?t:Sn[t.keyCode];return"Ctrl"==n||"Alt"==n||"Shift"==n||"Mod"==n}function ho(t,n,c){var l=t;return n.altKey&&"Alt"!=l&&(t="Alt-"+t),(L?n.metaKey:n.ctrlKey)&&"Ctrl"!=l&&(t="Ctrl-"+t),(L?n.ctrlKey:n.metaKey)&&"Mod"!=l&&(t="Cmd-"+t),!c&&n.shiftKey&&"Shift"!=l&&(t="Shift-"+t),t}function sa(t,n){if(h&&34==t.keyCode&&t.char)return!1;var c=Sn[t.keyCode];return null!=c&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(c=t.code),ho(c,t,n))}function $n(t){return"string"==typeof t?Kr[t]:t}function ei(t,n){for(var c=t.doc.sel.ranges,l=[],b=0;b<c.length;b++){for(var D=n(c[b]);l.length&&Ct(D.from,We(l).to)<=0;){var X=l.pop();if(Ct(X.from,D.from)<0){D.from=X.from;break}}l.push(D)}br(t,function(){for(var Z=l.length-1;Z>=0;Z--)xi(t.doc,"",l[Z].from,l[Z].to,"+delete");zn(t)})}function _i(t,n,c){var l=he(t.text,n+c,c);return l<0||l>t.text.length?null:l}function Ci(t,n,c){var l=_i(t,n.ch,c);return null==l?null:new ot(n.line,l,c<0?"after":"before")}function Si(t,n,c,l,b){if(t){"rtl"==n.doc.direction&&(b=-b);var D=He(c,n.doc.direction);if(D){var ae,X=b<0?We(D):D[0],re=b<0==(1==X.level)?"after":"before";if(X.level>0||"rtl"==n.doc.direction){var we=Qn(n,c);ae=b<0?c.text.length-1:0;var Ee=Jr(n,we,ae).top;ae=me(function(Ue){return Jr(n,we,Ue).top==Ee},b<0==(1==X.level)?X.from:X.to-1,ae),"before"==re&&(ae=_i(c,ae,1))}else ae=b<0?X.to:X.from;return new ot(l,ae,re)}}return new ot(l,b<0?c.text.length:0,b<0?"before":"after")}Kr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Kr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Kr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Kr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Kr.default=P?Kr.macDefault:Kr.pcDefault;var Yr={selectAll:Ol,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),H)},killLine:function(t){return ei(t,function(n){if(n.empty()){var c=bt(t.doc,n.head.line).text.length;return n.head.ch==c&&n.head.line<t.lastLine()?{from:n.head,to:ot(n.head.line+1,0)}:{from:n.head,to:ot(n.head.line,c)}}return{from:n.from(),to:n.to()}})},deleteLine:function(t){return ei(t,function(n){return{from:ot(n.from().line,0),to:St(t.doc,ot(n.to().line+1,0))}})},delLineLeft:function(t){return ei(t,function(n){return{from:ot(n.from().line,0),to:n.from()}})},delWrappedLineLeft:function(t){return ei(t,function(n){var c=t.charCoords(n.head,"div").top+5;return{from:t.coordsChar({left:0,top:c},"div"),to:n.from()}})},delWrappedLineRight:function(t){return ei(t,function(n){var c=t.charCoords(n.head,"div").top+5,l=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:c},"div");return{from:n.from(),to:l}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(ot(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(ot(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(n){return ti(t,n.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(n){return ri(t,n.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(n){return function Ai(t,n){var c=bt(t.doc,n),l=function Bu(t){for(var n;n=Mn(t);)t=n.find(1,!0).line;return t}(c);return l!=c&&(n=Mt(l)),Si(!0,t,c,n,-1)}(t,n.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(n){var c=t.cursorCoords(n.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:c},"div")},pe)},goLineLeft:function(t){return t.extendSelectionsBy(function(n){var c=t.cursorCoords(n.head,"div").top+5;return t.coordsChar({left:0,top:c},"div")},pe)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(n){var c=t.cursorCoords(n.head,"div").top+5,l=t.coordsChar({left:0,top:c},"div");return l.ch<t.getLine(l.line).search(/\S/)?ri(t,n.head):l},pe)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var n=[],c=t.listSelections(),l=t.options.tabSize,b=0;b<c.length;b++){var D=c[b].from(),X=Fe(t.getLine(D.line),D.ch,l);n.push(Pe(l-X%l))}t.replaceSelections(n)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return br(t,function(){for(var n=t.listSelections(),c=[],l=0;l<n.length;l++)if(n[l].empty()){var b=n[l].head,D=bt(t.doc,b.line).text;if(D)if(b.ch==D.length&&(b=new ot(b.line,b.ch-1)),b.ch>0)b=new ot(b.line,b.ch+1),t.replaceRange(D.charAt(b.ch-1)+D.charAt(b.ch-2),ot(b.line,b.ch-2),b,"+transpose");else if(b.line>t.doc.first){var X=bt(t.doc,b.line-1).text;X&&(b=new ot(b.line,1),t.replaceRange(D.charAt(0)+t.doc.lineSeparator()+X.charAt(X.length-1),ot(b.line-1,X.length-1),b,"+transpose"))}c.push(new Dt(b,b))}t.setSelections(c)})},newlineAndIndent:function(t){return br(t,function(){for(var n=t.listSelections(),c=n.length-1;c>=0;c--)t.replaceRange(t.doc.lineSeparator(),n[c].anchor,n[c].head,"+input");n=t.listSelections();for(var l=0;l<n.length;l++)t.indentLine(n[l].from().line,null,!0);zn(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function ti(t,n){var c=bt(t.doc,n),l=jr(c);return l!=c&&(n=Mt(l)),Si(!0,t,l,n,1)}function ri(t,n){var c=ti(t,n.line),l=bt(t.doc,c.line),b=He(l,t.doc.direction);if(!b||0==b[0].level){var D=Math.max(c.ch,l.text.search(/\S/)),X=n.line==c.line&&n.ch<=D&&n.ch;return ot(c.line,X?0:D,c.sticky)}return c}function po(t,n,c){if("string"==typeof n&&!(n=Yr[n]))return!1;t.display.input.ensurePolled();var l=t.display.shift,b=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),c&&(t.display.shift=!1),b=n(t)!=G}finally{t.display.shift=l,t.state.suppressEdits=!1}return b}var zl=new Be;function Fi(t,n,c,l){var b=t.state.keySeq;if(b){if(Jo(n))return"handled";if(/\'$/.test(n)?t.state.keySeq=null:zl.set(50,function(){t.state.keySeq==b&&(t.state.keySeq=null,t.display.input.reset())}),aa(t,b+" "+n,c,l))return!0}return aa(t,n,c,l)}function aa(t,n,c,l){var b=function Wl(t,n,c){for(var l=0;l<t.state.keyMaps.length;l++){var b=En(n,t.state.keyMaps[l],c,t);if(b)return b}return t.options.extraKeys&&En(n,t.options.extraKeys,c,t)||En(n,t.options.keyMap,c,t)}(t,n,l);return"multi"==b&&(t.state.keySeq=n),"handled"==b&&nr(t,"keyHandled",t,n,c),("handled"==b||"multi"==b)&&(it(c),Ps(t)),!!b}function la(t,n){var c=sa(n,!0);return!!c&&(n.shiftKey&&!t.state.keySeq?Fi(t,"Shift-"+c,n,function(l){return po(t,l,!0)})||Fi(t,c,n,function(l){if("string"==typeof l?/^go[A-Z]/.test(l):l.motion)return po(t,l)}):Fi(t,c,n,function(l){return po(t,l)}))}var Ko=null;function Xl(t){var n=this;if(!(t.target&&t.target!=n.display.input.getField()||(n.curOp.focus=ne(),pt(n,t)))){y&&e<11&&27==t.keyCode&&(t.returnValue=!1);var c=t.keyCode;n.display.shift=16==c||t.shiftKey;var l=la(n,t);h&&(Ko=l?c:null,!l&&88==c&&!rn&&(P?t.metaKey:t.ctrlKey)&&n.replaceSelection("",null,"cut")),ue&&!P&&!l&&46==c&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==c&&!/\bCodeMirror-crosshair\b/.test(n.display.lineDiv.className)&&function jf(t){var n=t.display.lineDiv;function c(l){(18==l.keyCode||!l.altKey)&&(V(n,"CodeMirror-crosshair"),ct(document,"keyup",c),ct(document,"mouseover",c))}ve(n,"CodeMirror-crosshair"),Xe(document,"keyup",c),Xe(document,"mouseover",c)}(n)}}function Jl(t){16==t.keyCode&&(this.doc.sel.shift=!1),pt(this,t)}function Qr(t){var n=this;if(!(t.target&&t.target!=n.display.input.getField()||Ir(n.display,t)||pt(n,t)||t.ctrlKey&&!t.altKey||P&&t.metaKey)){var c=t.keyCode,l=t.charCode;if(h&&c==Ko)return Ko=null,void it(t);if(!h||t.which&&!(t.which<10)||!la(n,t)){var b=String.fromCharCode(null==l?c:l);"\b"!=b&&(function ql(t,n,c){return Fi(t,"'"+c+"'",n,function(l){return po(t,l,!0)})}(n,t,b)||n.display.input.onKeyPress(t))}}}var vo,go,ua=function(t,n,c){this.time=t,this.pos=n,this.button=c};function Vl(t){var n=this,c=n.display;if(!(pt(n,t)||c.activeTouch&&c.input.supportsTouch())){if(c.input.ensurePolled(),c.shift=t.shiftKey,Ir(c,t))return void(o||(c.scroller.draggable=!1,setTimeout(function(){return c.scroller.draggable=!0},100)));if(!fa(n,t)){var l=gn(n,t),b=Ri(t),D=l?function Df(t,n){var c=+new Date;return go&&go.compare(c,t,n)?(vo=go=null,"triple"):vo&&vo.compare(c,t,n)?(go=new ua(c,t,n),vo=null,"double"):(vo=new ua(c,t,n),go=null,"single")}(l,b):"single";window.focus(),1==b&&n.state.selectingText&&n.state.selectingText(t),(!l||!function Mf(t,n,c,l,b){var D="Click";return"double"==l?D="Double"+D:"triple"==l&&(D="Triple"+D),Fi(t,ho(D=(1==n?"Left":2==n?"Middle":"Right")+D,b),b,function(X){if("string"==typeof X&&(X=Yr[X]),!X)return!1;var Z=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),Z=X(t,c)!=G}finally{t.state.suppressEdits=!1}return Z})}(n,b,l,D,t))&&(1==b?l?function Bf(t,n,c,l){y?setTimeout(de(dl,t),0):t.curOp.focus=ne();var X,b=function Pf(t,n,c){var l=t.getOption("configureMouse"),b=l?l(t,n,c):{};if(null==b.unit){var D=M?c.shiftKey&&c.metaKey:c.altKey;b.unit=D?"rectangle":"single"==n?"char":"double"==n?"word":"line"}return(null==b.extend||t.doc.extend)&&(b.extend=t.doc.extend||c.shiftKey),null==b.addNew&&(b.addNew=P?c.metaKey:c.ctrlKey),null==b.moveOnDrag&&(b.moveOnDrag=!(P?c.altKey:c.ctrlKey)),b}(t,c,l),D=t.doc.sel;t.options.dragDrop&&fs&&!t.isReadOnly()&&"single"==c&&(X=D.contains(n))>-1&&(Ct((X=D.ranges[X]).from(),n)<0||n.xRel>0)&&(Ct(X.to(),n)>0||n.xRel<0)?function Qf(t,n,c,l){var b=t.display,D=!1,X=ir(t,function(ae){o&&(b.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:Bs(t)),ct(b.wrapper.ownerDocument,"mouseup",X),ct(b.wrapper.ownerDocument,"mousemove",Z),ct(b.scroller,"dragstart",re),ct(b.scroller,"drop",X),D||(it(ae),l.addNew||Vr(t.doc,c,null,null,l.extend),o&&!k||y&&9==e?setTimeout(function(){b.wrapper.ownerDocument.body.focus({preventScroll:!0}),b.input.focus()},20):b.input.focus())}),Z=function(ae){D=D||Math.abs(n.clientX-ae.clientX)+Math.abs(n.clientY-ae.clientY)>=10},re=function(){return D=!0};o&&(b.scroller.draggable=!0),t.state.draggingText=X,X.copy=!l.moveOnDrag,Xe(b.wrapper.ownerDocument,"mouseup",X),Xe(b.wrapper.ownerDocument,"mousemove",Z),Xe(b.scroller,"dragstart",re),Xe(b.scroller,"drop",X),t.state.delayingBlurEvent=!0,setTimeout(function(){return b.input.focus()},20),b.scroller.dragDrop&&b.scroller.dragDrop()}(t,l,n,b):function Uf(t,n,c,l){y&&Bs(t);var b=t.display,D=t.doc;it(n);var X,Z,re=D.sel,ae=re.ranges;if(l.addNew&&!l.extend?X=(Z=D.sel.contains(c))>-1?ae[Z]:new Dt(c,c):(X=D.sel.primary(),Z=D.sel.primIndex),"rectangle"==l.unit)l.addNew||(X=new Dt(c,c)),c=gn(t,n,!0,!0),Z=-1;else{var we=Kl(t,c,l.unit);X=l.extend?ta(X,we.anchor,we.head,l.extend):we}l.addNew?-1==Z?(Z=ae.length,fr(D,Mr(t,ae.concat([X]),Z),{scroll:!1,origin:"*mouse"})):ae.length>1&&ae[Z].empty()&&"char"==l.unit&&!l.extend?(fr(D,Mr(t,ae.slice(0,Z).concat(ae.slice(Z+1)),0),{scroll:!1,origin:"*mouse"}),re=D.sel):ra(D,Z,X,ee):(Z=0,fr(D,new Lr([X],0),ee),re=D.sel);var Ee=c;function Ue(ft){if(0!=Ct(Ee,ft))if(Ee=ft,"rectangle"==l.unit){for(var yt=[],wt=t.options.tabSize,xt=Fe(bt(D,c.line).text,c.ch,wt),Et=Fe(bt(D,ft.line).text,ft.ch,wt),Bt=Math.min(xt,Et),sr=Math.max(xt,Et),Ut=Math.min(c.line,ft.line),Fr=Math.min(t.lastLine(),Math.max(c.line,ft.line));Ut<=Fr;Ut++){var wr=bt(D,Ut).text,Vt=Ne(wr,Bt,wt);Bt==sr?yt.push(new Dt(ot(Ut,Vt),ot(Ut,Vt))):wr.length>Vt&&yt.push(new Dt(ot(Ut,Vt),ot(Ut,Ne(wr,sr,wt))))}yt.length||yt.push(new Dt(c,c)),fr(D,Mr(t,re.ranges.slice(0,Z).concat(yt),Z),{origin:"*mouse",scroll:!1}),t.scrollIntoView(ft)}else{var Zt,kr=X,ar=Kl(t,ft,l.unit),tr=kr.anchor;Ct(ar.anchor,tr)>0?(Zt=ar.head,tr=Ui(kr.from(),ar.anchor)):(Zt=ar.anchor,tr=_o(kr.to(),ar.head));var Ht=re.ranges.slice(0);Ht[Z]=function Gf(t,n){var c=n.anchor,l=n.head,b=bt(t.doc,c.line);if(0==Ct(c,l)&&c.sticky==l.sticky)return n;var D=He(b);if(!D)return n;var X=ke(D,c.ch,c.sticky),Z=D[X];if(Z.from!=c.ch&&Z.to!=c.ch)return n;var ae,re=X+(Z.from==c.ch==(1!=Z.level)?0:1);if(0==re||re==D.length)return n;if(l.line!=c.line)ae=(l.line-c.line)*("ltr"==t.doc.direction?1:-1)>0;else{var we=ke(D,l.ch,l.sticky),Ee=we-X||(l.ch-c.ch)*(1==Z.level?-1:1);ae=we==re-1||we==re?Ee<0:Ee>0}var Ue=D[re+(ae?-1:0)],Qe=ae==(1==Ue.level),Ze=Qe?Ue.from:Ue.to,tt=Qe?"after":"before";return c.ch==Ze&&c.sticky==tt?n:new Dt(new ot(c.line,Ze,tt),l)}(t,new Dt(St(D,tr),Zt)),fr(D,Mr(t,Ht,Z),ee)}}var Qe=b.wrapper.getBoundingClientRect(),Ze=0;function tt(ft){var yt=++Ze,wt=gn(t,ft,!0,"rectangle"==l.unit);if(wt)if(0!=Ct(wt,Ee)){t.curOp.focus=ne(),Ue(wt);var xt=Yi(b,D);(wt.line>=xt.to||wt.line<xt.from)&&setTimeout(ir(t,function(){Ze==yt&&tt(ft)}),150)}else{var Et=ft.clientY<Qe.top?-20:ft.clientY>Qe.bottom?20:0;Et&&setTimeout(ir(t,function(){Ze==yt&&(b.scroller.scrollTop+=Et,tt(ft))}),50)}}function st(ft){t.state.selectingText=!1,Ze=1/0,ft&&(it(ft),b.input.focus()),ct(b.wrapper.ownerDocument,"mousemove",ut),ct(b.wrapper.ownerDocument,"mouseup",dt),D.history.lastSelOrigin=null}var ut=ir(t,function(ft){0!==ft.buttons&&Ri(ft)?tt(ft):st(ft)}),dt=ir(t,st);t.state.selectingText=dt,Xe(b.wrapper.ownerDocument,"mousemove",ut),Xe(b.wrapper.ownerDocument,"mouseup",dt)}(t,l,n,b)}(n,l,D,t):On(t)==c.scroller&&it(t):2==b?(l&&Vr(n.doc,l),setTimeout(function(){return c.input.focus()},20)):3==b&&(U?n.display.input.onContextMenu(t):Bs(n)))}}}function Kl(t,n,c){if("char"==c)return new Dt(n,n);if("word"==c)return t.findWordAt(n);if("line"==c)return new Dt(ot(n.line,0),St(t.doc,ot(n.line+1,0)));var l=c(t,n);return new Dt(l.from,l.to)}function Yl(t,n,c,l){var b,D;if(n.touches)b=n.touches[0].clientX,D=n.touches[0].clientY;else try{b=n.clientX,D=n.clientY}catch(Ue){return!1}if(b>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;l&&it(n);var X=t.display,Z=X.lineDiv.getBoundingClientRect();if(D>Z.bottom||!kt(t,c))return Ot(n);D-=Z.top-X.viewOffset;for(var re=0;re<t.display.gutterSpecs.length;++re){var ae=X.gutters.childNodes[re];if(ae&&ae.getBoundingClientRect().right>=b)return vt(t,c,t,jn(t.doc,D),t.display.gutterSpecs[re].className,n),Ot(n)}}function fa(t,n){return Yl(t,n,"gutterClick",!0)}function Zl(t,n){Ir(t.display,n)||function $l(t,n){return!!kt(t,"gutterContextMenu")&&Yl(t,n,"gutterContextMenu",!1)}(t,n)||pt(t,n,"contextmenu")||U||t.display.input.onContextMenu(n)}function eu(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),vi(t)}ua.prototype.compare=function(t,n,c){return this.time+400>t&&0==Ct(n,this.pos)&&c==this.button};var ni={toString:function(){return"CodeMirror.Init"}},tu={},Yo={};function Hf(t,n,c){if(!n!=!(c&&c!=ni)){var b=t.display.dragFunctions,D=n?Xe:ct;D(t.display.scroller,"dragstart",b.start),D(t.display.scroller,"dragenter",b.enter),D(t.display.scroller,"dragover",b.over),D(t.display.scroller,"dragleave",b.leave),D(t.display.scroller,"drop",b.drop)}}function nu(t){t.options.lineWrapping?(ve(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(V(t.display.wrapper,"CodeMirror-wrap"),To(t)),Ds(t),mr(t),vi(t),setTimeout(function(){return Jn(t)},100)}function Qt(t,n){var c=this;if(!(this instanceof Qt))return new Qt(t,n);this.options=n=n?ye(n):{},ye(tu,n,!1);var l=n.value;"string"==typeof l?l=new xr(l,n.mode,null,n.lineSeparator,n.direction):n.mode&&(l.modeOption=n.mode),this.doc=l;var b=new Qt.inputStyles[n.inputStyle](this),D=this.display=new yf(t,l,b,n);for(var X in D.wrapper.CodeMirror=this,eu(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),gl(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Be,keySeq:null,specialChars:null},n.autofocus&&!E&&D.input.focus(),y&&e<11&&setTimeout(function(){return c.display.input.reset(!0)},20),function Wf(t){var n=t.display;Xe(n.scroller,"mousedown",ir(t,Vl)),Xe(n.scroller,"dblclick",y&&e<11?ir(t,function(re){if(!pt(t,re)){var ae=gn(t,re);if(ae&&!fa(t,re)&&!Ir(t.display,re)){it(re);var we=t.findWordAt(ae);Vr(t.doc,we.anchor,we.head)}}}):function(re){return pt(t,re)||it(re)}),Xe(n.scroller,"contextmenu",function(re){return Zl(t,re)}),Xe(n.input.getField(),"contextmenu",function(re){n.scroller.contains(re.target)||Zl(t,re)});var c,l={end:0};function b(){n.activeTouch&&(c=setTimeout(function(){return n.activeTouch=null},1e3),(l=n.activeTouch).end=+new Date)}function D(re){if(1!=re.touches.length)return!1;var ae=re.touches[0];return ae.radiusX<=1&&ae.radiusY<=1}function X(re,ae){if(null==ae.left)return!0;var we=ae.left-re.left,Ee=ae.top-re.top;return we*we+Ee*Ee>400}Xe(n.scroller,"touchstart",function(re){if(!pt(t,re)&&!D(re)&&!fa(t,re)){n.input.ensurePolled(),clearTimeout(c);var ae=+new Date;n.activeTouch={start:ae,moved:!1,prev:ae-l.end<=300?l:null},1==re.touches.length&&(n.activeTouch.left=re.touches[0].pageX,n.activeTouch.top=re.touches[0].pageY)}}),Xe(n.scroller,"touchmove",function(){n.activeTouch&&(n.activeTouch.moved=!0)}),Xe(n.scroller,"touchend",function(re){var ae=n.activeTouch;if(ae&&!Ir(n,re)&&null!=ae.left&&!ae.moved&&new Date-ae.start<300){var Ee,we=t.coordsChar(n.activeTouch,"page");Ee=!ae.prev||X(ae,ae.prev)?new Dt(we,we):!ae.prev.prev||X(ae,ae.prev.prev)?t.findWordAt(we):new Dt(ot(we.line,0),St(t.doc,ot(we.line+1,0))),t.setSelection(Ee.anchor,Ee.head),t.focus(),it(re)}b()}),Xe(n.scroller,"touchcancel",b),Xe(n.scroller,"scroll",function(){n.scroller.clientHeight&&($i(t,n.scroller.scrollTop),qn(t,n.scroller.scrollLeft,!0),vt(t,"scroll",t))}),Xe(n.scroller,"mousewheel",function(re){return kl(t,re)}),Xe(n.scroller,"DOMMouseScroll",function(re){return kl(t,re)}),Xe(n.wrapper,"scroll",function(){return n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),n.dragFunctions={enter:function(re){pt(t,re)||At(re)},over:function(re){pt(t,re)||(function Ql(t,n){var c=gn(t,n);if(c){var l=document.createDocumentFragment();Ms(t,c,l),t.display.dragCursor||(t.display.dragCursor=ce("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),fe(t.display.dragCursor,l)}}(t,re),At(re))},start:function(re){return function Xo(t,n){if(y&&(!t.state.draggingText||+new Date-Bl<100))At(n);else if(!pt(t,n)&&!Ir(t.display,n)&&(n.dataTransfer.setData("Text",t.getSelection()),n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setDragImage&&!k)){var c=ce("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(c.width=c.height=1,t.display.wrapper.appendChild(c),c._top=c.offsetTop),n.dataTransfer.setDragImage(c,0,0),h&&c.parentNode.removeChild(c)}}(t,re)},drop:ir(t,If),leave:function(re){pt(t,re)||Ul(t)}};var Z=n.input.getField();Xe(Z,"keyup",function(re){return Jl.call(t,re)}),Xe(Z,"keydown",ir(t,Xl)),Xe(Z,"keypress",ir(t,Qr)),Xe(Z,"focus",function(re){return Qs(t,re)}),Xe(Z,"blur",function(re){return mi(t,re)})}(this),Hl(),mn(this),this.curOp.forceUpdate=!0,oo(this,l),n.autofocus&&!E||this.hasFocus()?setTimeout(function(){c.hasFocus()&&!c.state.focused&&Qs(c)},20):mi(this),Yo)Yo.hasOwnProperty(X)&&Yo[X](this,n[X],ni);er(this),n.finishInit&&n.finishInit(this);for(var Z=0;Z<Zo.length;++Z)Zo[Z](this);Vn(this),o&&n.lineWrapping&&"optimizelegibility"==getComputedStyle(D.lineDiv).textRendering&&(D.lineDiv.style.textRendering="auto")}Qt.defaults=tu,Qt.optionHandlers=Yo;var Zo=[];function yo(t,n,c,l){var D,b=t.doc;null==c&&(c="add"),"smart"==c&&(b.mode.indent?D=Gi(t,n).state:c="prev");var X=t.options.tabSize,Z=bt(b,n),re=Fe(Z.text,null,X);Z.stateAfter&&(Z.stateAfter=null);var we,ae=Z.text.match(/^\s*/)[0];if(l||/\S/.test(Z.text)){if("smart"==c&&((we=b.mode.indent(D,Z.text.slice(ae.length),Z.text))==G||we>150)){if(!l)return;c="prev"}}else we=0,c="not";"prev"==c?we=n>b.first?Fe(bt(b,n-1).text,null,X):0:"add"==c?we=re+t.options.indentUnit:"subtract"==c?we=re-t.options.indentUnit:"number"==typeof c&&(we=re+c),we=Math.max(0,we);var Ee="",Ue=0;if(t.options.indentWithTabs)for(var Qe=Math.floor(we/X);Qe;--Qe)Ue+=X,Ee+="\t";if(Ue<we&&(Ee+=Pe(we-Ue)),Ee!=ae)return xi(b,Ee,ot(n,0),ot(n,ae.length),"+input"),Z.stateAfter=null,!0;for(var Ze=0;Ze<b.sel.ranges.length;Ze++){var tt=b.sel.ranges[Ze];if(tt.head.line==n&&tt.head.ch<ae.length){var st=ot(n,ae.length);ra(b,Ze,new Dt(st,st));break}}}Qt.defineInitHook=function(t){return Zo.push(t)};var Or=null;function $o(t){Or=t}function ca(t,n,c,l,b){var D=t.doc;t.display.shift=!1,l||(l=D.sel);var X=+new Date-200,Z="paste"==b||t.state.pasteIncoming>X,re=Hr(n),ae=null;if(Z&&l.ranges.length>1)if(Or&&Or.text.join("\n")==n){if(l.ranges.length%Or.text.length==0){ae=[];for(var we=0;we<Or.text.length;we++)ae.push(D.splitLines(Or.text[we]))}}else re.length==l.ranges.length&&t.options.pasteLinesPerSelection&&(ae=Ye(re,function(ut){return[ut]}));for(var Ee=t.curOp.updateInput,Ue=l.ranges.length-1;Ue>=0;Ue--){var Qe=l.ranges[Ue],Ze=Qe.from(),tt=Qe.to();Qe.empty()&&(c&&c>0?Ze=ot(Ze.line,Ze.ch-c):t.state.overwrite&&!Z?tt=ot(tt.line,Math.min(bt(D,tt.line).text.length,tt.ch+We(re).length)):Z&&Or&&Or.lineWise&&Or.text.join("\n")==re.join("\n")&&(Ze=tt=ot(Ze.line,0)));var st={from:Ze,to:tt,text:ae?ae[Ue%ae.length]:re,origin:b||(Z?"paste":t.state.cutIncoming>X?"cut":"+input")};_n(t.doc,st),nr(t,"inputRead",t,st)}n&&!Z&&iu(t,n),zn(t),t.curOp.updateInput<2&&(t.curOp.updateInput=Ee),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function ha(t,n){var c=t.clipboardData&&t.clipboardData.getData("Text");if(c)return t.preventDefault(),!n.isReadOnly()&&!n.options.disableInput&&n.hasFocus()&&br(n,function(){return ca(n,c,0,null,"paste")}),!0}function iu(t,n){if(t.options.electricChars&&t.options.smartIndent)for(var c=t.doc.sel,l=c.ranges.length-1;l>=0;l--){var b=c.ranges[l];if(!(b.head.ch>100||l&&c.ranges[l-1].head.line==b.head.line)){var D=t.getModeAt(b.head),X=!1;if(D.electricChars){for(var Z=0;Z<D.electricChars.length;Z++)if(n.indexOf(D.electricChars.charAt(Z))>-1){X=yo(t,b.head.line,"smart");break}}else D.electricInput&&D.electricInput.test(bt(t.doc,b.head.line).text.slice(0,b.head.ch))&&(X=yo(t,b.head.line,"smart"));X&&nr(t,"electricInput",t,b.head.line)}}}function pa(t){for(var n=[],c=[],l=0;l<t.doc.sel.ranges.length;l++){var b=t.doc.sel.ranges[l].head.line,D={anchor:ot(b,0),head:ot(b+1,0)};c.push(D),n.push(t.getRange(D.anchor,D.head))}return{text:n,ranges:c}}function ou(t,n,c,l){t.setAttribute("autocorrect",c?"":"off"),t.setAttribute("autocapitalize",l?"":"off"),t.setAttribute("spellcheck",!!n)}function su(){var t=ce("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),n=ce("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return o?t.style.width="1000px":t.setAttribute("wrap","off"),w&&(t.style.border="1px solid black"),ou(t),n}function da(t,n,c,l,b){var D=n,X=c,Z=bt(t,n.line),re=b&&"rtl"==t.direction?-c:c;function we(dt){var ft;if("codepoint"==l){var yt=Z.text.charCodeAt(n.ch+(c>0?0:-1));if(isNaN(yt))ft=null;else{var wt=c>0?yt>=55296&&yt<56320:yt>=56320&&yt<57343;ft=new ot(n.line,Math.max(0,Math.min(Z.text.length,n.ch+c*(wt?2:1))),-c)}}else ft=b?function Vo(t,n,c,l){var b=He(n,t.doc.direction);if(!b)return Ci(n,c,l);c.ch>=n.text.length?(c.ch=n.text.length,c.sticky="before"):c.ch<=0&&(c.ch=0,c.sticky="after");var D=ke(b,c.ch,c.sticky),X=b[D];if("ltr"==t.doc.direction&&X.level%2==0&&(l>0?X.to>c.ch:X.from<c.ch))return Ci(n,c,l);var re,Z=function(ut,dt){return _i(n,ut instanceof ot?ut.ch:ut,dt)},ae=function(ut){return t.options.lineWrapping?(re=re||Qn(t,n),Os(t,n,re,ut)):{begin:0,end:n.text.length}},we=ae("before"==c.sticky?Z(c,-1):c.ch);if("rtl"==t.doc.direction||1==X.level){var Ee=1==X.level==l<0,Ue=Z(c,Ee?1:-1);if(null!=Ue&&(Ee?Ue<=X.to&&Ue<=we.end:Ue>=X.from&&Ue>=we.begin)){var Qe=Ee?"before":"after";return new ot(c.line,Ue,Qe)}}var Ze=function(ut,dt,ft){for(;ut>=0&&ut<b.length;ut+=dt){var wt=b[ut],xt=dt>0==(1!=wt.level),Et=xt?ft.begin:Z(ft.end,-1);if(wt.from<=Et&&Et<wt.to||(Et=xt?wt.from:Z(wt.to,-1),ft.begin<=Et&&Et<ft.end))return Bt=Et,xt?new ot(c.line,Z(Bt,1),"before"):new ot(c.line,Bt,"after")}var Bt},tt=Ze(D+l,l,we);if(tt)return tt;var st=l>0?we.end:Z(we.begin,-1);return null==st||l>0&&st==n.text.length||!(tt=Ze(l>0?0:b.length-1,l,ae(st)))?null:tt}(t.cm,Z,n,c):Ci(Z,n,c);if(null==ft){if(dt||!function ae(){var dt=n.line+re;return!(dt<t.first||dt>=t.first+t.size)&&(n=new ot(dt,n.ch,n.sticky),Z=bt(t,dt))}())return!1;n=Si(b,t.cm,Z,n.line,re)}else n=ft;return!0}if("char"==l||"codepoint"==l)we();else if("column"==l)we(!0);else if("word"==l||"group"==l)for(var Ee=null,Ue="group"==l,Qe=t.cm&&t.cm.getHelper(n,"wordChars"),Ze=!0;!(c<0)||we(!Ze);Ze=!1){var tt=Z.text.charAt(n.ch)||"\n",st=Re(tt,Qe)?"w":Ue&&"\n"==tt?"n":!Ue||/\s/.test(tt)?null:"p";if(Ue&&!Ze&&!st&&(st="s"),Ee&&Ee!=st){c<0&&(c=1,we(),n.sticky="after");break}if(st&&(Ee=st),c>0&&!we(!Ze))break}var ut=Br(t,n,D,X,!0);return ds(D,ut)&&(ut.hitSide=!0),ut}function va(t,n,c,l){var X,ae,b=t.doc,D=n.left;if("page"==l){var Z=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),re=Math.max(Z-.5*Hn(t.display),3);X=(c>0?n.bottom:n.top)+c*re}else"line"==l&&(X=c>0?n.bottom+3:n.top-3);for(;(ae=Is(t,D,X)).outside;){if(c<0?X<=0:X>=b.height){ae.hitSide=!0;break}X+=5*c}return ae}var Pt=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Be,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function lu(t,n){var c=Es(t,n.line);if(!c||c.hidden)return null;var l=bt(t.doc,n.line),b=tl(c,l,n.line),D=He(l,t.doc.direction),X="left";D&&(X=ke(D,n.ch)%2?"right":"left");var re=nl(b.map,n.ch,X);return re.offset="right"==re.collapse?re.end:re.start,re}function Ei(t,n){return n&&(t.bad=!0),t}function es(t,n,c){var l;if(n==t.display.lineDiv){if(!(l=t.display.lineDiv.childNodes[c]))return Ei(t.clipPos(ot(t.display.viewTo-1)),!0);n=null,c=0}else for(l=n;;l=l.parentNode){if(!l||l==t.display.lineDiv)return null;if(l.parentNode&&l.parentNode==t.display.lineDiv)break}for(var b=0;b<t.display.view.length;b++){var D=t.display.view[b];if(D.node==l)return zf(D,n,c)}}function zf(t,n,c){var l=t.text.firstChild,b=!1;if(!n||!se(l,n))return Ei(ot(Mt(t.line),0),!0);if(n==l&&(b=!0,n=l.childNodes[c],c=0,!n)){var D=t.rest?We(t.rest):t.line;return Ei(ot(Mt(D),D.text.length),b)}var X=3==n.nodeType?n:null,Z=n;for(!X&&1==n.childNodes.length&&3==n.firstChild.nodeType&&(X=n.firstChild,c&&(c=X.nodeValue.length));Z.parentNode!=l;)Z=Z.parentNode;var re=t.measure,ae=re.maps;function we(st,ut,dt){for(var ft=-1;ft<(ae?ae.length:0);ft++)for(var yt=ft<0?re.map:ae[ft],wt=0;wt<yt.length;wt+=3){var xt=yt[wt+2];if(xt==st||xt==ut){var Et=Mt(ft<0?t.line:t.rest[ft]),Bt=yt[wt]+dt;return(dt<0||xt!=st)&&(Bt=yt[wt+(dt?1:0)]),ot(Et,Bt)}}}var Ee=we(X,Z,c);if(Ee)return Ei(Ee,b);for(var Ue=Z.nextSibling,Qe=X?X.nodeValue.length-c:0;Ue;Ue=Ue.nextSibling){if(Ee=we(Ue,Ue.firstChild,0))return Ei(ot(Ee.line,Ee.ch-Qe),b);Qe+=Ue.textContent.length}for(var Ze=Z.previousSibling,tt=c;Ze;Ze=Ze.previousSibling){if(Ee=we(Ze,Ze.firstChild,-1))return Ei(ot(Ee.line,Ee.ch+tt),b);tt+=Ze.textContent.length}}Pt.prototype.init=function(t){var n=this,c=this,l=c.cm,b=c.div=t.lineDiv;function D(Z){for(var re=Z.target;re;re=re.parentNode){if(re==b)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(re.className))break}return!1}function X(Z){if(D(Z)&&!pt(l,Z)){if(l.somethingSelected())$o({lineWise:!1,text:l.getSelections()}),"cut"==Z.type&&l.replaceSelection("",null,"cut");else{if(!l.options.lineWiseCopyCut)return;var re=pa(l);$o({lineWise:!0,text:re.text}),"cut"==Z.type&&l.operation(function(){l.setSelections(re.ranges,0,H),l.replaceSelection("",null,"cut")})}if(Z.clipboardData){Z.clipboardData.clearData();var ae=Or.text.join("\n");if(Z.clipboardData.setData("Text",ae),Z.clipboardData.getData("Text")==ae)return void Z.preventDefault()}var we=su(),Ee=we.firstChild;l.display.lineSpace.insertBefore(we,l.display.lineSpace.firstChild),Ee.value=Or.text.join("\n");var Ue=ne();be(Ee),setTimeout(function(){l.display.lineSpace.removeChild(we),Ue.focus(),Ue==b&&c.showPrimarySelection()},50)}}b.contentEditable=!0,ou(b,l.options.spellcheck,l.options.autocorrect,l.options.autocapitalize),Xe(b,"paste",function(Z){!D(Z)||pt(l,Z)||ha(Z,l)||e<=11&&setTimeout(ir(l,function(){return n.updateFromDOM()}),20)}),Xe(b,"compositionstart",function(Z){n.composing={data:Z.data,done:!1}}),Xe(b,"compositionupdate",function(Z){n.composing||(n.composing={data:Z.data,done:!1})}),Xe(b,"compositionend",function(Z){n.composing&&(Z.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),Xe(b,"touchstart",function(){return c.forceCompositionEnd()}),Xe(b,"input",function(){n.composing||n.readFromDOMSoon()}),Xe(b,"copy",X),Xe(b,"cut",X)},Pt.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},Pt.prototype.prepareSelection=function(){var t=pl(this.cm,!1);return t.focus=ne()==this.div,t},Pt.prototype.showSelection=function(t,n){!t||!this.cm.display.view.length||((t.focus||n)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Pt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Pt.prototype.showPrimarySelection=function(){var t=this.getSelection(),n=this.cm,c=n.doc.sel.primary(),l=c.from(),b=c.to();if(n.display.viewTo==n.display.viewFrom||l.line>=n.display.viewTo||b.line<n.display.viewFrom)t.removeAllRanges();else{var D=es(n,t.anchorNode,t.anchorOffset),X=es(n,t.focusNode,t.focusOffset);if(!D||D.bad||!X||X.bad||0!=Ct(Ui(D,X),l)||0!=Ct(_o(D,X),b)){var Z=n.display.view,re=l.line>=n.display.viewFrom&&lu(n,l)||{node:Z[0].measure.map[2],offset:0},ae=b.line<n.display.viewTo&&lu(n,b);if(!ae){var we=Z[Z.length-1].measure,Ee=we.maps?we.maps[we.maps.length-1]:we.map;ae={node:Ee[Ee.length-1],offset:Ee[Ee.length-2]-Ee[Ee.length-3]}}if(!re||!ae)return void t.removeAllRanges();var Qe,Ue=t.rangeCount&&t.getRangeAt(0);try{Qe=te(re.node,re.offset,ae.offset,ae.node)}catch(Ze){}Qe&&(!ue&&n.state.focused?(t.collapse(re.node,re.offset),Qe.collapsed||(t.removeAllRanges(),t.addRange(Qe))):(t.removeAllRanges(),t.addRange(Qe)),Ue&&null==t.anchorNode?t.addRange(Ue):ue&&this.startGracePeriod()),this.rememberSelection()}}},Pt.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},Pt.prototype.showMultipleSelections=function(t){fe(this.cm.display.cursorDiv,t.cursors),fe(this.cm.display.selectionDiv,t.selection)},Pt.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Pt.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var n=t.getRangeAt(0).commonAncestorContainer;return se(this.div,n)},Pt.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||ne()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Pt.prototype.blur=function(){this.div.blur()},Pt.prototype.getField=function(){return this.div},Pt.prototype.supportsTouch=function(){return!0},Pt.prototype.receivedFocus=function(){var t=this,n=this;this.selectionInEditor()?setTimeout(function(){return t.pollSelection()},20):br(this.cm,function(){return n.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function c(){n.cm.state.focused&&(n.pollSelection(),n.polling.set(n.cm.options.pollInterval,c))})},Pt.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Pt.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),n=this.cm;if(T&&d&&this.cm.display.gutterSpecs.length&&function uu(t){for(var n=t;n;n=n.parentNode)if(/CodeMirror-gutter-wrapper/.test(n.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var c=es(n,t.anchorNode,t.anchorOffset),l=es(n,t.focusNode,t.focusOffset);c&&l&&br(n,function(){fr(n.doc,bn(c,l),H),(c.bad||l.bad)&&(n.curOp.selectionChanged=!0)})}}},Pt.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var D,X,Z,t=this.cm,n=t.display,c=t.doc.sel.primary(),l=c.from(),b=c.to();if(0==l.ch&&l.line>t.firstLine()&&(l=ot(l.line-1,bt(t.doc,l.line-1).length)),b.ch==bt(t.doc,b.line).text.length&&b.line<t.lastLine()&&(b=ot(b.line+1,0)),l.line<n.viewFrom||b.line>n.viewTo-1)return!1;l.line==n.viewFrom||0==(D=Wn(t,l.line))?(X=Mt(n.view[0].line),Z=n.view[0].node):(X=Mt(n.view[D].line),Z=n.view[D-1].node.nextSibling);var ae,we,re=Wn(t,b.line);if(re==n.view.length-1?(ae=n.viewTo-1,we=n.lineDiv.lastChild):(ae=Mt(n.view[re+1].line)-1,we=n.view[re+1].node.previousSibling),!Z)return!1;for(var Ee=t.doc.splitLines(function fu(t,n,c,l,b){var D="",X=!1,Z=t.doc.lineSeparator(),re=!1;function ae(Qe){return function(Ze){return Ze.id==Qe}}function we(){X&&(D+=Z,re&&(D+=Z),X=re=!1)}function Ee(Qe){Qe&&(we(),D+=Qe)}function Ue(Qe){if(1==Qe.nodeType){var Ze=Qe.getAttribute("cm-text");if(Ze)return void Ee(Ze);var st,tt=Qe.getAttribute("cm-marker");if(tt){var ut=t.findMarks(ot(l,0),ot(b+1,0),ae(+tt));return void(ut.length&&(st=ut[0].find(0))&&Ee(pn(t.doc,st.from,st.to).join(Z)))}if("false"==Qe.getAttribute("contenteditable"))return;var dt=/^(pre|div|p|li|table|br)$/i.test(Qe.nodeName);if(!/^br$/i.test(Qe.nodeName)&&0==Qe.textContent.length)return;dt&&we();for(var ft=0;ft<Qe.childNodes.length;ft++)Ue(Qe.childNodes[ft]);/^(pre|p)$/i.test(Qe.nodeName)&&(re=!0),dt&&(X=!0)}else 3==Qe.nodeType&&Ee(Qe.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ue(n),n!=c;)n=n.nextSibling,re=!1;return D}(t,Z,we,X,ae)),Ue=pn(t.doc,ot(X,0),ot(ae,bt(t.doc,ae).text.length));Ee.length>1&&Ue.length>1;)if(We(Ee)==We(Ue))Ee.pop(),Ue.pop(),ae--;else{if(Ee[0]!=Ue[0])break;Ee.shift(),Ue.shift(),X++}for(var Qe=0,Ze=0,tt=Ee[0],st=Ue[0],ut=Math.min(tt.length,st.length);Qe<ut&&tt.charCodeAt(Qe)==st.charCodeAt(Qe);)++Qe;for(var dt=We(Ee),ft=We(Ue),yt=Math.min(dt.length-(1==Ee.length?Qe:0),ft.length-(1==Ue.length?Qe:0));Ze<yt&&dt.charCodeAt(dt.length-Ze-1)==ft.charCodeAt(ft.length-Ze-1);)++Ze;if(1==Ee.length&&1==Ue.length&&X==l.line)for(;Qe&&Qe>l.ch&&dt.charCodeAt(dt.length-Ze-1)==ft.charCodeAt(ft.length-Ze-1);)Qe--,Ze++;Ee[Ee.length-1]=dt.slice(0,dt.length-Ze).replace(/^\u200b+/,""),Ee[0]=Ee[0].slice(Qe).replace(/\u200b+$/,"");var wt=ot(X,Qe),xt=ot(ae,Ue.length?We(Ue).length-Ze:0);return Ee.length>1||Ee[0]||Ct(wt,xt)?(xi(t.doc,Ee,wt,xt,"+input"),!0):void 0},Pt.prototype.ensurePolled=function(){this.forceCompositionEnd()},Pt.prototype.reset=function(){this.forceCompositionEnd()},Pt.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Pt.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},Pt.prototype.updateFromDOM=function(){var t=this;(this.cm.isReadOnly()||!this.pollContent())&&br(this.cm,function(){return mr(t.cm)})},Pt.prototype.setUneditable=function(t){t.contentEditable="false"},Pt.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||ir(this.cm,ca)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},Pt.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},Pt.prototype.onContextMenu=function(){},Pt.prototype.resetPosition=function(){},Pt.prototype.needsContentAttribute=!0;var qt=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new Be,this.hasSelection=!1,this.composing=null};qt.prototype.init=function(t){var n=this,c=this,l=this.cm;this.createField(t);var b=this.textarea;function D(X){if(!pt(l,X)){if(l.somethingSelected())$o({lineWise:!1,text:l.getSelections()});else{if(!l.options.lineWiseCopyCut)return;var Z=pa(l);$o({lineWise:!0,text:Z.text}),"cut"==X.type?l.setSelections(Z.ranges,null,H):(c.prevInput="",b.value=Z.text.join("\n"),be(b))}"cut"==X.type&&(l.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),w&&(b.style.width="0px"),Xe(b,"input",function(){y&&e>=9&&n.hasSelection&&(n.hasSelection=null),c.poll()}),Xe(b,"paste",function(X){pt(l,X)||ha(X,l)||(l.state.pasteIncoming=+new Date,c.fastPoll())}),Xe(b,"cut",D),Xe(b,"copy",D),Xe(t.scroller,"paste",function(X){if(!Ir(t,X)&&!pt(l,X)){if(!b.dispatchEvent)return l.state.pasteIncoming=+new Date,void c.focus();var Z=new Event("paste");Z.clipboardData=X.clipboardData,b.dispatchEvent(Z)}}),Xe(t.lineSpace,"selectstart",function(X){Ir(t,X)||it(X)}),Xe(b,"compositionstart",function(){var X=l.getCursor("from");c.composing&&c.composing.range.clear(),c.composing={start:X,range:l.markText(X,l.getCursor("to"),{className:"CodeMirror-composing"})}}),Xe(b,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},qt.prototype.createField=function(t){this.wrapper=su(),this.textarea=this.wrapper.firstChild},qt.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},qt.prototype.prepareSelection=function(){var t=this.cm,n=t.display,c=t.doc,l=pl(t);if(t.options.moveInputWithCursor){var b=Nr(t,c.sel.primary().head,"div"),D=n.wrapper.getBoundingClientRect(),X=n.lineDiv.getBoundingClientRect();l.teTop=Math.max(0,Math.min(n.wrapper.clientHeight-10,b.top+X.top-D.top)),l.teLeft=Math.max(0,Math.min(n.wrapper.clientWidth-10,b.left+X.left-D.left))}return l},qt.prototype.showSelection=function(t){var c=this.cm.display;fe(c.cursorDiv,t.cursors),fe(c.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},qt.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var n=this.cm;if(n.somethingSelected()){this.prevInput="";var c=n.getSelection();this.textarea.value=c,n.state.focused&&be(this.textarea),y&&e>=9&&(this.hasSelection=c)}else t||(this.prevInput=this.textarea.value="",y&&e>=9&&(this.hasSelection=null))}},qt.prototype.getField=function(){return this.textarea},qt.prototype.supportsTouch=function(){return!1},qt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!E||ne()!=this.textarea))try{this.textarea.focus()}catch(t){}},qt.prototype.blur=function(){this.textarea.blur()},qt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},qt.prototype.receivedFocus=function(){this.slowPoll()},qt.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},qt.prototype.fastPoll=function(){var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,function c(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,c))})},qt.prototype.poll=function(){var t=this,n=this.cm,c=this.textarea,l=this.prevInput;if(this.contextMenuPending||!n.state.focused||li(c)&&!l&&!this.composing||n.isReadOnly()||n.options.disableInput||n.state.keySeq)return!1;var b=c.value;if(b==l&&!n.somethingSelected())return!1;if(y&&e>=9&&this.hasSelection===b||P&&/[\uf700-\uf7ff]/.test(b))return n.display.input.reset(),!1;if(n.doc.sel==n.display.selForContextMenu){var D=b.charCodeAt(0);if(8203==D&&!l&&(l="\u200b"),8666==D)return this.reset(),this.cm.execCommand("undo")}for(var X=0,Z=Math.min(l.length,b.length);X<Z&&l.charCodeAt(X)==b.charCodeAt(X);)++X;return br(n,function(){ca(n,b.slice(X),l.length-X,null,t.composing?"*compose":null),b.length>1e3||b.indexOf("\n")>-1?c.value=t.prevInput="":t.prevInput=b,t.composing&&(t.composing.range.clear(),t.composing.range=n.markText(t.composing.start,n.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},qt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},qt.prototype.onKeyPress=function(){y&&e>=9&&(this.hasSelection=null),this.fastPoll()},qt.prototype.onContextMenu=function(t){var n=this,c=n.cm,l=c.display,b=n.textarea;n.contextMenuPending&&n.contextMenuPending();var D=gn(c,t),X=l.scroller.scrollTop;if(D&&!h){c.options.resetSelectionOnContextMenu&&-1==c.doc.sel.contains(D)&&ir(c,fr)(c.doc,bn(D),H);var Ee,re=b.style.cssText,ae=n.wrapper.style.cssText,we=n.wrapper.offsetParent.getBoundingClientRect();if(n.wrapper.style.cssText="position: static",b.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-we.top-5)+"px; left: "+(t.clientX-we.left-5)+"px;\n      z-index: 1000; background: "+(y?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",o&&(Ee=window.scrollY),l.input.focus(),o&&window.scrollTo(null,Ee),l.input.reset(),c.somethingSelected()||(b.value=n.prevInput=" "),n.contextMenuPending=Qe,l.selForContextMenu=c.doc.sel,clearTimeout(l.detectingSelectAll),y&&e>=9&&Ue(),U){At(t);var Ze=function(){ct(window,"mouseup",Ze),setTimeout(Qe,20)};Xe(window,"mouseup",Ze)}else setTimeout(Qe,50)}function Ue(){if(null!=b.selectionStart){var tt=c.somethingSelected(),st="\u200b"+(tt?b.value:"");b.value="\u21da",b.value=st,n.prevInput=tt?"":"\u200b",b.selectionStart=1,b.selectionEnd=st.length,l.selForContextMenu=c.doc.sel}}function Qe(){if(n.contextMenuPending==Qe&&(n.contextMenuPending=!1,n.wrapper.style.cssText=ae,b.style.cssText=re,y&&e<9&&l.scrollbars.setScrollTop(l.scroller.scrollTop=X),null!=b.selectionStart)){(!y||y&&e<9)&&Ue();var tt=0,st=function(){l.selForContextMenu==c.doc.sel&&0==b.selectionStart&&b.selectionEnd>0&&"\u200b"==n.prevInput?ir(c,Ol)(c):tt++<10?l.detectingSelectAll=setTimeout(st,500):(l.selForContextMenu=null,l.input.reset())};l.detectingSelectAll=setTimeout(st,200)}}},qt.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},qt.prototype.setUneditable=function(){},qt.prototype.needsContentAttribute=!1,function ru(t){var n=t.optionHandlers;function c(l,b,D,X){t.defaults[l]=b,D&&(n[l]=X?function(Z,re,ae){ae!=ni&&D(Z,re,ae)}:D)}t.defineOption=c,t.Init=ni,c("value","",function(l,b){return l.setValue(b)},!0),c("mode",null,function(l,b){l.doc.modeOption=b,Ys(l)},!0),c("indentUnit",2,Ys,!0),c("indentWithTabs",!1),c("smartIndent",!0),c("tabSize",4,function(l){io(l),vi(l),mr(l)},!0),c("lineSeparator",null,function(l,b){if(l.doc.lineSep=b,b){var D=[],X=l.doc.first;l.doc.iter(function(re){for(var ae=0;;){var we=re.text.indexOf(b,ae);if(-1==we)break;ae=we+b.length,D.push(ot(X,we))}X++});for(var Z=D.length-1;Z>=0;Z--)xi(l.doc,b,D[Z],ot(D[Z].line,D[Z].ch+b.length))}}),c("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(l,b,D){l.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g"),D!=ni&&l.refresh()}),c("specialCharPlaceholder",Ja,function(l){return l.refresh()},!0),c("electricChars",!0),c("inputStyle",E?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),c("spellcheck",!1,function(l,b){return l.getInputField().spellcheck=b},!0),c("autocorrect",!1,function(l,b){return l.getInputField().autocorrect=b},!0),c("autocapitalize",!1,function(l,b){return l.getInputField().autocapitalize=b},!0),c("rtlMoveVisually",!j),c("wholeLineUpdateBefore",!0),c("theme","default",function(l){eu(l),no(l)},!0),c("keyMap","default",function(l,b,D){var X=$n(b),Z=D!=ni&&$n(D);Z&&Z.detach&&Z.detach(l,X),X.attach&&X.attach(l,Z||null)}),c("extraKeys",null),c("configureMouse",null),c("lineWrapping",!1,nu,!0),c("gutters",[],function(l,b){l.display.gutterSpecs=Vs(b,l.options.lineNumbers),no(l)},!0),c("fixedGutter",!0,function(l,b){l.display.gutters.style.left=b?js(l.display)+"px":"0",l.refresh()},!0),c("coverGutterNextToScrollbar",!1,function(l){return Jn(l)},!0),c("scrollbarStyle","native",function(l){gl(l),Jn(l),l.display.scrollbars.setScrollTop(l.doc.scrollTop),l.display.scrollbars.setScrollLeft(l.doc.scrollLeft)},!0),c("lineNumbers",!1,function(l,b){l.display.gutterSpecs=Vs(l.options.gutters,b),no(l)},!0),c("firstLineNumber",1,no,!0),c("lineNumberFormatter",function(l){return l},no,!0),c("showCursorWhenSelecting",!1,Vi,!0),c("resetSelectionOnContextMenu",!0),c("lineWiseCopyCut",!0),c("pasteLinesPerSelection",!0),c("selectionsMayTouch",!1),c("readOnly",!1,function(l,b){"nocursor"==b&&(mi(l),l.display.input.blur()),l.display.input.readOnlyChanged(b)}),c("screenReaderLabel",null,function(l,b){b=""===b?null:b,l.display.input.screenReaderLabelChanged(b)}),c("disableInput",!1,function(l,b){b||l.display.input.reset()},!0),c("dragDrop",!0,Hf),c("allowDropFileTypes",null),c("cursorBlinkRate",530),c("cursorScrollMargin",0),c("cursorHeight",1,Vi,!0),c("singleCursorHeightPerLine",!0,Vi,!0),c("workTime",100),c("workDelay",100),c("flattenSpans",!0,io,!0),c("addModeClass",!1,io,!0),c("pollInterval",100),c("undoDepth",200,function(l,b){return l.doc.history.undoDepth=b}),c("historyEventDelay",1250),c("viewportMargin",10,function(l){return l.refresh()},!0),c("maxHighlightLength",1e4,io,!0),c("moveInputWithCursor",!0,function(l,b){b||l.display.input.resetPosition()}),c("tabindex",null,function(l,b){return l.display.input.getField().tabIndex=b||""}),c("autofocus",null),c("direction","ltr",function(l,b){return l.doc.setDirection(b)},!0),c("phrases",null)}(Qt),function au(t){var n=t.optionHandlers,c=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(l,b){var D=this.options,X=D[l];D[l]==b&&"mode"!=l||(D[l]=b,n.hasOwnProperty(l)&&ir(this,n[l])(this,b,X),vt(this,"optionChange",this,l))},getOption:function(l){return this.options[l]},getDoc:function(){return this.doc},addKeyMap:function(l,b){this.state.keyMaps[b?"push":"unshift"]($n(l))},removeKeyMap:function(l){for(var b=this.state.keyMaps,D=0;D<b.length;++D)if(b[D]==l||b[D].name==l)return b.splice(D,1),!0},addOverlay:pr(function(l,b){var D=l.token?l:t.getMode(this.options,l);if(D.startState)throw new Error("Overlays may not be stateful.");(function mt(t,n,c){for(var l=0,b=c(n);l<t.length&&c(t[l])<=b;)l++;t.splice(l,0,n)})(this.state.overlays,{mode:D,modeSpec:l,opaque:b&&b.opaque,priority:b&&b.priority||0},function(X){return X.priority}),this.state.modeGen++,mr(this)}),removeOverlay:pr(function(l){for(var b=this.state.overlays,D=0;D<b.length;++D){var X=b[D].modeSpec;if(X==l||"string"==typeof l&&X.name==l)return b.splice(D,1),this.state.modeGen++,void mr(this)}}),indentLine:pr(function(l,b,D){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),Qi(this.doc,l)&&yo(this,l,b,D)}),indentSelection:pr(function(l){for(var b=this.doc.sel.ranges,D=-1,X=0;X<b.length;X++){var Z=b[X];if(Z.empty())Z.head.line>D&&(yo(this,Z.head.line,l,!0),D=Z.head.line,X==this.doc.sel.primIndex&&zn(this));else{var re=Z.from(),ae=Z.to(),we=Math.max(D,re.line);D=Math.min(this.lastLine(),ae.line-(ae.ch?0:1))+1;for(var Ee=we;Ee<D;++Ee)yo(this,Ee,l);var Ue=this.doc.sel.ranges;0==re.ch&&b.length==Ue.length&&Ue[X].from().ch>0&&ra(this.doc,X,new Dt(re,Ue[X].to()),H)}}}),getTokenAt:function(l,b){return La(this,l,b)},getLineTokens:function(l,b){return La(this,ot(l),b,!0)},getTokenTypeAt:function(l){l=St(this.doc,l);var re,b=gs(this,bt(this.doc,l.line)),D=0,X=(b.length-1)/2,Z=l.ch;if(0==Z)re=b[2];else for(;;){var ae=D+X>>1;if((ae?b[2*ae-1]:0)>=Z)X=ae;else{if(!(b[2*ae+1]<Z)){re=b[2*ae+2];break}D=ae+1}}var we=re?re.indexOf("overlay "):-1;return we<0?re:0==we?null:re.slice(0,we-1)},getModeAt:function(l){var b=this.doc.mode;return b.innerMode?t.innerMode(b,this.getTokenAt(l).state).mode:b},getHelper:function(l,b){return this.getHelpers(l,b)[0]},getHelpers:function(l,b){var D=[];if(!c.hasOwnProperty(b))return D;var X=c[b],Z=this.getModeAt(l);if("string"==typeof Z[b])X[Z[b]]&&D.push(X[Z[b]]);else if(Z[b])for(var re=0;re<Z[b].length;re++){var ae=X[Z[b][re]];ae&&D.push(ae)}else Z.helperType&&X[Z.helperType]?D.push(X[Z.helperType]):X[Z.name]&&D.push(X[Z.name]);for(var we=0;we<X._global.length;we++){var Ee=X._global[we];Ee.pred(Z,this)&&-1==Ie(D,Ee.val)&&D.push(Ee.val)}return D},getStateAfter:function(l,b){var D=this.doc;return Gi(this,(l=Aa(D,null==l?D.first+D.size-1:l))+1,b).state},cursorCoords:function(l,b){var X=this.doc.sel.primary();return Nr(this,null==l?X.head:"object"==typeof l?St(this.doc,l):l?X.from():X.to(),b||"page")},charCoords:function(l,b){return ln(this,St(this.doc,l),b||"page")},coordsChar:function(l,b){return Is(this,(l=ll(this,l,b||"page")).left,l.top)},lineAtHeight:function(l,b){return l=ll(this,{top:l,left:0},b||"page").top,jn(this.doc,l+this.display.viewOffset)},heightAtLine:function(l,b,D){var Z,X=!1;if("number"==typeof l){var re=this.doc.first+this.doc.size-1;l<this.doc.first?l=this.doc.first:l>re&&(l=re,X=!0),Z=bt(this.doc,l)}else Z=l;return Io(this,Z,{top:0,left:0},b||"page",D||X).top+(X?this.doc.height-Xr(Z):0)},defaultTextHeight:function(){return Hn(this.display)},defaultCharWidth:function(){return gi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(l,b,D,X,Z){var re=this.display,ae=(l=Nr(this,St(this.doc,l))).bottom,we=l.left;if(b.style.position="absolute",b.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(b),re.sizer.appendChild(b),"over"==X)ae=l.top;else if("above"==X||"near"==X){var Ee=Math.max(re.wrapper.clientHeight,this.doc.height),Ue=Math.max(re.sizer.clientWidth,re.lineSpace.clientWidth);("above"==X||l.bottom+b.offsetHeight>Ee)&&l.top>b.offsetHeight?ae=l.top-b.offsetHeight:l.bottom+b.offsetHeight<=Ee&&(ae=l.bottom),we+b.offsetWidth>Ue&&(we=Ue-b.offsetWidth)}b.style.top=ae+"px",b.style.left=b.style.right="","right"==Z?(we=re.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==Z?we=0:"middle"==Z&&(we=(re.sizer.clientWidth-b.offsetWidth)/2),b.style.left=we+"px"),D&&function of(t,n){var c=Us(t,n);null!=c.scrollTop&&$i(t,c.scrollTop),null!=c.scrollLeft&&qn(t,c.scrollLeft)}(this,{left:we,top:ae,right:we+b.offsetWidth,bottom:ae+b.offsetHeight})},triggerOnKeyDown:pr(Xl),triggerOnKeyPress:pr(Qr),triggerOnKeyUp:Jl,triggerOnMouseDown:pr(Vl),execCommand:function(l){if(Yr.hasOwnProperty(l))return Yr[l].call(null,this)},triggerElectric:pr(function(l){iu(this,l)}),findPosH:function(l,b,D,X){var Z=1;b<0&&(Z=-1,b=-b);for(var re=St(this.doc,l),ae=0;ae<b&&!(re=da(this.doc,re,Z,D,X)).hitSide;++ae);return re},moveH:pr(function(l,b){var D=this;this.extendSelectionsBy(function(X){return D.display.shift||D.doc.extend||X.empty()?da(D.doc,X.head,l,b,D.options.rtlMoveVisually):l<0?X.from():X.to()},pe)}),deleteH:pr(function(l,b){var D=this.doc.sel,X=this.doc;D.somethingSelected()?X.replaceSelection("",null,"+delete"):ei(this,function(Z){var re=da(X,Z.head,l,b,!1);return l<0?{from:re,to:Z.head}:{from:Z.head,to:re}})}),findPosV:function(l,b,D,X){var Z=1,re=X;b<0&&(Z=-1,b=-b);for(var ae=St(this.doc,l),we=0;we<b;++we){var Ee=Nr(this,ae,"div");if(null==re?re=Ee.left:Ee.left=re,(ae=va(this,Ee,Z,D)).hitSide)break}return ae},moveV:pr(function(l,b){var D=this,X=this.doc,Z=[],re=!this.display.shift&&!X.extend&&X.sel.somethingSelected();if(X.extendSelectionsBy(function(we){if(re)return l<0?we.from():we.to();var Ee=Nr(D,we.head,"div");null!=we.goalColumn&&(Ee.left=we.goalColumn),Z.push(Ee.left);var Ue=va(D,Ee,l,b);return"page"==b&&we==X.sel.primary()&&Gs(D,ln(D,Ue,"div").top-Ee.top),Ue},pe),Z.length)for(var ae=0;ae<X.sel.ranges.length;ae++)X.sel.ranges[ae].goalColumn=Z[ae]}),findWordAt:function(l){var D=bt(this.doc,l.line).text,X=l.ch,Z=l.ch;if(D){var re=this.getHelper(l,"wordChars");"before"!=l.sticky&&Z!=D.length||!X?++Z:--X;for(var ae=D.charAt(X),we=Re(ae,re)?function(Ee){return Re(Ee,re)}:/\s/.test(ae)?function(Ee){return/\s/.test(Ee)}:function(Ee){return!/\s/.test(Ee)&&!Re(Ee)};X>0&&we(D.charAt(X-1));)--X;for(;Z<D.length&&we(D.charAt(Z));)++Z}return new Dt(ot(l.line,X),ot(l.line,Z))},toggleOverwrite:function(l){null!=l&&l==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ve(this.display.cursorDiv,"CodeMirror-overwrite"):V(this.display.cursorDiv,"CodeMirror-overwrite"),vt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ne()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:pr(function(l,b){Zi(this,l,b)}),getScrollInfo:function(){var l=this.display.scroller;return{left:l.scrollLeft,top:l.scrollTop,height:l.scrollHeight-yr(this)-this.display.barHeight,width:l.scrollWidth-yr(this)-this.display.barWidth,clientHeight:vn(this),clientWidth:an(this)}},scrollIntoView:pr(function(l,b){null==l?(l={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof l?l={from:ot(l,0),to:null}:null==l.from&&(l={from:l,to:null}),l.to||(l.to=l.from),l.margin=b||0,null!=l.from.line?function sf(t,n){jo(t),t.curOp.scrollToPos=n}(this,l):Hs(this,l.from,l.to,l.margin)}),setSize:pr(function(l,b){var D=this,X=function(re){return"number"==typeof re||/^\d+$/.test(String(re))?re+"px":re};null!=l&&(this.display.wrapper.style.width=X(l)),null!=b&&(this.display.wrapper.style.height=X(b)),this.options.lineWrapping&&sl(this);var Z=this.display.viewFrom;this.doc.iter(Z,this.display.viewTo,function(re){if(re.widgets)for(var ae=0;ae<re.widgets.length;ae++)if(re.widgets[ae].noHScroll){Wt(D,Z,"widget");break}++Z}),this.curOp.forceUpdate=!0,vt(this,"refresh",this)}),operation:function(l){return br(this,l)},startOperation:function(){return mn(this)},endOperation:function(){return Vn(this)},refresh:pr(function(){var l=this.display.cachedTextHeight;mr(this),this.curOp.forceUpdate=!0,vi(this),Zi(this,this.doc.scrollLeft,this.doc.scrollTop),Js(this.display),(null==l||Math.abs(l-Hn(this.display))>.5||this.options.lineWrapping)&&Ds(this),vt(this,"refresh",this)}),swapDoc:pr(function(l){var b=this.doc;return b.cm=null,this.state.selectingText&&this.state.selectingText(),oo(this,l),vi(this),this.display.input.reset(),Zi(this,l.scrollLeft,l.scrollTop),this.curOp.forceScroll=!0,nr(this,"swapDoc",this,b),b}),phrase:function(l){var b=this.options.phrases;return b&&Object.prototype.hasOwnProperty.call(b,l)?b[l]:l},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},gt(t),t.registerHelper=function(l,b,D){c.hasOwnProperty(l)||(c[l]=t[l]={_global:[]}),c[l][b]=D},t.registerGlobalHelper=function(l,b,D,X){t.registerHelper(l,b,X),c[l]._global.push({pred:D,val:X})}}(Qt);var Xf="iter insert remove copy getEditor constructor".split(" ");for(var ts in xr.prototype)xr.prototype.hasOwnProperty(ts)&&Ie(Xf,ts)<0&&(Qt.prototype[ts]=function(t){return function(){return t.apply(this.doc,arguments)}}(xr.prototype[ts]));return gt(xr),Qt.inputStyles={textarea:qt,contenteditable:Pt},Qt.defineMode=function(t){!Qt.defaults.mode&&"null"!=t&&(Qt.defaults.mode=t),Mi.apply(this,arguments)},Qt.defineMIME=function xo(t,n){nn[t]=n},Qt.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),Qt.defineMIME("text/plain","null"),Qt.defineExtension=function(t,n){Qt.prototype[t]=n},Qt.defineDocExtension=function(t,n){xr.prototype[t]=n},Qt.fromTextArea=function qf(t,n){if((n=n?ye(n):{}).value=t.value,!n.tabindex&&t.tabIndex&&(n.tabindex=t.tabIndex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var c=ne();n.autofocus=c==t||null!=t.getAttribute("autofocus")&&c==document.body}function l(){t.value=Z.getValue()}var b;if(t.form&&(Xe(t.form,"submit",l),!n.leaveSubmitMethodAlone)){var D=t.form;b=D.submit;try{var X=D.submit=function(){l(),D.submit=b,D.submit(),D.submit=X}}catch(re){}}n.finishInit=function(re){re.save=l,re.getTextArea=function(){return t},re.toTextArea=function(){re.toTextArea=isNaN,l(),t.parentNode.removeChild(re.getWrapperElement()),t.style.display="",t.form&&(ct(t.form,"submit",l),!n.leaveSubmitMethodAlone&&"function"==typeof t.form.submit&&(t.form.submit=b))}},t.style.display="none";var Z=Qt(function(re){return t.parentNode.insertBefore(re,t.nextSibling)},n);return Z},function cu(t){t.off=ct,t.on=Xe,t.wheelEventPixels=mf,t.Doc=xr,t.splitLines=Hr,t.countColumn=Fe,t.findColumn=Ne,t.isWordChar=Te,t.Pass=G,t.signal=vt,t.Line=ui,t.changeEnd=xn,t.scrollbarModel=zs,t.Pos=ot,t.cmpPos=Ct,t.modes=Wr,t.mimeModes=nn,t.resolveMode=Er,t.getMode=Pi,t.modeExtensions=zr,t.extendMode=wo,t.copyState=Tr,t.startState=Rn,t.innerMode=Bi,t.commands=Yr,t.keyMap=Kr,t.keyName=sa,t.isModifierKey=Jo,t.lookupKey=En,t.normalizeKeyMap=oa,t.StringStream=Jt,t.SharedTextMarker=ki,t.TextMarker=Cn,t.LineWidget=fo,t.e_preventDefault=it,t.e_stopPropagation=Nt,t.e_stop=At,t.addClass=ve,t.contains=se,t.rmClass=V,t.keyNames=Sn}(Qt),Qt.version="5.65.6",Qt}),function(J){"object"==typeof exports&&"object"==typeof module?J(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],J):J(CodeMirror)}(function(J){"use strict";J.defineMode("turtle",function(ie){var q,ue=ie.indentUnit;function a(h){return new RegExp("^(?:"+h.join("|")+")$","i")}a([]);var y=a(["@prefix","@base","a"]),e=/[*+\-<>=&|]/;function o(h,k){var v=h.next();if(q=null,"<"==v&&!h.match(/^[\s\u00a0=]/,!1))return h.match(/^[^\s\u00a0>]*>?/),"atom";if('"'==v||"'"==v)return k.tokenize=function u(h){return function(k,v){for(var w,f=!1;null!=(w=k.next());){if(w==h&&!f){v.tokenize=o;break}f=!f&&"\\"==w}return"string"}}(v),k.tokenize(h,k);if(/[{}\(\),\.;\[\]]/.test(v))return q=v,null;if("#"==v)return h.skipToEnd(),"comment";if(e.test(v))return h.eatWhile(e),null;if(":"==v)return"operator";if(h.eatWhile(/[_\w\d]/),":"==h.peek())return"variable-3";var f=h.current();return y.test(f)?"meta":v>="A"&&v<="Z"?"comment":"keyword"}function d(h,k,v){h.context={prev:h.context,indent:h.indent,col:v,type:k}}function m(h){h.indent=h.context.indent,h.context=h.context.prev}return{startState:function(){return{tokenize:o,context:null,indent:0,col:0}},token:function(h,k){if(h.sol()&&(k.context&&null==k.context.align&&(k.context.align=!1),k.indent=h.indentation()),h.eatSpace())return null;var v=k.tokenize(h,k);if("comment"!=v&&k.context&&null==k.context.align&&"pattern"!=k.context.type&&(k.context.align=!0),"("==q)d(k,")",h.column());else if("["==q)d(k,"]",h.column());else if("{"==q)d(k,"}",h.column());else if(/[\]\}\)]/.test(q)){for(;k.context&&"pattern"==k.context.type;)m(k);k.context&&q==k.context.type&&m(k)}else"."==q&&k.context&&"pattern"==k.context.type?m(k):/atom|string|variable/.test(v)&&k.context&&(/[\}\]]/.test(k.context.type)?d(k,"pattern",h.column()):"pattern"==k.context.type&&!k.context.align&&(k.context.align=!0,k.context.col=h.column()));return v},indent:function(h,k){var v=k&&k.charAt(0),f=h.context;if(/[\]\}]/.test(v))for(;f&&"pattern"==f.type;)f=f.prev;var w=f&&v==f.type;return f?"pattern"==f.type?f.col:f.align?f.col+(w?0:1):f.indent+(w?0:ue):0},lineComment:"#"}}),J.defineMIME("text/turtle","turtle")}),function(J){"object"==typeof exports&&"object"==typeof module?J(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],J):J(CodeMirror)}(function(J){"use strict";J.defineMode("sparql",function(ie){var q,ue=ie.indentUnit;function a(k){return new RegExp("^(?:"+k.join("|")+")$","i")}var F=a(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","iri","uri","bnode","count","sum","min","max","avg","sample","group_concat","rand","abs","ceil","floor","round","concat","substr","strlen","replace","ucase","lcase","encode_for_uri","contains","strstarts","strends","strbefore","strafter","year","month","day","hours","minutes","seconds","timezone","tz","now","uuid","struuid","md5","sha1","sha256","sha384","sha512","coalesce","if","strlang","strdt","isnumeric","regex","exists","isblank","isliteral","a","bind"]),y=a(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc","as","having","undef","values","group","minus","in","not","service","silent","using","insert","delete","union","true","false","with","data","copy","to","move","add","create","drop","clear","load"]),e=/[*+\-<>=&|\^\/!\?]/;function o(k,v){var f=k.next();if(q=null,"$"==f||"?"==f)return"?"==f&&k.match(/\s/,!1)?"operator":(k.match(/^[A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][A-Za-z0-9_\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]*/),"variable-2");if("<"==f&&!k.match(/^[\s\u00a0=]/,!1))return k.match(/^[^\s\u00a0>]*>?/),"atom";if('"'==f||"'"==f)return v.tokenize=function d(k){return function(v,f){for(var T,w=!1;null!=(T=v.next());){if(T==k&&!w){f.tokenize=o;break}w=!w&&"\\"==T}return"string"}}(f),v.tokenize(k,v);if(/[{}\(\),\.;\[\]]/.test(f))return q=f,"bracket";if("#"==f)return k.skipToEnd(),"comment";if(e.test(f))return"operator";if(":"==f)return u(k),"atom";if("@"==f)return k.eatWhile(/[a-z\d\-]/i),"meta";if(k.eatWhile(/[_\w\d]/),k.eat(":"))return u(k),"atom";var w=k.current();return F.test(w)?"builtin":y.test(w)?"keyword":"variable"}function u(k){k.match(/(\.(?=[\w_\-\\%])|[:\w_-]|\\[-\\_~.!$&'()*+,;=/?#@%]|%[a-f\d][a-f\d])+/i)}function m(k,v,f){k.context={prev:k.context,indent:k.indent,col:f,type:v}}function h(k){k.indent=k.context.indent,k.context=k.context.prev}return{startState:function(){return{tokenize:o,context:null,indent:0,col:0}},token:function(k,v){if(k.sol()&&(v.context&&null==v.context.align&&(v.context.align=!1),v.indent=k.indentation()),k.eatSpace())return null;var f=v.tokenize(k,v);if("comment"!=f&&v.context&&null==v.context.align&&"pattern"!=v.context.type&&(v.context.align=!0),"("==q)m(v,")",k.column());else if("["==q)m(v,"]",k.column());else if("{"==q)m(v,"}",k.column());else if(/[\]\}\)]/.test(q)){for(;v.context&&"pattern"==v.context.type;)h(v);v.context&&q==v.context.type&&(h(v),"}"==q&&v.context&&"pattern"==v.context.type&&h(v))}else"."==q&&v.context&&"pattern"==v.context.type?h(v):/atom|string|variable/.test(f)&&v.context&&(/[\}\]]/.test(v.context.type)?m(v,"pattern",k.column()):"pattern"==v.context.type&&!v.context.align&&(v.context.align=!0,v.context.col=k.column()));return f},indent:function(k,v){var f=v&&v.charAt(0),w=k.context;if(/[\]\}]/.test(f))for(;w&&"pattern"==w.type;)w=w.prev;var T=w&&f==w.type;return w?"pattern"==w.type?w.col:w.align?w.col+(T?0:1):w.indent+(T?0:ue):0},lineComment:"#"}}),J.defineMIME("application/sparql-query","sparql")});