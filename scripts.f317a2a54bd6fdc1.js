function dateConverter(Ce){const Ee=1721425.5,ye=["So","Mo","Di","Mi","Do","Fr","Sa"],j={GREGORIAN:["ZERO","Jan","Feb","M\xe4rz","Apr","Mai","Juni","Juli","Aug","Sep","Okt","Nov","Dez"],JULIAN:["ZERO","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JEWISH:["ZERO","Tishri","Heshvan","Kislev","Tevet","Shevat","AdarI","AdarII","Nisan","Iyyar","Sivan","Tammuz","Av","Elul"],FRENCH:["ZERO","Vendemiaire","Brumaire","Frimaire","Nivose","Pluviose","Ventose","Germinal","Floreal","Prairial","Messidor","Thermidor","Fructidor","Extra"]};function N(Y,X){return Y-X*Math.floor(Y/X)}function _(Y){return(Y=parseInt(Y))%4==0&&!(Y%100==0&&Y%400!=0)}function I(Y,X,fe){return Ee-1+365*(Y-1)+Math.floor((Y-1)/4)+-Math.floor((Y-1)/100)+Math.floor((Y-1)/400)+Math.floor((367*X-362)/12+(X<=2?0:_(Y)?-1:-2)+fe)}function O(Y,X){Y=parseInt(Y);const fe={};let ne;switch(X){case"GREGORIAN":case"gregorian":ne=function D(Y){let X,fe,ne,re,oe,he,pe,V,W,ee,ge,Se,Le,Ne;return X=Math.floor(Y-.5)+.5,fe=X-Ee,ne=Math.floor(fe/146097),re=N(fe,146097),oe=Math.floor(re/36524),he=N(re,36524),pe=Math.floor(he/1461),V=N(he,1461),W=Math.floor(V/365),ee=400*ne+100*oe+4*pe+W,4==oe||4==W||ee++,ge=X-I(ee,1,1),Se=X<I(ee,3,1)?0:_(ee)?1:2,Le=Math.floor((12*(ge+Se)+373)/367),Ne=X-I(ee,Le,1)+1,ee<=0&&ee--,new Array(ee,Le,Ne)}(Y);break;case"JULIAN":case"julian":ne=S.jd_to_julian(Y);break;case"JEWISH":case"jewish":ne=S.jd_to_hebrew(Y);break;case"FRENCH":case"french":ne=S.jd_to_french_revolutionary(Y)}return fe.year=ne[0],fe.month=ne[1],fe.day=ne[2],fe.weekday=function T(Y){return Y=Number(Y),N(Math.floor(Y+1.5),7)}(Y),fe}const s=O(Ce.dateval1,Ce.calendar),R=O(Ce.dateval2,Ce.calendar);let G="";if(Ce.dateprecision1==Ce.dateprecision2)switch(Ce.dateprecision1){case"DAY":G=s.year===R.year&&s.month===R.month&&s.day===R.day?"["+ye[s.weekday]+"] "+s.day+". "+j[Ce.calendar][s.month]+" "+s.year:"["+ye[s.weekday]+"] "+s.day+". "+j[Ce.calendar][s.month]+" "+s.year+" \u2013 ["+ye[R.weekday]+"] "+R.day+". "+j[Ce.calendar][R.month]+" "+R.year;break;case"MONTH":G=s.year===R.year&&s.month===R.month?j[Ce.calendar][s.month]+" "+s.year:j[Ce.calendar][s.month]+" "+s.year+" \u2013 "+j[Ce.calendar][R.month]+" "+R.year;break;case"YEAR":G=s.year===R.year?s.year:s.year+"\u2013"+R.year}else{switch(Ce.dateprecision1){case"DAY":G="["+ye[s.weekday]+"] "+s.day+". "+j[Ce.calendar][s.month]+" "+s.year;break;case"MONTH":G=j[Ce.calendar][s.month]+" "+s.year;break;case"YEAR":G=s.year}switch(G+=" \u2013 ",Ce.dateprecision2){case"DAY":G+="["+ye[R.weekday]+"] "+R.day+". "+j[Ce.calendar][R.month]+" "+R.year;break;case"MONTH":G+=j[Ce.calendar][R.month]+" "+R.year;break;case"YEAR":G+=R.year}}return G+=" ("+{GREGORIAN:{name:"Gregorian",short:"G",n_months:12},JULIAN:{name:"Julian",short:"Ju",n_months:12},JEWISH:{name:"Jewish",short:"Je",n_months:13},FRENCH:{name:"Revol.",short:"R",n_months:13}}[Ce.calendar].short+")",G}function htmlConverter(Ce,Ee){let ye,j,N,T,_,I,D,O,s,R,Be="";const G={p:0,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,ol:0,ul:0,li:1,a:2,strong:3,u:3,s:3,em:3,span:3,sup:3,sub:3},Y={settings:{utf8str:"",textattr:{},css:{width:"100%",minHeight:"30px"},matching:{strong:"bold",u:"underline",s:"strikethrough",em:"italic",a:"_link",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",ol:"ol",ul:"ul",li:"li",span:"style",p:"p",sup:"sup",sub:"sub"}}},X={};for(let ne in Y.settings.matching)X[Y.settings.matching[ne]]=ne;const fe=Object.keys(Ce);fe.sort(function(ne,re){return G[X[ne]]-G[X[re]]}),ye=[];for(let ne in fe)for(D in I=fe[ne],Ce[I])N=Ce[I][D].start,void 0===ye[N]&&(ye[N]=[]),ye[N].push({propname:I,proptype:"start"}),"_link"==ye[N][ye[N].length-1].propname?(ye[N][ye[N].length-1].href=Ce[I][D].href,void 0!==Ce[I][D].resid&&(ye[N][ye[N].length-1].resid=Ce[I][D].resid)):"style"==ye[N][ye[N].length-1].propname&&(ye[N][ye[N].length-1].css=Ce[I][D].css),N=Ce[I][D].end,void 0===ye[N]&&(ye[N]=[]),ye[N].push({propname:I,proptype:"end"});for(j=[],O=0;O<=Ee.length;O++){if(void 0!==ye[O]){for(_=[],R=[],s=ye[O].length-1;s>=0;s--)if("end"==ye[O][s].proptype&&"linebreak"!=ye[O][s].propname){for(;void 0!==(T=j.pop())&&(Be+="</"+X[T]+">",T!=ye[O][s].propname);)_.push(T);for(;void 0!==(T=_.pop());)j.push(T),Be+="<"+X[T]+">"}for(s in ye[O])if("start"==ye[O][s].proptype)if("linebreak"==ye[O][s].propname)Be+="<br/>";else if("_link"==ye[O][s].propname){j.push(ye[O][s].propname);let ne=ye[O][s].href;void 0===ne&&void 0!==ye[O][s].resid&&(ne="https://www.salsah.org/api/resources/"+ye[O][s].resid),Be+="<"+X[ye[O][s].propname]+' href="'+ne,void 0!==ye[O][s].resid?Be+='" class="salsah-link">':Be+='">'}else"style"==ye[O][s].propname?(j.push(ye[O][s].propname),Be+="<"+X[ye[O][s].propname]+' style="'+ye[O][s].css+'">'):(j.push(ye[O][s].propname),Be+="<"+X[ye[O][s].propname]+">")}O<Ee.length&&(Be+=Ee.charAt(O))}return Be=Be.replace(/\n/g,"<br/>"),Be=Be.replace(/\r/g,""),Be}(function(Ce){var Ee,Be,j="hasOwnProperty",N=/[\.\/]/,T=/\s*,\s*/,I=function(X,fe){return X-fe},D={n:{}},O=function(){for(var X=0,fe=this.length;fe>X;X++)if(void 0!==this[X])return this[X]},s=function(){for(var X=this.length;--X;)if(void 0!==this[X])return this[X]},R=Object.prototype.toString,G=String,Y=Array.isArray||function(X){return X instanceof Array||"[object Array]"==R.call(X)};eve=function(X,fe){var ne,re=Be,oe=Array.prototype.slice.call(arguments,2),he=eve.listeners(X),pe=0,V=[],W={},ee=[],ge=Ee;ee.firstDefined=O,ee.lastDefined=s,Ee=X,Be=0;for(var Se=0,Le=he.length;Le>Se;Se++)"zIndex"in he[Se]&&(V.push(he[Se].zIndex),he[Se].zIndex<0&&(W[he[Se].zIndex]=he[Se]));for(V.sort(I);V[pe]<0;)if(ne=W[V[pe++]],ee.push(ne.apply(fe,oe)),Be)return Be=re,ee;for(Se=0;Le>Se;Se++)if("zIndex"in(ne=he[Se]))if(ne.zIndex==V[pe]){if(ee.push(ne.apply(fe,oe)),Be)break;do{if((ne=W[V[++pe]])&&ee.push(ne.apply(fe,oe)),Be)break}while(ne)}else W[ne.zIndex]=ne;else if(ee.push(ne.apply(fe,oe)),Be)break;return Be=re,Ee=ge,ee},eve._events=D,eve.listeners=function(X){var fe,ne,re,oe,he,pe,V,W,ee=Y(X)?X:X.split(N),ge=D,Se=[ge],Le=[];for(oe=0,he=ee.length;he>oe;oe++){for(W=[],pe=0,V=Se.length;V>pe;pe++)for(ne=[(ge=Se[pe].n)[ee[oe]],ge["*"]],re=2;re--;)(fe=ne[re])&&(W.push(fe),Le=Le.concat(fe.f||[]));Se=W}return Le},eve.separator=function(X){X?(X="["+(X=G(X).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",N=new RegExp(X)):N=/[\.\/]/},eve.on=function(X,fe){if("function"!=typeof fe)return function(){};for(var ne=Y(X)?Y(X[0])?X:[X]:G(X).split(T),re=0,oe=ne.length;oe>re;re++)!function(he){for(var pe,V=Y(he)?he:G(he).split(N),W=D,ee=0,ge=V.length;ge>ee;ee++)W=(W=W.n).hasOwnProperty(V[ee])&&W[V[ee]]||(W[V[ee]]={n:{}});for(W.f=W.f||[],ee=0,ge=W.f.length;ge>ee;ee++)if(W.f[ee]==fe){pe=!0;break}!pe&&W.f.push(fe)}(ne[re]);return function(he){+he==+he&&(fe.zIndex=+he)}},eve.f=function(X){var fe=[].slice.call(arguments,1);return function(){eve.apply(null,[X,null].concat(fe).concat([].slice.call(arguments,0)))}},eve.stop=function(){Be=1},eve.nt=function(X){var fe=Y(Ee)?Ee.join("."):Ee;return X?new RegExp("(?:\\.|\\/|^)"+X+"(?:\\.|\\/|$)").test(fe):fe},eve.nts=function(){return Y(Ee)?Ee:Ee.split(N)},eve.off=eve.unbind=function(X,fe){if(X){var ne=Y(X)?Y(X[0])?X:[X]:G(X).split(T);if(ne.length>1)for(var re=0,oe=ne.length;oe>re;re++)eve.off(ne[re],fe);else{ne=Y(X)?X:G(X).split(N);var he,pe,V,W,ee,ge=[D],Se=[];for(re=0,oe=ne.length;oe>re;re++)for(W=0;W<ge.length;W+=V.length-2){if(V=[W,1],he=ge[W].n,"*"!=ne[re])he[ne[re]]&&(V.push(he[ne[re]]),Se.unshift({n:he,name:ne[re]}));else for(pe in he)he[j](pe)&&(V.push(he[pe]),Se.unshift({n:he,name:pe}));ge.splice.apply(ge,V)}for(re=0,oe=ge.length;oe>re;re++)for(he=ge[re];he.n;){if(fe){if(he.f){for(W=0,ee=he.f.length;ee>W;W++)if(he.f[W]==fe){he.f.splice(W,1);break}!he.f.length&&delete he.f}for(pe in he.n)if(he.n[j](pe)&&he.n[pe].f){var Le=he.n[pe].f;for(W=0,ee=Le.length;ee>W;W++)if(Le[W]==fe){Le.splice(W,1);break}!Le.length&&delete he.n[pe].f}}else for(pe in delete he.f,he.n)he.n[j](pe)&&he.n[pe].f&&delete he.n[pe].f;he=he.n}e:for(re=0,oe=Se.length;oe>re;re++){for(pe in(he=Se[re]).n[he.name].f)continue e;for(pe in he.n[he.name].n)continue e;delete he.n[he.name]}}}else eve._events=D={n:{}}},eve.once=function(X,fe){var ne=function(){return eve.off(X,ne),fe.apply(this,arguments)};return eve.on(X,ne)},eve.version="0.5.0",eve.toString=function(){return"You are running Eve 0.5.0"},"undefined"!=typeof module&&module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],function(){return eve}):Ce.eve=eve})(this),function(Ce,Ee){if("function"==typeof define&&define.amd)define(["eve"],function(ye){return Ee(Ce,ye)});else if("undefined"!=typeof exports){var Be=require("eve");module.exports=Ee(Ce,Be)}else Ee(Ce,Ce.eve)}(window||this,function(Ce,Ee){var j,N,T,_,I,D,O,R,G,Y,X,fe,ne,re,oe,he,pe,Be=(j=void 0===Ee?function(){}:Ee,T={},_=Ce.requestAnimationFrame||Ce.webkitRequestAnimationFrame||Ce.mozRequestAnimationFrame||Ce.oRequestAnimationFrame||Ce.msRequestAnimationFrame||function(V){return setTimeout(V,16,(new Date).getTime()),!0},I=Array.isArray||function(V){return V instanceof Array||"[object Array]"==Object.prototype.toString.call(V)},D=0,O="M"+(+new Date).toString(36),R=Date.now||function(){return+new Date},G=function(V){var W=this;if(null==V)return W.s;var ee=W.s-V;W.b+=W.dur*ee,W.B+=W.dur*ee,W.s=V},Y=function(V){return null==V?this.spd:void(this.spd=V)},X=function(V){var W=this;return null==V?W.dur:(W.s=W.s*V/W.dur,void(W.dur=V))},fe=function(){var V=this;delete T[V.id],V.update(),j("mina.stop."+V.id,V)},ne=function(){var V=this;V.pdif||(delete T[V.id],V.update(),V.pdif=V.get()-V.b)},re=function(){var V=this;V.pdif&&(V.b=V.get()-V.pdif,delete V.pdif,T[V.id]=V,he())},oe=function(){var V,W=this;if(I(W.start)){V=[];for(var ee=0,ge=W.start.length;ge>ee;ee++)V[ee]=+W.start[ee]+(W.end[ee]-W.start[ee])*W.easing(W.s)}else V=+W.start+(W.end-W.start)*W.easing(W.s);W.set(V)},he=function(V){if(V){var W=0;for(var ee in T)if(T.hasOwnProperty(ee)){var ge=T[ee],Se=ge.get();W++,ge.s=(Se-ge.b)/(ge.dur/ge.spd),ge.s>=1&&(delete T[ee],ge.s=1,W--,function(Le){setTimeout(function(){j("mina.finish."+Le.id,Le)})}(ge)),ge.update()}N=!!W&&_(he)}else N||(N=_(he))},(pe=function(V,W,ee,ge,Se,Le,Ne){var Qe={id:O+(D++).toString(36),start:V,end:W,b:ee,s:0,dur:ge-ee,spd:1,get:Se,set:Le,easing:Ne||pe.linear,status:G,speed:Y,duration:X,stop:fe,pause:ne,resume:re,update:oe};T[Qe.id]=Qe;var $e,ke=0;for($e in T)if(T.hasOwnProperty($e)&&2==++ke)break;return 1==ke&&he(),Qe}).time=R,pe.getById=function(V){return T[V]||null},pe.linear=function(V){return V},pe.easeout=function(V){return Math.pow(V,1.7)},pe.easein=function(V){return Math.pow(V,.48)},pe.easeinout=function(V){if(1==V)return 1;if(0==V)return 0;var W=.48-V/1.04,ee=Math.sqrt(.1734+W*W),ge=ee-W,Le=-ee-W,Qe=Math.pow(Math.abs(ge),1/3)*(0>ge?-1:1)+Math.pow(Math.abs(Le),1/3)*(0>Le?-1:1)+.5;return 3*(1-Qe)*Qe*Qe+Qe*Qe*Qe},pe.backin=function(V){if(1==V)return 1;var W=1.70158;return V*V*((W+1)*V-W)},pe.backout=function(V){if(0==V)return 0;var W=1.70158;return(V-=1)*V*((W+1)*V+W)+1},pe.elastic=function(V){return V==!!V?V:Math.pow(2,-10*V)*Math.sin((V-.075)*(2*Math.PI)/.3)+1},pe.bounce=function(V){var ee=7.5625,ge=2.75;return 1/ge>V?ee*V*V:2/ge>V?ee*(V-=1.5/ge)*V+.75:2.5/ge>V?ee*(V-=2.25/ge)*V+.9375:ee*(V-=2.625/ge)*V+.984375},Ce.mina=pe,pe),ye=function(j){function N(ie,be){if(ie){if(ie.nodeType)return ee(ie);if(_(ie,"array")&&N.set)return N.set.apply(N,ie);if(ie instanceof he)return ie;if(null==be)return ee(ie=Se.doc.querySelector(String(ie)))}return new W(ie=null==ie?"100%":ie,be=null==be?"100%":be)}function T(ie,be){if(be){if("#text"==ie&&(ie=Se.doc.createTextNode(be.text||be["#text"]||"")),"#comment"==ie&&(ie=Se.doc.createComment(be.text||be["#text"]||"")),"string"==typeof ie&&(ie=T(ie)),"string"==typeof be)return 1==ie.nodeType?"xlink:"==be.substring(0,6)?ie.getAttributeNS(xt,be.substring(6)):"xml:"==be.substring(0,4)?ie.getAttributeNS(Tt,be.substring(4)):ie.getAttribute(be):"text"==be?ie.nodeValue:null;if(1==ie.nodeType){for(var Te in be)if(be[Le](Te)){var je=Ne(be[Te]);je?"xlink:"==Te.substring(0,6)?ie.setAttributeNS(xt,Te.substring(6),je):"xml:"==Te.substring(0,4)?ie.setAttributeNS(Tt,Te.substring(4),je):ie.setAttribute(Te,je):ie.removeAttribute(Te)}}else"text"in be&&(ie.nodeValue=be.text)}else ie=Se.doc.createElementNS(Tt,ie);return ie}function _(ie,be){return"finite"==(be=Ne.prototype.toLowerCase.call(be))?isFinite(ie):!("array"!=be||!(ie instanceof Array||Array.isArray&&Array.isArray(ie)))||("null"==be&&null===ie||be==typeof ie&&null!==ie||"object"==be&&ie===Object(ie)||st.call(ie).slice(8,-1).toLowerCase()==be)}function D(ie,be){for(var Te=0,je=ie.length;je>Te;Te++)if(ie[Te]===be)return ie.push(ie.splice(Te,1)[0])}function O(ie,be,Te){return function je(){var Ge=Array.prototype.slice.call(arguments,0),H=Ge.join("\u2400"),z=je.cache=je.cache||{},q=je.count=je.count||[];return z[Le](H)?(D(q,H),Te?Te(z[H]):z[H]):(q.length>=1e3&&delete z[q.shift()],q.push(H),z[H]=ie.apply(be,Ge),Te?Te(z[H]):z[H])}}function R(ie){return ie%360*qe/180}function ne(ie){return ie.node.ownerSVGElement&&ee(ie.node.ownerSVGElement)||N.select("svg")}function oe(ie){_(ie,"array")||(ie=Array.prototype.slice.call(arguments,0));for(var be=0,Te=0,je=this.node;this[be];)delete this[be++];for(be=0;be<ie.length;be++)"set"==ie[be].type?ie[be].forEach(function(H){je.appendChild(H.node)}):je.appendChild(ie[be].node);var Ge=je.childNodes;for(be=0;be<Ge.length;be++)this[Te++]=ee(Ge[be]);return this}function he(ie){if(ie.snap in Wt)return Wt[ie.snap];var be;try{be=ie.ownerSVGElement}catch(Ge){}this.node=ie,be&&(this.paper=new W(be)),this.type=ie.tagName||ie.nodeName;var Te=this.id=Lt(this);if(this.anims={},this._={transform:[]},ie.snap=Te,Wt[Te]=this,"g"==this.type&&(this.add=oe),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var je in W.prototype)W.prototype[Le](je)&&(this[je]=W.prototype[je])}function pe(ie){this.node=ie}function V(ie,be){var Te=T(ie);return be.appendChild(Te),ee(Te)}function W(ie,be){var Te,je,Ge,H=W.prototype;if(ie&&ie.tagName&&"svg"==ie.tagName.toLowerCase()){if(ie.snap in Wt)return Wt[ie.snap];var z=ie.ownerDocument;for(var q in Te=new he(ie),je=ie.getElementsByTagName("desc")[0],Ge=ie.getElementsByTagName("defs")[0],je||((je=T("desc")).appendChild(z.createTextNode("Created with Snap")),Te.node.appendChild(je)),Ge||(Ge=T("defs"),Te.node.appendChild(Ge)),Te.defs=Ge,H)H[Le](q)&&(Te[q]=H[q]);Te.paper=Te.root=Te}else T((Te=V("svg",Se.doc.body)).node,{height:be,version:1.1,width:ie,xmlns:Tt});return Te}function ee(ie){return ie&&(ie instanceof he||ie instanceof pe?ie:ie.tagName&&"svg"==ie.tagName.toLowerCase()?new W(ie):ie.tagName&&"object"==ie.tagName.toLowerCase()&&"image/svg+xml"==ie.type?new W(ie.contentDocument.getElementsByTagName("svg")[0]):new he(ie))}function ge(ie,be){for(var Te=0,je=ie.length;je>Te;Te++){var Ge={type:ie[Te].type,attr:ie[Te].attr()},H=ie[Te].children();be.push(Ge),H.length&&ge(H,Ge.childNodes=[])}}N.version="0.5.1",N.toString=function(){return"Snap v"+this.version},N._={};var Se={win:j.window,doc:j.window.document};N._.glob=Se;var ie,be,Le="hasOwnProperty",Ne=String,Qe=parseFloat,$e=parseInt,ke=Math,se=ke.max,me=ke.min,_e=ke.abs,qe=(ke.pow,ke.PI),Ze=(ke.round,""),st=Object.prototype.toString,yt=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,vt=(N._.separator=/[,\s]+/,/[\s]*,[\s]*/),Kt={hs:1,rg:1},Mt=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,tt=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,ot=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,dt=0,ht="S"+(+new Date).toString(36),Lt=function(ie){return(ie&&ie.type?ie.type:Ze)+ht+(dt++).toString(36)},xt="http://www.w3.org/1999/xlink",Tt="http://www.w3.org/2000/svg",Wt={};N.url=function(ie){return"url('#"+ie+"')"},N._.$=T,N._.id=Lt,N.format=(ie=/\{([^\}]+)\}/g,be=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(je,Ge){return Ne(je).replace(ie,function(H,z){return function(je,Ge,H){var z=H;return Ge.replace(be,function(q,ue,le,Z,ae){ue=ue||Z,z&&(ue in z&&(z=z[ue]),"function"==typeof z&&ae&&(z=z()))}),z=(null==z||z==H?je:z)+""}(H,z,Ge)})}),N._.clone=function I(ie){if("function"==typeof ie||Object(ie)!==ie)return ie;var be=new ie.constructor;for(var Te in ie)ie[Le](Te)&&(be[Te]=I(ie[Te]));return be},N._.cacher=O,N.rad=R,N.deg=function G(ie){return 180*ie/qe%360},N.sin=function(ie){return ke.sin(N.rad(ie))},N.tan=function(ie){return ke.tan(N.rad(ie))},N.cos=function(ie){return ke.cos(N.rad(ie))},N.asin=function(ie){return N.deg(ke.asin(ie))},N.acos=function(ie){return N.deg(ke.acos(ie))},N.atan=function(ie){return N.deg(ke.atan(ie))},N.atan2=function(ie){return N.deg(ke.atan2(ie))},N.angle=function s(ie,be,Te,je,Ge,H){if(null==Ge){var z=ie-Te,q=be-je;return z||q?(180+180*ke.atan2(-q,-z)/qe+360)%360:0}return s(ie,be,Ge,H)-s(Te,je,Ge,H)},N.len=function(ie,be,Te,je){return Math.sqrt(N.len2(ie,be,Te,je))},N.len2=function(ie,be,Te,je){return(ie-Te)*(ie-Te)+(be-je)*(be-je)},N.closestPoint=function(ie,be,Te){function je(Xe){var et=Xe.x-be,Je=Xe.y-Te;return et*et+Je*Je}for(var Ge,H,z,q,ue=ie.node,le=ue.getTotalLength(),Z=le/ue.pathSegList.numberOfItems*.125,ae=1/0,xe=0;le>=xe;xe+=Z)(q=je(z=ue.getPointAtLength(xe)))<ae&&(Ge=z,H=xe,ae=q);for(Z*=.5;Z>.5;){var Fe,Ae,Me,Ie,Re,Oe;(Me=H-Z)>=0&&(Re=je(Fe=ue.getPointAtLength(Me)))<ae?(Ge=Fe,H=Me,ae=Re):(Ie=H+Z)<=le&&(Oe=je(Ae=ue.getPointAtLength(Ie)))<ae?(Ge=Ae,H=Ie,ae=Oe):Z*=.5}return{x:Ge.x,y:Ge.y,length:H,distance:Math.sqrt(ae)}},N.is=_,N.snapTo=function(ie,be,Te){if(Te=_(Te,"finite")?Te:10,_(ie,"array")){for(var je=ie.length;je--;)if(_e(ie[je]-be)<=Te)return ie[je]}else{var Ge=be%(ie=+ie);if(Te>Ge)return be-Ge;if(Ge>ie-Te)return be-Ge+ie}return be},N.getRGB=O(function(ie){if(!ie||(ie=Ne(ie)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:hr};if("none"==ie)return{r:-1,g:-1,b:-1,hex:"none",toString:hr};if(!(Kt[Le](ie.toLowerCase().substring(0,2))||"#"==ie.charAt())&&(ie=St(ie)),!ie)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:hr};var be,Te,je,Ge,H,z,q=ie.match(yt);return q?(q[2]&&(je=$e(q[2].substring(5),16),Te=$e(q[2].substring(3,5),16),be=$e(q[2].substring(1,3),16)),q[3]&&(je=$e((H=q[3].charAt(3))+H,16),Te=$e((H=q[3].charAt(2))+H,16),be=$e((H=q[3].charAt(1))+H,16)),q[4]&&(z=q[4].split(vt),be=Qe(z[0]),"%"==z[0].slice(-1)&&(be*=2.55),Te=Qe(z[1]),"%"==z[1].slice(-1)&&(Te*=2.55),je=Qe(z[2]),"%"==z[2].slice(-1)&&(je*=2.55),"rgba"==q[1].toLowerCase().slice(0,4)&&(Ge=Qe(z[3])),z[3]&&"%"==z[3].slice(-1)&&(Ge/=100)),q[5]?(z=q[5].split(vt),be=Qe(z[0]),"%"==z[0].slice(-1)&&(be/=100),Te=Qe(z[1]),"%"==z[1].slice(-1)&&(Te/=100),je=Qe(z[2]),"%"==z[2].slice(-1)&&(je/=100),("deg"==z[0].slice(-3)||"\xb0"==z[0].slice(-1))&&(be/=360),"hsba"==q[1].toLowerCase().slice(0,4)&&(Ge=Qe(z[3])),z[3]&&"%"==z[3].slice(-1)&&(Ge/=100),N.hsb2rgb(be,Te,je,Ge)):q[6]?(z=q[6].split(vt),be=Qe(z[0]),"%"==z[0].slice(-1)&&(be/=100),Te=Qe(z[1]),"%"==z[1].slice(-1)&&(Te/=100),je=Qe(z[2]),"%"==z[2].slice(-1)&&(je/=100),("deg"==z[0].slice(-3)||"\xb0"==z[0].slice(-1))&&(be/=360),"hsla"==q[1].toLowerCase().slice(0,4)&&(Ge=Qe(z[3])),z[3]&&"%"==z[3].slice(-1)&&(Ge/=100),N.hsl2rgb(be,Te,je,Ge)):(be=me(ke.round(be),255),Te=me(ke.round(Te),255),je=me(ke.round(je),255),Ge=me(se(Ge,0),1),(q={r:be,g:Te,b:je,toString:hr}).hex="#"+(16777216|je|Te<<8|be<<16).toString(16).slice(1),q.opacity=_(Ge,"finite")?Ge:1,q)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:hr}},N),N.hsb=O(function(ie,be,Te){return N.hsb2rgb(ie,be,Te).hex}),N.hsl=O(function(ie,be,Te){return N.hsl2rgb(ie,be,Te).hex}),N.rgb=O(function(ie,be,Te,je){if(_(je,"finite")){var Ge=ke.round;return"rgba("+[Ge(ie),Ge(be),Ge(Te),+je.toFixed(2)]+")"}return"#"+(16777216|Te|be<<8|ie<<16).toString(16).slice(1)});var St=function(ie){var be=Se.doc.getElementsByTagName("head")[0]||Se.doc.getElementsByTagName("svg")[0],Te="rgb(255, 0, 0)";return(St=O(function(je){if("red"==je.toLowerCase())return Te;be.style.color=Te,be.style.color=je;var Ge=Se.doc.defaultView.getComputedStyle(be,Ze).getPropertyValue("color");return Ge==Te?null:Ge}))(ie)},_r=function(){return"hsb("+[this.h,this.s,this.b]+")"},Wr=function(){return"hsl("+[this.h,this.s,this.l]+")"},hr=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},$t=function(ie,be,Te){if(null==be&&_(ie,"object")&&"r"in ie&&"g"in ie&&"b"in ie&&(Te=ie.b,be=ie.g,ie=ie.r),null==be&&_(ie,string)){var je=N.getRGB(ie);ie=je.r,be=je.g,Te=je.b}return(ie>1||be>1||Te>1)&&(ie/=255,be/=255,Te/=255),[ie,be,Te]},Fr=function(ie,be,Te,je){var Ge={r:ie=ke.round(255*ie),g:be=ke.round(255*be),b:Te=ke.round(255*Te),opacity:_(je,"finite")?je:1,hex:N.rgb(ie,be,Te),toString:hr};return _(je,"finite")&&(Ge.opacity=je),Ge};N.color=function(ie){var be;return _(ie,"object")&&"h"in ie&&"s"in ie&&"b"in ie?(be=N.hsb2rgb(ie),ie.r=be.r,ie.g=be.g,ie.b=be.b,ie.opacity=1,ie.hex=be.hex):_(ie,"object")&&"h"in ie&&"s"in ie&&"l"in ie?(be=N.hsl2rgb(ie),ie.r=be.r,ie.g=be.g,ie.b=be.b,ie.opacity=1,ie.hex=be.hex):(_(ie,"string")&&(ie=N.getRGB(ie)),_(ie,"object")&&"r"in ie&&"g"in ie&&"b"in ie&&!("error"in ie)?(be=N.rgb2hsl(ie),ie.h=be.h,ie.s=be.s,ie.l=be.l,be=N.rgb2hsb(ie),ie.v=be.b):((ie={hex:"none"}).r=ie.g=ie.b=ie.h=ie.s=ie.v=ie.l=-1,ie.error=1)),ie.toString=hr,ie},N.hsb2rgb=function(ie,be,Te,je){var Ge,H,z,q,ue;return _(ie,"object")&&"h"in ie&&"s"in ie&&"b"in ie&&(Te=ie.b,be=ie.s,je=ie.o,ie=ie.h),Ge=H=z=Te-(ue=Te*be),Ge+=[ue,q=ue*(1-_e((ie=(ie*=360)%360/60)%2-1)),0,0,q,ue][ie=~~ie],H+=[q,ue,ue,q,0,0][ie],z+=[0,0,q,ue,ue,q][ie],Fr(Ge,H,z,je)},N.hsl2rgb=function(ie,be,Te,je){var Ge,H,z,q,ue;return _(ie,"object")&&"h"in ie&&"s"in ie&&"l"in ie&&(Te=ie.l,be=ie.s,ie=ie.h),(ie>1||be>1||Te>1)&&(ie/=360,be/=100,Te/=100),Ge=H=z=Te-(ue=2*be*(.5>Te?Te:1-Te))/2,Ge+=[ue,q=ue*(1-_e((ie=(ie*=360)%360/60)%2-1)),0,0,q,ue][ie=~~ie],H+=[q,ue,ue,q,0,0][ie],z+=[0,0,q,ue,ue,q][ie],Fr(Ge,H,z,je)},N.rgb2hsb=function(ie,be,Te){var H,z;return ie=(Te=$t(ie,be,Te))[0],be=Te[1],Te=Te[2],{h:((0==(z=(H=se(ie,be,Te))-me(ie,be,Te))?null:H==ie?(be-Te)/z:H==be?(Te-ie)/z+2:(ie-be)/z+4)+360)%6*60/360,s:0==z?0:z/H,b:H,toString:_r}},N.rgb2hsl=function(ie,be,Te){var H,z,q,ue;return ie=(Te=$t(ie,be,Te))[0],be=Te[1],Te=Te[2],H=((z=se(ie,be,Te))+(q=me(ie,be,Te)))/2,{h:((0==(ue=z-q)?null:z==ie?(be-Te)/ue:z==be?(Te-ie)/ue+2:(ie-be)/ue+4)+360)%6*60/360,s:0==ue?0:.5>H?ue/(2*H):ue/(2-2*H),l:H,toString:Wr}},N.parsePathString=function(ie){if(!ie)return null;var be=N.path(ie);if(be.arr)return N.path.clone(be.arr);var Te={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},je=[];return _(ie,"array")&&_(ie[0],"array")&&(je=N.path.clone(ie)),je.length||Ne(ie).replace(Mt,function(Ge,H,z){var q=[],ue=H.toLowerCase();if(z.replace(ot,function(le,Z){Z&&q.push(+Z)}),"m"==ue&&q.length>2&&(je.push([H].concat(q.splice(0,2))),ue="l",H="m"==H?"l":"L"),"o"==ue&&1==q.length&&je.push([H,q[0]]),"r"==ue)je.push([H].concat(q));else for(;q.length>=Te[ue]&&(je.push([H].concat(q.splice(0,Te[ue]))),Te[ue]););}),je.toString=N.path.toString,be.arr=N.path.clone(je),je};var We=N.parseTransformString=function(ie){if(!ie)return null;var be=[];return _(ie,"array")&&_(ie[0],"array")&&(be=N.path.clone(ie)),be.length||Ne(ie).replace(tt,function(Te,je,Ge){var H=[];je.toLowerCase(),Ge.replace(ot,function(z,q){q&&H.push(+q)}),be.push([je].concat(H))}),be.toString=N.path.toString,be};N._.svgTransform2string=function Y(ie){var be=[];return ie=ie.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(Te,je,Ge){return Ge=Ge.split(/\s*,\s*|\s+/),"rotate"==je&&1==Ge.length&&Ge.push(0,0),"scale"==je&&(Ge.length>2?Ge=Ge.slice(0,2):2==Ge.length&&Ge.push(0,0),1==Ge.length&&Ge.push(Ge[0],0,0)),"skewX"==je?be.push(["m",1,0,ke.tan(R(Ge[0])),1,0,0]):"skewY"==je?be.push(["m",1,ke.tan(R(Ge[0])),0,1,0,0]):be.push([je.charAt(0)].concat(Ge)),Te}),be},N._.rgTransform=/^[a-z][\s]*-?\.?\d/i,N._.transform2matrix=function X(ie,be){var Te=We(ie),je=new N.Matrix;if(Te)for(var Ge=0,H=Te.length;H>Ge;Ge++){var z,q,ue,le,Z,ae=Te[Ge],xe=ae.length,Fe=Ne(ae[0]).toLowerCase(),Ae=ae[0]!=Fe,Me=Ae?je.invert():0;"t"==Fe&&2==xe?je.translate(ae[1],0):"t"==Fe&&3==xe?Ae?(z=Me.x(0,0),q=Me.y(0,0),ue=Me.x(ae[1],ae[2]),le=Me.y(ae[1],ae[2]),je.translate(ue-z,le-q)):je.translate(ae[1],ae[2]):"r"==Fe?2==xe?(Z=Z||be,je.rotate(ae[1],Z.x+Z.width/2,Z.y+Z.height/2)):4==xe&&(Ae?(ue=Me.x(ae[2],ae[3]),le=Me.y(ae[2],ae[3]),je.rotate(ae[1],ue,le)):je.rotate(ae[1],ae[2],ae[3])):"s"==Fe?2==xe||3==xe?(Z=Z||be,je.scale(ae[1],ae[xe-1],Z.x+Z.width/2,Z.y+Z.height/2)):4==xe?Ae?(ue=Me.x(ae[2],ae[3]),le=Me.y(ae[2],ae[3]),je.scale(ae[1],ae[1],ue,le)):je.scale(ae[1],ae[1],ae[2],ae[3]):5==xe&&(Ae?(ue=Me.x(ae[3],ae[4]),le=Me.y(ae[3],ae[4]),je.scale(ae[1],ae[2],ue,le)):je.scale(ae[1],ae[2],ae[3],ae[4])):"m"==Fe&&7==xe&&je.add(ae[1],ae[2],ae[3],ae[4],ae[5],ae[6])}return je},N._unit2px=function re(ie,be,Te){function je(le){if(null==le)return Ze;if(le==+le)return le;T(ue,{width:le});try{return ue.getBBox().width}catch(Z){return 0}}function Ge(le){if(null==le)return Ze;if(le==+le)return le;T(ue,{height:le});try{return ue.getBBox().height}catch(Z){return 0}}function H(le,Z){null==be?q[le]=Z(ie.attr(le)||0):le==be&&(q=Z(null==Te?ie.attr(le)||0:Te))}var z=ne(ie).node,q={},ue=z.querySelector(".svg---mgr");switch(ue||(ue=T("rect"),T(ue,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),z.appendChild(ue)),ie.type){case"rect":H("rx",je),H("ry",Ge);case"image":H("width",je),H("height",Ge);case"text":H("x",je),H("y",Ge);break;case"circle":H("cx",je),H("cy",Ge),H("r",je);break;case"ellipse":H("cx",je),H("cy",Ge),H("rx",je),H("ry",Ge);break;case"line":H("x1",je),H("x2",je),H("y1",Ge),H("y2",Ge);break;case"marker":H("refX",je),H("markerWidth",je),H("refY",Ge),H("markerHeight",Ge);break;case"radialGradient":H("fx",je),H("fy",Ge);break;case"tspan":H("dx",je),H("dy",Ge);break;default:H(be,je)}return z.removeChild(ue),q},Se.doc.contains||Se.doc.compareDocumentPosition,N._.getSomeDefs=function fe(ie){var be=ie.node.ownerSVGElement&&ee(ie.node.ownerSVGElement)||ie.node.parentNode&&ee(ie.node.parentNode)||N.select("svg")||N(0,0),Te=be.select("defs"),je=null!=Te&&Te.node;return je||(je=V("defs",be.node).node),je},N._.getSomeSVG=ne,N.select=function(ie){return ie=Ne(ie).replace(/([^\\]):/g,"$1\\:"),ee(Se.doc.querySelector(ie))},N.selectAll=function(ie){for(var be=Se.doc.querySelectorAll(ie),Te=(N.set||Array)(),je=0;je<be.length;je++)Te.push(ee(be[je]));return Te},setInterval(function(){for(var ie in Wt)if(Wt[Le](ie)){var be=Wt[ie],Te=be.node;("svg"!=be.type&&!Te.ownerSVGElement||"svg"==be.type&&(!Te.parentNode||"ownerSVGElement"in Te.parentNode&&!Te.ownerSVGElement))&&delete Wt[ie]}},1e4),he.prototype.attr=function(ie,be){var Te=this,je=Te.node;if(!ie){if(1!=je.nodeType)return{text:je.nodeValue};for(var Ge=je.attributes,H={},z=0,q=Ge.length;q>z;z++)H[Ge[z].nodeName]=Ge[z].nodeValue;return H}if(_(ie,"string")){if(!(arguments.length>1))return Ee("snap.util.getattr."+ie,Te).firstDefined();var ue={};ue[ie]=be,ie=ue}for(var le in ie)ie[Le](le)&&Ee("snap.util.attr."+le,Te,ie[le]);return Te},N.parse=function(ie){var be=Se.doc.createDocumentFragment(),Te=!0,je=Se.doc.createElement("div");if((ie=Ne(ie)).match(/^\s*<\s*svg(?:\s|>)/)||(ie="<svg>"+ie+"</svg>",Te=!1),je.innerHTML=ie,ie=je.getElementsByTagName("svg")[0])if(Te)be=ie;else for(;ie.firstChild;)be.appendChild(ie.firstChild);return new pe(be)},N.fragment=function(){for(var ie=Array.prototype.slice.call(arguments,0),be=Se.doc.createDocumentFragment(),Te=0,je=ie.length;je>Te;Te++){var Ge=ie[Te];Ge.node&&Ge.node.nodeType&&be.appendChild(Ge.node),Ge.nodeType&&be.appendChild(Ge),"string"==typeof Ge&&be.appendChild(N.parse(Ge).node)}return new pe(be)},N._.make=V,N._.wrap=ee,W.prototype.el=function(ie,be){var Te=V(ie,this.node);return be&&Te.attr(be),Te},he.prototype.children=function(){for(var ie=[],be=this.node.childNodes,Te=0,je=be.length;je>Te;Te++)ie[Te]=N(be[Te]);return ie},he.prototype.toJSON=function(){var ie=[];return ge([this],ie),ie[0]},Ee.on("snap.util.getattr",function(){var ie=Ee.nt(),be=(ie=ie.substring(ie.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(Te){return"-"+Te.toLowerCase()});return Ke[Le](be)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(be):T(this.node,ie)});var Ke={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};Ee.on("snap.util.attr",function(ie){var be=Ee.nt(),Te={};Te[be=be.substring(be.lastIndexOf(".")+1)]=ie;var je=be.replace(/-(\w)/gi,function(H,z){return z.toUpperCase()}),Ge=be.replace(/[A-Z]/g,function(H){return"-"+H.toLowerCase()});Ke[Le](Ge)?this.node.style[je]=null==ie?Ze:ie:T(this.node,Te)}),W.prototype,N.ajax=function(ie,be,Te,je){var Ge=new XMLHttpRequest,H=Lt();if(Ge){if(_(be,"function"))je=Te,Te=be,be=null;else if(_(be,"object")){var z=[];for(var q in be)be.hasOwnProperty(q)&&z.push(encodeURIComponent(q)+"="+encodeURIComponent(be[q]));be=z.join("&")}return Ge.open(be?"POST":"GET",ie,!0),be&&(Ge.setRequestHeader("X-Requested-With","XMLHttpRequest"),Ge.setRequestHeader("Content-type","application/x-www-form-urlencoded")),Te&&(Ee.once("snap.ajax."+H+".0",Te),Ee.once("snap.ajax."+H+".200",Te),Ee.once("snap.ajax."+H+".304",Te)),Ge.onreadystatechange=function(){4==Ge.readyState&&Ee("snap.ajax."+H+"."+Ge.status,je,Ge)},4==Ge.readyState||Ge.send(be),Ge}},N.load=function(ie,be,Te){N.ajax(ie,function(je){var Ge=N.parse(je.responseText);Te?be.call(Te,Ge):be(Ge)})};return N.getElementByPoint=function(ie,be){var je=(this.canvas,Se.doc.elementFromPoint(ie,be));if(Se.win.opera&&"svg"==je.tagName){var Ge=function(ie){var be=ie.getBoundingClientRect(),Te=ie.ownerDocument,je=Te.body,Ge=Te.documentElement,H=Ge.clientTop||je.clientTop||0,z=Ge.clientLeft||je.clientLeft||0;return{y:be.top+(g.win.pageYOffset||Ge.scrollTop||je.scrollTop)-H,x:be.left+(g.win.pageXOffset||Ge.scrollLeft||je.scrollLeft)-z}}(je),H=je.createSVGRect();H.x=ie-Ge.x,H.y=be-Ge.y,H.width=H.height=1;var z=je.getIntersectionList(H,null);z.length&&(je=z[z.length-1])}return je?ee(je):null},N.plugin=function(ie){ie(N,he,W,Se,pe)},Se.win.Snap=N,N}(Ce||this);return ye.plugin(function(j,N,T,_,I){function D(W,ee){if(null==ee){var ge=!0;if(!(ee="linearGradient"==W.type||"radialGradient"==W.type?W.node.getAttribute("gradientTransform"):"pattern"==W.type?W.node.getAttribute("patternTransform"):W.node.getAttribute("transform")))return new j.Matrix;ee=j._.svgTransform2string(ee)}else ee=j._.rgTransform.test(ee)?Y(ee).replace(/\.{3}|\u2026/g,W._.transform||""):j._.svgTransform2string(ee),G(ee,"array")&&(ee=j.path?j.path.toString.call(ee):Y(ee)),W._.transform=ee;var Se=j._.transform2matrix(ee,W.getBBox(1));return ge?Se:void(W.matrix=Se)}function s(W){return function(){var ee=W?"<"+this.type:"",ge=this.node.attributes,Se=this.node.childNodes;if(W)for(var Le=0,Ne=ge.length;Ne>Le;Le++)ee+=" "+ge[Le].name+'="'+ge[Le].value.replace(/"/g,'\\"')+'"';if(Se.length){for(W&&(ee+=">"),Le=0,Ne=Se.length;Ne>Le;Le++)3==Se[Le].nodeType?ee+=Se[Le].nodeValue:1==Se[Le].nodeType&&(ee+=he(Se[Le]).toString());W&&(ee+="</"+this.type+">")}else W&&(ee+="/>");return ee}}var R=N.prototype,G=j.is,Y=String,X=j._unit2px,fe=j._.$,ne=j._.make,re=j._.getSomeDefs,oe="hasOwnProperty",he=j._.wrap;R.getBBox=function(W){if("tspan"==this.type)return j._.box(this.node.getClientRects().item(0));if(!j.Matrix||!j.path)return this.node.getBBox();var ee=this,ge=new j.Matrix;if(ee.removed)return j._.box();for(;"use"==ee.type;)if(W||(ge=ge.add(ee.transform().localMatrix.translate(ee.attr("x")||0,ee.attr("y")||0))),ee.original)ee=ee.original;else{var Se=ee.attr("xlink:href");ee=ee.original=ee.node.ownerDocument.getElementById(Se.substring(Se.indexOf("#")+1))}var Le=ee._,Ne=j.path.get[ee.type]||j.path.get.deflt;try{return W?(Le.bboxwt=Ne?j.path.getBBox(ee.realPath=Ne(ee)):j._.box(ee.node.getBBox()),j._.box(Le.bboxwt)):(ee.realPath=Ne(ee),ee.matrix=ee.transform().localMatrix,Le.bbox=j.path.getBBox(j.path.map(ee.realPath,ge.add(ee.matrix))),j._.box(Le.bbox))}catch(Qe){return j._.box()}};var pe=function(){return this.string};R.transform=function(W){var ee=this._;if(null==W){for(var ge,Se=this,Le=new j.Matrix(this.node.getCTM()),Ne=D(this),Qe=[Ne],$e=new j.Matrix,ke=Ne.toTransformString(),se=Y(Ne)==Y(this.matrix)?Y(ee.transform):ke;"svg"!=Se.type&&(Se=Se.parent());)Qe.push(D(Se));for(ge=Qe.length;ge--;)$e.add(Qe[ge]);return{string:se,globalMatrix:Le,totalMatrix:$e,localMatrix:Ne,diffMatrix:Le.clone().add(Ne.invert()),global:Le.toTransformString(),total:$e.toTransformString(),local:ke,toString:pe}}return W instanceof j.Matrix?(this.matrix=W,this._.transform=W.toTransformString()):D(this,W),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?fe(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?fe(this.node,{patternTransform:this.matrix}):fe(this.node,{transform:this.matrix})),this},R.parent=function(){return he(this.node.parentNode)},R.append=R.add=function(W){if(W){if("set"==W.type){var ee=this;return W.forEach(function(ge){ee.add(ge)}),this}W=he(W),this.node.appendChild(W.node),W.paper=this.paper}return this},R.appendTo=function(W){return W&&(W=he(W)).append(this),this},R.prepend=function(W){if(W){if("set"==W.type){var ee,ge=this;return W.forEach(function(Le){ee?ee.after(Le):ge.prepend(Le),ee=Le}),this}var Se=(W=he(W)).parent();this.node.insertBefore(W.node,this.node.firstChild),this.add&&this.add(),W.paper=this.paper,this.parent()&&this.parent().add(),Se&&Se.add()}return this},R.prependTo=function(W){return(W=he(W)).prepend(this),this},R.before=function(W){if("set"==W.type){var ee=this;return W.forEach(function(Se){var Le=Se.parent();ee.node.parentNode.insertBefore(Se.node,ee.node),Le&&Le.add()}),this.parent().add(),this}var ge=(W=he(W)).parent();return this.node.parentNode.insertBefore(W.node,this.node),this.parent()&&this.parent().add(),ge&&ge.add(),W.paper=this.paper,this},R.after=function(W){var ee=(W=he(W)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(W.node,this.node.nextSibling):this.node.parentNode.appendChild(W.node),this.parent()&&this.parent().add(),ee&&ee.add(),W.paper=this.paper,this},R.insertBefore=function(W){W=he(W);var ee=this.parent();return W.node.parentNode.insertBefore(this.node,W.node),this.paper=W.paper,ee&&ee.add(),W.parent()&&W.parent().add(),this},R.insertAfter=function(W){W=he(W);var ee=this.parent();return W.node.parentNode.insertBefore(this.node,W.node.nextSibling),this.paper=W.paper,ee&&ee.add(),W.parent()&&W.parent().add(),this},R.remove=function(){var W=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,W&&W.add(),this},R.select=function(W){return he(this.node.querySelector(W))},R.selectAll=function(W){for(var ee=this.node.querySelectorAll(W),ge=(j.set||Array)(),Se=0;Se<ee.length;Se++)ge.push(he(ee[Se]));return ge},R.asPX=function(W,ee){return null==ee&&(ee=this.attr(W)),+X(this,W,ee)},R.use=function(){var W,ee=this.node.id;return ee||(ee=this.id,fe(this.node,{id:ee})),W="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?ne(this.type,this.node.parentNode):ne("use",this.node.parentNode),fe(W.node,{"xlink:href":"#"+ee}),W.original=this,W},R.clone=function(){var W=he(this.node.cloneNode(!0));return fe(W.node,"id")&&fe(W.node,{id:W.id}),function O(W){function ee(st,yt){var vt=fe(st.node,yt);(vt=(vt=vt&&vt.match(Ne))&&vt[2])&&"#"==vt.charAt()&&(vt=vt.substring(1))&&($e[vt]=($e[vt]||[]).concat(function(Kt){var Mt={};Mt[yt]=j.url(Kt),fe(st.node,Mt)}))}function ge(st){var yt=fe(st.node,"xlink:href");yt&&"#"==yt.charAt()&&(yt=yt.substring(1))&&($e[yt]=($e[yt]||[]).concat(function(vt){st.attr("xlink:href","#"+vt)}))}for(var Se,Le=W.selectAll("*"),Ne=/^\s*url\(("|'|)(.*)\1\)\s*$/,Qe=[],$e={},ke=0,se=Le.length;se>ke;ke++){ee(Se=Le[ke],"fill"),ee(Se,"stroke"),ee(Se,"filter"),ee(Se,"mask"),ee(Se,"clip-path"),ge(Se);var me=fe(Se.node,"id");me&&(fe(Se.node,{id:Se.id}),Qe.push({old:me,id:Se.id}))}for(ke=0,se=Qe.length;se>ke;ke++){var _e=$e[Qe[ke].old];if(_e)for(var qe=0,Ze=_e.length;Ze>qe;qe++)_e[qe](Qe[ke].id)}}(W),W.insertAfter(this),W},R.toDefs=function(){return re(this).appendChild(this.node),this},R.pattern=R.toPattern=function(W,ee,ge,Se){var Le=ne("pattern",re(this));return null==W&&(W=this.getBBox()),G(W,"object")&&"x"in W&&(ee=W.y,ge=W.width,Se=W.height,W=W.x),fe(Le.node,{x:W,y:ee,width:ge,height:Se,patternUnits:"userSpaceOnUse",id:Le.id,viewBox:[W,ee,ge,Se].join(" ")}),Le.node.appendChild(this.node),Le},R.marker=function(W,ee,ge,Se,Le,Ne){var Qe=ne("marker",re(this));return null==W&&(W=this.getBBox()),G(W,"object")&&"x"in W&&(ee=W.y,ge=W.width,Se=W.height,Le=W.refX||W.cx,Ne=W.refY||W.cy,W=W.x),fe(Qe.node,{viewBox:[W,ee,ge,Se].join(" "),markerWidth:ge,markerHeight:Se,orient:"auto",refX:Le||0,refY:Ne||0,id:Qe.id}),Qe.node.appendChild(this.node),Qe};var V={};R.data=function(W,ee){var ge=V[this.id]=V[this.id]||{};if(0==arguments.length)return Ee("snap.data.get."+this.id,this,ge,null),ge;if(1==arguments.length){if(j.is(W,"object")){for(var Se in W)W[oe](Se)&&this.data(Se,W[Se]);return this}return Ee("snap.data.get."+this.id,this,ge[W],W),ge[W]}return ge[W]=ee,Ee("snap.data.set."+this.id,this,ee,W),this},R.removeData=function(W){return null==W?V[this.id]={}:V[this.id]&&delete V[this.id][W],this},R.outerSVG=R.toString=s(1),R.innerSVG=s(),R.toDataURL=function(){if(Ce&&Ce.btoa){var W=this.getBBox(),ee=j.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+W.x.toFixed(3),y:+W.y.toFixed(3),width:+W.width.toFixed(3),height:+W.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(ee)))}},I.prototype.select=R.select,I.prototype.selectAll=R.selectAll}),ye.plugin(function(j,N,T,_,I){function D(X,fe,ne){return function(re){var oe=re.slice(X,fe);return 1==oe.length&&(oe=oe[0]),ne?ne(oe):oe}}var O=N.prototype,s=j.is,R=String,G="hasOwnProperty",Y=function(X,fe,ne,re){"function"!=typeof ne||ne.length||(re=ne,ne=Be.linear),this.attr=X,this.dur=fe,ne&&(this.easing=ne),re&&(this.callback=re)};j._.Animation=Y,j.animation=function(X,fe,ne,re){return new Y(X,fe,ne,re)},O.inAnim=function(){var X=this,fe=[];for(var ne in X.anims)X.anims[G](ne)&&function(re){fe.push({anim:new Y(re._attrs,re.dur,re.easing,re._callback),mina:re,curStatus:re.status(),status:function(oe){return re.status(oe)},stop:function(){re.stop()}})}(X.anims[ne]);return fe},j.animate=function(X,fe,ne,re,oe,he){"function"!=typeof oe||oe.length||(he=oe,oe=Be.linear);var pe=Be.time(),V=Be(X,fe,pe,pe+re,Be.time,ne,oe);return he&&Ee.once("mina.finish."+V.id,he),V},O.stop=function(){for(var X=this.inAnim(),fe=0,ne=X.length;ne>fe;fe++)X[fe].stop();return this},O.animate=function(X,fe,ne,re){"function"!=typeof ne||ne.length||(re=ne,ne=Be.linear),X instanceof Y&&(re=X.callback,ne=X.easing,fe=X.dur,X=X.attr);var oe,he,pe,V,W=[],ee=[],ge={},Se=this;for(var Le in X)if(X[G](Le)){Se.equal?(oe=(V=Se.equal(Le,R(X[Le]))).from,he=V.to,pe=V.f):(oe=+Se.attr(Le),he=+X[Le]);var Ne=s(oe,"array")?oe.length:1;ge[Le]=D(W.length,W.length+Ne,pe),W=W.concat(oe),ee=ee.concat(he)}var Qe=Be.time(),$e=Be(W,ee,Qe,Qe+fe,Be.time,function(ke){var se={};for(var me in ge)ge[G](me)&&(se[me]=ge[me](ke));Se.attr(se)},ne);return Se.anims[$e.id]=$e,$e._attrs=X,$e._callback=re,Ee("snap.animcreated."+Se.id,$e),Ee.once("mina.finish."+$e.id,function(){Ee.off("mina.*."+$e.id),delete Se.anims[$e.id],re&&re.call(Se)}),Ee.once("mina.stop."+$e.id,function(){Ee.off("mina.*."+$e.id),delete Se.anims[$e.id]}),Se}}),ye.plugin(function(j,N,T,_,I){function D(Y,X,fe,ne,re,oe){return null==X&&"[object SVGMatrix]"==O.call(Y)?(this.a=Y.a,this.b=Y.b,this.c=Y.c,this.d=Y.d,this.e=Y.e,void(this.f=Y.f)):void(null!=Y?(this.a=+Y,this.b=+X,this.c=+fe,this.d=+ne,this.e=+re,this.f=+oe):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var O=Object.prototype.toString,s=String,R=Math;(function(Y){function X(ne){return ne[0]*ne[0]+ne[1]*ne[1]}function fe(ne){var re=R.sqrt(X(ne));ne[0]&&(ne[0]/=re),ne[1]&&(ne[1]/=re)}Y.add=function(ne,re,oe,he,pe,V){if(ne&&ne instanceof D)return this.add(ne.a,ne.b,ne.c,ne.d,ne.e,ne.f);var W=ne*this.a+re*this.c,ee=ne*this.b+re*this.d;return this.e+=pe*this.a+V*this.c,this.f+=pe*this.b+V*this.d,this.c=oe*this.a+he*this.c,this.d=oe*this.b+he*this.d,this.a=W,this.b=ee,this},D.prototype.multLeft=function(ne,re,oe,he,pe,V){if(ne&&ne instanceof D)return this.multLeft(ne.a,ne.b,ne.c,ne.d,ne.e,ne.f);var W=ne*this.a+oe*this.b,ee=ne*this.c+oe*this.d,ge=ne*this.e+oe*this.f+pe;return this.b=re*this.a+he*this.b,this.d=re*this.c+he*this.d,this.f=re*this.e+he*this.f+V,this.a=W,this.c=ee,this.e=ge,this},Y.invert=function(){var ne=this,re=ne.a*ne.d-ne.b*ne.c;return new D(ne.d/re,-ne.b/re,-ne.c/re,ne.a/re,(ne.c*ne.f-ne.d*ne.e)/re,(ne.b*ne.e-ne.a*ne.f)/re)},Y.clone=function(){return new D(this.a,this.b,this.c,this.d,this.e,this.f)},Y.translate=function(ne,re){return this.e+=ne*this.a+re*this.c,this.f+=ne*this.b+re*this.d,this},Y.scale=function(ne,re,oe,he){return null==re&&(re=ne),(oe||he)&&this.translate(oe,he),this.a*=ne,this.b*=ne,this.c*=re,this.d*=re,(oe||he)&&this.translate(-oe,-he),this},Y.rotate=function(ne,re,oe){ne=j.rad(ne),re=re||0,oe=oe||0;var he=+R.cos(ne).toFixed(9),pe=+R.sin(ne).toFixed(9);return this.add(he,pe,-pe,he,re,oe),this.add(1,0,0,1,-re,-oe)},Y.skewX=function(ne){return this.skew(ne,0)},Y.skewY=function(ne){return this.skew(0,ne)},Y.skew=function(ne,re){ne=ne||0,re=re||0,ne=j.rad(ne),re=j.rad(re);var oe=R.tan(ne).toFixed(9),he=R.tan(re).toFixed(9);return this.add(1,he,oe,1,0,0)},Y.x=function(ne,re){return ne*this.a+re*this.c+this.e},Y.y=function(ne,re){return ne*this.b+re*this.d+this.f},Y.get=function(ne){return+this[s.fromCharCode(97+ne)].toFixed(4)},Y.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},Y.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},Y.determinant=function(){return this.a*this.d-this.b*this.c},Y.split=function(){var ne={};ne.dx=this.e,ne.dy=this.f;var re=[[this.a,this.b],[this.c,this.d]];ne.scalex=R.sqrt(X(re[0])),fe(re[0]),ne.shear=re[0][0]*re[1][0]+re[0][1]*re[1][1],re[1]=[re[1][0]-re[0][0]*ne.shear,re[1][1]-re[0][1]*ne.shear],ne.scaley=R.sqrt(X(re[1])),fe(re[1]),ne.shear/=ne.scaley,this.determinant()<0&&(ne.scalex=-ne.scalex);var oe=re[0][1],he=re[1][1];return 0>he?(ne.rotate=j.deg(R.acos(he)),0>oe&&(ne.rotate=360-ne.rotate)):ne.rotate=j.deg(R.asin(oe)),ne.isSimple=!(+ne.shear.toFixed(9)||ne.scalex.toFixed(9)!=ne.scaley.toFixed(9)&&ne.rotate),ne.isSuperSimple=!+ne.shear.toFixed(9)&&ne.scalex.toFixed(9)==ne.scaley.toFixed(9)&&!ne.rotate,ne.noRotation=!+ne.shear.toFixed(9)&&!ne.rotate,ne},Y.toTransformString=function(ne){var re=ne||this.split();return+re.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(re.scalex=+re.scalex.toFixed(4),re.scaley=+re.scaley.toFixed(4),re.rotate=+re.rotate.toFixed(4),(re.dx||re.dy?"t"+[+re.dx.toFixed(4),+re.dy.toFixed(4)]:"")+(re.rotate?"r"+[+re.rotate.toFixed(4),0,0]:"")+(1!=re.scalex||1!=re.scaley?"s"+[re.scalex,re.scaley,0,0]:""))}})(D.prototype),j.Matrix=D,j.matrix=function(Y,X,fe,ne,re,oe){return new D(Y,X,fe,ne,re,oe)}}),ye.plugin(function(j,N,T,_,I){function D(ee){return function(ge){if(Ee.stop(),ge instanceof I&&1==ge.node.childNodes.length&&("radialGradient"==ge.node.firstChild.tagName||"linearGradient"==ge.node.firstChild.tagName||"pattern"==ge.node.firstChild.tagName)&&(ge=ge.node.firstChild,fe(this).appendChild(ge),ge=Y(ge)),ge instanceof N)if("radialGradient"==ge.type||"linearGradient"==ge.type||"pattern"==ge.type){ge.node.id||re(ge.node,{id:ge.id});var Se=oe(ge.node.id)}else Se=ge.attr(ee);else if((Se=j.color(ge)).error){var Le=j(fe(this).ownerSVGElement).gradient(ge);Le?(Le.node.id||re(Le.node,{id:Le.id}),Se=oe(Le.node.id)):Se=ge}else Se=he(Se);var Ne={};Ne[ee]=Se,re(this.node,Ne),this.node.style[ee]=V}}function O(ee){Ee.stop(),ee==+ee&&(ee+="px"),this.node.style.fontSize=ee}function s(ee){for(var ge=[],Se=ee.childNodes,Le=0,Ne=Se.length;Ne>Le;Le++){var Qe=Se[Le];3==Qe.nodeType&&ge.push(Qe.nodeValue),"tspan"==Qe.tagName&&(1==Qe.childNodes.length&&3==Qe.firstChild.nodeType?ge.push(Qe.firstChild.nodeValue):ge.push(s(Qe)))}return ge}function R(){return Ee.stop(),this.node.style.fontSize}var ee,G=j._.make,Y=j._.wrap,X=j.is,fe=j._.getSomeDefs,ne=/^url\((['"]?)([^)]+)\1\)$/,re=j._.$,oe=j.url,he=String,pe=j._.separator,V="";j.deurl=function(ee){var ge=String(ee).match(ne);return ge?ge[2]:ee},Ee.on("snap.util.attr.mask",function(ee){if(ee instanceof N||ee instanceof I){if(Ee.stop(),ee instanceof I&&1==ee.node.childNodes.length&&(ee=ee.node.firstChild,fe(this).appendChild(ee),ee=Y(ee)),"mask"==ee.type)var ge=ee;else(ge=G("mask",fe(this))).node.appendChild(ee.node);!ge.node.id&&re(ge.node,{id:ge.id}),re(this.node,{mask:oe(ge.id)})}}),ee=function(ee){if(ee instanceof N||ee instanceof I){Ee.stop();for(var ge,Se=ee.node;Se;){if("clipPath"===Se.nodeName){ge=new N(Se);break}if("svg"===Se.nodeName){ge=void 0;break}Se=Se.parentNode}ge||((ge=G("clipPath",fe(this))).node.appendChild(ee.node),!ge.node.id&&re(ge.node,{id:ge.id})),re(this.node,{"clip-path":oe(ge.node.id||ge.id)})}},Ee.on("snap.util.attr.clip",ee),Ee.on("snap.util.attr.clip-path",ee),Ee.on("snap.util.attr.clipPath",ee),Ee.on("snap.util.attr.fill",D("fill")),Ee.on("snap.util.attr.stroke",D("stroke"));var W=/^([lr])(?:\(([^)]*)\))?(.*)$/i;Ee.on("snap.util.grad.parse",function(ee){function ge(_e,qe){for(var Ze=(qe-ke)/(_e-se),st=se;_e>st;st++)Qe[st].offset=+(+ke+Ze*(st-se)).toFixed(2);se=_e,ke=qe}var Se=(ee=he(ee)).match(W);if(!Se)return null;var Le=Se[1],Ne=Se[2],Qe=Se[3];1==(Ne=Ne.split(/\s*,\s*/).map(function(_e){return+_e==_e?+_e:_e})).length&&0==Ne[0]&&(Ne=[]);var $e=(Qe=(Qe=Qe.split("-")).map(function(_e){var qe={color:(_e=_e.split(":"))[0]};return _e[1]&&(qe.offset=parseFloat(_e[1])),qe})).length,ke=0,se=0;$e--;for(var me=0;$e>me;me++)"offset"in Qe[me]&&ge(me,Qe[me].offset);return Qe[$e].offset=Qe[$e].offset||100,ge($e,Qe[$e].offset),{type:Le,params:Ne,stops:Qe}}),Ee.on("snap.util.attr.d",function(ee){Ee.stop(),X(ee,"array")&&X(ee[0],"array")&&(ee=j.path.toString.call(ee)),(ee=he(ee)).match(/[ruo]/i)&&(ee=j.path.toAbsolute(ee)),re(this.node,{d:ee})})(-1),Ee.on("snap.util.attr.#text",function(ee){Ee.stop(),ee=he(ee);for(var ge=_.doc.createTextNode(ee);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(ge)})(-1),Ee.on("snap.util.attr.path",function(ee){Ee.stop(),this.attr({d:ee})})(-1),Ee.on("snap.util.attr.class",function(ee){Ee.stop(),this.node.className.baseVal=ee})(-1),Ee.on("snap.util.attr.viewBox",function(ee){var ge;ge=X(ee,"object")&&"x"in ee?[ee.x,ee.y,ee.width,ee.height].join(" "):X(ee,"array")?ee.join(" "):ee,re(this.node,{viewBox:ge}),Ee.stop()})(-1),Ee.on("snap.util.attr.transform",function(ee){this.transform(ee),Ee.stop()})(-1),Ee.on("snap.util.attr.r",function(ee){"rect"==this.type&&(Ee.stop(),re(this.node,{rx:ee,ry:ee}))})(-1),Ee.on("snap.util.attr.textpath",function(ee){if(Ee.stop(),"text"==this.type){var ge,Se,Le;if(!ee&&this.textPath){for(Se=this.textPath;Se.node.firstChild;)this.node.appendChild(Se.node.firstChild);return Se.remove(),void delete this.textPath}if(X(ee,"string")){var Ne=fe(this),Qe=Y(Ne.parentNode).path(ee);Ne.appendChild(Qe.node),ge=Qe.id,Qe.attr({id:ge})}else(ee=Y(ee))instanceof N&&((ge=ee.attr("id"))||(ge=ee.id,ee.attr({id:ge})));if(ge)if(Se=this.textPath,Le=this.node,Se)Se.attr({"xlink:href":"#"+ge});else{for(Se=re("textPath",{"xlink:href":"#"+ge});Le.firstChild;)Se.appendChild(Le.firstChild);Le.appendChild(Se),this.textPath=Y(Se)}}})(-1),Ee.on("snap.util.attr.text",function(ee){if("text"==this.type){for(var ge=this.node,Se=function(Ne){var Qe=re("tspan");if(X(Ne,"array"))for(var $e=0;$e<Ne.length;$e++)Qe.appendChild(Se(Ne[$e]));else Qe.appendChild(_.doc.createTextNode(Ne));return Qe.normalize&&Qe.normalize(),Qe};ge.firstChild;)ge.removeChild(ge.firstChild);for(var Le=Se(ee);Le.firstChild;)ge.appendChild(Le.firstChild)}Ee.stop()})(-1),Ee.on("snap.util.attr.fontSize",O)(-1),Ee.on("snap.util.attr.font-size",O)(-1),Ee.on("snap.util.getattr.transform",function(){return Ee.stop(),this.transform()})(-1),Ee.on("snap.util.getattr.textpath",function(){return Ee.stop(),this.textPath})(-1),function(){function ee(Se){return function(){Ee.stop();var Le=_.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+Se);return"none"==Le?Le:j(_.doc.getElementById(Le.match(ne)[1]))}}function ge(Se){return function(Le){Ee.stop();var Ne="marker"+Se.charAt(0).toUpperCase()+Se.substring(1);if(""!=Le&&Le){if("marker"==Le.type){var Qe=Le.node.id;return Qe||re(Le.node,{id:Le.id}),void(this.node.style[Ne]=oe(Qe))}}else this.node.style[Ne]="none"}}Ee.on("snap.util.getattr.marker-end",ee("end"))(-1),Ee.on("snap.util.getattr.markerEnd",ee("end"))(-1),Ee.on("snap.util.getattr.marker-start",ee("start"))(-1),Ee.on("snap.util.getattr.markerStart",ee("start"))(-1),Ee.on("snap.util.getattr.marker-mid",ee("mid"))(-1),Ee.on("snap.util.getattr.markerMid",ee("mid"))(-1),Ee.on("snap.util.attr.marker-end",ge("end"))(-1),Ee.on("snap.util.attr.markerEnd",ge("end"))(-1),Ee.on("snap.util.attr.marker-start",ge("start"))(-1),Ee.on("snap.util.attr.markerStart",ge("start"))(-1),Ee.on("snap.util.attr.marker-mid",ge("mid"))(-1),Ee.on("snap.util.attr.markerMid",ge("mid"))(-1)}(),Ee.on("snap.util.getattr.r",function(){return"rect"==this.type&&re(this.node,"rx")==re(this.node,"ry")?(Ee.stop(),re(this.node,"rx")):void 0})(-1),Ee.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){Ee.stop();var ee=s(this.node);return 1==ee.length?ee[0]:ee}})(-1),Ee.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),Ee.on("snap.util.getattr.fill",function(ee){if(!ee){Ee.stop();var ge=Ee("snap.util.getattr.fill",this,!0).firstDefined();return j(j.deurl(ge))||ge}})(-1),Ee.on("snap.util.getattr.stroke",function(ee){if(!ee){Ee.stop();var ge=Ee("snap.util.getattr.stroke",this,!0).firstDefined();return j(j.deurl(ge))||ge}})(-1),Ee.on("snap.util.getattr.viewBox",function(){Ee.stop();var ee=re(this.node,"viewBox");return ee?(ee=ee.split(pe),j._.box(+ee[0],+ee[1],+ee[2],+ee[3])):void 0})(-1),Ee.on("snap.util.getattr.points",function(){var ee=re(this.node,"points");return Ee.stop(),ee?ee.split(pe):void 0})(-1),Ee.on("snap.util.getattr.path",function(){var ee=re(this.node,"d");return Ee.stop(),ee})(-1),Ee.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),Ee.on("snap.util.getattr.fontSize",R)(-1),Ee.on("snap.util.getattr.font-size",R)(-1)}),ye.plugin(function(j,N,T,_,I){var D=/\S+/g,O=String,s=N.prototype;s.addClass=function(R){var G,X,fe,ne=O(R||"").match(D)||[],re=this.node,oe=re.className.baseVal,he=oe.match(D)||[];if(ne.length){for(G=0;X=ne[G++];)~he.indexOf(X)||he.push(X);oe!=(fe=he.join(" "))&&(re.className.baseVal=fe)}return this},s.removeClass=function(R){var G,Y,X,fe,ne=O(R||"").match(D)||[],re=this.node,oe=re.className.baseVal,he=oe.match(D)||[];if(he.length){for(G=0;X=ne[G++];)~(Y=he.indexOf(X))&&he.splice(Y,1);oe!=(fe=he.join(" "))&&(re.className.baseVal=fe)}return this},s.hasClass=function(R){return!!~(this.node.className.baseVal.match(D)||[]).indexOf(R)},s.toggleClass=function(R,G){if(null!=G)return G?this.addClass(R):this.removeClass(R);var Y,X,fe,ne,re=(R||"").match(D)||[],oe=this.node,he=oe.className.baseVal,pe=he.match(D)||[];for(Y=0;fe=re[Y++];)~(X=pe.indexOf(fe))?pe.splice(X,1):pe.push(fe);return he!=(ne=pe.join(" "))&&(oe.className.baseVal=ne),this}}),ye.plugin(function(j,N,T,_,I){function D(X){return X}function O(X){return function(fe){return+fe.toFixed(3)+X}}var s={"+":function(X,fe){return X+fe},"-":function(X,fe){return X-fe},"/":function(X,fe){return X/fe},"*":function(X,fe){return X*fe}},R=String,G=/[a-z]+$/i,Y=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;Ee.on("snap.util.attr",function(X){var fe=R(X).match(Y);if(fe){var ne=Ee.nt(),re=ne.substring(ne.lastIndexOf(".")+1),oe=this.attr(re),he={};Ee.stop();var pe=fe[3]||"",V=oe.match(G),W=s[fe[1]];if(V&&V==pe?X=W(parseFloat(oe),+fe[2]):(oe=this.asPX(re),X=W(this.asPX(re),this.asPX(re,fe[2]+pe))),isNaN(oe)||isNaN(X))return;he[re]=X,this.attr(he)}})(-10),Ee.on("snap.util.equal",function(X,fe){var ne=R(this.attr(X)||""),re=R(fe).match(Y);if(re){Ee.stop();var oe=re[3]||"",he=ne.match(G),pe=s[re[1]];return he&&he==oe?{from:parseFloat(ne),to:pe(parseFloat(ne),+re[2]),f:O(he)}:{from:ne=this.asPX(X),to:pe(ne,this.asPX(X,re[2]+oe)),f:D}}})(-10)}),ye.plugin(function(j,N,T,_,I){var D=T.prototype,O=j.is;D.rect=function(R,G,Y,X,fe,ne){var re;return null==ne&&(ne=fe),O(R,"object")&&"[object Object]"==R?re=R:null!=R&&(re={x:R,y:G,width:Y,height:X},null!=fe&&(re.rx=fe,re.ry=ne)),this.el("rect",re)},D.circle=function(R,G,Y){var X;return O(R,"object")&&"[object Object]"==R?X=R:null!=R&&(X={cx:R,cy:G,r:Y}),this.el("circle",X)};var s=function(){function R(){this.parentNode.removeChild(this)}return function(G,Y){var X=_.doc.createElement("img"),fe=_.doc.body;X.style.cssText="position:absolute;left:-9999em;top:-9999em",X.onload=function(){Y.call(X),X.onload=X.onerror=null,fe.removeChild(X)},X.onerror=R,fe.appendChild(X),X.src=G}}();D.image=function(R,G,Y,X,fe){var ne=this.el("image");if(O(R,"object")&&"src"in R)ne.attr(R);else if(null!=R){var re={"xlink:href":R,preserveAspectRatio:"none"};null!=G&&null!=Y&&(re.x=G,re.y=Y),null!=X&&null!=fe?(re.width=X,re.height=fe):s(R,function(){j._.$(ne.node,{width:this.offsetWidth,height:this.offsetHeight})}),j._.$(ne.node,re)}return ne},D.ellipse=function(R,G,Y,X){var fe;return O(R,"object")&&"[object Object]"==R?fe=R:null!=R&&(fe={cx:R,cy:G,rx:Y,ry:X}),this.el("ellipse",fe)},D.path=function(R){var G;return O(R,"object")&&!O(R,"array")?G=R:R&&(G={d:R}),this.el("path",G)},D.group=D.g=function(R){var G=this.el("g");return 1==arguments.length&&R&&!R.type?G.attr(R):arguments.length&&G.add(Array.prototype.slice.call(arguments,0)),G},D.svg=function(R,G,Y,X,fe,ne,re,oe){var he={};return O(R,"object")&&null==G?he=R:(null!=R&&(he.x=R),null!=G&&(he.y=G),null!=Y&&(he.width=Y),null!=X&&(he.height=X),null!=fe&&null!=ne&&null!=re&&null!=oe&&(he.viewBox=[fe,ne,re,oe])),this.el("svg",he)},D.mask=function(R){var G=this.el("mask");return 1==arguments.length&&R&&!R.type?G.attr(R):arguments.length&&G.add(Array.prototype.slice.call(arguments,0)),G},D.ptrn=function(R,G,Y,X,fe,ne,re,oe){if(O(R,"object"))var he=R;else he={patternUnits:"userSpaceOnUse"},R&&(he.x=R),G&&(he.y=G),null!=Y&&(he.width=Y),null!=X&&(he.height=X),he.viewBox=null!=fe&&null!=ne&&null!=re&&null!=oe?[fe,ne,re,oe]:[R||0,G||0,Y||0,X||0];return this.el("pattern",he)},D.use=function(R){return null!=R?(R instanceof N&&(R.attr("id")||R.attr({id:j._.id(R)}),R=R.attr("id")),"#"==String(R).charAt()&&(R=R.substring(1)),this.el("use",{"xlink:href":"#"+R})):N.prototype.use.call(this)},D.symbol=function(R,G,Y,X){var fe={};return null!=R&&null!=G&&null!=Y&&null!=X&&(fe.viewBox=[R,G,Y,X]),this.el("symbol",fe)},D.text=function(R,G,Y){var X={};return O(R,"object")?X=R:null!=R&&(X={x:R,y:G,text:Y||""}),this.el("text",X)},D.line=function(R,G,Y,X){var fe={};return O(R,"object")?fe=R:null!=R&&(fe={x1:R,x2:Y,y1:G,y2:X}),this.el("line",fe)},D.polyline=function(R){arguments.length>1&&(R=Array.prototype.slice.call(arguments,0));var G={};return O(R,"object")&&!O(R,"array")?G=R:null!=R&&(G={points:R}),this.el("polyline",G)},D.polygon=function(R){arguments.length>1&&(R=Array.prototype.slice.call(arguments,0));var G={};return O(R,"object")&&!O(R,"array")?G=R:null!=R&&(G={points:R}),this.el("polygon",G)},function(){function R(){return this.selectAll("stop")}function G(he,pe){var V=oe("stop"),W={offset:+pe+"%"};he=j.color(he),W["stop-color"]=he.hex,he.opacity<1&&(W["stop-opacity"]=he.opacity),oe(V,W);for(var ee,ge=this.stops(),Se=0;Se<ge.length;Se++){if(parseFloat(ge[Se].attr("offset"))>pe){this.node.insertBefore(V,ge[Se].node),ee=!0;break}}return ee||this.node.appendChild(V),this}function Y(){if("linearGradient"==this.type){var he=oe(this.node,"x1")||0,pe=oe(this.node,"x2")||1,V=oe(this.node,"y1")||0,W=oe(this.node,"y2")||0;return j._.box(he,V,math.abs(pe-he),math.abs(W-V))}var ee=this.node.cx||.5,ge=this.node.cy||.5,Se=this.node.r||0;return j._.box(ee-Se,ge-Se,2*Se,2*Se)}function X(he){var pe=he,V=this.stops();if("string"==typeof he&&(pe=Ee("snap.util.grad.parse",null,"l(0,0,0,1)"+he).firstDefined().stops),j.is(pe,"array")){for(var W=0;W<V.length;W++)if(pe[W]){var ee=j.color(pe[W].color),ge={offset:pe[W].offset+"%"};ge["stop-color"]=ee.hex,ee.opacity<1&&(ge["stop-opacity"]=ee.opacity),V[W].attr(ge)}else V[W].remove();for(W=V.length;W<pe.length;W++)this.addStop(pe[W].color,pe[W].offset);return this}}function ne(he,pe,V,W,ee){var ge=j._.make("linearGradient",he);return ge.stops=R,ge.addStop=G,ge.getBBox=Y,ge.setStops=X,null!=pe&&oe(ge.node,{x1:pe,y1:V,x2:W,y2:ee}),ge}function re(he,pe,V,W,ee,ge){var Se=j._.make("radialGradient",he);return Se.stops=R,Se.addStop=G,Se.getBBox=Y,null!=pe&&oe(Se.node,{cx:pe,cy:V,r:W}),null!=ee&&null!=ge&&oe(Se.node,{fx:ee,fy:ge}),Se}var oe=j._.$;D.gradient=function(he){return function fe(he,pe){var V,W=Ee("snap.util.grad.parse",null,pe).firstDefined();if(!W)return null;W.params.unshift(he),V="l"==W.type.toLowerCase()?ne.apply(0,W.params):re.apply(0,W.params),W.type!=W.type.toLowerCase()&&oe(V.node,{gradientUnits:"userSpaceOnUse"});for(var ee=W.stops,ge=ee.length,Se=0;ge>Se;Se++){var Le=ee[Se];V.addStop(Le.color,Le.offset)}return V}(this.defs,he)},D.gradientLinear=function(he,pe,V,W){return ne(this.defs,he,pe,V,W)},D.gradientRadial=function(he,pe,V,W,ee){return re(this.defs,he,pe,V,W,ee)},D.toString=function(){var he,pe=this.node.ownerDocument,V=pe.createDocumentFragment(),W=pe.createElement("div"),ee=this.node.cloneNode(!0);return V.appendChild(W),W.appendChild(ee),j._.$(ee,{xmlns:"http://www.w3.org/2000/svg"}),he=W.innerHTML,V.removeChild(V.firstChild),he},D.toDataURL=function(){return Ce&&Ce.btoa?"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this))):void 0},D.clear=function(){for(var he,pe=this.node.firstChild;pe;)he=pe.nextSibling,"defs"!=pe.tagName?pe.parentNode.removeChild(pe):D.clear.call({node:pe}),pe=he}}()}),ye.plugin(function(j,N,T,_){function I(We){var Ke=I.ps=I.ps||{};return Ke[We]?Ke[We].sleep=100:Ke[We]={sleep:100},setTimeout(function(){for(var Pe in Ke)Ke[tt](Pe)&&Pe!=We&&(Ke[Pe].sleep--,!Ke[Pe].sleep&&delete Ke[Pe])}),Ke[We]}function D(We,Ke,Pe,ie){return null==We&&(We=Ke=Pe=ie=0),null==Ke&&(Ke=We.y,Pe=We.width,ie=We.height,We=We.x),{x:We,y:Ke,width:Pe,w:Pe,height:ie,h:ie,x2:We+Pe,y2:Ke+ie,cx:We+Pe/2,cy:Ke+ie/2,r1:ht.min(Pe,ie)/2,r2:ht.max(Pe,ie)/2,r0:ht.sqrt(Pe*Pe+ie*ie)/2,path:Ne(We,Ke,Pe,ie),vb:[We,Ke,Pe,ie].join(" ")}}function O(){return this.join(",").replace(ot,"$1")}function s(We){var Ke=Mt(We);return Ke.toString=O,Ke}function R(We,Ke,Pe,ie,be,Te,je,Ge,H){return null==H?oe(We,Ke,Pe,ie,be,Te,je,Ge):Y(We,Ke,Pe,ie,be,Te,je,Ge,function he(We,Ke,Pe,ie,be,Te,je,Ge,H){if(!(0>H||oe(We,Ke,Pe,ie,be,Te,je,Ge)<H)){var z,q=1,ue=q/2,le=q-ue,Z=.01;for(z=oe(We,Ke,Pe,ie,be,Te,je,Ge,le);St(z-H)>Z;)z=oe(We,Ke,Pe,ie,be,Te,je,Ge,le+=(H>z?1:-1)*(ue/=2));return le}}(We,Ke,Pe,ie,be,Te,je,Ge,H))}function G(We,Ke){function Pe(ie){return+(+ie).toFixed(3)}return j._.cacher(function(ie,be,Te){ie instanceof N&&(ie=ie.attr("d"));for(var je,Ge,H,z,q,ue="",le={},Z=0,ae=0,xe=(ie=Ze(ie)).length;xe>ae;ae++){if("M"==(H=ie[ae])[0])je=+H[1],Ge=+H[2];else{if(Z+(z=R(je,Ge,H[1],H[2],H[3],H[4],H[5],H[6]))>be){if(Ke&&!le.start){if(ue+=["C"+Pe((q=R(je,Ge,H[1],H[2],H[3],H[4],H[5],H[6],be-Z)).start.x),Pe(q.start.y),Pe(q.m.x),Pe(q.m.y),Pe(q.x),Pe(q.y)],Te)return ue;le.start=ue,ue=["M"+Pe(q.x),Pe(q.y)+"C"+Pe(q.n.x),Pe(q.n.y),Pe(q.end.x),Pe(q.end.y),Pe(H[5]),Pe(H[6])].join(),Z+=z,je=+H[5],Ge=+H[6];continue}if(!We&&!Ke)return R(je,Ge,H[1],H[2],H[3],H[4],H[5],H[6],be-Z)}Z+=z,je=+H[5],Ge=+H[6]}ue+=H.shift()+H}return le.end=ue,We?Z:Ke?le:Y(je,Ge,H[0],H[1],H[2],H[3],H[4],H[5],1)},null,j._.clone)}function Y(We,Ke,Pe,ie,be,Te,je,Ge,H){var z=1-H,q=Wt(z,3),ue=Wt(z,2),le=H*H,Z=le*H,Fe=We+2*H*(Pe-We)+le*(be-2*Pe+We),Ae=Ke+2*H*(ie-Ke)+le*(Te-2*ie+Ke),Me=Pe+2*H*(be-Pe)+le*(je-2*be+Pe),Ie=ie+2*H*(Te-ie)+le*(Ge-2*Te+ie);return{x:q*We+3*ue*H*Pe+3*z*H*H*be+Z*je,y:q*Ke+3*ue*H*ie+3*z*H*H*Te+Z*Ge,m:{x:Fe,y:Ae},n:{x:Me,y:Ie},start:{x:z*We+H*Pe,y:z*Ke+H*ie},end:{x:z*be+H*je,y:z*Te+H*Ge},alpha:90-180*ht.atan2(Fe-Me,Ae-Ie)/Lt}}function X(We,Ke,Pe,ie,be,Te,je,Ge){j.is(We,"array")||(We=[We,Ke,Pe,ie,be,Te,je,Ge]);var H=qe.apply(null,We);return D(H.min.x,H.min.y,H.max.x-H.min.x,H.max.y-H.min.y)}function fe(We,Ke,Pe){return Ke>=We.x&&Ke<=We.x+We.width&&Pe>=We.y&&Pe<=We.y+We.height}function ne(We,Ke){return We=D(We),fe(Ke=D(Ke),We.x,We.y)||fe(Ke,We.x2,We.y)||fe(Ke,We.x,We.y2)||fe(Ke,We.x2,We.y2)||fe(We,Ke.x,Ke.y)||fe(We,Ke.x2,Ke.y)||fe(We,Ke.x,Ke.y2)||fe(We,Ke.x2,Ke.y2)||(We.x<Ke.x2&&We.x>Ke.x||Ke.x<We.x2&&Ke.x>We.x)&&(We.y<Ke.y2&&We.y>Ke.y||Ke.y<We.y2&&Ke.y>We.y)}function re(We,Ke,Pe,ie,be){return We*(We*(-3*Ke+9*Pe-9*ie+3*be)+6*Ke-12*Pe+6*ie)-3*Ke+3*Pe}function oe(We,Ke,Pe,ie,be,Te,je,Ge,H){null==H&&(H=1);for(var z=(H=H>1?1:0>H?0:H)/2,ue=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],le=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Z=0,ae=0;12>ae;ae++){var xe=z*ue[ae]+z,Fe=re(xe,We,Pe,be,je),Ae=re(xe,Ke,ie,Te,Ge),Me=Fe*Fe+Ae*Ae;Z+=le[ae]*ht.sqrt(Me)}return z*Z}function pe(We,Ke,Pe,ie,be,Te,je,Ge){if(!(Tt(We,Pe)<xt(be,je)||xt(We,Pe)>Tt(be,je)||Tt(Ke,ie)<xt(Te,Ge)||xt(Ke,ie)>Tt(Te,Ge))){var q=(We-Pe)*(Te-Ge)-(Ke-ie)*(be-je);if(q){var ue=((We*ie-Ke*Pe)*(be-je)-(We-Pe)*(be*Ge-Te*je))/q,le=((We*ie-Ke*Pe)*(Te-Ge)-(Ke-ie)*(be*Ge-Te*je))/q,Z=+ue.toFixed(2),ae=+le.toFixed(2);if(!(Z<+xt(We,Pe).toFixed(2)||Z>+Tt(We,Pe).toFixed(2)||Z<+xt(be,je).toFixed(2)||Z>+Tt(be,je).toFixed(2)||ae<+xt(Ke,ie).toFixed(2)||ae>+Tt(Ke,ie).toFixed(2)||ae<+xt(Te,Ge).toFixed(2)||ae>+Tt(Te,Ge).toFixed(2)))return{x:ue,y:le}}}}function V(We,Ke,Pe){if(!ne(X(We),X(Ke)))return Pe?0:[];for(var Ge=~~(oe.apply(0,We)/8),H=~~(oe.apply(0,Ke)/8),z=[],q=[],ue={},le=Pe?0:[],Z=0;Ge+1>Z;Z++){var ae=Y.apply(0,We.concat(Z/Ge));z.push({x:ae.x,y:ae.y,t:Z/Ge})}for(Z=0;H+1>Z;Z++)ae=Y.apply(0,Ke.concat(Z/H)),q.push({x:ae.x,y:ae.y,t:Z/H});for(Z=0;Ge>Z;Z++)for(var xe=0;H>xe;xe++){var Fe=z[Z],Ae=z[Z+1],Me=q[xe],Ie=q[xe+1],Re=St(Ae.x-Fe.x)<.001?"y":"x",Oe=St(Ie.x-Me.x)<.001?"y":"x",Xe=pe(Fe.x,Fe.y,Ae.x,Ae.y,Me.x,Me.y,Ie.x,Ie.y);if(Xe){if(ue[Xe.x.toFixed(4)]==Xe.y.toFixed(4))continue;ue[Xe.x.toFixed(4)]=Xe.y.toFixed(4);var et=Fe.t+St((Xe[Re]-Fe[Re])/(Ae[Re]-Fe[Re]))*(Ae.t-Fe.t),Je=Me.t+St((Xe[Oe]-Me[Oe])/(Ie[Oe]-Me[Oe]))*(Ie.t-Me.t);et>=0&&1>=et&&Je>=0&&1>=Je&&(Pe?le++:le.push({x:Xe.x,y:Xe.y,t1:et,t2:Je}))}}return le}function ge(We,Ke,Pe){We=Ze(We),Ke=Ze(Ke);for(var ie,be,Te,je,Ge,H,z,q,ue,le,Z=Pe?0:[],ae=0,xe=We.length;xe>ae;ae++){var Fe=We[ae];if("M"==Fe[0])ie=Ge=Fe[1],be=H=Fe[2];else{"C"==Fe[0]?(ue=[ie,be].concat(Fe.slice(1)),ie=ue[6],be=ue[7]):(ue=[ie,be,ie,be,Ge,H,Ge,H],ie=Ge,be=H);for(var Ae=0,Me=Ke.length;Me>Ae;Ae++){var Ie=Ke[Ae];if("M"==Ie[0])Te=z=Ie[1],je=q=Ie[2];else{"C"==Ie[0]?(le=[Te,je].concat(Ie.slice(1)),Te=le[6],je=le[7]):(le=[Te,je,Te,je,z,q,z,q],Te=z,je=q);var Re=V(ue,le,Pe);if(Pe)Z+=Re;else{for(var Oe=0,Xe=Re.length;Xe>Oe;Oe++)Re[Oe].segment1=ae,Re[Oe].segment2=Ae,Re[Oe].bez1=ue,Re[Oe].bez2=le;Z=Z.concat(Re)}}}}}return Z}function Le(We){var Ke=I(We);if(Ke.bbox)return Mt(Ke.bbox);if(!We)return D();for(var Pe,ie=0,be=0,Te=[],je=[],Ge=0,H=(We=Ze(We)).length;H>Ge;Ge++)if("M"==(Pe=We[Ge])[0])ie=Pe[1],be=Pe[2],Te.push(ie),je.push(be);else{var z=qe(ie,be,Pe[1],Pe[2],Pe[3],Pe[4],Pe[5],Pe[6]);Te=Te.concat(z.min.x,z.max.x),je=je.concat(z.min.y,z.max.y),ie=Pe[5],be=Pe[6]}var q=xt.apply(0,Te),ue=xt.apply(0,je),ae=D(q,ue,Tt.apply(0,Te)-q,Tt.apply(0,je)-ue);return Ke.bbox=Mt(ae),ae}function Ne(We,Ke,Pe,ie,be){if(be)return[["M",+We+ +be,Ke],["l",Pe-2*be,0],["a",be,be,0,0,1,be,be],["l",0,ie-2*be],["a",be,be,0,0,1,-be,be],["l",2*be-Pe,0],["a",be,be,0,0,1,-be,-be],["l",0,2*be-ie],["a",be,be,0,0,1,be,-be],["z"]];var Te=[["M",We,Ke],["l",Pe,0],["l",0,ie],["l",-Pe,0],["z"]];return Te.toString=O,Te}function Qe(We,Ke,Pe,ie,be){if(null==be&&null==ie&&(ie=Pe),We=+We,Ke=+Ke,Pe=+Pe,ie=+ie,null!=be)var Te=Math.PI/180,je=We+Pe*Math.cos(-ie*Te),Ge=We+Pe*Math.cos(-be*Te),q=[["M",je,Ke+Pe*Math.sin(-ie*Te)],["A",Pe,Pe,0,+(be-ie>180),0,Ge,Ke+Pe*Math.sin(-be*Te)]];else q=[["M",We,Ke],["m",0,-ie],["a",Pe,ie,0,1,1,0,2*ie],["a",Pe,ie,0,1,1,0,-2*ie],["z"]];return q.toString=O,q}function ke(We){var Ke=I(We);if(Ke.abs)return s(Ke.abs);if(Kt(We,"array")&&Kt(We&&We[0],"array")||(We=j.parsePathString(We)),!We||!We.length)return[["M",0,0]];var Pe,ie=[],be=0,Te=0,je=0,Ge=0,H=0;"M"==We[0][0]&&(je=be=+We[0][1],Ge=Te=+We[0][2],H++,ie[0]=["M",be,Te]);for(var z,q,ue=3==We.length&&"M"==We[0][0]&&"R"==We[1][0].toUpperCase()&&"Z"==We[2][0].toUpperCase(),le=H,Z=We.length;Z>le;le++){if(ie.push(z=[]),(Pe=(q=We[le])[0])!=Pe.toUpperCase())switch(z[0]=Pe.toUpperCase(),z[0]){case"A":z[1]=q[1],z[2]=q[2],z[3]=q[3],z[4]=q[4],z[5]=q[5],z[6]=+q[6]+be,z[7]=+q[7]+Te;break;case"V":z[1]=+q[1]+Te;break;case"H":z[1]=+q[1]+be;break;case"R":for(var ae=[be,Te].concat(q.slice(1)),xe=2,Fe=ae.length;Fe>xe;xe++)ae[xe]=+ae[xe]+be,ae[++xe]=+ae[xe]+Te;ie.pop(),ie=ie.concat(yt(ae,ue));break;case"O":ie.pop(),(ae=Qe(be,Te,q[1],q[2])).push(ae[0]),ie=ie.concat(ae);break;case"U":ie.pop(),ie=ie.concat(Qe(be,Te,q[1],q[2],q[3])),z=["U"].concat(ie[ie.length-1].slice(-2));break;case"M":je=+q[1]+be,Ge=+q[2]+Te;default:for(xe=1,Fe=q.length;Fe>xe;xe++)z[xe]=+q[xe]+(xe%2?be:Te)}else if("R"==Pe)ae=[be,Te].concat(q.slice(1)),ie.pop(),ie=ie.concat(yt(ae,ue)),z=["R"].concat(q.slice(-2));else if("O"==Pe)ie.pop(),(ae=Qe(be,Te,q[1],q[2])).push(ae[0]),ie=ie.concat(ae);else if("U"==Pe)ie.pop(),ie=ie.concat(Qe(be,Te,q[1],q[2],q[3])),z=["U"].concat(ie[ie.length-1].slice(-2));else for(var Ae=0,Me=q.length;Me>Ae;Ae++)z[Ae]=q[Ae];if("O"!=(Pe=Pe.toUpperCase()))switch(z[0]){case"Z":be=+je,Te=+Ge;break;case"H":be=z[1];break;case"V":Te=z[1];break;case"M":je=z[z.length-2],Ge=z[z.length-1];default:be=z[z.length-2],Te=z[z.length-1]}}return ie.toString=O,Ke.abs=s(ie),ie}function se(We,Ke,Pe,ie){return[We,Ke,Pe,ie,Pe,ie]}function me(We,Ke,Pe,ie,be,Te){var je=.3333333333333333,Ge=2/3;return[je*We+Ge*Pe,je*Ke+Ge*ie,je*be+Ge*Pe,je*Te+Ge*ie,be,Te]}function _e(We,Ke,Pe,ie,be,Te,je,Ge,H,z){var q,ue=120*Lt/180,le=Lt/180*(+be||0),Z=[],ae=j._.cacher(function(sn,e,qr){return{x:sn*ht.cos(qr)-e*ht.sin(qr),y:sn*ht.sin(qr)+e*ht.cos(qr)}});if(!Pe||!ie)return[We,Ke,Ge,H,Ge,H];if(z)et=z[0],Je=z[1],Oe=z[2],Xe=z[3];else{We=(q=ae(We,Ke,-le)).x,Ke=q.y,Ge=(q=ae(Ge,H,-le)).x,H=q.y;var xe=(ht.cos(Lt/180*be),ht.sin(Lt/180*be),(We-Ge)/2),Fe=(Ke-H)/2,Ae=xe*xe/(Pe*Pe)+Fe*Fe/(ie*ie);Ae>1&&(Pe*=Ae=ht.sqrt(Ae),ie*=Ae);var Me=Pe*Pe,Ie=ie*ie,Re=(Te==je?-1:1)*ht.sqrt(St((Me*Ie-Me*Fe*Fe-Ie*xe*xe)/(Me*Fe*Fe+Ie*xe*xe))),Oe=Re*Pe*Fe/ie+(We+Ge)/2,Xe=Re*-ie*xe/Pe+(Ke+H)/2,et=ht.asin(((Ke-Xe)/ie).toFixed(9)),Je=ht.asin(((H-Xe)/ie).toFixed(9));0>(et=Oe>We?Lt-et:et)&&(et=2*Lt+et),0>(Je=Oe>Ge?Lt-Je:Je)&&(Je=2*Lt+Je),je&&et>Je&&(et-=2*Lt),!je&&Je>et&&(Je-=2*Lt)}var _t=Je-et;if(St(_t)>ue){var mt=Je,wt=Ge,At=H;Je=et+ue*(je&&Je>et?1:-1),Z=_e(Ge=Oe+Pe*ht.cos(Je),H=Xe+ie*ht.sin(Je),Pe,ie,be,0,je,wt,At,[Je,mt,Oe,Xe])}_t=Je-et;var Pt=ht.cos(et),Ot=ht.sin(et),tr=ht.cos(Je),pr=ht.sin(Je),Mr=ht.tan(_t/4),Lr=4/3*Pe*Mr,Ar=4/3*ie*Mr,J=[We,Ke],jr=[We+Lr*Ot,Ke-Ar*Pt],Er=[Ge+Lr*pr,H-Ar*tr],Gi=[Ge,H];if(jr[0]=2*J[0]-jr[0],jr[1]=2*J[1]-jr[1],z)return[jr,Er,Gi].concat(Z);for(var Kn=[],Qr=0,Jn=(Z=[jr,Er,Gi].concat(Z).join().split(",")).length;Jn>Qr;Qr++)Kn[Qr]=Qr%2?ae(Z[Qr-1],Z[Qr],le).y:ae(Z[Qr],Z[Qr+1],le).x;return Kn}function qe(We,Ke,Pe,ie,be,Te,je,Ge){for(var H,z,q,ue,le,Z,ae,xe,Fe=[],Ae=[[],[]],Me=0;2>Me;++Me)if(0==Me?(z=6*We-12*Pe+6*be,H=-3*We+9*Pe-9*be+3*je,q=3*Pe-3*We):(z=6*Ke-12*ie+6*Te,H=-3*Ke+9*ie-9*Te+3*Ge,q=3*ie-3*Ke),St(H)<1e-12){if(St(z)<1e-12)continue;(ue=-q/z)>0&&1>ue&&Fe.push(ue)}else ae=z*z-4*q*H,xe=ht.sqrt(ae),0>ae||((le=(-z+xe)/(2*H))>0&&1>le&&Fe.push(le),(Z=(-z-xe)/(2*H))>0&&1>Z&&Fe.push(Z));for(var Ie,Re=Fe.length,Oe=Re;Re--;)Ie=1-(ue=Fe[Re]),Ae[0][Re]=Ie*Ie*Ie*We+3*Ie*Ie*ue*Pe+3*Ie*ue*ue*be+ue*ue*ue*je,Ae[1][Re]=Ie*Ie*Ie*Ke+3*Ie*Ie*ue*ie+3*Ie*ue*ue*Te+ue*ue*ue*Ge;return Ae[0][Oe]=We,Ae[1][Oe]=Ke,Ae[0][Oe+1]=je,Ae[1][Oe+1]=Ge,Ae[0].length=Ae[1].length=Oe+2,{min:{x:xt.apply(0,Ae[0]),y:xt.apply(0,Ae[1])},max:{x:Tt.apply(0,Ae[0]),y:Tt.apply(0,Ae[1])}}}function Ze(We,Ke){var Pe=!Ke&&I(We);if(!Ke&&Pe.curve)return s(Pe.curve);for(var ie=ke(We),be=Ke&&ke(Ke),Te={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},je={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Ge=function(Re,Oe,Xe){var et,Je;if(!Re)return["C",Oe.x,Oe.y,Oe.x,Oe.y,Oe.x,Oe.y];switch(!(Re[0]in{T:1,Q:1})&&(Oe.qx=Oe.qy=null),Re[0]){case"M":Oe.X=Re[1],Oe.Y=Re[2];break;case"A":Re=["C"].concat(_e.apply(0,[Oe.x,Oe.y].concat(Re.slice(1))));break;case"S":"C"==Xe||"S"==Xe?(et=2*Oe.x-Oe.bx,Je=2*Oe.y-Oe.by):(et=Oe.x,Je=Oe.y),Re=["C",et,Je].concat(Re.slice(1));break;case"T":"Q"==Xe||"T"==Xe?(Oe.qx=2*Oe.x-Oe.qx,Oe.qy=2*Oe.y-Oe.qy):(Oe.qx=Oe.x,Oe.qy=Oe.y),Re=["C"].concat(me(Oe.x,Oe.y,Oe.qx,Oe.qy,Re[1],Re[2]));break;case"Q":Oe.qx=Re[1],Oe.qy=Re[2],Re=["C"].concat(me(Oe.x,Oe.y,Re[1],Re[2],Re[3],Re[4]));break;case"L":Re=["C"].concat(se(Oe.x,Oe.y,Re[1],Re[2]));break;case"H":Re=["C"].concat(se(Oe.x,Oe.y,Re[1],Oe.y));break;case"V":Re=["C"].concat(se(Oe.x,Oe.y,Oe.x,Re[1]));break;case"Z":Re=["C"].concat(se(Oe.x,Oe.y,Oe.X,Oe.Y))}return Re},H=function(Re,Oe){if(Re[Oe].length>7){Re[Oe].shift();for(var Xe=Re[Oe];Xe.length;)q[Oe]="A",be&&(ue[Oe]="A"),Re.splice(Oe++,0,["C"].concat(Xe.splice(0,6)));Re.splice(Oe,1),xe=Tt(ie.length,be&&be.length||0)}},z=function(Re,Oe,Xe,et,Je){Re&&Oe&&"M"==Re[Je][0]&&"M"!=Oe[Je][0]&&(Oe.splice(Je,0,["M",et.x,et.y]),Xe.bx=0,Xe.by=0,Xe.x=Re[Je][1],Xe.y=Re[Je][2],xe=Tt(ie.length,be&&be.length||0))},q=[],ue=[],le="",Z="",ae=0,xe=Tt(ie.length,be&&be.length||0);xe>ae;ae++){ie[ae]&&(le=ie[ae][0]),"C"!=le&&(q[ae]=le,ae&&(Z=q[ae-1])),ie[ae]=Ge(ie[ae],Te,Z),"A"!=q[ae]&&"C"==le&&(q[ae]="C"),H(ie,ae),be&&(be[ae]&&(le=be[ae][0]),"C"!=le&&(ue[ae]=le,ae&&(Z=ue[ae-1])),be[ae]=Ge(be[ae],je,Z),"A"!=ue[ae]&&"C"==le&&(ue[ae]="C"),H(be,ae)),z(ie,be,Te,je,ae),z(be,ie,je,Te,ae);var Fe=ie[ae],Ae=be&&be[ae],Me=Fe.length,Ie=be&&Ae.length;Te.x=Fe[Me-2],Te.y=Fe[Me-1],Te.bx=dt(Fe[Me-4])||Te.x,Te.by=dt(Fe[Me-3])||Te.y,je.bx=be&&(dt(Ae[Ie-4])||je.x),je.by=be&&(dt(Ae[Ie-3])||je.y),je.x=be&&Ae[Ie-2],je.y=be&&Ae[Ie-1]}return be||(Pe.curve=s(ie)),be?[ie,be]:ie}function yt(We,Ke){for(var Pe=[],ie=0,be=We.length;be-2*!Ke>ie;ie+=2){var Te=[{x:+We[ie-2],y:+We[ie-1]},{x:+We[ie],y:+We[ie+1]},{x:+We[ie+2],y:+We[ie+3]},{x:+We[ie+4],y:+We[ie+5]}];Ke?ie?be-4==ie?Te[3]={x:+We[0],y:+We[1]}:be-2==ie&&(Te[2]={x:+We[0],y:+We[1]},Te[3]={x:+We[2],y:+We[3]}):Te[0]={x:+We[be-2],y:+We[be-1]}:be-4==ie?Te[3]=Te[2]:ie||(Te[0]={x:+We[ie],y:+We[ie+1]}),Pe.push(["C",(-Te[0].x+6*Te[1].x+Te[2].x)/6,(-Te[0].y+6*Te[1].y+Te[2].y)/6,(Te[1].x+6*Te[2].x-Te[3].x)/6,(Te[1].y+6*Te[2].y-Te[3].y)/6,Te[2].x,Te[2].y])}return Pe}var vt=N.prototype,Kt=j.is,Mt=j._.clone,tt="hasOwnProperty",ot=/,?([a-z]),?/gi,dt=parseFloat,ht=Math,Lt=ht.PI,xt=ht.min,Tt=ht.max,Wt=ht.pow,St=ht.abs,_r=G(1),Wr=G(),hr=G(0,1),$t=j._unit2px,Fr={path:function(We){return We.attr("path")},circle:function(We){var Ke=$t(We);return Qe(Ke.cx,Ke.cy,Ke.r)},ellipse:function(We){var Ke=$t(We);return Qe(Ke.cx||0,Ke.cy||0,Ke.rx,Ke.ry)},rect:function(We){var Ke=$t(We);return Ne(Ke.x||0,Ke.y||0,Ke.width,Ke.height,Ke.rx,Ke.ry)},image:function(We){var Ke=$t(We);return Ne(Ke.x||0,Ke.y||0,Ke.width,Ke.height)},line:function(We){return"M"+[We.attr("x1")||0,We.attr("y1")||0,We.attr("x2"),We.attr("y2")]},polyline:function(We){return"M"+We.attr("points")},polygon:function(We){return"M"+We.attr("points")+"z"},deflt:function(We){var Ke=We.node.getBBox();return Ne(Ke.x,Ke.y,Ke.width,Ke.height)}};j.path=I,j.path.getTotalLength=_r,j.path.getPointAtLength=Wr,j.path.getSubpath=function(We,Ke,Pe){if(this.getTotalLength(We)-Pe<1e-6)return hr(We,Ke).end;var ie=hr(We,Pe,1);return Ke?hr(ie,Ke).end:ie},vt.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},vt.getPointAtLength=function(We){return Wr(this.attr("d"),We)},vt.getSubpath=function(We,Ke){return j.path.getSubpath(this.attr("d"),We,Ke)},j._.box=D,j.path.findDotsAtSegment=Y,j.path.bezierBBox=X,j.path.isPointInsideBBox=fe,j.closest=function(We,Ke,Pe,ie){for(var be=100,Te=D(We-be/2,Ke-be/2,be,be),je=[],Ge=Pe[0].hasOwnProperty("x")?function(xe){return{x:Pe[xe].x,y:Pe[xe].y}}:function(xe){return{x:Pe[xe],y:ie[xe]}},H=0;1e6>=be&&!H;){for(var z=0,q=Pe.length;q>z;z++){var ue=Ge(z);if(fe(Te,ue.x,ue.y)){H++,je.push(ue);break}}H||(Te=D(We-(be*=2)/2,Ke-be/2,be,be))}if(1e6!=be){var le,Z=1/0;for(z=0,q=je.length;q>z;z++){var ae=j.len(We,Ke,je[z].x,je[z].y);Z>ae&&(Z=ae,je[z].len=ae,le=je[z])}return le}},j.path.isBBoxIntersect=ne,j.path.intersection=function W(We,Ke){return ge(We,Ke)},j.path.intersectionNumber=function ee(We,Ke){return ge(We,Ke,1)},j.path.isPointInside=function Se(We,Ke,Pe){var ie=Le(We);return fe(ie,Ke,Pe)&&ge(We,[["M",Ke,Pe],["H",ie.x2+10]],1)%2==1},j.path.getBBox=Le,j.path.get=Fr,j.path.toRelative=function $e(We){var Ke=I(We),Pe=String.prototype.toLowerCase;if(Ke.rel)return s(Ke.rel);j.is(We,"array")&&j.is(We&&We[0],"array")||(We=j.parsePathString(We));var ie=[],be=0,Te=0,je=0,Ge=0,H=0;"M"==We[0][0]&&(je=be=We[0][1],Ge=Te=We[0][2],H++,ie.push(["M",be,Te]));for(var z=H,q=We.length;q>z;z++){var ue=ie[z]=[],le=We[z];if(le[0]!=Pe.call(le[0]))switch(ue[0]=Pe.call(le[0]),ue[0]){case"a":ue[1]=le[1],ue[2]=le[2],ue[3]=le[3],ue[4]=le[4],ue[5]=le[5],ue[6]=+(le[6]-be).toFixed(3),ue[7]=+(le[7]-Te).toFixed(3);break;case"v":ue[1]=+(le[1]-Te).toFixed(3);break;case"m":je=le[1],Ge=le[2];default:for(var Z=1,ae=le.length;ae>Z;Z++)ue[Z]=+(le[Z]-(Z%2?be:Te)).toFixed(3)}else{ue=ie[z]=[],"m"==le[0]&&(je=le[1]+be,Ge=le[2]+Te);for(var xe=0,Fe=le.length;Fe>xe;xe++)ie[z][xe]=le[xe]}var Ae=ie[z].length;switch(ie[z][0]){case"z":be=je,Te=Ge;break;case"h":be+=+ie[z][Ae-1];break;case"v":Te+=+ie[z][Ae-1];break;default:be+=+ie[z][Ae-2],Te+=+ie[z][Ae-1]}}return ie.toString=O,Ke.rel=s(ie),ie},j.path.toAbsolute=ke,j.path.toCubic=Ze,j.path.map=function st(We,Ke){if(!Ke)return We;var Pe,ie,be,Te,je,Ge,H;for(be=0,je=(We=Ze(We)).length;je>be;be++)for(Te=1,Ge=(H=We[be]).length;Ge>Te;Te+=2)Pe=Ke.x(H[Te],H[Te+1]),ie=Ke.y(H[Te],H[Te+1]),H[Te]=Pe,H[Te+1]=ie;return We},j.path.toString=O,j.path.clone=s}),ye.plugin(function(j,N,T,_){var I=Math.max,D=Math.min,O=function(R){if(this.items=[],this.bindings={},this.length=0,this.type="set",R)for(var G=0,Y=R.length;Y>G;G++)R[G]&&(this[this.items.length]=this.items[this.items.length]=R[G],this.length++)},s=O.prototype;s.push=function(){for(var R,G,Y=0,X=arguments.length;X>Y;Y++)(R=arguments[Y])&&(this[G=this.items.length]=this.items[G]=R,this.length++);return this},s.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},s.forEach=function(R,G){for(var Y=0,X=this.items.length;X>Y;Y++)if(!1===R.call(G,this.items[Y],Y))return this;return this},s.animate=function(R,G,Y,X){"function"!=typeof Y||Y.length||(X=Y,Y=Be.linear),R instanceof j._.Animation&&(X=R.callback,Y=R.easing,G=Y.dur,R=R.attr);var fe=arguments;if(j.is(R,"array")&&j.is(fe[fe.length-1],"array"))var ne=!0;var re,oe=function(){re?this.b=re:re=this.b},he=0,pe=this,V=X&&function(){++he==pe.length&&X.call(this)};return this.forEach(function(W,ee){Ee.once("snap.animcreated."+W.id,oe),ne?fe[ee]&&W.animate.apply(W,fe[ee]):W.animate(R,G,Y,V)})},s.remove=function(){for(;this.length;)this.pop().remove();return this},s.bind=function(R,G,Y){var X={};if("function"==typeof G)this.bindings[R]=G;else{var fe=Y||R;this.bindings[R]=function(ne){X[fe]=ne,G.attr(X)}}return this},s.attr=function(R){var G={};for(var Y in R)this.bindings[Y]?this.bindings[Y](R[Y]):G[Y]=R[Y];for(var X=0,fe=this.items.length;fe>X;X++)this.items[X].attr(G);return this},s.clear=function(){for(;this.length;)this.pop()},s.splice=function(R,G,Y){R=0>R?I(this.length+R,0):R,G=I(0,D(this.length-R,G));var X,fe=[],ne=[],re=[];for(X=2;X<arguments.length;X++)re.push(arguments[X]);for(X=0;G>X;X++)ne.push(this[R+X]);for(;X<this.length-R;X++)fe.push(this[R+X]);var oe=re.length;for(X=0;X<oe+fe.length;X++)this.items[R+X]=this[R+X]=oe>X?re[X]:fe[X-oe];for(X=this.items.length=this.length-=G-oe;this[X];)delete this[X++];return new O(ne)},s.exclude=function(R){for(var G=0,Y=this.length;Y>G;G++)if(this[G]==R)return this.splice(G,1),!0;return!1},s.insertAfter=function(R){for(var G=this.items.length;G--;)this.items[G].insertAfter(R);return this},s.getBBox=function(){for(var R=[],G=[],Y=[],X=[],fe=this.items.length;fe--;)if(!this.items[fe].removed){var ne=this.items[fe].getBBox();R.push(ne.x),G.push(ne.y),Y.push(ne.x+ne.width),X.push(ne.y+ne.height)}return{x:R=D.apply(0,R),y:G=D.apply(0,G),x2:Y=I.apply(0,Y),y2:X=I.apply(0,X),width:Y-R,height:X-G,cx:R+(Y-R)/2,cy:G+(X-G)/2}},s.clone=function(R){R=new O;for(var G=0,Y=this.items.length;Y>G;G++)R.push(this.items[G].clone());return R},s.toString=function(){return"Snap\u2018s set"},s.type="set",j.Set=O,j.set=function(){var R=new O;return arguments.length&&R.push.apply(R,Array.prototype.slice.call(arguments,0)),R}}),ye.plugin(function(j,N,T,_){function I(pe){var V=pe[0];switch(V.toLowerCase()){case"t":return[V,0,0];case"m":return[V,1,0,0,1,0,0];case"r":return 4==pe.length?[V,0,pe[2],pe[3]]:[V,0];case"s":return 5==pe.length?[V,1,1,pe[3],pe[4]]:3==pe.length?[V,1,1]:[V,1]}}function O(pe){return pe}function s(pe){return function(V){return+V.toFixed(3)+pe}}function R(pe){return pe.join(" ")}function G(pe){return j.rgb(pe[0],pe[1],pe[2],pe[3])}function Y(pe){var V,W,ee,ge,Se,Le,Ne=0,Qe=[];for(V=0,W=pe.length;W>V;V++){for(Se="[",Le=['"'+pe[V][0]+'"'],ee=1,ge=pe[V].length;ge>ee;ee++)Le[ee]="val["+Ne+++"]";Se+=Le+"]",Qe[V]=Se}return Function("val","return Snap.path.toString.call(["+Qe+"])")}function X(pe){for(var V=[],W=0,ee=pe.length;ee>W;W++)for(var ge=1,Se=pe[W].length;Se>ge;ge++)V.push(pe[W][ge]);return V}function fe(pe){return isFinite(pe)}var re={},oe=/[%a-z]+$/i,he=String;re.stroke=re.fill="colour",N.prototype.equal=function(pe,V){return Ee("snap.util.equal",this,pe,V).firstDefined()},Ee.on("snap.util.equal",function(pe,V){var W,ee,ge=he(this.attr(pe)||""),Se=this;if("colour"==re[pe])return W=j.color(ge),ee=j.color(V),{from:[W.r,W.g,W.b,W.opacity],to:[ee.r,ee.g,ee.b,ee.opacity],f:G};if("viewBox"==pe)return{from:W=this.attr(pe).vb.split(" ").map(Number),to:ee=V.split(" ").map(Number),f:R};if("transform"==pe||"gradientTransform"==pe||"patternTransform"==pe)return"string"==typeof V&&(V=he(V).replace(/\.{3}|\u2026/g,ge)),function D(pe,V,W){pe=pe||new j.Matrix,V=V||new j.Matrix,pe=j.parseTransformString(pe.toTransformString())||[],V=j.parseTransformString(V.toTransformString())||[];for(var ee,ge,Se,Le,Ne=Math.max(pe.length,V.length),Qe=[],$e=[],ke=0;Ne>ke;ke++){if(Se=pe[ke]||I(V[ke]),Le=V[ke]||I(Se),Se[0]!=Le[0]||"r"==Se[0].toLowerCase()&&(Se[2]!=Le[2]||Se[3]!=Le[3])||"s"==Se[0].toLowerCase()&&(Se[3]!=Le[3]||Se[4]!=Le[4])){pe=j._.transform2matrix(pe,W()),V=j._.transform2matrix(V,W()),Qe=[["m",pe.a,pe.b,pe.c,pe.d,pe.e,pe.f]],$e=[["m",V.a,V.b,V.c,V.d,V.e,V.f]];break}for(Qe[ke]=[],$e[ke]=[],ee=0,ge=Math.max(Se.length,Le.length);ge>ee;ee++)ee in Se&&(Qe[ke][ee]=Se[ee]),ee in Le&&($e[ke][ee]=Le[ee])}return{from:X(Qe),to:X($e),f:Y(Qe)}}(ge=this.matrix,V=j._.rgTransform.test(V)?j._.transform2matrix(V,this.getBBox()):j._.transform2matrix(j._.svgTransform2string(V),this.getBBox()),function(){return Se.getBBox(1)});if("d"==pe||"path"==pe)return{from:X((W=j.path.toCubic(ge,V))[0]),to:X(W[1]),f:Y(W[0])};if("points"==pe)return{from:W=he(ge).split(j._.separator),to:ee=he(V).split(j._.separator),f:function(Qe){return Qe}};if(fe(ge)&&fe(V))return{from:parseFloat(ge),to:parseFloat(V),f:O};var Le=ge.match(oe),Ne=he(V).match(oe);return Le&&function ne(pe,V){return!(!j.is(pe,"array")||!j.is(V,"array"))&&pe.toString()==V.toString()}(Le,Ne)?{from:parseFloat(ge),to:parseFloat(V),f:s(Le)}:{from:this.asPX(pe),to:this.asPX(pe,V),f:O}})}),ye.plugin(function(j,N,T,_){for(var I=N.prototype,O=("createTouch"in _.doc),s=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],R={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},G=function(V,W){var ee="y"==V?"scrollTop":"scrollLeft",ge=W&&W.node?W.node.ownerDocument:_.doc;return ge[ee in ge.documentElement?"documentElement":"body"][ee]},Y=function(){return this.originalEvent.preventDefault()},X=function(){return this.originalEvent.stopPropagation()},fe=function(V,W,ee,ge){var Se=O&&R[W]?R[W]:W,Le=function(Ne){var Qe=G("y",ge),$e=G("x",ge);if(O&&R.hasOwnProperty(W))for(var ke=0,se=Ne.targetTouches&&Ne.targetTouches.length;se>ke;ke++)if(Ne.targetTouches[ke].target==V||V.contains(Ne.targetTouches[ke].target)){var me=Ne;(Ne=Ne.targetTouches[ke]).originalEvent=me,Ne.preventDefault=Y,Ne.stopPropagation=X;break}var _e=Ne.clientX+$e,qe=Ne.clientY+Qe;return ee.call(ge,Ne,_e,qe)};return W!==Se&&V.addEventListener(W,Le,!1),V.addEventListener(Se,Le,!1),function(){return W!==Se&&V.removeEventListener(W,Le,!1),V.removeEventListener(Se,Le,!1),!0}},ne=[],re=function(V){for(var W,ee=V.clientX,ge=V.clientY,Se=G("y"),Le=G("x"),Ne=ne.length;Ne--;){if(W=ne[Ne],O){for(var Qe,$e=V.touches&&V.touches.length;$e--;)if((Qe=V.touches[$e]).identifier==W.el._drag.id||W.el.node.contains(Qe.target)){ee=Qe.clientX,ge=Qe.clientY,(V.originalEvent?V.originalEvent:V).preventDefault();break}}else V.preventDefault();var ke=W.el.node;ke.nextSibling,ke.parentNode,ke.style.display,ee+=Le,ge+=Se,Ee("snap.drag.move."+W.el.id,W.move_scope||W.el,ee-W.el._drag.x,ge-W.el._drag.y,ee,ge,V)}},oe=function(V){j.unmousemove(re).unmouseup(oe);for(var W,ee=ne.length;ee--;)(W=ne[ee]).el._drag={},Ee("snap.drag.end."+W.el.id,W.end_scope||W.start_scope||W.move_scope||W.el,V),Ee.off("snap.drag.*."+W.el.id);ne=[]},he=s.length;he--;)!function(V){j[V]=I[V]=function(W,ee){if(j.is(W,"function"))this.events=this.events||[],this.events.push({name:V,f:W,unbind:fe(this.node||document,V,W,ee||this)});else for(var ge=0,Se=this.events.length;Se>ge;ge++)if(this.events[ge].name==V)try{this.events[ge].f.call(this)}catch(Le){}return this},j["un"+V]=I["un"+V]=function(W){for(var ee=this.events||[],ge=ee.length;ge--;)if(ee[ge].name==V&&(ee[ge].f==W||!W))return ee[ge].unbind(),ee.splice(ge,1),!ee.length&&delete this.events,this;return this}}(s[he]);I.hover=function(V,W,ee,ge){return this.mouseover(V,ee).mouseout(W,ge||ee)},I.unhover=function(V,W){return this.unmouseover(V).unmouseout(W)};var pe=[];I.drag=function(V,W,ee,ge,Se,Le){function Ne(se,me,_e){(se.originalEvent||se).preventDefault(),$e._drag.x=me,$e._drag.y=_e,$e._drag.id=se.identifier,!ne.length&&j.mousemove(re).mouseup(oe),ne.push({el:$e,move_scope:ge,start_scope:Se,end_scope:Le}),W&&Ee.on("snap.drag.start."+$e.id,W),V&&Ee.on("snap.drag.move."+$e.id,V),ee&&Ee.on("snap.drag.end."+$e.id,ee),Ee("snap.drag.start."+$e.id,Se||ge||$e,me,_e,se)}function Qe(se,me,_e){Ee("snap.draginit."+$e.id,$e,se,me,_e)}var ke,$e=this;return arguments.length?(Ee.on("snap.draginit."+$e.id,Ne),$e._drag={},pe.push({el:$e,start:Ne,init:Qe}),$e.mousedown(Qe),$e):$e.drag(function(se,me){this.attr({transform:ke+(ke?"T":"t")+[se,me]})},function(){ke=this.transform().local})},I.undrag=function(){for(var V=pe.length;V--;)pe[V].el==this&&(this.unmousedown(pe[V].init),pe.splice(V,1),Ee.unbind("snap.drag.*."+this.id),Ee.unbind("snap.draginit."+this.id));return!pe.length&&j.unmousemove(re).unmouseup(oe),this}}),ye.plugin(function(j,N,T,_){var I=(N.prototype,T.prototype),D=/^\s*url\((.+)\)/,O=String,s=j._.$;j.filter={},I.filter=function(R){var G=this;"svg"!=G.type&&(G=G.paper);var Y=j.parse(O(R)),X=j._.id(),fe=(G.node.offsetWidth,G.node.offsetHeight,s("filter"));return s(fe,{id:X,filterUnits:"userSpaceOnUse"}),fe.appendChild(Y.node),G.defs.appendChild(fe),new N(fe)},Ee.on("snap.util.getattr.filter",function(){Ee.stop();var R=s(this.node,"filter");if(R){var G=O(R).match(D);return G&&j.select(G[1])}}),Ee.on("snap.util.attr.filter",function(R){if(R instanceof N&&"filter"==R.type){Ee.stop();var G=R.node.id;G||(s(R.node,{id:R.id}),G=R.id),s(this.node,{filter:j.url(G)})}R&&"none"!=R||(Ee.stop(),this.node.removeAttribute("filter"))}),j.filter.blur=function(R,G){null==R&&(R=2);var Y=null==G?R:[R,G];return j.format('<feGaussianBlur stdDeviation="{def}"/>',{def:Y})},j.filter.blur.toString=function(){return this()},j.filter.shadow=function(R,G,Y,X,fe){return null==fe&&(null==X?(fe=Y,Y=4,X="#000"):(fe=X,X=Y,Y=4)),null==Y&&(Y=4),null==fe&&(fe=1),null==R&&(R=0,G=2),null==G&&(G=R),X=j.color(X),j.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:X,dx:R,dy:G,blur:Y,opacity:fe})},j.filter.shadow.toString=function(){return this()},j.filter.grayscale=function(R){return null==R&&(R=1),j.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-R),b:.7152-.7152*(1-R),c:.0722-.0722*(1-R),d:.2126-.2126*(1-R),e:.7152+.2848*(1-R),f:.0722-.0722*(1-R),g:.2126-.2126*(1-R),h:.0722+.9278*(1-R)})},j.filter.grayscale.toString=function(){return this()},j.filter.sepia=function(R){return null==R&&(R=1),j.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-R),b:.769-.769*(1-R),c:.189-.189*(1-R),d:.349-.349*(1-R),e:.686+.314*(1-R),f:.168-.168*(1-R),g:.272-.272*(1-R),h:.534-.534*(1-R),i:.131+.869*(1-R)})},j.filter.sepia.toString=function(){return this()},j.filter.saturate=function(R){return null==R&&(R=1),j.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-R})},j.filter.saturate.toString=function(){return this()},j.filter.hueRotate=function(R){return R=R||0,j.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:R})},j.filter.hueRotate.toString=function(){return this()},j.filter.invert=function(R){return null==R&&(R=1),j.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:R,amount2:1-R})},j.filter.invert.toString=function(){return this()},j.filter.brightness=function(R){return null==R&&(R=1),j.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:R})},j.filter.brightness.toString=function(){return this()},j.filter.contrast=function(R){return null==R&&(R=1),j.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:R,amount2:.5-R/2})},j.filter.contrast.toString=function(){return this()}}),ye.plugin(function(j,N,T,_,I){var D=j._.box,O=j.is,s=/^[^a-z]*([tbmlrc])/i,R=function(){return"T"+this.dx+","+this.dy};N.prototype.getAlign=function(G,Y){null==Y&&O(G,"string")&&(Y=G,G=null);var X=(G=G||this.paper).getBBox?G.getBBox():D(G),fe=this.getBBox(),ne={};switch(Y=(Y=Y&&Y.match(s))?Y[1].toLowerCase():"c"){case"t":ne.dx=0,ne.dy=X.y-fe.y;break;case"b":ne.dx=0,ne.dy=X.y2-fe.y2;break;case"m":ne.dx=0,ne.dy=X.cy-fe.cy;break;case"l":ne.dx=X.x-fe.x,ne.dy=0;break;case"r":ne.dx=X.x2-fe.x2,ne.dy=0;break;default:ne.dx=X.cx-fe.cx,ne.dy=0}return ne.toString=R,ne},N.prototype.align=function(G,Y){return this.transform("..."+this.getAlign(G,Y))}}),ye.plugin(function(j,N,T,_){function I(Ne){Ne=Ne.split(/(?=#)/);var Qe=new String(Ne[5]);return Qe[50]=Ne[0],Qe[100]=Ne[1],Qe[200]=Ne[2],Qe[300]=Ne[3],Qe[400]=Ne[4],Qe[500]=Ne[5],Qe[600]=Ne[6],Qe[700]=Ne[7],Qe[800]=Ne[8],Qe[900]=Ne[9],Ne[10]&&(Qe.A100=Ne[10],Qe.A200=Ne[11],Qe.A400=Ne[12],Qe.A700=Ne[13]),Qe}j.mui={},j.flat={},j.mui.red=I("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),j.mui.pink=I("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),j.mui.purple=I("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),j.mui.deeppurple=I("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),j.mui.indigo=I("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),j.mui.blue=I("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),j.mui.lightblue=I("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),j.mui.cyan=I("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),j.mui.teal=I("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),j.mui.green=I("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),j.mui.lightgreen=I("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),j.mui.lime=I("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),j.mui.yellow=I("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),j.mui.amber=I("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),j.mui.orange=I("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),j.mui.deeporange=I("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),j.mui.brown=I("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),j.mui.grey=I("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),j.mui.bluegrey=I("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),j.flat.turquoise="#1abc9c",j.flat.greensea="#16a085",j.flat.sunflower="#f1c40f",j.flat.orange="#f39c12",j.flat.emerland="#2ecc71",j.flat.nephritis="#27ae60",j.flat.carrot="#e67e22",j.flat.pumpkin="#d35400",j.flat.peterriver="#3498db",j.flat.belizehole="#2980b9",j.flat.alizarin="#e74c3c",j.flat.pomegranate="#c0392b",j.flat.amethyst="#9b59b6",j.flat.wisteria="#8e44ad",j.flat.clouds="#ecf0f1",j.flat.silver="#bdc3c7",j.flat.wetasphalt="#34495e",j.flat.midnightblue="#2c3e50",j.flat.concrete="#95a5a6",j.flat.asbestos="#7f8c8d",j.importMUIColors=function(){for(var Ne in j.mui)j.mui.hasOwnProperty(Ne)&&(Ce[Ne]=j.mui[Ne])}}),ye}),function(Ce){if("object"==typeof exports)module.exports=Ce();else if("function"==typeof define&&define.amd)define(Ce);else{var Ee;"undefined"!=typeof window?Ee=window:"undefined"!=typeof global?Ee=global:"undefined"!=typeof self&&(Ee=self),Ee.rdfstore=Ce()}}(function(){return function Ce(Ee,Be,ye){function j(_,I){if(!Be[_]){if(!Ee[_]){var D="function"==typeof require&&require;if(!I&&D)return D(_,!0);if(N)return N(_,!0);throw Error("Cannot find module '"+_+"'")}D=Be[_]={exports:{}},Ee[_][0].call(D.exports,function(O){return j(Ee[_][1][O]||O)},D,D.exports,Ce,Ee,Be,ye)}return Be[_].exports}for(var N="function"==typeof require&&require,T=0;T<ye.length;T++)j(ye[T]);return j}({1:[function(Ce,Ee,Be){!function(){function ye(N){this.message=N}var j=void 0!==Be?Be:this;ye.prototype=Error(),ye.prototype.name="InvalidCharacterError",j.btoa||(j.btoa=function(N){for(var T,_,I=0,D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",O="";N.charAt(0|I)||(D="=",I%1);O+=D.charAt(63&T>>8-I%1*8)){if(255<(_=N.charCodeAt(I+=.75)))throw new ye("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");T=T<<8|_}return O}),j.atob||(j.atob=function(N){if((N=N.replace(/=+$/,"")).length%4==1)throw new ye("'atob' failed: The string to be decoded is not correctly encoded.");for(var _,I,T=0,D=0,O="";I=N.charAt(D++);~I&&(_=T%4?64*_+I:I,T++%4)?O+=String.fromCharCode(255&_>>(-2*T&6)):0)I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(I);return O})}()},{}],2:[function(Ce,Ee,Be){!function(ye){function j(T){return 43===(T=T.charCodeAt(0))||45===T?62:47===T||95===T?63:48>T?-1:58>T?T-48+52:91>T?T-65:123>T?T-97+26:void 0}var N="undefined"!=typeof Uint8Array?Uint8Array:Array;ye.toByteArray=function(T){function _(Y){R[G++]=Y}var I,D,O,s,R;if(0<T.length%4)throw Error("Invalid string. Length must be a multiple of 4");I=T.length,s="="===T.charAt(I-2)?2:"="===T.charAt(I-1)?1:0,R=new N(3*T.length/4-s),D=0<s?T.length-4:T.length;var G=0;for(I=0;I<D;I+=4)_((16711680&(O=j(T.charAt(I))<<18|j(T.charAt(I+1))<<12|j(T.charAt(I+2))<<6|j(T.charAt(I+3))))>>16),_((65280&O)>>8),_(255&O);return 2===s?_(255&(O=j(T.charAt(I))<<2|j(T.charAt(I+1))>>4)):1===s&&(_((O=j(T.charAt(I))<<10|j(T.charAt(I+1))<<4|j(T.charAt(I+2))>>2)>>8&255),_(255&O)),R},ye.fromByteArray=function(T){var _,O,s,I=T.length%3,D="";for(_=0,s=T.length-I;_<s;_+=3)O=(T[_]<<16)+(T[_+1]<<8)+T[_+2],D+=O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(O>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(O>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(O>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&O);switch(I){case 1:O=T[T.length-1],D+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(O>>2),D+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(O<<4&63),D+="==";break;case 2:O=(T[T.length-2]<<8)+T[T.length-1],D+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(O>>10),D+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(O>>4&63),D+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(O<<2&63),D+="="}return D}}(void 0===Be?this.base64js={}:Be)},{}],3:[function(Ce,Ee,Be){(function(ye,j){(function(){function N(tt){return"function"==typeof tt}function O(){return function(){setTimeout(s,1)}}function s(){for(var tt=0;tt<Qe;tt+=2)(0,st[tt])(st[tt+1]),st[tt]=void 0,st[tt+1]=void 0;Qe=0}function G(){}function ne(tt,ot){if(tt===ot)he(tt,new TypeError("You cannot resolve a promise with itself"));else if("function"==typeof ot||"object"==typeof ot&&null!==ot)if(ot.constructor===tt.constructor)!function fe(tt,ot){1===ot._state?oe(tt,ot._result):2===ot._state?he(tt,ot._result):pe(ot,void 0,function(dt){ne(tt,dt)},function(dt){he(tt,dt)})}(tt,ot);else{var dt;try{dt=ot.then}catch(ht){vt.error=ht,dt=vt}dt===vt?he(tt,vt.error):void 0===dt?oe(tt,ot):N(dt)?function X(tt,ot,dt){se(function(ht){var Lt=!1,xt=function Y(tt,ot,dt,ht){try{tt.call(ot,dt,ht)}catch(Lt){return Lt}}(dt,ot,function(Tt){Lt||(Lt=!0,ot!==Tt?ne(ht,Tt):oe(ht,Tt))},function(Tt){Lt||(Lt=!0,he(ht,Tt))},ht._label);!Lt&&xt&&(Lt=!0,he(ht,xt))},tt)}(tt,ot,dt):oe(tt,ot)}else oe(tt,ot)}function re(tt){tt._onerror&&tt._onerror(tt._result),V(tt)}function oe(tt,ot){void 0===tt._state&&(tt._result=ot,tt._state=1,0!==tt._subscribers.length&&se(V,tt))}function he(tt,ot){void 0===tt._state&&(tt._state=2,tt._result=ot,se(re,tt))}function pe(tt,ot,dt,ht){var Lt=tt._subscribers,xt=Lt.length;tt._onerror=null,Lt[xt]=ot,Lt[xt+1]=dt,Lt[xt+2]=ht,0===xt&&tt._state&&se(V,tt)}function V(tt){var ot=tt._subscribers,dt=tt._state;if(0!==ot.length){for(var ht,Lt,xt=tt._result,Tt=0;Tt<ot.length;Tt+=3)ht=ot[Tt],Lt=ot[Tt+dt],ht?ee(dt,ht,Lt,xt):Lt(xt);tt._subscribers.length=0}}function W(){this.error=null}function ee(tt,ot,dt,ht){var xt,Tt,Wt,St,Lt=N(dt);if(Lt){try{xt=dt(ht)}catch(_r){Kt.error=_r,xt=Kt}if(xt===Kt?(St=!0,Tt=xt.error,xt=null):Wt=!0,ot===xt)return void he(ot,new TypeError("A promises callback cannot return that same promise."))}else xt=ht,Wt=!0;void 0===ot._state&&(Lt&&Wt?ne(ot,xt):St?he(ot,Tt):1===tt?oe(ot,xt):2===tt&&he(ot,xt))}function Se(tt,ot){this._instanceConstructor=tt,this.promise=new tt(G),this._validateInput(ot)?(this._input=ot,this._remaining=this.length=ot.length,this._init(),0===this.length?oe(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&oe(this.promise,this._result))):he(this.promise,this._validationError())}function Le(tt){if(this._id=Mt++,this._result=this._state=void 0,this._subscribers=[],G!==tt){if(!N(tt))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof Le))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");!function ge(tt,ot){try{ot(function(dt){ne(tt,dt)},function(dt){he(tt,dt)})}catch(dt){he(tt,dt)}}(this,tt)}}var $e,ke,yt,Ne=Array.isArray?Array.isArray:function(tt){return"[object Array]"===Object.prototype.toString.call(tt)},Qe=0,se=function(tt,ot){st[Qe]=tt,st[Qe+1]=ot,2===(Qe+=2)&&(ke?ke(s):yt())},me="undefined"!=typeof window?window:void 0,_e=(qe=me||{}).MutationObserver||qe.WebKitMutationObserver,qe=void 0!==ye&&"[object process]"==={}.toString.call(ye),Ze="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,st=Array(1e3);yt=qe?function T(){var tt=ye.nextTick,ot=ye.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(ot)&&"0"===ot[1]&&"10"===ot[2]&&(tt=setImmediate),function(){tt(s)}}():_e?function I(){var tt=0,ot=new _e(s),dt=document.createTextNode("");return ot.observe(dt,{characterData:!0}),function(){dt.data=tt=++tt%2}}():Ze?function D(){var tt=new MessageChannel;return tt.port1.onmessage=s,function(){tt.port2.postMessage(0)}}():void 0===me&&"function"==typeof Ce?function R(){try{var tt=Ce("vertx");return $e=tt.runOnLoop||tt.runOnContext,function _(){return function(){$e(s)}}()}catch(ot){return O()}}():O();var vt=new W,Kt=new W;Se.prototype._validateInput=function(tt){return Ne(tt)},Se.prototype._validationError=function(){return Error("Array Methods must be provided an Array")},Se.prototype._init=function(){this._result=Array(this.length)},Se.prototype._enumerate=function(){for(var tt=this.length,ot=this.promise,dt=this._input,ht=0;void 0===ot._state&&ht<tt;ht++)this._eachEntry(dt[ht],ht)},Se.prototype._eachEntry=function(tt,ot){var dt=this._instanceConstructor;"object"==typeof tt&&null!==tt?tt.constructor===dt&&void 0!==tt._state?(tt._onerror=null,this._settledAt(tt._state,ot,tt._result)):this._willSettleAt(dt.resolve(tt),ot):(this._remaining--,this._result[ot]=tt)},Se.prototype._settledAt=function(tt,ot,dt){var ht=this.promise;void 0===ht._state&&(this._remaining--,2===tt?he(ht,dt):this._result[ot]=dt),0===this._remaining&&oe(ht,this._result)},Se.prototype._willSettleAt=function(tt,ot){var dt=this;pe(tt,void 0,function(ht){dt._settledAt(1,ot,ht)},function(ht){dt._settledAt(2,ot,ht)})};var Mt=0;Le.all=function(tt){return new Se(this,tt).promise},Le.race=function(tt){function ot(Tt){ne(ht,Tt)}function dt(Tt){he(ht,Tt)}var ht=new this(G);if(!Ne(tt))return he(ht,new TypeError("You must pass an array to race.")),ht;for(var Lt=tt.length,xt=0;void 0===ht._state&&xt<Lt;xt++)pe(this.resolve(tt[xt]),void 0,ot,dt);return ht},Le.resolve=function(tt){if(tt&&"object"==typeof tt&&tt.constructor===this)return tt;var ot=new this(G);return ne(ot,tt),ot},Le.reject=function(tt){var ot=new this(G);return he(ot,tt),ot},Le._setScheduler=function(tt){ke=tt},Le._setAsap=function(tt){se=tt},Le._asap=se,Le.prototype={constructor:Le,then:function(tt,ot){var dt=this._state;if(1===dt&&!tt||2===dt&&!ot)return this;var ht=new this.constructor(G),Lt=this._result;if(dt){var xt=arguments[dt-1];se(function(){ee(dt,ht,xt,Lt)})}else pe(this,ht,tt,ot);return ht},catch:function(tt){return this.then(null,tt)}},qe={Promise:Le,polyfill:me=function(){var tt;if(void 0!==j)tt=j;else if("undefined"!=typeof self)tt=self;else try{tt=Function("return this")()}catch(dt){throw Error("polyfill failed because global object is unavailable in this environment")}var ot=tt.Promise;(!ot||"[object Promise]"!==Object.prototype.toString.call(ot.resolve())||ot.cast)&&(tt.Promise=Le)}},void 0!==Ee&&Ee.exports?Ee.exports=qe:void 0!==this&&(this.ES6Promise=qe),me()}).call(this)}).call(this,Ce("2ionoC"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"2ionoC":9}],4:[function(Ce,Ee,Be){},{}],5:[function(Ce,Ee,Be){function ye(se,me,_e){if(!(this instanceof ye))return new ye(se,me,_e);var Ze,st,qe=typeof se;if("base64"===me&&"string"===qe)for(se=se.trim?se.trim():se.replace(/^\s+|\s+$/g,"");se.length%4!=0;)se+="=";if("number"===qe)Ze=re(se);else if("string"===qe)Ze=ye.byteLength(se,me);else{if("object"!==qe)throw Error("First argument needs to be a number, array or string.");Ze=re(se.length)}if(ye._useTypedArrays?st=ye._augment(new Uint8Array(Ze)):((st=this).length=Ze,st._isBuffer=!0),ye._useTypedArrays&&"number"==typeof se.byteLength)st._set(se);else{var yt=se;if(oe(yt)||ye.isBuffer(yt)||yt&&"object"==typeof yt&&"number"==typeof yt.length)for(me=0;me<Ze;me++)ye.isBuffer(se)?st[me]=se.readUInt8(me):st[me]=se[me];else if("string"===qe)st.write(se,0,me);else if("number"===qe&&!ye._useTypedArrays&&!_e)for(me=0;me<Ze;me++)st[me]=0}return st}function j(se,me,_e){var qe="";for(_e=Math.min(se.length,_e);me<_e;me++)qe+=String.fromCharCode(se[me]);return qe}function N(se,me,_e,qe){if(qe||(Ne("boolean"==typeof _e,"missing or invalid endian"),Ne(null!=me,"missing offset"),Ne(me+1<se.length,"Trying to read beyond buffer length")),!(me>=(qe=se.length)))return _e?(_e=se[me],me+1<qe&&(_e|=se[me+1]<<8)):(_e=se[me]<<8,me+1<qe&&(_e|=se[me+1])),_e}function T(se,me,_e,qe){var Ze;if(qe||(Ne("boolean"==typeof _e,"missing or invalid endian"),Ne(null!=me,"missing offset"),Ne(me+3<se.length,"Trying to read beyond buffer length")),!(me>=(qe=se.length)))return _e?(me+2<qe&&(Ze=se[me+2]<<16),me+1<qe&&(Ze|=se[me+1]<<8),Ze|=se[me],me+3<qe&&(Ze+=se[me+3]<<24>>>0)):(me+1<qe&&(Ze=se[me+1]<<16),me+2<qe&&(Ze|=se[me+2]<<8),me+3<qe&&(Ze|=se[me+3]),Ze+=se[me]<<24>>>0),Ze}function _(se,me,_e,qe){if(qe||(Ne("boolean"==typeof _e,"missing or invalid endian"),Ne(null!=me,"missing offset"),Ne(me+1<se.length,"Trying to read beyond buffer length")),!(me>=se.length))return 32768&(se=N(se,me,_e,!0))?-1*(65535-se+1):se}function I(se,me,_e,qe){if(qe||(Ne("boolean"==typeof _e,"missing or invalid endian"),Ne(null!=me,"missing offset"),Ne(me+3<se.length,"Trying to read beyond buffer length")),!(me>=se.length))return 2147483648&(se=T(se,me,_e,!0))?-1*(4294967295-se+1):se}function D(se,me,_e,qe){return qe||(Ne("boolean"==typeof _e,"missing or invalid endian"),Ne(me+3<se.length,"Trying to read beyond buffer length")),$e.read(se,me,_e,23,4)}function O(se,me,_e,qe){return qe||(Ne("boolean"==typeof _e,"missing or invalid endian"),Ne(me+7<se.length,"Trying to read beyond buffer length")),$e.read(se,me,_e,52,8)}function s(se,me,_e,qe,Ze){Ze||(Ne(null!=me,"missing value"),Ne("boolean"==typeof qe,"missing or invalid endian"),Ne(null!=_e,"missing offset"),Ne(_e+1<se.length,"trying to write beyond buffer length"),ge(me,65535));var st=se.length;if(!(_e>=st))for(Ze=0,st=Math.min(st-_e,2);Ze<st;Ze++)se[_e+Ze]=(me&255<<8*(qe?Ze:1-Ze))>>>8*(qe?Ze:1-Ze)}function R(se,me,_e,qe,Ze){Ze||(Ne(null!=me,"missing value"),Ne("boolean"==typeof qe,"missing or invalid endian"),Ne(null!=_e,"missing offset"),Ne(_e+3<se.length,"trying to write beyond buffer length"),ge(me,4294967295));var st=se.length;if(!(_e>=st))for(Ze=0,st=Math.min(st-_e,4);Ze<st;Ze++)se[_e+Ze]=me>>>8*(qe?Ze:3-Ze)&255}function G(se,me,_e,qe,Ze){Ze||(Ne(null!=me,"missing value"),Ne("boolean"==typeof qe,"missing or invalid endian"),Ne(null!=_e,"missing offset"),Ne(_e+1<se.length,"Trying to write beyond buffer length"),Se(me,32767,-32768)),_e>=se.length||s(se,0<=me?me:65535+me+1,_e,qe,Ze)}function Y(se,me,_e,qe,Ze){Ze||(Ne(null!=me,"missing value"),Ne("boolean"==typeof qe,"missing or invalid endian"),Ne(null!=_e,"missing offset"),Ne(_e+3<se.length,"Trying to write beyond buffer length"),Se(me,2147483647,-2147483648)),_e>=se.length||R(se,0<=me?me:4294967295+me+1,_e,qe,Ze)}function X(se,me,_e,qe,Ze){Ze||(Ne(null!=me,"missing value"),Ne("boolean"==typeof qe,"missing or invalid endian"),Ne(null!=_e,"missing offset"),Ne(_e+3<se.length,"Trying to write beyond buffer length"),Le(me,34028234663852886e22,-34028234663852886e22)),_e>=se.length||$e.write(se,me,_e,qe,23,4)}function fe(se,me,_e,qe,Ze){Ze||(Ne(null!=me,"missing value"),Ne("boolean"==typeof qe,"missing or invalid endian"),Ne(null!=_e,"missing offset"),Ne(_e+7<se.length,"Trying to write beyond buffer length"),Le(me,17976931348623157e292,-17976931348623157e292)),_e>=se.length||$e.write(se,me,_e,qe,52,8)}function ne(se,me,_e){return"number"!=typeof se?_e:(se=~~se)>=me?me:0<=se?se:0<=(se+=me)?se:0}function re(se){return 0>(se=~~Math.ceil(+se))?0:se}function oe(se){return(Array.isArray||function(me){return"[object Array]"===Object.prototype.toString.call(me)})(se)}function he(se){return 16>se?"0"+se.toString(16):se.toString(16)}function pe(se){for(var me=[],_e=0;_e<se.length;_e++){var qe=se.charCodeAt(_e);if(127>=qe)me.push(se.charCodeAt(_e));else{var Ze=_e;for(55296<=qe&&57343>=qe&&_e++,qe=encodeURIComponent(se.slice(Ze,_e+1)).substr(1).split("%"),Ze=0;Ze<qe.length;Ze++)me.push(parseInt(qe[Ze],16))}}return me}function V(se){for(var me=[],_e=0;_e<se.length;_e++)me.push(255&se.charCodeAt(_e));return me}function W(se,me,_e,qe){for(var Ze=0;Ze<qe&&!(Ze+_e>=me.length||Ze>=se.length);Ze++)me[Ze+_e]=se[Ze];return Ze}function ee(se){try{return decodeURIComponent(se)}catch(me){return String.fromCharCode(65533)}}function ge(se,me){Ne("number"==typeof se,"cannot write a non-number as a number"),Ne(0<=se,"specified a negative value for writing an unsigned value"),Ne(se<=me,"value is larger than maximum value for type"),Ne(Math.floor(se)===se,"value has a fractional component")}function Se(se,me,_e){Ne("number"==typeof se,"cannot write a non-number as a number"),Ne(se<=me,"value larger than maximum allowed value"),Ne(se>=_e,"value smaller than minimum allowed value"),Ne(Math.floor(se)===se,"value has a fractional component")}function Le(se,me,_e){Ne("number"==typeof se,"cannot write a non-number as a number"),Ne(se<=me,"value larger than maximum allowed value"),Ne(se>=_e,"value smaller than minimum allowed value")}function Ne(se,me){if(!se)throw Error(me||"Failed assertion")}var Qe=Ce("base64-js"),$e=Ce("ieee754");Be.Buffer=ye,Be.SlowBuffer=ye,Be.INSPECT_MAX_BYTES=50,ye.poolSize=8192,ye._useTypedArrays=function(){try{var se=new ArrayBuffer(0),me=new Uint8Array(se);return me.foo=function(){return 42},42===me.foo()&&"function"==typeof me.subarray}catch(_e){return!1}}(),ye.isEncoding=function(se){switch(String(se).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ye.isBuffer=function(se){return!(null==se||!se._isBuffer)},ye.byteLength=function(se,me){var _e;switch(se+="",me||"utf8"){case"hex":_e=se.length/2;break;case"utf8":case"utf-8":_e=pe(se).length;break;case"ascii":case"binary":case"raw":_e=se.length;break;case"base64":_e=Qe.toByteArray(se).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":_e=2*se.length;break;default:throw Error("Unknown encoding")}return _e},ye.concat=function(se,me){if(Ne(oe(se),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===se.length)return new ye(0);if(1===se.length)return se[0];var _e;if("number"!=typeof me)for(_e=me=0;_e<se.length;_e++)me+=se[_e].length;var qe=new ye(me),Ze=0;for(_e=0;_e<se.length;_e++){var st=se[_e];st.copy(qe,Ze),Ze+=st.length}return qe},ye.prototype.write=function(se,me,_e,qe){if(isFinite(me))isFinite(_e)||(qe=_e,_e=void 0);else{var Ze=qe;qe=me,me=_e,_e=Ze}switch(me=Number(me)||0,Ze=this.length-me,_e?(_e=Number(_e))>Ze&&(_e=Ze):_e=Ze,qe=String(qe||"utf8").toLowerCase()){case"hex":for(me=Number(me)||0,qe=this.length-me,_e?(_e=Number(_e))>qe&&(_e=qe):_e=qe,Ne((qe=se.length)%2==0,"Invalid hex string"),_e>qe/2&&(_e=qe/2),qe=0;qe<_e;qe++)Ze=parseInt(se.substr(2*qe,2),16),Ne(!isNaN(Ze),"Invalid hex string"),this[me+qe]=Ze;ye._charsWritten=2*qe,se=qe;break;case"utf8":case"utf-8":se=ye._charsWritten=W(pe(se),this,me,_e);break;case"ascii":case"binary":se=ye._charsWritten=W(V(se),this,me,_e);break;case"base64":se=ye._charsWritten=W(Qe.toByteArray(se),this,me,_e);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Ze=[];for(var st,yt=0;yt<se.length;yt++)qe=(st=se.charCodeAt(yt))>>8,st%=256,Ze.push(st),Ze.push(qe);se=ye._charsWritten=W(Ze,this,me,_e);break;default:throw Error("Unknown encoding")}return se},ye.prototype.toString=function(se,me,_e){if(se=String(se||"utf8").toLowerCase(),me=Number(me)||0,(_e=void 0!==_e?Number(_e):_e=this.length)===me)return"";switch(se){case"hex":for(se=this.length,(!me||0>me)&&(me=0),(!_e||0>_e||_e>se)&&(_e=se),se="";me<_e;me++)se+=he(this[me]);_e=se;break;case"utf8":case"utf-8":var qe=se="";for(_e=Math.min(this.length,_e);me<_e;me++)127>=this[me]?(se+=ee(qe)+String.fromCharCode(this[me]),qe=""):qe+="%"+this[me].toString(16);_e=se+ee(qe);break;case"ascii":case"binary":_e=j(this,me,_e);break;case"base64":_e=0===me&&_e===this.length?Qe.fromByteArray(this):Qe.fromByteArray(this.slice(me,_e));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(_e=this.slice(me,_e),me="",se=0;se<_e.length;se+=2)me+=String.fromCharCode(_e[se]+256*_e[se+1]);_e=me;break;default:throw Error("Unknown encoding")}return _e},ye.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},ye.prototype.copy=function(se,me,_e,qe){if(_e||(_e=0),qe||0===qe||(qe=this.length),me||(me=0),qe!==_e&&0!==se.length&&0!==this.length)if(Ne(qe>=_e,"sourceEnd < sourceStart"),Ne(0<=me&&me<se.length,"targetStart out of bounds"),Ne(0<=_e&&_e<this.length,"sourceStart out of bounds"),Ne(0<=qe&&qe<=this.length,"sourceEnd out of bounds"),qe>this.length&&(qe=this.length),se.length-me<qe-_e&&(qe=se.length-me+_e),100>(qe-=_e)||!ye._useTypedArrays)for(var Ze=0;Ze<qe;Ze++)se[Ze+me]=this[Ze+_e];else se._set(this.subarray(_e,_e+qe),me)},ye.prototype.slice=function(se,me){if(se=ne(se,_e=this.length,0),me=ne(me,_e,_e),ye._useTypedArrays)return ye._augment(this.subarray(se,me));for(var _e,qe=new ye(_e=me-se,void 0,!0),Ze=0;Ze<_e;Ze++)qe[Ze]=this[Ze+se];return qe},ye.prototype.get=function(se){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(se)},ye.prototype.set=function(se,me){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(se,me)},ye.prototype.readUInt8=function(se,me){if(me||(Ne(null!=se,"missing offset"),Ne(se<this.length,"Trying to read beyond buffer length")),!(se>=this.length))return this[se]},ye.prototype.readUInt16LE=function(se,me){return N(this,se,!0,me)},ye.prototype.readUInt16BE=function(se,me){return N(this,se,!1,me)},ye.prototype.readUInt32LE=function(se,me){return T(this,se,!0,me)},ye.prototype.readUInt32BE=function(se,me){return T(this,se,!1,me)},ye.prototype.readInt8=function(se,me){if(me||(Ne(null!=se,"missing offset"),Ne(se<this.length,"Trying to read beyond buffer length")),!(se>=this.length))return 128&this[se]?-1*(255-this[se]+1):this[se]},ye.prototype.readInt16LE=function(se,me){return _(this,se,!0,me)},ye.prototype.readInt16BE=function(se,me){return _(this,se,!1,me)},ye.prototype.readInt32LE=function(se,me){return I(this,se,!0,me)},ye.prototype.readInt32BE=function(se,me){return I(this,se,!1,me)},ye.prototype.readFloatLE=function(se,me){return D(this,se,!0,me)},ye.prototype.readFloatBE=function(se,me){return D(this,se,!1,me)},ye.prototype.readDoubleLE=function(se,me){return O(this,se,!0,me)},ye.prototype.readDoubleBE=function(se,me){return O(this,se,!1,me)},ye.prototype.writeUInt8=function(se,me,_e){_e||(Ne(null!=se,"missing value"),Ne(null!=me,"missing offset"),Ne(me<this.length,"trying to write beyond buffer length"),ge(se,255)),me>=this.length||(this[me]=se)},ye.prototype.writeUInt16LE=function(se,me,_e){s(this,se,me,!0,_e)},ye.prototype.writeUInt16BE=function(se,me,_e){s(this,se,me,!1,_e)},ye.prototype.writeUInt32LE=function(se,me,_e){R(this,se,me,!0,_e)},ye.prototype.writeUInt32BE=function(se,me,_e){R(this,se,me,!1,_e)},ye.prototype.writeInt8=function(se,me,_e){_e||(Ne(null!=se,"missing value"),Ne(null!=me,"missing offset"),Ne(me<this.length,"Trying to write beyond buffer length"),Se(se,127,-128)),me>=this.length||(0<=se?this.writeUInt8(se,me,_e):this.writeUInt8(255+se+1,me,_e))},ye.prototype.writeInt16LE=function(se,me,_e){G(this,se,me,!0,_e)},ye.prototype.writeInt16BE=function(se,me,_e){G(this,se,me,!1,_e)},ye.prototype.writeInt32LE=function(se,me,_e){Y(this,se,me,!0,_e)},ye.prototype.writeInt32BE=function(se,me,_e){Y(this,se,me,!1,_e)},ye.prototype.writeFloatLE=function(se,me,_e){X(this,se,me,!0,_e)},ye.prototype.writeFloatBE=function(se,me,_e){X(this,se,me,!1,_e)},ye.prototype.writeDoubleLE=function(se,me,_e){fe(this,se,me,!0,_e)},ye.prototype.writeDoubleBE=function(se,me,_e){fe(this,se,me,!1,_e)},ye.prototype.fill=function(se,me,_e){if(se||(se=0),me||(me=0),_e||(_e=this.length),"string"==typeof se&&(se=se.charCodeAt(0)),Ne("number"==typeof se&&!isNaN(se),"value is not a number"),Ne(_e>=me,"end < start"),_e!==me&&0!==this.length)for(Ne(0<=me&&me<this.length,"start out of bounds"),Ne(0<=_e&&_e<=this.length,"end out of bounds");me<_e;me++)this[me]=se},ye.prototype.inspect=function(){for(var se=[],me=this.length,_e=0;_e<me;_e++)if(se[_e]=he(this[_e]),_e===Be.INSPECT_MAX_BYTES){se[_e+1]="...";break}return"<Buffer "+se.join(" ")+">"},ye.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(ye._useTypedArrays)return new ye(this).buffer;for(var se=new Uint8Array(this.length),me=0,_e=se.length;me<_e;me+=1)se[me]=this[me];return se.buffer}throw Error("Buffer.toArrayBuffer not supported in this browser")};var ke=ye.prototype;ye._augment=function(se){return se._isBuffer=!0,se._get=se.get,se._set=se.set,se.get=ke.get,se.set=ke.set,se.write=ke.write,se.toString=ke.toString,se.toLocaleString=ke.toString,se.toJSON=ke.toJSON,se.copy=ke.copy,se.slice=ke.slice,se.readUInt8=ke.readUInt8,se.readUInt16LE=ke.readUInt16LE,se.readUInt16BE=ke.readUInt16BE,se.readUInt32LE=ke.readUInt32LE,se.readUInt32BE=ke.readUInt32BE,se.readInt8=ke.readInt8,se.readInt16LE=ke.readInt16LE,se.readInt16BE=ke.readInt16BE,se.readInt32LE=ke.readInt32LE,se.readInt32BE=ke.readInt32BE,se.readFloatLE=ke.readFloatLE,se.readFloatBE=ke.readFloatBE,se.readDoubleLE=ke.readDoubleLE,se.readDoubleBE=ke.readDoubleBE,se.writeUInt8=ke.writeUInt8,se.writeUInt16LE=ke.writeUInt16LE,se.writeUInt16BE=ke.writeUInt16BE,se.writeUInt32LE=ke.writeUInt32LE,se.writeUInt32BE=ke.writeUInt32BE,se.writeInt8=ke.writeInt8,se.writeInt16LE=ke.writeInt16LE,se.writeInt16BE=ke.writeInt16BE,se.writeInt32LE=ke.writeInt32LE,se.writeInt32BE=ke.writeInt32BE,se.writeFloatLE=ke.writeFloatLE,se.writeFloatBE=ke.writeFloatBE,se.writeDoubleLE=ke.writeDoubleLE,se.writeDoubleBE=ke.writeDoubleBE,se.fill=ke.fill,se.inspect=ke.inspect,se.toArrayBuffer=ke.toArrayBuffer,se}},{"base64-js":2,ieee754:8}],6:[function(Ce,Ee,Be){function ye(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function j(T){return"function"==typeof T}function N(T){return"object"==typeof T&&null!==T}Ee.exports=ye,ye.EventEmitter=ye,ye.prototype._events=void 0,ye.prototype._maxListeners=void 0,ye.defaultMaxListeners=10,ye.prototype.setMaxListeners=function(T){if("number"!=typeof T||0>T||isNaN(T))throw TypeError("n must be a positive number");return this._maxListeners=T,this},ye.prototype.emit=function(T){var _,I,D,O;if(this._events||(this._events={}),"error"===T&&(!this._events.error||N(this._events.error)&&!this._events.error.length))throw(_=arguments[1])instanceof Error?_:TypeError('Uncaught, unspecified "error" event.');if(void 0===(I=this._events[T]))return!1;if(j(I))switch(arguments.length){case 1:I.call(this);break;case 2:I.call(this,arguments[1]);break;case 3:I.call(this,arguments[1],arguments[2]);break;default:for(_=arguments.length,D=Array(_-1),O=1;O<_;O++)D[O-1]=arguments[O];I.apply(this,D)}else if(N(I)){for(_=arguments.length,D=Array(_-1),O=1;O<_;O++)D[O-1]=arguments[O];for(_=(I=I.slice()).length,O=0;O<_;O++)I[O].apply(this,D)}return!0},ye.prototype.addListener=function(T,_){var I;if(!j(_))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",T,j(_.listener)?_.listener:_),this._events[T]?N(this._events[T])?this._events[T].push(_):this._events[T]=[this._events[T],_]:this._events[T]=_,N(this._events[T])&&!this._events[T].warned&&(I=void 0!==this._maxListeners?this._maxListeners:ye.defaultMaxListeners)&&0<I&&this._events[T].length>I&&(this._events[T].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[T].length),"function"==typeof console.trace&&console.trace()),this},ye.prototype.on=ye.prototype.addListener,ye.prototype.once=function(T,_){function I(){this.removeListener(T,I),D||(D=!0,_.apply(this,arguments))}if(!j(_))throw TypeError("listener must be a function");var D=!1;return I.listener=_,this.on(T,I),this},ye.prototype.removeListener=function(T,_){var I,D,O;if(!j(_))throw TypeError("listener must be a function");if(!this._events||!this._events[T])return this;if(O=(I=this._events[T]).length,D=-1,I===_||j(I.listener)&&I.listener===_)delete this._events[T],this._events.removeListener&&this.emit("removeListener",T,_);else if(N(I)){for(;0<O--;)if(I[O]===_||I[O].listener&&I[O].listener===_){D=O;break}if(0>D)return this;1===I.length?(I.length=0,delete this._events[T]):I.splice(D,1),this._events.removeListener&&this.emit("removeListener",T,_)}return this},ye.prototype.removeAllListeners=function(T){var _;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[T]&&delete this._events[T],this;if(0===arguments.length){for(_ in this._events)"removeListener"!==_&&this.removeAllListeners(_);return this.removeAllListeners("removeListener"),this._events={},this}if(j(_=this._events[T]))this.removeListener(T,_);else for(;_.length;)this.removeListener(T,_[_.length-1]);return delete this._events[T],this},ye.prototype.listeners=function(T){return this._events&&this._events[T]?j(this._events[T])?[this._events[T]]:this._events[T].slice():[]},ye.listenerCount=function(T,_){return T._events&&T._events[_]?j(T._events[_])?1:T._events[_].length:0}},{}],7:[function(Ce,Ee,Be){var ye=Ce("http");for(var j in Ce=Ee.exports,ye)ye.hasOwnProperty(j)&&(Ce[j]=ye[j]);Ce.request=function(N,T){return N||(N={}),N.scheme="https",N.protocol="https:",ye.request.call(this,N,T)}},{http:26}],8:[function(Ce,Ee,Be){Be.read=function(ye,j,N,T,_){var I,D=(1<<(I=8*_-T-1))-1,O=D>>1,s=-7,R=N?-1:1,G=ye[j+(_=N?_-1:0)];for(_+=R,N=G&(1<<-s)-1,G>>=-s,s+=I;0<s;N=256*N+ye[j+_],_+=R,s-=8);for(I=N&(1<<-s)-1,N>>=-s,s+=T;0<s;I=256*I+ye[j+_],_+=R,s-=8);if(0===N)N=1-O;else{if(N===D)return I?NaN:1/0*(G?-1:1);I+=Math.pow(2,T),N-=O}return(G?-1:1)*I*Math.pow(2,N-T)},Be.write=function(ye,j,N,T,_,I){var D,O=8*I-_-1,s=(1<<O)-1,R=s>>1,G=23===_?Math.pow(2,-24)-Math.pow(2,-77):0;I=T?0:I-1;var Y=T?1:-1,X=0>j||0===j&&0>1/j?1:0;for(j=Math.abs(j),isNaN(j)||j===1/0?(j=isNaN(j)?1:0,T=s):(T=Math.floor(Math.log(j)/Math.LN2),1>j*(D=Math.pow(2,-T))&&(T--,D*=2),2<=(j=1<=T+R?j+G/D:j+G*Math.pow(2,1-R))*D&&(T++,D/=2),T+R>=s?(j=0,T=s):1<=T+R?(j=(j*D-1)*Math.pow(2,_),T+=R):(j=j*Math.pow(2,R-1)*Math.pow(2,_),T=0));8<=_;ye[N+I]=255&j,I+=Y,j/=256,_-=8);for(T=T<<_|j,O+=_;0<O;ye[N+I]=255&T,I+=Y,T/=256,O-=8);ye[N+I-Y]|=128*X}},{}],9:[function(Ce,Ee,Be){function ye(){}(Ce=Ee.exports={}).nextTick=function(){if("undefined"!=typeof window&&window.setImmediate)return function(N){return window.setImmediate(N)};if("undefined"!=typeof window&&window.postMessage&&window.addEventListener){var j=[];return window.addEventListener("message",function(N){var T=N.source;T!==window&&null!==T||"process-tick"!==N.data||(N.stopPropagation(),0<j.length&&j.shift()())},!0),function(N){j.push(N),window.postMessage("process-tick","*")}}return function(N){setTimeout(N,0)}}(),Ce.title="browser",Ce.browser=!0,Ce.env={},Ce.argv=[],Ce.on=ye,Ce.addListener=ye,Ce.once=ye,Ce.off=ye,Ce.removeListener=ye,Ce.removeAllListeners=ye,Ce.emit=ye,Ce.binding=function(j){throw Error("process.binding is not supported")},Ce.cwd=function(){return"/"},Ce.chdir=function(j){throw Error("process.chdir is not supported")}},{}],10:[function(Ce,Ee,Be){(function(ye){!function(j){function N(ee){throw RangeError(oe[ee])}function T(ee,ge){for(var Se=ee.length;Se--;)ee[Se]=ge(ee[Se]);return ee}function _(ee,ge){return T(ee.split(re),ge).join(".")}function I(ee){for(var Ne,Qe,ge=[],Se=0,Le=ee.length;Se<Le;)55296<=(Ne=ee.charCodeAt(Se++))&&56319>=Ne&&Se<Le?56320==(64512&(Qe=ee.charCodeAt(Se++)))?ge.push(((1023&Ne)<<10)+(1023&Qe)+65536):(ge.push(Ne),Se--):ge.push(Ne);return ge}function D(ee){return T(ee,function(ge){var Se="";return 65535<ge&&(Se+=pe((ge-=65536)>>>10&1023|55296),ge=56320|1023&ge),Se+pe(ge)}).join("")}function O(ee,ge){return ee+22+75*(26>ee)-((0!=ge)<<5)}function s(ee,ge,Se){var Le=0;for(ee=Se?he(ee/700):ee>>1,ee+=he(ee/ge);455<ee;Le+=36)ee=he(ee/35);return he(Le+36*ee/(ee+38))}function R(ee){var Le,ke,se,me,_e,qe,ge=[],Se=ee.length,Ne=0,Qe=128,$e=72;for(0>(ke=ee.lastIndexOf("-"))&&(ke=0),se=0;se<ke;++se)128<=ee.charCodeAt(se)&&N("not-basic"),ge.push(ee.charCodeAt(se));for(ke=0<ke?ke+1:0;ke<Se;){for(se=Ne,Le=1,me=36;ke>=Se&&N("invalid-input"),(36<=(_e=10>(_e=ee.charCodeAt(ke++))-48?_e-22:26>_e-65?_e-65:26>_e-97?_e-97:36)||_e>he((2147483647-Ne)/Le))&&N("overflow"),Ne+=_e*Le,!(_e<(qe=me<=$e?1:me>=$e+26?26:me-$e));me+=36)Le>he(2147483647/(_e=36-qe))&&N("overflow"),Le*=_e;$e=s(Ne-se,Le=ge.length+1,0==se),he(Ne/Le)>2147483647-Qe&&N("overflow"),Qe+=he(Ne/Le),Ne%=Le,ge.splice(Ne++,0,Qe)}return D(ge)}function G(ee){var ge,Se,Le,Ne,Qe,$e,ke,se,me,qe,Ze,st,_e=[];for(qe=(ee=I(ee)).length,ge=128,Se=0,Qe=72,$e=0;$e<qe;++$e)128>(me=ee[$e])&&_e.push(pe(me));for((Le=Ne=_e.length)&&_e.push("-");Le<qe;){for(ke=2147483647,$e=0;$e<qe;++$e)(me=ee[$e])>=ge&&me<ke&&(ke=me);for(ke-ge>he((2147483647-Se)/(Ze=Le+1))&&N("overflow"),Se+=(ke-ge)*Ze,ge=ke,$e=0;$e<qe;++$e)if((me=ee[$e])<ge&&2147483647<++Se&&N("overflow"),me==ge){for(se=Se,ke=36;!(se<(me=ke<=Qe?1:ke>=Qe+26?26:ke-Qe));ke+=36)st=se-me,se=36-me,_e.push(pe(O(me+st%se,0))),se=he(st/se);_e.push(pe(O(se,0))),Qe=s(Se,Ze,Le==Ne),Se=0,++Le}++Se,++ge}return _e.join("")}var Y="object"==typeof Be&&Be,X="object"==typeof Ee&&Ee&&Ee.exports==Y&&Ee;((W="object"==typeof ye&&ye).global===W||W.window===W)&&(j=W);var V,fe=/^xn--/,ne=/[^ -~]/,re=/\x2E|\u3002|\uFF0E|\uFF61/g,oe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},he=Math.floor,pe=String.fromCharCode,W={version:"1.2.4",ucs2:{decode:I,encode:D},decode:R,encode:G,toASCII:function(ee){return _(ee,function(ge){return ne.test(ge)?"xn--"+G(ge):ge})},toUnicode:function(ee){return _(ee,function(ge){return fe.test(ge)?R(ge.slice(4).toLowerCase()):ge})}};if(Y&&!Y.nodeType)if(X)X.exports=W;else for(V in W)W.hasOwnProperty(V)&&(Y[V]=W[V]);else j.punycode=W}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(Ce,Ee,Be){Ee.exports=function(j,N,T,_){T=T||"=";var I={};if("string"!=typeof j||0===j.length)return I;var D=/\+/g;for(j=j.split(N||"&"),N=1e3,_&&"number"==typeof _.maxKeys&&(N=_.maxKeys),_=j.length,0<N&&_>N&&(_=N),N=0;N<_;++N){var R,O=j[N].replace(D,"%20"),s=O.indexOf(T);0<=s?(R=O.substr(0,s),O=O.substr(s+1)):(R=O,O=""),R=decodeURIComponent(R),O=decodeURIComponent(O),Object.prototype.hasOwnProperty.call(I,R)?ye(I[R])?I[R].push(O):I[R]=[I[R],O]:I[R]=O}return I};var ye=Array.isArray||function(j){return"[object Array]"===Object.prototype.toString.call(j)}},{}],12:[function(Ce,Ee,Be){var j=function(_){switch(typeof _){case"string":return _;case"boolean":return _?"true":"false";case"number":return isFinite(_)?_:"";default:return""}};Ee.exports=function(_,I,D,O){return I=I||"&",D=D||"=",null===_&&(_=void 0),"object"==typeof _?function ye(_,I){if(_.map)return _.map(I);for(var D=[],O=0;O<_.length;O++)D.push(I(_[O],O));return D}(T(_),function(s){var R=encodeURIComponent(j(s))+D;return N(_[s])?_[s].map(function(G){return R+encodeURIComponent(j(G))}).join(I):R+encodeURIComponent(j(_[s]))}).join(I):O?encodeURIComponent(j(O))+D+encodeURIComponent(j(_)):""};var N=Array.isArray||function(_){return"[object Array]"===Object.prototype.toString.call(_)},T=Object.keys||function(_){var D,I=[];for(D in _)Object.prototype.hasOwnProperty.call(_,D)&&I.push(D);return I}},{}],13:[function(Ce,Ee,Be){Be.decode=Be.parse=Ce("./decode"),Be.encode=Be.stringify=Ce("./encode")},{"./decode":11,"./encode":12}],14:[function(Ce,Ee,Be){function ye(I){if(!(this instanceof ye))return new ye(I);T.call(this,I),_.call(this,I),I&&!1===I.readable&&(this.readable=!1),I&&!1===I.writable&&(this.writable=!1),this.allowHalfOpen=!0,I&&!1===I.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",j)}function j(){if(!this.allowHalfOpen&&!this._writableState.ended){var I=this;N(function(){I.end()})}}Ee.exports=ye,Ee=Ce("inherits");var N=Ce("process/browser.js").nextTick,T=Ce("./readable.js"),_=Ce("./writable.js");Ee(ye,T),ye.prototype.write=_.prototype.write,ye.prototype.end=_.prototype.end,ye.prototype._write=_.prototype._write},{"./readable.js":18,"./writable.js":20,inherits:29,"process/browser.js":16}],15:[function(Ce,Ee,Be){function ye(){j.call(this)}Ee.exports=ye;var j=Ce("events").EventEmitter;Ce("inherits")(ye,j),ye.Readable=Ce("./readable.js"),ye.Writable=Ce("./writable.js"),ye.Duplex=Ce("./duplex.js"),ye.Transform=Ce("./transform.js"),ye.PassThrough=Ce("./passthrough.js"),ye.Stream=ye,ye.prototype.pipe=function(N,T){function _(X){N.writable&&!1===N.write(X)&&G.pause&&G.pause()}function I(){G.readable&&G.resume&&G.resume()}function D(){Y||(Y=!0,N.end())}function O(){Y||(Y=!0,"function"==typeof N.destroy&&N.destroy())}function s(X){if(R(),0===j.listenerCount(this,"error"))throw X}function R(){G.removeListener("data",_),N.removeListener("drain",I),G.removeListener("end",D),G.removeListener("close",O),G.removeListener("error",s),N.removeListener("error",s),G.removeListener("end",R),G.removeListener("close",R),N.removeListener("close",R)}var G=this;G.on("data",_),N.on("drain",I),N._isStdio||T&&!1===T.end||(G.on("end",D),G.on("close",O));var Y=!1;return G.on("error",s),N.on("error",s),G.on("end",R),G.on("close",R),N.on("close",R),N.emit("pipe",G),N}},{"./duplex.js":14,"./passthrough.js":17,"./readable.js":18,"./transform.js":19,"./writable.js":20,events:6,inherits:29}],16:[function(Ce,Ee,Be){(Ce=Ee.exports={}).nextTick=function(){if("undefined"!=typeof window&&window.setImmediate)return function(j){return window.setImmediate(j)};if("undefined"!=typeof window&&window.postMessage&&window.addEventListener){var ye=[];return window.addEventListener("message",function(j){var N=j.source;N!==window&&null!==N||"process-tick"!==j.data||(j.stopPropagation(),0<ye.length&&ye.shift()())},!0),function(j){ye.push(j),window.postMessage("process-tick","*")}}return function(j){setTimeout(j,0)}}(),Ce.title="browser",Ce.browser=!0,Ce.env={},Ce.argv=[],Ce.binding=function(ye){throw Error("process.binding is not supported")},Ce.cwd=function(){return"/"},Ce.chdir=function(ye){throw Error("process.chdir is not supported")}},{}],17:[function(Ce,Ee,Be){function ye(N){if(!(this instanceof ye))return new ye(N);j.call(this,N)}Ee.exports=ye;var j=Ce("./transform.js");Ce("inherits")(ye,j),ye.prototype._transform=function(N,T,_){_(null,N)}},{"./transform.js":19,inherits:29}],18:[function(Ce,Ee,Be){(function(ye){function j(V,W){var ee=(V=V||{}).highWaterMark;this.highWaterMark=ee||0===ee?ee:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.calledRead=this.reading=this.endEmitted=this.ended=this.flowing=!1,this.sync=!0,this.readableListening=this.emittedReadable=this.needReadable=!1,this.objectMode=!!V.objectMode,this.defaultEncoding=V.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.encoding=this.decoder=null,V.encoding&&(pe||(pe=Ce("string_decoder").StringDecoder),this.decoder=new pe(V.encoding),this.encoding=V.encoding)}function N(V){if(!(this instanceof N))return new N(V);this._readableState=new j(V,this),this.readable=!0,re.call(this)}function T(V,W,ee,ge,Se){var Le;Le=ee;var Ne=null;return oe.isBuffer(Le)||"string"==typeof Le||null==Le||W.objectMode||Ne||(Ne=new TypeError("Invalid non-string/buffer chunk")),(Le=Ne)?V.emit("error",Le):null==ee?(W.reading=!1,W.ended||(W.decoder&&!W.ended&&(ee=W.decoder.end())&&ee.length&&(W.buffer.push(ee),W.length+=W.objectMode?1:ee.length),W.ended=!0,0<W.length?I(V):X(V))):W.objectMode||ee&&0<ee.length?W.ended&&!Se?(ee=Error("stream.push() after EOF"),V.emit("error",ee)):W.endEmitted&&Se?(ee=Error("stream.unshift() after end event"),V.emit("error",ee)):(!W.decoder||Se||ge||(ee=W.decoder.write(ee)),W.length+=W.objectMode?1:ee.length,Se?W.buffer.unshift(ee):(W.reading=!1,W.buffer.push(ee)),W.needReadable&&I(V),function D(V,W){W.readingMore||(W.readingMore=!0,he(function(){for(var ee=W.length;!W.reading&&!W.flowing&&!W.ended&&W.length<W.highWaterMark&&(V.read(0),ee!==W.length);)ee=W.length;W.readingMore=!1}))}(V,W)):Se||(W.reading=!1),!W.ended&&(W.needReadable||W.length<W.highWaterMark||0===W.length)}function _(V,W){if(0===W.length&&W.ended)return 0;if(W.objectMode)return 0===V?0:1;if(isNaN(V)||null===V)return W.flowing&&W.buffer.length?W.buffer[0].length:W.length;if(0>=V)return 0;if(V>W.highWaterMark){var ee=V;if(8388608<=ee)ee=8388608;else{ee--;for(var ge=1;32>ge;ge<<=1)ee|=ee>>ge;ee++}W.highWaterMark=ee}return V>W.length?W.ended?W.length:(W.needReadable=!0,0):V}function I(V){var W=V._readableState;W.needReadable=!1,W.emittedReadable||(W.emittedReadable=!0,W.sync?he(function(){V.emit("readable")}):V.emit("readable"))}function s(V){function W(Se,Le,Ne){!1===Se.write(ge)&&ee.awaitDrain++}var ge,ee=V._readableState;for(ee.awaitDrain=0;ee.pipesCount&&null!==(ge=V.read());)if(1===ee.pipesCount?W(ee.pipes):fe(ee.pipes,W),V.emit("data",ge),0<ee.awaitDrain)return;0===ee.pipesCount?(ee.flowing=!1,0<ne.listenerCount(V,"data")&&G(V)):ee.ranOut=!0}function R(){this._readableState.ranOut&&(this._readableState.ranOut=!1,s(this))}function G(V,W){if(V._readableState.flowing)throw Error("Cannot switch to old mode now.");var ee=W||!1,ge=!1;V.readable=!0,V.pipe=re.prototype.pipe,V.on=V.addListener=re.prototype.on,V.on("readable",function(){ge=!0;for(var Se;!ee&&null!==(Se=V.read());)V.emit("data",Se);null===Se&&(ge=!1,V._readableState.needReadable=!0)}),V.pause=function(){ee=!0,this.emit("pause")},V.resume=function(){ee=!1,ge?he(function(){V.emit("readable")}):this.read(0),this.emit("resume")},V.emit("readable")}function Y(V,W){var ee=W.buffer,ge=W.length,Se=!!W.decoder,Le=!!W.objectMode;if(0===ee.length)return null;if(0===ge)ge=null;else if(Le)ge=ee.shift();else if(!V||V>=ge)ge=Se?ee.join(""):oe.concat(ee,ge),ee.length=0;else if(V<ee[0].length)ge=(Le=ee[0]).slice(0,V),ee[0]=Le.slice(V);else if(V===ee[0].length)ge=ee.shift();else{ge=Se?"":new oe(V);for(var Ne=0,Qe=0,$e=ee.length;Qe<$e&&Ne<V;Qe++){Le=ee[0];var ke=Math.min(V-Ne,Le.length);Se?ge+=Le.slice(0,ke):Le.copy(ge,Ne,0,ke),ke<Le.length?ee[0]=Le.slice(ke):ee.shift(),Ne+=ke}}return ge}function X(V){var W=V._readableState;if(0<W.length)throw Error("endReadable called on non-empty stream");!W.endEmitted&&W.calledRead&&(W.ended=!0,he(function(){W.endEmitted||0!==W.length||(W.endEmitted=!0,V.readable=!1,V.emit("end"))}))}function fe(V,W){for(var ee=0,ge=V.length;ee<ge;ee++)W(V[ee],ee)}Ee.exports=N,N.ReadableState=j;var pe,ne=Ce("events").EventEmitter,re=Ce("./index.js"),oe=Ce("buffer").Buffer,he=Ce("process/browser.js").nextTick;Ce("inherits")(N,re),N.prototype.push=function(V,W){var ee=this._readableState;return"string"!=typeof V||ee.objectMode||(W=W||ee.defaultEncoding)!==ee.encoding&&(V=new oe(V,W),W=""),T(this,ee,V,W,!1)},N.prototype.unshift=function(V){return T(this,this._readableState,V,"",!0)},N.prototype.setEncoding=function(V){pe||(pe=Ce("string_decoder").StringDecoder),this._readableState.decoder=new pe(V),this._readableState.encoding=V},N.prototype.read=function(V){var W=this._readableState;W.calledRead=!0;var ee=V;if(("number"!=typeof V||0<V)&&(W.emittedReadable=!1),0===V&&W.needReadable&&(W.length>=W.highWaterMark||W.ended))return I(this),null;if(0===(V=_(V,W))&&W.ended)return 0===W.length&&X(this),null;var ge=W.needReadable;return W.length-V<=W.highWaterMark&&(ge=!0),(W.ended||W.reading)&&(ge=!1),ge&&(W.reading=!0,W.sync=!0,0===W.length&&(W.needReadable=!0),this._read(W.highWaterMark),W.sync=!1),ge&&!W.reading&&(V=_(ee,W)),null===(ee=0<V?Y(V,W):null)&&(W.needReadable=!0,V=0),W.length-=V,0!==W.length||W.ended||(W.needReadable=!0),W.ended&&!W.endEmitted&&0===W.length&&X(this),ee},N.prototype._read=function(V){this.emit("error",Error("not implemented"))},N.prototype.pipe=function(V,W){function ee(qe){qe===$e&&Se()}function ge(){V.end()}function Se(){V.removeListener("close",Ne),V.removeListener("finish",Qe),V.removeListener("drain",me),V.removeListener("error",Le),V.removeListener("unpipe",ee),$e.removeListener("end",ge),$e.removeListener("end",Se),V._writableState&&!V._writableState.needDrain||me()}function Le(qe){$e.unpipe(V),0===_e&&0===ne.listenerCount(V,"error")&&V.emit("error",qe)}function Ne(){V.removeListener("finish",Qe),$e.unpipe(V)}function Qe(){V.removeListener("close",Ne),$e.unpipe(V)}var $e=this,ke=this._readableState;switch(ke.pipesCount){case 0:ke.pipes=V;break;case 1:ke.pipes=[ke.pipes,V];break;default:ke.pipes.push(V)}ke.pipesCount+=1;var se=W&&!1===W.end||V===ye.stdout||V===ye.stderr?Se:ge;ke.endEmitted?he(se):$e.once("end",se),V.on("unpipe",ee);var me=function O(V){return function(){var W=V._readableState;W.awaitDrain--,0===W.awaitDrain&&s(V)}}($e);V.on("drain",me);var _e=ne.listenerCount(V,"error");return V.once("error",Le),V.once("close",Ne),V.once("finish",Qe),V.emit("pipe",$e),ke.flowing||(this.on("readable",R),ke.flowing=!0,he(function(){s($e)})),V},N.prototype.unpipe=function(V){var W=this._readableState;if(0===W.pipesCount)return this;if(1===W.pipesCount)return V&&V!==W.pipes||(V||(V=W.pipes),W.pipes=null,W.pipesCount=0,this.removeListener("readable",R),W.flowing=!1,V&&V.emit("unpipe",this)),this;if(!V){V=W.pipes;var ee=W.pipesCount;W.pipes=null,W.pipesCount=0,this.removeListener("readable",R),W.flowing=!1;for(var ge=0;ge<ee;ge++)V[ge].emit("unpipe",this);return this}e:{ee=0;for(var Se=(ge=W.pipes).length;ee<Se;ee++)if(ge[ee]===V){ge=ee;break e}ge=-1}return-1===ge||(W.pipes.splice(ge,1),--W.pipesCount,1===W.pipesCount&&(W.pipes=W.pipes[0]),V.emit("unpipe",this)),this},N.prototype.on=function(V,W){var ee=re.prototype.on.call(this,V,W);if("data"!==V||this._readableState.flowing||G(this),"readable"===V&&this.readable){var ge=this._readableState;ge.readableListening||(ge.readableListening=!0,ge.emittedReadable=!1,ge.needReadable=!0,ge.reading?ge.length&&I(this):this.read(0))}return ee},N.prototype.addListener=N.prototype.on,N.prototype.resume=function(){G(this),this.read(0),this.emit("resume")},N.prototype.pause=function(){G(this,!0),this.emit("pause")},N.prototype.wrap=function(V){var W=this._readableState,ee=!1,ge=this;for(var Se in V.on("end",function(){if(W.decoder&&!W.ended){var Le=W.decoder.end();Le&&Le.length&&ge.push(Le)}ge.push(null)}),V.on("data",function(Le){W.decoder&&(Le=W.decoder.write(Le)),Le&&(W.objectMode||Le.length)&&!ge.push(Le)&&(ee=!0,V.pause())}),V)"function"==typeof V[Se]&&void 0===this[Se]&&(this[Se]=function(Le){return function(){return V[Le].apply(V,arguments)}}(Se));return fe(["error","close","destroy","pause","resume"],function(Le){V.on(Le,function(Ne){return ge.emit.apply(ge,Le,Ne)})}),ge._read=function(Le){ee&&(ee=!1,V.resume())},ge},N._fromList=Y}).call(this,Ce("2ionoC"))},{"./index.js":15,"2ionoC":9,buffer:5,events:6,inherits:29,"process/browser.js":16,string_decoder:21}],19:[function(Ce,Ee,Be){function ye(_,I){this.afterTransform=function(D,O){var s;(s=I._transformState).transforming=!1;var R=s.writecb;return R?(s.writechunk=null,s.writecb=null,null!=O&&I.push(O),R&&R(D),(s=I._readableState).reading=!1,(s.needReadable||s.length<s.highWaterMark)&&I._read(s.highWaterMark),s=void 0):s=I.emit("error",Error("no writecb in Transform class")),s},this.transforming=this.needTransform=!1,this.writechunk=this.writecb=null}function j(_){if(!(this instanceof j))return new j(_);T.call(this,_),this._transformState=new ye(_,this);var I=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(D){N(I,D)}):N(I)})}function N(_,I){if(I)return _.emit("error",I);var D=_._transformState;if(_._writableState.length)throw Error("calling transform done when ws.length != 0");if(D.transforming)throw Error("calling transform done when still transforming");return _.push(null)}Ee.exports=j;var T=Ce("./duplex.js");Ce("inherits")(j,T),j.prototype.push=function(_,I){return this._transformState.needTransform=!1,T.prototype.push.call(this,_,I)},j.prototype._transform=function(_,I,D){throw Error("not implemented")},j.prototype._write=function(_,I,D){var O=this._transformState;O.writecb=D,O.writechunk=_,O.writeencoding=I,O.transforming||(_=this._readableState,(O.needTransform||_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark))},j.prototype._read=function(_){(_=this._transformState).writechunk&&_.writecb&&!_.transforming?(_.transforming=!0,this._transform(_.writechunk,_.writeencoding,_.afterTransform)):_.needTransform=!0}},{"./duplex.js":14,inherits:29}],20:[function(Ce,Ee,Be){function ye(he,pe,V){this.chunk=he,this.encoding=pe,this.callback=V}function j(he,pe){var V=(he=he||{}).highWaterMark;this.highWaterMark=V||0===V?V:16384,this.objectMode=!!he.objectMode,this.highWaterMark=~~this.highWaterMark,this.finished=this.ended=this.ending=this.needDrain=!1,this.decodeStrings=!1!==he.decodeStrings,this.defaultEncoding=he.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(W){!function s(he,pe){var V=he._writableState,W=V.sync,ee=V.writecb;if(function O(he){he.writing=!1,he.writecb=null,he.length-=he.writelen,he.writelen=0}(V),pe)!function D(he,pe,V,W,ee){V?re(function(){ee(W)}):ee(W),he.emit("error",W)}(he,0,W,pe,ee);else{var ge=V.ending&&0===V.length&&!V.finished&&!V.writing;ge||V.bufferProcessing||!V.buffer.length||function G(he,pe){pe.bufferProcessing=!0;for(var V=0;V<pe.buffer.length;V++){var W=(Ne=pe.buffer[V]).chunk,ee=he,ge=pe,Se=W,Le=Ne.encoding,Ne=Ne.callback;if(ge.writelen=pe.objectMode?1:W.length,ge.writecb=Ne,ge.writing=!0,ge.sync=!0,ee._write(Se,Le,ge.onwrite),ge.sync=!1,pe.writing){V++;break}}pe.bufferProcessing=!1,V<pe.buffer.length?pe.buffer=pe.buffer.slice(V):pe.buffer.length=0}(he,V),W?re(function(){R(he,V,ge,ee)}):R(he,V,ge,ee)}}(pe,W)},this.writecb=null,this.writelen=0,this.buffer=[]}function N(he){if(!(this instanceof N||this instanceof ne.Duplex))return new N(he);this._writableState=new j(he,this),this.writable=!0,ne.call(this)}function R(he,pe,V,W){!V&&0===pe.length&&pe.needDrain&&(pe.needDrain=!1,he.emit("drain")),W(),V&&Y(he,pe)}function Y(he,pe){var V=pe.ending&&0===pe.length&&!pe.finished&&!pe.writing;return V&&(pe.finished=!0,he.emit("finish")),V}Ee.exports=N,N.WritableState=j;var X="undefined"!=typeof Uint8Array?function(he){return he instanceof Uint8Array}:function(he){return he&&he.constructor&&"Uint8Array"===he.constructor.name},fe="undefined"!=typeof ArrayBuffer?function(he){return he instanceof ArrayBuffer}:function(he){return he&&he.constructor&&"ArrayBuffer"===he.constructor.name};Ee=Ce("inherits");var ne=Ce("./index.js"),re=Ce("process/browser.js").nextTick,oe=Ce("buffer").Buffer;Ee(N,ne),N.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))},N.prototype.write=function(he,pe,V){var W=this._writableState,ee=!1;return"function"==typeof pe&&(V=pe,pe=null),!oe.isBuffer(he)&&X(he)&&(he=new oe(he)),fe(he)&&"undefined"!=typeof Uint8Array&&(he=new oe(new Uint8Array(he))),oe.isBuffer(he)?pe="buffer":pe||(pe=W.defaultEncoding),"function"!=typeof V&&(V=function(){}),W.ended?function T(he,pe,V){var W=Error("write after end");he.emit("error",W),re(function(){V(W)})}(this,0,V):function _(he,pe,V,W){var ee=!0;if(!oe.isBuffer(V)&&"string"!=typeof V&&null!=V&&!pe.objectMode){var ge=new TypeError("Invalid non-string/buffer chunk");he.emit("error",ge),re(function(){W(ge)}),ee=!1}return ee}(this,W,he,V)&&(ee=function I(he,pe,V,W,ee){pe.objectMode||!1===pe.decodeStrings||"string"!=typeof V||(V=new oe(V,W));var ge=pe.objectMode?1:V.length;pe.length+=ge;var Se=pe.length<pe.highWaterMark;return pe.needDrain=!Se,pe.writing?pe.buffer.push(new ye(V,W,ee)):(pe.writelen=ge,pe.writecb=ee,pe.writing=!0,pe.sync=!0,he._write(V,W,pe.onwrite),pe.sync=!1),Se}(this,W,he,pe,V)),ee},N.prototype._write=function(he,pe,V){V(Error("not implemented"))},N.prototype.end=function(he,pe,V){var W=this._writableState;"function"==typeof he?(V=he,pe=he=null):"function"==typeof pe&&(V=pe,pe=null),null!=he&&this.write(he,pe),!W.ending&&!W.finished&&(he=V,W.ending=!0,Y(this,W),he&&(W.finished?re(he):this.once("finish",he)),W.ended=!0)}},{"./index.js":15,buffer:5,inherits:29,"process/browser.js":16}],21:[function(Ce,Ee,Be){function ye(_){return _.toString(this.encoding)}function j(_){return this.charLength=(_=this.charReceived=_.length%2)?2:0,_}function N(_){return this.charLength=(_=this.charReceived=_.length%3)?3:0,_}var T=Ce("buffer").Buffer;(Ce=Be.StringDecoder=function(_){if(this.encoding=(_||"utf8").toLowerCase().replace(/[-_]/,""),_&&!T.isEncoding(_))throw Error("Unknown encoding: "+_);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=j;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=N;break;default:return void(this.write=ye)}this.charBuffer=new T(6),this.charLength=this.charReceived=0}).prototype.write=function(_){for(var I="",D=0;this.charLength;){var O=_.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:_.length;if(_.copy(this.charBuffer,this.charReceived,D,O),this.charReceived+=O-D,D=O,this.charReceived<this.charLength)return"";var s=(I=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(I.length-1);if(!(55296<=s&&56319>=s)){if(this.charReceived=this.charLength=0,O==_.length)return I;_=_.slice(O,_.length);break}this.charLength+=this.surrogateSize,I=""}return s=this.detectIncompleteChar(_),D=_.length,this.charLength&&(_.copy(this.charBuffer,0,_.length-s,D),this.charReceived=s,D-=s),D=(I+=_.toString(this.encoding,0,D)).length-1,55296<=(s=I.charCodeAt(D))&&56319>=s?(_=this.surrogateSize,this.charLength+=_,this.charReceived+=_,this.charBuffer.copy(this.charBuffer,_,0,_),this.charBuffer.write(I.charAt(I.length-1),this.encoding),I.substring(0,D)):I},Ce.prototype.detectIncompleteChar=function(_){for(var I=3<=_.length?3:_.length;0<I;I--){var D=_[_.length-I];if(1==I&&D>>5==6){this.charLength=2;break}if(2>=I&&D>>4==14){this.charLength=3;break}if(3>=I&&D>>3==30){this.charLength=4;break}}return I},Ce.prototype.end=function(_){var I="";return _&&_.length&&(I=this.write(_)),this.charReceived&&(_=this.encoding,I+=this.charBuffer.slice(0,this.charReceived).toString(_)),I}},{buffer:5}],22:[function(Ce,Ee,Be){function ye(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function j(re,oe,he){if(re&&N(re)&&re instanceof ye)return re;var pe=new ye;return pe.parse(re,oe,he),pe}function N(re){return"object"==typeof re&&null!==re}var T=Ce("punycode");Be.parse=j,Be.resolve=function(re,oe){return j(re,!1,!0).resolve(oe)},Be.resolveObject=function(re,oe){return re?j(re,!1,!0).resolveObject(oe):oe},Be.format=function(re){return"string"==typeof re&&(re=j(re)),re instanceof ye?re.format():ye.prototype.format.call(re)},Be.Url=ye;var _=/^([a-z0-9.+-]+:)/i,I=/:[0-9]*$/;Ee="{}|\\^`".split("").concat('<>"` \r\n\t'.split(""));var D=["'"].concat(Ee),O=["%","/","?",";","#"].concat(D),s=["/","?","#"],R=/^[a-z0-9A-Z_-]{0,63}$/,G=/^([a-z0-9A-Z_-]{0,63})(.*)$/,Y={javascript:!0,"javascript:":!0},X={javascript:!0,"javascript:":!0},fe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ne=Ce("querystring");ye.prototype.parse=function(re,oe,he){if("string"!=typeof re)throw new TypeError("Parameter 'url' must be a string, not "+typeof re);if(re=re.trim(),pe=_.exec(re)){var pe,V=(pe=pe[0]).toLowerCase();this.protocol=V,re=re.substr(pe.length)}if(he||pe||re.match(/^\/\/[^@\/]+@[^@\/]+/)){var W="//"===re.substr(0,2);!W||pe&&X[pe]||(re=re.substr(2),this.slashes=!0)}if(!X[pe]&&(W||pe&&!fe[pe])){for(W=-1,he=0;he<s.length;he++)-1!==(pe=re.indexOf(s[he]))&&(-1===W||pe<W)&&(W=pe);for(-1!==(W=-1===W?re.lastIndexOf("@"):re.lastIndexOf("@",W))&&(he=re.slice(0,W),re=re.slice(W+1),this.auth=decodeURIComponent(he)),W=-1,he=0;he<O.length;he++)-1!==(pe=re.indexOf(O[he]))&&(-1===W||pe<W)&&(W=pe);if(-1===W&&(W=re.length),this.host=re.slice(0,W),re=re.slice(W),this.parseHost(),this.hostname=this.hostname||"",!(W="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1])){var ee=this.hostname.split(/\./);for(he=0,pe=ee.length;he<pe;he++){var ge=ee[he];if(ge&&!ge.match(R)){for(var Se="",Le=0,Ne=ge.length;Le<Ne;Le++)Se=127<ge.charCodeAt(Le)?Se+"x":Se+ge[Le];if(!Se.match(R)){pe=ee.slice(0,he),he=ee.slice(he+1),(ge=ge.match(G))&&(pe.push(ge[1]),he.unshift(ge[2])),he.length&&(re="/"+he.join(".")+re),this.hostname=pe.join(".");break}}}}if(this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase(),!W){for(ge=this.hostname.split("."),ee=[],he=0;he<ge.length;++he)pe=ge[he],ee.push(pe.match(/[^A-Za-z0-9_-]/)?"xn--"+T.encode(pe):pe);this.hostname=ee.join(".")}he=this.port?":"+this.port:"",this.host=(this.hostname||"")+he,this.href+=this.host,W&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==re[0]&&(re="/"+re))}if(!Y[V])for(he=0,pe=D.length;he<pe;he++)W=D[he],(ge=encodeURIComponent(W))===W&&(ge=escape(W)),re=re.split(W).join(ge);return-1!==(he=re.indexOf("#"))&&(this.hash=re.substr(he),re=re.slice(0,he)),-1!==(he=re.indexOf("?"))?(this.search=re.substr(he),this.query=re.substr(he+1),oe&&(this.query=ne.parse(this.query)),re=re.slice(0,he)):oe&&(this.search="",this.query={}),re&&(this.pathname=re),fe[V]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(he=this.pathname||"",pe=this.search||"",this.path=he+pe),this.href=this.format(),this},ye.prototype.format=function(){var re=this.auth||"";re&&(re=(re=encodeURIComponent(re)).replace(/%3A/i,":"),re+="@");var oe=this.protocol||"",he=this.pathname||"",pe=this.hash||"",V=!1,W="";return this.host?V=re+this.host:this.hostname&&(V=re+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(V+=":"+this.port)),this.query&&N(this.query)&&Object.keys(this.query).length&&(W=ne.stringify(this.query)),re=this.search||W&&"?"+W||"",oe&&":"!==oe.substr(-1)&&(oe+=":"),this.slashes||(!oe||fe[oe])&&!1!==V?(V="//"+(V||""),he&&"/"!==he.charAt(0)&&(he="/"+he)):V||(V=""),pe&&"#"!==pe.charAt(0)&&(pe="#"+pe),re&&"?"!==re.charAt(0)&&(re="?"+re),oe+V+(he=he.replace(/[?#]/g,function(ee){return encodeURIComponent(ee)}))+(re=re.replace("#","%23"))+pe},ye.prototype.resolve=function(re){return this.resolveObject(j(re,!1,!0)).format()},ye.prototype.resolveObject=function(re){"string"==typeof re&&((he=new ye).parse(re,!1,!0),re=he);var oe=new ye;if(Object.keys(this).forEach(function(Ne){oe[Ne]=this[Ne]},this),oe.hash=re.hash,""===re.href)return oe.href=oe.format(),oe;if(re.slashes&&!re.protocol)return Object.keys(re).forEach(function(Ne){"protocol"!==Ne&&(oe[Ne]=re[Ne])}),fe[oe.protocol]&&oe.hostname&&!oe.pathname&&(oe.path=oe.pathname="/"),oe.href=oe.format(),oe;if(re.protocol&&re.protocol!==oe.protocol){if(!fe[re.protocol])return Object.keys(re).forEach(function(Ne){oe[Ne]=re[Ne]}),oe.href=oe.format(),oe;if(oe.protocol=re.protocol,re.host||X[re.protocol])oe.pathname=re.pathname;else{for(var ee=(re.pathname||"").split("/");ee.length&&!(re.host=ee.shift()););re.host||(re.host=""),re.hostname||(re.hostname=""),""!==ee[0]&&ee.unshift(""),2>ee.length&&ee.unshift(""),oe.pathname=ee.join("/")}return oe.search=re.search,oe.query=re.query,oe.host=re.host||"",oe.auth=re.auth,oe.hostname=re.hostname||re.host,oe.port=re.port,(oe.pathname||oe.search)&&(oe.path=(oe.pathname||"")+(oe.search||"")),oe.slashes=oe.slashes||re.slashes,oe.href=oe.format(),oe}var he=oe.pathname&&"/"===oe.pathname.charAt(0),V=he=(pe=re.host||re.pathname&&"/"===re.pathname.charAt(0))||he||oe.host&&re.pathname,W=oe.pathname&&oe.pathname.split("/")||[],ge=(ee=re.pathname&&re.pathname.split("/")||[],oe.protocol&&!fe[oe.protocol]);if(ge&&(oe.hostname="",oe.port=null,oe.host&&(""===W[0]?W[0]=oe.host:W.unshift(oe.host)),oe.host="",re.protocol&&(re.hostname=null,re.port=null,re.host&&(""===ee[0]?ee[0]=re.host:ee.unshift(re.host)),re.host=null),he=he&&(""===ee[0]||""===W[0])),pe)oe.host=re.host||""===re.host?re.host:oe.host,oe.hostname=re.hostname||""===re.hostname?re.hostname:oe.hostname,oe.search=re.search,oe.query=re.query,W=ee;else if(ee.length)W||(W=[]),W.pop(),W=W.concat(ee),oe.search=re.search,oe.query=re.query;else if(null!=re.search)return ge&&(oe.hostname=oe.host=W.shift(),ge=!!(oe.host&&0<oe.host.indexOf("@"))&&oe.host.split("@"))&&(oe.auth=ge.shift(),oe.host=oe.hostname=ge.shift()),oe.search=re.search,oe.query=re.query,(null!==oe.pathname||null!==oe.search)&&(oe.path=(oe.pathname?oe.pathname:"")+(oe.search?oe.search:"")),oe.href=oe.format(),oe;if(!W.length)return oe.pathname=null,oe.path=oe.search?"/"+oe.search:null,oe.href=oe.format(),oe;for(var pe=W.slice(-1)[0],Se=(ee=(oe.host||re.host)&&("."===pe||".."===pe)||""===pe,0),Le=W.length;0<=Le;Le--)"."==(pe=W[Le])?W.splice(Le,1):".."===pe?(W.splice(Le,1),Se++):Se&&(W.splice(Le,1),Se--);if(!he&&!V)for(;Se--;Se)W.unshift("..");return!he||""===W[0]||W[0]&&"/"===W[0].charAt(0)||W.unshift(""),ee&&"/"!==W.join("/").substr(-1)&&W.push(""),V=""===W[0]||W[0]&&"/"===W[0].charAt(0),ge&&(oe.hostname=oe.host=V?"":W.length?W.shift():"",ge=!!(oe.host&&0<oe.host.indexOf("@"))&&oe.host.split("@"))&&(oe.auth=ge.shift(),oe.host=oe.hostname=ge.shift()),(he=he||oe.host&&W.length)&&!V&&W.unshift(""),W.length?oe.pathname=W.join("/"):(oe.pathname=null,oe.path=null),(null!==oe.pathname||null!==oe.search)&&(oe.path=(oe.pathname?oe.pathname:"")+(oe.search?oe.search:"")),oe.auth=re.auth||oe.auth,oe.slashes=oe.slashes||re.slashes,oe.href=oe.format(),oe},ye.prototype.parseHost=function(){var re=this.host,oe=I.exec(re);oe&&(":"!==(oe=oe[0])&&(this.port=oe.substr(1)),re=re.substr(0,re.length-oe.length)),re&&(this.hostname=re)}},{punycode:10,querystring:13}],23:[function(Ce,Ee,Be){Ee.exports="function"==typeof Object.create?function(ye,j){ye.super_=j,ye.prototype=Object.create(j.prototype,{constructor:{value:ye,enumerable:!1,writable:!0,configurable:!0}})}:function(ye,j){ye.super_=j;var N=function(){};N.prototype=j.prototype,ye.prototype=new N,ye.prototype.constructor=ye}},{}],24:[function(Ce,Ee,Be){Ee.exports=function(ye){return ye&&"object"==typeof ye&&"function"==typeof ye.copy&&"function"==typeof ye.fill&&"function"==typeof ye.readUInt8}},{}],25:[function(Ce,Ee,Be){(function(ye,j){function N(ke,se){var me={seen:[],stylize:_};return 3<=arguments.length&&(me.depth=arguments[2]),4<=arguments.length&&(me.colors=arguments[3]),fe(se)?me.showHidden=se:se&&Be._extend(me,se),oe(me.showHidden)&&(me.showHidden=!1),oe(me.depth)&&(me.depth=2),oe(me.colors)&&(me.colors=!1),oe(me.customInspect)&&(me.customInspect=!0),me.colors&&(me.stylize=T),D(me,ke,me.depth)}function T(ke,se){var me=N.styles[se];return me?"\x1b["+N.colors[me][0]+"m"+ke+"\x1b["+N.colors[me][1]+"m":ke}function _(ke,se){return ke}function D(ke,se,me){if(ke.customInspect&&se&&ee(se.inspect)&&se.inspect!==Be.inspect&&(!se.constructor||se.constructor.prototype!==se))return re(Ze=se.inspect(me,ke))||(Ze=D(ke,Ze,me)),Ze;if(Ze=function O(ke,se){if(oe(se))return ke.stylize("undefined","undefined");if(re(se)){var me="'"+JSON.stringify(se).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ke.stylize(me,"string")}if(ne(se))return ke.stylize(""+se,"number");if(fe(se))return ke.stylize(""+se,"boolean");if(null===se)return ke.stylize("null","null")}(ke,se))return Ze;var _e=Object.keys(se),qe=function I(ke){var se={};return ke.forEach(function(me,_e){se[me]=!0}),se}(_e);if(ke.showHidden&&(_e=Object.getOwnPropertyNames(se)),W(se)&&(0<=_e.indexOf("message")||0<=_e.indexOf("description")))return s(se);if(0===_e.length){if(ee(se))return ke.stylize("[Function"+(se.name?": "+se.name:"")+"]","special");if(he(se))return ke.stylize(RegExp.prototype.toString.call(se),"regexp");if(V(se))return ke.stylize(Date.prototype.toString.call(se),"date");if(W(se))return s(se)}var Ze="",st=!1,yt=["{","}"];return X(se)&&(st=!0,yt=["[","]"]),ee(se)&&(Ze=" [Function"+(se.name?": "+se.name:"")+"]"),he(se)&&(Ze=" "+RegExp.prototype.toString.call(se)),V(se)&&(Ze=" "+Date.prototype.toUTCString.call(se)),W(se)&&(Ze=" "+s(se)),0!==_e.length||st&&0!=se.length?0>me?he(se)?ke.stylize(RegExp.prototype.toString.call(se),"regexp"):ke.stylize("[Object]","special"):(ke.seen.push(se),_e=st?function R(ke,se,me,_e,qe){for(var Ze=[],st=0,yt=se.length;st<yt;++st)Object.prototype.hasOwnProperty.call(se,String(st))?Ze.push(G(ke,se,me,_e,String(st),!0)):Ze.push("");return qe.forEach(function(vt){vt.match(/^\d+$/)||Ze.push(G(ke,se,me,_e,vt,!0))}),Ze}(ke,se,me,qe,_e):_e.map(function(vt){return G(ke,se,me,qe,vt,st)}),ke.seen.pop(),function Y(ke,se,me){return 60<ke.reduce(function(qe,Ze){return 0<=Ze.indexOf("\n")&&0,qe+Ze.replace(/\u001b\[\d\d?m/g,"").length+1},0)?me[0]+(""===se?"":se+"\n ")+" "+ke.join(",\n  ")+" "+me[1]:me[0]+se+" "+ke.join(", ")+" "+me[1]}(_e,Ze,yt)):yt[0]+Ze+yt[1]}function s(ke){return"["+Error.prototype.toString.call(ke)+"]"}function G(ke,se,me,_e,qe,Ze){var st,yt;if((se=Object.getOwnPropertyDescriptor(se,qe)||{value:se[qe]}).get?yt=se.set?ke.stylize("[Getter/Setter]","special"):ke.stylize("[Getter]","special"):se.set&&(yt=ke.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(_e,qe)||(st="["+qe+"]"),yt||(0>ke.seen.indexOf(se.value)?-1<(yt=D(ke,se.value,null===me?null:me-1)).indexOf("\n")&&(yt=Ze?yt.split("\n").map(function(vt){return"  "+vt}).join("\n").substr(2):"\n"+yt.split("\n").map(function(vt){return"   "+vt}).join("\n")):yt=ke.stylize("[Circular]","special")),oe(st)){if(Ze&&qe.match(/^\d+$/))return yt;(st=JSON.stringify(""+qe)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(st=st.substr(1,st.length-2),st=ke.stylize(st,"name")):(st=st.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),st=ke.stylize(st,"string"))}return st+": "+yt}function X(ke){return Array.isArray(ke)}function fe(ke){return"boolean"==typeof ke}function ne(ke){return"number"==typeof ke}function re(ke){return"string"==typeof ke}function oe(ke){return void 0===ke}function he(ke){return pe(ke)&&"[object RegExp]"===Object.prototype.toString.call(ke)}function pe(ke){return"object"==typeof ke&&null!==ke}function V(ke){return pe(ke)&&"[object Date]"===Object.prototype.toString.call(ke)}function W(ke){return pe(ke)&&("[object Error]"===Object.prototype.toString.call(ke)||ke instanceof Error)}function ee(ke){return"function"==typeof ke}function ge(ke){return 10>ke?"0"+ke.toString(10):ke.toString(10)}function Se(){var ke=new Date,se=[ge(ke.getHours()),ge(ke.getMinutes()),ge(ke.getSeconds())].join(":");return[ke.getDate(),$e[ke.getMonth()],se].join(" ")}var Le=/%[sdj%]/g;Be.format=function(ke){if(!re(ke)){for(var se=[],me=0;me<arguments.length;me++)se.push(N(arguments[me]));return se.join(" ")}me=1;for(var _e=arguments,qe=_e.length,Ze=(se=String(ke).replace(Le,function(vt){if("%%"===vt)return"%";if(me>=qe)return vt;switch(vt){case"%s":return String(_e[me++]);case"%d":return Number(_e[me++]);case"%j":try{return JSON.stringify(_e[me++])}catch(Kt){return"[Circular]"}default:return vt}}),_e[me]);me<qe;Ze=_e[++me])se=null!==Ze&&pe(Ze)?se+" "+N(Ze):se+" "+Ze;return se},Be.deprecate=function(ke,se){if(oe(j.process))return function(){return Be.deprecate(ke,se).apply(this,arguments)};if(!0===ye.noDeprecation)return ke;var me=!1;return function(){if(!me){if(ye.throwDeprecation)throw Error(se);ye.traceDeprecation?console.trace(se):console.error(se),me=!0}return ke.apply(this,arguments)}};var Qe,Ne={};Be.debuglog=function(ke){if(oe(Qe)&&(Qe=ye.env.NODE_DEBUG||""),ke=ke.toUpperCase(),!Ne[ke])if(new RegExp("\\b"+ke+"\\b","i").test(Qe)){var se=ye.pid;Ne[ke]=function(){var me=Be.format.apply(Be,arguments);console.error("%s %d: %s",ke,se,me)}}else Ne[ke]=function(){};return Ne[ke]},Be.inspect=N,N.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},N.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},Be.isArray=X,Be.isBoolean=fe,Be.isNull=function(ke){return null===ke},Be.isNullOrUndefined=function(ke){return null==ke},Be.isNumber=ne,Be.isString=re,Be.isSymbol=function(ke){return"symbol"==typeof ke},Be.isUndefined=oe,Be.isRegExp=he,Be.isObject=pe,Be.isDate=V,Be.isError=W,Be.isFunction=ee,Be.isPrimitive=function(ke){return null===ke||"boolean"==typeof ke||"number"==typeof ke||"string"==typeof ke||"symbol"==typeof ke||void 0===ke},Be.isBuffer=Ce("./support/isBuffer");var $e="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");Be.log=function(){console.log("%s - %s",Se(),Be.format.apply(Be,arguments))},Be.inherits=Ce("inherits"),Be._extend=function(ke,se){if(!se||!pe(se))return ke;for(var me=Object.keys(se),_e=me.length;_e--;)ke[me[_e]]=se[me[_e]];return ke}}).call(this,Ce("2ionoC"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":24,"2ionoC":9,inherits:23}],26:[function(Ce,Ee,Be){var ye=Ee.exports;Ce("events");var j=Ce("./lib/request"),N=Ce("url");ye.request=function(_,I){"string"==typeof _&&(_=N.parse(_)),_||(_={}),_.host||_.port||(_.port=parseInt(window.location.port,10)),!_.host&&_.hostname&&(_.host=_.hostname),_.scheme||(_.scheme=window.location.protocol.split(":")[0]),_.host||(_.host=window.location.hostname||window.location.host),/:/.test(_.host)&&(_.port||(_.port=_.host.split(":")[1]),_.host=_.host.split(":")[0]),_.port||(_.port="https"==_.scheme?443:80);var D=new j(new T,_);return I&&D.on("response",I),D},ye.get=function(_,I){_.method="GET";var D=ye.request(_,I);return D.end(),D},ye.Agent=function(){},ye.Agent.defaultMaxSockets=4;var T=function(){if("undefined"==typeof window)throw Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject)for(var _=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],I=0;I<_.length;I++)try{var D=new window.ActiveXObject(_[I]);return function(){if(D){var O=D;return D=null,O}return new window.ActiveXObject(_[I])}}catch(O){}throw Error("ajax not supported in this browser")}();ye.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":27,events:6,url:22}],27:[function(Ce,Ee,Be){Be=Ce("stream");var ye=Ce("./response"),j=Ce("Base64");Ce=Ce("inherits");var N=Ee.exports=function(I,D){var O=this;O.writable=!0,O.xhr=I,O.body=[],O.uri=(D.scheme||"http")+"://"+D.host+(D.port?":"+D.port:"")+(D.path||"/"),void 0===D.withCredentials&&(D.withCredentials=!0);try{I.withCredentials=D.withCredentials}catch(X){}if(I.open(D.method||"GET",O.uri,!0),O._headers={},D.headers)for(var s=T(D.headers),R=0;R<s.length;R++){var G=s[R];O.isSafeRequestHeader(G)&&O.setHeader(G,D.headers[G])}D.auth&&this.setHeader("Authorization","Basic "+j.btoa(D.auth));var Y=new ye;Y.on("close",function(){O.emit("close")}),Y.on("ready",function(){O.emit("response",Y)}),I.onreadystatechange=function(){I.__aborted||Y.handle(I)}};Ce(N,Be),N.prototype.setHeader=function(I,D){this._headers[I.toLowerCase()]=D},N.prototype.getHeader=function(I){return this._headers[I.toLowerCase()]},N.prototype.removeHeader=function(I){delete this._headers[I.toLowerCase()]},N.prototype.write=function(I){this.body.push(I)},N.prototype.destroy=function(I){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},N.prototype.end=function(I){void 0!==I&&this.body.push(I);var D=T(this._headers);for(I=0;I<D.length;I++){var O=D[I],s=this._headers[O];if(_(s))for(var R=0;R<s.length;R++)this.xhr.setRequestHeader(O,s[R]);else this.xhr.setRequestHeader(O,s)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else{if(_(this.body[0]))for(D=[],I=0;I<this.body.length;I++)D.push.apply(D,this.body[I]);else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(I=R=0;I<this.body.length;I++)R+=this.body[I].length;for(D=new this.body[0].constructor(R),I=O=0;I<this.body.length;I++)for(s=this.body[I],R=0;R<s.length;R++)D[O++]=s[R]}else for(D="",I=0;I<this.body.length;I++)D+=this.body[I].toString();this.xhr.send(D)}},N.unsafeHeaders="accept-charset accept-encoding access-control-request-headers access-control-request-method connection content-length cookie cookie2 content-transfer-encoding date expect host keep-alive origin referer te trailer transfer-encoding upgrade user-agent via".split(" "),N.prototype.isSafeRequestHeader=function(I){if(!I)return!1;var D;e:if(D=N.unsafeHeaders,I=I.toLowerCase(),D.indexOf)D=D.indexOf(I);else{for(var O=0;O<D.length;O++)if(D[O]===I){D=O;break e}D=-1}return-1===D};var T=Object.keys||function(I){var O,D=[];for(O in I)D.push(O);return D},_=Array.isArray||function(I){return"[object Array]"===Object.prototype.toString.call(I)}},{"./response":28,Base64:1,inherits:29,stream:15}],28:[function(Ce,Ee,Be){function ye(_){_=_.getAllResponseHeaders().split(/\r?\n/);for(var I={},D=0;D<_.length;D++){var O=_[D];if(""!==O){var s=O.match(/^([^:]+):\s*(.*)/);s?(O=s[1].toLowerCase(),s=s[2],void 0!==I[O]?T(I[O])?I[O].push(s):I[O]=[I[O],s]:I[O]=s):I[O]=!0}}return I}Be=Ce("stream"),Ce=Ce("util"),Ee=Ee.exports=function(_){this.offset=0,this.readable=!0},Ce.inherits(Ee,Be);var j=!0,N=!0;Ee.prototype.getResponse=function(_){var I=String(_.responseType).toLowerCase();return"blob"===I?_.responseBlob||_.response:"arraybuffer"===I?_.response:_.responseText},Ee.prototype.getHeader=function(_){return this.headers[_.toLowerCase()]},Ee.prototype.handle=function(_){if(2===_.readyState&&N){try{this.statusCode=_.status,this.headers=ye(_)}catch(I){N=!1}N&&this.emit("ready")}else if(j&&3===_.readyState){try{this.statusCode||(this.statusCode=_.status,this.headers=ye(_),this.emit("ready"))}catch(I){}try{this._emitData(_)}catch(I){j=!1}}else 4===_.readyState&&(this.statusCode||(this.statusCode=_.status,this.emit("ready")),this._emitData(_),_.error?this.emit("error",this.getResponse(_)):this.emit("end"),this.emit("close"))},Ee.prototype._emitData=function(_){(_=this.getResponse(_)).toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(_,this.offset)),this.offset=_.byteLength):_.length>this.offset&&(this.emit("data",_.slice(this.offset)),this.offset=_.length)};var T=Array.isArray||function(_){return"[object Array]"===Object.prototype.toString.call(_)}},{stream:15,util:25}],29:[function(Ce,Ee,Be){Ee.exports="function"==typeof Object.create?function(ye,j){j&&(ye.super_=j,ye.prototype=Object.create(j.prototype,{constructor:{value:ye,enumerable:!1,writable:!0,configurable:!0}}))}:function(ye,j){if(j){ye.super_=j;var N=function(){};N.prototype=j.prototype,ye.prototype=new N,ye.prototype.constructor=ye}}},{}],30:[function(Ce,Ee,Be){},{}],31:[function(Ce,Ee,Be){(function(ye,j,N){!function(){var T=void 0!==ye&&ye.versions&&ye.versions.node,_=!T&&("undefined"!=typeof window||"undefined"!=typeof self);_&&void 0===j&&("undefined"!=typeof window?j=window:"undefined"!=typeof self?j=self:"undefined"!=typeof $&&(j=$));var I=function(O){function s(){}function R(H,z){if(se(z))for(var q=0;q<z.length;++q)z[q]=R(H,z[q]);else if(vt(z))z["@list"]=R(H,z["@list"]);else if(ke(z)){Kt(z)&&(z["@id"]=H.getId(z["@id"]));q=Object.keys(z).sort();for(var ue=0;ue<q.length;++ue){var le=q[ue];"@id"!==le&&(z[le]=R(H,z[le]))}}return z}function Y(H){var z={};if(yt(H)){z.type="literal";var q=H["@value"],ue=H["@type"]||null;"boolean"==typeof q||"[object Boolean]"===Object.prototype.toString.call(q)?(z.value=q.toString(),z.datatype=ue||"http://www.w3.org/2001/XMLSchema#boolean"):qe(q)||"http://www.w3.org/2001/XMLSchema#double"===ue?(qe(q)||(q=parseFloat(q)),z.value=q.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),z.datatype=ue||"http://www.w3.org/2001/XMLSchema#double"):_e(q)?(z.value=q.toFixed(0),z.datatype=ue||"http://www.w3.org/2001/XMLSchema#integer"):"@language"in H?(z.value=q,z.datatype=ue||Fr,z.language=H["@language"]):(z.value=q,z.datatype=ue||$t)}else H=ke(H)?H["@id"]:H,z.type=0===H.indexOf("_:")?"blank node":"IRI",z.value=H;return"IRI"!==z.type||Mt(z.value)?z:null}function X(H,z,q,ue,le,Z){if(se(H))for(var ae=0;ae<H.length;++ae)X(H[ae],z,q,ue,void 0,Z);else if(ke(H))if(yt(H)){if("@type"in H){var xe=H["@type"];0===xe.indexOf("_:")&&(H["@type"]=ue.getId(xe))}Z&&Z.push(H)}else{if("@type"in H){var Fe=H["@type"];for(ae=0;ae<Fe.length;++ae)0===(xe=Fe[ae]).indexOf("_:")&&ue.getId(xe)}for(Ze(le)&&(le=Kt(H)?ue.getId(H["@id"]):H["@id"]),Z&&Z.push({"@id":le}),(ae=(Z=z[q])[le]=Z[le]||{})["@id"]=le,xe=Object.keys(H).sort(),Fe=0;Fe<xe.length;++Fe){if("@id"!==(Ae=xe[Fe]))if("@reverse"===Ae){var Ie,Ae={"@id":le},Me=H["@reverse"];for(Ie in Me)for(var Re=Me[Ie],Oe=0;Oe<Re.length;++Oe){var Xe=Re[Oe],et=Xe["@id"];Kt(Xe)&&(et=ue.getId(et)),X(Xe,z,q,ue,et),O.addValue(Z[et],Ie,Ae,{propertyIsArray:!0,allowDuplicate:!1})}}else if("@graph"===Ae)le in z||(z[le]={}),X(H[Ae],z,"@merged"===q?q:le,ue);else if("@type"!==Ae&&$e(Ae)){if("@index"===Ae&&Ae in ae&&(H[Ae]!==ae[Ae]||H[Ae]["@id"]!==ae[Ae]["@id"]))throw new Pe("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:ae});ae[Ae]=H[Ae]}else if(Me=H[Ae],0===Ae.indexOf("_:")&&(Ae=ue.getId(Ae)),0===Me.length)O.addValue(ae,Ae,[],{propertyIsArray:!0});else for(Re=0;Re<Me.length;++Re)Oe=Me[Re],"@type"===Ae&&(Oe=0===Oe.indexOf("_:")?ue.getId(Oe):Oe),et=!1,!ke(Xe=Oe)||"@value"in Xe||"@set"in Xe||"@list"in Xe||(et=1<Object.keys(Xe).length||!("@id"in Xe)),et||st(Oe)?(Xe=Kt(Oe)?ue.getId(Oe["@id"]):Oe["@id"],O.addValue(ae,Ae,{"@id":Xe},{propertyIsArray:!0,allowDuplicate:!1}),X(Oe,z,q,ue,Xe)):(vt(Oe)?(Xe=[],X(Oe["@list"],z,q,ue,le,Xe),Oe={"@list":Xe}):X(Oe,z,q,ue,le),O.addValue(ae,Ae,Oe,{propertyIsArray:!0,allowDuplicate:!1}))}}else Z&&Z.push(H)}function fe(H){for(var z=H["@default"],q=Object.keys(H).sort(),ue=0;ue<q.length;++ue){if("@default"!==(le=q[ue])){var Z=H[le];(ae=z[le])?"@graph"in ae||(ae["@graph"]=[]):z[le]=ae={"@id":le,"@graph":[]};for(var le=ae["@graph"],ae=Object.keys(Z).sort(),xe=0;xe<ae.length;++xe){var Fe=Z[ae[xe]];st(Fe)||le.push(Fe)}}}return z}function ne(H,z,q,ue,le){if(!se(Z=q)||1!==Z.length||!ke(Z[0]))throw new Pe("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:Z});for(var Z,ae={embed:oe(q=q[0],Z=H.options,"embed"),explicit:oe(q,Z,"explicit"),requireAll:oe(q,Z,"requireAll")},xe=q,Fe={},Ae=0;Ae<z.length;++Ae){var Me=z[Ae],Ie=H.subjects[Me];he(Ie,xe,ae)&&(Fe[Me]=Ie)}for(z=Object.keys(Fe).sort(),xe=0;xe<z.length;++xe)if(Me=Fe[Ie=z[xe]],"@link"===ae.embed&&Ie in H.link)V(ue,le,H.link[Ie]);else{var Re;if(null===le&&(H.uniqueEmbeds={}),(Ae={})["@id"]=Ie,H.link[Ie]=Ae,!(Re="@never"===ae.embed))e:{for(var Oe=(Re=H.subjectStack).length-1;0<=Oe;--Oe)if(Re[Oe]["@id"]===Me["@id"]){Re=!0;break e}Re=!1}if(Re)V(ue,le,Ae);else{for(("@last"===ae.embed&&(Ie in H.uniqueEmbeds&&pe(H,Ie),H.uniqueEmbeds[Ie]={parent:ue,property:le}),H.subjectStack.push(Me),Ie=Object.keys(Me).sort(),Re=0);Re<Ie.length;Re++)if($e(Oe=Ie[Re]))Ae[Oe]=tt(Me[Oe]);else if(!ae.explicit||Oe in q)for(var Xe=Me[Oe],et=0;et<Xe.length;++et){var Je=Xe[et];if(vt(Je)){var _t={"@list":[]};V(Ae,Oe,_t);var wt,mt=Je["@list"];for(wt in mt)if(st(Je=mt[wt])){var At=Oe in q?q[Oe][0]["@list"]:re(ae);ne(H,[Je["@id"]],At,_t,"@list")}else V(_t,"@list",tt(Je))}else st(Je)?(At=Oe in q?q[Oe]:re(ae),ne(H,[Je["@id"]],At,Ae,Oe)):V(Ae,Oe,tt(Je))}for(Ie=Object.keys(q).sort(),Re=0;Re<Ie.length;++Re)$e(Oe=Ie[Re])||(oe(Me=q[Oe][0],Z,"omitDefault")||Oe in Ae||(Xe="@null","@default"in Me&&(Xe=tt(Me["@default"])),se(Xe)||(Xe=[Xe]),Ae[Oe]=[{"@preserve":Xe}]));V(ue,le,Ae),H.subjectStack.pop()}}}function re(H){var q,z={};for(q in H)void 0!==H[q]&&(z["@"+q]=[H[q]]);return[z]}function oe(H,z,q){var ue="@"+q;return H=ue in H?H[ue][0]:z[q],"embed"===q&&(!0===H?H="@last":!1===H?H="@never":"@always"!==H&&"@never"!==H&&"@link"!==H&&(H="@last")),H}function he(H,z,q){if("@type"in z&&(1!==z["@type"].length||!ke(z["@type"][0]))){for(z=z["@type"],q=0;q<z.length;++q)if(O.hasValue(H,"@type",z[q]))return!0;return!1}var Z,ue=!0,le=!1;for(Z in z){if($e(Z)){if("@id"!==Z&&"@type"!==Z)continue;if(ue=!1,"@id"===Z&&me(z[Z])){if(H[Z]!==z[Z])return!1;le=!0;continue}}if(ue=!1,Z in H){if(se(z[Z])&&0===z[Z].length&&void 0!==H[Z])return!1;le=!0}else{var ae=se(z[Z])&&ke(z[Z][0])&&"@default"in z[Z][0];if(q.requireAll&&!ae)return!1}}return ue||le}function pe(H,z){var q=H.uniqueEmbeds,ue=(Z=q[z]).parent,le=Z.property,Z={"@id":z};if(se(ue)){for(le=0;le<ue.length;++le)if(O.compareValues(ue[le],Z)){ue[le]=Z;break}}else{var ae=se(ue[le]);O.removeValue(ue,le,Z,{propertyIsArray:ae}),O.addValue(ue,le,Z,{propertyIsArray:ae})}var xe=function(Fe){for(var Ae=Object.keys(q),Me=0;Me<Ae.length;++Me){var Ie=Ae[Me];Ie in q&&ke(q[Ie].parent)&&q[Ie].parent["@id"]===Fe&&(delete q[Ie],xe(Ie))}};xe(z)}function V(H,z,q){ke(H)?O.addValue(H,z,q,{propertyIsArray:!0}):H.push(q)}function W(H,z,q){if(se(z)){for(var ue=[],le=0;le<z.length;++le){var Z=W(H,z[le],q);null!==Z&&ue.push(Z)}z=ue}else if(ke(z)){if("@preserve"in z)return"@null"===z["@preserve"]?null:z["@preserve"];if(yt(z))return z;if(vt(z))return z["@list"]=W(H,z["@list"],q),z;if((Z=ge(H,"@id"))in z)if((Z=z[Z])in q.link){if(-1!==(le=q.link[Z].indexOf(z)))return q.link[Z][le];q.link[Z].push(z)}else q.link[Z]=[z];for(ue in z)Z=W(H,z[ue],q),le=O.getContextValue(H,ue,"@container"),q.compactArrays&&se(Z)&&1===Z.length&&null===le&&(Z=Z[0]),z[ue]=Z}return z}function ee(H,z){return H.length<z.length?-1:z.length<H.length?1:H===z?0:H<z?-1:1}function ge(H,z,q,ue,le){if(null===z)return z;Ze(q)&&(q=null),Ze(le)&&(le=!1),ue=ue||{};var Z=H.getInverse();if($e(z))return z in Z?Z[z]["@none"]["@type"]["@none"]:z;if(ue.vocab&&z in Z){var ae=H["@language"]||"@none";Z=[];ke(q)&&"@index"in q&&Z.push("@index");var xe="@language",Fe="@null";if(le)xe="@type",Fe="@reverse",Z.push("@set");else if(vt(q)){"@index"in q||Z.push("@list");var Ae=q["@list"];Fe=0===Ae.length?ae:null,ae=null;for(le=0;le<Ae.length;++le){var Me=Ae[le],Ie="@none",Re="@none";if(yt(Me)?"@language"in Me?Ie=Me["@language"]:"@type"in Me?Re=Me["@type"]:Ie="@null":Re="@id",null===Fe?Fe=Ie:Ie!==Fe&&yt(Me)&&(Fe="@none"),null===ae?ae=Re:Re!==ae&&(ae="@none"),"@none"===Fe&&"@none"===ae)break}Fe=Fe||"@none","@none"!==(ae=ae||"@none")&&(xe="@type",Fe=ae)}else yt(q)?"@language"in q&&!("@index"in q)?(Z.push("@language"),Fe=q["@language"]):"@type"in q&&(xe="@type",Fe=q["@type"]):(xe="@type",Fe="@id"),Z.push("@set");Z.push("@none");e:{for((Ae=q,le=xe,null===Fe&&(Fe="@null"),xe=[],"@id"!==Fe&&"@reverse"!==Fe||!st(Ae)?xe.push(Fe):("@reverse"===Fe&&xe.push("@reverse"),(Fe=ge(H,Ae["@id"],null,{vocab:!0}))in H.mappings&&H.mappings[Fe]&&H.mappings[Fe]["@id"]===Ae["@id"]?xe.push.apply(xe,["@vocab","@id"]):xe.push.apply(xe,["@id","@vocab"])),xe.push("@none"),Ae=H.inverse[z],Fe=0);Fe<Z.length;++Fe)if((ae=Z[Fe])in Ae)for(ae=Ae[ae][le],Me=0;Me<xe.length;++Me)if((Ie=xe[Me])in ae){Z=ae[Ie];break e}Z=null}if(null!==Z)return Z}if(ue.vocab&&"@vocab"in H&&(Z=H["@vocab"],0===z.indexOf(Z)&&z!==Z&&!((Z=z.substr(Z.length))in H.mappings)))return Z;for(Z=null,le=0,xe=[],Ae=H.fastCurieMap,Fe=z.length-1;le<Fe&&z[le]in Ae;++le)""in(Ae=Ae[z[le]])&&xe.push(Ae[""][0]);for(le=xe.length-1;0<=le;--le)for(Fe=(Ae=xe[le]).terms,ae=0;ae<Fe.length;++ae)(Me=Fe[ae]+":"+z.substr(Ae.iri.length))in H.mappings&&(null!==q||H.mappings[Me]["@id"]!==z)||!(null===Z||0>ee(Me,Z))||(Z=Me);if(null!==Z)return Z;if(!ue.vocab&&(null!==(H=H["@base"])&&(me(H)&&(H=O.url.parse(H||"")),q="",""!==H.href?q+=(H.protocol||"")+"//"+(H.authority||""):z.indexOf("//")&&(q+="//"),0===z.indexOf(q)))){for(z=O.url.parse(z.substr(q.length)),H=H.normalizedPath.split("/"),q=z.normalizedPath.split("/"),ue=z.fragment||z.query?0:1;0<H.length&&q.length>ue&&H[0]===q[0];)H.shift(),q.shift();if(ue="",0<H.length)for(H.pop(),Z=0;Z<H.length;++Z)ue+="../";ue+=q.join("/"),null!==z.query&&(ue+="?"+z.query),null!==z.fragment&&(ue+="#"+z.fragment),""===ue&&(ue="./"),z=ue}return z}function Le(H,z,q,ue){if(q in ue){if(ue[q])return;throw new Pe("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:z,term:q})}if(ue[q]=!1,$e(q))throw new Pe("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:z,term:q});if(""===q)throw new Pe("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:z});H.mappings[q]&&delete H.mappings[q];var le=z[q];if(null===le||ke(le)&&null===le["@id"])H.mappings[q]=null,ue[q]=!0;else{if(me(le)&&(le={"@id":le}),!ke(le))throw new Pe("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:z});var Z=H.mappings[q]={};if(Z.reverse=!1,"@reverse"in le){if("@id"in le)throw new Pe("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:z});var ae=le["@reverse"];if(!me(ae))throw new Pe("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:z});if(!Mt(ae=Ne(H,ae,{vocab:!0,base:!1},z,ue)))throw new Pe("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:z});Z["@id"]=ae,Z.reverse=!0}else if("@id"in le){if(!me(ae=le["@id"]))throw new Pe("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:z});if(ae!==q){if(!Mt(ae=Ne(H,ae,{vocab:!0,base:!1},z,ue))&&!$e(ae))throw new Pe("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:z});Z["@id"]=ae}}var xe=q.indexOf(":");if(Z._termHasColon=-1!==xe,!("@id"in Z))if(Z._termHasColon)(ae=q.substr(0,xe))in z&&Le(H,z,ae,ue),H.mappings[ae]?(xe=q.substr(xe+1),Z["@id"]=H.mappings[ae]["@id"]+xe):Z["@id"]=q;else{if(!("@vocab"in H))throw new Pe("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:z,term:q});Z["@id"]=H["@vocab"]+q}if(ue[q]=!0,"@type"in le){if(!me(q=le["@type"]))throw new Pe("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:z});if("@id"!==q&&"@vocab"!==q){if(!Mt(q=Ne(H,q,{vocab:!0,base:!1},z,ue)))throw new Pe("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:z});if(0===q.indexOf("_:"))throw new Pe("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:z})}Z["@type"]=q}if("@container"in le){if("@list"!==(H=le["@container"])&&"@set"!==H&&"@index"!==H&&"@language"!==H)throw new Pe("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:z});if(Z.reverse&&"@index"!==H&&"@set"!==H&&null!==H)throw new Pe("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:z});Z["@container"]=H}if("@language"in le&&!("@type"in le)){if(null!==(le=le["@language"])&&!me(le))throw new Pe("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:z});null!==le&&(le=le.toLowerCase()),Z["@language"]=le}if("@context"===(ae=Z["@id"])||"@preserve"===ae)throw new Pe("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:z})}}function Ne(H,z,q,ue,le){if(null===z||$e(z))return z;if(z=String(z),ue&&z in ue&&!0!==le[z]&&Le(H,ue,z,le),(q=q||{}).vocab){var Z=H.mappings[z];if(null===Z)return null;if(Z)return Z["@id"]}if(-1!==(Z=z.indexOf(":"))){q=z.substr(0,Z);var ae=z.substr(Z+1);return"_"===q||0===ae.indexOf("//")?z:(ue&&q in ue&&Le(H,ue,q,le),(Z=H.mappings[q])?Z["@id"]+ae:z)}return q.vocab&&"@vocab"in H?H["@vocab"]+z:(q.base&&(z=O.prependBase(H["@base"],z)),z)}function Qe(H){function z(q,ue,le){var Z=q[ue];q=q[ue]={};for(var ae,xe=0;xe<Z.length;++xe)(ae=le>=(ae=Z[xe].iri).length?"":ae[le])in q?q[ae].push(Z[xe]):q[ae]=[Z[xe]];for(ue in q)""!==ue&&z(q,ue,le+1)}return{"@base":O.url.parse(H.base||""),mappings:{},inverse:null,getInverse:function(){if(this.inverse)return this.inverse;for(var q=this.inverse={},ue=this.fastCurieMap={},le={},Z=this["@language"]||"@none",ae=this.mappings,xe=Object.keys(ae).sort(ee),Fe=0;Fe<xe.length;++Fe){var Ae=xe[Fe],Me=ae[Ae];if(null!==Me){var Ie=Me["@container"]||"@none",Re=Me["@id"];se(Re)||(Re=[Re]);for(var Oe=0;Oe<Re.length;++Oe){var Xe=Re[Oe],et=q[Xe],Je=$e(Xe);et?Je||Me._termHasColon||le[Xe].push(Ae):(q[Xe]=et={},Je||Me._termHasColon||(le[Xe]=[Ae],Je={iri:Xe,terms:le[Xe]},Xe[0]in ue?ue[Xe[0]].push(Je):ue[Xe[0]]=[Je])),et[Ie]||(et[Ie]={"@language":{},"@type":{}}),et=et[Ie],Me.reverse?"@reverse"in(et=et["@type"])||(et["@reverse"]=Ae):"@type"in Me?(et=et["@type"],(Xe=Me["@type"])in et||(et[Xe]=Ae)):"@language"in Me?(et=et["@language"],(Xe=Me["@language"]||"@null")in et||(et[Xe]=Ae)):(Z in(Xe=et["@language"])||(Xe[Z]=Ae),"@none"in(Xe=et["@type"])||(Xe["@none"]=Ae),"@none"in(et=et["@language"])||(et["@none"]=Ae))}}}for(var _t in ue)z(ue,_t,1);return q},clone:function(){var q={};return q["@base"]=this["@base"],q.mappings=tt(this.mappings),q.clone=this.clone,q.inverse=null,q.getInverse=this.getInverse,"@language"in this&&(q["@language"]=this["@language"]),"@vocab"in this&&(q["@vocab"]=this["@vocab"]),q}}}function $e(H){if(!me(H))return!1;switch(H){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function ke(H){return"[object Object]"===Object.prototype.toString.call(H)}function se(H){return Array.isArray(H)}function me(H){return"string"==typeof H||"[object String]"===Object.prototype.toString.call(H)}function _e(H){return"number"==typeof H||"[object Number]"===Object.prototype.toString.call(H)}function qe(H){return _e(H)&&-1!==String(H).indexOf(".")}function Ze(H){return void 0===H}function st(H){return ke(H)&&1===Object.keys(H).length&&"@id"in H}function yt(H){return ke(H)&&"@value"in H}function vt(H){return ke(H)&&"@list"in H}function Kt(H){var z=!1;return ke(H)&&(z="@id"in H?0===H["@id"].indexOf("_:"):0===Object.keys(H).length||!("@value"in H||"@set"in H||"@list"in H)),z}function Mt(H){return me(H)&&-1!==H.indexOf(":")}function tt(H){if(H&&"object"==typeof H){var z;if(se(H)){z=[];for(var q=0;q<H.length;++q)z[q]=tt(H[q])}else if(ke(H))for(q in z={},H)z[q]=tt(H[q]);else z=H.toString();return z}return H}function ot(H,z,q,ue){var le=Object.keys(z).length;if(se(H)){for(var Z=0;Z<H.length;++Z)ot(H[Z],z,q,ue);return le<Object.keys(z).length}if(ke(H)){for(var ae in H)if("@context"!==ae)ot(H[ae],z,q,ue);else{var xe=H[ae];if(se(xe)){var Fe=xe.length;for(Z=0;Z<Fe;++Z){var Ae=xe[Z];me(Ae)&&(Ae=O.prependBase(ue,Ae),q?se(Ae=z[Ae])?(Array.prototype.splice.apply(xe,[Z,1].concat(Ae)),Z+=Ae.length-1,Fe=xe.length):xe[Z]=Ae:Ae in z||(z[Ae]=!1))}}else me(xe)&&(xe=O.prependBase(ue,xe),q?H[ae]=z[xe]:xe in z||(z[xe]=!1))}return le<Object.keys(z).length}return!1}function dt(H,z,q){var ue=null,le=function(Z,ae,xe,Fe,Ae){if(Object.keys(ae).length>Ke)return ue=new Pe("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:Ke}),Ae(ue);var Me={};if(ot(Z,Me,!1,Fe)){var Re,Ie=[];for(Re in Me)!1===Me[Re]&&Ie.push(Re);var Oe=Ie.length;for(Re=0;Re<Ie.length;++Re)!function(Xe){if(Xe in ae)return ue=new Pe("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:Xe}),Ae(ue);var et=tt(ae);et[Xe]=!0;var Je=function(mt,wt){if(!ue){var At=wt?wt.document:null;if(!mt&&me(At))try{At=JSON.parse(At)}catch(Pt){mt=Pt}if(mt?mt=new Pe("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:Xe,cause:mt}):ke(At)||(mt=new Pe("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:Xe,cause:mt})),mt)return Ae(ue=mt);At="@context"in At?{"@context":At["@context"]}:{"@context":{}},wt.contextUrl&&(se(At["@context"])||(At["@context"]=[At["@context"]]),At["@context"].push(wt.contextUrl)),le(At,et,xe,Xe,function(Pt,Ot){if(Pt)return Ae(Pt);Me[Xe]=Ot["@context"],0===--Oe&&(ot(Z,Me,!0,Fe),Ae(null,Z))})}},_t=xe(Xe,Je);_t&&"then"in _t&&_t.then(Je.bind(null,null),Je)}(Ie[Re])}else ot(Z,Me,!0,Fe),Ae(null,Z)};le(H,{},z.documentLoader,z.base,q)}function ht(H){var z=/^[ \t]*(?:#.*)?$/,q=/^[ \t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \t]+(?:<([^:]+:[^>]*)>)[ \t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+))|(?:"([^"\\]*(?:\\.[^"\\]*)*)"(?:(?:\^\^(?:<([^:]+:[^>]*)>))|(?:@([a-z]+(?:-[a-z0-9]+)*)))?))[ \t]*(?:\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \t]*\.))[ \t]*(?:#.*)?$/,ue={};H=H.split(/(?:\r\n)|(?:\n)|(?:\r)/g);for(var le=0,Z=0;Z<H.length;++Z){var ae=H[Z];if(le++,!z.test(ae)){if(null===(xe=ae.match(q)))throw new Pe("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:le});if(ae={},Ze(xe[1])?ae.subject={type:"blank node",value:xe[2]}:ae.subject={type:"IRI",value:xe[1]},ae.predicate={type:"IRI",value:xe[3]},Ze(xe[4]))if(Ze(xe[5])){ae.object={type:"literal"},Ze(xe[7])?Ze(xe[8])?ae.object.datatype=$t:(ae.object.datatype=Fr,ae.object.language=xe[8]):ae.object.datatype=xe[7];var Fe=xe[6].replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");ae.object.value=Fe}else ae.object={type:"blank node",value:xe[5]};else ae.object={type:"IRI",value:xe[4]};if(Fe="@default",Ze(xe[9])?Ze(xe[10])||(Fe=xe[10]):Fe=xe[9],Fe in ue){for(var xe=!0,Ae=(Fe=ue[Fe],0);xe&&Ae<Fe.length;++Ae){var Me;e:{Me=Fe[Ae];for(var Ie=["subject","predicate","object"],Re=0;Re<Ie.length;++Re){var Oe=Ie[Re];if(Me[Oe].type!==ae[Oe].type||Me[Oe].value!==ae[Oe].value){Me=!1;break e}}Me=!(Me.object.language!==ae.object.language||Me.object.datatype!==ae.object.datatype)}Me&&(xe=!1)}xe&&Fe.push(ae)}else ue[Fe]=[ae]}}return ue}function Lt(H,z){var q=H.subject,ue=H.predicate,le=H.object,Z=z||null;"name"in H&&H.name&&(Z=H.name.value);var ae="";ae=(ae="IRI"===q.type?ae+"<"+q.value+">":ae+q.value)+" ",ae=(ae="IRI"===ue.type?ae+"<"+ue.value+">":ae+ue.value)+" ";return"IRI"===le.type?ae+="<"+le.value+">":"blank node"===le.type?ae+=le.value:(ae+='"'+(q=le.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"'))+'"',le.datatype===Fr?le.language&&(ae+="@"+le.language):le.datatype!==$t&&(ae+="^^<"+le.datatype+">")),null!=Z&&(ae=0!==Z.indexOf("_:")?ae+" <"+Z+">":ae+" "+Z),ae+" .\n"}function xt(H){this.prefix=H,this.counter=0,this.existing={}}function Tt(H,z){var q="";0===H.indexOf("/")&&(q="/");for(var ue=H.split("/"),le=[];0<ue.length;)"."===ue[0]||""===ue[0]&&1<ue.length?ue.shift():".."===ue[0]?(ue.shift(),z||0<le.length&&".."!==le[le.length-1]?le.pop():le.push("..")):le.push(ue.shift());return q+le.join("/")}if(O.compact=function(H,z,q,ue){return 2>arguments.length?O.nextTick(function(){ue(new TypeError("Could not compact, too few arguments."))}):("function"==typeof q&&(ue=q,q={}),q=q||{},null===z?O.nextTick(function(){ue(new Pe("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))}):null===H?O.nextTick(function(){ue(null,null)}):("base"in q||(q.base="string"==typeof H?H:""),"compactArrays"in q||(q.compactArrays=!0),"graph"in q||(q.graph=!1),"skipExpansion"in q||(q.skipExpansion=!1),"documentLoader"in q||(q.documentLoader=O.loadDocument),"link"in q||(q.link=!1),q.link&&(q.skipExpansion=!0),void function(le,Z,ae){if(Z.skipExpansion)return O.nextTick(function(){ae(null,le)});O.expand(le,Z,ae)}(H,q,function(le,Z){if(le)return ue(new Pe("Could not expand input before compaction.","jsonld.CompactError",{cause:le}));var ae=Qe(q);O.processContext(ae,z,q,function(xe,Fe){if(xe)return ue(new Pe("Could not process context before compaction.","jsonld.CompactError",{cause:xe}));var Ae;try{Ae=(new ie).compact(Fe,null,Z,q)}catch(Oe){return ue(Oe)}var Me=q;Me.compactArrays&&!Me.graph&&se(Ae)?1===Ae.length?Ae=Ae[0]:0===Ae.length&&(Ae={}):Me.graph&&ke(Ae)&&(Ae=[Ae]),ke(z)&&"@context"in z&&(z=z["@context"]),se(z=tt(z))||(z=[z]),Me=z,z=[];for(var Ie=0;Ie<Me.length;++Ie)(!ke(Me[Ie])||0<Object.keys(Me[Ie]).length)&&z.push(Me[Ie]);if(Me=0<z.length,1===z.length&&(z=z[0]),se(Ae)){var Re=ge(Fe,"@graph");Ie=Ae;Ae={},Me&&(Ae["@context"]=z),Ae[Re]=Ie}else if(ke(Ae)&&Me)for(Re in Ie=Ae,Ae={"@context":z},Ie)Ae[Re]=Ie[Re];ue(null,Ae,Fe)})})))},O.expand=function(H,z,q){function ue(le){if("base"in z||(z.base=le.documentUrl||""),le={document:tt(le.document),remoteContext:{"@context":le.contextUrl}},"expandContext"in z){var Z=tt(z.expandContext);le.expandContext="object"==typeof Z&&"@context"in Z?Z:{"@context":Z}}dt(le,z,function(ae,xe){if(ae)return q(ae);var Fe;try{var Ae=new ie,Me=Qe(z),Ie=xe.document,Re=xe.remoteContext["@context"];xe.expandContext&&(Me=Ae.processContext(Me,xe.expandContext["@context"],z)),Re&&(Me=Ae.processContext(Me,Re,z)),ke(Fe=Ae.expand(Me,null,Ie,z,!1))&&"@graph"in Fe&&1===Object.keys(Fe).length?Fe=Fe["@graph"]:null===Fe&&(Fe=[]),se(Fe)||(Fe=[Fe])}catch(Oe){return q(Oe)}q(null,Fe)})}if(1>arguments.length)return O.nextTick(function(){q(new TypeError("Could not expand, too few arguments."))});"function"==typeof z&&(q=z,z={}),"documentLoader"in(z=z||{})||(z.documentLoader=O.loadDocument),"keepFreeFloatingNodes"in z||(z.keepFreeFloatingNodes=!1),O.nextTick(function(){if("string"==typeof H){var le=function(ae,xe){if(ae)return q(ae);try{if(!xe.document)throw new Pe("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof xe.document&&(xe.document=JSON.parse(xe.document))}catch(Fe){return q(new Pe("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Fe,remoteDoc:xe}))}ue(xe)},Z=z.documentLoader(H,le);Z&&"then"in Z&&Z.then(le.bind(null,null),le)}else ue({contextUrl:null,documentUrl:null,document:H})})},O.flatten=function(H,z,q,ue){if(1>arguments.length)return O.nextTick(function(){ue(new TypeError("Could not flatten, too few arguments."))});"function"==typeof q?(ue=q,q={}):"function"==typeof z&&(ue=z,z=null,q={}),"base"in(q=q||{})||(q.base="string"==typeof H?H:""),"documentLoader"in q||(q.documentLoader=O.loadDocument),O.expand(H,q,function(le,Z){if(le)return ue(new Pe("Could not expand input before flattening.","jsonld.FlattenError",{cause:le}));var ae;try{ae=(new ie).flatten(Z)}catch(xe){return ue(xe)}if(null===z)return ue(null,ae);q.graph=!0,q.skipExpansion=!0,O.compact(ae,z,q,function(xe,Fe){if(xe)return ue(new Pe("Could not compact flattened output.","jsonld.FlattenError",{cause:xe}));ue(null,Fe)})})},O.frame=function(H,z,q,ue){function le(Z){var xe,ae=Z.document;ae?(xe=ae["@context"],Z.contextUrl?(xe?se(xe)?xe.push(Z.contextUrl):xe=[xe,Z.contextUrl]:xe=Z.contextUrl,ae["@context"]=xe):xe=xe||{}):xe={},O.expand(H,q,function(Fe,Ae){if(Fe)return ue(new Pe("Could not expand input before framing.","jsonld.FrameError",{cause:Fe}));var Me=tt(q);Me.isFrame=!0,Me.keepFreeFloatingNodes=!0,O.expand(ae,Me,function(Ie,Re){if(Ie)return ue(new Pe("Could not expand frame before framing.","jsonld.FrameError",{cause:Ie}));var Oe;try{Oe=(new ie).frame(Ae,Re,Me)}catch(Xe){return ue(Xe)}Me.graph=!0,Me.skipExpansion=!0,Me.link={},O.compact(Oe,xe,Me,function(Xe,et,Je){if(Xe)return ue(new Pe("Could not compact framed output.","jsonld.FrameError",{cause:Xe}));Xe=ge(Je,"@graph"),Me.link={},et[Xe]=W(Je,et[Xe],Me),ue(null,et)})})})}if(2>arguments.length)return O.nextTick(function(){ue(new TypeError("Could not frame, too few arguments."))});"function"==typeof q&&(ue=q,q={}),"base"in(q=q||{})||(q.base="string"==typeof H?H:""),"documentLoader"in q||(q.documentLoader=O.loadDocument),"embed"in q||(q.embed="@last"),q.explicit=q.explicit||!1,"requireAll"in q||(q.requireAll=!0),q.omitDefault=q.omitDefault||!1,O.nextTick(function(){if("string"==typeof z){var Z=function(xe,Fe){if(xe)return ue(xe);try{if(!Fe.document)throw new Pe("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof Fe.document&&(Fe.document=JSON.parse(Fe.document))}catch(Ae){return ue(new Pe("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Ae,remoteDoc:Fe}))}le(Fe)},ae=q.documentLoader(z,Z);ae&&"then"in ae&&ae.then(Z.bind(null,null),Z)}else le({contextUrl:null,documentUrl:null,document:z})})},O.link=function(H,z,q,ue){var le={};z&&(le["@context"]=z),le["@embed"]="@link",O.frame(H,le,q,ue)},O.objectify=function(H,z,q,ue){"function"==typeof q&&(ue=q,q={}),"base"in(q=q||{})||(q.base="string"==typeof H?H:""),"documentLoader"in q||(q.documentLoader=O.loadDocument),O.expand(H,q,function(le,Z){if(le)return ue(new Pe("Could not expand input before linking.","jsonld.LinkError",{cause:le}));var ae;try{ae=(new ie).flatten(Z)}catch(xe){return ue(xe)}q.graph=!0,q.skipExpansion=!0,O.compact(ae,z,q,function(xe,Fe,Ae){if(xe)return ue(new Pe("Could not compact flattened output before linking.","jsonld.LinkError",{cause:xe}));var Me=Fe[xe=ge(Ae,"@graph")][0],Ie=function(Xe){if(ke(Xe)||se(Xe)){if(ke(Xe)){if(Ie.visited[Xe["@id"]])return;Ie.visited[Xe["@id"]]=!0}for(var et in Xe){var Je=Xe[et],_t="@id"===O.getContextValue(Ae,et,"@type");if(se(Je)||ke(Je)||_t)if(me(Je)&&_t)Xe[et]=Je=Me[Je],Ie(Je);else if(se(Je))for(var mt=0;mt<Je.length;++mt)me(Je[mt])&&_t?Je[mt]=Me[Je[mt]]:ke(Je[mt])&&"@id"in Je[mt]&&(Je[mt]=Me[Je[mt]["@id"]]),Ie(Je[mt]);else ke(Je)&&(Xe[et]=Je=Me[Je["@id"]],Ie(Je))}}};for(var Re in Ie.visited={},Ie(Me),Fe.of_type={},Me)if("@type"in Me[Re]){se(xe=Me[Re]["@type"])||(xe=[xe]);for(var Oe=0;Oe<xe.length;++Oe)xe[Oe]in Fe.of_type||(Fe.of_type[xe[Oe]]=[]),Fe.of_type[xe[Oe]].push(Me[Re])}ue(null,Fe)})})},O.normalize=function(H,z,q){if(1>arguments.length)return O.nextTick(function(){q(new TypeError("Could not normalize, too few arguments."))});if("function"==typeof z&&(q=z,z={}),"algorithm"in(z=z||{})||(z.algorithm="URGNA2012"),"base"in z||(z.base="string"==typeof H?H:""),"documentLoader"in z||(z.documentLoader=O.loadDocument),"inputFormat"in z){if("application/nquads"!==z.inputFormat)return q(new Pe("Unknown normalization input format.","jsonld.NormalizeError"));var ue=ht(H);(new ie).normalize(ue,z,q)}else delete(ue=tt(z)).format,ue.produceGeneralizedRdf=!1,O.toRDF(H,ue,function(le,Z){if(le)return q(new Pe("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:le}));(new ie).normalize(Z,z,q)})},O.fromRDF=function(H,z,q){if(1>arguments.length)return O.nextTick(function(){q(new TypeError("Could not convert from RDF, too few arguments."))});"function"==typeof z&&(q=z,z={}),"useRdfType"in(z=z||{})||(z.useRdfType=!1),"useNativeTypes"in z||(z.useNativeTypes=!1),"format"in z||!me(H)||"format"in z||(z.format="application/nquads"),O.nextTick(function(){function ue(ae,xe,Fe){(new ie).fromRDF(ae,xe,Fe)}var le;if(z.format){if(!(le=z.rdfParser||_r[z.format]))return q(new Pe("Unknown input format.","jsonld.UnknownFormat",{format:z.format}))}else le=function(){return H};var Z=!1;try{H=le(H,function(ae,xe){if(Z=!0,ae)return q(ae);ue(xe,z,q)})}catch(ae){if(!Z)return q(ae);throw ae}if(H){if("then"in H)return H.then(function(ae){ue(ae,z,q)},q);ue(H,z,q)}})},O.toRDF=function(H,z,q){if(1>arguments.length)return O.nextTick(function(){q(new TypeError("Could not convert to RDF, too few arguments."))});"function"==typeof z&&(q=z,z={}),"base"in(z=z||{})||(z.base="string"==typeof H?H:""),"documentLoader"in z||(z.documentLoader=O.loadDocument),O.expand(H,z,function(ue,le){if(ue)return q(new Pe("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:ue}));var Z;try{if(Z=ie.prototype.toRDF(le,z),z.format){if("application/nquads"===z.format){var Ae,ae=q,Fe=[];for(Ae in Z)for(var Me=Z[Ae],Ie=0;Ie<Me.length;++Ie){var Re=Me[Ie];"@default"===Ae&&(Ae=null),Fe.push(Lt(Re,Ae))}return ae(null,Fe.sort().join(""))}throw new Pe("Unknown output format.","jsonld.UnknownFormat",{format:z.format})}}catch(Oe){return q(Oe)}q(null,Z)})},O.createNodeMap=function(H,z,q){if(1>arguments.length)return O.nextTick(function(){q(new TypeError("Could not create node map, too few arguments."))});"function"==typeof z&&(q=z,z={}),"base"in(z=z||{})||(z.base="string"==typeof H?H:""),"documentLoader"in z||(z.documentLoader=O.loadDocument),O.expand(H,z,function(ue,le){if(ue)return q(new Pe("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:ue}));var Z;try{Z=(new ie).createNodeMap(le,z)}catch(ae){return q(ae)}q(null,Z)})},O.merge=function(H,z,q,ue){function le(Re,Oe){if(!xe){if(Re)return xe=Re,ue(new Pe("Could not expand input before flattening.","jsonld.FlattenError",{cause:Re}));ae.push(Oe),0==--Fe&&Z(ae)}}function Z(Re){var Oe=!0;"mergeNodes"in q&&(Oe=q.mergeNodes);var Je,Xe=q.namer||q.issuer||new xt("_:b"),et={"@default":{}};try{for(var _t=0;_t<Re.length;++_t){var mt=Re[_t],wt=(mt=O.relabelBlankNodes(mt,{issuer:new xt("_:b"+_t+"-")}),Oe||0===_t?et:{"@default":{}});if(X(mt,wt,"@default",Xe),wt!==et)for(var At in wt){var Pt=wt[At];if(At in et){var tr,Ot=et[At];for(tr in Pt)tr in Ot||(Ot[tr]=Pt[tr])}else et[At]=Pt}}Je=fe(et)}catch(pr){return ue(pr)}for(Re=[],Oe=Object.keys(Je).sort(),Xe=0;Xe<Oe.length;++Xe)st(et=Je[Oe[Xe]])||Re.push(et);if(null===z)return ue(null,Re);q.graph=!0,q.skipExpansion=!0,O.compact(Re,z,q,function(pr,Mr){if(pr)return ue(new Pe("Could not compact merged output.","jsonld.MergeError",{cause:pr}));ue(null,Mr)})}if(1>arguments.length)return O.nextTick(function(){ue(new TypeError("Could not merge, too few arguments."))});if(!se(H))return O.nextTick(function(){ue(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof q?(ue=q,q={}):"function"==typeof z&&(ue=z,z=null,q={}),q=q||{};for(var ae=[],xe=null,Fe=H.length,Ae=0;Ae<H.length;++Ae){var Ie,Me={};for(Ie in q)Me[Ie]=q[Ie];O.expand(H[Ae],Me,le)}},O.relabelBlankNodes=function(H,z){return R((z=z||{}).namer||z.issuer||new xt("_:b"),H)},O.prependBase=function(H,z){var q,ue=H;if(null===ue)q=z;else if(-1!==z.indexOf(":"))q=z;else{me(ue)&&(ue=O.url.parse(ue||"")),q=O.url.parse(z);var Z,ae,le=ue.protocol||"";null!==q.authority?(Z=q.authority,ae=q.path,ue=q.query):(Z=ue.authority,""===q.path?(ae=ue.path,ue=null!==q.query?q.query:ue.query):(0===q.path.indexOf("/")?ae=q.path:(ae=ue.path,""!==q.path&&(0<(ae=ae.substr(0,ae.lastIndexOf("/")+1)).length&&"/"!==ae.substr(-1)&&(ae+="/"),ae+=q.path)),ue=q.query)),null!==Z&&(le+="//"+Z),le+=ae=Tt(ae,!!Z),null!==ue&&(le+="?"+ue),null!==q.fragment&&(le+="#"+q.fragment),""===le&&(le="./"),q=le}return q},O.documentLoader=function(H,z){var q=new Pe("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return T?z(q,{contextUrl:null,documentUrl:H,document:null}):O.promisify(function(ue){ue(q)})},O.loadDocument=function(H,z){var q=O.documentLoader(H,z);q&&"then"in q&&q.then(z.bind(null,null),z)},O.promises=function(H){H=H||{};var z=Array.prototype.slice,q=O.promisify,ue=H.api||{},le=H.version||"jsonld.js";"string"==typeof H.api&&(H.version||(le=H.api),ue={}),ue.expand=function(ae){if(1>arguments.length)throw new TypeError("Could not expand, too few arguments.");return q.apply(null,[O.expand].concat(z.call(arguments)))},ue.compact=function(ae,xe){if(2>arguments.length)throw new TypeError("Could not compact, too few arguments.");return q.apply(null,[function(Fe,Ae,Me,Ie){"function"==typeof Me&&(Ie=Me,Me={}),Me=Me||{},O.compact(Fe,Ae,Me,function(Re,Oe){Ie(Re,Oe)})}].concat(z.call(arguments)))},ue.flatten=function(ae){if(1>arguments.length)throw new TypeError("Could not flatten, too few arguments.");return q.apply(null,[O.flatten].concat(z.call(arguments)))},ue.frame=function(ae,xe){if(2>arguments.length)throw new TypeError("Could not frame, too few arguments.");return q.apply(null,[O.frame].concat(z.call(arguments)))},ue.fromRDF=function(ae){if(1>arguments.length)throw new TypeError("Could not convert from RDF, too few arguments.");return q.apply(null,[O.fromRDF].concat(z.call(arguments)))},ue.toRDF=function(ae){if(1>arguments.length)throw new TypeError("Could not convert to RDF, too few arguments.");return q.apply(null,[O.toRDF].concat(z.call(arguments)))},ue.normalize=function(ae){if(1>arguments.length)throw new TypeError("Could not normalize, too few arguments.");return q.apply(null,[O.normalize].concat(z.call(arguments)))},"jsonld.js"===le&&(ue.link=function(ae,xe){if(2>arguments.length)throw new TypeError("Could not link, too few arguments.");return q.apply(null,[O.link].concat(z.call(arguments)))},ue.objectify=function(ae){return q.apply(null,[O.objectify].concat(z.call(arguments)))},ue.createNodeMap=function(ae){return q.apply(null,[O.createNodeMap].concat(z.call(arguments)))},ue.merge=function(ae){return q.apply(null,[O.merge].concat(z.call(arguments)))});try{O.Promise=j.Promise||Ce("es6-promise").Promise}catch(ae){for(var Z in H=function(){throw Error("Unable to find a Promise implementation.")},ue)ue[Z]=H}return ue},O.promisify=function(H){if(!O.Promise)try{O.Promise=j.Promise||Ce("es6-promise").Promise}catch(q){throw Error("Unable to find a Promise implementation.")}var z=Array.prototype.slice.call(arguments,1);return new O.Promise(function(q,ue){H.apply(null,z.concat(function(le,Z){le?ue(le):q(Z)}))})},O.promises({api:O.promises}),s.prototype=O.promises({version:"json-ld-1.0"}),s.prototype.toString=function(){return this instanceof s?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},O.JsonLdProcessor=s,St=!!Object.defineProperty)try{Object.defineProperty({},"x",{})}catch(H){St=!1}St&&(Object.defineProperty(s,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(s.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:s})),_&&void 0===j.JsonLdProcessor&&(St?Object.defineProperty(j,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:s}):j.JsonLdProcessor=s);var Wt="function"==typeof setImmediate&&setImmediate,St=Wt?function(H){Wt(H)}:function(H){setTimeout(H,0)};O.nextTick="object"==typeof ye&&"function"==typeof ye.nextTick?ye.nextTick:St,O.setImmediate=Wt?St:O.nextTick,O.parseLinkHeader=function(H){var z={};H=H.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g);for(var q=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,ue=0;ue<H.length;++ue){var le=H[ue].match(q);if(le){for(var Z={target:le[1]},ae=le[2],xe=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;le=xe.exec(ae);)Z[le[1]]=void 0===le[2]?le[3]:le[2];se(z[le=Z.rel||""])?z[le].push(Z):z[le]=le in z?[z[le],Z]:Z}}return z},O.RequestQueue=function(){this._requests={}},O.RequestQueue.prototype.wrapLoader=function(H){return this._loader=H,this._usePromise=1===H.length,this.add.bind(this)},O.RequestQueue.prototype.add=function(H,z){var q=this;if(!z&&!q._usePromise)throw Error("callback must be specified.");if(q._usePromise)return new O.Promise(function(ue,le){var Z=q._requests[H];Z||(Z=q._requests[H]=q._loader(H).then(function(ae){return delete q._requests[H],ae}).catch(function(ae){throw delete q._requests[H],ae})),Z.then(function(ae){ue(ae)}).catch(function(ae){le(ae)})});H in q._requests?q._requests[H].push(z):(q._requests[H]=[z],q._loader(H,function(ue,le){var Z=q._requests[H];delete q._requests[H];for(var ae=0;ae<Z.length;++ae)Z[ae](ue,le)}))},O.DocumentCache=function(H){this.order=[],this.cache={},this.size=H||50,this.expires=3e4},O.DocumentCache.prototype.get=function(H){if(H in this.cache){var z=this.cache[H];if(z.expires>=+new Date)return z.ctx;delete this.cache[H],this.order.splice(this.order.indexOf(H),1)}return null},O.DocumentCache.prototype.set=function(H,z){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(H),this.cache[H]={ctx:z,expires:+new Date+this.expires}},O.ActiveContextCache=function(H){this.order=[],this.cache={},this.size=H||100},O.ActiveContextCache.prototype.get=function(H,z){var q=JSON.stringify(H),ue=JSON.stringify(z);return(q=this.cache[q])&&ue in q?q[ue]:null},O.ActiveContextCache.prototype.set=function(H,z,q){if(this.order.length===this.size){var ue=this.order.shift();delete this.cache[ue.activeCtx][ue.localCtx]}H=JSON.stringify(H),z=JSON.stringify(z),this.order.push({activeCtx:H,localCtx:z}),H in this.cache||(this.cache[H]={}),this.cache[H][z]=tt(q)},O.cache={activeCtx:new O.ActiveContextCache},O.documentLoaders={},O.documentLoaders.jquery=function(H,z){function q(le,Z){return 0!==le.indexOf("http:")&&0!==le.indexOf("https:")?Z(new Pe('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:le}),{contextUrl:null,documentUrl:le,document:null}):z.secure&&0!==le.indexOf("https")?Z(new Pe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:le}),{contextUrl:null,documentUrl:le,document:null}):void H.ajax({url:le,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(ae,xe,Fe){if(ae={contextUrl:null,documentUrl:le,document:ae},xe=Fe.getResponseHeader("Content-Type"),(Fe=Fe.getResponseHeader("Link"))&&"application/ld+json"!==xe){if(se(Fe=O.parseLinkHeader(Fe)[We]))return Z(new Pe("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:le}),ae);Fe&&(ae.contextUrl=Fe.target)}Z(null,ae)},error:function(ae,xe,Fe){Z(new Pe("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:le,cause:Fe}),{contextUrl:null,documentUrl:le,document:null})}})}z=z||{};var ue=new O.RequestQueue;return("usePromise"in z?z.usePromise:"undefined"!=typeof Promise)?ue.wrapLoader(function(le){return O.promisify(q,le)}):ue.wrapLoader(q)},O.documentLoaders.node=function(H){function z(Fe,Ae,Me){if(0!==Fe.indexOf("http:")&&0!==Fe.indexOf("https:"))return Me(new Pe('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:Fe}),{contextUrl:null,documentUrl:Fe,document:null});if(H.secure&&0!==Fe.indexOf("https"))return Me(new Pe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:Fe}),{contextUrl:null,documentUrl:Fe,document:null});var Ie=null;if(null!==Ie)return Me(null,Ie);var Oe,Re={Accept:"application/ld+json, application/json"};for(Oe in H.headers)Re[Oe]=H.headers[Oe];le({url:Fe,headers:Re,strictSSL:q,followRedirect:!1},function(Xe,et,Je){if(Ie={contextUrl:null,documentUrl:Fe,document:Je||null},Xe)return Me(new Pe("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:Fe,cause:Xe}),Ie);if(Je=Z.STATUS_CODES[et.statusCode],400<=et.statusCode)return Me(new Pe("URL could not be dereferenced: "+Je,"jsonld.InvalidUrl",{code:"loading document failed",url:Fe,httpStatusCode:et.statusCode}),Ie);if(et.headers.link&&"application/ld+json"!==et.headers["content-type"]){if(se(Je=O.parseLinkHeader(et.headers.link)[We]))return Me(new Pe("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:Fe}),Ie);Je&&(Ie.contextUrl=Je.target)}if(300<=et.statusCode&&400>et.statusCode&&et.headers.location)return Ae.length===ue?Me(new Pe("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:Fe,httpStatusCode:et.statusCode,redirects:Ae}),Ie):-1!==Ae.indexOf(Fe)?Me(new Pe("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:Fe,httpStatusCode:et.statusCode,redirects:Ae}),Ie):(Ae.push(Fe),z(et.headers.location,Ae,Me));Ae.push(Fe),Me(Xe,Ie)})}var q=!("strictSSL"in(H=H||{}))||H.strictSSL,ue="maxRedirects"in H?H.maxRedirects:-1,le="request"in H?H.request:Ce("request"),Z=Ce("http"),ae=new O.RequestQueue;if(H.usePromise)return ae.wrapLoader(function(Fe){return O.promisify(z,Fe,[])});var xe=H.headers||{};if("Accept"in xe||"accept"in xe)throw new RangeError('Accept header may not be specified as an option; only "application/ld+json, application/json" is supported.');return ae.wrapLoader(function(Fe,Ae){z(Fe,[],Ae)})},O.documentLoaders.xhr=function(H){function z(le,Z){if(0!==le.indexOf("http:")&&0!==le.indexOf("https:"))return Z(new Pe('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:le}),{contextUrl:null,documentUrl:le,document:null});if(H.secure&&0!==le.indexOf("https"))return Z(new Pe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:le}),{contextUrl:null,documentUrl:le,document:null});var ae=new(H.xhr||XMLHttpRequest);ae.onload=function(){if(400<=ae.status)return Z(new Pe("URL could not be dereferenced: "+ae.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:le,httpStatusCode:ae.status}),{contextUrl:null,documentUrl:le,document:null});var Ae,xe={contextUrl:null,documentUrl:le,document:ae.response},Fe=ae.getResponseHeader("Content-Type");if(q.test(ae.getAllResponseHeaders())&&(Ae=ae.getResponseHeader("Link")),Ae&&"application/ld+json"!==Fe){if(se(Ae=O.parseLinkHeader(Ae)[We]))return Z(new Pe("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:le}),xe);Ae&&(xe.contextUrl=Ae.target)}Z(null,xe)},ae.onerror=function(){Z(new Pe("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:le}),{contextUrl:null,documentUrl:le,document:null})},ae.open("GET",le,!0),ae.setRequestHeader("Accept","application/ld+json, application/json"),ae.send()}H=H||{};var q=/(^|(\r\n))link:/i,ue=new O.RequestQueue;return("usePromise"in H?H.usePromise:"undefined"!=typeof Promise)?ue.wrapLoader(function(le){return O.promisify(z,le)}):ue.wrapLoader(z)},O.useDocumentLoader=function(H){if(!(H in O.documentLoaders))throw new Pe('Unknown document loader type: "'+H+'"',"jsonld.UnknownDocumentLoader",{type:H});O.documentLoader=O.documentLoaders[H].apply(O,Array.prototype.slice.call(arguments,1))},O.processContext=function(H,z){var q={},ue=2;3<arguments.length&&(q=arguments[2]||{},ue+=1);var le=arguments[ue];if("base"in q||(q.base=""),"documentLoader"in q||(q.documentLoader=O.loadDocument),null===z)return le(null,Qe(q));ke(z=tt(z))&&"@context"in z||(z={"@context":z}),dt(z,q,function(Z,ae){if(Z)return le(Z);try{ae=(new ie).processContext(H,ae,q)}catch(xe){return le(xe)}le(null,ae)})},O.hasProperty=function(H,z){var q=!1;return z in H&&(q=!se(q=H[z])||0<q.length),q},O.hasValue=function(H,z,q){var ue=!1;if(O.hasProperty(H,z))if(z=vt(H=H[z]),se(H)||z){for(z&&(H=H["@list"]),z=0;z<H.length;++z)if(O.compareValues(q,H[z])){ue=!0;break}}else se(q)||(ue=O.compareValues(q,H));return ue},O.addValue=function(H,z,q,ue){if("propertyIsArray"in(ue=ue||{})||(ue.propertyIsArray=!1),"allowDuplicate"in ue||(ue.allowDuplicate=!0),se(q)){0!==q.length||!ue.propertyIsArray||z in H||(H[z]=[]);for(var le=0;le<q.length;++le)O.addValue(H,z,q[le],ue)}else z in H?(le=!ue.allowDuplicate&&O.hasValue(H,z,q),se(H[z])||le&&!ue.propertyIsArray||(H[z]=[H[z]]),le||H[z].push(q)):H[z]=ue.propertyIsArray?[q]:q},O.getValues=function(H,z){var q=H[z]||[];return se(q)||(q=[q]),q},O.removeProperty=function(H,z){delete H[z]},O.removeValue=function(H,z,q,ue){"propertyIsArray"in(ue=ue||{})||(ue.propertyIsArray=!1);var le=O.getValues(H,z).filter(function(Z){return!O.compareValues(Z,q)});0===le.length?O.removeProperty(H,z):H[z]=1!==le.length||ue.propertyIsArray?le:le[0]},O.compareValues=function(H,z){return!!(H===z||yt(H)&&yt(z)&&H["@value"]===z["@value"]&&H["@type"]===z["@type"]&&H["@language"]===z["@language"]&&H["@index"]===z["@index"])||!!(ke(H)&&"@id"in H&&ke(z)&&"@id"in z)&&H["@id"]===z["@id"]},O.getContextValue=function(H,z,q){var ue=null;return null===z||("@language"===q&&q in H&&(ue=H[q]),H.mappings[z]&&(H=H.mappings[z],Ze(q)?ue=H:q in H&&(ue=H[q]))),ue};var _r={};if(O.registerRDFParser=function(H,z){_r[H]=z},O.unregisterRDFParser=function(H){delete _r[H]},T){if(void 0===Wr)var Wr=null;if(void 0===hr)var hr={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var $t="http://www.w3.org/2001/XMLSchema#string",Fr="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",We="http://www.w3.org/ns/json-ld#context",Ke=10,Pe=function(H,z,q){T?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=Error().stack),this.name=z||"jsonld.Error",this.message=H||"An unspecified JSON-LD error occurred.",this.details=q||{}};T?Ce("util").inherits(Pe,Error):"undefined"!=typeof Error&&(Pe.prototype=Error());var ie=function(){};ie.prototype.compact=function(H,z,q,ue){if(se(q)){for(var le=[],Z=0;Z<q.length;++Z){var ae=this.compact(H,z,q[Z],ue);null!==ae&&le.push(ae)}if(ue.compactArrays&&1===le.length)null===(xe=O.getContextValue(H,z,"@container"))&&(le=le[0]);return le}if(ke(q)){if(ue.link&&"@id"in q&&q["@id"]in ue.link)for(le=ue.link[q["@id"]],Z=0;Z<le.length;++Z)if(le[Z].expanded===q)return le[Z].compacted;if(yt(q)||st(q))return le=function Se(H,z,q){if(yt(q)){var le=O.getContextValue(H,z,"@type"),Z=O.getContextValue(H,z,"@language"),ue=O.getContextValue(H,z,"@container");if(!(ue="@index"in q&&"@index"!==ue)&&(q["@type"]===le||q["@language"]===Z))return q["@value"];le=1===(le=Object.keys(q).length)||2===le&&"@index"in q&&!ue,Z="@language"in H;var ae=me(q["@value"]);return z=H.mappings[z]&&null===H.mappings[z]["@language"],!le||Z&&ae&&!z?(z={},ue&&(z[ge(H,"@index")]=q["@index"]),"@type"in q?z[ge(H,"@type")]=ge(H,q["@type"],null,{vocab:!0}):"@language"in q&&(z[ge(H,"@language")]=q["@language"]),z[ge(H,"@value")]=q["@value"],z):q["@value"]}return ue=Ne(H,z,{vocab:!0}),le=O.getContextValue(H,z,"@type"),q=ge(H,q["@id"],null,{vocab:"@vocab"===le}),"@id"===le||"@vocab"===le||"@graph"===ue?q:((z={})[ge(H,"@id")]=q,z)}(H,z,q),ue.link&&st(q)&&(q["@id"]in ue.link||(ue.link[q["@id"]]=[]),ue.link[q["@id"]].push({expanded:q,compacted:le})),le;Z="@reverse"===z,le={},ue.link&&"@id"in q&&(q["@id"]in ue.link||(ue.link[q["@id"]]=[]),ue.link[q["@id"]].push({expanded:q,compacted:le}));for(var Fe=Object.keys(q).sort(),Ae=0;Ae<Fe.length;++Ae){var Me=Fe[Ae],Ie=q[Me];if("@id"===Me||"@type"===Me){var Re;if(me(Ie))Re=ge(H,Ie,null,{vocab:"@type"===Me});else{Re=[];for(var Oe=0;Oe<Ie.length;++Oe)Re.push(ge(H,Ie[Oe],null,{vocab:!0}))}Me=ge(H,Me),xe=se(Re)&&0===Ie.length,O.addValue(le,Me,Re,{propertyIsArray:xe})}else if("@reverse"===Me){for(ae in Re=this.compact(H,"@reverse",Ie,ue))H.mappings[ae]&&H.mappings[ae].reverse&&(Ie=Re[ae],xe=O.getContextValue(H,ae,"@container"),O.addValue(le,ae,Ie,{propertyIsArray:"@set"===xe||!ue.compactArrays}),delete Re[ae]);0<Object.keys(Re).length&&(Me=ge(H,Me),O.addValue(le,Me,Re))}else if("@index"===Me)"@index"!==(xe=O.getContextValue(H,z,"@container"))&&(Me=ge(H,Me),O.addValue(le,Me,Ie));else if("@graph"!==Me&&"@list"!==Me&&$e(Me))Me=ge(H,Me),O.addValue(le,Me,Ie);else for(0===Ie.length&&(Re=ge(H,Me,Ie,{vocab:!0},Z),O.addValue(le,Re,Ie,{propertyIsArray:!0})),Oe=0;Oe<Ie.length;++Oe){var Xe=Ie[Oe];Re=ge(H,Me,Xe,{vocab:!0},Z);var _t,xe=O.getContextValue(H,Re,"@container"),et=vt(Xe),Je=null;if(et&&(Je=Xe["@list"]),Je=this.compact(H,Re,et?Je:Xe,ue),et)if(se(Je)||(Je=[Je]),"@list"!==xe)(et={})[ge(H,"@list")]=Je,Je=et,"@index"in Xe&&(Je[ge(H,"@index")]=Xe["@index"]);else if(Re in le)throw new Pe('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===xe||"@index"===xe)Re in le?_t=le[Re]:le[Re]=_t={},"@language"===xe&&yt(Je)&&(Je=Je["@value"]),O.addValue(_t,Xe[xe],Je);else xe=!ue.compactArrays||"@set"===xe||"@list"===xe||se(Je)&&0===Je.length||"@list"===Me||"@graph"===Me,O.addValue(le,Re,Je,{propertyIsArray:xe})}}return le}return q},ie.prototype.expand=function(H,z,q,ue,le){if(null==q)return null;if(!se(q)&&!ke(q))return le||null!==z&&"@graph"!==Ne(H,z,{vocab:!0})?function G(H,z,q){if(null==q)return null;var ue=Ne(H,z,{vocab:!0});if("@id"===ue)return Ne(H,q,{base:!0});if("@type"===ue)return Ne(H,q,{vocab:!0,base:!0});var le=O.getContextValue(H,z,"@type");return"@id"===le||"@graph"===ue&&me(q)?{"@id":Ne(H,q,{base:!0})}:"@vocab"===le?{"@id":Ne(H,q,{vocab:!0,base:!0})}:$e(ue)?q:(ue={},null!==le?ue["@type"]=le:me(q)&&null!==(H=O.getContextValue(H,z,"@language"))&&(ue["@language"]=H),-1===["boolean","number","string"].indexOf(typeof q)&&(q=q.toString()),ue["@value"]=q,ue)}(H,z,q):null;if(se(q)){var Z=[],ae=O.getContextValue(H,z,"@container");le=le||"@list"===ae;for(var xe=0;xe<q.length;++xe){var Fe=this.expand(H,z,q[xe],ue);if(le&&(se(Fe)||vt(Fe)))throw new Pe("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==Fe&&(se(Fe)?Z=Z.concat(Fe):Z.push(Fe))}return Z}"@context"in q&&(H=this.processContext(H,q["@context"],ue));xe=Ne(H,z,{vocab:!0}),Z={},Fe=Object.keys(q).sort();for(var Ae=0;Ae<Fe.length;++Ae){var Me=Fe[Ae],Ie=q[Me];if("@context"!==Me){var Re=Ne(H,Me,{vocab:!0});if(null!==Re&&(Mt(Re)||$e(Re))){if($e(Re)){if("@reverse"===xe)throw new Pe("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Ie});if(Re in Z)throw new Pe("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:Re})}if("@id"===Re&&!me(Ie)){if(!ue.isFrame)throw new Pe('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Ie});if(!ke(Ie))throw new Pe('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:Ie})}if("@type"===Re){var Oe=void 0;if((Oe=me(ae=Ie))||(Oe=ke(ae)&&0===Object.keys(ae).length),!Oe){if(Oe=!1,se(ae)){Oe=!0;for(var Xe=0;Xe<ae.length;++Xe)if(!me(ae[Xe])){Oe=!1;break}}if(!Oe)throw new Pe('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:ae})}}if("@graph"===Re&&!ke(Ie)&&!se(Ie))throw new Pe('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Ie});if("@value"===Re&&(ke(Ie)||se(Ie)))throw new Pe('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Ie});if("@language"===Re){if(null===Ie)continue;if(!me(Ie))throw new Pe('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Ie});Ie=Ie.toLowerCase()}if("@index"===Re&&!me(Ie))throw new Pe('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Ie});if("@reverse"===Re){if(!ke(Ie))throw new Pe('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Ie});if("@reverse"in(Ie=this.expand(H,"@reverse",Ie,ue)))for(var et in Ie["@reverse"])O.addValue(Z,et,Ie["@reverse"][et],{propertyIsArray:!0});for(et in Me=Z["@reverse"]||null,Ie)if("@reverse"!==et)for(null===Me&&(Me=Z["@reverse"]={}),O.addValue(Me,et,[],{propertyIsArray:!0}),Re=Ie[et],ae=0;ae<Re.length;++ae){if(yt(Oe=Re[ae])||vt(Oe))throw new Pe('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ie});O.addValue(Me,et,Oe,{propertyIsArray:!0})}}else{if("@language"===(ae=O.getContextValue(H,Me,"@container"))&&ke(Ie)){Oe=[],Xe=Object.keys(Ie).sort();for(var Je=0;Je<Xe.length;++Je){var _t=Xe[Je],mt=Ie[_t];se(mt)||(mt=[mt]);for(var wt=0;wt<mt.length;++wt){var At=mt[wt];if(null!==At){if(!me(At))throw new Pe("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:Ie});Oe.push({"@value":At,"@language":_t.toLowerCase()})}}}Ie=Oe}else if("@index"===ae&&ke(Ie)){for(Oe=Me,Xe=[],Je=Object.keys(Ie).sort(),_t=0;_t<Je.length;++_t)for(se(wt=Ie[mt=Je[_t]])||(wt=[wt]),wt=this.expand(H,Oe,wt,ue,!1),At=0;At<wt.length;++At){var Pt=wt[At];"@index"in Pt||(Pt["@index"]=mt),Xe.push(Pt)}Ie=Xe}else if((Oe="@list"===Re)||"@set"===Re){if(Xe=z,Oe&&"@graph"===xe&&(Xe=null),Ie=this.expand(H,Xe,Ie,ue,Oe),Oe&&vt(Ie))throw new Pe("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else Ie=this.expand(H,Me,Ie,ue,!1);if(null!==Ie||"@value"===Re)if("@list"===Re||vt(Ie)||"@list"!==ae||(Ie={"@list":Ie=se(Ie)?Ie:[Ie]}),H.mappings[Me]&&H.mappings[Me].reverse)for(Me=Z["@reverse"]=Z["@reverse"]||{},se(Ie)||(Ie=[Ie]),ae=0;ae<Ie.length;++ae){if(yt(Oe=Ie[ae])||vt(Oe))throw new Pe('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ie});O.addValue(Me,Re,Oe,{propertyIsArray:!0})}else Me=-1===["@index","@id","@type","@value","@language"].indexOf(Re),O.addValue(Z,Re,Ie,{propertyIsArray:Me})}}}}if(H=(Fe=Object.keys(Z)).length,"@value"in Z){if("@type"in Z&&"@language"in Z)throw new Pe('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:Z});if(q=H-1,"@type"in Z&&--q,"@index"in Z&&--q,"@language"in Z&&--q,0!==q)throw new Pe('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:Z});if(null===Z["@value"])Z=null;else{if("@language"in Z&&!me(Z["@value"]))throw new Pe("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Z});if("@type"in Z&&(!Mt(Z["@type"])||0===Z["@type"].indexOf("_:")))throw new Pe('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Z})}}else if("@type"in Z&&!se(Z["@type"]))Z["@type"]=[Z["@type"]];else if("@set"in Z||"@list"in Z){if(1<H&&(2!==H||!("@index"in Z)))throw new Pe('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Z});"@set"in Z&&(Z=Z["@set"],H=(Fe=Object.keys(Z)).length)}else 1===H&&"@language"in Z&&(Z=null);return!ke(Z)||ue.keepFreeFloatingNodes||le||null!==z&&"@graph"!==xe||!(0===H||"@value"in Z||"@list"in Z||1===H&&"@id"in Z)||(Z=null),Z},ie.prototype.createNodeMap=function(H,z){var ue={"@default":{}};return X(H,ue,"@default",(z=z||{}).namer||z.issuer||new xt("_:b")),fe(ue)},ie.prototype.flatten=function(H){H=this.createNodeMap(H);for(var z=[],q=Object.keys(H).sort(),ue=0;ue<q.length;++ue){var le=H[q[ue]];st(le)||z.push(le)}return z},ie.prototype.frame=function(H,z,q){q={options:q,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}};var ue=new xt("_:b");return X(H,q.graphs,"@merged",ue),q.subjects=q.graphs["@merged"],H=[],ne(q,Object.keys(q.subjects).sort(),z,H,null),H},ie.prototype.normalize=function(H,z,q){return"URDNA2015"===z.algorithm?new be(z).main(H,q):"URGNA2012"===z.algorithm?new Te(z).main(H,q):void q(Error("Invalid RDF Dataset Normalization algorithm: "+z.algorithm))},ie.prototype.fromRDF=function(H,z,q){var ae,ue={},le={"@default":ue},Z={};for(ae in H){var xe=H[ae];ae in le||(le[ae]={}),"@default"===ae||ae in ue||(ue[ae]={"@id":ae});for(var Fe=le[ae],Ae=0;Ae<xe.length;++Ae){var Re=(Ie=xe[Ae]).subject.value,Me=Ie.predicate.value,Ie=Ie.object;Re in Fe||(Fe[Re]={"@id":Re});Re=Fe[Re];var Oe="IRI"===Ie.type||"blank node"===Ie.type;if(!Oe||Ie.value in Fe||(Fe[Ie.value]={"@id":Ie.value}),"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===Me&&!z.useRdfType&&Oe)O.addValue(Re,"@type",Ie.value,{propertyIsArray:!0});else{var Xe,et=Ie,Je=z.useNativeTypes;"IRI"===et.type||"blank node"===et.type?Xe={"@id":et.value}:(Xe={"@value":et.value},et.language?Xe["@language"]=et.language:((et=et.datatype)||(et=$t),Je?("http://www.w3.org/2001/XMLSchema#boolean"===et?"true"===Xe["@value"]?Xe["@value"]=!0:"false"===Xe["@value"]&&(Xe["@value"]=!1):(Je=Xe["@value"],!isNaN(parseFloat(Je))&&isFinite(Je)&&("http://www.w3.org/2001/XMLSchema#integer"===et?(Je=parseInt(Xe["@value"],10)).toFixed(0)===Xe["@value"]&&(Xe["@value"]=Je):"http://www.w3.org/2001/XMLSchema#double"===et&&(Xe["@value"]=parseFloat(Xe["@value"])))),-1===["http://www.w3.org/2001/XMLSchema#boolean","http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#double",$t].indexOf(et)&&(Xe["@type"]=et)):et!==$t&&(Xe["@type"]=et))),O.addValue(Re,Me,Xe,{propertyIsArray:!0}),Oe&&("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===Ie.value?("usages"in(Ie=Fe[Ie.value])||(Ie.usages=[]),Ie.usages.push({node:Re,property:Me,value:Xe})):Z[Ie.value]=!(Ie.value in Z)&&{node:Re,property:Me,value:Xe})}}}for(ae in le)if("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"in(z=le[ae])){for(xe=z["http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"],H=0;H<xe.usages.length;++H){for(Re=(Ie=xe.usages[H]).node,Ae=Ie.property,Ie=Ie.value,Me=[],Fe=[],Oe=Object.keys(Re).length;"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"===Ae&&ke(Z[Re["@id"]])&&se(Re["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"])&&1===Re["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"].length&&se(Re["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"])&&1===Re["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"].length&&(3===Oe||4===Oe&&se(Re["@type"])&&1===Re["@type"].length&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#List"===Re["@type"][0])&&(Me.push(Re["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"][0]),Fe.push(Re["@id"]),Re=(Ie=Z[Re["@id"]]).node,Ae=Ie.property,Ie=Ie.value,Oe=Object.keys(Re).length,0===Re["@id"].indexOf("_:")););if("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"===Ae){if("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===Re["@id"])continue;Ie=z[Ie["@id"]]["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"][0],Me.pop(),Fe.pop()}for(delete Ie["@id"],Ie["@list"]=Me.reverse(),Re=0;Re<Fe.length;++Re)delete z[Fe[Re]]}delete xe.usages}for(Z=[],ae=Object.keys(ue).sort(),H=0;H<ae.length;++H){if(Re=ue[z=ae[H]],z in le)for(xe=Re["@graph"]=[],z=le[z],Fe=Object.keys(z).sort(),Ae=0;Ae<Fe.length;++Ae)st(Me=z[Fe[Ae]])||xe.push(Me);st(Re)||Z.push(Re)}q(null,Z)},ie.prototype.toRDF=function(H,z){var q=new xt("_:b"),ue={"@default":{}};X(H,ue,"@default",q);for(var le={},Z=Object.keys(ue).sort(),ae=0;ae<Z.length;++ae){if("@default"===(xe=Z[ae])||Mt(xe)){for(var Fe=xe,xe=ue[xe],Ae=q,Me=z,Ie=[],Re=Object.keys(xe).sort(),Oe=0;Oe<Re.length;++Oe)for(var Xe=Re[Oe],et=xe[Xe],Je=Object.keys(et).sort(),_t=0;_t<Je.length;++_t){var mt=Je[_t],wt=et[mt];if("@type"===mt)mt="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";else if($e(mt))continue;for(var At=0;At<wt.length;++At){var Pt=wt[At],Ot={};if(Ot.type=0===Xe.indexOf("_:")?"blank node":"IRI",Ot.value=Xe,Mt(Xe)){var tr={};if(tr.type=0===mt.indexOf("_:")?"blank node":"IRI",tr.value=mt,Mt(mt)&&("blank node"!==tr.type||Me.produceGeneralizedRdf))if(vt(Pt)){Pt=Pt["@list"];for(var pr=Ae,Mr=Ie,Lr={type:"IRI",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},Ar={type:"IRI",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},J=0;J<Pt.length;++J){var jr=Pt[J],Er={type:"blank node",value:pr.getId()};Mr.push({subject:Ot,predicate:tr,object:Er}),Ot=Er,tr=Lr,(jr=Y(jr))&&Mr.push({subject:Ot,predicate:tr,object:jr}),tr=Ar}Mr.push({subject:Ot,predicate:tr,object:{type:"IRI",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}})}else(Pt=Y(Pt))&&Ie.push({subject:Ot,predicate:tr,object:Pt})}}}le[Fe]=Ie}}return le},ie.prototype.processContext=function(H,z,q){if(ke(z)&&"@context"in z&&se(z["@context"])&&(z=z["@context"]),0===(z=se(z)?z:[z]).length)return H.clone();for(var ue=H,le=0;le<z.length;++le){var Z=z[le];if(null===Z)ue=H=Qe(q);else{if(ke(Z)&&"@context"in Z&&(Z=Z["@context"]),!ke(Z))throw new Pe("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Z});if(O.cache.activeCtx&&(H=O.cache.activeCtx.get(H,Z))){ue=H;continue}H=ue;ue=ue.clone();var ae={};if("@base"in Z){var xe=Z["@base"];if(null===xe)xe=null;else{if(!me(xe))throw new Pe('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Z});if(""!==xe&&!Mt(xe))throw new Pe('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Z})}null!==xe&&(xe=O.url.parse(xe||"")),ue["@base"]=xe,ae["@base"]=!0}if("@vocab"in Z){if(null===(xe=Z["@vocab"]))delete ue["@vocab"];else{if(!me(xe))throw new Pe('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Z});if(!Mt(xe))throw new Pe('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Z});ue["@vocab"]=xe}ae["@vocab"]=!0}if("@language"in Z){if(null===(xe=Z["@language"]))delete ue["@language"];else{if(!me(xe))throw new Pe('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Z});ue["@language"]=xe.toLowerCase()}ae["@language"]=!0}for(var Fe in Z)Le(ue,Z,Fe,ae);O.cache.activeCtx&&O.cache.activeCtx.set(H,Z,ue)}}return ue};var H,z,be=(H={subject:"s",object:"o",name:"g"},(z=function(q){q=q||{},this.name="URDNA2015",this.options=q,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new xt("_:c14n"),this.quads=[],this.schedule={},this.schedule.MAX_DEPTH="maxCallStackDepth"in q?q.maxCallStackDepth:500,this.schedule.MAX_TOTAL_DEPTH="maxTotalCallStackDepth"in q?q.maxCallStackDepth:4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice="timeSlice"in q?q.timeSlice:10}).prototype.doWork=function(q,ue){var le=this.schedule;if(le.totalDepth>=le.MAX_TOTAL_DEPTH)return ue(Error("Maximum total call stack depth exceeded; normalization aborting."));!function Z(){if(le.depth===le.MAX_DEPTH)return le.depth=0,le.running=!1,O.nextTick(Z);var ae=(new Date).getTime();if(le.running||(le.start=(new Date).getTime(),le.deadline=le.start+le.timeSlice),ae<le.deadline)return le.running=!0,le.depth++,le.totalDepth++,q(function(xe,Fe){le.depth--,le.totalDepth--,ue(xe,Fe)});le.depth=0,le.running=!1,O.setImmediate(Z)}()},z.prototype.forEach=function(q,ue,le){var ae,Fe,Z=this,xe=0;if(se(q))Fe=q.length,ae=function(){return xe!==Fe&&(ae.value=q[xe++],ae.key=xe,!0)};else{var Ae=Object.keys(q);Fe=Ae.length,ae=function(){return xe!==Fe&&(ae.key=Ae[xe++],ae.value=q[ae.key],!0)}}!function Me(Ie,Re){return Ie?le(Ie):ae()?Z.doWork(function(){ue(ae.value,ae.key,Me)}):void le()}()},z.prototype.waterfall=function(q,ue){var le=this;le.forEach(q,function(Z,ae,xe){le.doWork(Z,xe)},ue)},z.prototype.whilst=function(q,ue,le){var Z=this;!function ae(xe){return xe?le(xe):q()?void Z.doWork(ue,ae):le()}()},z.prototype.main=function(q,ue){var Z,le=this;if(le.schedule.start=(new Date).getTime(),le.options.format&&"application/nquads"!==le.options.format)return ue(new Pe("Unknown output format.","jsonld.UnknownFormat",{format:le.options.format}));var ae={};le.waterfall([function(xe){le.forEach(q,function(Fe,Ae,Me){"@default"===Ae&&(Ae=null),le.forEach(Fe,function(Ie,Re,Oe){null!==Ae&&(0===Ae.indexOf("_:")?Ie.name={type:"blank node",value:Ae}:Ie.name={type:"IRI",value:Ae}),le.quads.push(Ie),le.forEachComponent(Ie,function(Xe){"blank node"===Xe.type&&((Xe=Xe.value)in le.blankNodeInfo?le.blankNodeInfo[Xe].quads.push(Ie):(ae[Xe]=!0,le.blankNodeInfo[Xe]={quads:[Ie]}))}),Oe()},Me)},xe)},function(xe){var Fe=!0;le.whilst(function(){return Fe},function(Ae){Fe=!1,le.hashToBlankNodes={},le.waterfall([function(Me){le.forEach(ae,function(Ie,Re,Oe){le.hashFirstDegreeQuads(Re,function(Xe,et){if(Xe)return Oe(Xe);et in le.hashToBlankNodes?le.hashToBlankNodes[et].push(Re):le.hashToBlankNodes[et]=[Re],Oe()})},Me)},function(Me){var Ie=Object.keys(le.hashToBlankNodes).sort();le.forEach(Ie,function(Re,Oe,Xe){if(1<(Oe=le.hashToBlankNodes[Re]).length)return Xe();Oe=Oe[0],le.canonicalIssuer.getId(Oe),delete ae[Oe],delete le.hashToBlankNodes[Re],Fe=!0,Xe()},Me)}],Ae)},xe)},function(xe){var Fe=Object.keys(le.hashToBlankNodes).sort();le.forEach(Fe,function(Ae,Me,Ie){var Re=[],Oe=le.hashToBlankNodes[Ae];le.waterfall([function(Xe){le.forEach(Oe,function(et,Je,_t){if(le.canonicalIssuer.hasId(et))return _t();(Je=new xt("_:b")).getId(et),le.hashNDegreeQuads(et,Je,function(mt,wt){if(mt)return _t(mt);Re.push(wt),_t()})},Xe)},function(Xe){Re.sort(function(et,Je){return et.hash<Je.hash?-1:et.hash>Je.hash?1:0}),le.forEach(Re,function(et,Je,_t){for(var mt in et.issuer.existing)le.canonicalIssuer.getId(mt);_t()},Xe)}],Ie)},xe)},function(xe){var Fe=[];le.waterfall([function(Ae){le.forEach(le.quads,function(Me,Ie,Re){le.forEachComponent(Me,function(Oe){"blank node"===Oe.type&&0!==Oe.value.indexOf(le.canonicalIssuer.prefix)&&(Oe.value=le.canonicalIssuer.getId(Oe.value))}),Fe.push(Lt(Me)),Re()},Ae)},function(Ae){if(Fe.sort(),"application/nquads"===le.options.format)return Z=Fe.join(""),Ae();Z=ht(Fe.join("")),Ae()}],xe)}],function(xe){ue(xe,Z)})},z.prototype.hashFirstDegreeQuads=function(q,ue){var le=this,Z=le.blankNodeInfo[q];if("hash"in Z)return ue(null,Z.hash);var ae=[];le.forEach(Z.quads,function(xe,Fe,Ae){var Me={predicate:xe.predicate};le.forEachComponent(xe,function(Ie,Re){Me[Re]=le.modifyFirstDegreeComponent(q,Ie,Re)}),ae.push(Lt(Me)),Ae()},function(xe){if(xe)return ue(xe);ae.sort(),Z.hash=Ge.hashNQuads(le.name,ae),ue(null,Z.hash)})},z.prototype.modifyFirstDegreeComponent=function(q,ue){return"blank node"!==ue.type||((ue=tt(ue)).value=ue.value===q?"_:a":"_:z"),ue},z.prototype.hashRelatedBlankNode=function(q,ue,le,Z,ae){var Fe,xe=this;xe.waterfall([function(Ae){return xe.canonicalIssuer.hasId(q)?(Fe=xe.canonicalIssuer.getId(q),Ae()):le.hasId(q)?(Fe=le.getId(q),Ae()):void xe.hashFirstDegreeQuads(q,function(Me,Ie){if(Me)return Ae(Me);Fe=Ie,Ae()})}],function(Ae){return Ae?ae(Ae):((Ae=new Ge(xe.name)).update(Z),"g"!==Z&&Ae.update(xe.getRelatedPredicate(ue)),Ae.update(Fe),ae(null,Ae.digest()))})},z.prototype.getRelatedPredicate=function(q){return"<"+q.predicate.value+">"},z.prototype.hashNDegreeQuads=function(q,ue,le){var ae,Z=this,xe=new Ge(Z.name);Z.waterfall([function(Fe){Z.createHashToRelated(q,ue,function(Ae,Me){if(Ae)return Fe(Ae);ae=Me,Fe()})},function(Fe){var Ae=Object.keys(ae).sort();Z.forEach(Ae,function(Me,Ie,Re){xe.update(Me);var Xe,Oe="",et=new je(ae[Me]);Z.whilst(function(){return et.hasNext()},function(Je){var _t=et.next(),mt=ue.clone(),wt="",At=[];Z.waterfall([function(Pt){Z.forEach(_t,function(Ot,tr,pr){if(Z.canonicalIssuer.hasId(Ot)?wt+=Z.canonicalIssuer.getId(Ot):(mt.hasId(Ot)||At.push(Ot),wt+=mt.getId(Ot)),0!==Oe.length&&wt.length>=Oe.length&&wt>Oe)return Je();pr()},Pt)},function(Pt){Z.forEach(At,function(Ot,tr,pr){Z.hashNDegreeQuads(Ot,mt,function(Mr,Lr){return Mr?pr(Mr):(wt+=mt.getId(Ot),wt+="<"+Lr.hash+">",mt=Lr.issuer,0!==Oe.length&&wt.length>=Oe.length&&wt>Oe?Je():void pr())})},Pt)},function(Pt){(0===Oe.length||wt<Oe)&&(Oe=wt,Xe=mt),Pt()}],Je)},function(Je){if(Je)return Re(Je);xe.update(Oe),ue=Xe,Re()})},Fe)}],function(Fe){le(Fe,{hash:xe.digest(),issuer:ue})})},z.prototype.createHashToRelated=function(q,ue,le){var Z=this,ae={};Z.forEach(Z.blankNodeInfo[q].quads,function(xe,Fe,Ae){Z.forEach(xe,function(Me,Ie,Re){if("predicate"===Ie||"blank node"!==Me.type||Me.value===q)return Re();var Oe=Me.value;Z.hashRelatedBlankNode(Oe,xe,ue,H[Ie],function(Xe,et){if(Xe)return Re(Xe);et in ae?ae[et].push(Oe):ae[et]=[Oe],Re()})},Ae)},function(xe){le(xe,ae)})},z.prototype.forEachComponent=function(q,ue){for(var le in q)"predicate"!==le&&ue(q[le],le,q)},z),Te=function(){var H=function(z){be.call(this,z),this.name="URGNA2012"};return H.prototype=new be,H.prototype.modifyFirstDegreeComponent=function(z,q,ue){return"blank node"!==q.type||((q=tt(q)).value="name"===ue?"_:g":q.value===z?"_:a":"_:z"),q},H.prototype.getRelatedPredicate=function(z){return z.predicate.value},H.prototype.createHashToRelated=function(z,q,ue){var le=this,Z={};le.forEach(le.blankNodeInfo[z].quads,function(ae,xe,Fe){var Ae;if("blank node"===ae.subject.type&&ae.subject.value!==z)Ae=ae.subject.value,xe="p";else{if("blank node"!==ae.object.type||ae.object.value===z)return Fe();Ae=ae.object.value,xe="r"}le.hashRelatedBlankNode(Ae,ae,q,xe,function(Me,Ie){Ie in Z?Z[Ie].push(Ae):Z[Ie]=[Ae],Fe()})},function(ae){ue(ae,Z)})},H}();Object.keys||(Object.keys=function(H){if(H!==Object(H))throw new TypeError("Object.keys called on non-object");var q,z=[];for(q in H)Object.prototype.hasOwnProperty.call(H,q)&&z.push(q);return z}),O.registerRDFParser("application/nquads",ht),O.registerRDFParser("rdfa-api",function(H){for(var z={"@default":[]},q=H.getSubjects(),ue=0;ue<q.length;++ue){var le=q[ue];if(null!==le)if(null!==(Z=H.getSubjectTriples(le))){var ae,Z=Z.predicates;for(ae in Z)for(var xe=Z[ae].objects,Fe=0;Fe<xe.length;++Fe){var Ae=xe[Fe],Me={};0===le.indexOf("_:")?Me.subject={type:"blank node",value:le}:Me.subject={type:"IRI",value:le},0===ae.indexOf("_:")?Me.predicate={type:"blank node",value:ae}:Me.predicate={type:"IRI",value:ae};var Ie=Ae.value;if("http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"===Ae.type){Wr||(Wr=Ce("xmldom").XMLSerializer);for(var Re=new Wr,Oe=(Ie="",0);Oe<Ae.value.length;Oe++)Ae.value[Oe].nodeType===hr.ELEMENT_NODE?Ie+=Re.serializeToString(Ae.value[Oe]):Ae.value[Oe].nodeType===hr.TEXT_NODE&&(Ie+=Ae.value[Oe].nodeValue)}Me.object={},"http://www.w3.org/1999/02/22-rdf-syntax-ns#object"===Ae.type?0===Ae.value.indexOf("_:")?Me.object.type="blank node":Me.object.type="IRI":(Me.object.type="literal","http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral"===Ae.type?Ae.language?(Me.object.datatype=Fr,Me.object.language=Ae.language):Me.object.datatype=$t:Me.object.datatype=Ae.type),Me.object.value=Ie,z["@default"].push(Me)}}}return z}),O.IdentifierIssuer=xt,O.UniqueNamer=xt,xt.prototype.clone=function(){var H=new xt(this.prefix);return H.counter=this.counter,H.existing=tt(this.existing),H},xt.prototype.getId=function(H){if(H&&H in this.existing)return this.existing[H];var z=this.prefix+this.counter;return this.counter+=1,H&&(this.existing[H]=z),z},xt.prototype.getName=xt.prototype.getName,xt.prototype.hasId=function(H){return H in this.existing},xt.prototype.isNamed=xt.prototype.hasId;var je=function(H){this.list=H.sort(),this.done=!1,this.left={};for(var z=0;z<H.length;++z)this.left[H[z]]=!0};je.prototype.hasNext=function(){return!this.done},je.prototype.next=function(){for(var H=this.list.slice(),z=null,q=0,ue=this.list.length,le=0;le<ue;++le){var Z=this.list[le],ae=this.left[Z];(null===z||Z>z)&&(ae&&0<le&&Z>this.list[le-1]||!ae&&le<ue-1&&Z>this.list[le+1])&&(z=Z,q=le)}if(null===z)this.done=!0;else for(le=this.left[z]?q-1:q+1,this.list[q]=this.list[le],this.list[le]=z,le=0;le<ue;++le)this.list[le]>z&&(this.left[this.list[le]]=!this.left[this.list[le]]);return H};var Ge=function(H){if(!(this instanceof Ge))return new Ge(H);if(-1===["URDNA2015","URGNA2012"].indexOf(H))throw Error("Invalid RDF Dataset Normalization algorithm: "+H);Ge._init.call(this,H)};return Ge.hashNQuads=function(H,z){for(var q=new Ge(H),ue=0;ue<z.length;++ue)q.update(z[ue]);return q.digest()},function(H){if(H){var z=Ce("crypto");Ge._init=function(Z){this.md=z.createHash("URDNA2015"===Z?"sha256":"sha1")},Ge.prototype.update=function(Z){return this.md.update(Z,"utf8")},Ge.prototype.digest=function(){return this.md.digest("hex")}}else{Ge._init=function(Z){Z="URDNA2015"===Z?new le.Algorithm:new ue.Algorithm,this.md=new q(Z)},Ge.prototype.update=function(Z){return this.md.update(Z)},Ge.prototype.digest=function(){return this.md.digest().toHex()};var q=function(Z){if(!(this instanceof q))return new q(Z);if(this._algorithm=Z,!q._padding||q._padding.length<this._algorithm.blockSize){q._padding=String.fromCharCode(128),Z=String.fromCharCode(0);for(var ae=64;0<ae;)1&ae&&(q._padding+=Z),0<(ae>>>=1)&&(Z+=Z)}this.start()};q.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var Z=this._algorithm.messageLengthSize/4,ae=0;ae<Z;++ae)this.fullMessageLength.push(0);return this._input=new q.ByteBuffer,this.state=this._algorithm.start(),this},q.prototype.update=function(Z){Z=new q.ByteBuffer(unescape(encodeURIComponent(Z))),this.messageLength+=Z.length();for(var ae=[(ae=Z.length())/4294967296>>>0,ae>>>0],xe=this.fullMessageLength.length-1;0<=xe;--xe)this.fullMessageLength[xe]+=ae[1],ae[1]=ae[0]+(this.fullMessageLength[xe]/4294967296>>>0),this.fullMessageLength[xe]>>>=0,ae[0]=ae[1]/4294967296>>>0;for(this._input.putBytes(Z.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(2048<this._input.read||0===this._input.length())&&this._input.compact(),this},q.prototype.digest=function(){var Z=new q.ByteBuffer;Z.putBytes(this._input.bytes()),Z.putBytes(q._padding.substr(0,this._algorithm.blockSize-(this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize&this._algorithm.blockSize-1)));for(var ae=new q.ByteBuffer,xe=0;xe<this.fullMessageLength.length;++xe)ae.putInt32(this.fullMessageLength[xe]<<3|this.fullMessageLength[xe+1]>>>28);return this._algorithm.writeMessageLength(Z,ae),Z=this._algorithm.digest(this.state.copy(),Z),ae=new q.ByteBuffer,Z.write(ae),ae},q.ByteBuffer=function(Z){this.data="string"==typeof Z?Z:"",this.read=0},q.ByteBuffer.prototype.putInt32=function(Z){this.data+=String.fromCharCode(Z>>24&255)+String.fromCharCode(Z>>16&255)+String.fromCharCode(Z>>8&255)+String.fromCharCode(255&Z)},q.ByteBuffer.prototype.getInt32=function(){var Z=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,Z},q.ByteBuffer.prototype.putBytes=function(Z){this.data+=Z},q.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},q.ByteBuffer.prototype.length=function(){return this.data.length-this.read},q.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},q.ByteBuffer.prototype.toHex=function(){for(var Z="",ae=this.read;ae<this.data.length;++ae){var xe=this.data.charCodeAt(ae);16>xe&&(Z+="0"),Z+=xe.toString(16)}return Z};var ue={_w:null,Algorithm:function(){this.name="sha1",this.blockSize=64,this.digestLength=20,this.messageLengthSize=8}};ue.Algorithm.prototype.start=function(){return ue._w||(ue._w=Array(80)),ue._createState()},ue.Algorithm.prototype.writeMessageLength=function(Z,ae){Z.putBytes(ae.bytes())},ue.Algorithm.prototype.digest=function(Z,ae){for(var xe,Fe,Ae,Me,Ie,Re,Xe,et=ae.length(),Je=ue._w;64<=et;){for(Fe=Z.h0,Ae=Z.h1,Me=Z.h2,Ie=Z.h3,Re=Z.h4,Xe=0;16>Xe;++Xe)xe=ae.getInt32(),Je[Xe]=xe,xe=(Fe<<5|Fe>>>27)+(Ie^Ae&(Me^Ie))+Re+1518500249+xe,Re=Ie,Ie=Me,Me=Ae<<30|Ae>>>2,Ae=Fe,Fe=xe;for(;20>Xe;++Xe)xe=(xe=Je[Xe-3]^Je[Xe-8]^Je[Xe-14]^Je[Xe-16])<<1|xe>>>31,Je[Xe]=xe,xe=(Fe<<5|Fe>>>27)+(Ie^Ae&(Me^Ie))+Re+1518500249+xe,Re=Ie,Ie=Me,Me=Ae<<30|Ae>>>2,Ae=Fe,Fe=xe;for(;32>Xe;++Xe)xe=(xe=Je[Xe-3]^Je[Xe-8]^Je[Xe-14]^Je[Xe-16])<<1|xe>>>31,Je[Xe]=xe,xe=(Fe<<5|Fe>>>27)+(Ae^Me^Ie)+Re+1859775393+xe,Re=Ie,Ie=Me,Me=Ae<<30|Ae>>>2,Ae=Fe,Fe=xe;for(;40>Xe;++Xe)xe=(xe=Je[Xe-6]^Je[Xe-16]^Je[Xe-28]^Je[Xe-32])<<2|xe>>>30,Je[Xe]=xe,xe=(Fe<<5|Fe>>>27)+(Ae^Me^Ie)+Re+1859775393+xe,Re=Ie,Ie=Me,Me=Ae<<30|Ae>>>2,Ae=Fe,Fe=xe;for(;60>Xe;++Xe)xe=(xe=Je[Xe-6]^Je[Xe-16]^Je[Xe-28]^Je[Xe-32])<<2|xe>>>30,Je[Xe]=xe,xe=(Fe<<5|Fe>>>27)+(Ae&Me|Ie&(Ae^Me))+Re+2400959708+xe,Re=Ie,Ie=Me,Me=Ae<<30|Ae>>>2,Ae=Fe,Fe=xe;for(;80>Xe;++Xe)xe=(xe=Je[Xe-6]^Je[Xe-16]^Je[Xe-28]^Je[Xe-32])<<2|xe>>>30,Je[Xe]=xe,xe=(Fe<<5|Fe>>>27)+(Ae^Me^Ie)+Re+3395469782+xe,Re=Ie,Ie=Me,Me=Ae<<30|Ae>>>2,Ae=Fe,Fe=xe;Z.h0=Z.h0+Fe|0,Z.h1=Z.h1+Ae|0,Z.h2=Z.h2+Me|0,Z.h3=Z.h3+Ie|0,Z.h4=Z.h4+Re|0,et-=64}return Z},ue._createState=function(){var Z={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520,copy:function(){var ae=ue._createState();return ae.h0=Z.h0,ae.h1=Z.h1,ae.h2=Z.h2,ae.h3=Z.h3,ae.h4=Z.h4,ae},write:function(ae){ae.putInt32(Z.h0),ae.putInt32(Z.h1),ae.putInt32(Z.h2),ae.putInt32(Z.h3),ae.putInt32(Z.h4)}};return Z};var le={_k:null,_w:null,Algorithm:function(){this.name="sha256",this.blockSize=64,this.digestLength=32,this.messageLengthSize=8}};le.Algorithm.prototype.start=function(){return le._k||le._init(),le._createState()},le.Algorithm.prototype.writeMessageLength=function(Z,ae){Z.putBytes(ae.bytes())},le.Algorithm.prototype.digest=function(Z,ae){for(var xe,Fe,Me,Ie,Re,Oe,Xe,et,Je,_t,mt,wt,At=ae.length(),Pt=le._k,Ot=le._w;64<=At;){for(Ie=0;16>Ie;++Ie)Ot[Ie]=ae.getInt32();for(;64>Ie;++Ie)xe=((xe=Ot[Ie-2])>>>17|xe<<15)^(xe>>>19|xe<<13)^xe>>>10,Fe=((Fe=Ot[Ie-15])>>>7|Fe<<25)^(Fe>>>18|Fe<<14)^Fe>>>3,Ot[Ie]=xe+Ot[Ie-7]+Fe+Ot[Ie-16]|0;for(Re=Z.h0,Oe=Z.h1,Xe=Z.h2,et=Z.h3,Je=Z.h4,_t=Z.h5,mt=Z.h6,wt=Z.h7,Ie=0;64>Ie;++Ie)Fe=(Re>>>2|Re<<30)^(Re>>>13|Re<<19)^(Re>>>22|Re<<10),Me=Re&Oe|Xe&(Re^Oe),xe=wt+(xe=(Je>>>6|Je<<26)^(Je>>>11|Je<<21)^(Je>>>25|Je<<7))+(mt^Je&(_t^mt))+Pt[Ie]+Ot[Ie],wt=mt,mt=_t,_t=Je,Je=et+xe|0,et=Xe,Xe=Oe,Oe=Re,Re=xe+(Fe+=Me)|0;Z.h0=Z.h0+Re|0,Z.h1=Z.h1+Oe|0,Z.h2=Z.h2+Xe|0,Z.h3=Z.h3+et|0,Z.h4=Z.h4+Je|0,Z.h5=Z.h5+_t|0,Z.h6=Z.h6+mt|0,Z.h7=Z.h7+wt|0,At-=64}return Z},le._createState=function(){var Z={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225,copy:function(){var ae=le._createState();return ae.h0=Z.h0,ae.h1=Z.h1,ae.h2=Z.h2,ae.h3=Z.h3,ae.h4=Z.h4,ae.h5=Z.h5,ae.h6=Z.h6,ae.h7=Z.h7,ae},write:function(ae){ae.putInt32(Z.h0),ae.putInt32(Z.h1),ae.putInt32(Z.h2),ae.putInt32(Z.h3),ae.putInt32(Z.h4),ae.putInt32(Z.h5),ae.putInt32(Z.h6),ae.putInt32(Z.h7)}};return Z},le._init=function(){le._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],le._w=Array(64)}}}(T),O.url={},O.url.parsers={simple:{keys:"href scheme authority path query fragment".split(" "),regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:"href protocol scheme authority auth user password hostname port path directory file query fragment".split(" "),regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},O.url.parse=function(H,z){for(var q={},ue=O.url.parsers[z||"full"],le=ue.regex.exec(H),Z=ue.keys.length;Z--;)q[ue.keys[Z]]=void 0===le[Z]?null:le[Z];return q.normalizedPath=Tt(q.path,!!q.authority),q},T?O.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&O.useDocumentLoader("xhr"),T&&(O.use=function(H){if("request"!==H)throw new Pe("Unknown extension.","jsonld.UnknownExtension",{extension:H});O.request=Ce("jsonld-request")},St={exports:{},filename:N},Ce("pkginfo")(St,"version"),O.version=St.exports.version),O},D=function(){return I(function(){return D()})};I(D),"function"==typeof Ce&&void 0!==Ee&&Ee.exports&&(Ee.exports=D),_&&("undefined"==typeof jsonld?jsonld=jsonldjs=D:jsonldjs=D)}()}).call(this,Ce("2ionoC"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},"/..\\node_modules\\jsonld\\js")},{"2ionoC":9,crypto:30,"es6-promise":3,http:30,"jsonld-request":30,pkginfo:30,request:30,util:30,xmldom:30}],32:[function(Ce,Ee,Be){var ye=Ce;Ce=function(){},Be=Ee.exports={Lexer:Ce("./lib/N3Lexer"),Parser:Ce("./lib/N3Parser"),Writer:Ce("./lib/N3Writer"),Store:Ce("./lib/N3Store"),StreamParser:Ce("./lib/N3StreamParser"),StreamWriter:Ce("./lib/N3StreamWriter"),Util:Ce("./lib/N3Util")},Object.keys(Be).forEach(function(j){Object.defineProperty(Be,j,{configurable:!0,enumerable:!0,get:function(){return delete Be[j],Be[j]=ye("./lib/N3"+j)}})})},{"./lib/N3Lexer":33,"./lib/N3Parser":34,"./lib/N3Store":35,"./lib/N3StreamParser":36,"./lib/N3StreamWriter":37,"./lib/N3Util":38,"./lib/N3Writer":39}],33:[function(Ce,Ee,Be){function ye(D){if(!(this instanceof ye))return new ye(D);if((D=D||{}).lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var O=this;this._tokenize=this.tokenize,this.tokenize=function(s,R){this._tokenize(s,function(G,Y){!G&&/^(?:IRI|blank|literal|langcode|typeIRI|\.|eof)$/.test(Y.type)?R&&R(G,Y):R&&R(G||O._syntaxError(Y.type,R=null))})}}this._n3Mode=!1!==D.n3,this._comments=!!D.comments}var j=String.fromCharCode,N="function"==typeof setImmediate?setImmediate:function(D){setTimeout(D,0)},T=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,_={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},I=/[\x00-\x20<>\\"\{\}\|\^\`]/;ye.prototype={_iri:/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,_unescapedString:/^"[^"\\\r\n]+"/,_singleQuotedString:/^"(?:[^"\\\r\n]|\\.)*"(?=[^"])|^'(?:[^'\\\r\n]|\\.)*'(?=[^'])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<]))/,_variable:/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<]))/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/i,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_comment:/#([^\n\r]*)/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(D,O){function s(W){D(W._syntaxError(/^\S*/.exec(R)[0]))}for(var R=this._input,G=this._comments;;){for(var Y,X;Y=this._newline.exec(R);)G&&(X=this._comment.exec(Y[0]))&&D(null,{line:this._line,type:"comment",value:X[1],prefix:""}),R=R.substr(Y[0].length,R.length),this._line++;if((Y=this._whitespace.exec(R))&&(R=R.substr(Y[0].length,R.length)),this._endOfFile.test(R))return O&&(G&&(X=this._comment.exec(R))&&D(null,{line:this._line,type:"comment",value:X[1],prefix:""}),D(R=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=R;var fe=this._line,ne=Y="",re="",oe=R[0],he=null,pe=0,V=!1;switch(oe){case"^":if(3>R.length)break;if("^"!==R[1]){this._n3Mode&&(pe=1,Y="^");break}if(this._previousMarker="^^","<"!==(R=R.substr(2))[0]){V=!0;break}case"<":if(he=this._unescapedIri.exec(R))Y="IRI",ne=he[1];else if(he=this._iri.exec(R)){if(null===(ne=this._unescape(he[1]))||I.test(ne))return s(this);Y="IRI"}else this._n3Mode&&1<R.length&&"="===R[1]&&(Y="inverse",pe=2,ne="http://www.w3.org/2000/10/swap/log#implies");break;case"_":((he=this._blank.exec(R))||O&&(he=this._blank.exec(R+" ")))&&(Y="blank",re="_",ne=he[1]);break;case'"':case"'":if(he=this._unescapedString.exec(R))Y="literal",ne=he[0];else if(he=this._singleQuotedString.exec(R)){if(null===(ne=this._unescape(he[0])))return s(this);Y="literal",ne=ne.replace(/^'|'$/g,'"')}else if(he=this._tripleQuotedString.exec(R)){if(ne=he[1]||he[2],this._line+=ne.split(/\r\n|\r|\n/).length-1,null===(ne=this._unescape(ne)))return s(this);Y="literal",ne=ne.replace(/^'|'$/g,'"')}break;case"?":this._n3Mode&&(he=this._variable.exec(R))&&(Y="var",ne=he[0]);break;case"@":"literal"===this._previousMarker&&(he=this._langcode.exec(R))?(Y="langcode",ne=he[1]):(he=this._keyword.exec(R))&&(Y=he[0]);break;case".":if(1===R.length?O:"0">R[1]||"9"<R[1]){Y=".",pe=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(he=this._number.exec(R)||O&&(he=this._number.exec(R+" ")))&&(Y="literal",ne='"'+he[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(he[1]?"double":/^[+\-]?\d+$/.test(he[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(he=this._sparqlKeyword.exec(R))?Y=he[0].toUpperCase():V=!0;break;case"f":case"t":(he=this._boolean.exec(R))?(Y="literal",ne='"'+he[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):V=!0;break;case"a":(he=this._shortPredicates.exec(R))?(Y="abbreviation",ne="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):V=!0;break;case"=":this._n3Mode&&1<R.length&&(Y="abbreviation",">"!==R[1]?(pe=1,ne="http://www.w3.org/2002/07/owl#sameAs"):(pe=2,ne="http://www.w3.org/2000/10/swap/log#implies"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":pe=1,Y=oe;break;default:V=!0}if(V&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(he=this._prefix.exec(R))?((he=this._prefixed.exec(R))||O&&(he=this._prefixed.exec(R+" ")))&&(Y="prefixed",re=he[1]||"",ne=this._unescape(he[2])):(Y="prefix",ne=he[1]||"")),"^^"===this._previousMarker)switch(Y){case"prefixed":Y="type";break;case"IRI":Y="typeIRI";break;default:Y=""}if(!Y)return O||!/^'''|^"""/.test(R)&&/\n|\r/.test(R)?s(this):this._input=R;D(null,fe={line:fe,type:Y,value:ne,prefix:re}),this.previousToken=fe,this._previousMarker=Y,R=R.substr(pe||he[0].length,R.length)}},_unescape:function(D){try{return D.replace(T,function(O,s,R,G){if(s){if(O=parseInt(s,16),isNaN(O))throw Error();return j(O)}if(R){if(O=parseInt(R,16),isNaN(O))throw Error();return 65535>=O?j(O):j(55296+(O-=65536)/1024,56320+(1023&O))}if(!(O=_[G]))throw Error();return O})}catch(O){return null}},_syntaxError:function(D){return this._input=null,(D=Error('Unexpected "'+D+'" on line '+this._line+".")).context={token:void 0,line:this._line,previousToken:this.previousToken},D},tokenize:function(D,O){var s=this;if(this._line=1,"string"==typeof D){if(this._input=D,"function"!=typeof O){var G,R=[];if(this._tokenizeToEnd(function(Y,X){Y?G=Y:R.push(X)},!0),G)throw G;return R}N(function(){s._tokenizeToEnd(O,!0)})}else this._input="","function"==typeof D.setEncoding&&D.setEncoding("utf8"),D.on("data",function(Y){null!==s._input&&(s._input+=Y,s._tokenizeToEnd(O,!1))}),D.on("end",function(){null!==s._input&&s._tokenizeToEnd(O,!0)}),D.on("error",O)}},Ee.exports=ye},{}],34:[function(Ce,Ee,Be){function ye(s){if(!(this instanceof ye))return new ye(s);this._contextStack=[],this._graph=null,s=s||{},this._setBase(s.documentIRI);var R="turtle"===(X="string"==typeof s.format?s.format.match(/\w*$/)[0].toLowerCase():""),G="trig"===X,Y=/triple/.test(X),fe=/quad/.test(X),X=this._n3Mode=/n3/.test(X);fe=Y||fe;(this._supportsNamedGraphs=!(R||X))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(R||G||Y||X),fe&&(this._base="",this._resolveIRI=function(ne){return this._error("Disallowed relative IRI",ne),this._callback=j,this._subject=null}),this._blankNodePrefix="string"!=typeof s.blankNodePrefix?"":"_:"+s.blankNodePrefix.replace(/^_:/,""),this._lexer=s.lexer||new N({lineMode:fe,n3:X}),this._explicitQuantifiers=!!s.explicitQuantifiers}function j(){}var N=Ce("./N3Lexer"),T=/^[a-z][a-z0-9+.-]*:/i,_=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,I=/(?:^|\/)\.\.?(?:$|[\/#?])/,D=0,O=0;ye._resetBlankNodeIds=function(){D=O=0},ye.prototype={_setBase:function(s){if(s){var R=s.indexOf("#");0<=R&&(s=s.substr(0,R)),this._base=s,this._basePath=0>s.indexOf("/")?s:s.replace(/[^\/?]*(?:\?.*)?$/,""),s=s.match(_),this._baseRoot=s[0],this._baseScheme=s[1]}else this._base=null},_saveContext:function(s,R,G,Y,X){var fe=this._n3Mode;this._contextStack.push({subject:G,predicate:Y,object:X,graph:R,type:s,inverse:!!fe&&this._inversePredicate,blankPrefix:fe?this._prefixes._:"",quantified:fe?this._quantified:null}),fe&&(this._inversePredicate=!1,this._prefixes._=this._graph+".",this._quantified=Object.create(this._quantified))},_restoreContext:function(){var s=this._contextStack.pop(),R=this._n3Mode;this._subject=s.subject,this._predicate=s.predicate,this._object=s.object,this._graph=s.graph,R&&(this._inversePredicate=s.inverse,this._prefixes._=s.blankPrefix,this._quantified=s.quantified)},_readInTopContext:function(s){switch(s.type){case"eof":return null!==this._graph?this._error("Unclosed graph",s):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(s)}},_readEntity:function(s,R){var G;switch(s.type){case"IRI":case"typeIRI":G=null===this._base||T.test(s.value)?s.value:this._resolveIRI(s);break;case"type":case"blank":case"prefixed":if(void 0===(G=this._prefixes[s.prefix]))return this._error('Undefined prefix "'+s.prefix+':"',s);G+=s.value;break;case"var":return s.value;default:return this._error("Expected entity but got "+s.type,s)}return!R&&this._n3Mode&&G in this._quantified&&(G=this._quantified[G]),G},_readSubject:function(s){switch(this._predicate=null,s.type){case"[":return this._saveContext("blank",this._graph,this._subject="_:b"+O++,null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph="_:b"+O++,null,null),this._readSubject):this._error("Unexpected graph",s);case"}":return this._readPunctuation(s);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forSome",this._quantifiedPrefix="_:b",this._readQuantifierList):this._error('Unexpected "@forSome"',s);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate="http://www.w3.org/2000/10/swap/reify#forAll",this._quantifiedPrefix="?b-",this._readQuantifierList):this._error('Unexpected "@forAll"',s);default:if(void 0===(this._subject=this._readEntity(s)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph},_readPredicate:function(s){var R=s.type;switch(R){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=s.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+R,s):(this._subject=null,"]"===R?this._readBlankNodeTail(s):this._readPunctuation(s));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",s);case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",s);default:if(void 0===(this._predicate=this._readEntity(s)))return}return this._readObject},_readObject:function(s){switch(s.type){case"literal":return this._object=s.value,this._readDataTypeOrLang;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject="_:b"+O++),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph="_:b"+O++),this._readSubject):this._error("Unexpected graph",s);default:if(void 0===(this._object=this._readEntity(s)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()},_readPredicateOrNamedGraph:function(s){return"{"===s.type?this._readGraph(s):this._readPredicate(s)},_readGraph:function(s){return"{"!==s.type?this._error("Expected graph but got "+s.type,s):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(s){return"]"===s.type?(this._subject=null,this._readBlankNodeTail(s)):(this._predicate=null,this._readPredicate(s))},_readBlankNodeTail:function(s){return"]"!==s.type?this._readBlankNodePunctuation(s):(null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph),s=null===this._predicate,this._restoreContext(),null===this._object?s?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank:this._getContextEndReader())},_readPredicateAfterBlank:function(s){return"."!==s.type||this._contextStack.length?this._readPredicate(s):(this._subject=null,this._readPunctuation(s))},_readListItem:function(s){var R=null,G=null,Y=this._subject,X=this._contextStack,fe=X[X.length-1],ne=this._readListItem,re=!0;switch(s.type){case"[":this._saveContext("blank",this._graph,G="_:b"+O++,"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",this._subject=R="_:b"+O++),ne=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,G="_:b"+O++,"http://www.w3.org/1999/02/22-rdf-syntax-ns#first","http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"),this._subject=null;break;case")":if(this._restoreContext(),0!==X.length&&"list"===X[X.length-1].type&&this._triple(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(ne=this._readPredicate,"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===this._subject)return ne}else if(ne=this._getContextEndReader(),"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===this._object)return ne;G="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil";break;case"literal":R=s.value,re=!1,ne=this._readListItemDataTypeOrLang;break;default:if(void 0===(R=this._readEntity(s)))return}if(null===G&&(this._subject=G="_:b"+O++),null===Y?null===fe.predicate?fe.subject=G:fe.object=G:this._triple(Y,"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",G,this._graph),null!==R){if(this._n3Mode&&("IRI"===s.type||"prefixed"===s.type))return this._saveContext("item",this._graph,G,"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",R),this._subject=R,this._predicate=null,this._getPathReader(this._readListItem);re?this._triple(G,"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",R,this._graph):this._object=R}return ne},_readDataTypeOrLang:function(s){return this._completeLiteral(s,!1)},_readListItemDataTypeOrLang:function(s){return this._completeLiteral(s,!0)},_completeLiteral:function(s,R){var G=!1;switch(s.type){case"type":case"typeIRI":var Y=this._readEntity(s);if(void 0===Y)return;G=!0,this._object+="^^"+Y;break;case"langcode":G=!0,this._object+="@"+s.value.toLowerCase()}return R&&this._triple(this._subject,"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",this._object,this._graph),G?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(s))},_readFormulaTail:function(s){return"}"!==s.type?this._readPunctuation(s):(null!==this._subject&&this._triple(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())},_readPunctuation:function(s){var R=this._subject,G=this._graph,Y=this._inversePredicate;switch(s.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",s);if(this._n3Mode)return this._readFormulaTail(s);this._graph=null;case".":this._subject=null,s=this._contextStack.length?this._readSubject:this._readInTopContext,Y&&(this._inversePredicate=!1);break;case";":s=this._readPredicate;break;case",":s=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(G=this._readEntity(s))){s=this._readQuadPunctuation;break}return this._error('Expected punctuation to follow "'+this._object+'"',s)}if(null!==R){var X=this._predicate,fe=this._object;Y?this._triple(fe,X,R,G):this._triple(R,X,fe,G)}return s},_readBlankNodePunctuation:function(s){switch(s.type){case";":s=this._readPredicate;break;case",":s=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',s)}return this._triple(this._subject,this._predicate,this._object,this._graph),s},_readQuadPunctuation:function(s){return"."!==s.type?this._error("Expected dot to follow quad",s):this._readInTopContext},_readPrefix:function(s){return"prefix"!==s.type?this._error("Expected prefix to follow @prefix",s):(this._prefix=s.value,this._readPrefixIRI)},_readPrefixIRI:function(s){return"IRI"!==s.type?this._error('Expected IRI to follow prefix "'+this._prefix+':"',s):(s=this._readEntity(s),this._prefixes[this._prefix]=s,this._prefixCallback(this._prefix,s),this._readDeclarationPunctuation)},_readBaseIRI:function(s){return"IRI"!==s.type?this._error("Expected IRI to follow base declaration",s):(this._setBase(null===this._base||T.test(s.value)?s.value:this._resolveIRI(s)),this._readDeclarationPunctuation)},_readNamedGraphLabel:function(s){switch(s.type){case"IRI":case"blank":case"prefixed":return this._readSubject(s),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",s)}},_readNamedGraphBlankLabel:function(s){return"]"!==s.type?this._error("Invalid graph label",s):(this._subject="_:b"+O++,this._readGraph)},_readDeclarationPunctuation:function(s){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(s)):"."!==s.type?this._error("Expected declaration to end with a dot",s):this._readInTopContext},_readQuantifierList:function(s){var R;switch(s.type){case"IRI":case"prefixed":if(void 0!==(R=this._readEntity(s,!0)))break;default:return this._error("Unexpected "+s.type,s)}return this._explicitQuantifiers?(null===this._subject?this._triple(this._graph||"",this._predicate,this._subject="_:b"+O++,"urn:n3:quantifiers"):this._triple(this._subject,"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",this._subject="_:b"+O++,"urn:n3:quantifiers"),this._triple(this._subject,"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",R,"urn:n3:quantifiers")):this._quantified[R]=this._quantifiedPrefix+O++,this._readQuantifierPunctuation},_readQuantifierPunctuation:function(s){return","===s.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._triple(this._subject,"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest","http://www.w3.org/1999/02/22-rdf-syntax-ns#nil","urn:n3:quantifiers"),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(s))},_getPathReader:function(s){return this._afterPath=s,this._readPath},_readPath:function(s){switch(s.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:var R=this._contextStack;return(R=R.length&&R[R.length-1])&&"item"===R.type&&(R=this._subject,this._restoreContext(),this._triple(this._subject,"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",R,this._graph)),this._afterPath(s)}},_readForwardPath:function(s){var R,G="_:b"+O++;if(void 0!==(R=this._readEntity(s)))return null===this._predicate?(s=this._subject,this._subject=G):(s=this._object,this._object=G),this._triple(s,R,G,this._graph),this._readPath},_readBackwardPath:function(s){var G,R="_:b"+O++;if(void 0!==(s=this._readEntity(s)))return null===this._predicate?(G=this._subject,this._subject=R):(G=this._object,this._object=R),this._triple(R,s,G,this._graph),this._readPath},_getContextEndReader:function(){var s=this._contextStack;if(!s.length)return this._readPunctuation;switch(s[s.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail}},_triple:function(s,R,G,Y){this._callback(null,{subject:s,predicate:R,object:G,graph:Y||""})},_error:function(s,R){var G=Error(s+" on line "+R.line+".");G.context={token:R,line:R.line,previousToken:this._lexer.previousToken},this._callback(G),this._callback=j},_resolveIRI:function(s){switch((s=s.value)[0]){case void 0:return this._base;case"#":return this._base+s;case"?":return this._base.replace(/(?:\?.*)?$/,s);case"/":return("/"===s[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(s);default:return this._removeDotSegments(this._basePath+s)}},_removeDotSegments:function(s){if(!I.test(s))return s;for(var R="",G=s.length,Y=-1,X=-1,fe=0,ne="/";Y<G;){switch(ne){case":":if(0>X&&"/"===s[++Y]&&"/"===s[++Y])for(;(X=Y+1)<G&&"/"!==s[X];)Y=X;break;case"?":case"#":Y=G;break;case"/":if("."===s[Y+1])switch(ne=s[1+ ++Y],ne){case"/":R+=s.substring(fe,Y-1),fe=Y+1;break;case void 0:case"?":case"#":return R+s.substring(fe,Y)+s.substr(Y+1);case".":if(void 0===(ne=s[1+ ++Y])||"/"===ne||"?"===ne||"#"===ne){if((fe=(R+=s.substring(fe,Y-2)).lastIndexOf("/"))>=X&&(R=R.substr(0,fe)),"/"!==ne)return R+"/"+s.substr(Y+1);fe=Y+1}}}ne=s[++Y]}return R+s.substring(fe)},parse:function(s,R,G){var Y=this;if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+D+++"_",this._prefixCallback=G||j,this._inversePredicate=!1,this._quantified=Object.create(null),!R){var fe,X=[];if(this._callback=function(ne,re){ne?fe=ne:re&&X.push(re)},this._lexer.tokenize(s).every(function(ne){return Y._readCallback=Y._readCallback(ne)}),fe)throw fe;return X}this._callback=R,this._lexer.tokenize(s,function(ne,re){null!==ne?(Y._callback(ne),Y._callback=j):Y._readCallback&&(Y._readCallback=Y._readCallback(re))})}},Ee.exports=ye},{"./N3Lexer":33}],35:[function(Ce,Ee,Be){function ye(T,_){if(!(this instanceof ye))return new ye(T,_);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,_||!T||T[0]||(_=T,T=null),_=_||{},this._prefixes=Object.create(null),_.prefixes&&this.addPrefixes(_.prefixes),T&&this.addTriples(T)}function j(T){return"string"==typeof T||T instanceof String}var N=Ce("./N3Util").expandPrefixedName;ye.prototype={get size(){if(null!==(T=this._size))return T;var I,D,O,T=0,_=this._graphs;for(O in _)for(var s in I=_[O].subjects)for(var R in D=I[s])T+=Object.keys(D[R]).length;return this._size=T},_addToIndex:function(T,_,I,D){return I=(T=T[_]||(T[_]={}))[I]||(T[I]={}),(T=D in I)||(I[D]=null),!T},_removeFromIndex:function(T,_,I,D){var R,O=T[_],s=O[I];for(R in delete s[D],s)return;for(R in delete O[I],O)return;delete T[_]},_findInIndex:function(T,_,I,D,O,s,R,G,Y,X){var fe,ne,re=1<!_+!I+!D?Object.keys(this._ids):this._entities;for(var oe in _&&((fe=T,T={})[_]=fe[_]),T){var he=re[oe];if(_=T[oe])for(var pe in I&&((fe=_,_={})[I]=fe[I]),_){var V=re[pe];if(ne=_[pe])for(var W=((ne=D?D in ne?[D]:[]:Object.keys(ne)).length-1);0<=W;W--){var ee={subject:"",predicate:"",object:"",graph:G};if(ee[O]=he,ee[s]=V,ee[R]=re[ne[W]],X)X.push(ee);else if(Y(ee))return!0}}}return X},_loop:function(T,_){for(var I in T)_(I)},_loopByKey0:function(T,_,I){var D;if(T=T[_])for(D in T)I(D)},_loopByKey1:function(T,_,I){var D;for(D in T)T[D][_]&&I(D)},_loopBy2Keys:function(T,_,I,D){var O,s,R;if((O=T[_])&&(s=O[I]))for(R in s)D(R)},_countInIndex:function(T,_,I,D){var s,R,O=0;for(var G in _&&((s=T,T={})[_]=s[_]),T)if(_=T[G])for(var Y in I&&((s=_,_={})[I]=s[I]),_)(R=_[Y])&&(D?D in R&&O++:O+=Object.keys(R).length);return O},_getGraphs:function(T){if(!j(T))return this._graphs;var _={};return _[T]=this._graphs[T],_},_uniqueEntities:function(T){var _=Object.create(null),I=this._entities;return function(D){D in _||(_[D]=!0,T(I[D]))}},addTriple:function(T,_,I,D){_||(D=T.graph,I=T.object,_=T.predicate,T=T.subject),D=D||"";var O=this._graphs[D];O||(O=this._graphs[D]={subjects:{},predicates:{},objects:{}},Object.freeze(O)),D=this._ids;var s=this._entities;return T=D[T]||(D[s[++this._id]=T]=this._id),_=D[_]||(D[s[++this._id]=_]=this._id),I=D[I]||(D[s[++this._id]=I]=this._id),D=this._addToIndex(O.subjects,T,_,I),this._addToIndex(O.predicates,_,I,T),this._addToIndex(O.objects,I,T,_),this._size=null,D},addTriples:function(T){for(var _=T.length-1;0<=_;_--)this.addTriple(T[_])},addPrefix:function(T,_){this._prefixes[T]=_},addPrefixes:function(T){for(var _ in T)this.addPrefix(_,T[_])},removeTriple:function(T,_,I,D){_||(D=T.graph,I=T.object,_=T.predicate,T=T.subject),D=D||"";var O,G,Y,s=this._ids,R=this._graphs;if(!((T=s[T])&&(_=s[_])&&(I=s[I])&&(O=R[D])&&(G=O.subjects[T])&&(Y=G[_])&&I in Y))return!1;for(T in this._removeFromIndex(O.subjects,T,_,I),this._removeFromIndex(O.predicates,_,I,T),this._removeFromIndex(O.objects,I,T,_),null!==this._size&&this._size--,O.subjects)return!0;return delete R[D],!0},removeTriples:function(T){for(var _=T.length-1;0<=_;_--)this.removeTriple(T[_])},getTriples:function(T,_,I,D){var O=this._prefixes;return this.getTriplesByIRI(N(T,O),N(_,O),N(I,O),N(D,O))},getTriplesByIRI:function(T,_,I,D){var O=[];D=this._getGraphs(D);var R,G,Y,s=this._ids;if(j(T)&&!(R=s[T])||j(_)&&!(G=s[_])||j(I)&&!(Y=s[I]))return O;for(var X in D)(T=D[X])&&(R?Y?this._findInIndex(T.objects,Y,R,G,"object","subject","predicate",X,null,O):this._findInIndex(T.subjects,R,G,null,"subject","predicate","object",X,null,O):G?this._findInIndex(T.predicates,G,Y,null,"predicate","object","subject",X,null,O):Y?this._findInIndex(T.objects,Y,null,null,"object","subject","predicate",X,null,O):this._findInIndex(T.subjects,null,null,null,"subject","predicate","object",X,null,O));return O},countTriples:function(T,_,I,D){var O=this._prefixes;return this.countTriplesByIRI(N(T,O),N(_,O),N(I,O),N(D,O))},countTriplesByIRI:function(T,_,I,D){var s,R,G,Y,O=0;if(D=this._getGraphs(D),s=this._ids,j(T)&&!(R=s[T])||j(_)&&!(G=s[_])||j(I)&&!(Y=s[I]))return 0;for(var X in D)(s=D[X])&&(O=T?I?O+this._countInIndex(s.objects,Y,R,G):O+this._countInIndex(s.subjects,R,G,Y):_?O+this._countInIndex(s.predicates,G,Y,R):O+this._countInIndex(s.objects,Y,R,G));return O},forEach:function(T,_,I,D,O){var s=this._prefixes;this.forEachByIRI(T,N(_,s),N(I,s),N(D,s),N(O,s))},forEachByIRI:function(T,_,I,D,O){this.someByIRI(function(s){return T(s),!1},_,I,D,O)},every:function(T,_,I,D,O){var s=this._prefixes;return this.everyByIRI(T,N(_,s),N(I,s),N(D,s),N(O,s))},everyByIRI:function(T,_,I,D,O){var s=!1;return _=!this.someByIRI(function(R){return s=!0,!T(R)},_,I,D,O),s&&_},some:function(T,_,I,D,O){var s=this._prefixes;return this.someByIRI(T,N(_,s),N(I,s),N(D,s),N(O,s))},someByIRI:function(T,_,I,D,O){O=this._getGraphs(O);var R,G,Y,s=this._ids;if(j(_)&&!(R=s[_])||j(I)&&!(G=s[I])||j(D)&&!(Y=s[D]))return!1;for(var X in O)if(_=O[X])if(R){if(Y){if(this._findInIndex(_.objects,Y,R,G,"object","subject","predicate",X,T,null))return!0}else if(this._findInIndex(_.subjects,R,G,null,"subject","predicate","object",X,T,null))return!0}else if(G){if(this._findInIndex(_.predicates,G,Y,null,"predicate","object","subject",X,T,null))return!0}else if(Y){if(this._findInIndex(_.objects,Y,null,null,"object","subject","predicate",X,T,null))return!0}else if(this._findInIndex(_.subjects,null,null,null,"subject","predicate","object",X,T,null))return!0;return!1},getSubjects:function(T,_,I){var D=this._prefixes;return this.getSubjectsByIRI(N(T,D),N(_,D),N(I,D))},getSubjectsByIRI:function(T,_,I){var D=[];return this.forSubjectsByIRI(function(O){D.push(O)},T,_,I),D},forSubjects:function(T,_,I,D){var O=this._prefixes;this.forSubjectsByIRI(T,N(_,O),N(I,O),N(D,O))},forSubjectsByIRI:function(T,_,I,D){var R,G,O=this._ids,s=this._getGraphs(D);if(T=this._uniqueEntities(T),!(j(_)&&!(R=O[_])||j(I)&&!(G=O[I])))for(D in s)(_=s[D])&&(R?G?this._loopBy2Keys(_.predicates,R,G,T):this._loopByKey1(_.subjects,R,T):G?this._loopByKey0(_.objects,G,T):this._loop(_.subjects,T))},getPredicates:function(T,_,I){var D=this._prefixes;return this.getPredicatesByIRI(N(T,D),N(_,D),N(I,D))},getPredicatesByIRI:function(T,_,I){var D=[];return this.forPredicatesByIRI(function(O){D.push(O)},T,_,I),D},forPredicates:function(T,_,I,D){var O=this._prefixes;this.forPredicatesByIRI(T,N(_,O),N(I,O),N(D,O))},forPredicatesByIRI:function(T,_,I,D){var R,G,O=this._ids,s=this._getGraphs(D);if(T=this._uniqueEntities(T),!(j(_)&&!(R=O[_])||j(I)&&!(G=O[I])))for(D in s)(_=s[D])&&(R?G?this._loopBy2Keys(_.objects,G,R,T):this._loopByKey0(_.subjects,R,T):G?this._loopByKey1(_.predicates,G,T):this._loop(_.predicates,T))},getObjects:function(T,_,I){var D=this._prefixes;return this.getObjectsByIRI(N(T,D),N(_,D),N(I,D))},getObjectsByIRI:function(T,_,I){var D=[];return this.forObjectsByIRI(function(O){D.push(O)},T,_,I),D},forObjects:function(T,_,I,D){var O=this._prefixes;this.forObjectsByIRI(T,N(_,O),N(I,O),N(D,O))},forObjectsByIRI:function(T,_,I,D){var R,G,O=this._ids,s=this._getGraphs(D);if(T=this._uniqueEntities(T),!(j(_)&&!(R=O[_])||j(I)&&!(G=O[I])))for(D in s)(_=s[D])&&(R?G?this._loopBy2Keys(_.subjects,R,G,T):this._loopByKey1(_.objects,R,T):G?this._loopByKey0(_.predicates,G,T):this._loop(_.objects,T))},getGraphs:function(T,_,I){var D=this._prefixes;return this.getGraphsByIRI(N(T,D),N(_,D),N(I,D))},getGraphsByIRI:function(T,_,I){var D=[];return this.forGraphsByIRI(function(O){D.push(O)},T,_,I),D},forGraphs:function(T,_,I,D){var O=this._prefixes;this.forGraphsByIRI(T,N(_,O),N(I,O),N(D,O))},forGraphsByIRI:function(T,_,I,D){for(var O in this._graphs)this.someByIRI(function(s){return T(s.graph),!0},_,I,D,O)},createBlankNode:function(T){var _,I;if(T)for(_=T="_:"+T,I=1;this._ids[_];)_=T+I++;else do{_="_:b"+this._blankNodeIndex++}while(this._ids[_]);return this._ids[_]=++this._id,this._entities[this._id]=_}},Ee.exports=ye},{"./N3Util":38}],36:[function(Ce,Ee,Be){function ye(T){if(!(this instanceof ye))return new ye(T);j.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var I,D,_=this;new N(T).parse({on:function(O,s){switch(O){case"data":I=s;break;case"end":D=s}}},function(O,s){O&&_.emit("error",O)||s&&_.push(s)},function(O,s){_.emit("prefix",O,s)}),this._transform=function(O,s,R){I(O),R()},this._flush=function(O){D(),O()}}var j=Ce("stream").Transform;Be=Ce("util");var N=Ce("./N3Parser.js");Be.inherits(ye,j),Ee.exports=ye},{"./N3Parser.js":34,stream:15,util:25}],37:[function(Ce,Ee,Be){function ye(T){if(!(this instanceof ye))return new ye(T);j.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var _=this,I=new N({write:function(D,O,s){_.push(D),s&&s()},end:function(D){_.push(null),D&&D()}},T);this._transform=function(D,O,s){I.addTriple(D,s)},this._flush=function(D){I.end(D)}}var j=Ce("stream").Transform;Be=Ce("util");var N=Ce("./N3Writer.js");Be.inherits(ye,j),Ee.exports=ye},{"./N3Writer.js":39,stream:15,util:25}],38:[function(Ce,Ee,Be){var ye={isIRI:function(j){return"string"==typeof j&&(0===j.length||'"'!==(j=j[0])&&"_"!==j)},isLiteral:function(j){return"string"==typeof j&&'"'===j[0]},isBlank:function(j){return"string"==typeof j&&"_:"===j.substr(0,2)},isDefaultGraph:function(j){return!j},inDefaultGraph:function(j){return!j.graph},getLiteralValue:function(j){var N=/^"([^]*)"/.exec(j);if(!N)throw Error(j+" is not a literal");return N[1]},getLiteralType:function(j){var N=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(j);if(!N)throw Error(j+" is not a literal");return N[1]||(N[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(j){var N=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(j);if(!N)throw Error(j+" is not a literal");return N[1]?N[1].toLowerCase():""},isPrefixedName:function(j){return"string"==typeof j&&/^[^:\/"']*:[^:\/"']+$/.test(j)},expandPrefixedName:function(j,N){var _,I,D,T=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(j);return T&&(I=N[_=T[1]],D=T.index),void 0===I?j:0===D?I+j.substr(_.length+1):j.substr(0,D+3)+I+j.substr(D+_.length+4)},createIRI:function(j){return j&&'"'===j[0]?ye.getLiteralValue(j):j},createLiteral:function(j,N){if(!N)switch(typeof j){case"boolean":N="http://www.w3.org/2001/XMLSchema#boolean";break;case"number":isFinite(j)?N=j%1==0?"http://www.w3.org/2001/XMLSchema#integer":"http://www.w3.org/2001/XMLSchema#double":(N="http://www.w3.org/2001/XMLSchema#double",isNaN(j)||(j=0<j?"INF":"-INF"));break;default:return'"'+j+'"'}return'"'+j+(/^[a-z]+(-[a-z0-9]+)*$/i.test(N)?'"@'+N.toLowerCase():'"^^'+N)},prefix:function(j){return ye.prefixes({"":j})("")},prefixes:function(j){function N(I,D){if(D||!(I in T)){var O=Object.create(null);D=D||"",T[I]=function(s){return O[s]||(O[s]=D+s)}}return T[I]}var _,T=Object.create(null);for(_ in j)N(_,j[_]);return N}};Ee.exports=ye},{}],39:[function(Ce,Ee,Be){function ye(D,O){if(!(this instanceof ye))return new ye(D,O);if(D&&"function"!=typeof D.write&&(O=D,D=null),O=O||{},D)this._outputStream=D,this._endStream=void 0===O.end||!!O.end;else{var s="";this._outputStream={write:function(R,G,Y){s+=R,Y&&Y()},end:function(R){R&&R(null,s)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(O.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),O.prefixes&&this.addPrefixes(O.prefixes))}function j(D){var O=I[D];return void 0===O&&(1===D.length?(O=D.charCodeAt(0).toString(16),O="\\u0000".substr(0,6-O.length)+O):(O=(1024*(D.charCodeAt(0)-55296)+D.charCodeAt(1)+9216).toString(16),O="\\U00000000".substr(0,10-O.length)+O)),O}var N=/^"([^]*)"(?:\^\^(.+)|@([a-z]+(?:-[a-z0-9]+)*))?$/i,T=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,_=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,I={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};ye.prototype={_write:function(D,O){this._outputStream.write(D,"utf8",O)},_writeTriple:function(D,O,s,R,G){try{this._graph!==R&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(R?this._encodeIriOrBlankNode(R)+" {\n":"")),this._subject=null,this._graph="["!==R[0]?R:"]"),this._subject===D?this._predicate===O?this._write(", "+this._encodeObject(s),G):this._write(";\n    "+this._encodePredicate(this._predicate=O)+" "+this._encodeObject(s),G):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=D)+" "+this._encodePredicate(this._predicate=O)+" "+this._encodeObject(s),G)}catch(Y){G&&G(Y)}},_writeTripleLine:function(D,O,s,R,G){delete this._prefixMatch;try{this._write(this.tripleToString(D,O,s,R),G)}catch(Y){G&&G(Y)}},tripleToString:function(D,O,s,R){return this._encodeIriOrBlankNode(D)+" "+this._encodeIriOrBlankNode(O)+" "+this._encodeObject(s)+(R?" "+this._encodeIriOrBlankNode(R)+".\n":".\n")},triplesToString:function(D){return D.map(function(O){return this.tripleToString(O.subject,O.predicate,O.object,O.graph)},this).join("")},_encodeIriOrBlankNode:function(D){var O=D[0];return"["===O||"("===O||"_"===O&&":"===D[1]?D:(T.test(D)&&(D=D.replace(_,j)),(O=this._prefixRegex.exec(D))?O[1]?this._prefixIRIs[O[1]]+O[2]:D:"<"+D+">")},_encodeLiteral:function(D,O,s){return T.test(D)&&(D=D.replace(_,j)),s?'"'+D+'"@'+s:O?'"'+D+'"^^'+this._encodeIriOrBlankNode(O):'"'+D+'"'},_encodeSubject:function(D){if('"'===D[0])throw Error("A literal as subject is not allowed: "+D);return"["===D[0]&&(this._subject="]"),this._encodeIriOrBlankNode(D)},_encodePredicate:function(D){if('"'===D[0])throw Error("A literal as predicate is not allowed: "+D);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===D?"a":this._encodeIriOrBlankNode(D)},_encodeObject:function(D){if('"'!==D[0])return this._encodeIriOrBlankNode(D);var O=N.exec(D);if(!O)throw Error("Invalid literal: "+D);return this._encodeLiteral(O[1],O[2],O[3])},_blockedWrite:function(){throw Error("Cannot write because the writer has been closed.")},addTriple:function(D,O,s,R,G){void 0===s?this._writeTriple(D.subject,D.predicate,D.object,D.graph||"",O):"string"!=typeof R?this._writeTriple(D,O,s,"",R):this._writeTriple(D,O,s,R,G)},addTriples:function(D){for(var O=0;O<D.length;O++)this.addTriple(D[O])},addPrefix:function(D,O,s){var R={};R[D]=O,this.addPrefixes(R,s)},addPrefixes:function(D,O){var G,s=this._prefixIRIs,R=!1;for(G in D){var Y=D[G];/[#\/]$/.test(Y)&&s[Y]!==(G+=":")&&(R=!0,s[Y]=G,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+G+" <"+Y+">.\n"))}if(R){var X;Y=G="";for(X in s)G+=G?"|"+X:X,Y+=(Y?"|":"")+s[X];G=G.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+Y+")[^/]*$|^("+G+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(R?"\n":"",O)},blank:function(D,O){var R,G,s=D;switch(void 0===D?s=[]:"string"==typeof D?s=[{predicate:D,object:O}]:"length"in D||(s=[D]),G=s.length){case 0:return"[]";case 1:if("["!==(R=s[0]).object[0])return"[ "+this._encodePredicate(R.predicate)+" "+this._encodeObject(R.object)+" ]";default:for(var Y="[",X=0;X<G;X++)(R=s[X]).predicate===D?Y+=", "+this._encodeObject(R.object):(Y+=(X?";\n  ":"\n  ")+this._encodePredicate(R.predicate)+" "+this._encodeObject(R.object),D=R.predicate);return Y+"\n]"}},list:function(D){for(var O=D&&D.length||0,s=Array(O),R=0;R<O;R++)s[R]=this._encodeObject(D[R]);return"("+s.join(" ")+")"},_prefixRegex:/$0^/,end:function(D){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var O=D&&function(s,R){O=null,D(s,R)};if(this._endStream)try{return this._outputStream.end(O)}catch(s){}O&&O()}},Ee.exports=ye},{}],40:[function(Ce,Ee,Be){function ye(_,I){this.name="NonSupportedSparqlFeatureError",this.feature=_,this.message=I||"SPARQL feature "+_+" non supported"}function j(_){this.name=ParserError,this.message=_||"Error parsing SPARQL query"}var N=Ce("./parser"),T=Ce("./utils");ye.prototype=Error(),ye.constructor=ye,j.prototype=Error(),j.constructor=j,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(_){return N.parse(_)},AbstractQueryTree.prototype.parseExecutableUnit=function(_){if("select"===_.kind||"ask"===_.kind||"modify"===_.kind||"construct"===_.kind)return this.parseSelect(_);if("insertdata"===_.kind||"deletedata"===_.kind)return this.parseInsertData(_);if("load"===_.kind||"clear"===_.kind||"drop"===_.kind||"create"===_.kind)return _;throw Error("unknown executable unit: "+_.kind)},AbstractQueryTree.prototype.parseSelect=function(_){return null==_?(console.log("error parsing query"),null):(_.pattern=this.build(_.pattern,{freshCounter:0}),_)},AbstractQueryTree.prototype.parseInsertData=function(_){return null==_?(console.log("error parsing query"),null):_},AbstractQueryTree.prototype.build=function(_,I){if("groupgraphpattern"===_.token)return this._buildGroupGraphPattern(_,I);if("basicgraphpattern"===_.token){var D={kind:"BGP",value:_.triplesContext};return AbstractQueryTree.translatePathExpressionsInBGP(D,I)}if("graphunionpattern"===_.token)return{kind:"UNION",value:[D=this.build(_.value[0],I),this.build(_.value[1],I)]};if("graphgraphpattern"===_.token)return{kind:"GRAPH",value:this.build(_.value,I),graph:_.graph};throw null!=_.token?new ye(_.token,"Non implemented SPARQL graph pattern: '"+_.token+"'"):new j("Error parsing graph pattern: '"+JSON.stringify(_)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(_,I){var D,s,R,O=[];for(R=0;R<_.value.length;R++)if(_.value[R].predicate&&"path"===_.value[R].predicate.token){D=_.value[R],s=_.value.slice(R+1);var G=AbstractQueryTree.translatePathExpression(D,I);if(D=null,"BGP"!==G.kind){if("ZERO_OR_MORE_PATH"===G.kind||"ONE_OR_MORE_PATH"===G.kind){if(R=0<O.length?{kind:"JOIN",lvalue:{kind:"BGP",value:O},rvalue:G}:G,"ZERO_OR_MORE_PATH"===G.kind)if("var"===G.y.token&&0===G.y.value.indexOf("fresh:")&&"var"===G.x.token&&0===G.x.value.indexOf("fresh:"))for(var Y=0;Y<_.value.length;Y++)_.value[Y].object&&"var"===_.value[Y].object.token&&_.value[Y].object.value===G.x.value&&((D=T.clone(_.value[Y],!0)).object=G.y);else if("var"===G.y.token&&0===G.y.value.indexOf("fresh:"))for(Y=0;Y<_.value.length;Y++)_.value[Y].subject&&"var"===_.value[Y].subject.token&&_.value[Y].subject.value===G.y.value&&((D=T.clone(_.value[Y],!0)).subject=G.x);return 0<s.length?(G=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:s},I),null!=D?{kind:"UNION",value:[{kind:"JOIN",lvalue:R,rvalue:G},{kind:"BGP",value:O=O.concat([D]).concat(s)}]}:{kind:"JOIN",lvalue:R,rvalue:G}):R}return G}O=O.concat(G.value)}else O.push(_.value[R]);return _.value=O,_},AbstractQueryTree.translatePathExpression=function(_,I){if("element"===_.predicate.kind)return"+"===_.predicate.modifier?(_.predicate.modifier=null,{kind:"ONE_OR_MORE_PATH",path:D=AbstractQueryTree.translatePathExpression(_,I),x:_.subject,y:_.object}):"*"===_.predicate.modifier?(_.predicate.modifier=null,{kind:"ZERO_OR_MORE_PATH",path:D=AbstractQueryTree.translatePathExpression(_,I),x:_.subject,y:_.object}):(_.predicate=_.predicate.value,{kind:"BGP",value:[_]});if("sequence"===_.predicate.kind){for(var R,G,D=_.subject,O=_.object,s=_.graph,Y=[],X=0;X<_.predicate.value.length;X++)X!=_.predicate.value.length-1?(R={token:"var",value:"fresh:"+I.freshCounter},I.freshCounter++):R=O,G={subject:D,predicate:_.predicate.value[X],object:R},null!=s&&(G.graph=T.clone(s,!0)),Y.push(G),X!=_.predicate.value.length-1&&(D=T.clone(R,!0));return AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:Y},I)}throw new ye("Non supported path expression "+_.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(_,I){for(var D=_.filters||[],O=_.binds||[],s={kind:"EMPTY_PATTERN"},R=0;R<_.patterns.length;R++){var G=_.patterns[R];"optionalgraphpattern"===G.token?s="FILTER"===(G=this.build(G.value,I)).kind?{kind:"LEFT_JOIN",lvalue:s,rvalue:G.value,filter:G.filter}:{kind:"LEFT_JOIN",lvalue:s,rvalue:G,filter:!0}:(G=this.build(G,I),s="EMPTY_PATTERN"==s.kind?G:{kind:"JOIN",lvalue:s,rvalue:G})}if(s.binds=O,0!=D.length){if("EMPTY_PATTERN"===s.kind||"LEFT_JOIN"===s.kind&&!0===s.filter||"LEFT_JOIN"===s.kind||"JOIN"===s.kind||"UNION"===s.kind||"GRAPH"===s.kind||"BGP"===s.kind)return{kind:"FILTER",filter:D,value:s};throw Error("Unknow kind of algebra expression: "+s.kind)}return s},AbstractQueryTree.prototype.collectBasicTriples=function(_,I){if(null==I&&(I=[]),"select"===_.kind)I=this.collectBasicTriples(_.pattern,I);else if("BGP"===_.kind)I=I.concat(_.value);else if("ZERO_OR_MORE_PATH"===_.kind)I=this.collectBasicTriples(_.path);else if("UNION"===_.kind)I=this.collectBasicTriples(_.value[0],I),I=this.collectBasicTriples(_.value[1],I);else if("GRAPH"===_.kind)I=this.collectBasicTriples(_.value,I);else if("LEFT_JOIN"===_.kind||"JOIN"===_.kind)I=this.collectBasicTriples(_.lvalue,I),I=this.collectBasicTriples(_.rvalue,I);else if("FILTER"===_.kind)I=this.collectBasicTriples(_.value,I);else if("construct"===_.kind)I=this.collectBasicTriples(_.pattern,I);else if("EMPTY_PATTERN"!==_.kind)throw"Unknown pattern: "+_.kind;return I},AbstractQueryTree.prototype.bind=function(_,I){if(null!=_.graph&&_.graph.token&&"var"===_.graph.token&&null!=I[_.graph.value]&&(_.graph=I[_.graph.value]),null!=_.filter){for(var D=[],O=0;O<_.filter.length;O++)_.filter[O].value=this._bindFilter(_.filter[O].value,I),D.push(_.filter[O]);_.filter=D}if("select"===_.kind)_.pattern=this.bind(_.pattern,I);else if("BGP"===_.kind)_.value=this._bindTripleContext(_.value,I);else if("ZERO_OR_MORE_PATH"===_.kind)_.path=this._bindTripleContext(_.path,I),_.x&&"var"===_.x.token&&null!=I[_.x.value]&&(_.x=I[_.x.value]),_.y&&"var"===_.y.token&&null!=I[_.y.value]&&(_.y=I[_.y.value]);else if("UNION"===_.kind)_.value[0]=this.bind(_.value[0],I),_.value[1]=this.bind(_.value[1],I);else if("GRAPH"===_.kind)_.value=this.bind(_.value,I);else if("LEFT_JOIN"===_.kind||"JOIN"===_.kind)_.lvalue=this.bind(_.lvalue,I),_.rvalue=this.bind(_.rvalue,I);else if("FILTER"===_.kind){var s=this;_.value=this.bind(_.value,I),_.filter=_.filter.map(function(R){return{token:"filter",value:s._bindFilter(R.value,I)}})}else if("EMPTY_PATTERN"!==_.kind)throw"Unknown pattern: "+_.kind;return _},AbstractQueryTree.prototype._bindTripleContext=function(_,I){for(var D=0;D<_.length;D++)for(var O in delete _[D].graph,delete _[D].variables,_[D]){var s=_[D][O];"var"===s.token&&null!=I[s.value]&&(_[D][O]=I[s.value])}return _},AbstractQueryTree.prototype._bindFilter=function(_,I){if(null!=_.expressionType){var D=_.expressionType;if("relationalexpression"==D)_.op1=this._bindFilter(_.op1,I),_.op2=this._bindFilter(_.op2,I);else if("conditionalor"==D||"conditionaland"==D)for(D=0;D<_.operands.length;D++)_.operands[D]=this._bindFilter(_.operands[D],I);else if("additiveexpression"==D)for(_.summand=this._bindFilter(_.summand,I),D=0;D<_.summands.length;D++)_.summands[D].expression=this._bindFilter(_.summands[D].expression,I);else if("builtincall"==D)for(D=0;D<_.args.length;D++)_.args[D]=this._bindFilter(_.args[D],I);else if("multiplicativeexpression"==D)for(_.factor=this._bindFilter(_.factor,I),D=0;D<_.factors.length;D++)_.factors[D].expression=this._bindFilter(_.factors[D].expression,I);else if("unaryexpression"==D)_.expression=this._bindFilter(_.expression,I);else if("irireforfunction"==D)for(D=0;D<_.factors.args;D++)_.args[D]=this._bindFilter(_.args[D],I);else"atomic"==D&&"var"==_.primaryexpression&&null!=I[_.value.value]&&(D=I[_.value.value],_.primaryexpression="uri"===D.token?"iri":"literal",_.value=D)}return _},AbstractQueryTree.prototype.replace=function(_,I,D,O){if(null!=_.graph&&_.graph.token&&_.graph.token===I.token&&_.graph.value==I.value&&(_.graph=T.clone(D,!0)),null!=_.filter){for(var s=[],R=0;R<_.filter.length;R++)_.filter[R].value=this._replaceFilter(_.filter[R].value,I,D,O),s.push(_.filter[R]);_.filter=s}if("select"===_.kind)_.pattern=this.replace(_.pattern,I,D,O);else if("BGP"===_.kind)_.value=this._replaceTripleContext(_.value,I,D,O);else if("ZERO_OR_MORE_PATH"===_.kind)_.path=this._replaceTripleContext(_.path,I,D,O),_.x&&_.x.token===I.token&&_.value===I.value&&(_.x=T.clone(D,!0)),_.y&&_.y.token===I.token&&_.value===I.value&&(_.y=T.clone(D,!0));else if("UNION"===_.kind)_.value[0]=this.replace(_.value[0],I,D,O),_.value[1]=this.replace(_.value[1],I,D,O);else if("GRAPH"===_.kind)_.value=this.replace(_.value,I,D);else if("LEFT_JOIN"===_.kind||"JOIN"===_.kind)_.lvalue=this.replace(_.lvalue,I,D,O),_.rvalue=this.replace(_.rvalue,I,D,O);else if("FILTER"===_.kind)_.value=this._replaceFilter(_.value,I,D,O);else if("EMPTY_PATTERN"!==_.kind)throw"Unknown pattern: "+_.kind;return _},AbstractQueryTree.prototype._replaceTripleContext=function(_,I,D,O){for(var s=0;s<_.length;s++)for(var R in _[s]){var G=_[s][R];"var"===G.token&&"var"===I.token&&G.value===I.value||"blank"===G.token&&"blank"===I.token&&G.value===I.value?_[s][R]=D:"literal"!==G.token&&"uri"!==G.token||"literal"!==I.token&&"uri"!==I.token||G.token!==I.token||T.lexicalFormTerm(G,O)[G.token]!==T.lexicalFormTerm(I,O)[G.token]||(_[s][R]=D)}return _},AbstractQueryTree.prototype._replaceFilter=function(_,I,D,O){if(null!=_.expressionType){var s=_.expressionType;if("relationalexpression"==s)_.op1=this._replaceFilter(_.op1,I,D,O),_.op2=this._replaceFilter(_.op2,I,D,O);else if("conditionalor"==s||"conditionaland"==s)for(s=0;s<_.operands.length;s++)_.operands[s]=this._replaceFilter(_.operands[s],I,D,O);else if("additiveexpression"==s)for(_.summand=this._replaceFilter(_.summand,I,D,O),s=0;s<_.summands.length;s++)_.summands[s].expression=this._replaceFilter(_.summands[s].expression,I,D,O);else if("builtincall"==s)for(s=0;s<_.args.length;s++)_.args[s]=this._replaceFilter(_.args[s],I,D,O);else if("multiplicativeexpression"==s)for(_.factor=this._replaceFilter(_.factor,I,D,O),s=0;s<_.factors.length;s++)_.factors[s].expression=this._replaceFilter(_.factors[s].expression,I,D,O);else if("unaryexpression"==s)_.expression=this._replaceFilter(_.expression,I,D,O);else if("irireforfunction"==s)for(s=0;s<_.factors.args;s++)_.args[s]=this._replaceFilter(_.args[s],I,D,O);else"atomic"==s&&(O=null,(_.primaryexpression==I.token&&_.value==I.value||"iri"==_.primaryexpression&&"uri"==I.token&&_.value==I.value)&&(O=D.value),null!=O&&(_.primaryexpression="uri"===D.token?"iri":D.token,_.value=O))}return _},AbstractQueryTree.prototype.treeWithUnion=function(_){if(null==_||null==_.kind)return!1;if("select"===_.kind)return this.treeWithUnion(_.pattern);if("BGP"===_.kind)return this.treeWithUnion(_.value);if("ZERO_OR_MORE_PATH"===_.kind)return!1;if("UNION"===_.kind){if(null==_.value[0].value||null==_.value[0].value.variables||null==_.value[1].value||null==_.value[1].value.variables)return!0;if(_.value[0].variables.join("/")===_.values[1].variables.join("/"))return!!this.treeWithUnion(_.value[0])||this.treeWithUnion(_.value[1])}else{if("GRAPH"===_.kind||"LEFT_JOIN"!==_.kind&&"JOIN"!==_.kind)return!1;if(this.treeWithUnion(_.lvalue))return!0;this.treeWithUnion(_.rvalue)}},Ee.exports={AbstractQueryTree,NonSupportedSparqlFeatureError:ye,SparqlParserError:j}},{"./parser":47,"./utils":58}],41:[function(Ce,Ee,Be){var ye=Ce("./utils"),j=ye.nextTick,N=function(_,I){if(0!=arguments.length){this.order=_,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var D=this;this._diskWrite(this.root,function(O){D.root=O,D._updateRootNode(D.root,function(s){D.comparator=function(R,G){return R<G?-1:R>G?1:0},D.merger=null,null!=I&&I(D)})})}};N.prototype._allocateNode=function(){return new T},N.prototype._diskWrite=function(_,I){j(function(){I(_)})},N.prototype._diskRead=function(_,I){j(function(){I(_)})},N.prototype._diskDelete=function(_,I){j(function(){I()})},N.prototype._updateRootNode=function(_,I){I(_)},N.prototype.search=function(_,I,D){this.__search(this,_,this.root,I,D)},N.prototype.__search=function(_,I,D,O,s){for(var R=0;R<D.numberActives&&1===_.comparator(I,D.keys[R].key);)R++;R<D.numberActives&&0===_.comparator(D.keys[R].key,I)?O(null!=s&&1==s||D.keys[R].data):!0===D.isLeaf?O(null):_._diskRead(D.children[R],function(G){_.__search(_,I,G,O,s)})},N.prototype.walk=function(_,I){this.__walk(this,this.root,_,I)},N.prototype.__walk=function(_,I,D,O){var s=I.numberActives,R=0;if(I.isLeaf){for(R=0;R<I.numberActives;R++)D(I.keys[R]);return O()}ye.whilst(function(){return R<s},function(G){_._diskRead(I.children[R],function(Y){_.__walk(_,Y,D,function(){_._diskRead(I.keys[R],function(X){D(X),R++,G()})})})},function(){_._diskRead(I.children[s],function(G){_.__walk(_,G,D,function(){O()})})})},N.prototype.walkNodes=function(_){this.__walkNodes(this,root,_,function(){})},N.prototype.__walkNodes=function(_,I,D,O){if(I.isLeaf)return D(I),O();D(I);var s=I.numberActives,R=0;ye.whilst(function(){return R<s},function(G){_._diskRead(I.children[R],function(Y){_.__walkNodes(_,Y,D,function(){R++,G()})})},function(){_._diskRead(I.children[s],function(G){_.__walkNodes(_,G,D,function(){})})})},N.prototype._splitChild=function(_,I,D,O){var s=this._allocateNode();s.isLeaf=D.isLeaf,s.level=D.level,s.numberActives=this.order-1;var R=D.keys[this.order-1];D.keys[this.order-1]=null;for(var G=0;G<this.order-1;G++)s.keys[G]=D.keys[G+this.order],D.keys[G+this.order]=null,D.isLeaf||(s.children[G]=D.children[G+this.order],D.children[G+this.order]=null);for(D.isLeaf||(s.children[G]=D.children[G+this.order],D.children[G+this.order]=null),D.numberActives=this.order-1,G=_.numberActives+1;G>I+1;G--)_.children[G]=_.children[G-1];for(_.children[I+1]=s,G=_.numberActives;G>I;G--)_.keys[G]=_.keys[G-1];_.keys[I]=R,_.numberActives++;var Y=this;this._diskWrite(s,function(X){Y._diskWrite(_,function(fe){fe.children[I+1]=X,Y._diskWrite(D,function(ne){return O(fe)})})})},N.prototype.insert=function(_,I,D){if(this.root.numberActives===2*this.order-1){var O=this._allocateNode();O.isLeaf=!1,O.level=this.root.level+1,O.numberActives=0,O.children[0]=this.root;var s=this;this._splitChild(O,0,this.root,function(R){O=R,s.root=O,s._updateRootNode(O,function(G){s._insertNonFull(G,_,I,D)})})}else this._insertNonFull(this.root,_,I,D)},N.prototype._insertNonFull=function(_,I,D,O){this.__insertNonFull(this,_,_.numberActives-1,I,D,O)},N.prototype.__insertNonFull=function(_,I,D,O,s,R){if(I.isLeaf){for(;0<=D&&-1===_.comparator(O,I.keys[D].key);)I.keys[D+1]=I.keys[D],D--;0<=D&&0===_.comparator(O,I.keys[D].key)?I.keys[D]={key:O,data:s}:(I.keys[D+1]={key:O,data:s},I.numberActives++),_._diskWrite(I,function(G){return R(G)})}else{for(;0<=D&&-1===_.comparator(O,I.keys[D].key);)D--;D++,_._diskRead(I.children[D],function(G){G.numberActives===2*_.order-1?_._splitChild(I,D,G,function(){1===_.comparator(O,I.keys[D].key)&&D++,_._diskRead(I.children[D],function(Y){D=Y.numberActives-1,_.__insertNonFull(_,Y,D,O,s,R)})}):_._diskRead(I.children[D],function(Y){D=Y.numberActives-1,_.__insertNonFull(_,Y,D,O,s,R)})})}},N.prototype.delete=function(_,I){N.prototype.__deleteSearchNode(this,_,this.root,I)},N.prototype.__deleteSearchNode=function(_,I,D,O){var s=0;if(0===D.numberActives)return O(!1);for(;s<D.numberActives&&1===_.comparator(I,D.keys[s].key);)s++;var R=s;return s<D.numberActives&&0===_.comparator(I,D.keys[s].key)?_.__deleteNodeFound(_,R,I,D,O):!0===D.isLeaf?O(!1):void _._diskRead(D.children[s],function(G){if(null===G)return O(!1);var Y=!1,X=!1,fe=null,ne=null;R===D.numberActives?(X=!0,ne=D.children[R-1],fe=D.children[R-1]):0===R?(Y=!0,fe=D.children[1],ne=D.children[1]):(ne=D.children[R-1],fe=D.children[R+1]),_._diskRead(ne,function(re){_._diskRead(fe,function(oe){!0===X&&(oe=null),!0===Y&&(re=null),G.numberActives===_.order-1&&null!=D?null!=oe&&oe.numberActives>_.order-1?_._moveKey(D,s,-1,function(he){_.__deleteSearchNode(_,I,G,O)}):null!=re&&re.numberActives>_.order-1?_._moveKey(D,s,1,function(he){_.__deleteSearchNode(_,I,G,O)}):null!=re&&re.numberActives===_.order-1?_._mergeSiblings(D,s,-1,function(he){_.__deleteSearchNode(_,I,he,O)}):null!=oe&&oe.numberActives===_.order-1&&_._mergeSiblings(D,s,1,function(he){_.__deleteSearchNode(_,I,he,O)}):_.__deleteSearchNode(_,I,G,O)})})})},N.prototype.__deleteNodeFound=function(_,I,D,O,s){if(O.isLeaf&&O.numberActives>_.order-1||O.isLeaf&&O===_.root)return _._deleteKeyFromNode(O,I,function(){s(!0)}),!0;!1===O.isLeaf&&_._diskRead(O.children[I],function(R){R.numberActives>_.order-1?_._getMaxKeyPos(_,R,function(G){D=G.node.keys[G.index],O.keys[I]=D,_._diskWrite(O,function(Y){Y=R,D=D.key,_.__deleteSearchNode(_,D,Y,s)})}):_._diskRead(O.children[I+1],function(G){G.numberActives>_.order-1?_._getMinKeyPos(_,G,function(Y){D=Y.node.keys[Y.index],O.keys[I]=D,_._diskWrite(O,function(X){X=G,D=D.key,_.__deleteSearchNode(_,D,X,s)})}):R.numberActives===_.order-1&&G.numberActives===_.order-1&&_._mergeNodes(R,O.keys[I],G,function(Y){O.children[I]=Y;for(var X=++I;X<O.numberActives;X++)O.children[X]=O.children[X+1],O.keys[X-1]=O.keys[X];O.children[X]=null,O.keys[X-1]=null,O.numberActives--,0===O.numberActives&&_.root===O&&(_.root=Y),_._diskWrite(O,function(fe){_.__deleteSearchNode(_,D,Y,s)})})})}),O.isLeaf&&O.numberActives>_.order-1&&_._deleteKeyFromNode(O,I,function(R){_.__deleteSearchNode(_,D,R,s)})},N.prototype._moveKey=function(_,I,D,O){1===D&&I--;var s=this;s._diskRead(_.children[I],function(R){s._diskRead(_.children[I+1],function(G){if(-1==D){R.keys[R.numberActives]=_.keys[I],R.children[R.numberActives+1]=G.children[0],G.children[0]=null,R.numberActives++,_.keys[I]=G.keys[0];for(var Y=1;Y<G.numberActives;Y++)G.keys[Y-1]=G.keys[Y],G.children[Y-1]=G.children[Y];G.children[G.numberActives-1]=G.children[G.numberActives],G.numberActives--}else{for(G.children[G.numberActives+1]=G.children[G.numberActives],Y=G.numberActives;0<Y;Y--)G.children[Y]=G.children[Y-1],G.keys[Y]=G.keys[Y-1];G.keys[0]=null,G.children[0]=null,G.children[0]=R.children[R.numberActives],G.keys[0]=_.keys[I],G.numberActives++,R.children[R.numberActives]=null,_.keys[I]=R.keys[R.numberActives-1],R.keys[R.numberActives-1]=null,R.numberActives--}s._diskWrite(R,function(X){s._diskWrite(G,function(fe){s._diskWrite(_,function(ne){return O(ne)})})})})})},N.prototype._mergeSiblings=function(_,I,D,O){var s,R,G;I===_.numberActives?(I--,D=_.children[_.numberActives-1],G=_.children[_.numberActives]):(D=_.children[I],G=_.children[I+1]);var Y=this;Y._diskRead(D,function(X){Y._diskRead(G,function(fe){var ne=Y._allocateNode();for(ne.isLeaf=X.isLeaf,ne.level=X.level,R=0;R<Y.order-1;R++)ne.keys[R]=X.keys[R],ne.children[R]=X.children[R];for(ne.keys[Y.order-1]=_.keys[I],ne.children[Y.order-1]=X.children[Y.order-1],R=0;R<Y.order-1;R++)ne.keys[R+Y.order]=fe.keys[R],ne.children[R+Y.order]=fe.children[R];for(ne.children[2*Y.order-1]=fe.children[Y.order-1],_.children[I]=ne,R=I;R<_.numberActives;R++)_.keys[R]=_.keys[R+1],_.children[R+1]=_.children[R+2];for(ne.numberActives=X.numberActives+fe.numberActives+1,_.numberActives--,s=_.numberActives;s<2*Y.order-1;s++)_.keys[s]=null;0===_.numberActives&&Y.root===_&&(Y.root=ne,ne.isLeaf=!ne.level),Y._diskWrite(ne,function(re){Y._diskWrite(_,function(oe){Y._diskDelete(X,function(){Y._diskDelete(fe,function(){if(Y.root!==re)return O(re);Y._updateRootNode(Y.root,function(){return O(re)})})})})})})})},N.prototype._deleteKeyFromNode=function(_,I,D){var O=2*this.order-1;if(_.numberActives<O&&(O=_.numberActives),!1===_.isLeaf)return!1;for(;I<O-1;I++)_.keys[I]=_.keys[I+1];_.keys.pop(),_.numberActives--,this._diskWrite(_,function(s){return D(s)})},N.prototype._mergeNodes=function(_,I,D,O){var s,R;for((s=this._allocateNode()).isLeaf=!0,R=0;R<_.numberActives;R++)s.keys[R]=_.keys[R],s.children[R]=_.children[R];for(s.children[_.numberActives]=_.children[_.numberActives],s.keys[_.numberActives]=I,R=0;R<D.numberActives;R++)s.keys[R+_.numberActives+1]=D.keys[R],s.children[R+_.numberActives+1]=D.children[R];s.children[2*this.order-1]=D.children[D.numberActives],s.numberActives=_.numberActives+D.numberActives+1,s.isLeaf=_.isLeaf,s.level=_.level;var G=this;this._diskWrite(s,function(Y){G._diskDelete(_,function(){G._diskDelete(D,function(){return O(Y)})})})},N.prototype.audit=function(_){var I=[],D=[],R=this,O=function(G){for(var Y=0;Y<D.length;Y++)if(0===R.comparator(D[Y],G)){var X=" !!! duplicated key "+G;!0===_&&console.log(X),I.push(X)}},s=null;R=this;return this.walkNodes(function(G){!0===_&&(console.log("--- Node at "+G.level+" level"),console.log(" - leaf? "+G.isLeaf),console.log(" - num actives? "+G.numberActives),console.log(" - keys: "));for(var Y=G.numberActives;Y<G.keys.length;Y++)null!=G.keys[Y]&&!0===_&&(console.log(" * warning : redundant key data"),I.push(" * warning : redundant key data"));for(Y=G.numberActives+1;Y<G.children.length;Y++)null!=G.children[Y]&&!0===_&&(console.log(" * warning : redundant children data"),I.push(" * warning : redundant key data"));if(!1===G.isLeaf)for(Y=0;Y<G.numberActives;Y++){var X=this._diskRead(G.children[Y]).keys[this._diskRead(G.children[Y]).numberActives-1].key,fe=this._diskRead(G.children[Y+1]).keys[0].key;if(!0===_&&console.log("   "+G.keys[Y].key+"("+X+","+fe+")"),-1===R.comparator(G.keys[Y].key,X)){var ne=" !!! value max left "+X+" > key "+G.keys[Y].key;!0===_&&console.log(ne),I.push(ne)}1===R.comparator(G.keys[Y].key,fe)&&(ne=" !!! value min right "+fe+" < key "+G.keys[Y].key,!0===_&&console.log(ne),I.push(ne)),O(G.keys[Y].key),D.push(G.keys[Y].key)}else for(null===s?s=G.level:s!=G.level&&(ne=" !!! Leaf node with wrong level value",!0===_&&console.log(ne),I.push(ne)),Y=0;Y<G.numberActives;Y++)!0===_&&console.log(" "+G.keys[Y].key),O(G.keys[Y].key),D.push(G.keys[Y].key);G!=R.root&&(G.numberActives>2*R.order-1&&(!0===_&&(ne=" !!!! MAX num keys restriction violated "),console.log(ne),I.push(ne)),G.numberActives<R.order-1&&(!0===_&&(ne=" !!!! MIN num keys restriction violated "),console.log(ne),I.push(ne)))}),I},N.prototype._getMaxKeyPos=function(_,I,D){var O={};return null===I?D(null):!0===I.isLeaf?(O.node=I,O.index=I.numberActives-1,D(O)):(O.node=I,O.index=I.numberActives-1,void _._diskRead(I.children[I.numberActives],function(s){return _._getMaxKeyPos(_,s,D)}))},N.prototype._getMinKeyPos=function(_,I,D){var O={};if(null===I&&D(null),!0===I.isLeaf)return O.node=I,O.index=0,D(O);O.node=I,O.index=0,_._diskRead(I.children[0],function(s){return _._getMinKeyPos(_,s,D)})};var T=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};Ee.exports={Tree:N,Node:T}},{"./utils":58}],42:[function(Ce,Ee,Be){var ye=Ce("./query_engine").QueryEngine,j=Ce("./quad_backend").QuadBackend,N=Ce("./persistent_quad_backend").PersistentQuadBackend,T=Ce("./lexicon").Lexicon,_=Ce("./persistent_lexicon").PersistentLexicon,I=Ce("./rdf_model"),D=Ce("./utils");Store=function(O,s){var R=null,G=null;if(0==arguments.length)G={};else if(1==arguments.length)G={},R=O;else{if(!(1<arguments.length))throw"An optional argument map and a callback must be provided";G=O,R=s}null==G.treeOrder&&(G.treeOrder=15);var Y=T,X=j;!0===G.persistent&&(Y=_,X=N),this.functionMap={};var fe=this;this.customFns={},new Y(function(ne){var re=function(){new X(G,function(oe){var he=function(){G.backend=oe,G.lexicon=ne,fe.engine=new ye(G),R(null,fe)};G.overwrite?oe.clear(he):he()})};!0===G.overwrite?ne.clear(re):re()},G.name)},Store.prototype.rdf=I.rdf,Store.prototype.rdf.api=I,Store.prototype.registerCustomFunction=function(O,s){this.customFns[O]=s,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var O,s;1===arguments.length?(O=arguments[0],s=function(){}):2===arguments.length&&(O=arguments[0],s=arguments[1]),this.engine.execute(O,s)}},Store.prototype.executeWithEnvironment=function(){var O,s,R;if(3===arguments.length){O=arguments[0];var G=function(){};s=arguments[1],R=arguments[2]}else 4===arguments.length&&(O=arguments[0],G=arguments[3],s=arguments[1],R=arguments[2]);s=D.map(s,function(Y){return{token:"uri",value:Y}}),R=D.map(R,function(Y){return{token:"uri",value:Y}}),this.engine.execute(O,G,s,R)},Store.prototype.graph=function(){var O=null,s=null;if(1===arguments.length)s=arguments[0]||function(){},O=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";s=arguments[1]||function(){},O=arguments[0]}null!=this.rdf.resolve(O)&&(O=this.rdf.resolve(O)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+O+"> { ?s ?p ?o } }",s)},Store.prototype.node=function(){var O=null,s=null,R=null;if(2===arguments.length)R=arguments[0],s=arguments[1]||function(){},O=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";R=arguments[0],O=arguments[1],s=arguments[2]||function(){}}null!=this.rdf.resolve(O)&&(O=this.rdf.resolve(O)),null!=this.rdf.resolve(R)&&(R=this.rdf.resolve(R)),this.engine.execute("CONSTRUCT { <"+R+"> ?p ?o } WHERE { GRAPH <"+O+"> { <"+R+"> ?p ?o } }",s)},Store.prototype.startObservingNode=function(){var O,s,R;2===arguments.length?(O=arguments[0],R=arguments[1],this.engine.callbacksBackend.observeNode(O,R,function(){})):3===arguments.length&&(O=arguments[0],s=arguments[1],R=arguments[2],this.engine.callbacksBackend.observeNode(O,s,R,function(){}))},Store.prototype.stopObservingNode=function(O){this.engine.callbacksBackend.stopObservingNode(O)},Store.prototype.startObservingQuery=function(O,s,R){null!=R?this.engine.callbacksBackend.observeQuery(O,s,R):this.engine.callbacksBackend.observeQuery(O,s,function(){})},Store.prototype.stopObservingQuery=function(O){this.engine.callbacksBackend.stopObservingQuery(O)},Store.prototype.subscribe=function(O,s,R,G,Y){var X=this,fe=function(ne,re){var oe=[],he={blanks:{},outCache:{}},pe=[];D.each(re,function(V){var W=I.buildRDFResource(V.subject,pe,X.engine,he),ee=I.buildRDFResource(V.predicate,pe,X.engine,he);V=I.buildRDFResource(V.object,pe,X.engine,he),null!=W&&null!=ee&&null!=V&&(V=new I.Triple(W,ee,V),oe.push(V))}),Y(ne,oe)};this.functionMap[Y]=fe,this.engine.callbacksBackend.subscribe(O,s,R,G,fe,function(){})},Store.prototype.unsubscribe=function(O){this.engine.callbacksBackend.unsubscribe(this.functionMap[O]),delete this.functionMap[O]},Store.prototype.setPrefix=function(O,s){this.rdf.setPrefix(O,s)},Store.prototype.setDefaultPrefix=function(O){this.rdf.setDefaultPrefix(O)},Store.prototype.insert=function(){var O,s,R;if(1===arguments.length)s=arguments[0],R=function(){};else if(2===arguments.length)s=arguments[0],R=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";s=arguments[0],O=this.rdf.createNamedNode(arguments[1]),R=arguments[2]||function(){}}var G="",Y=this;s.forEach(function(X){G=G+Y._nodeToQuery(X.subject)+Y._nodeToQuery(X.predicate)+Y._nodeToQuery(X.object)+"."}),G=null!=O?"INSERT DATA { GRAPH "+this._nodeToQuery(O)+" { "+G+" } }":"INSERT DATA { "+G+" }",this.engine.execute(G,R)},Store.prototype._nodeToQuery=function(O){if("NamedNode"===O.interfaceName){var s=this.rdf.resolve(O.valueOf());return null!=s?"<"+s+">":"<"+O.valueOf()+">"}return O.toString()},Store.prototype.delete=function(){var O,s,R;if(1===arguments.length)s=arguments[0],R=function(){};else if(2===arguments.length)s=arguments[0],R=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";s=arguments[0],O=this.rdf.createNamedNode(arguments[1]),R=arguments[2]||function(){}}var G="",Y=this;s.forEach(function(X){G=G+Y._nodeToQuery(X.subject)+Y._nodeToQuery(X.predicate)+Y._nodeToQuery(X.object)+"."}),G=null!=O?"DELETE DATA { GRAPH "+this._nodeToQuery(O)+" { "+G+" } }":"DELETE DATA { "+G+" }",this.engine.execute(G,R)},Store.prototype.clear=function(){var O,s;if(0===arguments.length)O=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),s=function(){};else if(1===arguments.length)O=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),s=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";O=this.rdf.createNamedNode(arguments[0]),s=arguments[1]||function(){}}O="CLEAR GRAPH "+this._nodeToQuery(O),this.engine.execute(O,s)},Store.prototype.setBatchLoadEvents=function(O){this.engine.eventsOnBatchLoad=O},Store.prototype.registerDefaultNamespace=function(O,s){this.rdf.prefixes.set(O,s),this.engine.registerDefaultNamespace(O,s)},Store.prototype.registerDefaultProfileNamespaces=function(){var s,O=this.rdf.prefixes.values();for(s in O)this.registerDefaultNamespace(s,O[s])},Store.prototype.load=function(){var O,s,R,G,Y={};if(3===arguments.length)R=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),O=arguments[0],s=arguments[1],G=arguments[2]||function(){};else if(4===arguments.length)O=arguments[0],s=arguments[1],"string"==typeof(Y=arguments[2])?(R=this.rdf.createNamedNode(Y),Y={}):(R=this.rdf.createNamedNode(Y.graph||this.engine.lexicon.defaultGraphUri),delete Y.graph),G=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===O)s=this.rdf.createNamedNode(s),this.engine.execute("LOAD <"+s.valueOf()+"> INTO GRAPH <"+R.valueOf()+">",G);else{var X=this,fe=this.engine.rdfLoader.parsers[O];if(!fe)return G(Error("Cannot find parser for the provided media type:"+O));O=[fe,{token:"uri",value:R.valueOf()},s,Y,function(ne,re){ne?G(ne,re):X.engine.batchLoad(re,function(oe){null!=oe?G(null,oe):G(Error("Erro batch-loading triples."))})}],s&&"string"==typeof s&&0===s.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,O):this.engine.rdfLoader.tryToParse.apply(null,O)}},Store.prototype.registerParser=function(O,s){this.engine.rdfLoader.registerParser(O,s)},Store.prototype.registeredGraphs=function(O){this.engine.lexicon.registeredGraphs(!0,function(s){s=D.map(s,function(R){return new I.NamedNode(R)}),O(null,s)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(O){NetworkTransport=O},Store.prototype.close=function(O){null==O&&(O=function(){}),this.engine.close?this.engine.close(O):O()},Store.VERSION="0.9.18-alpha.0",Store.yieldFrequency=function(O){D.yieldFrequency(O)},Ee.exports.Store=Store,Ee.exports.create=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store},Ee.exports.connect=function(){(1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(Error("Store#connect is not supported in the 0.9.X series of the library"))}},{"./lexicon":45,"./persistent_lexicon":48,"./persistent_quad_backend":49,"./quad_backend":50,"./query_engine":52,"./rdf_model":56,"./utils":58}],43:[function(Ce,Ee,Be){var ye=Ce("./utils"),j=Ce("./utils");Ce("./quad_index");var N=Ce("./quad_index").Pattern,T=Ce("./rdf_model"),_=Ce("./abstract_query_tree").AbstractQueryTree;Callbacks={ANYTHING:{token:"var",value:"_"},added:"added",deleted:"deleted",eventsFlushed:"eventsFlushed",CallbacksBackend:function(I){for(this.aqt=new _,this.engine=I,this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices="SPOG GP OGS POG GSP OS".split(" "),this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={},I=0;I<this.indices.length;I++){var D=this.indices[I];this.indexMap[D]={},this.queriesIndexMap[D]={}}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(I,D){this.updateInProgress[I].push(D)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(I){if(!0!==this.ongoingModification){var D=this;if(null!=this.updateInProgress){var O=D.updateInProgress;D.updateInProgress=null,this.sendNotification(Callbacks.deleted,O[Callbacks.deleted],function(){D.sendNotification(Callbacks.added,O[Callbacks.added],function(){D.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){D.dispatchQueries(function(){I(!0)})})})})}else I(!0)}else I(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(I,D,O){for(var s={},R=0;R<D.length;R++){var Y,G=D[R];for(Y in this.indexMap){var X=this.indexMap[Y],fe=this.componentOrders[Y];this._searchCallbacksInIndex(X,fe,I,G,s),0!=this.pendingQueries.length&&(X=this.queriesIndexMap[Y],this._searchQueriesInIndex(X,fe,G))}}this.dispatchNotifications(s),null!=O&&O(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(I,D,O){for(var s=this.emptyNotificationsMap[I]||[],R=0;R<s.length;R++)s[R](I,D);O()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(I){for(var D in I){var O=this.callbacksMap[D],s=I[D][Callbacks.deleted];if(null!=s)try{O(Callbacks.deleted,s)}catch(G){}for(var R in I[D])if(R!=Callbacks.deleted)try{O(R,I[D][R])}catch(G){}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(I,D,O,s,R){var G=s[1];s=s[0];for(var Y=0;Y<D.length+1;Y++){for(var X=I._||[],fe=[],ne=0;ne<X.length;ne++){var re=X[ne];null!=this.callbacksMap[re]&&(R[re]=R[re]||{},R[re][O]=R[re][O]||[],R[re][O].push(s),fe.push(re))}if(I._=fe,null==I[""+G[X=D[Y]]])break;I=I[""+G[X]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(I,D){var O=this.emptyNotificationsMap[I]||[];O.push(D),this.emptyNotificationsMap[I]=O},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(I,D){var O=this.emptyNotificationsMap[I];null!=O&&(O=ye.reject(O,function(s){return s===D})),this.emptyNotificationsMap[I]=O},Callbacks.CallbacksBackend.prototype.subscribe=function(I,D,O,s,R,G){I=this._tokenizeComponents(I,D,O,s),D={blanks:{},outCache:{}},this.engine.registerNsInEnvironment(null,D);var Y=this;this.engine.normalizeQuad(I,D,!0,function(X){for(var fe=new N(X),ne=Y._indexForPattern(fe),re=(fe=Y.componentOrders[ne],ne=Y.indexMap[ne],0);re<fe.length;re++){var oe=X[fe[re]];if("_"===oe){null==ne._&&(ne._=[]),Y.callbackCounter++,ne._.push(Y.callbackCounter),Y.callbacksMap[Y.callbackCounter]=R,Y.callbacksInverseMap[R]=Y.callbackCounter;break}re===fe.length-1?(ne[oe]=ne[oe]||{_:[]},Y.callbackCounter++,ne[oe]._.push(Y.callbackCounter),Y.callbacksMap[Y.callbackCounter]=R,Y.callbacksInverseMap[R]=Y.callbackCounter):(ne[oe]=ne[oe]||{},ne=ne[oe])}null!=G&&G(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(I){var D=this.callbacksInverseMap[I];null!=D&&(delete this.callbacksInverseMap[I],delete this.callbacksMap[D])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(I,D,O,s){var R={};return null==I?R.subject=Callbacks.ANYTHING:0==I.indexOf("_:")?R.subject={token:"blank",value:I}:R.subject={token:"uri",value:I},R.predicate=null==D?Callbacks.ANYTHING:{token:"uri",value:D},R.object=null==O?Callbacks.ANYTHING:{token:"uri",value:O},R.graph=null==s?Callbacks.ANYTHING:{token:"uri",value:s},R},Callbacks.CallbacksBackend.prototype._indexForPattern=function(I){I=I.indexKey;for(var D=this.indices,O=0;O<D.length;O++)for(var s=D[O],R=this.componentOrders[s],G=0;G<R.length&&!1!==ye.include(I,R[G]);G++)if(G==I.length-1)return s;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var I,D,O,s;4===arguments.length?(I=arguments[0],D=arguments[1],O=arguments[2],s=arguments[3]):(I=arguments[0],D=this.engine.lexicon.defaultGraphUri,O=arguments[1],s=arguments[2]),D="CONSTRUCT { <"+I+"> ?p ?o } WHERE { GRAPH <"+D+"> { <"+I+"> ?p ?o } }";var R=this,G={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,G);var Y=[];this.engine.execute(D,function(X,fe){if(X)s&&s(!1);else{var ne=!1,re=function(oe,he){if("eventsFlushed"===oe&&ne){ne=!1;try{O(fe)}catch(ge){}}else if("eventsFlushed"!==oe){ne=!0;for(var pe=0;pe<he.length;pe++){var ee=he[pe],V=T.buildRDFResource(ee.subject,Y,R.engine,G),W=T.buildRDFResource(ee.predicate,Y,R.engine,G);ee=T.buildRDFResource(ee.object,Y,R.engine,G);null!=V&&null!=W&&null!=ee&&(ee=new T.Triple(V,W,ee),oe===Callbacks.added?fe.add(ee):oe===Callbacks.deleted&&fe.remove(ee))}}};R.observersMap[O]=re,R.subscribeEmpty(Callbacks.eventsFlushed,re),R.subscribe(I,null,null,null,re,function(){try{O(fe)}catch(oe){}s&&s(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(I){return!!(I=this.observersMap[I])&&(this.unsubscribe(I),this.unsubscribeEmpty(Callbacks.eventsFlushed,I),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(I,D,O){var s=this.aqt.parseQueryString(I),R=(s=this.aqt.parseSelect(s.units[0]),s=this.aqt.collectBasicTriples(s),this),G={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,G);var Y=this.queryCounter;this.queryCounter++,this.queriesMap[Y]=I,this.queriesInverseMap[I]=Y,this.queriesList.push(Y),this.queriesCallbacksMap[Y]=D,j.eachSeries(s,function(X,fe){null==X.graph&&(X.graph=R.engine.lexicon.defaultGraphUriTerm),R.engine.normalizeQuad(X,G,!0,function(ne){for(var re=new N(ne),oe=R._indexForPattern(re),he=(re=R.componentOrders[oe],oe=R.queriesIndexMap[oe],0);he<re.length;he++){var pe=ne[re[he]];if("string"==typeof pe){null==oe._&&(oe._=[]),oe._.push(Y);break}he===re.length-1?(oe[pe]=oe[pe]||{_:[]},oe[pe]._.push(Y)):(oe[pe]=oe[pe]||{},oe=oe[pe])}fe()})},function(){R.engine.execute(I,function(X,fe){X?console.log("ERROR in query callback "+fe):D(fe)}),null!=O&&O()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(I){var D=this.queriesInverseMap[I];null!=D&&(delete this.queriesInverseMap[I],delete this.queriesMap[D],this.queriesList=ye.reject(this.queriesList,function(O){return O===D}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(I,D,O){var s=O[1];for(O=O[0],O=0;O<D.length+1;O++){for(var R=I._||[],G=[],Y=0;Y<R.length;Y++){var X=R[Y];ye.include(this.pendingQueries,X)&&(ye.remove(this.pendingQueries,function(fe){return fe===X}),this.matchedQueries.push(X)),null!=this.queriesMap[X]&&G.push(X)}if(I._=G,null==I[""+s[R=D[O]]])break;I=I[""+s[R]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(I){var O,s,D=this,R={};j.eachSeries(this.matchedQueries,function(G,Y){null==R[G]?(R[G]=!0,O=D.queriesMap[G],s=D.queriesCallbacksMap[G],D.engine.execute(O,function(X,fe){if(!X)try{s(fe)}catch(ne){}Y()})):Y()},function(){I()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,Ee.exports=Callbacks},{"./abstract_query_tree":40,"./quad_index":51,"./rdf_model":56,"./utils":58}],44:[function(Ce,Ee,Be){var ye=Ce("jsonld");Be.JSONLDParser={},(Ce=Be.JSONLDParser).parser={async:!0,parse:function(N,T,_,I){try{"string"==typeof N&&(N=JSON.parse(N)),function(N,T,_){var I=null;ye.normalize(N,{},function(D,O){if(D)_(D);else{var G,s=function(ne){return"blank node"===ne.type?{blank:ne.value}:"IRI"===ne.type?{token:"uri",value:ne.value}:"literal"===ne.type?null!=ne.language?{literal:'"'+ne.value+'"@'+ne.language}:null!==ne.datatype?{literal:'"'+ne.value+'"^^<'+ne.datatype+">"}:{literal:'"'+ne.value+'"'}:void 0};for(G in I=[],O)for(var Y=O[G],X=0;X<Y.length;X++){var fe=Y[X];ne=fe.subject,re=fe.predicate,oe=fe.object,I.push({subject:s(ne),predicate:s(re),object:s(oe),graph:T})}_(null,I)}var ne,re,oe})}(N,T,I)}catch(D){I(D)}}},Ee.exports={JSONLDParser:Ce}},{jsonld:31}],45:[function(Ce,Ee,Be){var ye=Ce("./utils"),j=Ce("./btree").Tree;Lexicon=function(N){var T=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,ye.seq(function(_){new j(2,function(I){T.uris=I,_()})},function(_){new j(2,function(I){T.literals=I,_()})},function(_){new j(2,function(I){T.knownGraphs=I,_()})},function(_){new j(2,function(I){T.oidUris=I,_()})},function(_){new j(2,function(I){T.oidLiterals=I,_()})},function(_){new j(2,function(I){T.oidBlanks=I,_()})})(function(){null!=N&&N(T)})},Lexicon.prototype.registerGraph=function(N,T,_){N!=this.defaultGraphOid?this.knownGraphs.insert(N,T,function(){_()}):_()},Lexicon.prototype.registeredGraphs=function(N,T){var _=[];this.knownGraphs.walk(function(I){!0===N?_.push(I.data):_.push(I.key)},function(){T(_)})},Lexicon.prototype.registerUri=function(N,T){var _=this;N===this.defaultGraphUri?T(this.defaultGraphOid):this.uris.search(N,function(I){if(null==I){var D=_.oidCounter,O="u"+D;_.oidCounter++,ye.seq(function(s){_.uris.insert(N,[D,0],function(){s()})},function(s){_.oidUris.insert(O,N,function(){s()})})(function(){T(D)})}else D=I[0],I[1]+=1,T(D)})},Lexicon.prototype.resolveUri=function(N,T){N===this.defaultGraphUri?T(this.defaultGraphOid):this.uris.search(N,function(_){T(null!=_?_[0]:-1)})},Lexicon.prototype.resolveUriCost=function(N,T){N===this.defaultGraphUri?T(0):this.uris.search(N,function(_){T(null!=_?_[1]:-1)})},Lexicon.prototype.registerBlank=function(N){var T=this.oidCounter;this.oidCounter++;var _=""+T;this.oidBlanks.insert(_,_,function(){N(T)})},Lexicon.prototype.resolveBlank=function(N,T){var _=this;this.oidBlanks.search(N,function(I){null!=I?T(I):(I=_.oidCounter,this.oidCounter++,T(""+I))})},Lexicon.prototype.resolveBlankCost=function(N,T){T(0)},Lexicon.prototype.registerLiteral=function(N,T){var _=this;this.literals.search(N,function(I){if(null==I){var D=_.oidCounter,O="l"+D;_.oidCounter++,ye.seq(function(s){_.literals.insert(N,[D,0],function(){s()})},function(s){_.oidLiterals.insert(O,N,function(){s()})})(function(){T(D)})}else D=I[0],I[1]+=1,T(D)})},Lexicon.prototype.resolveLiteral=function(N,T){this.literals.search(N,function(_){T(null!=_?_[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(N,T){this.literals.search(N,function(_){T(null!=_?_[1]:-1)})},Lexicon.prototype.parseLiteral=function(N){var T=N.lastIndexOf("@");if(-1!=T&&'"'===N[T-1]&&null!=N.substring(T,N.length).match(/^@[a-zA-Z\-]+$/g)){var _=N.substring(1,T-1);return{token:"literal",value:_,lang:N=N.substring(T+1,N.length)}}return-1!=(T=N.lastIndexOf("^^"))&&'"'===N[T-1]&&"<"===N[T+2]&&">"===N[N.length-1]?{token:"literal",value:_=N.substring(1,T-1),type:N=N.substring(T+3,N.length-1)}:{token:"literal",value:_=N.substring(1,N.length-1)}},Lexicon.prototype.parseUri=function(N){return{token:"uri",value:N}},Lexicon.prototype.retrieve=function(N,T){var _=this;N===this.defaultGraphOid?T({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):ye.seq(function(I,D){_.oidUris.search("u"+N,function(O){D(null,null!=O?_.parseUri(O):null)})},function(I,D){null==I?_.oidLiterals.search("l"+N,function(O){D(null,null!=O?_.parseLiteral(O):null)}):D(null,I)},function(I,D){null==I?_.oidBlanks.search(""+N,function(O){D(null,null!=O?{token:"blank",value:"_:"+N}:null)}):D(null,I)})(null,function(I,D){T(D)})},Lexicon.prototype.clear=function(N){var T=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,ye.seq(function(_){new j(2,function(I){T.uris=I,_()})},function(_){new j(2,function(I){T.literals=I,_()})},function(_){new j(2,function(I){T.knownGraphs=I,_()})},function(_){new j(2,function(I){T.oidUris=I,_()})},function(_){new j(2,function(I){T.oidLiterals=I,_()})},function(_){new j(2,function(I){T.oidBlanks=I,_()})})(function(){null!=N&&N()})},Lexicon.prototype.unregister=function(N,T,_){var I=this;ye.seq(function(D){I._unregisterTerm(N.subject.token,T.subject,D)},function(D){I._unregisterTerm(N.predicate.token,T.predicate,D)},function(D){I._unregisterTerm(N.object.token,T.object,D)},function(D){null!=N.graph?I._unregisterTerm(N.graph.token,T.graph,D):D()})(function(){_(!0)})},Lexicon.prototype._unregisterTerm=function(N,T,_){var I=this;if("uri"===N)if(T!=this.defaultGraphOid){var D="u"+T;I.oidUris.search(D,function(O){I.uris.search(O,function(s){var R=s[1];""+s[0]==""+T?0===R?ye.seq(function(G){I.oidUris.delete(D,function(){G()})},function(G){I.uris.delete(O,function(){G()})},function(G){I.knownGraphs.delete(T,function(){G()})})(function(){_()}):I.uris.insert(O,[T,R-1],function(){_()}):_()})})}else _();else"literal"===N?(this.oidCounter++,D="l"+T,I.oidLiterals.search(D,function(O){I.literals.search(O,function(s){var R=s[1];""+s[0]==""+T?0===R?ye.seq(function(G){I.oidLiterals.delete(D,function(){G()})},function(G){I.literals.delete(O,function(){G()})})(function(){_()}):I.literals.insert(O,[T,R-1],function(){_()}):_()})})):"blank"===N?I.oidBlanks.delete(""+T,function(){_()}):_()},Ee.exports={Lexicon}},{"./btree":41,"./utils":58}],46:[function(Ce,Ee,Be){if(!Ce("./utils").isWorker()){var ye=Ce("http"),j=Ce("https"),N=Ce("url");NetworkTransport={load:function(T,_,I,D){var O=null==D?3:D;D={host:(T=N.parse(T,!0,!0)).host,hostname:T.hostname,method:"GET",path:T.path,headers:{host:T.hostname,Accept:_}};var s=null;"http:"===T.protocol?(D.port=T.port||80,s=ye):"https:"===T.protocol&&(D.port=T.port||443,s=j),(T=s.request(D,function(R){var G=R.headers,Y="";"2"==(""+R.statusCode)[0]?(R.on("end",function(){I(null,{headers:G,data:Y})}),R.on("data",function(X){Y+=X})):"3"==(""+R.statusCode)[0]?0==O?I(Error("Too many redirections")):null!=(R=G.Location||G.location)?NetworkTransport.load(R,_,I,O-1):I(Error("Redirection without location header")):I(Error("HTTP error: "+R.statusCode))})).on("error",I),T.end()}},Ee.exports={NetworkTransport}}},{"./utils":58,http:26,https:7,url:22}],47:[function(Ce,Ee,Be){Ee.exports=function(){function ye(j,N,T,_){this.message=j,this.expected=N,this.found=T,this.location=_,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,ye)}return function(j,N){function T(){this.constructor=j}T.prototype=N.prototype,j.prototype=new T}(ye,Error),ye.buildMessage=function(j,N){function T(O){return O.charCodeAt(0).toString(16).toUpperCase()}function _(O){return O.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(s){return"\\x0"+T(s)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(s){return"\\x"+T(s)})}function I(O){return O.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(s){return"\\x0"+T(s)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(s){return"\\x"+T(s)})}var D={literal:function(O){return'"'+_(O.text)+'"'},class:function(O){var R,s="";for(R=0;R<O.parts.length;R++)s+=O.parts[R]instanceof Array?I(O.parts[R][0])+"-"+I(O.parts[R][1]):I(O.parts[R]);return"["+(O.inverted?"^":"")+s+"]"},any:function(O){return"any character"},end:function(O){return"end of input"},other:function(O){return O.description}};return"Expected "+function(O){var R,s=Array(O.length);for(R=0;R<O.length;R++){var Y,G=R;Y=O[R],Y=D[Y.type](Y),s[G]=Y}if(s.sort(),0<s.length){for(O=R=1;R<s.length;R++)s[R-1]!==s[R]&&(s[O]=s[R],O++);s.length=O}switch(s.length){case 1:return s[0];case 2:return s[0]+" or "+s[1];default:return s.slice(0,-1).join(", ")+", or "+s[s.length-1]}}(j)+" but "+(N?'"'+_(N)+'"':"end of input")+" found."},{SyntaxError:ye,parse:function(j,N){function T(o,F){return{type:"literal",text:o,ignoreCase:F}}function _(o,F,y){return{type:"class",parts:o,inverted:F,ignoreCase:y}}function I(o){return{type:"other",description:o}}function D(o){var y,F=Yu[o];if(!F){for(y=o-1;!Yu[y];)y--;for(F={line:(F=Yu[y]).line,column:F.column};y<o;)10===j.charCodeAt(y)?(F.line++,F.column=1):F.column++,y++;Yu[o]=F}return F}function O(o,F){var y=D(o),v=D(F);return{start:{offset:o,line:y.line,column:y.column},end:{offset:F,line:v.line,column:v.column}}}function s(o){r<zn||(r>zn&&(zn=r,cf=[]),cf.push(o))}function R(){var o,F,y;if(B++,B++,o=r,(F=G())!==e){var v,P,Q,K,de,He;if(B++,v=r,(P=X())!==e){for(Q=[],y=J();y!==e;)Q.push(y),y=J();if(Q!==e){for(y=[],K=fe();K!==e;)y.push(K),K=fe();if(y!==e){for(K=[],Q=J();Q!==e;)K.push(Q),Q=J();if(K!==e)if((Q=re())!==e){for(de=[],K=J();K!==e;)de.push(K),K=J();if(de!==e)if((K=oe())!==e){for(de=[],He=J();He!==e;)de.push(He),He=J();if(de!==e){var Ye,ut,ct,Ct,Gt,Ht,Vt;if(B++,de=r,j.substr(r,8)===Uo?(He=Uo,r+=8):(He=e,0===B&&s(bi)),He!==e){for(Ye=[],ut=le();ut!==e;)Ye.push(ut),ut=le();if(Ye!==e)if(123===j.charCodeAt(r)?(ut=Kr,r++):(ut=e,0===B&&s(Jr)),ut!==e){if(ct=[],Ct=r,40===j.charCodeAt(r)?(Gt=Dt,r++):(Gt=e,0===B&&s(Rt)),Gt!==e){if(Ht=[],(Vt=ge())!==e)for(;Vt!==e;)Ht.push(Vt),Vt=ge();else Ht=e;Ht!==e?(41===j.charCodeAt(r)?(Vt=Bt,r++):(Vt=e,0===B&&s(Nt)),Vt!==e?Ct=Gt=[Gt,Ht,Vt]:(r=Ct,Ct=e)):(r=Ct,Ct=e)}else r=Ct,Ct=e;for(Ct===e&&(Ct=Ar());Ct!==e;){if(ct.push(Ct),Ct=r,40===j.charCodeAt(r)?(Gt=Dt,r++):(Gt=e,0===B&&s(Rt)),Gt!==e){if(Ht=[],(Vt=ge())!==e)for(;Vt!==e;)Ht.push(Vt),Vt=ge();else Ht=e;Ht!==e?(41===j.charCodeAt(r)?(Vt=Bt,r++):(Vt=e,0===B&&s(Nt)),Vt!==e?Ct=Gt=[Gt,Ht,Vt]:(r=Ct,Ct=e)):(r=Ct,Ct=e)}else r=Ct,Ct=e;Ct===e&&(Ct=Ar())}ct!==e?(125===j.charCodeAt(r)?(Ct=br,r++):(Ct=e,0===B&&s(Sr)),Ct!==e?de=He=[He,Ye,ut,ct,Ct]:(r=de,de=e)):(r=de,de=e)}else r=de,de=e;else r=de,de=e}else r=de,de=e;if(de===e&&(de=null),B--,de===e&&0===B&&s(ql),de!==e){for(v=P,P={named:[],implicit:[]},de=0;de<y.length;de++)"default"===(He=y[de]).kind?P.implicit.push(He.graph):P.named.push(He.graph);0===P.named.length&&0===P.implicit.length&&P.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"}),(y={kind:"select",token:"executableunit"}).dataset=P,y.projection=v.vars,y.modifier=v.modifier,y.pattern=Q,null!=K&&null!=K.limit&&(y.limit=K.limit),null!=K&&null!=K.offset&&(y.offset=K.offset),null!=K&&null!=K.order&&""!=K.order&&(y.order=K.order),null!=K&&null!=K.group&&(y.group=K.group),v=y}else r=v,v=e}else r=v,v=e}else r=v,v=e;else r=v,v=e}else r=v,v=e;else r=v,v=e}else r=v,v=e}else r=v,v=e}else r=v,v=e;if(B--,v===e&&0===B&&s(Es),(y=v)===e){for(B++,y=r,Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e)if(j.substr(r,9)===Tn?(K=Tn,r+=9):(K=e,0===B&&s(Al)),K===e&&(j.substr(r,9)===Oo?(K=Oo,r+=9):(K=e,0===B&&s(El))),K!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e){if(B++,Q=r,123===j.charCodeAt(r)?(K=Kr,r++):(K=e,0===B&&s(Jr)),K!==e){for(v=[],K=J();K!==e;)v.push(K),K=J();if(v!==e)if((K=ht())===e&&(K=null),K!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();v!==e?(125===j.charCodeAt(r)?(P=br,r++):(P=e,0===B&&s(Sr)),P!==e?Q=K:(r=Q,Q=e)):(r=Q,Q=e)}else r=Q,Q=e;else r=Q,Q=e}else r=Q,Q=e;if(B--,Q===e&&0===B&&s(us),(K=Q)!==e){for(Q=[],v=J();v!==e;)Q.push(v),v=J();if(Q!==e){for(v=[],Q=fe();Q!==e;)v.push(Q),Q=fe();if(v!==e){for(Q=[],P=J();P!==e;)Q.push(P),P=J();if(Q!==e)if((P=re())!==e){for(de=[],Q=J();Q!==e;)de.push(Q),Q=J();if(de!==e)if((Q=oe())!==e){for(y=K,K=v,v=P,P={named:[],implicit:[]},de=0;de<K.length;de++)"default"===(He=K[de]).kind?P.implicit.push(He.graph):P.named.push(He.graph);0===P.named.length&&0===P.implicit.length&&P.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"}),(K={kind:"construct",token:"executableunit"}).dataset=P,K.template=y,K.pattern=v,null!=Q&&null!=Q.limit&&(K.limit=Q.limit),null!=Q&&null!=Q.offset&&(K.offset=Q.offset),null!=Q&&null!=Q.order&&""!=Q.order&&(K.order=Q.order),y=K}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e}else r=y,y=e}else r=y,y=e}else r=y,y=e}else r=y,y=e;else r=y,y=e;if(y===e){for(y=r,Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e)if(j.substr(r,9)===Tn?(K=Tn,r+=9):(K=e,0===B&&s(Al)),K===e&&(j.substr(r,9)===Oo?(K=Oo,r+=9):(K=e,0===B&&s(El))),K!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e){for(K=[],Q=fe();Q!==e;)K.push(Q),Q=fe();if(K!==e){for(Q=[],v=J();v!==e;)Q.push(v),v=J();if(Q!==e)if(j.substr(r,5)===In?(v=In,r+=5):(v=e,0===B&&s(mi)),v===e&&(j.substr(r,5)===wn?(v=wn,r+=5):(v=e,0===B&&s(Do))),v!==e){for(Q=[],P=J();P!==e;)Q.push(P),P=J();if(Q!==e)if(123===j.charCodeAt(r)?(P=Kr,r++):(P=e,0===B&&s(Jr)),P!==e){for(de=[],Q=J();Q!==e;)de.push(Q),Q=J();if(de!==e)if((Q=qe())===e&&(Q=null),Q!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if(125===j.charCodeAt(r)?(P=br,r++):(P=e,0===B&&s(Sr)),P!==e){for(P=[],v=J();v!==e;)P.push(v),v=J();if(P!==e)if((v=oe())!==e){for(y=K,K=v,v={named:[],implicit:[]},P=0;P<y.length;P++)"default"===(de=y[P]).kind?v.implicit.push(de.graph):v.named.push(de.graph);0===v.named.length&&0===v.implicit.length&&v.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"}),(y={kind:"construct",token:"executableunit"}).dataset=v,y.template=Q,y.pattern={token:"basicgraphpattern",triplesContext:Q.triplesContext},null!=K&&null!=K.limit&&(y.limit=K.limit),null!=K&&null!=K.offset&&(y.offset=K.offset),null!=K&&null!=K.order&&""!=K.order&&(y.order=K.order)}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e}else r=y,y=e}else r=y,y=e;else r=y,y=e}if(B--,y===e&&0===B&&s(jo),y===e){if(B++,y=r,j.substr(r,8)===Os?(Q=Os,r+=8):(Q=e,0===B&&s(Tl)),Q!==e){if(K=[],(v=ue())!==e)for(;v!==e;)K.push(v),v=ue();else K=e;if(K===e&&(42===j.charCodeAt(r)?(K=mn,r++):(K=e,0===B&&s(xn))),K!==e){for(v=[],P=fe();P!==e;)v.push(P),P=fe();v!==e?((P=re())===e&&(P=null),P!==e?(de=oe())!==e?y=Q=[Q,K,v,P,de]:(r=y,y=e):(r=y,y=e)):(r=y,y=e)}else r=y,y=e}else r=y,y=e;if(B--,y===e&&0===B&&s(js),y===e){for(B++,y=r,Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e)if(j.substr(r,3)===Il?(K=Il,r+=3):(K=e,0===B&&s(Nl)),K===e&&(j.substr(r,3)===Vr?(K=Vr,r+=3):(K=e,0===B&&s($u))),K!==e){for(K=[],Q=J();Q!==e;)K.push(Q),Q=J();if(K!==e){for(Q=[],v=fe();v!==e;)Q.push(v),v=fe();if(Q!==e){for(v=[],K=J();K!==e;)v.push(K),K=J();if(v!==e)if((K=re())!==e){for(y=Q,Q=K,K={named:[],implicit:[]},v=0;v<y.length;v++)"implicit"===(P=y[v]).kind?K.implicit.push(P.graph):K.named.push(P.graph);0===K.named.length&&0===K.implicit.length&&K.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"}),(y={kind:"ask",token:"executableunit"}).dataset=K,y.pattern=Q}else r=y,y=e;else r=y,y=e}else r=y,y=e}else r=y,y=e}else r=y,y=e;else r=y,y=e;B--,y===e&&0===B&&s(Ro)}}}y!==e?(B++,Q=r,j.substr(r,6)===Go?(K=Go,r+=6):(K=e,0===B&&s(zl)),K===e&&(j.substr(r,6)===Zi?(K=Zi,r+=6):(K=e,0===B&&s(Ws))),K!==e?(v=Kt())!==e?Q=K=[K,v]:(r=Q,Q=e):(r=Q,Q=e),Q===e&&(Q=null),Q!==e&&(Q=null!=Q?Q[1]:null),B--,Q===e&&0===B&&s(ha),Q!==e?o=F={token:"query",kind:"query",prologue:F,units:[y],inlineData:Q}:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;return B--,o===e&&0===B&&s(or),B--,o===e&&0===B&&s(Ao),o===e&&(B++,o=Se(),B--,o===e&&0===B&&s($i)),o}function G(){var o,F,y,v;for(B++,o=r,B++,F=r,v=[],y=J();y!==e;)v.push(y),y=J();if(v!==e)if(j.substr(r,4)===Eo?(y=Eo,r+=4):(y=e,0===B&&s(ln)),y===e&&(j.substr(r,4)===Xt?(y=Xt,r+=4):(y=e,0===B&&s(Yn))),y!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?(v=At())!==e?(F={token:"base"}).value=v:(r=F,F=e):(r=F,F=e)}else r=F,F=e;else r=F,F=e;if(B--,F===e&&0===B&&s(Vn),F===e&&(F=null),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e){for(v=[],y=Y();y!==e;)v.push(y),y=Y();v!==e?o=F={token:"prologue",base:F,prefixes:v}:(r=o,o=e)}else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(bt),o}function Y(){var o,F,y,v;for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(j.substr(r,6)===To?(y=To,r+=6):(y=e,0===B&&s(it)),y===e&&(j.substr(r,6)===Et?(y=Et,r+=6):(y=e,0===B&&s(As))),y!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if((F=Pt())!==e){for(v=[],y=J();y!==e;)v.push(y),y=J();v!==e?(y=At())!==e?((o={token:"prefix"}).prefix=F,o.local=y):(r=o,o=e):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e;return B--,o===e&&0===B&&s(Hi),o}function X(){var o,F,y,v,P,Q,K,de,He,Ye,ut,ct,Ct,Gt,Ht,Vt;for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(j.substr(r,6)===Ts?(y=Ts,r+=6):(y=e,0===B&&s(It)),y===e&&(j.substr(r,6)===Fl?(y=Fl,r+=6):(y=e,0===B&&s(Ll))),y!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if(j.substr(r,8)===dr?(F=dr,r+=8):(F=e,0===B&&s(wr)),F===e&&(j.substr(r,8)===Cr?(F=Cr,r+=8):(F=e,0===B&&s(vn))),F===e&&(j.substr(r,7)===yi?(F=yi,r+=7):(F=e,0===B&&s(Is)),F===e&&(j.substr(r,7)===Ns?(F=Ns,r+=7):(F=e,0===B&&s(Ms)))),F===e&&(F=null),F!==e){for(v=[],y=J();y!==e;)v.push(y),y=J();if(v!==e){for(y=[],v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if((Q=le())!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?v=P=[P,Q,K]:(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(40===j.charCodeAt(r)?(Q=Dt,r++):(Q=e,0===B&&s(Rt)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();if(K!==e)if((de=Z())!==e){for(He=[],Ye=J();Ye!==e;)He.push(Ye),Ye=J();if(He!==e)if(j.substr(r,2)===yn?(Ye=yn,r+=2):(Ye=e,0===B&&s(Xi)),Ye===e&&(j.substr(r,2)===En?(Ye=En,r+=2):(Ye=e,0===B&&s(Mo))),Ye!==e){for(ut=[],ct=J();ct!==e;)ut.push(ct),ct=J();if(ut!==e)if((ct=le())!==e){for(Ct=[],Gt=J();Gt!==e;)Ct.push(Gt),Gt=J();if(Ct!==e)if(41===j.charCodeAt(r)?(Gt=Bt,r++):(Gt=e,0===B&&s(Nt)),Gt!==e){for(Ht=[],Vt=J();Vt!==e;)Ht.push(Vt),Vt=J();Ht!==e?v=P=[P,Q,K,de,He,Ye,ut,ct,Ct,Gt,Ht]:(r=v,v=e)}else r=v,v=e;else r=v,v=e}else r=v,v=e;else r=v,v=e}else r=v,v=e;else r=v,v=e}else r=v,v=e;else r=v,v=e}else r=v,v=e;else r=v,v=e}if(v!==e)for(;v!==e;){for(y.push(v),v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if((Q=le())!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?v=P=[P,Q,K]:(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(40===j.charCodeAt(r)?(Q=Dt,r++):(Q=e,0===B&&s(Rt)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();if(K!==e)if((de=Z())!==e){for(He=[],Ye=J();Ye!==e;)He.push(Ye),Ye=J();if(He!==e)if(j.substr(r,2)===yn?(Ye=yn,r+=2):(Ye=e,0===B&&s(Xi)),Ye===e&&(j.substr(r,2)===En?(Ye=En,r+=2):(Ye=e,0===B&&s(Mo))),Ye!==e){for(ut=[],ct=J();ct!==e;)ut.push(ct),ct=J();if(ut!==e)if((ct=le())!==e){for(Ct=[],Gt=J();Gt!==e;)Ct.push(Gt),Gt=J();if(Ct!==e)if(41===j.charCodeAt(r)?(Gt=Bt,r++):(Gt=e,0===B&&s(Nt)),Gt!==e){for(Ht=[],Vt=J();Vt!==e;)Ht.push(Vt),Vt=J();Ht!==e?v=P=[P,Q,K,de,He,Ye,ut,ct,Ct,Gt,Ht]:(r=v,v=e)}else r=v,v=e;else r=v,v=e}else r=v,v=e;else r=v,v=e}else r=v,v=e;else r=v,v=e}else r=v,v=e;else r=v,v=e}else r=v,v=e;else r=v,v=e}}else y=e;if(y===e){for(y=r,v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if(42===j.charCodeAt(r)?(P=mn,r++):(P=e,0===B&&s(xn)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?y=v=[v,P,Q]:(r=y,y=e)}else r=y,y=e;else r=y,y=e}if(y!==e){if(o=F,F=y,y=[],3===F.length&&"*"===F[1])F={vars:[{token:"variable",kind:"*"}],modifier:uc(o)};else{for(v=0;v<F.length;v++)3===(P=F[v]).length?y.push({token:"variable",kind:"var",value:P[1]}):y.push({token:"variable",kind:"aliased",expression:P[3],alias:P[7]});F={vars:y,modifier:uc(o)}}o=F}else r=o,o=e}else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e;return B--,o===e&&0===B&&s(No),o}function fe(){var o,F,y,v;if(B++,o=r,j.substr(r,4)===Bo?(F=Bo,r+=4):(F=e,0===B&&s(Ml)),F===e&&(j.substr(r,4)===Cn?(F=Cn,r+=4):(F=e,0===B&&s(Ds))),F!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e){for(B++,F=r,y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e?(v=ne())!==e?F=y={graph:v,kind:"default",token:"graphClause"}:(r=F,F=e):(r=F,F=e),B--,F===e&&0===B&&s(bn),F===e){if(B++,F=r,j.substr(r,5)===Nn?(y=Nn,r+=5):(y=e,0===B&&s(Mn)),y===e&&(j.substr(r,5)===xi?(y=xi,r+=5):(y=e,0===B&&s(Rs))),y!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?(v=ne())!==e?F=y={graph:v,kind:"named",token:"graphCluase"}:(r=F,F=e):(r=F,F=e)}else r=F,F=e;B--,F===e&&0===B&&s(Po)}if(F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?o=F:(r=o,o=e)}else r=o,o=e}else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(ea),o}function ne(){var o;return B++,o=wt(),B--,o===e&&0===B&&s(ta),o}function re(){var o,F,y,v;if(B++,o=r,j.substr(r,5)===In?(F=In,r+=5):(F=e,0===B&&s(mi)),F===e&&(j.substr(r,5)===wn?(F=wn,r+=5):(F=e,0===B&&s(Do))),F===e&&(F=null),F!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if((F=Ze())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?o=F:(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(ra),o}function oe(){var o,F,y,v;if(B++,o=r,B++,F=r,j.substr(r,5)===Dl?(y=Dl,r+=5):(y=e,0===B&&s(na)),y===e&&(j.substr(r,5)===Rl?(y=Rl,r+=5):(y=e,0===B&&s(ia))),y!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(j.substr(r,2)===Wi?(v=Wi,r+=2):(v=e,0===B&&s(Bl)),v===e&&(j.substr(r,2)===qi?(v=qi,r+=2):(v=e,0===B&&s(zi))),v!==e){for(v=[],y=J();y!==e;)v.push(y),y=J();if(v!==e){if(y=[],(v=he())!==e)for(;v!==e;)y.push(v),v=he();else y=e;y!==e?F=y:(r=F,F=e)}else r=F,F=e}else r=F,F=e;else r=F,F=e}else r=F,F=e;if(B--,F===e&&0===B&&s(Ol),F===e&&(F=null),F!==e){var P,Q;if(B++,y=r,j.substr(r,6)===Pl?(v=Pl,r+=6):(v=e,0===B&&s(sa)),v!==e){if(P=[],(Q=pe())!==e)for(;Q!==e;)P.push(Q),Q=pe();else P=e;P!==e?y=v=[v,P]:(r=y,y=e)}else r=y,y=e;if(B--,y===e&&0===B&&s(oa),y===e&&(y=null),y!==e){if(B++,y=r,j.substr(r,5)===Ql?(v=Ql,r+=5):(v=e,0===B&&s(Ul)),v===e&&(j.substr(r,5)===Ci?(v=Ci,r+=5):(v=e,0===B&&s(la))),v!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if(j.substr(r,2)===Wi?(P=Wi,r+=2):(P=e,0===B&&s(Bl)),P===e&&(j.substr(r,2)===qi?(P=qi,r+=2):(P=e,0===B&&s(zi))),P!==e){for(P=[],v=J();v!==e;)P.push(v),v=J();if(P!==e){if(v=[],(P=V())!==e)for(;P!==e;)v.push(P),P=V();else v=e;if(v!==e){for(P=[],Q=J();Q!==e;)P.push(Q),Q=J();P!==e?y=v:(r=y,y=e)}else r=y,y=e}else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;if(B--,y===e&&0===B&&s(gr),y===e&&(y=null),y!==e){if(B++,v=r,(P=W())!==e?((Q=ee())===e&&(Q=null),Q!==e?v=P=[P,Q]:(r=v,v=e)):(r=v,v=e),v===e&&(v=r,(P=ee())!==e?((Q=W())===e&&(Q=null),Q!==e?v=P=[P,Q]:(r=v,v=e)):(r=v,v=e)),v!==e){for(P={},Q=0;Q<v.length;Q++){var K=v[Q];null!=K&&null!=K.limit?P.limit=K.limit:null!=K&&null!=K.offset&&(P.offset=K.offset)}v=P}B--,v===e&&0===B&&s(Ji),v===e&&(v=null),v!==e?(o=F,F=v,v={},null!=F&&(null!=F.limit&&(v.limit=F.limit),null!=F.offset&&(v.offset=F.offset)),null!=o&&(v.group=o),v.order=y,o=v):(r=o,o=e)}else r=o,o=e}else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(jl),o}function he(){var o,F,y,v,P,Q;for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if((y=Oe())!==e){for(v=[],F=J();F!==e;)v.push(F),F=J();v!==e?o=y:(r=o,o=e)}else r=o,o=e;else r=o,o=e;if(o===e){for(o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if((y=tt())!==e){for(v=[],F=J();F!==e;)v.push(F),F=J();v!==e?o=y:(r=o,o=e)}else r=o,o=e;else r=o,o=e;if(o===e){for(o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(40===j.charCodeAt(r)?(y=Dt,r++):(y=e,0===B&&s(Rt)),y!==e){for(v=[],F=J();F!==e;)v.push(F),F=J();if(v!==e)if((F=Z())!==e){for(v=[],y=J();y!==e;)v.push(y),y=J();if(v!==e){if(y=r,j.substr(r,2)===yn?(P=yn,r+=2):(P=e,0===B&&s(Xi)),P===e&&(j.substr(r,2)===En?(P=En,r+=2):(P=e,0===B&&s(Mo))),P!==e){for(Q=[],v=J();v!==e;)Q.push(v),v=J();Q!==e?(v=le())!==e?y=P=[P,Q,v]:(r=y,y=e):(r=y,y=e)}else r=y,y=e;if(y===e&&(y=null),y!==e){for(P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(41===j.charCodeAt(r)?(Q=Bt,r++):(Q=e,0===B&&s(Nt)),Q!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();v!==e?o=F=0!=y.length?{token:"aliased_expression",expression:F,alias:y[2]}:F:(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e}else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e;if(o===e){for(o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if((y=le())!==e){for(v=[],F=J();F!==e;)v.push(F),F=J();v!==e?o=y:(r=o,o=e)}else r=o,o=e;else r=o,o=e}}}return B--,o===e&&0===B&&s(wi),o}function pe(){var o;return B++,o=vt(),B--,o===e&&0===B&&s(Ki),o}function V(){var o,F,y,v,P;if(B++,o=r,j.substr(r,3)===Hl?(F=Hl,r+=3):(F=e,0===B&&s(Bs)),F===e&&(j.substr(r,3)===Ps?(F=Ps,r+=3):(F=e,0===B&&s(ua)),F===e&&(j.substr(r,4)===Xl?(F=Xl,r+=4):(F=e,0===B&&s(Wl)),F===e&&(j.substr(r,4)===Qs?(F=Qs,r+=4):(F=e,0===B&&s(aa))))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if((v=Re())!==e){for(y=[],P=J();P!==e;)y.push(P),P=J();y!==e?(o=v,o=F={direction:F.toUpperCase(),expression:o}):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;if(o===e)if(o=r,(F=vt())===e&&(F=le()),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?("var"===F.token&&(F={token:"expression",expressionType:"atomic",primaryexpression:"var",value:F}),o=F={direction:"ASC",expression:F}):(r=o,o=e)}else r=o,o=e;return B--,o===e&&0===B&&s(Gl),o}function W(){var o,F,y,v;if(B++,o=r,j.substr(r,5)===Vi?(F=Vi,r+=5):(F=e,0===B&&s(Us)),F===e&&(j.substr(r,5)===Gs?(F=Gs,r+=5):(F=e,0===B&&s(un))),F!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if((F=Ot())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?o=F={limit:parseInt(F.value)}:(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(Sn),o}function ee(){var o,F,y,v;if(B++,o=r,j.substr(r,6)===Qo?(F=Qo,r+=6):(F=e,0===B&&s(fa)),F===e&&(j.substr(r,6)===Hs?(F=Hs,r+=6):(F=e,0===B&&s(ca))),F!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if((F=Ot())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?o=F={offset:parseInt(F.value)}:(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(Zn),o}function ge(){var o;return B++,(o=wt())===e&&((o=Xe())===e&&((o=et())===e&&((o=_t())===e&&(j.substr(r,5)===Yi?(o=Yi,r+=5):(o=e,0===B&&s(Xs)))))),B--,o===e&&0===B&&s(an),o}function Se(){var o,F,y,v,P,Q,K,de;if(B++,o=r,(F=G())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e){if(B++,B++,y=r,j.substr(r,4)===eo?(v=eo,r+=4):(v=e,0===B&&s(rn)),v===e&&(j.substr(r,4)===qs?(v=qs,r+=4):(v=e,0===B&&s(zs))),v!==e){for(P=[],v=J();v!==e;)P.push(v),v=J();if(P!==e)if((v=wt())!==e){for(Q=[],P=J();P!==e;)Q.push(P),P=J();if(Q!==e){if(P=r,j.substr(r,4)===Xo?(Q=Xo,r+=4):(Q=e,0===B&&s(Vl)),Q===e&&(j.substr(r,4)===Ks?(Q=Ks,r+=4):(Q=e,0===B&&s(Js))),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Qe())!==e?P=Q=[Q,K,de]:(r=P,P=e):(r=P,P=e)}else r=P,P=e;P===e&&(P=null),P!==e?(y=P,(P={kind:"load",token:"executableunit"}).sourceGraph=v,null!=y&&(P.destinyGraph=y[2]),y=P):(r=y,y=e)}else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;if(B--,y===e&&0===B&&s(Jl),(v=y)===e){if(B++,v=r,j.substr(r,5)===Yl?(y=Yl,r+=5):(y=e,0===B&&s(da)),y===e&&(j.substr(r,5)===jn?(y=jn,r+=5):(y=e,0===B&&s(Si))),y!==e){for(y=[],P=J();P!==e;)y.push(P),P=J();if(y!==e)if(j.substr(r,6)===nn?(P=nn,r+=6):(P=e,0===B&&s(to)),P===e&&(j.substr(r,6)===On?(P=On,r+=6):(P=e,0===B&&s(Wo))),P===e&&(P=null),P!==e){for(P=[],y=J();y!==e;)P.push(y),y=J();P!==e?(y=$e())!==e?(v={kind:"clear",token:"executableunit"}).destinyGraph=y:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e}else r=v,v=e;if(B--,v===e&&0===B&&s(pa),v===e){if(B++,v=r,j.substr(r,4)===Dn?(y=Dn,r+=4):(y=e,0===B&&s($n)),y===e&&(j.substr(r,4)===Tr?(y=Tr,r+=4):(y=e,0===B&&s(Rn))),y!==e){for(y=[],P=J();P!==e;)y.push(P),P=J();if(y!==e)if(j.substr(r,6)===nn?(P=nn,r+=6):(P=e,0===B&&s(to)),P===e&&(j.substr(r,6)===On?(P=On,r+=6):(P=e,0===B&&s(Wo))),P===e&&(P=null),P!==e){for(P=[],y=J();y!==e;)P.push(y),y=J();P!==e?(y=$e())!==e?(v={kind:"drop",token:"executableunit"}).destinyGraph=y:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e}else r=v,v=e;if(B--,v===e&&0===B&&s(Vs),v===e){if(B++,v=r,j.substr(r,6)===ro?(y=ro,r+=6):(y=e,0===B&&s(ga)),y===e&&(j.substr(r,6)===Ys?(y=Ys,r+=6):(y=e,0===B&&s(no))),y!==e){for(y=[],P=J();P!==e;)y.push(P),P=J();if(y!==e)if(j.substr(r,6)===nn?(P=nn,r+=6):(P=e,0===B&&s(to)),P===e&&(j.substr(r,6)===On?(P=On,r+=6):(P=e,0===B&&s(Wo))),P===e&&(P=null),P!==e){for(P=[],y=J();y!==e;)P.push(y),y=J();P!==e?(y=Qe())!==e?(v={kind:"create",token:"executableunit"}).destinyGraph=y:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e}else r=v,v=e;if(B--,v===e&&0===B&&s(Bn),v===e){if(B++,v=r,j.substr(r,6)===ki?(y=ki,r+=6):(y=e,0===B&&s(io)),y===e&&(j.substr(r,6)===qo?(y=qo,r+=6):(y=e,0===B&&s(zo))),y!==e){for(y=[],P=J();P!==e;)y.push(P),P=J();if(y!==e)if(j.substr(r,4)===oo?(P=oo,r+=4):(P=e,0===B&&s(Ko)),P===e&&(j.substr(r,4)===_i?(P=_i,r+=4):(P=e,0===B&&s(ei))),P!==e){for(P=[],y=J();y!==e;)P.push(y),y=J();P!==e?(y=se())!==e?(v={kind:"insertdata",token:"executableunit"}).quads=y:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e}else r=v,v=e;if(B--,v===e&&0===B&&s(Zl),v===e){if(B++,v=r,j.substr(r,6)===ti?(y=ti,r+=6):(y=e,0===B&&s(Fi)),y===e&&(j.substr(r,6)===Li?(y=Li,r+=6):(y=e,0===B&&s(Zs))),y!==e){for(y=[],P=J();P!==e;)y.push(P),P=J();y!==e?(j.substr(r,4)===oo?(P=oo,r+=4):(P=e,0===B&&s(Ko)),P===e&&(j.substr(r,4)===_i?(P=_i,r+=4):(P=e,0===B&&s(ei))),P!==e?(y=se())!==e?(v={kind:"deletedata",token:"executableunit"}).quads=y:(r=v,v=e):(r=v,v=e)):(r=v,v=e)}else r=v,v=e;if(B--,v===e&&0===B&&s(Jo),v===e){if(B++,v=r,j.substr(r,6)===ti?(y=ti,r+=6):(y=e,0===B&&s(Fi)),y===e&&(j.substr(r,6)===Li?(y=Li,r+=6):(y=e,0===B&&s(Zs))),y!==e){for(y=[],P=J();P!==e;)y.push(P),P=J();if(y!==e)if(j.substr(r,5)===In?(P=In,r+=5):(P=e,0===B&&s(mi)),P===e&&(j.substr(r,5)===wn?(P=wn,r+=5):(P=e,0===B&&s(Do))),P!==e){for(y=[],P=J();P!==e;)y.push(P),P=J();if(y!==e)if((P=Ze())!==e){for((v={kind:"modify"}).pattern=P,v.with=null,v.using=null,y=[],P=null==(P=P.patterns[0]).triplesContext&&null!=P.patterns?P.patterns[0].triplesContext:P.triplesContext,Q=0;Q<P.length;Q++)K={},de=P[Q],K.subject=de.subject,K.predicate=de.predicate,K.object=de.object,K.graph=de.graph,y.push(K);v.delete=y}else r=v,v=e;else r=v,v=e}else r=v,v=e;else r=v,v=e}else r=v,v=e;if(B--,v===e&&0===B&&s(va),v===e){var He;if(B++,P=y=r,j.substr(r,4)===Vo?(Q=Vo,r+=4):(Q=e,0===B&&s(Ai)),Q===e&&(j.substr(r,4)===Ei?(Q=Ei,r+=4):(Q=e,0===B&&s(ya))),Q!==e){for(v=[],K=J();K!==e;)v.push(K),K=J();v!==e?(K=wt())!==e?P=Q=[Q,v,K]:(r=P,P=e):(r=P,P=e)}else r=P,P=e;if(P===e&&(P=null),P!==e){for(Q=[],v=J();v!==e;)Q.push(v),v=J();if(Q!==e){if(v=r,B++,Q=r,j.substr(r,6)===ti?(K=ti,r+=6):(K=e,0===B&&s(Fi)),K===e&&(j.substr(r,6)===Li?(K=Li,r+=6):(K=e,0===B&&s(Zs))),K!==e?(K=ke())!==e?Q=K:(r=Q,Q=e):(r=Q,Q=e),B--,Q===e&&0===B&&s(Yo),(K=Q)!==e){for(Q=[],de=J();de!==e;)Q.push(de),de=J();Q!==e?((de=Le())===e&&(de=null),de!==e?v=K=[K,Q,de]:(r=v,v=e)):(r=v,v=e)}else r=v,v=e;if(v===e&&(v=Le()),v!==e){for(K=[],Q=J();Q!==e;)K.push(Q),Q=J();if(K!==e){for(Q=[],de=Ne();de!==e;)Q.push(de),de=Ne();if(Q!==e){for(de=[],K=J();K!==e;)de.push(K),K=J();if(de!==e)if(j.substr(r,5)===In?(K=In,r+=5):(K=e,0===B&&s(mi)),K===e&&(j.substr(r,5)===wn?(K=wn,r+=5):(K=e,0===B&&s(Do))),K!==e){for(de=[],K=J();K!==e;)de.push(K),K=J();if(de!==e)if((K=Ze())!==e){for(de=[],He=J();He!==e;)de.push(He),He=J();de!==e?(y=P,P=Q,(Q={kind:"modify"}).with=""!=y&&null!=y?y[2]:null,3!==v.length||""!==v[2]&&null!=v[2]?3===v.length&&null!=v[0].length&&null!=v[1].length&&null!=v[2].length?(Q.delete=v[0],Q.insert=v[2]):(Q.insert=v,Q.delete=null):(Q.delete=v[0],Q.insert=null),""!=P&&(Q.using=P),Q.pattern=K,y=Q):(r=y,y=e)}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e}else r=y,y=e}else r=y,y=e}else r=y,y=e}else r=y,y=e;B--,y===e&&0===B&&s($s),v=y}}}}}}}if(B--,v===e&&0===B&&s(Ho),v!==e){for(y=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(59===j.charCodeAt(r)?(Q=fn,r++):(Q=e,0===B&&s(tn)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?((de=Se())===e&&(de=null),de!==e?y=P=[P,Q,K,de]:(r=y,y=e)):(r=y,y=e)}else r=y,y=e;else r=y,y=e;y===e&&(y=null),y!==e?(o=y,(y={token:"query",kind:"update"}).prologue=F,F=[v],null!=o&&null!=o.length&&null!=o[3]&&null!=o[3].units&&(F=F.concat(o[3].units)),y.units=F,o=y):(r=o,o=e)}else r=o,o=e}else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(Kl),o}function Le(){var o,F;return B++,o=r,j.substr(r,6)===ki?(F=ki,r+=6):(F=e,0===B&&s(io)),F===e&&(j.substr(r,6)===qo?(F=qo,r+=6):(F=e,0===B&&s(zo))),F!==e?(F=ke())!==e?o=F:(r=o,o=e):(r=o,o=e),B--,o===e&&0===B&&s($l),o}function Ne(){var o,F,y,v,P;for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(j.substr(r,5)===el?(y=el,r+=5):(y=e,0===B&&s(ri)),y===e&&(j.substr(r,5)===Ti?(y=Ti,r+=5):(y=e,0===B&&s(ni))),y!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e){if((F=wt())===e)if(F=r,j.substr(r,5)===Nn?(y=Nn,r+=5):(y=e,0===B&&s(Mn)),y===e&&(j.substr(r,5)===xi?(y=xi,r+=5):(y=e,0===B&&s(Rs))),y!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();v!==e?(P=wt())!==e?F=y=[y,v,P]:(r=F,F=e):(r=F,F=e)}else r=F,F=e;F!==e?o=F=null!=F.length?{kind:"named",uri:F[2]}:{kind:"default",uri:F}:(r=o,o=e)}else r=o,o=e}else r=o,o=e;else r=o,o=e;return B--,o===e&&0===B&&s(so),o}function Qe(){var o,F,y;if(B++,o=r,j.substr(r,5)===on?(F=on,r+=5):(F=e,0===B&&s(Zo)),F===e&&(j.substr(r,5)===ii?(F=ii,r+=5):(F=e,0===B&&s($o))),F!==e){for(F=[],y=J();y!==e;)F.push(y),y=J();F!==e?(y=wt())!==e?o=y:(r=o,o=e):(r=o,o=e)}else r=o,o=e;return B--,o===e&&0===B&&s(lo),o}function $e(){var o;return B++,(o=Qe())===e&&(j.substr(r,7)===Pn?(o=Pn,r+=7):(o=e,0===B&&s(oi)),o===e&&(j.substr(r,7)===eu?(o=eu,r+=7):(o=e,0===B&&s(xa))),o!==e&&(o="default"),o===e&&(j.substr(r,5)===Nn?(o=Nn,r+=5):(o=e,0===B&&s(Mn)),o===e&&(j.substr(r,5)===xi?(o=xi,r+=5):(o=e,0===B&&s(Rs))),o!==e&&(o="named"),o===e&&(j.substr(r,3)===tu?(o=tu,r+=3):(o=e,0===B&&s(wa)),o===e&&(j.substr(r,3)===ru?(o=ru,r+=3):(o=e,0===B&&s(Ca))),o!==e&&(o="all")))),B--,o===e&&0===B&&s(ma),o}function ke(){var o,F,y,v;for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(123===j.charCodeAt(r)?(y=Kr,r++):(y=e,0===B&&s(Jr)),y!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if((F=me())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(125===j.charCodeAt(r)?(v=br,r++):(v=e,0===B&&s(Sr)),v!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?o=F=F.quadsContext:(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e;return B--,o===e&&0===B&&s(Ur),o}function se(){var o,F,y,v;for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(123===j.charCodeAt(r)?(y=Kr,r++):(y=e,0===B&&s(Jr)),y!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if((F=me())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(125===j.charCodeAt(r)?(v=br,r++):(v=e,0===B&&s(Sr)),v!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?o=F=F.quadsContext:(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e;return B--,o===e&&0===B&&s(vr),o}function me(){var o,F,y,v,P,Q,K;if(B++,o=r,(F=qe())===e&&(F=null),F!==e){for(y=[],v=r,(P=_e())!==e?(46===j.charCodeAt(r)?(Q=Ut,r++):(Q=e,0===B&&s(ur)),Q===e&&(Q=null),Q!==e?((K=qe())===e&&(K=null),K!==e?v=P=[P,Q,K]:(r=v,v=e)):(r=v,v=e)):(r=v,v=e);v!==e;)y.push(v),v=r,(P=_e())!==e?(46===j.charCodeAt(r)?(Q=Ut,r++):(Q=e,0===B&&s(ur)),Q===e&&(Q=null),Q!==e?((K=qe())===e&&(K=null),K!==e?v=P=[P,Q,K]:(r=v,v=e)):(r=v,v=e)):(r=v,v=e);if(y!==e){if(o=F,F=[],null!=o&&null!=o.triplesContext)for(v=0;v<o.triplesContext.length;v++)(P=o.triplesContext[v]).graph=null,F.push(P);if(y&&0<y.length&&0<y[0].length&&(F=F.concat(y[0][0].quadsContext),null!=y[0][2]&&null!=y[0][2].triplesContext))for(v=0;v<y[0][2].triplesContext.length;v++)(P=y[0][2].triplesContext[v]).graph=null,F.push(P);o=F={token:"quads",quadsContext:F}}else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(Ir),o}function _e(){var o,F,y,v,P;for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(j.substr(r,5)===on?(y=on,r+=5):(y=e,0===B&&s(Zo)),y===e&&(j.substr(r,5)===ii?(y=ii,r+=5):(y=e,0===B&&s($o))),y!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if((F=ue())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(123===j.charCodeAt(r)?(v=Kr,r++):(v=e,0===B&&s(Jr)),v!==e){for(v=[],y=J();y!==e;)v.push(y),y=J();if(v!==e)if((y=qe())===e&&(y=null),y!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if(125===j.charCodeAt(r)?(P=br,r++):(P=e,0===B&&s(Sr)),P!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e){if(o=F,F=y,y=[],null!=F)for(v=0;v<F.triplesContext.length;v++)(P=F.triplesContext[v]).graph=o,y.push(P);o=F={token:"quadsnottriples",quadsContext:y}}else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e;return B--,o===e&&0===B&&s(ba),o}function qe(){var o,F,y,v,P,Q,K;if(B++,o=r,(F=Lt())!==e){for(y=r,v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if(46===j.charCodeAt(r)?(P=Ut,r++):(P=e,0===B&&s(ur)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?((K=qe())===e&&(K=null),K!==e?y=v=[v,P,Q,K]:(r=y,y=e)):(r=y,y=e)}else r=y,y=e;else r=y,y=e;y===e&&(y=null),y!==e?(o=F.triplesContext,null!=y&&"object"==typeof y&&null!=y.length&&null!=y[3]&&null!=y[3].triplesContext&&(o=o.concat(y[3].triplesContext)),o=F={token:"triplestemplate",triplesContext:o}):(r=o,o=e)}else r=o,o=e;return B--,o===e&&0===B&&s(es),o}function Ze(){var o,F,y,v;if(B++,o=r,123===j.charCodeAt(r)?(F=Kr,r++):(F=e,0===B&&s(Jr)),F!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();var P;if(y!==e)if(B++,v=r,(P=X())!==e?(F=re())!==e?(y=oe())!==e?(v=P,(P={kind:"select",token:"subselect"}).projection=v.vars,P.modifier=v.modifier,P.pattern=F,null!=y&&null!=y.limit&&(P.limit=y.limit),null!=y&&null!=y.offset&&(P.offset=y.offset),null!=y&&null!=y.order&&""!=y.order&&(P.order=y.order),null!=y&&null!=y.group&&(P.group=y.group),v=P):(r=v,v=e):(r=v,v=e):(r=v,v=e),B--,v===e&&0===B&&s(Io),(F=v)!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?(125===j.charCodeAt(r)?(v=br,r++):(v=e,0===B&&s(Sr)),v!==e?o=F:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;if(o===e)if(o=r,123===j.charCodeAt(r)?(F=Kr,r++):(F=e,0===B&&s(Jr)),F!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e){var Q,K,de,He,Ye;if(B++,y=r,(F=st())===e&&(F=null),F!==e){for(P=[],v=J();v!==e;)P.push(v),v=J();if(P!==e){if(v=[],P=r,(Q=yt())!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();if(K!==e)if(46===j.charCodeAt(r)?(de=Ut,r++):(de=e,0===B&&s(ur)),de===e&&(de=null),de!==e){for(He=[],Ye=J();Ye!==e;)He.push(Ye),Ye=J();He!==e?((Ye=st())===e&&(Ye=null),Ye!==e?P=Q=[Q,K,de,He,Ye]:(r=P,P=e)):(r=P,P=e)}else r=P,P=e;else r=P,P=e}else r=P,P=e;for(;P!==e;)if(v.push(P),P=r,(Q=yt())!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();if(K!==e)if(46===j.charCodeAt(r)?(de=Ut,r++):(de=e,0===B&&s(ur)),de===e&&(de=null),de!==e){for(He=[],Ye=J();Ye!==e;)He.push(Ye),Ye=J();He!==e?((Ye=st())===e&&(Ye=null),Ye!==e?P=Q=[Q,K,de,He,Ye]:(r=P,P=e)):(r=P,P=e)}else r=P,P=e;else r=P,P=e}else r=P,P=e;if(v!==e){for(P=v,y=[],null!=F&&F!=[]&&y.push(F),F=0;F<P.length;F++)for(v=0;v<P[F].length;v++)null!=P[F][v]&&null!=P[F][v].token&&y.push(P[F][v]);for(P=[],Q=[],K=[],de=[],F=0;F<y.length;F++)if("triplespattern"!==y[F].token&&"filter"!==y[F].token&&"bind"!==y[F].token){if(0!=Q.length||0!=K.length){for(He=[],v=0;v<Q.length;v++)He=He.concat(Q[v].triplesContext);0<He.length&&P.push({token:"basicgraphpattern",triplesContext:He}),Q=[]}P.push(y[F])}else"triplespattern"===y[F].token?Q.push(y[F]):"bind"===y[F].token?de.push(y[F]):K.push(y[F]);if(0!=Q.length||0!=K.length){for(He=[],v=0;v<Q.length;v++)He=He.concat(Q[v].triplesContext);0<He.length&&P.push({token:"basicgraphpattern",triplesContext:He})}y=F={token:"groupgraphpattern",patterns:P,filters:K,binds:de}}else r=y,y=e}else r=y,y=e}else r=y,y=e;if(B--,y===e&&0===B&&s(ka),(F=y)!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?(125===j.charCodeAt(r)?(v=br,r++):(v=e,0===B&&s(Sr)),v!==e?o=F:(r=o,o=e)):(r=o,o=e)}else r=o,o=e}else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(Sa),o}function st(){var o,F,y,v,P,Q;for(B++,o=r,B++,y=r,v=[],F=J();F!==e;)v.push(F),F=J();if(v!==e)if((F=q())!==e){for(P=[],v=J();v!==e;)P.push(v),v=J();if(P!==e)if((v=hr())!==e){if(y=F,F=v.triplesContext,v.pairs)for(P=0;P<v.pairs.length;P++){var K=null;null!=(Q=v.pairs[P])[1].length&&(Q[1]=Q[1][0]),y.token&&"triplesnodecollection"===y.token?("path"===(K={subject:y.chainSubject[0],predicate:Q[0],object:Q[1]}).predicate.token&&"element"===K.predicate.kind&&(K.predicate=K.predicate.value),F.push(K),F=F.concat(y.triplesContext)):("path"===(K={subject:y,predicate:Q[0],object:Q[1]}).predicate.token&&"element"===K.predicate.kind&&(K.predicate=K.predicate.value),F.push(K))}(v={token:"triplessamesubject"}).triplesContext=F,v.chainSubject=y,y=v}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e;if(y===e){for(y=r,v=[],F=J();F!==e;)v.push(F),F=J();if(v!==e)if((F=je())!==e){for(P=[],v=J();v!==e;)P.push(v),v=J();if(P!==e){var de,He,Ye,ut,ct,Ct,Gt,Ht;if(B++,B++,Q=r,(K=$t())===e&&(K=Fr()),K!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if((P=Tt())!==e){for(v=[],de=r,He=[],Ye=J();Ye!==e;)He.push(Ye),Ye=J();if(He!==e)if(59===j.charCodeAt(r)?(Ye=fn,r++):(Ye=e,0===B&&s(tn)),Ye!==e){for(ut=[],ct=J();ct!==e;)ut.push(ct),ct=J();if(ut!==e){if(ct=r,(Ct=$t())===e&&(Ct=Fr()),Ct!==e){for(Gt=[],Ht=J();Ht!==e;)Gt.push(Ht),Ht=J();Gt!==e?(Ht=Wt())!==e?ct=Ct=[Ct,Gt,Ht]:(r=ct,ct=e):(r=ct,ct=e)}else r=ct,ct=e;ct===e&&(ct=null),ct!==e?de=He=[He,Ye,ut,ct]:(r=de,de=e)}else r=de,de=e}else r=de,de=e;else r=de,de=e;for(;de!==e;){for(v.push(de),de=r,He=[],Ye=J();Ye!==e;)He.push(Ye),Ye=J();if(He!==e)if(59===j.charCodeAt(r)?(Ye=fn,r++):(Ye=e,0===B&&s(tn)),Ye!==e){for(ut=[],ct=J();ct!==e;)ut.push(ct),ct=J();if(ut!==e){if(ct=r,(Ct=$t())===e&&(Ct=Fr()),Ct!==e){for(Gt=[],Ht=J();Ht!==e;)Gt.push(Ht),Ht=J();Gt!==e?(Ht=Wt())!==e?ct=Ct=[Ct,Gt,Ht]:(r=ct,ct=e):(r=ct,ct=e)}else r=ct,ct=e;ct===e&&(ct=null),ct!==e?de=He=[He,Ye,ut,ct]:(r=de,de=e)}else r=de,de=e}else r=de,de=e;else r=de,de=e}if(v!==e){for(He=K,Ye=P,P={token:"propertylist"},Q=[],K=[],de=0;de<Ye.length;de++)null!=Ye[de].triplesContext?(Q=Q.concat(Ye[de].triplesContext),"triplesnodecollection"===Ye[de].token&&null!=Ye[de].chainSubject.length?K.push([He,Ye[de].chainSubject[0]]):K.push([He,Ye[de].chainSubject])):K.push([He,Ye[de]]);for(de=0;de<v.length;de++)for(He=(Ye=v[de][3])[0],Ye=Ye[2]||[],ut=0;ut<Ye.length;ut++)null!=Ye[ut].triplesContext?(Q=Q.concat(Ye[ut].triplesContext),K.push([He,Ye[ut].chainSubject])):K.push([He,Ye[ut]]);P.pairs=K,P.triplesContext=Q,Q=P}else r=Q,Q=e}else r=Q,Q=e;else r=Q,Q=e}else r=Q,Q=e;if(B--,Q===e&&0===B&&s(Ma),(v=Q)===e&&(v=null),B--,v===e&&0===B&&s(xu),v!==e){if(P=v,F=(y=F).triplesContext,v=y.chainSubject,null!=P&&null!=P.pairs)for(Q=0;Q<P.pairs.length;Q++)if(null!=(K=P.pairs[Q])[1].length&&(K[1]=K[1][0]),"triplesnodecollection"===y.token)for(de=0;de<v.length;de++)null!=(He=v[de]).triplesContext?(Ye={subject:He.chainSubject,predicate:K[0],object:K[1]},F.concat(He.triplesContext)):(Ye={subject:v[de],predicate:K[0],object:K[1]},F.push(Ye));else Ye={subject:v,predicate:K[0],object:K[1]},F.push(Ye);(y={token:"triplessamesubject"}).triplesContext=F,y.chainSubject=v}else r=y,y=e}else r=y,y=e}else r=y,y=e;else r=y,y=e}if(B--,y===e&&0===B&&s(cs),(F=y)!==e){for(y=r,v=[],P=J();P!==e;)v.push(P),P=J();v!==e?(46===j.charCodeAt(r)?(P=Ut,r++):(P=e,0===B&&s(ur)),P!==e?((Q=st())===e&&(Q=null),Q!==e?y=v=[v,P,Q]:(r=y,y=e)):(r=y,y=e)):(r=y,y=e),y===e&&(y=null),y!==e?(o=F.triplesContext,null!=y&&"object"==typeof y&&null!=y&&null!=y.length&&null!=y[2]&&null!=y[2].triplesContext&&(o=o.concat(y[2].triplesContext)),o=F={token:"triplespattern",triplesContext:o}):(r=o,o=e)}else r=o,o=e;return B--,o===e&&0===B&&s(_a),o}function yt(){var o,F,y,v,P,Q,K,de;if(B++,B++,F=r,(y=Ze())!==e){for(o=[],v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(j.substr(r,5)===ao?(Q=ao,r+=5):(Q=e,0===B&&s(Gr)),Q===e&&(j.substr(r,5)===Qt?(Q=Qt,r+=5):(Q=e,0===B&&s(Yr))),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Ze())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;for(;v!==e;){for(o.push(v),v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(j.substr(r,5)===ao?(Q=ao,r+=5):(Q=e,0===B&&s(Gr)),Q===e&&(j.substr(r,5)===Qt?(Q=Qt,r+=5):(Q=e,0===B&&s(Yr))),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Ze())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e}if(o!==e){if(0!==o.length){for(F={token:"graphunionpattern",value:[y]},y=0;y<o.length;y++)y==o.length-1?F.value.push(o[y][3]):(F.value.push(o[y][3]),F={token:"graphunionpattern",value:[F]});y=F}F=y}else r=F,F=e}else r=F,F=e;if(B--,F===e&&0===B&&s(La),(o=F)===e){for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(j.substr(r,8)===ts?(y=ts,r+=8):(y=e,0===B&&s(Fa)),y===e&&(j.substr(r,8)===rs?(y=rs,r+=8):(y=e,0===B&&s(rl))),y!==e){for(F=[],y=J();y!==e;)F.push(y),y=J();F!==e?(y=Ze())!==e?o=F={token:"optionalgraphpattern",value:y}:(r=o,o=e):(r=o,o=e)}else r=o,o=e;else r=o,o=e;if(B--,o===e&&0===B&&s(nu),o===e){if(B++,o=r,j.substr(r,5)===lu?(F=lu,r+=5):(F=e,0===B&&s(is)),F===e&&(j.substr(r,5)===cn?(F=cn,r+=5):(F=e,0===B&&s(uu))),F!==e){for(F=[],y=J();y!==e;)F.push(y),y=J();F!==e?(y=Ze())!==e?o=F={token:"minusgraphpattern",status:"todo",value:y}:(r=o,o=e):(r=o,o=e)}else r=o,o=e;if(B--,o===e&&0===B&&s(uo),o===e){for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(j.substr(r,5)===on?(y=on,r+=5):(y=e,0===B&&s(Zo)),y===e&&(j.substr(r,5)===ii?(y=ii,r+=5):(y=e,0===B&&s($o))),y!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if((F=ue())!==e){for(v=[],y=J();y!==e;)v.push(y),y=J();if(v!==e)if((y=Ze())!==e){for(o=F,F=y,y=0;y<F.patterns.length;y++)for(v=F.patterns[y],P=0;P<v.triplesContext.length;P++)v.triplesContext[P].graph=o;F.token="groupgraphpattern",o=F}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e;if(B--,o===e&&0===B&&s(iu),o===e&&(B++,o=r,j.substr(r,7)===ns?(F=ns,r+=7):(F=e,0===B&&s(su)),F!==e?(F=ue())!==e?(y=Ze())!==e?o=F={token:"servicegraphpattern",status:"todo",value:[F,y]}:(r=o,o=e):(r=o,o=e):(r=o,o=e),B--,o===e&&0===B&&s(ou),o===e)){for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(j.substr(r,6)===kn?(y=kn,r+=6):(y=e,0===B&&s(au)),y===e&&(j.substr(r,6)===os?(y=os,r+=6):(y=e,0===B&&s(fu))),y!==e){for(F=[],y=J();y!==e;)F.push(y),y=J();F!==e?(y=vt())!==e?o=F={token:"filter",value:y}:(r=o,o=e):(r=o,o=e)}else r=o,o=e;else r=o,o=e;if(B--,o===e&&0===B&&s(Qn),o===e){for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(j.substr(r,4)===ss?(y=ss,r+=4):(y=e,0===B&&s(fo)),y===e&&(j.substr(r,4)===nl?(y=nl,r+=4):(y=e,0===B&&s(il))),y!==e){for(F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(40===j.charCodeAt(r)?(y=Dt,r++):(y=e,0===B&&s(Rt)),y!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if((F=Z())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(j.substr(r,2)===En?(v=En,r+=2):(v=e,0===B&&s(Mo)),v===e&&(j.substr(r,2)===yn?(v=yn,r+=2):(v=e,0===B&&s(Xi))),v!==e){for(v=[],y=J();y!==e;)v.push(y),y=J();if(v!==e)if((y=le())!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();v!==e?(41===j.charCodeAt(r)?(P=Bt,r++):(P=e,0===B&&s(Nt)),P!==e?o=F={token:"bind",expression:F,as:y}:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e;if(B--,o===e&&0===B&&s(Aa),o===e){for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(j.substr(r,6)===Go?(y=Go,r+=6):(y=e,0===B&&s(zl)),y===e&&(j.substr(r,6)===Zi?(y=Zi,r+=6):(y=e,0===B&&s(Ws))),y!==e){for(F=[],y=J();y!==e;)F.push(y),y=J();F!==e?(y=Kt())!==e?o=y:(r=o,o=e):(r=o,o=e)}else r=o,o=e;else r=o,o=e;B--,o===e&&0===B&&s(cu)}}}}}}return B--,o===e&&0===B&&s(tl),o}function vt(){var o;return B++,(o=Re())===e&&((o=Oe())===e&&(o=tt())),B--,o===e&&0===B&&s(Un),o}function Kt(){var o,F,y,v;for(B++,B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if((y=le())!==e){for(F=[],v=J();v!==e;)F.push(v),v=J();if(F!==e)if(123===j.charCodeAt(r)?(v=Kr,r++):(v=e,0===B&&s(Jr)),v!==e){for(v=[],F=J();F!==e;)v.push(F),F=J();if(v!==e){for(F=[],v=Mt();v!==e;)F.push(v),v=Mt();F!==e?(125===j.charCodeAt(r)?(v=br,r++):(v=e,0===B&&s(Sr)),v!==e?o=F={token:"inlineData",values:[{var:y,value:F}]}:(r=o,o=e)):(r=o,o=e)}else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e;if(B--,o===e&&0===B&&s(Ea),o===e){var P,Q,K,de,He,Ye,ut;for(B++,o=r,y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e){if((v=Ar())===e)if(v=r,40===j.charCodeAt(r)?(P=Dt,r++):(P=e,0===B&&s(Rt)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e){for(K=[],y=le();y!==e;)K.push(y),y=le();if(K!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();y!==e?(41===j.charCodeAt(r)?(F=Bt,r++):(F=e,0===B&&s(Nt)),F!==e?v=P=[P,Q,K,y,F]:(r=v,v=e)):(r=v,v=e)}else r=v,v=e}else r=v,v=e}else r=v,v=e;if(v!==e){for(P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(123===j.charCodeAt(r)?(Q=Kr,r++):(Q=e,0===B&&s(Jr)),Q!==e){for(K=[],y=J();y!==e;)K.push(y),y=J();if(K!==e){for(y=[],F=r,v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if(40===j.charCodeAt(r)?(P=Dt,r++):(P=e,0===B&&s(Rt)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e){for(K=[],de=Mt();de!==e;)K.push(de),de=Mt();if(K!==e){for(de=[],He=J();He!==e;)de.push(He),He=J();if(de!==e)if(41===j.charCodeAt(r)?(He=Bt,r++):(He=e,0===B&&s(Nt)),He!==e){for(Ye=[],ut=J();ut!==e;)Ye.push(ut),ut=J();Ye!==e?F=v=[v,P,Q,K,de,He,Ye]:(r=F,F=e)}else r=F,F=e;else r=F,F=e}else r=F,F=e}else r=F,F=e}else r=F,F=e;else r=F,F=e;for(F===e&&(F=Ar());F!==e;){for(y.push(F),F=r,v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if(40===j.charCodeAt(r)?(P=Dt,r++):(P=e,0===B&&s(Rt)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e){for(K=[],de=Mt();de!==e;)K.push(de),de=Mt();if(K!==e){for(de=[],He=J();He!==e;)de.push(He),He=J();if(de!==e)if(41===j.charCodeAt(r)?(He=Bt,r++):(He=e,0===B&&s(Nt)),He!==e){for(Ye=[],ut=J();ut!==e;)Ye.push(ut),ut=J();Ye!==e?F=v=[v,P,Q,K,de,He,Ye]:(r=F,F=e)}else r=F,F=e;else r=F,F=e}else r=F,F=e}else r=F,F=e}else r=F,F=e;else r=F,F=e;F===e&&(F=Ar())}if(y!==e){for(F=[],v=J();v!==e;)F.push(v),v=J();F!==e?(125===j.charCodeAt(r)?(v=br,r++):(v=e,0===B&&s(Sr)),v!==e?o=y={token:"inlineData",values:[],todo:!0}:(r=o,o=e)):(r=o,o=e)}else r=o,o=e}else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e}else r=o,o=e;B--,o===e&&0===B&&s(ls)}return B--,o===e&&0===B&&s(hu),o}function Mt(){var o,F,y,v;for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if((y=At())===e&&((y=Xe())===e&&((y=et())===e&&((y=_t())===e&&(j.substr(r,5)===Yi?(y=Yi,r+=5):(y=e,0===B&&s(Xs)))))),y!==e){for(F=[],v=J();v!==e;)F.push(v),v=J();F!==e?o=y:(r=o,o=e)}else r=o,o=e;else r=o,o=e;return B--,o===e&&0===B&&s(ol),o}function tt(){var o,F,y,v;if(B++,o=r,(F=wt())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?(v=ot())!==e?((o={token:"expression",expressionType:"irireforfunction"}).iriref=F,o.args=v.value):(r=o,o=e):(r=o,o=e)}else r=o,o=e;return B--,o===e&&0===B&&s(pu),o}function ot(){var o,F,y,v,P,Q,K,de;if(B++,(F=Ar())!==e&&(F={token:"args",value:[]}),(o=F)===e)if(o=r,40===j.charCodeAt(r)?(F=Dt,r++):(F=e,0===B&&s(Rt)),F!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if(j.substr(r,8)===dr?(F=dr,r+=8):(F=e,0===B&&s(wr)),F===e&&(j.substr(r,8)===Cr?(F=Cr,r+=8):(F=e,0===B&&s(vn))),F===e&&(F=null),F!==e){for(v=[],y=J();y!==e;)v.push(y),y=J();if(v!==e)if((y=Z())!==e){for(P=[],v=J();v!==e;)P.push(v),v=J();if(P!==e){if(v=[],P=r,44===j.charCodeAt(r)?(Q=ar,r++):(Q=e,0===B&&s(yr)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Z())!==e?P=Q=[Q,K,de]:(r=P,P=e):(r=P,P=e)}else r=P,P=e;for(;P!==e;)if(v.push(P),P=r,44===j.charCodeAt(r)?(Q=ar,r++):(Q=e,0===B&&s(yr)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Z())!==e?P=Q=[Q,K,de]:(r=P,P=e):(r=P,P=e)}else r=P,P=e;if(v!==e)if(41===j.charCodeAt(r)?(P=Bt,r++):(P=e,0===B&&s(Nt)),P!==e){for(o=F,F=y,y=[],P=0;P<v.length;P++)y.push(v[P][2]);(v={token:"args"}).value=[F].concat(y),null!=o&&"DISTINCT"===o.toUpperCase()?v.distinct=!0:v.distinct=!1,o=v}else r=o,o=e;else r=o,o=e}else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(Ta),o}function dt(){var o,F,y,v,P,Q,K;if(B++,(F=Ar())!==e&&(F={token:"args",value:[]}),(o=F)===e)if(o=r,40===j.charCodeAt(r)?(F=Dt,r++):(F=e,0===B&&s(Rt)),F!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if((F=wt())===e&&(F=Z()),F!==e){for(v=[],y=J();y!==e;)v.push(y),y=J();if(v!==e){if(y=[],v=r,44===j.charCodeAt(r)?(P=ar,r++):(P=e,0===B&&s(yr)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?((K=wt())===e&&(K=Z()),K!==e?v=P=[P,Q,K]:(r=v,v=e)):(r=v,v=e)}else r=v,v=e;for(;v!==e;)if(y.push(v),v=r,44===j.charCodeAt(r)?(P=ar,r++):(P=e,0===B&&s(yr)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?((K=wt())===e&&(K=Z()),K!==e?v=P=[P,Q,K]:(r=v,v=e)):(r=v,v=e)}else r=v,v=e;if(y!==e)if(41===j.charCodeAt(r)?(v=Bt,r++):(v=e,0===B&&s(Nt)),v!==e){for(o=F,F=[],v=0;v<y.length;v++)F.push(y[v][2]);(y={token:"args"}).value=[o].concat(F),o=y}else r=o,o=e;else r=o,o=e}else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(Ia),o}function ht(){var o,F,y,v,P,Q,K;if(B++,o=r,(F=Lt())!==e){for(y=r,v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if(46===j.charCodeAt(r)?(P=Ut,r++):(P=e,0===B&&s(ur)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?((K=ht())===e&&(K=null),K!==e?y=v=[v,P,Q,K]:(r=y,y=e)):(r=y,y=e)}else r=y,y=e;else r=y,y=e;y===e&&(y=null),y!==e?(o=F.triplesContext,null!=y&&"object"==typeof y&&null!=y.length&&null!=y[3]&&null!=y[3].triplesContext&&(o=o.concat(y[3].triplesContext)),o=F={token:"triplestemplate",triplesContext:o}):(r=o,o=e)}else r=o,o=e;return B--,o===e&&0===B&&s(du),o}function Lt(){var o,F,y,v;for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if((y=q())!==e){for(v=[],F=J();F!==e;)v.push(F),F=J();if(v!==e)if((F=xt())!==e){if(o=F.triplesContext,F.pairs)for(v=0;v<F.pairs.length;v++){var P=F.pairs[v],Q=null;null!=P[1].length&&(P[1]=P[1][0]),y.token&&"triplesnodecollection"===y.token?(Q={subject:y.chainSubject[0],predicate:P[0],object:P[1]},o.push(Q),o=o.concat(y.triplesContext)):(Q={subject:y,predicate:P[0],object:P[1]},o.push(Q))}(F={token:"triplessamesubject"}).triplesContext=o,F.chainSubject=y,o=F}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e;if(o===e){for(o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if((y=Ge())!==e){for(v=[],F=J();F!==e;)v.push(F),F=J();if(v!==e)if(B++,(F=xt())===e&&(F=null),B--,F===e&&0===B&&s(Ii),F!==e){if(v=F,o=y.triplesContext,F=y.chainSubject,v.pairs)for(P=0;P<v.pairs.length;P++)if(null!=(Q=v.pairs[P])[1].length&&(Q[1]=Q[1][0]),"triplesnodecollection"===y.token)for(var K=0;K<F.length;K++){var de=F[K];if(null!=de.triplesContext){var He={subject:de.chainSubject,predicate:Q[0],object:Q[1]};o.concat(de.triplesContext)}else He={subject:F[K],predicate:Q[0],object:Q[1]},o.push(He)}else He={subject:F,predicate:Q[0],object:Q[1]},o.push(He);(y={token:"triplessamesubject"}).triplesContext=o,y.chainSubject=F,o=y}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}return B--,o===e&&0===B&&s(Na),o}function xt(){var o,F,y,v,P,Q,K,de,He,Ye,ut,ct;if(B++,o=r,(F=Wr())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if((v=Wt())!==e){for(y=[],P=r,Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e)if(59===j.charCodeAt(r)?(K=fn,r++):(K=e,0===B&&s(tn)),K!==e){for(de=[],He=J();He!==e;)de.push(He),He=J();if(de!==e){if(He=r,(Ye=Wr())!==e){for(ut=[],ct=J();ct!==e;)ut.push(ct),ct=J();ut!==e?(ct=Wt())!==e?He=Ye=[Ye,ut,ct]:(r=He,He=e):(r=He,He=e)}else r=He,He=e;He===e&&(He=null),He!==e?P=Q=[Q,K,de,He]:(r=P,P=e)}else r=P,P=e}else r=P,P=e;else r=P,P=e;for(;P!==e;){for(y.push(P),P=r,Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e)if(59===j.charCodeAt(r)?(K=fn,r++):(K=e,0===B&&s(tn)),K!==e){for(de=[],He=J();He!==e;)de.push(He),He=J();if(de!==e){if(He=r,(Ye=Wr())!==e){for(ut=[],ct=J();ct!==e;)ut.push(ct),ct=J();ut!==e?(ct=Wt())!==e?He=Ye=[Ye,ut,ct]:(r=He,He=e):(r=He,He=e)}else r=He,He=e;He===e&&(He=null),He!==e?P=Q=[Q,K,de,He]:(r=P,P=e)}else r=P,P=e}else r=P,P=e;else r=P,P=e}if(y!==e){for(Q=F,K=v,v={token:"propertylist"},o=[],F=[],P=0;P<K.length;P++)null!=K[P].triplesContext?(o=o.concat(K[P].triplesContext),"triplesnodecollection"===K[P].token&&null!=K[P].chainSubject.length?F.push([Q,K[P].chainSubject[0]]):F.push([Q,K[P].chainSubject])):F.push([Q,K[P]]);for(P=0;P<y.length;P++)for(Q=(K=y[P][3])[0],K=K[2]||[],de=0;de<K.length;de++)null!=K[de].triplesContext?(o=o.concat(K[de].triplesContext),F.push([Q,K[de].chainSubject])):F.push([Q,K[de]]);v.pairs=F,v.triplesContext=o,o=v}else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(gu),o}function Tt(){var o,F,y,v,P,Q,K;if(B++,o=r,(F=St())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e){if(v=[],y=r,44===j.charCodeAt(r)?(P=ar,r++):(P=e,0===B&&s(yr)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?(K=St())!==e?y=P=[P,Q,K]:(r=y,y=e):(r=y,y=e)}else r=y,y=e;for(;y!==e;)if(v.push(y),y=r,44===j.charCodeAt(r)?(P=ar,r++):(P=e,0===B&&s(yr)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?(K=St())!==e?y=P=[P,Q,K]:(r=y,y=e):(r=y,y=e)}else r=y,y=e;if(v!==e){for(o=v,(v=[]).push(F),F=0;F<o.length;F++)for(y=0;y<o[F].length;y++)"object"==typeof o[F][y]&&null!=o[F][y].token&&v.push(o[F][y]);o=v}else r=o,o=e}else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(sl),o}function Wt(){var o,F,y,v,P,Q,K;if(B++,o=r,(F=_r())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e){if(v=[],y=r,44===j.charCodeAt(r)?(P=ar,r++):(P=e,0===B&&s(yr)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?(K=_r())!==e?y=P=[P,Q,K]:(r=y,y=e):(r=y,y=e)}else r=y,y=e;for(;y!==e;)if(v.push(y),y=r,44===j.charCodeAt(r)?(P=ar,r++):(P=e,0===B&&s(yr)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?(K=_r())!==e?y=P=[P,Q,K]:(r=y,y=e):(r=y,y=e)}else r=y,y=e;if(v!==e){for(o=v,(v=[]).push(F),F=0;F<o.length;F++)for(y=0;y<o[F].length;y++)"object"==typeof o[F][y]&&null!=o[F][y].token&&v.push(o[F][y]);o=v}else r=o,o=e}else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(as),o}function St(){var o;return B++,o=H(),B--,o===e&&0===B&&s(vu),o}function _r(){var o;return B++,o=z(),B--,o===e&&0===B&&s(ll),o}function Wr(){var o;return B++,(o=ue())===e&&(97===j.charCodeAt(r)?(o=fs,r++):(o=e,0===B&&s(co)),o!==e&&(o=xr())),B--,o===e&&0===B&&s(yu),o}function hr(){var o,F,y,v,P,Q,K,de,He,Ye,ut;if(B++,o=r,(F=$t())===e&&(F=Fr()),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if((v=Tt())!==e){for(y=[],P=r,Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e)if(59===j.charCodeAt(r)?(K=fn,r++):(K=e,0===B&&s(tn)),K!==e){for(de=[],He=J();He!==e;)de.push(He),He=J();de!==e?(He=r,(Ye=$t())===e&&(Ye=Fr()),Ye!==e?(ut=Wt())!==e?He=Ye=[Ye,ut]:(r=He,He=e):(r=He,He=e),He===e&&(He=null),He!==e?P=Q=[Q,K,de,He]:(r=P,P=e)):(r=P,P=e)}else r=P,P=e;else r=P,P=e;for(;P!==e;){for(y.push(P),P=r,Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e)if(59===j.charCodeAt(r)?(K=fn,r++):(K=e,0===B&&s(tn)),K!==e){for(de=[],He=J();He!==e;)de.push(He),He=J();de!==e?(He=r,(Ye=$t())===e&&(Ye=Fr()),Ye!==e?(ut=Wt())!==e?He=Ye=[Ye,ut]:(r=He,He=e):(r=He,He=e),He===e&&(He=null),He!==e?P=Q=[Q,K,de,He]:(r=P,P=e)):(r=P,P=e)}else r=P,P=e;else r=P,P=e}if(y!==e){for(Q=F,K=v,v={token:"propertylist"},o=[],F=[],P=0;P<K.length;P++)null!=K[P].triplesContext?(o=o.concat(K[P].triplesContext),"triplesnodecollection"===K[P].token&&null!=K[P].chainSubject.length?F.push([Q,K[P].chainSubject[0]]):F.push([Q,K[P].chainSubject])):F.push([Q,K[P]]);for(P=0;P<y.length;P++)for(Q=(K=y[P][3])[0],K=K[1]||[],de=0;de<K.length;de++)null!=K[de].triplesContext?(o=o.concat(K[de].triplesContext),F.push([Q,K[de].chainSubject])):F.push([Q,K[de]]);v.pairs=F,v.triplesContext=o,o=v}else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(mu),o}function $t(){var o;return B++,o=We(),B--,o===e&&0===B&&s(wu),o}function Fr(){var o;return B++,o=le(),B--,o===e&&0===B&&s(Ni),o}function We(){var o,F,y,v,P,Q;if(B++,B++,F=r,(y=Ke())!==e){for(o=[],v=r,124===j.charCodeAt(r)?(P=ho,r++):(P=e,0===B&&s(po)),P!==e?(Q=Ke())!==e?v=P=[P,Q]:(r=v,v=e):(r=v,v=e);v!==e;)o.push(v),v=r,124===j.charCodeAt(r)?(P=ho,r++):(P=e,0===B&&s(po)),P!==e?(Q=Ke())!==e?v=P=[P,Q]:(r=v,v=e):(r=v,v=e);if(o!==e){if(null!=o&&0!==o.length){for(F=[],y=0;y<o.length;y++)F.push(o[1]);(o={token:"path",kind:"alternative"}).value=F,y=o}F=y}else r=F,F=e}else r=F,F=e;return B--,F===e&&0===B&&s(Cu),B--,(o=F)===e&&0===B&&s(hs),o}function Ke(){var o,F,y,v,P,Q;if(B++,o=r,(F=ie())!==e){for(y=[],v=r,47===j.charCodeAt(r)?(P=Gn,r++):(P=e,0===B&&s(hn)),P!==e?(Q=ie())!==e?v=P=[P,Q]:(r=v,v=e):(r=v,v=e);v!==e;)y.push(v),v=r,47===j.charCodeAt(r)?(P=Gn,r++):(P=e,0===B&&s(hn)),P!==e?(Q=ie())!==e?v=P=[P,Q]:(r=v,v=e):(r=v,v=e);if(y!==e){if(null!=y&&0!==y.length){for(o=[F],F=0;F<y.length;F++)o.push(y[F][1]);(y={token:"path",kind:"sequence"}).value=o,F=y}o=F}else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(Mi),o}function Pe(){var o,F,y,v;if(B++,o=r,B++,(F=wt())===e&&(97===j.charCodeAt(r)?(y=fs,r++):(y=e,0===B&&s(co)),y!==e&&(y=xr()),(F=y)===e)){if(F=r,33===j.charCodeAt(r)?(y=li,r++):(y=e,0===B&&s(gs)),y!==e){var P,Q,K,de,He,Ye,ut;if((v=be())===e)if(v=r,40===j.charCodeAt(r)?(P=Dt,r++):(P=e,0===B&&s(Rt)),P!==e){if(Q=r,(K=be())!==e){for(de=[],He=r,124===j.charCodeAt(r)?(Ye=ho,r++):(Ye=e,0===B&&s(po)),Ye!==e?(ut=be())!==e?He=Ye=[Ye,ut]:(r=He,He=e):(r=He,He=e);He!==e;)de.push(He),He=r,124===j.charCodeAt(r)?(Ye=ho,r++):(Ye=e,0===B&&s(po)),Ye!==e?(ut=be())!==e?He=Ye=[Ye,ut]:(r=He,He=e):(r=He,He=e);de!==e?Q=K=[K,de]:(r=Q,Q=e)}else r=Q,Q=e;Q===e&&(Q=null),Q!==e?(41===j.charCodeAt(r)?(K=Bt,r++):(K=e,0===B&&s(Nt)),K!==e?v=P=[P,Q,K]:(r=v,v=e)):(r=v,v=e)}else r=v,v=e;v!==e?F=y=[y,v]:(r=F,F=e)}else r=F,F=e;F===e&&(F=r,40===j.charCodeAt(r)?(y=Dt,r++):(y=e,0===B&&s(Rt)),y!==e?(v=We())!==e?(41===j.charCodeAt(r)?(y=Bt,r++):(y=e,0===B&&s(Nt)),y!==e?F=v:(r=F,F=e)):(r=F,F=e):(r=F,F=e))}if(B--,F===e&&0===B&&s(vo),F!==e)if(B++,42===j.charCodeAt(r)?(y=mn,r++):(y=e,0===B&&s(xn)),y===e&&(63===j.charCodeAt(r)?(y=ps,r++):(y=e,0===B&&s(ds)),y===e&&(43===j.charCodeAt(r)?(y=Zr,r++):(y=e,0===B&&s($r)),y===e&&(y=r,123===j.charCodeAt(r)?(v=Kr,r++):(v=e,0===B&&s(Jr)),v!==e?(P=r,(Q=Te())!==e?(K=r,44===j.charCodeAt(r)?(de=ar,r++):(de=e,0===B&&s(yr)),de!==e?(125===j.charCodeAt(r)?(He=br,r++):(He=e,0===B&&s(Sr)),He===e&&(He=r,(Ye=Te())!==e?(125===j.charCodeAt(r)?(ut=br,r++):(ut=e,0===B&&s(Sr)),ut!==e?He=Ye=[Ye,ut]:(r=He,He=e)):(r=He,He=e)),He!==e?K=de=[de,He]:(r=K,K=e)):(r=K,K=e),K===e&&(125===j.charCodeAt(r)?(K=br,r++):(K=e,0===B&&s(Sr))),K!==e?P=Q=[Q,K]:(r=P,P=e)):(r=P,P=e),P===e&&(P=r,44===j.charCodeAt(r)?(Q=ar,r++):(Q=e,0===B&&s(yr)),Q!==e?(K=Te())!==e?(125===j.charCodeAt(r)?(de=br,r++):(de=e,0===B&&s(Sr)),de!==e?P=Q=[Q,K,de]:(r=P,P=e)):(r=P,P=e):(r=P,P=e)),P!==e?y=v=[v,P]:(r=y,y=e)):(r=y,y=e)))),B--,y===e&&0===B&&s(ku),y===e&&(y=null),y!==e){if(o=F,F=y,o.token&&"path"!=o.token&&""==F)F=o;else if(o.token&&o.token!=ct&&""!=F){var ct={token:"path",kind:"element"};ct.value=o,ct.modifier=F,F=ct}else o.modifier=F,F=o;o=F}else r=o,o=e;else r=o,o=e;return B--,o===e&&0===B&&s(bu),o}function ie(){var o,F;return B++,(o=Pe())===e&&(o=r,94===j.charCodeAt(r)?(F=Su,r++):(F=e,0===B&&s(si)),F!==e?(F=Pe())!==e?(o={token:"path",kind:"inversePath"}).value=F:(r=o,o=e):(r=o,o=e)),B--,o===e&&0===B&&s(go),o}function be(){var o,F,y;return B++,(o=wt())===e&&(97===j.charCodeAt(r)?(o=fs,r++):(o=e,0===B&&s(co)),o===e&&(o=r,94===j.charCodeAt(r)?(F=Su,r++):(F=e,0===B&&s(si)),F!==e?((y=wt())===e&&(97===j.charCodeAt(r)?(y=fs,r++):(y=e,0===B&&s(co))),y!==e?o=F=[F,y]:(r=o,o=e)):(r=o,o=e))),B--,o===e&&0===B&&s(ja),o}function Te(){var o;return B++,o=Ot(),B--,o===e&&0===B&&s(_u),o}function je(){var o,F,y,v;for(B++,B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(40===j.charCodeAt(r)?(y=Dt,r++):(y=e,0===B&&s(Rt)),y!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e){if(F=[],(y=H())!==e)for(;y!==e;)F.push(y),y=H();else F=e;if(F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(41===j.charCodeAt(r)?(v=Bt,r++):(v=e,0===B&&s(Nt)),v!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?o=F:(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e}else r=o,o=e}else r=o,o=e;else r=o,o=e;if(B--,o===e&&0===B&&s(Or),o!==e){F=[],y=[];var P=null;for(v=0;v<o.length;v++)Xr++,P=null,null==o[v].chainSubject&&null==o[v].triplesContext?P=o[v]:(P=o[v].chainSubject,F=F.concat(o[v].triplesContext)),P={subject:{token:"blank",value:"_:"+Xr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:P},0==v&&y.push(P.subject),F.push(P),P=v===o.length-1?{subject:{token:"blank",value:"_:"+Xr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Xr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Xr+1)}},F.push(P);o={token:"triplesnodecollection",triplesContext:F,chainSubject:y}}if(o===e){for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(91===j.charCodeAt(r)?(y=ul,r++):(y=e,0===B&&s(vs)),y!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if((F=hr())!==e)if(93===j.charCodeAt(r)?(y=al,r++):(y=e,0===B&&s(fl)),y!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e){for(o=F,F={token:"blank",value:"_:"+ ++Xr},y=[],v=0;v<o.pairs.length;v++){P=o.pairs[v];var Q={};Q.subject=F,Q.predicate=P[0],null!=P[1].length&&(P[1]=P[1][0]),Q.object=P[1],y.push(Q)}o=F={token:"triplesnode",kind:"blanknodepropertylist",triplesContext:o.triplesContext.concat(y),chainSubject:F}}else r=o,o=e}else r=o,o=e;else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e;B--,o===e&&0===B&&s(yo)}return B--,o===e&&0===B&&s(Hn),o}function Ge(){var o,F,y,v;for(B++,B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(40===j.charCodeAt(r)?(y=Dt,r++):(y=e,0===B&&s(Rt)),y!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e){if(F=[],(y=z())!==e)for(;y!==e;)F.push(y),y=z();else F=e;if(F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(41===j.charCodeAt(r)?(v=Bt,r++):(v=e,0===B&&s(Nt)),v!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?o=F:(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e}else r=o,o=e}else r=o,o=e;else r=o,o=e;if(B--,o===e&&0===B&&s(Fu),o!==e){F=[],y=[];var P=null;for(v=0;v<o.length;v++)Xr++,P=null,null==o[v].chainSubject&&null==o[v].triplesContext?P=o[v]:(P=o[v].chainSubject,F=F.concat(P.triplesContext)),P={subject:{token:"blank",value:"_:"+Xr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:P},0==v&&y.push(P.subject),F.push(P),P=v===o.length-1?{subject:{token:"blank",value:"_:"+Xr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Xr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Xr+1)}},F.push(P);o={token:"triplesnodecollection",triplesContext:F,chainSubject:y}}if(o===e){for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(91===j.charCodeAt(r)?(y=ul,r++):(y=e,0===B&&s(vs)),y!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if((F=xt())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(93===j.charCodeAt(r)?(v=al,r++):(v=e,0===B&&s(fl)),v!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e){for(o=F,F={token:"blank",value:"_:"+ ++Xr},y=[],v=0;v<o.pairs.length;v++){P=o.pairs[v];var Q={};Q.subject=F,Q.predicate=P[0],null!=P[1].length&&(P[1]=P[1][0]),Q.object=P[1],y.push(Q)}o=F={token:"triplesnode",kind:"blanknodepropertylist",triplesContext:o.triplesContext.concat(y),chainSubject:F}}else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e;B--,o===e&&0===B&&s(Oa)}return B--,o===e&&0===B&&s(ji),o}function H(){var o,F,y,v,P;for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if((y=q())!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();v!==e?o=F=[F,y,v]:(r=o,o=e)}else r=o,o=e;else r=o,o=e;if(o===e){for(o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if((y=je())!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();v!==e?o=F=[F,y,v]:(r=o,o=e)}else r=o,o=e;else r=o,o=e}return o!==e&&(o=o[1]),B--,o===e&&0===B&&s(Da),o}function z(){var o,F,y,v,P;for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if((y=q())!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();v!==e?o=F=[F,y,v]:(r=o,o=e)}else r=o,o=e;else r=o,o=e;if(o===e){for(o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if((y=Ge())!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();v!==e?o=F=[F,y,v]:(r=o,o=e)}else r=o,o=e;else r=o,o=e}return o!==e&&(o=o[1]),B--,o===e&&0===B&&s(Ra),o}function q(){var o;if(B++,(o=le())===e){if(B++,(o=wt())===e&&((o=Xe())===e&&((o=et())===e&&(o=_t())===e))){var F;if(B++,B++,o=r,j.substr(r,2)===Nf?(F=Nf,r+=2):(F=e,0===B&&s(Hc)),F!==e?(F=Qr())!==e?o=F:(r=o,o=e):(r=o,o=e),B--,o===e&&0===B&&s(Gc),o!==e&&(o={token:"blank",value:o}),o===e){var y,v;if(B++,o=r,91===j.charCodeAt(r)?(F=ul,r++):(F=e,0===B&&s(vs)),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?(93===j.charCodeAt(r)?(v=al,r++):(v=e,0===B&&s(fl)),v!==e?o=F=[F,y,v]:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;B--,o===e&&0===B&&s(_h),o!==e&&(o={token:"blank",value:"_:"+ ++Xr})}B--,o===e&&0===B&&s(Bc),o===e&&(o=Ar())}B--,o===e&&0===B&&s(Eu)}return B--,o===e&&0===B&&s(Ba),o}function ue(){var o;return B++,(o=le())===e&&(o=wt()),B--,o===e&&0===B&&s(Lu),o}function le(){var o,F,y,v;for(B++,o=r,F=[],y=J();y!==e;)F.push(y),y=J();if(F!==e)if(B++,y=r,63===j.charCodeAt(r)?(F=ps,r++):(F=e,0===B&&s(ds)),F!==e?(F=Gi())!==e?y=F:(r=y,y=e):(r=y,y=e),B--,y===e&&0===B&&s(Xc),y===e&&(B++,y=r,36===j.charCodeAt(r)?(F=Mf,r++):(F=e,0===B&&s(jf)),F!==e?(F=Gi())!==e?y=F:(r=y,y=e):(r=y,y=e),B--,y===e&&0===B&&s(Wc)),y!==e){for(F=[],v=J();v!==e;)F.push(v),v=J();F!==e?(o={token:"var"}).value=y:(r=o,o=e)}else r=o,o=e;else r=o,o=e;return B--,o===e&&0===B&&s(Au),o}function Z(){var o,F,y,v,P,Q,K,de;if(B++,B++,F=r,(y=ae())!==e){for(o=[],v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(j.substr(r,2)===ys?(Q=ys,r+=2):(Q=e,0===B&&s(_n)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=ae())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;for(;v!==e;){for(o.push(v),v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(j.substr(r,2)===ys?(Q=ys,r+=2):(Q=e,0===B&&s(_n)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=ae())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e}if(o!==e){if(0!==o.length){for(F={token:"expression",expressionType:"conditionalor"},y=[y],v=0;v<o.length;v++)y.push(o[v][3]);F.operands=y,y=F}F=y}else r=F,F=e}else r=F,F=e;return B--,F===e&&0===B&&s(Qa),B--,(o=F)===e&&0===B&&s(Pa),o}function ae(){var o,F,y,v,P,Q,K,de;if(B++,o=r,(F=xe())!==e){for(y=[],v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(j.substr(r,2)===ui?(Q=ui,r+=2):(Q=e,0===B&&s(Oi)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=xe())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;for(;v!==e;){for(y.push(v),v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(j.substr(r,2)===ui?(Q=ui,r+=2):(Q=e,0===B&&s(Oi)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=xe())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e}if(y!==e){if(0!==y.length){for(o={token:"expression",expressionType:"conditionaland"},F=[F],v=0;v<y.length;v++)F.push(y[v][3]);o.operands=F,F=o}o=F}else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(mo),o}function xe(){var o,F,y,v,P,Q,K,de,He,Ye,ut,ct,Ct;if(B++,B++,F=r,(y=Fe())!==e){for(o=[],v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(61===j.charCodeAt(r)?(Q=ms,r++):(Q=e,0===B&&s(Ln)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Fe())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(j.substr(r,2)===xo?(Q=xo,r+=2):(Q=e,0===B&&s(cl)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Fe())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(60===j.charCodeAt(r)?(Q=xs,r++):(Q=e,0===B&&s(Di)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Fe())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(62===j.charCodeAt(r)?(Q=Xn,r++):(Q=e,0===B&&s(wo)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Fe())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(j.substr(r,2)===Ri?(Q=Ri,r+=2):(Q=e,0===B&&s(ws)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Fe())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(j.substr(r,2)===Cs?(Q=Cs,r+=2):(Q=e,0===B&&s(Bi)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Fe())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(73===j.charCodeAt(r)?(Q=Co,r++):(Q=e,0===B&&s(bs)),Q===e&&(105===j.charCodeAt(r)?(Q=bo,r++):(Q=e,0===B&&s(ai))),Q!==e)if(78===j.charCodeAt(r)?(K=Pi,r++):(K=e,0===B&&s(Qi)),K===e&&(110===j.charCodeAt(r)?(K=pn,r++):(K=e,0===B&&s(fi))),K!==e){for(de=[],He=J();He!==e;)de.push(He),He=J();de!==e?(He=dt())!==e?v=P=[P,Q,K,de,He]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(78===j.charCodeAt(r)?(Q=Pi,r++):(Q=e,0===B&&s(Qi)),Q===e&&(110===j.charCodeAt(r)?(Q=pn,r++):(Q=e,0===B&&s(fi))),Q!==e)if(79===j.charCodeAt(r)?(K=hl,r++):(K=e,0===B&&s(Tu)),K===e&&(111===j.charCodeAt(r)?(K=Ss,r++):(K=e,0===B&&s(pl))),K!==e)if(84===j.charCodeAt(r)?(de=Iu,r++):(de=e,0===B&&s(dl)),de===e&&(116===j.charCodeAt(r)?(de=gl,r++):(de=e,0===B&&s(Nu))),de!==e){for(He=[],Ye=J();Ye!==e;)He.push(Ye),Ye=J();if(He!==e)if(73===j.charCodeAt(r)?(Ye=Co,r++):(Ye=e,0===B&&s(bs)),Ye===e&&(105===j.charCodeAt(r)?(Ye=bo,r++):(Ye=e,0===B&&s(ai))),Ye!==e)if(78===j.charCodeAt(r)?(ut=Pi,r++):(ut=e,0===B&&s(Qi)),ut===e&&(110===j.charCodeAt(r)?(ut=pn,r++):(ut=e,0===B&&s(fi))),ut!==e){for(ct=[],Ct=J();Ct!==e;)ct.push(Ct),Ct=J();ct!==e?(Ct=dt())!==e?v=P=[P,Q,K,de,He,Ye,ut,ct,Ct]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;else r=v,v=e}else r=v,v=e;else r=v,v=e;else r=v,v=e;else r=v,v=e}}}}}}}for(;v!==e;){for(o.push(v),v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(61===j.charCodeAt(r)?(Q=ms,r++):(Q=e,0===B&&s(Ln)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Fe())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(j.substr(r,2)===xo?(Q=xo,r+=2):(Q=e,0===B&&s(cl)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Fe())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(60===j.charCodeAt(r)?(Q=xs,r++):(Q=e,0===B&&s(Di)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Fe())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(62===j.charCodeAt(r)?(Q=Xn,r++):(Q=e,0===B&&s(wo)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Fe())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(j.substr(r,2)===Ri?(Q=Ri,r+=2):(Q=e,0===B&&s(ws)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Fe())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(j.substr(r,2)===Cs?(Q=Cs,r+=2):(Q=e,0===B&&s(Bi)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Fe())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(73===j.charCodeAt(r)?(Q=Co,r++):(Q=e,0===B&&s(bs)),Q===e&&(105===j.charCodeAt(r)?(Q=bo,r++):(Q=e,0===B&&s(ai))),Q!==e)if(78===j.charCodeAt(r)?(K=Pi,r++):(K=e,0===B&&s(Qi)),K===e&&(110===j.charCodeAt(r)?(K=pn,r++):(K=e,0===B&&s(fi))),K!==e){for(de=[],He=J();He!==e;)de.push(He),He=J();de!==e?(He=dt())!==e?v=P=[P,Q,K,de,He]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(78===j.charCodeAt(r)?(Q=Pi,r++):(Q=e,0===B&&s(Qi)),Q===e&&(110===j.charCodeAt(r)?(Q=pn,r++):(Q=e,0===B&&s(fi))),Q!==e)if(79===j.charCodeAt(r)?(K=hl,r++):(K=e,0===B&&s(Tu)),K===e&&(111===j.charCodeAt(r)?(K=Ss,r++):(K=e,0===B&&s(pl))),K!==e)if(84===j.charCodeAt(r)?(de=Iu,r++):(de=e,0===B&&s(dl)),de===e&&(116===j.charCodeAt(r)?(de=gl,r++):(de=e,0===B&&s(Nu))),de!==e){for(He=[],Ye=J();Ye!==e;)He.push(Ye),Ye=J();if(He!==e)if(73===j.charCodeAt(r)?(Ye=Co,r++):(Ye=e,0===B&&s(bs)),Ye===e&&(105===j.charCodeAt(r)?(Ye=bo,r++):(Ye=e,0===B&&s(ai))),Ye!==e)if(78===j.charCodeAt(r)?(ut=Pi,r++):(ut=e,0===B&&s(Qi)),ut===e&&(110===j.charCodeAt(r)?(ut=pn,r++):(ut=e,0===B&&s(fi))),ut!==e){for(ct=[],Ct=J();Ct!==e;)ct.push(Ct),Ct=J();ct!==e?(Ct=dt())!==e?v=P=[P,Q,K,de,He,Ye,ut,ct,Ct]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;else r=v,v=e}else r=v,v=e;else r=v,v=e;else r=v,v=e;else r=v,v=e}}}}}}}}if(o!==e){if(F=y,0===o.length)y=F;else if("i"===o[0][1]||"I"===o[0][1]||"n"===o[0][1]||"N"===o[0][1]){for(y={},"i"===o[0][1]||"I"===o[0][1]?(v="=",y.expressionType="conditionalor"):(v="!=",y.expressionType="conditionaland"),P=[],Q=0;Q<o[0].length;Q++)if("args"===o[0][Q].token){P=o[0][Q].value;break}for(y.token="expression",y.operands=[],o=0;o<P.length;o++)(Q={token:"expression",expressionType:"relationalexpression"}).operator=v,Q.op1=F,Q.op2=P[o],y.operands.push(Q)}else(y={expressionType:"relationalexpression"}).operator=o[0][1],y.op1=F,y.op2=o[0][3],y.token="expression";F=y}else r=F,F=e}else r=F,F=e;return B--,F===e&&0===B&&s(Ua),B--,(o=F)===e&&0===B&&s(Fn),o}function Fe(){var o,F,y,v,P,Q,K,de,He,Ye;if(B++,B++,F=r,(y=Ae())!==e){for(o=[],v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(43===j.charCodeAt(r)?(Q=Zr,r++):(Q=e,0===B&&s($r)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Ae())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(45===j.charCodeAt(r)?(Q=Hr,r++):(Q=e,0===B&&s(dn)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Ae())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e)if(v=r,(P=Je())===e&&(P=Je()),P!==e){for(Q=r,K=[],de=J();de!==e;)K.push(de),de=J();if(K!==e)if(42===j.charCodeAt(r)?(de=mn,r++):(de=e,0===B&&s(xn)),de!==e){for(He=[],Ye=J();Ye!==e;)He.push(Ye),Ye=J();He!==e?(Ye=Me())!==e?Q=K=[K,de,He,Ye]:(r=Q,Q=e):(r=Q,Q=e)}else r=Q,Q=e;else r=Q,Q=e;if(Q===e){for(Q=r,K=[],de=J();de!==e;)K.push(de),de=J();if(K!==e)if(47===j.charCodeAt(r)?(de=Gn,r++):(de=e,0===B&&s(hn)),de!==e){for(He=[],Ye=J();Ye!==e;)He.push(Ye),Ye=J();He!==e?(Ye=Me())!==e?Q=K=[K,de,He,Ye]:(r=Q,Q=e):(r=Q,Q=e)}else r=Q,Q=e;else r=Q,Q=e}Q===e&&(Q=null),Q!==e?v=P=[P,Q]:(r=v,v=e)}else r=v,v=e}for(;v!==e;){for(o.push(v),v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(43===j.charCodeAt(r)?(Q=Zr,r++):(Q=e,0===B&&s($r)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Ae())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(45===j.charCodeAt(r)?(Q=Hr,r++):(Q=e,0===B&&s(dn)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Ae())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e)if(v=r,(P=Je())===e&&(P=Je()),P!==e){for(Q=r,K=[],de=J();de!==e;)K.push(de),de=J();if(K!==e)if(42===j.charCodeAt(r)?(de=mn,r++):(de=e,0===B&&s(xn)),de!==e){for(He=[],Ye=J();Ye!==e;)He.push(Ye),Ye=J();He!==e?(Ye=Me())!==e?Q=K=[K,de,He,Ye]:(r=Q,Q=e):(r=Q,Q=e)}else r=Q,Q=e;else r=Q,Q=e;if(Q===e){for(Q=r,K=[],de=J();de!==e;)K.push(de),de=J();if(K!==e)if(47===j.charCodeAt(r)?(de=Gn,r++):(de=e,0===B&&s(hn)),de!==e){for(He=[],Ye=J();Ye!==e;)He.push(Ye),Ye=J();He!==e?(Ye=Me())!==e?Q=K=[K,de,He,Ye]:(r=Q,Q=e):(r=Q,Q=e)}else r=Q,Q=e;else r=Q,Q=e}Q===e&&(Q=null),Q!==e?v=P=[P,Q]:(r=v,v=e)}else r=v,v=e}}if(o!==e){if(0!==o.length){for((F={token:"expression",expressionType:"additiveexpression"}).summand=y,F.summands=[],y=0;y<o.length;y++)v={},4==(P=o[y]).length&&"string"==typeof P[1]?(v.operator=P[1],v.expression=P[3]):(P={},Q=v[0],K=v[1][1],de=v[1][3],K=null,0>Q.value?(v.operator="-",Q.value=-Q.value):v.operator="+",P.token="expression",P.expressionType="multiplicativeexpression",P.operator=Q,P.factors=[{operator:K,expression:de}],v.expression=P),F.summands.push(v);y=F}F=y}else r=F,F=e}else r=F,F=e;return B--,F===e&&0===B&&s(So),B--,(o=F)===e&&0===B&&s(vl),o}function Ae(){var o,F,y,v,P,Q,K,de;if(B++,o=r,(F=Me())!==e){for(y=[],v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(42===j.charCodeAt(r)?(Q=mn,r++):(Q=e,0===B&&s(xn)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Me())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(47===j.charCodeAt(r)?(Q=Gn,r++):(Q=e,0===B&&s(hn)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Me())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e}for(;v!==e;){for(y.push(v),v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(42===j.charCodeAt(r)?(Q=mn,r++):(Q=e,0===B&&s(xn)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Me())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e;if(v===e){for(v=r,P=[],Q=J();Q!==e;)P.push(Q),Q=J();if(P!==e)if(47===j.charCodeAt(r)?(Q=Gn,r++):(Q=e,0===B&&s(hn)),Q!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Me())!==e?v=P=[P,Q,K,de]:(r=v,v=e):(r=v,v=e)}else r=v,v=e;else r=v,v=e}}if(y!==e){if(0!==y.length){for((o={token:"expression",expressionType:"multiplicativeexpression"}).factor=F,o.factors=[],F=0;F<y.length;F++)v=y[F],(P={}).operator=v[1],P.expression=v[3],o.factors.push(P);F=o}o=F}else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(Mu),o}function Me(){var o,F,y;if(B++,o=r,33===j.charCodeAt(r)?(F=li,r++):(F=e,0===B&&s(gs)),F!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();y!==e?(F=Ie())!==e?(o={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"}).expression=F:(r=o,o=e):(r=o,o=e)}else r=o,o=e;if(o===e){if(o=r,43===j.charCodeAt(r)?(F=Zr,r++):(F=e,0===B&&s($r)),F!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();y!==e?(F=Ie())!==e?(o={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"}).expression=F:(r=o,o=e):(r=o,o=e)}else r=o,o=e;if(o===e){if(o=r,45===j.charCodeAt(r)?(F=Hr,r++):(F=e,0===B&&s(dn)),F!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();y!==e?(F=Ie())!==e?(o={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"}).expression=F:(r=o,o=e):(r=o,o=e)}else r=o,o=e;o===e&&(o=Ie())}}return B--,o===e&&0===B&&s(Ga),o}function Ie(){var o;if(B++,(o=Re())===e&&(o=Oe())===e){var F,y,v;if(B++,F=r,(o=wt())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?((v=ot())===e&&(v=null),v!==e?(F=v,(y={token:"expression",expressionType:"irireforfunction"}).iriref=o,y.args=null!=F?F.value:F,F=y):(r=F,F=e)):(r=F,F=e)}else r=F,F=e;if(B--,F===e&&0===B&&s(Sc),(o=F)===e&&((o=Xe())!==e&&((F={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"}).value=o,o=F),o===e&&((o=et())!==e&&((F={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"}).value=o,o=F),o===e&&((o=_t())!==e&&((F={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"}).value=o,o=F),o===e)))){var P,Q,K,de,He,Ye,ut,ct,Ct;if(B++,y=r,j.substr(r,5)===hf?(o=hf,r+=5):(o=e,0===B&&s(fc)),o===e&&(j.substr(r,5)===pf?(o=pf,r+=5):(o=e,0===B&&s(cc))),o!==e){for(o=[],F=J();F!==e;)o.push(F),F=J();if(o!==e)if(40===j.charCodeAt(r)?(F=Dt,r++):(F=e,0===B&&s(Rt)),F!==e){for(F=[],o=J();o!==e;)F.push(o),o=J();if(F!==e)if(j.substr(r,8)===dr?(o=dr,r+=8):(o=e,0===B&&s(wr)),o===e&&(j.substr(r,8)===Cr?(o=Cr,r+=8):(o=e,0===B&&s(vn))),o===e&&(o=null),o!==e){for(v=[],F=J();F!==e;)v.push(F),F=J();if(v!==e)if(42===j.charCodeAt(r)?(F=mn,r++):(F=e,0===B&&s(xn)),F===e&&(F=Z()),F!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if(41===j.charCodeAt(r)?(P=Bt,r++):(P=e,0===B&&s(Nt)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?((y={token:"expression",expressionType:"aggregate",aggregateType:"count"}).distinct=""!=o&&null!=o?"DISTINCT":o,y.expression=F):(r=y,y=e)}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;if(y===e){if(y=r,j.substr(r,12)===df?(o=df,r+=12):(o=e,0===B&&s(hc)),o===e&&(j.substr(r,12)===gf?(o=gf,r+=12):(o=e,0===B&&s(pc))),o!==e){for(o=[],F=J();F!==e;)o.push(F),F=J();if(o!==e)if(40===j.charCodeAt(r)?(F=Dt,r++):(F=e,0===B&&s(Rt)),F!==e){for(F=[],o=J();o!==e;)F.push(o),o=J();if(F!==e)if(j.substr(r,8)===dr?(o=dr,r+=8):(o=e,0===B&&s(wr)),o===e&&(j.substr(r,8)===Cr?(o=Cr,r+=8):(o=e,0===B&&s(vn))),o===e&&(o=null),o!==e){for(v=[],F=J();F!==e;)v.push(F),F=J();if(v!==e)if((F=Z())!==e){if(v=r,59===j.charCodeAt(r)?(P=fn,r++):(P=e,0===B&&s(tn)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e)if(j.substr(r,9)===vf?(K=vf,r+=9):(K=e,0===B&&s(dc)),K!==e){for(de=[],He=J();He!==e;)de.push(He),He=J();if(de!==e)if(61===j.charCodeAt(r)?(He=ms,r++):(He=e,0===B&&s(Ln)),He!==e){for(Ye=[],ut=J();ut!==e;)Ye.push(ut),ut=J();if(Ye!==e)if((ut=mt())!==e){for(ct=[],Ct=J();Ct!==e;)ct.push(Ct),Ct=J();ct!==e?v=P=[P,Q,K,de,He,Ye,ut,ct]:(r=v,v=e)}else r=v,v=e;else r=v,v=e}else r=v,v=e;else r=v,v=e}else r=v,v=e;else r=v,v=e}else r=v,v=e;if(v===e&&(v=null),v!==e)if(41===j.charCodeAt(r)?(P=Bt,r++):(P=e,0===B&&s(Nt)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?((y={token:"expression",expressionType:"aggregate",aggregateType:"group_concat"}).distinct=""!=o&&null!=o?"DISTINCT":o,y.expression=F,y.separator=v):(r=y,y=e)}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;if(y===e){if(y=r,j.substr(r,3)===yf?(o=yf,r+=3):(o=e,0===B&&s(gc)),o===e&&(j.substr(r,3)===mf?(o=mf,r+=3):(o=e,0===B&&s(vc))),o!==e){for(o=[],F=J();F!==e;)o.push(F),F=J();if(o!==e)if(40===j.charCodeAt(r)?(F=Dt,r++):(F=e,0===B&&s(Rt)),F!==e){for(F=[],o=J();o!==e;)F.push(o),o=J();if(F!==e)if(j.substr(r,8)===dr?(o=dr,r+=8):(o=e,0===B&&s(wr)),o===e&&(j.substr(r,8)===Cr?(o=Cr,r+=8):(o=e,0===B&&s(vn))),o===e&&(o=null),o!==e){for(v=[],F=J();F!==e;)v.push(F),F=J();if(v!==e)if((F=Z())!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if(41===j.charCodeAt(r)?(P=Bt,r++):(P=e,0===B&&s(Nt)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?((y={token:"expression",expressionType:"aggregate",aggregateType:"sum"}).distinct=""!=o&&null!=o?"DISTINCT":o,y.expression=F):(r=y,y=e)}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;if(y===e){if(y=r,j.substr(r,3)===xf?(o=xf,r+=3):(o=e,0===B&&s(yc)),o===e&&(j.substr(r,3)===wf?(o=wf,r+=3):(o=e,0===B&&s(mc))),o!==e){for(o=[],F=J();F!==e;)o.push(F),F=J();if(o!==e)if(40===j.charCodeAt(r)?(F=Dt,r++):(F=e,0===B&&s(Rt)),F!==e){for(F=[],o=J();o!==e;)F.push(o),o=J();if(F!==e)if(j.substr(r,8)===dr?(o=dr,r+=8):(o=e,0===B&&s(wr)),o===e&&(j.substr(r,8)===Cr?(o=Cr,r+=8):(o=e,0===B&&s(vn))),o===e&&(o=null),o!==e){for(v=[],F=J();F!==e;)v.push(F),F=J();if(v!==e)if((F=Z())!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if(41===j.charCodeAt(r)?(P=Bt,r++):(P=e,0===B&&s(Nt)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?((y={token:"expression",expressionType:"aggregate",aggregateType:"min"}).distinct=""!=o&&null!=o?"DISTINCT":o,y.expression=F):(r=y,y=e)}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;if(y===e){if(y=r,j.substr(r,3)===Cf?(o=Cf,r+=3):(o=e,0===B&&s(xc)),o===e&&(j.substr(r,3)===bf?(o=bf,r+=3):(o=e,0===B&&s(wc))),o!==e){for(o=[],F=J();F!==e;)o.push(F),F=J();if(o!==e)if(40===j.charCodeAt(r)?(F=Dt,r++):(F=e,0===B&&s(Rt)),F!==e){for(F=[],o=J();o!==e;)F.push(o),o=J();if(F!==e)if(j.substr(r,8)===dr?(o=dr,r+=8):(o=e,0===B&&s(wr)),o===e&&(j.substr(r,8)===Cr?(o=Cr,r+=8):(o=e,0===B&&s(vn))),o===e&&(o=null),o!==e){for(v=[],F=J();F!==e;)v.push(F),F=J();if(v!==e)if((F=Z())!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if(41===j.charCodeAt(r)?(P=Bt,r++):(P=e,0===B&&s(Nt)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?((y={token:"expression",expressionType:"aggregate",aggregateType:"max"}).distinct=""!=o&&null!=o?"DISTINCT":o,y.expression=F):(r=y,y=e)}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;if(y===e)if(y=r,j.substr(r,3)===Sf?(o=Sf,r+=3):(o=e,0===B&&s(Cc)),o===e&&(j.substr(r,3)===kf?(o=kf,r+=3):(o=e,0===B&&s(bc))),o!==e){for(o=[],F=J();F!==e;)o.push(F),F=J();if(o!==e)if(40===j.charCodeAt(r)?(F=Dt,r++):(F=e,0===B&&s(Rt)),F!==e){for(F=[],o=J();o!==e;)F.push(o),o=J();if(F!==e)if(j.substr(r,8)===dr?(o=dr,r+=8):(o=e,0===B&&s(wr)),o===e&&(j.substr(r,8)===Cr?(o=Cr,r+=8):(o=e,0===B&&s(vn))),o===e&&(o=null),o!==e){for(v=[],F=J();F!==e;)v.push(F),F=J();if(v!==e)if((F=Z())!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if(41===j.charCodeAt(r)?(P=Bt,r++):(P=e,0===B&&s(Nt)),P!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?((y={token:"expression",expressionType:"aggregate",aggregateType:"avg"}).distinct=""!=o&&null!=o?"DISTINCT":o,y.expression=F):(r=y,y=e)}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e;else r=y,y=e}else r=y,y=e}}}}B--,y===e&&0===B&&s(ac),(o=y)===e&&((o=le())!==e&&((F={token:"expression",expressionType:"atomic",primaryexpression:"var"}).value=o,o=F))}}return B--,o===e&&0===B&&s(Ha),o}function Re(){var o,F,y,v;if(B++,o=r,40===j.charCodeAt(r)?(F=Dt,r++):(F=e,0===B&&s(Rt)),F!==e){for(y=[],F=J();F!==e;)y.push(F),F=J();if(y!==e)if((F=Z())!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?(41===j.charCodeAt(r)?(v=Bt,r++):(v=e,0===B&&s(Nt)),v!==e?o=F:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;return B--,o===e&&0===B&&s(Xa),o}function Oe(){var o,F,y,v,P,Q,K,de;if(B++,o=r,j.substr(r,3)===yl?(F=yl,r+=3):(F=e,0===B&&s(qa)),F===e&&(j.substr(r,3)===ju?(F=ju,r+=3):(F=e,0===B&&s(Ou))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(40===j.charCodeAt(r)?(v=Dt,r++):(v=e,0===B&&s(Rt)),v!==e){for(P=[],F=J();F!==e;)P.push(F),F=J();if(P!==e)if((F=Z())!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?(41===j.charCodeAt(r)?(K=Bt,r++):(K=e,0===B&&s(Nt)),K!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"str"}).args=[F]:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;if(o===e){if(o=r,j.substr(r,4)===ks?(F=ks,r+=4):(F=e,0===B&&s(Du)),F===e&&(j.substr(r,4)===Ru?(F=Ru,r+=4):(F=e,0===B&&s(Bu))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(40===j.charCodeAt(r)?(v=Dt,r++):(v=e,0===B&&s(Rt)),v!==e){for(P=[],F=J();F!==e;)P.push(F),F=J();if(P!==e)if((F=Z())!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?(41===j.charCodeAt(r)?(K=Bt,r++):(K=e,0===B&&s(Nt)),K!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"lang"}).args=[F]:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;if(o===e){if(o=r,j.substr(r,11)===ci?(F=ci,r+=11):(F=e,0===B&&s(Pu)),F===e&&(j.substr(r,11)===ko?(F=ko,r+=11):(F=e,0===B&&s(za))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(40===j.charCodeAt(r)?(v=Dt,r++):(v=e,0===B&&s(Rt)),v!==e){for(P=[],F=J();F!==e;)P.push(F),F=J();if(P!==e)if((F=Z())!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e)if(44===j.charCodeAt(r)?(K=ar,r++):(K=e,0===B&&s(yr)),K!==e){for(de=[],v=J();v!==e;)de.push(v),v=J();if(de!==e)if((v=Z())!==e){for(y=[],K=J();K!==e;)y.push(K),K=J();y!==e?(41===j.charCodeAt(r)?(K=Bt,r++):(K=e,0===B&&s(Nt)),K!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"langmatches"}).args=[F,v]:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;if(o===e){if(o=r,j.substr(r,8)===Qu?(F=Qu,r+=8):(F=e,0===B&&s(Ka)),F===e&&(j.substr(r,8)===Jt?(F=Jt,r+=8):(F=e,0===B&&s(Ja))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(40===j.charCodeAt(r)?(v=Dt,r++):(v=e,0===B&&s(Rt)),v!==e){for(P=[],F=J();F!==e;)P.push(F),F=J();if(P!==e)if((F=Z())!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?(41===j.charCodeAt(r)?(K=Bt,r++):(K=e,0===B&&s(Nt)),K!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"datatype"}).args=[F]:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;if(o===e){if(o=r,j.substr(r,5)===_s?(F=_s,r+=5):(F=e,0===B&&s(_o)),F===e&&(j.substr(r,5)===en?(F=en,r+=5):(F=e,0===B&&s(Fs))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(40===j.charCodeAt(r)?(v=Dt,r++):(v=e,0===B&&s(Rt)),v!==e){for(P=[],F=J();F!==e;)P.push(F),F=J();if(P!==e)if((F=le())!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?(41===j.charCodeAt(r)?(K=Bt,r++):(K=e,0===B&&s(Nt)),K!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"bound"}).args=[F]:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;if(o===e){if(o=r,j.substr(r,3)===Ls?(F=Ls,r+=3):(F=e,0===B&&s(Uu)),F===e&&(j.substr(r,3)===ml?(F=ml,r+=3):(F=e,0===B&&s(Gu))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(40===j.charCodeAt(r)?(v=Dt,r++):(v=e,0===B&&s(Rt)),v!==e){for(P=[],F=J();F!==e;)P.push(F),F=J();if(P!==e)if((F=Z())!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?(41===j.charCodeAt(r)?(K=Bt,r++):(K=e,0===B&&s(Nt)),K!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"iri"}).args=[F]:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;if(o===e){if(o=r,j.substr(r,3)===xl?(F=xl,r+=3):(F=e,0===B&&s(Hu)),F===e&&(j.substr(r,3)===Xu?(F=Xu,r+=3):(F=e,0===B&&s(wl))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(40===j.charCodeAt(r)?(v=Dt,r++):(v=e,0===B&&s(Rt)),v!==e){for(P=[],F=J();F!==e;)P.push(F),F=J();if(P!==e)if((F=Z())!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?(41===j.charCodeAt(r)?(K=Bt,r++):(K=e,0===B&&s(Nt)),K!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"uri"}).args=[F]:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;if(o===e){if(o=r,j.substr(r,5)===Cl?(F=Cl,r+=5):(F=e,0===B&&s(qt)),F===e&&(j.substr(r,5)===bl?(F=bl,r+=5):(F=e,0===B&&s(Va))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e){if(v=r,40===j.charCodeAt(r)?(P=Dt,r++):(P=e,0===B&&s(Rt)),P!==e){for(F=[],Q=J();Q!==e;)F.push(Q),Q=J();if(F!==e)if((Q=Z())!==e){for(K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(41===j.charCodeAt(r)?(de=Bt,r++):(de=e,0===B&&s(Nt)),de!==e?v=P=[P,F,Q,K,de]:(r=v,v=e)):(r=v,v=e)}else r=v,v=e;else r=v,v=e}else r=v,v=e;v===e&&(v=Ar()),v!==e?(F=v,(o={token:"expression",expressionType:"builtincall",builtincall:"bnode"}).args=5===F.length?[F[2]]:null):(r=o,o=e)}else r=o,o=e}else r=o,o=e;if(o===e){if(o=r,j.substr(r,8)===hi?(F=hi,r+=8):(F=e,0===B&&s(Ya)),F===e&&(j.substr(r,8)===Fo?(F=Fo,r+=8):(F=e,0===B&&s(Za))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();y!==e?(v=dt())!==e?((F={token:"expression",expressionType:"builtincall",builtincall:"coalesce"}).args=v,o=F):(r=o,o=e):(r=o,o=e)}else r=o,o=e;if(o===e){if(o=r,j.substr(r,2)===er?(F=er,r+=2):(F=e,0===B&&s($a)),F===e&&(j.substr(r,2)===Wu?(F=Wu,r+=2):(F=e,0===B&&s(ef))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(40===j.charCodeAt(r)?(v=Dt,r++):(v=e,0===B&&s(Rt)),v!==e){for(P=[],F=J();F!==e;)P.push(F),F=J();if(P!==e)if((F=Z())!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e)if(44===j.charCodeAt(r)?(K=ar,r++):(K=e,0===B&&s(yr)),K!==e){for(de=[],v=J();v!==e;)de.push(v),v=J();if(de!==e)if((v=Z())!==e){for(y=[],K=J();K!==e;)y.push(K),K=J();if(y!==e)if(44===j.charCodeAt(r)?(K=ar,r++):(K=e,0===B&&s(yr)),K!==e){for(K=[],y=J();y!==e;)K.push(y),y=J();if(K!==e)if((y=Z())!==e){for(K=[],Q=J();Q!==e;)K.push(Q),Q=J();K!==e?(41===j.charCodeAt(r)?(Q=Bt,r++):(Q=e,0===B&&s(Nt)),Q!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"if"}).args=[F,v,y]:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;if(o===e){if(o=r,j.substr(r,9)===Lo?(F=Lo,r+=9):(F=e,0===B&&s(t)),F===e&&(j.substr(r,9)===i?(F=i,r+=9):(F=e,0===B&&s(E)),F===e&&(j.substr(r,9)===L?(F=L,r+=9):(F=e,0===B&&s(M)))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(40===j.charCodeAt(r)?(v=Dt,r++):(v=e,0===B&&s(Rt)),v!==e){for(P=[],F=J();F!==e;)P.push(F),F=J();if(P!==e)if((F=Z())!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?(41===j.charCodeAt(r)?(K=Bt,r++):(K=e,0===B&&s(Nt)),K!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"isliteral"}).args=[F]:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;if(o===e){if(o=r,j.substr(r,7)===U?(F=U,r+=7):(F=e,0===B&&s(te)),F===e&&(j.substr(r,7)===ce?(F=ce,r+=7):(F=e,0===B&&s(ve)),F===e&&(j.substr(r,7)===we?(F=we,r+=7):(F=e,0===B&&s(De)))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(40===j.charCodeAt(r)?(v=Dt,r++):(v=e,0===B&&s(Rt)),v!==e){for(P=[],F=J();F!==e;)P.push(F),F=J();if(P!==e)if((F=Z())!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?(41===j.charCodeAt(r)?(K=Bt,r++):(K=e,0===B&&s(Nt)),K!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"isblank"}).args=[F]:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;if(o===e){if(o=r,j.substr(r,8)===Ue?(F=Ue,r+=8):(F=e,0===B&&s(Ve)),F===e&&(j.substr(r,8)===ze?(F=ze,r+=8):(F=e,0===B&&s(rt))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(40===j.charCodeAt(r)?(v=Dt,r++):(v=e,0===B&&s(Rt)),v!==e){for(P=[],F=J();F!==e;)P.push(F),F=J();if(P!==e)if((F=Z())!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e)if(44===j.charCodeAt(r)?(K=ar,r++):(K=e,0===B&&s(yr)),K!==e){for(de=[],v=J();v!==e;)de.push(v),v=J();if(de!==e)if((v=Z())!==e){for(y=[],K=J();K!==e;)y.push(K),K=J();y!==e?(41===j.charCodeAt(r)?(K=Bt,r++):(K=e,0===B&&s(Nt)),K!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"sameterm"}).args=[F,v]:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;if(o===e){if(o=r,j.substr(r,5)===nt?(F=nt,r+=5):(F=e,0===B&&s(lt)),F===e&&(j.substr(r,5)===at?(F=at,r+=5):(F=e,0===B&&s(pt)),F===e&&(j.substr(r,5)===ft?(F=ft,r+=5):(F=e,0===B&&s(gt)),F===e&&(j.substr(r,5)===Ft?(F=Ft,r+=5):(F=e,0===B&&s(kt)),F===e&&(j.substr(r,5)===jt?(F=jt,r+=5):(F=e,0===B&&s(zt)),F===e&&(j.substr(r,5)===fr?(F=fr,r+=5):(F=e,0===B&&s(Yt))))))),F!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if(40===j.charCodeAt(r)?(v=Dt,r++):(v=e,0===B&&s(Rt)),v!==e){for(P=[],F=J();F!==e;)P.push(F),F=J();if(P!==e)if((F=Z())!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();Q!==e?(41===j.charCodeAt(r)?(K=Bt,r++):(K=e,0===B&&s(Nt)),K!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"isuri"}).args=[F]:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e;if(o===e){if(o=r,j.substr(r,7)===Dr?(F=Dr,r+=7):(F=e,0===B&&s(Rr)),F===e&&(j.substr(r,7)===rr?(F=rr,r+=7):(F=e,0===B&&s(Br))),F!==e){if(y=[],mr.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(sr)),v!==e)for(;v!==e;)y.push(v),mr.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(sr));else y=e;if(y!==e){for(v=[],P=J();P!==e;)v.push(P),P=J();if(v!==e)if(40===j.charCodeAt(r)?(P=Dt,r++):(P=e,0===B&&s(Rt)),P!==e){for(F=[],Q=r,K=[],de=J();de!==e;)K.push(de),de=J();for(K!==e?(de=Z())!==e?(44===j.charCodeAt(r)?(v=ar,r++):(v=e,0===B&&s(yr)),v!==e?Q=K=[K,de,v]:(r=Q,Q=e)):(r=Q,Q=e):(r=Q,Q=e);Q!==e;){for(F.push(Q),Q=r,K=[],de=J();de!==e;)K.push(de),de=J();K!==e?(de=Z())!==e?(44===j.charCodeAt(r)?(v=ar,r++):(v=e,0===B&&s(yr)),v!==e?Q=K=[K,de,v]:(r=Q,Q=e)):(r=Q,Q=e):(r=Q,Q=e)}if(F!==e){for(Q=[],K=J();K!==e;)Q.push(K),K=J();if(Q!==e)if((K=Z())!==e){for(de=[],v=J();v!==e;)de.push(v),v=J();if(de!==e)if(41===j.charCodeAt(r)?(v=Bt,r++):(v=e,0===B&&s(Nt)),v!==e){for(o=K,(v={token:"expression",expressionType:"custom"}).name=y.join(""),y=[],K=0;K<F.length;K++)y.push(F[K][1]);y.push(o),v.args=y,o=v}else r=o,o=e;else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e}else r=o,o=e;else r=o,o=e}else r=o,o=e}else r=o,o=e;if(o===e){if(B++,F=r,j.substr(r,5)===Zt?(o=Zt,r+=5):(o=e,0===B&&s(Pr)),o===e&&(j.substr(r,5)===pi?(o=pi,r+=5):(o=e,0===B&&s(Wn))),o!==e){for(o=[],v=J();v!==e;)o.push(v),v=J();if(o!==e)if(40===j.charCodeAt(r)?(v=Dt,r++):(v=e,0===B&&s(Rt)),v!==e){for(v=[],o=J();o!==e;)v.push(o),o=J();if(v!==e)if((o=Z())!==e){for(v=[],y=J();y!==e;)v.push(y),y=J();if(v!==e)if(44===j.charCodeAt(r)?(y=ar,r++):(y=e,0===B&&s(yr)),y!==e){for(y=[],v=J();v!==e;)y.push(v),v=J();if(y!==e)if((v=Z())!==e){for(K=[],y=J();y!==e;)K.push(y),y=J();if(K!==e){if(y=r,44===j.charCodeAt(r)?(K=ar,r++):(K=e,0===B&&s(yr)),K!==e){for(Q=[],de=J();de!==e;)Q.push(de),de=J();Q!==e?(de=Z())!==e?y=K=[K,Q,de]:(r=y,y=e):(r=y,y=e)}else r=y,y=e;if(y===e&&(y=null),y!==e){for(K=[],Q=J();Q!==e;)K.push(Q),Q=J();K!==e?(41===j.charCodeAt(r)?(Q=Bt,r++):(Q=e,0===B&&s(Nt)),Q!==e?(F=y,(y={token:"expression",expressionType:"regex"}).text=o,y.pattern=v,null!=F&&(y.flags=F[2]),F=y):(r=F,F=e)):(r=F,F=e)}else r=F,F=e}else r=F,F=e}else r=F,F=e;else r=F,F=e}else r=F,F=e;else r=F,F=e}else r=F,F=e;else r=F,F=e}else r=F,F=e;else r=F,F=e}else r=F,F=e;if(B--,F===e&&0===B&&s(lr),(o=F)===e){if(B++,F=r,j.substr(r,6)===zr?(o=zr,r+=6):(o=e,0===B&&s(cr)),o===e&&(j.substr(r,6)===Ui?(o=Ui,r+=6):(o=e,0===B&&s(gn))),o!==e){for(v=[],o=J();o!==e;)v.push(o),o=J();v!==e?(o=Ze())!==e?(F={token:"expression",expressionType:"builtincall",builtincall:"exists"}).args=[o]:(r=F,F=e):(r=F,F=e)}else r=F,F=e;if(B--,F===e&&0===B&&s(kr),(o=F)===e){if(B++,F=r,j.substr(r,3)===qn?(o=qn,r+=3):(o=e,0===B&&s(Nr)),o===e&&(j.substr(r,3)===gi?(o=gi,r+=3):(o=e,0===B&&s(Sl))),o!==e){for(o=[],v=J();v!==e;)o.push(v),v=J();if(o!==e)if(j.substr(r,6)===zr?(v=zr,r+=6):(v=e,0===B&&s(cr)),v===e&&(j.substr(r,6)===Ui?(v=Ui,r+=6):(v=e,0===B&&s(gn))),v!==e){for(v=[],o=J();o!==e;)v.push(o),o=J();v!==e?(o=Ze())!==e?(F={token:"expression",expressionType:"builtincall",builtincall:"notexists"}).args=[o]:(r=F,F=e):(r=F,F=e)}else r=F,F=e;else r=F,F=e}else r=F,F=e;B--,F===e&&0===B&&s(di),o=F}}}}}}}}}}}}}}}}}return B--,o===e&&0===B&&s(Wa),o}function Xe(){var o,F,y,v,P;if(B++,o=r,(F=mt())!==e){var Q,K,de,He;if(B++,y=r,64===j.charCodeAt(r)?(v=Of,r++):(v=e,0===B&&s(Df)),v!==e){if(P=[],Rf.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(Bf)),v!==e)for(;v!==e;)P.push(v),Rf.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(Bf));else P=e;if(P!==e){if(v=[],Q=r,45===j.charCodeAt(r)?(K=Hr,r++):(K=e,0===B&&s(dn)),K!==e){if(de=[],zu.test(j.charAt(r))?(He=j.charAt(r),r++):(He=e,0===B&&s(Ku)),He!==e)for(;He!==e;)de.push(He),zu.test(j.charAt(r))?(He=j.charAt(r),r++):(He=e,0===B&&s(Ku));else de=e;de!==e?Q=K=[K,de]:(r=Q,Q=e)}else r=Q,Q=e;for(;Q!==e;)if(v.push(Q),Q=r,45===j.charCodeAt(r)?(K=Hr,r++):(K=e,0===B&&s(dn)),K!==e){if(de=[],zu.test(j.charAt(r))?(He=j.charAt(r),r++):(He=e,0===B&&s(Ku)),He!==e)for(;He!==e;)de.push(He),zu.test(j.charAt(r))?(He=j.charAt(r),r++):(He=e,0===B&&s(Ku));else de=e;de!==e?Q=K=[K,de]:(r=Q,Q=e)}else r=Q,Q=e;v!==e?(y=P,y=v=0===v.length?("@"+y.join("")).toLowerCase():("@"+y.join("")+"-"+v[0][1].join("")).toLowerCase()):(r=y,y=e)}else r=y,y=e}else r=y,y=e;B--,y===e&&0===B&&s(qc),y===e&&(y=r,j.substr(r,2)===_f?(v=_f,r+=2):(v=e,0===B&&s(_c)),v!==e?(P=wt())!==e?y=v=[v,P]:(r=y,y=e):(r=y,y=e)),y===e&&(y=null),y!==e?(o=F,"string"==typeof(F=y)&&0<F.length?F={token:"literal",value:o.value,lang:F.slice(1),type:null}:null!=F&&"object"==typeof F?(F.shift(),F={token:"literal",value:o.value,lang:null,type:F[0]}):F={token:"literal",value:o.value,lang:null,type:null},o=F):(r=o,o=e)}else r=o,o=e;return B--,o===e&&0===B&&s(kc),o}function et(){var o,F;(B++,B++,(o=pr())===e&&((o=tr())===e&&(o=Ot())),B--,o===e&&0===B&&s(Lc),o===e)&&(B++,B++,o=r,43===j.charCodeAt(r)?(F=Zr,r++):(F=e,0===B&&s($r)),F!==e?(F=pr())!==e?o=F=Pf(F):(r=o,o=e):(r=o,o=e),B--,o===e&&0===B&&s(Zc),o===e&&(B++,o=r,43===j.charCodeAt(r)?(F=Zr,r++):(F=e,0===B&&s($r)),F!==e?(F=tr())!==e?o=F=Pf(F):(r=o,o=e):(r=o,o=e),B--,o===e&&0===B&&s(Yc),o===e&&(B++,o=r,43===j.charCodeAt(r)?(F=Zr,r++):(F=e,0===B&&s($r)),F!==e?(F=Ot())!==e?(F.value="+"+F.value,o=F):(r=o,o=e):(r=o,o=e),B--,o===e&&0===B&&s(Vc))),B--,o===e&&0===B&&s(Ac),o===e&&(o=Je()));return B--,o===e&&0===B&&s(Fc),o}function Je(){var o,F;return B++,B++,o=r,45===j.charCodeAt(r)?(F=Hr,r++):(F=e,0===B&&s(dn)),F!==e?(F=pr())!==e?o=F=tf(F):(r=o,o=e):(r=o,o=e),B--,o===e&&0===B&&s(th),o===e&&(B++,o=r,45===j.charCodeAt(r)?(F=Hr,r++):(F=e,0===B&&s(dn)),F!==e?(F=tr())!==e?o=F=tf(F):(r=o,o=e):(r=o,o=e),B--,o===e&&0===B&&s(eh),o===e&&(B++,o=r,45===j.charCodeAt(r)?(F=Hr,r++):(F=e,0===B&&s(dn)),F!==e?(F=Ot())!==e?o=F=tf(F):(r=o,o=e):(r=o,o=e),B--,o===e&&0===B&&s($c))),B--,o===e&&0===B&&s(Ec),o}function _t(){var o;return B++,j.substr(r,4)===Ff?(o=Ff,r+=4):(o=e,0===B&&s(Ic)),o===e&&(j.substr(r,4)===Lf?(o=Lf,r+=4):(o=e,0===B&&s(Nc))),o!==e&&(o={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}),o===e&&(j.substr(r,5)===Af?(o=Af,r+=5):(o=e,0===B&&s(Mc)),o===e&&(j.substr(r,5)===Ef?(o=Ef,r+=5):(o=e,0===B&&s(jc))),o!==e&&(o={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1})),B--,o===e&&0===B&&s(Tc),o}function mt(){var o,F,y;if(B++,B++,o=r,j.substr(r,3)===Ju?(F=Ju,r+=3):(F=e,0===B&&s(qf)),F!==e){for(F=[],zf.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(Kf)),y===e&&(y=Lr());y!==e;)F.push(y),zf.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(Kf)),y===e&&(y=Lr());F!==e?(j.substr(r,3)===Ju?(y=Ju,r+=3):(y=e,0===B&&s(qf)),y!==e?o=F=An(F):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;if(B--,o===e&&0===B&&s(ah),o!==e&&(o=qu(o)),o===e){if(B++,o=r,j.substr(r,3)===Vu?(F=Vu,r+=3):(F=e,0===B&&s(Jf)),F!==e){for(F=[],Vf.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(Yf)),y===e&&(y=Lr());y!==e;)F.push(y),Vf.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(Yf)),y===e&&(y=Lr());F!==e?(j.substr(r,3)===Vu?(y=Vu,r+=3):(y=e,0===B&&s(Jf)),y!==e?o=F=An(F):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;if(B--,o===e&&0===B&&s(fh),o!==e&&(o=qu(o)),o===e){if(B++,o=r,39===j.charCodeAt(r)?(F=rf,r++):(F=e,0===B&&s(nf)),F!==e){for(F=[],Qf.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(Uf)),y===e&&(y=Lr());y!==e;)F.push(y),Qf.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(Uf)),y===e&&(y=Lr());F!==e?(39===j.charCodeAt(r)?(y=rf,r++):(y=e,0===B&&s(nf)),y!==e?o=F=An(F):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;if(B--,o===e&&0===B&&s(lh),o!==e&&(o=qu(o)),o===e){if(B++,o=r,34===j.charCodeAt(r)?(F=Gf,r++):(F=e,0===B&&s(Hf)),F!==e){for(F=[],Xf.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(Wf)),y===e&&(y=Lr());y!==e;)F.push(y),Xf.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(Wf)),y===e&&(y=Lr());F!==e?(34===j.charCodeAt(r)?(y=Gf,r++):(y=e,0===B&&s(Hf)),y!==e?o=F=An(F):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;B--,o===e&&0===B&&s(uh),o!==e&&(o=qu(o))}}}return B--,o===e&&0===B&&s(Oc),o}function wt(){var o,F,y;(B++,(o=At())!==e&&(o={token:"uri",prefix:null,suffix:null,value:o}),o===e)&&(B++,B++,o=r,(F=Pt())!==e?(y=Qr())!==e?o=F=[F,y]:(r=o,o=e):(r=o,o=e),B--,o===e&&0===B&&s(Uc),o!==e&&(o={token:"uri",prefix:o[0],suffix:o[1],value:null}),o===e&&((o=Pt())!==e&&(o={token:"uri",prefix:o,suffix:"",value:null})),B--,o===e&&0===B&&s(Rc));return B--,o===e&&0===B&&s(Dc),o}function At(){var o,F,y;if(B++,o=r,60===j.charCodeAt(r)?(F=xs,r++):(F=e,0===B&&s(Di)),F!==e){for(F=[],Tf.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(If));y!==e;)F.push(y),Tf.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(If));F!==e?(62===j.charCodeAt(r)?(y=Xn,r++):(y=e,0===B&&s(wo)),y!==e?o=F=F.join(""):(r=o,o=e)):(r=o,o=e)}else r=o,o=e;return B--,o===e&&0===B&&s(Pc),o}function Pt(){var o,F,y,v,P;if(B++,o=r,B++,F=r,(y=jr())!==e){for(v=[],(P=Kn())===e&&(46===j.charCodeAt(r)?(P=Ut,r++):(P=e,0===B&&s(ur)));P!==e;)v.push(P),(P=Kn())===e&&(46===j.charCodeAt(r)?(P=Ut,r++):(P=e,0===B&&s(ur)));if(v!==e){if("."==v[v.length-1])throw Error("Wrong PN_PREFIX, cannot finish with '.'");F=y+=v.join("")}else r=F,F=e}else r=F,F=e;return B--,F===e&&0===B&&s(ip),F===e&&(F=null),F!==e?(58===j.charCodeAt(r)?(y=kl,r++):(y=e,0===B&&s(_l)),y!==e?o=F:(r=o,o=e)):(r=o,o=e),B--,o===e&&0===B&&s(Qc),o}function Ot(){var o,F;if(B++,o=[],nr.test(j.charAt(r))?(F=j.charAt(r),r++):(F=e,0===B&&s(ir)),F!==e)for(;F!==e;)o.push(F),nr.test(j.charAt(r))?(F=j.charAt(r),r++):(F=e,0===B&&s(ir));else o=e;return o!==e&&((F={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"}).value=An(o),o=F),B--,o===e&&0===B&&s(zc),o}function tr(){var o,F,y,v,P;if(B++,o=r,F=[],nr.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(ir)),y!==e)for(;y!==e;)F.push(y),nr.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(ir));else F=e;if(F!==e)if(46===j.charCodeAt(r)?(y=Ut,r++):(y=e,0===B&&s(ur)),y!==e){for(v=[],nr.test(j.charAt(r))?(P=j.charAt(r),r++):(P=e,0===B&&s(ir));P!==e;)v.push(P),nr.test(j.charAt(r))?(P=j.charAt(r),r++):(P=e,0===B&&s(ir));v!==e?(o={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"}).value=An([F,y,v]):(r=o,o=e)}else r=o,o=e;else r=o,o=e;if(o===e)if(o=r,46===j.charCodeAt(r)?(F=Ut,r++):(F=e,0===B&&s(ur)),F!==e){if(y=[],nr.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(ir)),v!==e)for(;v!==e;)y.push(v),nr.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(ir));else y=e;y!==e?((v={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"}).value=An([F,y]),o=v):(r=o,o=e)}else r=o,o=e;return B--,o===e&&0===B&&s(Kc),o}function pr(){var o,F,y,v,P;if(B++,o=r,F=[],nr.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(ir)),y!==e)for(;y!==e;)F.push(y),nr.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(ir));else F=e;if(F!==e)if(46===j.charCodeAt(r)?(y=Ut,r++):(y=e,0===B&&s(ur)),y!==e){for(v=[],nr.test(j.charAt(r))?(P=j.charAt(r),r++):(P=e,0===B&&s(ir));P!==e;)v.push(P),nr.test(j.charAt(r))?(P=j.charAt(r),r++):(P=e,0===B&&s(ir));v!==e?(P=Mr())!==e?(o={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"}).value=An([F,y,v,P]):(r=o,o=e):(r=o,o=e)}else r=o,o=e;else r=o,o=e;if(o===e){if(o=r,46===j.charCodeAt(r)?(F=Ut,r++):(F=e,0===B&&s(ur)),F!==e){if(y=[],nr.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(ir)),v!==e)for(;v!==e;)y.push(v),nr.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(ir));else y=e;y!==e?(v=Mr())!==e?((P={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"}).value=An([F,y,v]),o=P):(r=o,o=e):(r=o,o=e)}else r=o,o=e;if(o===e){if(o=r,F=[],nr.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(ir)),y!==e)for(;y!==e;)F.push(y),nr.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(ir));else F=e;F!==e?(y=Mr())!==e?((v={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"}).value=An([F,y]),o=v):(r=o,o=e):(r=o,o=e)}}return B--,o===e&&0===B&&s(Jc),o}function Mr(){var o,F,y,v,P;if(B++,o=r,nh.test(j.charAt(r))?(F=j.charAt(r),r++):(F=e,0===B&&s(ih)),F!==e)if(oh.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(sh)),y===e&&(y=null),y!==e){if(v=[],nr.test(j.charAt(r))?(P=j.charAt(r),r++):(P=e,0===B&&s(ir)),P!==e)for(;P!==e;)v.push(P),nr.test(j.charAt(r))?(P=j.charAt(r),r++):(P=e,0===B&&s(ir));else v=e;v!==e?o=F=An([F,y,v]):(r=o,o=e)}else r=o,o=e;else r=o,o=e;return B--,o===e&&0===B&&s(rh),o}function Lr(){var o,F,y;return B++,o=r,92===j.charCodeAt(r)?(F=Zf,r++):(F=e,0===B&&s($f)),F!==e?(hh.test(j.charAt(r))?(y=j.charAt(r),r++):(y=e,0===B&&s(ph)),y!==e?o=F=[F,y]:(r=o,o=e)):(r=o,o=e),B--,o===e&&0===B&&s(ch),o}function Ar(){var o,F,y;if(B++,o=r,40===j.charCodeAt(r)?(F=Dt,r++):(F=e,0===B&&s(Rt)),F!==e){for(F=[],y=J();y!==e;)F.push(y),y=J();F!==e?(41===j.charCodeAt(r)?(y=Bt,r++):(y=e,0===B&&s(Nt)),y!==e?o=F={token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:(r=o,o=e)):(r=o,o=e)}else r=o,o=e;return B--,o===e&&0===B&&s(dh),o}function J(){var o;if(B++,vh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(yh)),o===e&&(mh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(xh)),o===e&&(wh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(Ch)),o===e&&(bh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(Sh)),o===e)))){var F,y,v;if(B++,o=r,35===j.charCodeAt(r)?(F=ec,r++):(F=e,0===B&&s(tc)),F!==e){for(y=[],rc.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(nc));v!==e;)y.push(v),rc.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(nc));y!==e?o=F=[F,y]:(r=o,o=e)}else r=o,o=e;B--,o===e&&0===B&&s(kh)}return B--,o===e&&0===B&&s(gh),o}function jr(){var o;return B++,Lh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(Ah)),o===e&&(Eh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(Th)),o===e&&(Ih.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(Nh)),o===e&&(Mh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(jh)),o===e&&(Oh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(Dh)),o===e&&(Rh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(Bh)),o===e&&(Ph.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(Qh)),o===e&&(Uh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(Gh)),o===e&&(Hh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(Xh)),o===e&&(Wh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(qh)),o===e&&(zh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(Kh)),o===e&&(Jh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(Vh)),o===e&&(Yh.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(Zh)),o===e&&($h.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(ep))))))))))))))),B--,o===e&&0===B&&s(Fh),o}function Er(){var o;return B++,(o=jr())===e&&(95===j.charCodeAt(r)?(o=ic,r++):(o=e,0===B&&s(oc))),B--,o===e&&0===B&&s(tp),o}function Gi(){var o,F,y,v;if(B++,o=r,(F=Er())===e&&(nr.test(j.charAt(r))?(F=j.charAt(r),r++):(F=e,0===B&&s(ir))),F!==e){for(y=[],(v=Er())===e&&(nr.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(ir)),v===e&&(of.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(sf)),v===e&&(lf.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(uf)),v===e&&(af.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(ff))))));v!==e;)y.push(v),(v=Er())===e&&(nr.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(ir)),v===e&&(of.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(sf)),v===e&&(lf.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(uf)),v===e&&(af.test(j.charAt(r))?(v=j.charAt(r),r++):(v=e,0===B&&s(ff))))));y!==e?o=F+=y.join(""):(r=o,o=e)}else r=o,o=e;return B--,o===e&&0===B&&s(rp),o}function Kn(){var o;return B++,(o=Er())===e&&(45===j.charCodeAt(r)?(o=Hr,r++):(o=e,0===B&&s(dn)),o===e&&(nr.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(ir)),o===e&&(of.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(sf)),o===e&&(lf.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(uf)),o===e&&(af.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(ff))))))),B--,o===e&&0===B&&s(np),o}function Qr(){var o,F,y,v;if(B++,o=r,(F=Er())===e&&(nr.test(j.charAt(r))?(F=j.charAt(r),r++):(F=e,0===B&&s(ir)),F===e&&(58===j.charCodeAt(r)?(F=kl,r++):(F=e,0===B&&s(_l)),F===e&&(F=Jn()))),F!==e){for(y=[],(v=Kn())===e&&(46===j.charCodeAt(r)?(v=Ut,r++):(v=e,0===B&&s(ur)),v===e&&(58===j.charCodeAt(r)?(v=kl,r++):(v=e,0===B&&s(_l)),v===e&&(v=Jn())));v!==e;)y.push(v),(v=Kn())===e&&(46===j.charCodeAt(r)?(v=Ut,r++):(v=e,0===B&&s(ur)),v===e&&(58===j.charCodeAt(r)?(v=kl,r++):(v=e,0===B&&s(_l)),v===e&&(v=Jn())));y!==e?o=F+=(y||[]).join(""):(r=o,o=e)}else r=o,o=e;return B--,o===e&&0===B&&s(op),o}function Jn(){var o,F,y,v;return B++,B++,o=r,37===j.charCodeAt(r)?(F=sc,r++):(F=e,0===B&&s(lc)),F!==e?(y=sn())!==e?(v=sn())!==e?o=F=[F,y,v]:(r=o,o=e):(r=o,o=e):(r=o,o=e),o!==e&&(o=o.join("")),B--,o===e&&0===B&&s(lp),o===e&&(B++,o=r,92===j.charCodeAt(r)?(F=Zf,r++):(F=e,0===B&&s($f)),F!==e?(95===j.charCodeAt(r)?(F=ic,r++):(F=e,0===B&&s(oc)),F===e&&(126===j.charCodeAt(r)?(F=dp,r++):(F=e,0===B&&s(gp)),F===e&&(46===j.charCodeAt(r)?(F=Ut,r++):(F=e,0===B&&s(ur)),F===e&&(45===j.charCodeAt(r)?(F=Hr,r++):(F=e,0===B&&s(dn)),F===e&&(33===j.charCodeAt(r)?(F=li,r++):(F=e,0===B&&s(gs)),F===e&&(36===j.charCodeAt(r)?(F=Mf,r++):(F=e,0===B&&s(jf)),F===e&&(38===j.charCodeAt(r)?(F=vp,r++):(F=e,0===B&&s(yp)),F===e&&(39===j.charCodeAt(r)?(F=rf,r++):(F=e,0===B&&s(nf)),F===e&&(40===j.charCodeAt(r)?(F=Dt,r++):(F=e,0===B&&s(Rt)),F===e&&(41===j.charCodeAt(r)?(F=Bt,r++):(F=e,0===B&&s(Nt)),F===e&&(42===j.charCodeAt(r)?(F=mn,r++):(F=e,0===B&&s(xn)),F===e&&(43===j.charCodeAt(r)?(F=Zr,r++):(F=e,0===B&&s($r)),F===e&&(44===j.charCodeAt(r)?(F=ar,r++):(F=e,0===B&&s(yr)),F===e&&(59===j.charCodeAt(r)?(F=fn,r++):(F=e,0===B&&s(tn)),F===e&&(58===j.charCodeAt(r)?(F=kl,r++):(F=e,0===B&&s(_l)),F===e&&(61===j.charCodeAt(r)?(F=ms,r++):(F=e,0===B&&s(Ln)),F===e&&(47===j.charCodeAt(r)?(F=Gn,r++):(F=e,0===B&&s(hn)),F===e&&(63===j.charCodeAt(r)?(F=ps,r++):(F=e,0===B&&s(ds)),F===e&&(35===j.charCodeAt(r)?(F=ec,r++):(F=e,0===B&&s(tc)),F===e&&(64===j.charCodeAt(r)?(F=Of,r++):(F=e,0===B&&s(Df)),F===e&&(37===j.charCodeAt(r)?(F=sc,r++):(F=e,0===B&&s(lc)))))))))))))))))))))),F!==e?o="\\"+F:(r=o,o=e)):(r=o,o=e),B--,o===e&&0===B&&s(pp)),B--,o===e&&0===B&&s(sp),o}function sn(){var o;return B++,nr.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(ir)),o===e&&(ap.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(fp)),o===e&&(cp.test(j.charAt(r))?(o=j.charAt(r),r++):(o=e,0===B&&s(hp)))),B--,o===e&&0===B&&s(up),o}N=void 0!==N?N:{};var Zu,e={},qr={DOCUMENT:R},vi=R,Ao=I("[1] QueryUnit"),or=I("[2] Query"),bt=I("[3] Prologue"),Vn=I("[4] BaseDecl"),Eo="BASE",ln=T("BASE",!1),Xt="base",Yn=T("base",!1),Hi=I("[5] PrefixDecl"),To="PREFIX",it=T("PREFIX",!1),Et="prefix",As=T("prefix",!1),Es=I("[6] SelectQuery"),Io=I("[7] SubSelect"),No=I("[8] SelectClause"),Ts="SELECT",It=T("SELECT",!1),Fl="select",Ll=T("select",!1),dr="DISTINCT",wr=T("DISTINCT",!1),Cr="distinct",vn=T("distinct",!1),yi="REDUCED",Is=T("REDUCED",!1),Ns="reduced",Ms=T("reduced",!1),Dt="(",Rt=T("(",!1),yn="AS",Xi=T("AS",!1),En="as",Mo=T("as",!1),Bt=")",Nt=T(")",!1),mn="*",xn=T("*",!1),jo=I("[9] ConstructQuery"),Tn="CONSTRUCT",Al=T("CONSTRUCT",!1),Oo="construct",El=T("construct",!1),In="WHERE",mi=T("WHERE",!1),wn="where",Do=T("where",!1),Kr="{",Jr=T("{",!1),br="}",Sr=T("}",!1),js=I("[10] DescribeQuery"),Os="DESCRIBE",Tl=T("DESCRIBE",!1),Ro=I("[11] AskQuery"),Il="ASK",Nl=T("ASK",!1),Vr="ask",$u=T("ask",!1),ea=I("[12] DatasetClause"),Bo="FROM",Ml=T("FROM",!1),Cn="from",Ds=T("from",!1),bn=I("[13] DefaultGraphClause"),Po=I("[14] NamedGraphClause"),Nn="NAMED",Mn=T("NAMED",!1),xi="named",Rs=T("named",!1),ta=I("[15] SourceSelector"),ra=I("[16] WhereClause"),jl=I("[17] SolutionModifier"),Ol=I("[18] GroupClause"),Dl="GROUP",na=T("GROUP",!1),Rl="group",ia=T("group",!1),Wi="BY",Bl=T("BY",!1),qi="by",zi=T("by",!1),wi=I("[19] GroupCondition"),oa=I("[20] HavingClause"),Pl="HAVING",sa=T("HAVING",!1),Ki=I("[21] HavingCondition"),gr=I("[22] OrderClause"),Ql="ORDER",Ul=T("ORDER",!1),Ci="order",la=T("order",!1),Gl=I("[23] OrderCondition"),Hl="ASC",Bs=T("ASC",!1),Ps="asc",ua=T("asc",!1),Xl="DESC",Wl=T("DESC",!1),Qs="desc",aa=T("desc",!1),Ji=I("[24] LimitOffsetClauses"),Sn=I("[25] LimitClause"),Vi="LIMIT",Us=T("LIMIT",!1),Gs="limit",un=T("limit",!1),Zn=I("[26] OffsetClause"),Qo="OFFSET",fa=T("OFFSET",!1),Hs="offset",ca=T("offset",!1),ql=I("[27] BindingsClause"),Uo="BINDINGS",bi=T("BINDINGS",!1),an=I("[28] BindingValue"),Yi="UNDEF",Xs=T("UNDEF",!1),ha=I("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),Go="VALUES",zl=T("VALUES",!1),Zi="values",Ws=T("values",!1),$i=I("[29] UpdateUnit"),Kl=I("[30] Update"),fn=";",tn=T(";",!1),Ho=I("[31] Update1"),Jl=I("[32] Load"),eo="LOAD",rn=T("LOAD",!1),qs="load",zs=T("load",!1),Xo="INTO",Vl=T("INTO",!1),Ks="into",Js=T("into",!1),pa=I("[33] Clear"),Yl="CLEAR",da=T("CLEAR",!1),jn="clear",Si=T("clear",!1),nn="SILENT",to=T("SILENT",!1),On="silent",Wo=T("silent",!1),Vs=I("[34] Drop"),Dn="DROP",$n=T("DROP",!1),Tr="drop",Rn=T("drop",!1),Bn=I("[35] Create"),ro="CREATE",ga=T("CREATE",!1),Ys="create",no=T("create",!1),Zl=I("[36] InsertData"),ki="INSERT",io=T("INSERT",!1),qo="insert",zo=T("insert",!1),oo="DATA",Ko=T("DATA",!1),_i="data",ei=T("data",!1),Jo=I("[37] DeleteData"),ti="DELETE",Fi=T("DELETE",!1),Li="delete",Zs=T("delete",!1),va=I("[38] DeleteWhere"),$s=I("[39] Modify"),Vo="WITH",Ai=T("WITH",!1),Ei="with",ya=T("with",!1),Yo=I("[40] DeleteClause"),$l=I("[41] InsertClause"),so=I("[42] UsingClause"),el="USING",ri=T("USING",!1),Ti="using",ni=T("using",!1),lo=I("[43] GraphRef"),on="GRAPH",Zo=T("GRAPH",!1),ii="graph",$o=T("graph",!1),ma=I("[44] GraphRefAll"),Pn="DEFAULT",oi=T("DEFAULT",!1),eu="default",xa=T("default",!1),tu="ALL",wa=T("ALL",!1),ru="all",Ca=T("all",!1),Ur=I("[45] QuadPattern"),vr=I("[46] QuadData"),Ir=I("[47] Quads"),Ut=".",ur=T(".",!1),ba=I("[48] QuadsNotTriples"),es=I("[49] TriplesTemplate"),Sa=I("[50] GroupGraphPattern"),ka=I("[51] GroupGraphPatternSub"),_a=I("[54] TriplesBlock"),tl=I("[53] GraphPatternNotTriples"),nu=I("[54] OptionalGraphPattern"),ts="OPTIONAL",Fa=T("OPTIONAL",!1),rs="optional",rl=T("optional",!1),iu=I("[55] GraphGraphPattern"),ou=I("[56] ServiceGraphPattern"),ns="SERVICE",su=T("SERVICE",!1),uo=I("[57] MinusGraphPattern"),lu="MINUS",is=T("MINUS",!1),cn="minus",uu=T("minus",!1),La=I("[58] GroupOrUnionGraphPattern"),ao="UNION",Gr=T("UNION",!1),Qt="union",Yr=T("union",!1),Qn=I("[59] Filter"),kn="FILTER",au=T("FILTER",!1),os="filter",fu=T("filter",!1),Aa=I("[60] Bind"),ss="BIND",fo=T("BIND",!1),nl="bind",il=T("bind",!1),Un=I("[60] Constraint"),cu=I("[61] InlineData"),hu=I("[62] DataBlock"),Ea=I("[63] InlineDataOneVar"),ls=I("[64] InlineDataFull"),ol=I("[65] DataBlockValue"),pu=I("[61] FunctionCall"),Ta=I("[62] ArgList"),ar=",",yr=T(",",!1),Ia=I("[63] ExpressionList"),us=I("[64] ConstructTemplate"),du=I("[65] ConstructTriples"),Na=I("[66] TriplesSameSubject"),Ma=I("[83] PropertyListPathNotEmpty"),gu=I("[67] PropertyListNotEmpty"),Ii=I("[68] PropertyList"),sl=I("[86] ObjectListPath"),as=I("[69] ObjectList"),vu=I("[87] ObjectPath"),ll=I("[70] Object"),yu=I("[71] Verb"),fs="a",co=T("a",!1),xr=function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}},cs=I("[72] TriplesSameSubjectPath"),mu=I("[73] PropertyListNotEmptyPath"),xu=I("[74] PropertyListPath"),wu=I("[75]"),Ni=I("[76] VerbSimple"),hs=I("[77] Path"),Cu=I("[78] PathAlternative"),ho="|",po=T("|",!1),Mi=I("[79] PathSequence"),Gn="/",hn=T("/",!1),bu=I("[88] PathElt"),go=I("[81] PathEltOrInverse"),Su="^",si=T("^",!1),ku=I("[82] PathMod"),ps="?",ds=T("?",!1),Zr="+",$r=T("+",!1),vo=I("[83] PathPrimary"),li="!",gs=T("!",!1),ja=I("[85] PathOneInPropertySet"),_u=I("[86] Integer"),Hn=I("[100] TriplesNodePath"),ji=I("[87] TriplesNode"),yo=I("[101] BlankNodePropertyListPath"),ul="[",vs=T("[",!1),al="]",fl=T("]",!1),Oa=I("[88] BlankNodePropertyList"),Or=I("[103] CollectionPath"),Fu=I("[89] Collection"),Da=I("[105] GraphNodePath"),Ra=I("[90] GraphNode"),Ba=I("[91] VarOrTerm"),Lu=I("[92] VarOrIRIref"),Au=I("[93] Var"),Eu=I("[94] GraphTerm"),Pa=I("[95] Expression"),Qa=I("[96] ConditionalOrExpression"),ys="||",_n=T("||",!1),mo=I("[97] ConditionalAndExpression"),ui="&&",Oi=T("&&",!1),Fn=I("[98] ValueLogical"),Ua=I("[99] RelationalExpression"),ms="=",Ln=T("=",!1),xo="!=",cl=T("!=",!1),xs="<",Di=T("<",!1),Xn=">",wo=T(">",!1),Ri="<=",ws=T("<=",!1),Cs=">=",Bi=T(">=",!1),Co="I",bs=T("I",!1),bo="i",ai=T("i",!1),Pi="N",Qi=T("N",!1),pn="n",fi=T("n",!1),hl="O",Tu=T("O",!1),Ss="o",pl=T("o",!1),Iu="T",dl=T("T",!1),gl="t",Nu=T("t",!1),vl=I("[100] NumericExpression"),So=I("[101] AdditiveExpression"),Hr="-",dn=T("-",!1),Mu=I("[102] MultiplicativeExpression"),Ga=I("[103] UnaryExpression"),Ha=I("[104] PrimaryExpression"),Xa=I("[105] BrackettedExpression"),Wa=I("[106] BuiltInCall"),yl="STR",qa=T("STR",!1),ju="str",Ou=T("str",!1),ks="LANG",Du=T("LANG",!1),Ru="lang",Bu=T("lang",!1),ci="LANGMATCHES",Pu=T("LANGMATCHES",!1),ko="langmatches",za=T("langmatches",!1),Qu="DATATYPE",Ka=T("DATATYPE",!1),Jt="datatype",Ja=T("datatype",!1),_s="BOUND",_o=T("BOUND",!1),en="bound",Fs=T("bound",!1),Ls="IRI",Uu=T("IRI",!1),ml="iri",Gu=T("iri",!1),xl="URI",Hu=T("URI",!1),Xu="uri",wl=T("uri",!1),Cl="BNODE",qt=T("BNODE",!1),bl="bnode",Va=T("bnode",!1),hi="COALESCE",Ya=T("COALESCE",!1),Fo="coalesce",Za=T("coalesce",!1),er="IF",$a=T("IF",!1),Wu="if",ef=T("if",!1),Lo="ISLITERAL",t=T("ISLITERAL",!1),i="isliteral",E=T("isliteral",!1),L="isLITERAL",M=T("isLITERAL",!1),U="ISBLANK",te=T("ISBLANK",!1),ce="isblank",ve=T("isblank",!1),we="isBLANK",De=T("isBLANK",!1),Ue="SAMETERM",Ve=T("SAMETERM",!1),ze="sameterm",rt=T("sameterm",!1),nt="ISURI",lt=T("ISURI",!1),at="isuri",pt=T("isuri",!1),ft="isURI",gt=T("isURI",!1),Ft="ISIRI",kt=T("ISIRI",!1),jt="isiri",zt=T("isiri",!1),fr="isIRI",Yt=T("isIRI",!1),Dr="custom:",Rr=T("custom:",!1),rr="CUSTOM:",Br=T("CUSTOM:",!1),mr=/^[a-zA-Z0-9_]/,sr=_([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),lr=I("[107] RegexExpression"),Zt="REGEX",Pr=T("REGEX",!1),pi="regex",Wn=T("regex",!1),kr=I("[108] ExistsFunc"),zr="EXISTS",cr=T("EXISTS",!1),Ui="exists",gn=T("exists",!1),di=I("[109] NotExistsFunc"),qn="NOT",Nr=T("NOT",!1),gi="not",Sl=T("not",!1),ac=I("[110] Aggregate"),hf="COUNT",fc=T("COUNT",!1),pf="count",cc=T("count",!1),df="GROUP_CONCAT",hc=T("GROUP_CONCAT",!1),gf="group_concat",pc=T("group_concat",!1),vf="SEPARATOR",dc=T("SEPARATOR",!1),yf="SUM",gc=T("SUM",!1),mf="sum",vc=T("sum",!1),xf="MIN",yc=T("MIN",!1),wf="min",mc=T("min",!1),Cf="MAX",xc=T("MAX",!1),bf="max",wc=T("max",!1),Sf="AVG",Cc=T("AVG",!1),kf="avg",bc=T("avg",!1),Sc=I("[117] IRIrefOrFunction"),kc=I("[112] RDFLiteral"),_f="^^",_c=T("^^",!1),Fc=I("[113] NumericLiteral"),Lc=I("[114] NumericLiteralUnsigned"),Ac=I("[115] NumericLiteralPositive"),Ec=I("[116] NumericLiteralNegative"),Tc=I("[117] BooleanLiteral"),Ff="TRUE",Ic=T("TRUE",!1),Lf="true",Nc=T("true",!1),Af="FALSE",Mc=T("FALSE",!1),Ef="false",jc=T("false",!1),Oc=I("[118] String"),qu=function(o){return{token:"string",value:o}},Dc=I("[119] IRIref"),Rc=I("[120] PrefixedName"),Bc=I("[121] BlankNode"),Pc=I("[122] IRI_REF"),Tf=/^[^<>"{}|\^`\\]/,If=_('<>"{}|^`\\'.split(""),!0,!1),Qc=I("[123] PNAME_NS"),kl=":",_l=T(":",!1),Uc=I("[124] PNAME_LN"),Gc=I("[125] BLANK_NODE_LABEL"),Nf="_:",Hc=T("_:",!1),Xc=I("[126] VAR1"),Wc=I("[127] VAR2"),Mf="$",jf=T("$",!1),qc=I("[128] LANGTAG"),Of="@",Df=T("@",!1),Rf=/^[a-zA-Z]/,Bf=_([["a","z"],["A","Z"]],!1,!1),zu=/^[a-zA-Z0-9]/,Ku=_([["a","z"],["A","Z"],["0","9"]],!1,!1),zc=I("[129] INTEGER"),nr=/^[0-9]/,ir=_([["0","9"]],!1,!1),Kc=I("[130] DECIMAL"),Jc=I("[131] DOUBLE"),Vc=I("[132] INTEGER_POSITIVE"),Yc=I("[133] DECIMAL_POSITIVE"),Pf=function(o){return o.value="+"+o.value,o},Zc=I("[134] DOUBLE_POSITIVE"),$c=I("[135] INTEGER_NEGATIVE"),tf=function(o){return o.value="-"+o.value,o},eh=I("[136] DECIMAL_NEGATIVE"),th=I("[137] DOUBLE_NEGATIVE"),rh=I("[138] EXPONENT"),nh=/^[eE]/,ih=_(["e","E"],!1,!1),oh=/^[+\-]/,sh=_(["+","-"],!1,!1),lh=I("[139] STRING_LITERAL1"),rf="'",nf=T("'",!1),Qf=/^[^'\\\n\r]/,Uf=_(["'","\\","\n","\r"],!0,!1),uh=I("[140] STRING_LITERAL2"),Gf='"',Hf=T('"',!1),Xf=/^[^"\\\n\r]/,Wf=_(['"',"\\","\n","\r"],!0,!1),ah=I("[141] STRING_LITERAL_LONG1"),Ju="'''",qf=T("'''",!1),zf=/^[^'\\]/,Kf=_(["'","\\"],!0,!1),fh=I("[142] STRING_LITERAL_LONG2"),Vu='"""',Jf=T('"""',!1),Vf=/^[^"\\]/,Yf=_(['"',"\\"],!0,!1),ch=I("[143] ECHAR"),Zf="\\",$f=T("\\",!1),hh=/^[tbnrf"']/,ph=_("tbnrf\"'".split(""),!1,!1),dh=I("[144] NIL"),gh=I("[145] WS"),vh=/^[ ]/,yh=_([" "],!1,!1),mh=/^[\t]/,xh=_(["\t"],!1,!1),wh=/^[\r]/,Ch=_(["\r"],!1,!1),bh=/^[\n]/,Sh=_(["\n"],!1,!1),kh=I(" COMMENT"),ec="#",tc=T("#",!1),rc=/^[^\n\r]/,nc=_(["\n","\r"],!0,!1),_h=I("[146] ANON"),Fh=I("[147] PN_CHARS_BASE"),Lh=/^[A-Z]/,Ah=_([["A","Z"]],!1,!1),Eh=/^[a-z]/,Th=_([["a","z"]],!1,!1),Ih=/^[\xC0-\xD6]/,Nh=_([["\xc0","\xd6"]],!1,!1),Mh=/^[\xD8-\xF6]/,jh=_([["\xd8","\xf6"]],!1,!1),Oh=/^[\xF8-\u02FF]/,Dh=_([["\xf8","\u02ff"]],!1,!1),Rh=/^[\u0370-\u037D]/,Bh=_([["\u0370","\u037d"]],!1,!1),Ph=/^[\u037F-\u1FFF]/,Qh=_([["\u037f","\u1fff"]],!1,!1),Uh=/^[\u200C-\u200D]/,Gh=_([["\u200c","\u200d"]],!1,!1),Hh=/^[\u2070-\u218F]/,Xh=_([["\u2070","\u218f"]],!1,!1),Wh=/^[\u2C00-\u2FEF]/,qh=_([["\u2c00","\u2fef"]],!1,!1),zh=/^[\u3001-\uD7FF]/,Kh=_([["\u3001","\ud7ff"]],!1,!1),Jh=/^[\uF900-\uFDCF]/,Vh=_([["\uf900","\ufdcf"]],!1,!1),Yh=/^[\uFDF0-\uFFFD]/,Zh=_([["\ufdf0","\ufffd"]],!1,!1),$h=/^[\u1000-\uEFFF]/,ep=_([["\u1000","\uefff"]],!1,!1),tp=I("[148] PN_CHARS_U"),ic="_",oc=T("_",!1),rp=I("[149] VARNAME"),of=/^[\xB7]/,sf=_(["\xb7"],!1,!1),lf=/^[\u0300-\u036F]/,uf=_([["\u0300","\u036f"]],!1,!1),af=/^[\u203F-\u2040]/,ff=_([["\u203f","\u2040"]],!1,!1),np=I("[150] PN_CHARS"),ip=I("[151] PN_PREFIX"),op=I("[152] PN_LOCAL"),sp=I("[170] PLX"),lp=I("[171] PERCENT"),sc="%",lc=T("%",!1),up=I("[172] HEX"),ap=/^[A-F]/,fp=_([["A","F"]],!1,!1),cp=/^[a-f]/,hp=_([["a","f"]],!1,!1),pp=I("[173] PN_LOCAL_ESC"),dp="~",gp=T("~",!1),vp="&",yp=T("&",!1),r=0,Yu=[{line:1,column:1}],zn=0,cf=[],B=0;if("startRule"in N){if(!(N.startRule in qr))throw Error("Can't start parsing from rule \""+N.startRule+'".');vi=qr[N.startRule]}var o,F,y,An=function(o){for(var F="",y=0;y<o.length;y++)F="string"==typeof o[y]?F+o[y]:F+o[y].join("");return F},Xr=0,uc=function(o){var F="";if(null==o)return null;for(var y=0;y<o.length;y++)F+=o[y];return F.toUpperCase()};if((Zu=vi())!==e&&r===j.length)return Zu;throw Zu!==e&&r<j.length&&s({type:"end"}),o=cf,F=zn<j.length?j.charAt(zn):null,y=zn<j.length?O(zn,zn+1):O(zn,zn),new ye(ye.buildMessage(o,F),o,F,y)}}}()},{}],48:[function(Ce,Ee,Be){Ce("./btree");var ye=Ce("./utils"),j=Ce("./lexicon").Lexicon;PersistentLexicon=function(N,T){var _=this;ye.registerIndexedDB(_),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,_.dbName=T||"rdfstorejs";var I=_.indexedDB.open(this.dbName+"_lexicon",1);I.onerror=function(D){N(null,Error("Error opening IndexedDB: "+D.target.errorCode))},I.onsuccess=function(D){_.db=D.target.result,N(_)},I.onupgradeneeded=function(D){_.db=D.target.result,_.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),_.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(N,T,_){if(N!=this.defaultGraphOid){var I=this.db.transaction(["knownGraphs"],"readwrite");I.onerror=function(O){_(null,Error(O.target.statusCode))};var D=I.objectStore("knownGraphs");D.get(T).onsuccess=function(O){O.target.result?_(!0):D.add({oid:N,uriToken:T}).onsuccess=function(s){_(!0)}}}else _()},PersistentLexicon.prototype.registeredGraphs=function(N,T){var _=[],I=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs").openCursor();I.onsuccess=function(D){(D=D.target.result)?(!0===N?_.push(D.value.uriToken):_.push(D.value.oid),D.continue()):T(_)},I.onerror=function(D){T(null,Error("Error retrieving data from the cursor: "+D.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(N,T){if(N===this.defaultGraphUri)T(this.defaultGraphOid);else{var _=this.db.transaction(["components"],"readwrite").objectStore("components"),I=_.index("value").get("_u:"+N);I.onsuccess=function(D){if(D=D.target.result){D.counter++;var O=D.id;(D=_.put(D)).onsuccess=function(s){T(O)},D.onerror=function(s){T(null,Error("Error updating the URI data"+s.target.errorCode))}}else(D=_.add({value:"_u:"+N,counter:0,uri:!0})).onsuccess=function(s){T(s.target.result)},D.onerror=function(s){T(null,Error("Error inserting the URI data"+s.target.errorCode))}},I.onerror=function(D){T(null,Error("Error retrieving the URI data"+D.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(N,T){if(N===this.defaultGraphUri)T(this.defaultGraphOid);else{var _=this.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+N);_.onsuccess=function(I){null!=I.target.result?T(I.target.result.id):T(-1)},_.onerror=function(I){T(null,Error("Error retrieving uri data "+I.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(N,T){if(N===this.defaultGraphUri)T(0);else{var _=that.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+N);_.onsuccess=function(I){null!=I.target.result?T(I.target.result.cost):T(-1)},_.onerror=function(I){T(null,Error("Error retrieving uri data "+I.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(N){var T=guid();(T=this.db.transaction(["components"],"readwrite").objectStore("components").add({value:"_b:"+T,counter:0,label:!0})).onsuccess=function(_){N(_.target.result)},T.onerror=function(_){N(null,Error("Error inserting the URI data"+_.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(N,T){T(0)},PersistentLexicon.prototype.registerLiteral=function(N,T){var _=this.db.transaction(["components"],"readwrite").objectStore("components"),I=_.index("value").get("_l:"+N);I.onsuccess=function(D){if(D=D.target.result){D.counter++;var O=D.id;(D=_.put(D)).onsuccess=function(s){T(O)},D.onerror=function(s){T(null,Error("Error updating the literal data"+s.target.errorCode))}}else(D=_.add({value:"_l:"+N,counter:0,literal:!0})).onsuccess=function(s){T(s.target.result)},D.onerror=function(s){T(null,Error("Error inserting the literal data"+s.target.errorCode))}},I.onerror=function(D){T(null,Error("Error retrieving the literal data"+D.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(N,T){var _=that.db.transaction(["components"]).objectStore("components").index("value").get("_l:"+N);_.onsuccess=function(I){null!=I.target.result?T(I.target.result.id):T(-1)},_.onerror=function(I){T(null,Error("Error retrieving literal data "+I.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(N,T){var _=that.db.transaction(["components"]).objectStore("components").index("components").get(N);_.onsuccess=function(I){null!=I.target.result?T(I.target.result.cost):T(-1)},_.onerror=function(I){T(null,Error("Error retrieving literal data "+I.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(N){return j.prototype.parseLiteral(N)},PersistentLexicon.prototype.parseUri=function(N){return j.prototype.parseUri(N)},PersistentLexicon.prototype.retrieve=function(N,T){var I,_=this;N===this.defaultGraphOid?T({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):((I=(I=_.db.transaction(["components"])).objectStore("components").get(N)).onsuccess=function(D){null!=D.target.result?null!=D.target.result.label?T({token:"blank",value:"_:"+D.target.result.id}):null!=D.target.result.uri?T(_.parseUri(D.target.result.value.slice(3,D.target.result.value.length))):null!=D.target.result.literal?T(_.parseLiteral(D.target.result.value.slice(3,D.target.result.value.length))):(console.log(D.target.result),T(null,Error("Unknown type of component "+D.target.result))):T(null,null)},I.onerror=function(D){T(null,Error("Error searching in blanks data "+D.target.errorCode))})},PersistentLexicon.prototype.clear=function(N){this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var T,_=function(){null!=N&&N()};(T=this.db.transaction(["components"],"readwrite").objectStore("components").clear()).onsuccess=_,T.onerror=_},PersistentLexicon.prototype.unregister=function(N,T,_){var I=this;ye.seq(function(D){I._unregisterTerm(N.subject.token,T.subject,D)},function(D){I._unregisterTerm(N.predicate.token,T.predicate,D)},function(D){I._unregisterTerm(N.object.token,T.object,D)},function(D){null!=N.graph?I._unregisterTerm(N.graph.token,T.graph,D):D()})(function(){_(!0)})},PersistentLexicon.prototype._unregisterTerm=function(N,T,_){var I=this.db.transaction(["components","knownGraphs"],"readwrite");"uri"===N?T!=this.defaultGraphOid?(N=I.objectStore("components").delete(T)).onsuccess=void(I.objectStore("knownGraphs").delete(T).onsuccess=function(){_()}):_():(N=I.objectStore("components").delete(T)).onsuccess=function(){_()}},Ee.exports={PersistentLexicon}},{"./btree":41,"./lexicon":45,"./utils":58}],49:[function(Ce,Ee,Be){var ye=Ce("./utils");PersistentQuadBackend=function(j,N){var T=this;if(0!==arguments){for(var _ in ye.registerIndexedDB(T),this.indexMap={},this.indices="S P O G SP SO SG PO PG OG SPO SPG SOG POG SPOG".split(" "),this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={},this.componentOrders){var I=this.componentOrders[_].slice(0,_.length).sort().join(".");this.componentOrdersMap[I]=_}T.dbName=j.name||"rdfstorejs",(_=T.indexedDB.open(this.dbName+"_db",1)).onerror=function(D){N(null,Error("Error opening IndexedDB: "+D.target.errorCode))},_.onsuccess=function(D){T.db=D.target.result,N(T)},_.onupgradeneeded=function(D){var O=D.target.result.createObjectStore(T.dbName,{keyPath:"SPOG"});ye.each(T.indices,function(s){"SPOG"!==s&&O.createIndex(s,s,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(j,N){var T=this;ye.each(this.indices,function(I){j[I]=T._genMinIndexKey(j,I)});var _=T.db.transaction([T.dbName],"readwrite");_.oncomplete=function(I){},_.onerror=function(I){N(null,Error(I.target.statusCode))},_.objectStore(T.dbName).add(j).onsuccess=function(I){N(!0)}},PersistentQuadBackend.prototype.range=function(j,N){var T=this.db.transaction([this.dbName]).objectStore(this.dbName),_=this._indexForPattern(j),D=this._genMinIndexKey(j,_),I=this._genMaxIndexKey(j,_),O=(D=this.IDBKeyRange.bound(D,I,!1,!1),[]);("SPOG"===_?T:T.index(_)).openCursor(D).onsuccess=function(s){(s=s.target.result)?(O.push(s.value),s.continue()):N(O)}},PersistentQuadBackend.prototype.search=function(j,N){var _=this.db.transaction([this.dbName]).objectStore(this.dbName),T=this._genMinIndexKey(j,"SPOG");(_=_.get(T)).onerror=function(I){N(null,Error(I.target.statusCode))},_.onsuccess=function(I){N(null!=I.target.result)}},PersistentQuadBackend.prototype.delete=function(j,N){var T=this._genMinIndexKey(j,"SPOG");(T=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).delete(T)).onsuccess=function(){N(!0)},T.onerror=function(_){N(null,Error(_.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(j,N){return ye.map(this.componentOrders[N],function(T){return"string"==typeof j[T]||null==j[T]?"0":j[T]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(j,N){for(var T=this.componentOrders[N],_=[],I=0;I<T.length;I++){var D=j[T[I]];_[I]="string"==typeof D?"z":D}return ye.map(_,function(O){return""+O}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(j){j=j.indexKey.sort().join(".");var N=this.componentOrdersMap[j];if(null==N)throw Error("Error, cannot find index for indexKey "+j);return N},PersistentQuadBackend.prototype.clear=function(j){var N;(N=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).clear()).onsuccess=function(){j()},N.onerror=function(){j()}},Ee.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":58}],50:[function(Ce,Ee,Be){var ye=Ce("./quad_index").QuadIndex,j=Ce("./utils");QuadBackend=function(N,T){this.indexMap={},this.treeOrder=N.treeOrder,this.indices=N.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var _=this;j.eachSeries(this.indices,function(I,D){new ye({order:_.treeOrder,componentOrder:_.componentOrders[I]},function(O){_.indexMap[I]=O,D()})},function(){T(_)})},QuadBackend.allIndices="SPOG GP OGS POG GSP OS".split(" "),QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(N){N=N.indexKey;for(var T=0;T<QuadBackend.allIndices.length;T++)for(var _=QuadBackend.allIndices[T],I=QuadBackend.componentOrders[_],D=0;D<I.length&&!1!==j.include(N,I[D]);D++)if(D==N.length-1)return _;return"SPOG"},QuadBackend.prototype.index=function(N,T){var _=this;j.eachSeries(this.indices,function(I,D){_.indexMap[I].insert(N,function(){D()})},function(){T(!0)})},QuadBackend.prototype.range=function(N,T){var _=this._indexForPattern(N);null!=(_=this.indexMap[_])&&_.range(N,function(I){T(I)})},QuadBackend.prototype.search=function(N,T){var _=this.indexMap.SPOG;null!=_&&_.search(N,function(I){T(null!=I)})},QuadBackend.prototype.delete=function(N,T){var _=this;j.eachSeries(this.indices,function(I,D){_.indexMap[I].delete(N,function(){D()})},function(){T(!0)})},QuadBackend.prototype.clear=function(N){var T=this;j.eachSeries(this.indices,function(_,I){new ye({order:T.treeOrder,componentOrder:T.componentOrders[_]},function(D){T.indexMap[_]=D,I()})},function(){N(!0)})},Ee.exports.QuadBackend=QuadBackend},{"./quad_index":51,"./utils":58}],51:[function(Ce,Ee,Be){var ye=Ce("./btree").Tree,j=Ce("./utils"),N=Ce("./utils");NodeKey=function(T,_){this.subject=T.subject,this.predicate=T.predicate,this.object=T.object,this.graph=T.graph,this.order=_},NodeKey.prototype.comparator=function(T){for(var _=0;_<this.order.length;_++){var I=this.order[_];if(null==T[I])break;if(this[I]<T[I])return-1;if(this[I]>T[I])return 1}return 0},Pattern=function(T){this.subject=T.subject,this.predicate=T.predicate,this.object=T.object,this.graph=T.graph,this.indexKey=[],this.keyComponents={};var _=[],I=[],D=this;j.forEach(["subject","predicate","object","graph"],function(O){"string"==typeof D[O]?(I.push(O),D.keyComponents[O]=null):(_.push(O),D.keyComponents[O]=D[O],D.indexKey.push(O))}),this.order=_.concat(I),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(T,_){0!=arguments&&(this.componentOrder=T.componentOrder,ye.call(this,T.order,function(I){I.comparator=function(D,O){for(var s=0;s<I.componentOrder.length;s++){var G,R=D[G=I.componentOrder[s]];if(R<(G=O[G]))return-1;if(R>G)return 1}return 0},I.rangeComparator=function(D,O){for(var s=0;s<I.componentOrder.length;s++){var R=I.componentOrder[s];if(null==O[R]||null==D[R])break;if(D[R]<O[R])return-1;if(D[R]>O[R])return 1}return 0},_(I)}))},QuadIndex.prototype=j.create(ye.prototype,{constructor:ye}),QuadIndex.prototype.insert=function(T,_){ye.prototype.insert.call(this,T,null,function(I){_(I)})},QuadIndex.prototype.search=function(T,_){ye.prototype.search.call(this,T,function(I){_(I)},!0)},QuadIndex.prototype.range=function(T,_){this._rangeTraverse(this,this.root,T,_)},QuadIndex.prototype._rangeTraverse=function(T,_,I,D){var O=I.key,s=[],R=[_];N.whilst(function(){return 0<R.length},function(G){for(var Y=R.shift(),X=0;X<Y.numberActives&&-1===T.rangeComparator(Y.keys[X].key,O);)X++;if(!0===Y.isLeaf){for(var fe=X;fe<Y.numberActives&&0===T.rangeComparator(Y.keys[fe].key,O);)s.push(Y.keys[fe].key),fe++;G()}else T._diskRead(Y.children[X],function(ne){R.push(ne);var re=X;N.whilst(function(){return re<Y.numberActives&&0===T.rangeComparator(Y.keys[re].key,O)},function(oe){s.push(Y.keys[re].key),re++,T._diskRead(Y.children[re],function(he){R.push(he),oe()})},function(){G()})})},function(){D(s)})},Ee.exports={QuadIndex,Pattern,NodeKey}},{"./btree":41,"./utils":58}],52:[function(Ce,Ee,Be){function ye(X,fe,ne){this.name="BindExpressionError",this.bind=fe,this.error=ne,this.message=X}var j=Ce("./abstract_query_tree").AbstractQueryTree,N=Ce("./abstract_query_tree").NonSupportedSparqlFeatureError,T=Ce("./utils"),_=Ce("./quad_index"),I=Ce("./query_plan").QueryPlan,D=Ce("./query_filters").QueryFilters,O=Ce("./rdf_model"),s=Ce("./rdf_loader").RDFLoader,R=Ce("./graph_callbacks").CallbacksBackend,G=Ce("./utils"),Y=Ce("./utils");ye.prototype=Error(),ye.constructor=ye,QueryEngine=function(X){0!=arguments.length&&(this.backend=X.backend,this.lexicon=X.lexicon,this.eventsOnBatchLoad=X.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new j,this.rdfLoader=new s(X.communication),this.callbacksBackend=new R(this),this.customFns=X.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(X){this.customFns=X},QueryEngine.prototype.registerNsInEnvironment=function(X,fe){var ne=[];null!=X&&null!=X.prefixes&&(ne=X.prefixes);var oe,re={};for(oe in this.defaultPrefixes)re[oe]=this.defaultPrefixes[oe];for(oe=0;oe<ne.length;oe++){var he=ne[oe];"prefix"===he.token&&(re[he.prefix]=he.local)}fe.namespaces=re,fe.base=null!=X&&X.base&&"object"==typeof X.base?X.base.value:null},QueryEngine.prototype.applyModifier=function(X,fe){if("DISTINCT"==X){for(var ne={},re=[],oe=0;oe<fe.length;oe++){var V,he=fe[oe],pe="";for(V in he){var W=he[V];null==W?pe=pe+V+"null":"literal"==W.token?(null!=W.value&&(pe+=W.value),null!=W.lang&&(pe+=W.lang),null!=W.type&&(pe+=W.type)):pe=W.value?pe+V+W.value:pe+V+W}null==ne[pe]&&(re.push(he),ne[pe]=!0)}return re}return fe},QueryEngine.prototype.applyLimitOffset=function(X,fe,ne){return null==fe&&null==X?ne:(null==X&&(X=0),fe=null==fe?ne.length:X+fe,ne.slice(X,fe))},QueryEngine.prototype.applySingleOrderBy=function(X,fe,ne,re,oe){var he=[],pe=this;G.eachSeries(X,function(V,W){D.collect(V.expression,[fe],ne,re,pe,function(ee){he.push(ee[0].value),W()})},function(){oe({binding:fe,value:he})})},QueryEngine.prototype.applyOrderBy=function(X,fe,ne,re,oe){var he=this,pe=[];null!=X&&0<X.length?G.eachSeries(fe,function(V,W){he.applySingleOrderBy(X,V,ne,re,function(ee){pe.push(ee),W()})},function(){pe.sort(function(ee,ge){return he.compareFilteredBindings(ee,ge,X,re)});for(var V=[],W=0;W<pe.length;W++)V.push(pe[W].binding);oe(V)}):oe(fe)},QueryEngine.prototype.compareFilteredBindings=function(X,fe,ne,re){for(var oe=0;;){if(oe==X.value.length)return 0;var he=ne[oe].direction;if(null!=X.value[oe]||null!=fe.value[oe]){if(null==X.value[oe])X={value:!1};else if(null==fe.value[oe])X={value:!0};else{if("blank"===X.value[oe].token&&"blank"===fe.value[oe].token){oe++;continue}if("blank"===X.value[oe].token)X={value:!1};else if("blank"===fe.value[oe].token)X={value:!0};else if("uri"===X.value[oe].token&&"uri"===fe.value[oe].token){if(1==D.runEqualityFunction(X.value[oe],fe.value[oe],[],this,re).value){oe++;continue}X=D.runTotalGtFunction(X.value[oe],fe.value[oe],[])}else if("uri"===X.value[oe].token)X={value:!1};else if("uri"===fe.value[oe].token)X={value:!0};else if("literal"===X.value[oe].token&&"literal"===fe.value[oe].token&&null==X.value[oe].type&&null==fe.value[oe].type){if(1==D.runEqualityFunction(X.value[oe],fe.value[oe],[],this,re).value){oe++;continue}X=D.runTotalGtFunction(X.value[oe],fe.value[oe],[])}else if("literal"===X.value[oe].token&&null==X.value[oe].type)X={value:!1};else if("literal"===fe.value[oe].token&&null==fe.value[oe].type)X={value:!0};else{if(1==D.runEqualityFunction(X.value[oe],fe.value[oe],[],this,re).value){oe++;continue}X=D.runTotalGtFunction(X.value[oe],fe.value[oe],[])}}return 1==X.value?"ASC"===he?1:-1:"ASC"===he?-1:1}oe++}},QueryEngine.prototype.removeDefaultGraphBindings=function(X,fe){for(var ne=[],re={},oe=0;oe<fe.named.length;oe++)re[fe.named[oe].oid]=!0;for(oe=0;oe<fe.implicit.length;oe++)null==re[fe.implicit[oe].oid]&&ne.push(fe.implicit[oe].oid);for(ne=[],oe=0;oe<X.length;oe++){var V,he=X[oe],pe=!1;for(V in he){for(var W=0;W<re.length;W++)if(he[V]===re[W]){pe=!0;break}if(pe)break}pe||ne.push(he)}return ne},QueryEngine.prototype.aggregateBindings=function(X,fe,ne,re,oe){this.copyDenormalizedBindings(fe,re.outCache,function(he){for(var pe={},V=0;V<X.length;V++){var W=D.runAggregator(X[V],he,this,ne,re);X[V].alias?pe[X[V].alias.value]=W:pe[X[V].value.value]=W}oe(pe)})},QueryEngine.prototype.projectBindings=function(X,fe,ne){if("*"===X[0].kind)return fe;for(var re=[],oe=0;oe<fe.length;oe++){for(var he=fe[oe],pe={},V=!0,W=0;W<X.length;W++)if("variable"==X[W].token&&"aliased"!=X[W].kind)pe[X[W].value.value]=he[X[W].value.value];else if("variable"==X[W].token&&"aliased"==X[W].kind){var ee=D.runFilter(X[W].expression,he,this,ne,{blanks:{},outCache:{}});if(D.isEbvError(ee)){V=!1;break}pe[X[W].alias.value]=ee}!0===V&&re.push(pe)}return re},QueryEngine.prototype.resolveNsInEnvironment=function(X,fe){return fe.namespaces[X]},QueryEngine.prototype.normalizeTerm=function(X,fe,ne,re){if("uri"===X.token)null==(X=T.lexicalFormBaseUri(X,fe))?re(null):ne?this.lexicon.registerUri(X,re):this.lexicon.resolveUri(X,re);else if("literal"===X.token)X=T.lexicalFormLiteral(X,fe),ne?this.lexicon.registerLiteral(X,re):this.lexicon.resolveLiteral(X,re);else if("blank"===X.token){var oe=X.value;null!=(X=fe.blanks[oe])?re(X):ne?this.lexicon.registerBlank(function(he){fe.blanks[oe]=he,re(he)}):this.lexicon.resolveBlank(function(he){fe.blanks[oe]=he,re(he)})}else"var"===X.token?re(X.value):re(null)},QueryEngine.prototype.normalizeDatasets=function(X,fe,ne){var re=this;G.eachSeries(X,function(oe,he){oe.value===re.lexicon.defaultGraphUri?(oe.oid=re.lexicon.defaultGraphOid,he()):re.normalizeTerm(oe,fe,!1,function(pe){null!=pe&&(oe.oid=pe),he()})},function(){ne(!0)})},QueryEngine.prototype.normalizeQuad=function(X,fe,ne,re){var oe=null,he=null,pe=null,V=null,W=this,ee=!1;G.seq(function(ge){if(null==X.graph||X.graph.value===W.lexicon.defaultGraphUri)V=0,ge();else{var Se=T.lexicalFormBaseUri(X.graph,fe);W.normalizeTerm(X.graph,fe,ne,function(Le){null!=Le?(V=Le,!0===ne&&"var"!=X.graph.token?W.lexicon.registerGraph(Le,Se,function(){ge()}):ge()):(ee=!0,ge())})}},function(ge){!1===ee?W.normalizeTerm(X.subject,fe,ne,function(Se){null!=Se?oe=Se:ee=!0,ge()}):ge()},function(ge){!1===ee?W.normalizeTerm(X.predicate,fe,ne,function(Se){null!=Se?he=Se:ee=!0,ge()}):ge()},function(ge){!1===ee?W.normalizeTerm(X.object,fe,ne,function(Se){null!=Se?pe=Se:ee=!0,ge()}):ge()})(function(){re(!0===ee?null:{subject:oe,predicate:he,object:pe,graph:V})})},QueryEngine.prototype.denormalizeBindingsList=function(X,fe,ne){var re=this,oe=[];G.eachSeries(X,function(he,pe){re.denormalizeBindings(he,fe,function(V){oe.push(V),pe()})},function(){ne(oe)})},QueryEngine.prototype.copyDenormalizedBindings=function(X,fe,ne){var re=this,oe=[];G.eachSeries(X,function(he,pe){var V={},W=Y.keys(he);G.eachSeries(W,function(ee,ge){var Se=he[ee];if(null==Se)V[ee]=null,ge();else if("object"==typeof Se)V[ee]=Se,ge();else{var Le=fe[Se];null!=Le?(V[ee]=Le,ge()):re.lexicon.retrieve(Se,function(Ne){fe[Se]=Ne,V[ee]=Ne,ge()})}},function(){oe.push(V),pe()})},function(){ne(oe)})},QueryEngine.prototype.denormalizeBindings=function(X,fe,ne){var re=Y.keys(X),oe=fe.outCache,he=this;G.eachSeries(re,function(pe,V){var W=X[pe];null==W?(X[pe]=null,V()):"object"==typeof W?V():null!=oe[W]?(X[pe]=oe[W],V()):he.lexicon.retrieve(W,function(ee){X[pe]=ee,"blank"===ee.token&&(fe.blanks[ee.value]=W),V()})},function(){ne(X)})},QueryEngine.prototype.execute=function(X,fe,ne,re){if(X=T.normalizeUnicodeLiterals(X),null==(X=this.abstractQueryTree.parseQueryString(X)))fe(!1,"Error parsing query string");else if("query"===X.token&&"update"==X.kind){this.callbacksBackend.startGraphModification();var oe=this;this.executeUpdate(X,function(he,pe){oe.lexicon.updateAfterWrite&&oe.lexicon.updateAfterWrite(),he?(oe.callbacksBackend.cancelGraphModification(),fe(he,pe)):oe.callbacksBackend.endGraphModification(function(){fe(he,pe)})})}else"query"===X.token&&"query"==X.kind&&this.executeQuery(X,fe,ne,re)},QueryEngine.prototype.executeQuery=function(X,fe,ne,re){var oe=X.units,he=this,pe={blanks:{},outCache:{}};this.registerNsInEnvironment(X.prologue,pe);var V=he.abstractQueryTree.parseExecutableUnit(oe[0]);"select"===V.kind?this.executeSelect(V,pe,ne,re,function(W,ee){null==W?"object"==typeof ee&&!0===ee.denorm?fe(null,ee.bindings):he.denormalizeBindingsList(ee,pe,function(ge){fe(null,ge)}):fe(W)}):"ask"===V.kind?(V.projection=[{token:"variable",kind:"*"}],this.executeSelect(V,pe,ne,re,function(W,ee){null==W?0<ee.length?fe(null,!0):fe(null,!1):fe(W)})):"construct"===V.kind&&(V.projection=[{token:"variable",kind:"*"}],he=this,this.executeSelect(V,pe,ne,re,function(W,ee){null==W?he.denormalizeBindingsList(ee,pe,function(ge){if(null!=ge){var Se=new O.Graph;null==V.template&&(V.template={triplesContext:V.pattern});for(var Le=1,Ne=[],Qe=0;Qe<ge.length;Qe++){for(var $e=ge[Qe],ke=0;ke<Ne.length;ke++)delete Ne[ke].valuetmp;for(ke=0;ke<V.template.triplesContext.length;ke++){for(var se=["subject","predicate","object"],me=V.template.triplesContext[ke],_e=0;_e<se.length;_e++){var qe=se[_e];if("blank"===me[qe].token&&(!me[qe].valuetmp||null==me[qe].valuetmp)){var Ze="_:b"+Le;Le++,me[qe].valuetmp=Ze,Ne.push(me[qe])}}se=O.buildRDFResource(me.subject,$e,he,pe),_e=O.buildRDFResource(me.predicate,$e,he,pe),me=O.buildRDFResource(me.object,$e,he,pe),null!=se&&null!=_e&&null!=me&&(_e=new O.Triple(se,_e,me),Se.add(_e))}}fe(null,Se)}else fe(Error("Error denormalizing bindings."))}):fe(W)}))},QueryEngine.prototype.executeSelect=function(X,fe,ne,re,oe){if("select"===X.kind||"ask"===X.kind||"construct"===X.kind||"modify"===X.kind){var he=X.projection,pe=X.dataset,V=X.modifier,W=X.limit,ee=X.offset,ge=X.order,Se=this;(null!=ne||null!=re)&&(pe.implicit=ne||[],pe.named=re||[]),null!=pe.implicit&&0===pe.implicit.length&&null!=pe.named&&0===pe.named.length&&pe.implicit.push(this.lexicon.defaultGraphUriTerm),Se.normalizeDatasets(pe.implicit.concat(pe.named),fe,function(){try{Se.executeSelectUnit(he,pe,X.pattern,fe,function(Le){if(null!=Le){if(null!=X.group&&""===X.group){for(var Ne=!1,Qe=0;Qe<X.projection.length;Qe++)if(null!=X.projection[Qe].expression&&"aggregate"===X.projection[Qe].expression.expressionType){Ne=!0;break}!0===Ne&&(X.group="singleGroup")}X.group&&""!=X.group?Se.checkGroupSemantics(X.group,he)?Se.groupSolution(Le,X.group,pe,fe,function($e){var ke=[];G.eachSeries($e,function(se,me){Se.aggregateBindings(he,se,pe,fe,function(_e){ke.push(_e),me()})},function(){oe(null,{bindings:ke,denorm:!0})})}):oe(Error("Incompatible Group and Projection variables")):Se.applyOrderBy(ge,Le,pe,fe,function($e){$e=Se.projectBindings(he,$e,pe),$e=Se.applyModifier(V,$e),$e=Se.applyLimitOffset(ee,W,$e),$e=Se.removeDefaultGraphBindings($e,pe),oe(null,$e)})}else oe(Error("Error executing SELECT query."))})}catch(Le){oe(Le)}})}else oe(Error("Cannot execute "+X.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(X,fe,ne,re,oe){var he=[],pe=[],V=!1,W=this;"singleGroup"===fe?oe([X]):G.eachSeries(X,function(ee,ge){var Se=!0;G.eachSeries(fe,function(Le,Ne){var Qe=null;if("var"===Le.token)Qe=Le.value,0==V&&he.push(Qe),Ne();else if("aliased_expression"===Le.token){if(Qe=Le.alias.value,0==V&&he.push(Qe),"var"===Le.expression.primaryexpression)ee[Le.alias.value]=ee[Le.expression.value.value];else{var $e=W.copyDenormalizedBindings([ee],re.outCache);$e=D.runFilter(Le.expression,$e[0],W,ne,re);D.isEbvError($e)?Se=!1:(null!=$e.value&&($e.value=""+$e.value),ee[Le.alias.value]=$e)}Ne()}else W.copyDenormalizedBindings([ee],re.outCache,function(ke){ke=D.runFilter(Le,ke[0],W,re),D.isEbvError(ke)?Se=!1:(ee["groupCondition"+env._i]=ke,Qe="groupCondition"+env._i,0==V&&he.push(Qe)),Ne()})},function(){0==V&&(V=!0),!0===Se&&pe.push(ee),ge()})},function(){for(var ee={},Qe=0;Qe<pe.length;Qe++){for(var ge=pe[Qe],Ne="",Se=0;Se<he.length;Se++){var Le=ge[he[Se]];Ne="object"==typeof Le?Ne+Le.value:Ne+Le}null==ee[Ne]?ee[Ne]=[ge]:ee[Ne].push(ge)}var $e;Qe=[];for($e in ee)Qe.push(ee[$e]);oe(Qe)})},QueryEngine.prototype.executeSelectUnit=function(X,fe,ne,re,oe){if("BGP"===ne.kind)this.executeAndBGP(X,fe,ne,re,oe);else if("UNION"===ne.kind)this.executeUNION(X,fe,ne.value,re,oe);else if("JOIN"===ne.kind)this.executeJOIN(X,fe,ne,re,oe);else if("LEFT_JOIN"===ne.kind)this.executeLEFT_JOIN(X,fe,ne,re,oe);else if("FILTER"===ne.kind){var he=this;this.executeSelectUnit(X,fe,ne.value,re,function(pe){null!=pe?D.checkFilters(ne,pe,!1,fe,re,he,oe):oe([])})}else{if("EMPTY_PATTERN"!==ne.kind)throw new N(ne.kind);oe([])}},QueryEngine.prototype.executeUNION=function(X,fe,ne,re,oe){var W,ee,he=ne[0],pe=ne[1],V=null;if(2!=ne.length)throw"SPARQL algebra UNION with more than two components";var ge=this;G.seq(function(Se){try{ge.executeSelectUnit(X,fe,he,re,function(Le){W=Le,Se()})}catch(Le){V=Le,Se()}},function(Se){if(null==V)try{ge.executeSelectUnit(X,fe,pe,re,function(Le){ee=Le,Se()})}catch(Le){V=Le,Se()}else Se()})(function(){if(null!=V)oe(V);else{var Se=I.unionBindings(W,ee);ge.runBinds(ne.binds,Se,fe,re,function(Le,Ne){if(null!=Le)throw new ye("Error processing bind expressions",ne.binds,Le);D.checkFilters(ne,Ne,!1,fe,re,ge,oe)})}})},QueryEngine.prototype.executeAndBGP=function(X,fe,ne,re,oe){var he=this;I.executeAndBGPsDPSize(ne.value,fe,this,re,function(pe){null!=pe?he.runBinds(ne.binds,pe,fe,re,function(V,W){if(null!=V)throw new ye("Error processing bind expressions",ne.binds,V);D.checkFilters(ne,W,!1,fe,re,he,oe)}):oe(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(X,fe,ne,re,oe){var he=ne.lvalue,pe=ne.rvalue;if("EMPTY_PATTERN"===he.kind)this.executeSelectUnit(X,fe,pe,re,oe);else{var Se,Le,V=null,W=null,ee=null,ge=this;G.seq(function(Ne){try{ge.executeSelectUnit(X,fe,he,re,function(Qe){V=Qe,Ne()})}catch(Qe){ee=Qe,Ne()}},function(Ne){if(null!=ee)Ne();else try{ge.executeSelectUnit(X,fe,pe,re,function(Qe){W=Qe,Ne()})}catch(Qe){ee=Qe,Ne()}})(function(){if(null!=ee)oe(ee);else{var Ne=I.leftOuterJoinBindings(V,W);ge.runBinds(ne.binds,Ne,fe,re,function(Qe,$e){if(null!=Qe)throw new ye("Error processing bind expressions",ne.binds,Qe);D.checkFilters(ne,Ne,!0,fe,re,ge,function(ke){if(1<V.length&&1<W.length){var _e,se=[],me={};for(_e in V[0])me[_e]=!0;for(_e in W[0])1!=me[_e]&&se.push(_e);for(Se=[],Le={},me=0;me<ke.length;me++)if(!0===ke[me].__nullify__){for(var qe=0;qe<se.length;qe++)ke[me].bindings[se[qe]]=null;qe=[];var Ze=[];for(_e in ke[me].bindings)null!=ke[me].bindings[_e]&&(qe.push(_e+ke[me].bindings[_e]),qe.sort(),Ze.push(qe.join("")));if(null==Le[qe.join("")]){for(qe=0;qe<Ze.length;qe++)Le[Ze[qe]]=!0;Se.push(ke[me].bindings)}}else for(_e in Se.push(ke[me]),qe=[],ke[me])qe.push(_e+ke[me][_e]),qe.sort(),Le[qe.join("")]=!0;oe(Se)}else oe(ke)})})}})}},QueryEngine.prototype.executeJOIN=function(X,fe,ne,re,oe){var he=ne.lvalue,pe=ne.rvalue,V=null,W=null,ee=null,ge=this;G.seq(function(Se){try{ge.executeSelectUnit(X,fe,he,re,function(Le){V=Le,Se()})}catch(Le){ee=Le,Se()}},function(Se){if(null!=ee)Se();else try{ge.executeSelectUnit(X,fe,pe,re,function(Le){W=Le,Se()})}catch(Le){ee=Le,Se()}})(function(){var Se=null;if(null!=ee)oe(ee);else if(0===V.length||0===W.length)oe([]);else{Se={};var Ne,Le=[];for(Ne in V[0])Se[Ne]=!1;for(Ne in W[0])!1===Se[Ne]&&Le.push(Ne);Se=0==Le.length||ge.abstractQueryTree.treeWithUnion(he)||ge.abstractQueryTree.treeWithUnion(pe)?I.joinBindings(V,W):I.joinBindings2(Le,V,W),ge.runBinds(ne.binds,Se,fe,re,function($e,ke){if(null!=$e)throw new ye("Error processing bind expressions",ne.binds,$e);D.checkFilters(ne,ke,!1,fe,re,ge,oe)})}})},QueryEngine.prototype.rangeQuery=function(X,fe,ne){var re=this;re.normalizeQuad(X,fe,!1,function(oe){null!=oe?re.backend.range(new _.Pattern(oe),function(he){null==he||0==he.length?ne([]):ne(he)}):ne(null)})},QueryEngine.prototype.executeUpdate=function(X,fe){var ne=X.units,re=this,oe={blanks:{},outCache:{}};this.registerNsInEnvironment(X.prologue,oe);for(var he=0;he<ne.length;he++){var pe=re.abstractQueryTree.parseExecutableUnit(ne[he]);if("insertdata"===pe.kind){var V=null;G.eachSeries(pe.quads,function(ee,ge){null===V?re._executeQuadInsert(ee,oe,function(Se){null!=Se&&(V=Se),ge()}):ge()},function(){null===V?fe(null,!0):fe(V)})}else if("deletedata"===pe.kind)V=null,G.eachSeries(pe.quads,function(ee,ge){null===V?re._executeQuadDelete(ee,oe,function(Se){null!=Se&&(V=Se),ge()}):ge()},function(){null===V?fe(null,!0):fe(V)});else if("modify"===pe.kind)this._executeModifyQuery(pe,oe,fe);else if("create"===pe.kind)fe(!0);else if("load"===pe.kind){var W={uri:T.lexicalFormBaseUri(pe.sourceGraph,oe)};null!=pe.destinyGraph&&(W={uri:T.lexicalFormBaseUri(pe.destinyGraph,oe)}),re=this,this.rdfLoader.load(pe.sourceGraph.value,W,function(ee,ge){ee?fe(Error("error batch loading quads")):re.batchLoad(ge,function(Se){null!==Se?fe(null,Se):fe(Error("Error batch loading quads"))})})}else if("drop"===pe.kind)this._executeClearGraph(pe.destinyGraph,oe,fe);else{if("clear"!==pe.kind)throw Error("not supported execution unit");this._executeClearGraph(pe.destinyGraph,oe,fe)}}},QueryEngine.prototype.batchLoad=function(X,fe){var ne=0,re={},oe=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();G.eachSeries(X,function(pe,V){var W={};G.eachSeries(["subject","predicate","object","graph"],function(ee,ge){!function(pe,V,W,ee){var ge;if(pe[V].uri||"uri"===pe[V].token){var Se=pe[V].uri||pe[V].value;oe.lexicon.registerUri(Se,function(Le){var Ne=function(){null!=pe[V].uri&&(pe[V]={token:"uri",value:pe[V].uri},delete pe[V].uri),W[V]=Le,ee()};"graph"===V?oe.lexicon.registerGraph(Le,Se,function(){Ne()}):Ne()})}else pe[V].literal||"literal"===pe[V].token?oe.lexicon.registerLiteral(pe[V].literal||pe[V].value,function(Le){null!=pe[V].literal&&(pe[V]=oe.lexicon.parseLiteral(pe[V].literal),delete pe[V].literal),W[V]=Le,ee()}):null==(ge=re[pe[V].blank||pe[V].value])?oe.lexicon.registerBlank(function(Le){re[pe[V].blank||pe[V].value]=Le,null==pe[V].token&&(pe[V].token="blank",pe[V].value=pe[V].blank,delete pe[V].blank),W[V]=Le,ee()}):(null==pe[V].token&&(pe[V].token="blank",pe[V].value=pe[V].blank,delete pe[V].blank),W[V]=ge,ee())}(pe,ee,W,ge)},function(){var ee=pe;pe=W;var ge=new _.NodeKey(pe);oe.backend.search(ge,function(Se){Se?V():oe.backend.index(ge,function(Le){Le&&(oe.eventsOnBatchLoad&&oe.callbacksBackend.nextGraphModification(R.added,[ee,pe]),ne+=1),V()})})})},function(){null!=oe.lexicon.updateAfterWrite&&oe.lexicon.updateAfterWrite();var pe=function(){fe(ne)};oe.eventsOnBatchLoad?oe.callbacksBackend.endGraphModification(pe()):pe()})},QueryEngine.prototype._executeModifyQuery=function(X,fe,ne){var re=this,oe=!0,he=Error("Error executing modify query"),pe=null,V=["subject","predicate","object","graph"];X.insert=null==X.insert?[]:X.insert,X.delete=null==X.delete?[]:X.delete,G.seq(function(W){var ee=[],ge=[];if(null!=X.with&&ee.push(X.with),null!=X.using){ge=[];for(var Se=0;Se<X.using.length;Se++){var Le=X.using[Se];"named"===Le.kind?ge.push(Le.uri):ee.push(Le.uri)}}X.dataset={},X.projection=[{token:"variable",kind:"*"}],re.executeSelect(X,fe,ee,ge,function(Ne,Qe){if(Ne)return he=Ne,oe=!1,W();re.denormalizeBindingsList(Qe,fe,function($e){null!=$e?pe=$e:(he=Error("Error denormalizing bindings list"),oe=!1),W()})})},function(W){var ee=X.with;if(oe){for(var ge=[],Se=0;Se<X.delete.length;Se++)for(var Le=X.delete[Se],Ne=0;Ne<pe.length;Ne++){for(var Qe={},$e=pe[Ne],ke=0;ke<V.length;ke++){var se=V[ke];"graph"==se&&null==Le[se]?Qe.graph=ee:Qe[se]="var"===Le[se].token?$e[Le[se].value]:Le[se]}ge.push(Qe)}G.eachSeries(ge,function(me,_e){re._executeQuadDelete(me,fe,function(){_e()})},function(){W()})}else W()},function(W){var ee=X.with;if(oe){for(var ge=[],Se=0;Se<X.insert.length;Se++)for(var Le=X.insert[Se],Ne=0;Ne<pe.length;Ne++){for(var Qe={},$e=pe[Ne],ke=0;ke<V.length;ke++){var se=V[ke];"graph"==se&&null==Le[se]?Qe.graph=ee:Qe[se]="var"===Le[se].token?$e[Le[se].value]:Le[se]}ge.push(Qe)}G.eachSeries(ge,function(me,_e){re._executeQuadInsert(me,fe,function(){_e()})},function(){W()})}else W()})(function(){ne(oe?null:he)})},QueryEngine.prototype._executeQuadInsert=function(X,fe,ne){var oe,re=this,he=!1,pe=null;G.seq(function(V){re.normalizeQuad(X,fe,!0,function(W){null!=W?oe=W:(he=!0,pe="Error normalizing quad."),V()})},function(V){if(!1===he){var W=new _.NodeKey(oe);re.backend.search(W,function(ee){!0===ee?V():re.backend.index(W,function(){re.callbacksBackend.nextGraphModification(R.added,[X,oe]),V()})})}else V()})(function(){he?ne(Error(pe)):ne(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(X,fe,ne){var oe,pe,V,re=this,he=!1;G.seq(function(W){re.normalizeQuad(X,fe,!0,function(ee){null!=ee?oe=ee:(he=!0,pe="Error normalizing quad."),W()})},function(W){!1===he?(V=new _.NodeKey(oe),re.backend.delete(V,function(){W()})):W()},function(W){!1===he?re.lexicon.unregister(X,V,function(){re.callbacksBackend.nextGraphModification(R.deleted,[X,oe]),W()}):W()})(function(){he?ne(Error(pe)):ne(null,!0)})},QueryEngine.prototype._executeClearGraph=function(X,fe,ne){var re=this;"default"===X?this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",ne):"named"===X?re.lexicon.registeredGraphs(!0,function(oe){if(null!=oe){var he=!1;G.eachSeries(oe,function(pe,V){he?V():re.execute("DELETE { GRAPH <"+pe+"> { ?s ?p ?o } } WHERE { GRAPH <"+pe+"> { ?s ?p ?o } }",function(W,ee){W?(he=W,V()):re.lexicon.resolveUri(pe,function(ge){-1!=ge?re.lexicon.knownGraphs.delete(ge,function(){V()}):(he="Cannot find graph "+pe+" to clear it",V())})})},function(){ne(!he)})}else ne(!1,"Error deleting named graphs")}):"all"===X?(re=this,this.execute("CLEAR DEFAULT",function(oe,he){oe?ne(!1,he):re.execute("CLEAR NAMED",ne)})):"uri"==X.token?null!=(X=T.lexicalFormBaseUri(X,fe))?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+X+"> { ?s ?p ?o } } WHERE { GRAPH <"+X+"> { ?s ?p ?o } }",function(oe){re.callbacksBackend.ongoingModification=!1,ne(oe)})):ne(!1,"wrong graph URI"):ne(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(X,fe){if("singleGroup"===X)return!0;for(var ne={},re=0;re<X.length;re++){var oe=X[re];"var"===oe.token?ne[oe.value]=!0:"aliased_expression"===oe.token&&(ne[oe.alias.value]=!0)}for(re=0;re<fe.length;re++)if("var"===(oe=fe[re]).kind){if(null==ne[oe.value.value])return!1}else if("aliased"===oe.kind&&oe.expression&&"var"===oe.expression.primaryexpression&&null==ne[oe.expression.value.value])return!1;return!0},QueryEngine.prototype.runBinds=function(X,fe,ne,re,oe){var he=this;null!=X&&0<X.length?he.copyDenormalizedBindings(fe,re.outCache,function(pe){for(var V=0;V<fe.length;V++)for(var W=0;W<X.length;W++){var ee=X[W],ge=D.runFilter(ee.expression,pe[V],he,ne,re);D.isEbvError(ge)?oe(ge):fe[V][ee.as.value]=ge}oe(null,fe)}):oe(null,fe)},QueryEngine.prototype.computeCosts=function(X,fe,ne){for(var re=0;re<X.length;re++)X[re]._cost=this.quadCost(X[re],fe);ne(X)},QueryEngine.prototype.quadCost=function(X,fe){return 1},QueryEngine.prototype.registerDefaultNamespace=function(X,fe){this.defaultPrefixes[X]=fe},Ee.exports={QueryEngine}},{"./abstract_query_tree":40,"./graph_callbacks":43,"./quad_index":51,"./query_filters":53,"./query_plan":54,"./rdf_loader":55,"./rdf_model":56,"./utils":58}],53:[function(Ce,Ee,Be){var ye=Ce("./utils"),j=Ce("./utils");QueryFilters={checkFilters:function(N,T,_,I,D,O,s){var R=[];N.filter&&"function"!=typeof N.filter&&(R=N.filter);var G=[];if(null==R||0===R.length||null!=N.length)return s(T);QueryFilters.preprocessExistentialFilters(R,T,O,I,D,function(Y){j.eachSeries(Y,function(X,fe){QueryFilters.run(X.value,T,_,I,D,O,function(ne){for(var re=[],oe=0;oe<ne.length;oe++){var he=ne[oe];null!=he.__nullify__?G.push(he):re.push(he)}T=re,fe()})},function(){s(T.concat(G))})})},preprocessExistentialFilters:function(N,T,_,I,D,O){var s=[];j.eachSeries(N,function(R,G){if("builtincall"!==R.value.expressionType||"exists"!==R.value.builtincall&&"notexists"!==R.value.builtincall)if("conditionalor"===R.value.expressionType||"conditionaland"===R.value.expressionType){var Y=ye.map(R.value.operands,function(re){return{value:re}});QueryFilters.preprocessExistentialFilters(Y,T,_,I,D,function(re){R.value.operands=re.map(function(oe){return oe.value}),s.push(R),G()})}else"multiplicativeexpression"===R.value.expressionType?(Y=ye.map(R.value.factors,function(re){return{value:re}}),QueryFilters.preprocessExistentialFilters(Y,T,_,I,D,function(re){R.value.factors=re.map(function(oe){return oe.value}),s.push(R),G()})):"additiveexpression"===R.value.expressionType?(Y=ye.map(R.value.summands,function(re){return{value:re}}),QueryFilters.preprocessExistentialFilters(Y,T,_,I,D,function(re){R.value.summands=re.map(function(oe){return oe.value}),s.push(R),G()})):"relationalexpression"===R.value.expressionType?(Y=[{value:R.value.op1},{value:R.value.op2}],QueryFilters.preprocessExistentialFilters(Y,T,_,I,D,function(re){R.value.op1=re[0].value,R.value.op2=re[1].value,s.push(R),G()})):"irireforfunction"!==R.value.expressionType&&"custom"!==R.value.expressionType||null==R.value.args?(s.push(R),G()):(Y=ye.map(R.value.args,function(re){return{value:re}}),QueryFilters.preprocessExistentialFilters(Y,T,_,I,D,function(re){R.value.args=re.map(function(oe){return oe.value}),s.push(R),G()}));else{var X=R.value.builtincall,fe=R.value.args,ne={};_.copyDenormalizedBindings(T,D.outCache,function(re){j.eachSeries(re,function(oe,he){var pe=ye.clone(fe[0],!0);pe=_.abstractQueryTree.parseSelect({pattern:pe},oe),pe=_.abstractQueryTree.bind(pe.pattern,oe);_.executeSelectUnit([{kind:"*"}],I,pe,D,function(V){var W="exists"===X?QueryFilters.ebvBoolean(0!==V.length):QueryFilters.ebvBoolean(0===V.length);for(var ee in V=[],oe)V.push(JSON.stringify(oe[ee]));V=V.sort().join(""),ne[V]=W,he()})},function(){R.value.origArgs=R.value.args,R.value.args=ne,s.push(R),G()})})}},function(){O(s)})},boundVars:function(N){if(null==N.expressionType)throw"Cannot find bound expressions in a no expression token";if("relationalexpression"==(T=N.expressionType))return T=N.op2,QueryFilters.boundVars(N.op1)+QueryFilters.boundVars(T);if("conditionalor"==T||"conditionaland"==T){for(var _=[],T=0;T<N.operands;T++)_=_.concat(QueryFilters.boundVars(N.operands[T]));return _}if("builtincall"==T){if(null==N.args)return[];for(_=[],T=0;T<N.args.length;T++)_=_.concat(QueryFilters.boundVars(N.args[T]));return _}if("multiplicativeexpression"==T){for(_=QueryFilters.boundVars(N.factor),T=0;T<N.factors.length;T++)_=_.concat(QueryFilters.boundVars(N.factors[T].expression));return _}if("additiveexpression"==T){for(_=QueryFilters.boundVars(N.summand),T=0;T<N.summands.length;T++)_=_.concat(QueryFilters.boundVars(N.summands[T].expression));return _}return"regex"==T?(_=QueryFilters.boundVars(N.expression1)).concat(QueryFilters.boundVars(N.expression2)):"unaryexpression"==T?QueryFilters.boundVars(N.expression):"atomic"==T?"var"==N.primaryexpression?[N.value]:[]:void 0},run:function(N,T,_,I,D,O,s){O.copyDenormalizedBindings(T,D.outCache,function(R){for(var G=[],Y=0;Y<T.length;Y++){var X=QueryFilters.runFilter(N,R[Y],O,I,D);X=QueryFilters.ebv(X);QueryFilters.isEbvError(X)?_&&(X={__nullify__:!0,bindings:T[Y]},G.push(X)):!0===X?G.push(T[Y]):_&&(X={__nullify__:!0,bindings:T[Y]},G.push(X))}s(G)})},collect:function(N,T,_,I,D,O){D.copyDenormalizedBindings(T,I.outCache,function(s){for(var R=[],G=0;G<s.length;G++){var Y=QueryFilters.runFilter(N,s[G],D,_,I);R.push({binding:T[G],value:Y})}return O(R)})},runDistinct:function(N,T){},runAggregator:function(N,T,_,I,D){if(null==T||0===T.length)return QueryFilters.ebvError();if("variable"===N.token&&"var"==N.kind)return T[0][N.value.value];if("variable"===N.token&&"aliased"===N.kind){if("atomic"===N.expression.expressionType&&"var"===N.expression.primaryexpression)return T[0][N.expression.value.value];if("aggregate"===N.expression.expressionType){if("max"===N.expression.aggregateType){for(var O=null,s=0;s<T.length;s++){var R=T[s];R=QueryFilters.runFilter(N.expression.expression,R,_,I,D);QueryFilters.isEbvError(R)||(null===O||!0===QueryFilters.runLtFunction(O,R).value)&&(O=R)}return null===O?QueryFilters.ebvError():O}if("min"===N.expression.aggregateType){for(O=null,s=0;s<T.length;s++)R=T[s],R=QueryFilters.runFilter(N.expression.expression,R,_,I,D),QueryFilters.isEbvError(R)||(null===O||!0===QueryFilters.runGtFunction(O,R).value)&&(O=R);return null===O?QueryFilters.ebvError():O}if("count"===N.expression.aggregateType){O={};var G=0;if("*"===N.expression.expression)if(null!=N.expression.distinct&&""!=N.expression.distinct)for(s=0;s<T.length;s++){R=T[s];var Y=ye.hashTerm(R);null==O[Y]&&(O[Y]=!0,G++)}else G=T.length;else for(s=0;s<T.length;s++)R=T[s],R=QueryFilters.runFilter(N.expression.expression,R,_,I,D),QueryFilters.isEbvError(R)||(null!=N.expression.distinct&&""!=N.expression.distinct?null==O[Y=ye.hashTerm(R)]&&(O[Y]=!0,G++):G++);return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+G}}if("avg"===N.expression.aggregateType){O={};var X={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"};for(s=G=0;s<T.length;s++)R=T[s],R=QueryFilters.runFilter(N.expression.expression,R,_,I,D),QueryFilters.isEbvError(R)||(null!=N.expression.distinct&&""!=N.expression.distinct?null==O[Y=ye.hashTerm(R)]&&(O[Y]=!0,QueryFilters.isNumeric(R)&&(X=QueryFilters.runSumFunction(X,R),G++)):QueryFilters.isNumeric(R)&&(X=QueryFilters.runSumFunction(X,R),G++));return(N=QueryFilters.runDivFunction(X,{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+G})).value=""+N.value,N}if("sum"===N.expression.aggregateType){for(O={},X={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"},s=0;s<T.length;s++)R=T[s],R=QueryFilters.runFilter(N.expression.expression,R,_,I,D),QueryFilters.isEbvError(R)||(null!=N.expression.distinct&&""!=N.expression.distinct?null==O[Y=ye.hashTerm(R)]&&(O[Y]=!0,QueryFilters.isNumeric(R)&&(X=QueryFilters.runSumFunction(X,R))):QueryFilters.isNumeric(R)&&(X=QueryFilters.runSumFunction(X,R)));return X.value=""+X.value,X}return QueryFilters.runFilter(aggregate.expression,T[0],I,{blanks:{},outCache:{}})}}},runFilter:function(N,T,_,I,D){if(null!=N.expressionType){if("relationalexpression"==(O=N.expressionType)){var O=QueryFilters.runFilter(N.op1,T,_,I,D),s=QueryFilters.runFilter(N.op2,T,_,I,D);return QueryFilters.runRelationalFilter(N,O,s,T,_,I,D)}if("conditionalor"==O)return QueryFilters.runOrFunction(N,T,_,I,D);if("conditionaland"==O)return QueryFilters.runAndFunction(N,T,_,I,D);if("additiveexpression"==O)return QueryFilters.runAddition(N.summand,N.summands,T,_,I,D);if("builtincall"==O)return QueryFilters.runBuiltInCall(N.builtincall,N.args,T,_,I,D);if("multiplicativeexpression"==O)return QueryFilters.runMultiplication(N.factor,N.factors,T,_,I,D);if("unaryexpression"==O)return QueryFilters.runUnaryExpression(N.unaryexpression,N.expression,T,_,I,D);if("irireforfunction"==O)return QueryFilters.runIriRefOrFunction(N.iriref,N.args,T,_,I,D);if("regex"==O)return QueryFilters.runRegex(N.text,N.pattern,N.flags,T,_,I,D);if("custom"==O)return QueryFilters.runBuiltInCall(N.name,N.args,T,_,I,D);if("atomic"==O)return"var"==N.primaryexpression?T[N.value.value]:("object"==typeof N.value&&null!=N.value.type&&"object"==typeof N.value.type&&(N.value.type=ye.lexicalFormBaseUri(N.value.type,D)),N.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},isRDFTerm:function(N){return null!=N&&!!(N.token&&"literal"==N.token||N.token&&"uri"==N.token||N.token&&"blank"==N.token)},RDFTermEquality:function(N,T,_,I){return"literal"===N.token&&"literal"===T.token?N.lang==T.lang&&N.type==T.type&&N.value==T.value||!!(null!=N.type&&null!=T.type||QueryFilters.isSimpleLiteral(N)&&null!=T.type||QueryFilters.isSimpleLiteral(T)&&null!=N.type)&&QueryFilters.ebvError():"uri"===N.token&&"uri"===T.token?ye.lexicalFormBaseUri(N,I)==ye.lexicalFormBaseUri(T,I):"blank"===N.token&&"blank"===T.token&&N.value==T.value},isInteger:function(N){return null!=N&&("literal"===N.token&&("http://www.w3.org/2001/XMLSchema#integer"==N.type||"http://www.w3.org/2001/XMLSchema#decimal"==N.type||"http://www.w3.org/2001/XMLSchema#double"==N.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==N.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==N.type||"http://www.w3.org/2001/XMLSchema#long"==N.type||"http://www.w3.org/2001/XMLSchema#int"==N.type||"http://www.w3.org/2001/XMLSchema#short"==N.type||"http://www.w3.org/2001/XMLSchema#byte"==N.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==N.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==N.type))},isFloat:function(N){return null!=N&&("literal"===N.token&&"http://www.w3.org/2001/XMLSchema#float"==N.type)},isDecimal:function(N){return null!=N&&("literal"===N.token&&"http://www.w3.org/2001/XMLSchema#decimal"==N.type)},isDouble:function(N){return null!=N&&("literal"===N.token&&"http://www.w3.org/2001/XMLSchema#double"==N.type)},isNumeric:function(N){return null!=N&&("literal"===N.token&&("http://www.w3.org/2001/XMLSchema#integer"==N.type||"http://www.w3.org/2001/XMLSchema#decimal"==N.type||"http://www.w3.org/2001/XMLSchema#float"==N.type||"http://www.w3.org/2001/XMLSchema#double"==N.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==N.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==N.type||"http://www.w3.org/2001/XMLSchema#long"==N.type||"http://www.w3.org/2001/XMLSchema#int"==N.type||"http://www.w3.org/2001/XMLSchema#short"==N.type||"http://www.w3.org/2001/XMLSchema#byte"==N.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==N.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==N.type))},isSimpleLiteral:function(N){return!(!N||"literal"!=N.token)&&(null==N.type&&null==N.lang)},isXsdType:function(N,T){return!(!T||"literal"!=T.token)&&T.type=="http://www.w3.org/2001/XMLSchema#"+N},ebv:function(N){if(null==N||QueryFilters.isEbvError(N))return QueryFilters.ebvError();if(N.token&&"literal"===N.token){if("http://www.w3.org/2001/XMLSchema#integer"==N.type||"http://www.w3.org/2001/XMLSchema#decimal"==N.type||"http://www.w3.org/2001/XMLSchema#double"==N.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==N.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==N.type||"http://www.w3.org/2001/XMLSchema#long"==N.type||"http://www.w3.org/2001/XMLSchema#int"==N.type||"http://www.w3.org/2001/XMLSchema#short"==N.type||"http://www.w3.org/2001/XMLSchema#byte"==N.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==N.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==N.type){var T=parseFloat(N.value);return!isNaN(T)&&0!=parseFloat(N.value)}return"http://www.w3.org/2001/XMLSchema#boolean"===N.type?"true"===N.value||!0===N.value||"True"===N.value:"http://www.w3.org/2001/XMLSchema#string"===N.type?""!=N.value:"http://www.w3.org/2001/XMLSchema#dateTime"===N.type?null!=new Date(N.value):QueryFilters.isEbvError(N)?N:null==N.type?""!=N.value:QueryFilters.ebvError()}return!0===N.value}},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(N){return"object"==typeof N&&null!=N&&"https://github.com/antoniogarrote/js-tools/types#error"===N.type},QueryFilters.ebvBoolean=function(N){return QueryFilters.isEbvError(N)?N:!0===N?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(N,T,_,I,D,O,s){if("="===(N=N.operator))return QueryFilters.runEqualityFunction(T,_,I,D,O,s);if("!="===N)return T=QueryFilters.runEqualityFunction(T,_,I,D,O,s),QueryFilters.isEbvError(T)||(T.value=!T.value),T;if("<"===N)return QueryFilters.runLtFunction(T,_,I);if(">"===N)return QueryFilters.runGtFunction(T,_,I);if("<="===N)return QueryFilters.runLtEqFunction(T,_,I);if(">="===N)return QueryFilters.runGtEqFunction(T,_,I);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(N){if("literal"!=N.token)throw console.log("not implemented yet"),console.log(N),"value not supported in operations yet";if("http://www.w3.org/2001/XMLSchema#integer"==N.type)return parseInt(N.value);if("http://www.w3.org/2001/XMLSchema#decimal"==N.type||"http://www.w3.org/2001/XMLSchema#float"==N.type||"http://www.w3.org/2001/XMLSchema#double"==N.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==N.type)return parseFloat(N.value);if("http://www.w3.org/2001/XMLSchema#negativeInteger"==N.type||"http://www.w3.org/2001/XMLSchema#long"==N.type||"http://www.w3.org/2001/XMLSchema#int"==N.type||"http://www.w3.org/2001/XMLSchema#short"==N.type||"http://www.w3.org/2001/XMLSchema#byte"==N.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==N.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==N.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==N.type)return parseInt(N.value);if("http://www.w3.org/2001/XMLSchema#date"!=N.type&&"http://www.w3.org/2001/XMLSchema#dateTime"!=N.type)return"http://www.w3.org/2001/XMLSchema#boolean"==N.type?!0===N.value||"true"===N.value||"1"===N.value||1===N.value||!0===N.value||!1!==N.value&&"false"!==N.value&&"0"!==N.value&&0!==N.value&&!1!==N.value&&void 0:"http://www.w3.org/2001/XMLSchema#string"==N.type?null===N.value||void 0===N.value?void 0:""+N.value:N.value;try{return ye.parseISO8601(N.value)}catch(T){return null}},QueryFilters.runOrFunction=function(N,T,_,I,D){for(var O=null,s=0;s<N.operands.length;s++){var R=QueryFilters.runFilter(N.operands[s],T,_,I,D);0==QueryFilters.isEbvError(R)&&(R=QueryFilters.ebv(R)),null==O?O=R:QueryFilters.isEbvError(R)?O=QueryFilters.isEbvError(O)?QueryFilters.ebvError():!0===O||QueryFilters.ebvError():!0===R?O=!0:QueryFilters.isEbvError(O)&&(O=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(O)},QueryFilters.runAndFunction=function(N,T,_,I,D){for(var O=null,s=0;s<N.operands.length;s++){var R=QueryFilters.runFilter(N.operands[s],T,_,I,D);0==QueryFilters.isEbvError(R)&&(R=QueryFilters.ebv(R)),null==O?O=R:QueryFilters.isEbvError(R)?O=!(!QueryFilters.isEbvError(O)&&!0!==O)&&QueryFilters.ebvError():!0===R?QueryFilters.isEbvError(O)&&(O=QueryFilters.ebvError()):O=!1}return QueryFilters.ebvBoolean(O)},QueryFilters.runEqualityFunction=function(N,T,_,I,D,O){return QueryFilters.isEbvError(N)||QueryFilters.isEbvError(T)?QueryFilters.ebvError():QueryFilters.isNumeric(N)&&QueryFilters.isNumeric(T)?(_=QueryFilters.effectiveTypeValue(N),D=QueryFilters.effectiveTypeValue(T),isNaN(_)||isNaN(D)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(N,T,I,O)):QueryFilters.ebvBoolean(_==D)):(QueryFilters.isSimpleLiteral(N)||QueryFilters.isXsdType("string",N))&&(QueryFilters.isSimpleLiteral(T)||QueryFilters.isXsdType("string",T))||QueryFilters.isXsdType("boolean",N)&&QueryFilters.isXsdType("boolean",T)?QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(N)==QueryFilters.effectiveTypeValue(T)):(QueryFilters.isXsdType("dateTime",N)||QueryFilters.isXsdType("date",N))&&(QueryFilters.isXsdType("dateTime",T)||QueryFilters.isXsdType("date",T))?QueryFilters.isXsdType("dateTime",N)&&QueryFilters.isXsdType("date",T)||QueryFilters.isXsdType("date",N)&&QueryFilters.isXsdType("dateTime",T)?QueryFilters.ebvFalse():null!=(N=ye.compareDateComponents(N.value,T.value))?0==N?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError():QueryFilters.isRDFTerm(N)&&QueryFilters.isRDFTerm(T)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(N,T,I,O)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(N,T,_){return QueryFilters.isEbvError(N)||QueryFilters.isEbvError(T)?QueryFilters.ebvError():QueryFilters.isNumeric(N)&&QueryFilters.isNumeric(T)||QueryFilters.isSimpleLiteral(N)&&QueryFilters.isSimpleLiteral(T)||QueryFilters.isXsdType("string",N)&&QueryFilters.isXsdType("string",T)||QueryFilters.isXsdType("boolean",N)&&QueryFilters.isXsdType("boolean",T)?QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(N)>QueryFilters.effectiveTypeValue(T)):(QueryFilters.isXsdType("dateTime",N)||QueryFilters.isXsdType("date",N))&&(QueryFilters.isXsdType("dateTime",T)||QueryFilters.isXsdType("date",T))?QueryFilters.isXsdType("dateTime",N)&&QueryFilters.isXsdType("date",T)||QueryFilters.isXsdType("date",N)&&QueryFilters.isXsdType("dateTime",T)?QueryFilters.ebvFalse():null!=(N=ye.compareDateComponents(N.value,T.value))?1==N?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError():QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(N,T){return QueryFilters.isEbvError(N)||QueryFilters.isEbvError(T)?QueryFilters.ebvError():QueryFilters.isNumeric(N)&&QueryFilters.isNumeric(T)||QueryFilters.isSimpleLiteral(N)&&QueryFilters.isSimpleLiteral(T)||QueryFilters.isXsdType("string",N)&&QueryFilters.isSimpleLiteral("string",T)||QueryFilters.isXsdType("boolean",N)&&QueryFilters.isSimpleLiteral("boolean",T)||QueryFilters.isXsdType("dateTime",N)&&QueryFilters.isSimpleLiteral("dateTime",T)?QueryFilters.runGtFunction(N,T,[]):N.token&&"uri"===N.token&&T.token&&"uri"===T.token?QueryFilters.ebvBoolean(N.value>T.value):N.token&&"literal"===N.token&&T.token&&"literal"===T.token?QueryFilters.ebvBoolean(""+N.value+N.type+N.lang>""+T.value+T.type+T.lang):N.token&&"blank"===N.token&&T.token&&"blank"===T.token||N.value&&T.value?QueryFilters.ebvBoolean(N.value>T.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(N,T,_){return QueryFilters.isEbvError(N)||QueryFilters.isEbvError(T)?QueryFilters.ebvError():QueryFilters.isNumeric(N)&&QueryFilters.isNumeric(T)||QueryFilters.isSimpleLiteral(N)&&QueryFilters.isSimpleLiteral(T)||QueryFilters.isXsdType("string",N)&&QueryFilters.isXsdType("string",T)||QueryFilters.isXsdType("boolean",N)&&QueryFilters.isXsdType("boolean",T)?QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(N)<QueryFilters.effectiveTypeValue(T)):(QueryFilters.isXsdType("dateTime",N)||QueryFilters.isXsdType("date",N))&&(QueryFilters.isXsdType("dateTime",T)||QueryFilters.isXsdType("date",T))?QueryFilters.isXsdType("dateTime",N)&&QueryFilters.isXsdType("date",T)||QueryFilters.isXsdType("date",N)&&QueryFilters.isXsdType("dateTime",T)?QueryFilters.ebvFalse():null!=(N=ye.compareDateComponents(N.value,T.value))?-1==N?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError():QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(N,T,_){return QueryFilters.isEbvError(N)||QueryFilters.isEbvError(T)?QueryFilters.ebvError():QueryFilters.isNumeric(N)&&QueryFilters.isNumeric(T)||QueryFilters.isSimpleLiteral(N)&&QueryFilters.isSimpleLiteral(T)||QueryFilters.isXsdType("string",N)&&QueryFilters.isXsdType("string",T)||QueryFilters.isXsdType("boolean",N)&&QueryFilters.isXsdType("boolean",T)?QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(N)>=QueryFilters.effectiveTypeValue(T)):(QueryFilters.isXsdType("dateTime",N)||QueryFilters.isXsdType("date",N))&&(QueryFilters.isXsdType("dateTime",T)||QueryFilters.isXsdType("date",T))?QueryFilters.isXsdType("dateTime",N)&&QueryFilters.isXsdType("date",T)||QueryFilters.isXsdType("date",N)&&QueryFilters.isXsdType("dateTime",T)?QueryFilters.ebvFalse():null!=(N=ye.compareDateComponents(N.value,T.value))?-1!=N?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError():QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(N,T,_){return QueryFilters.isEbvError(N)||QueryFilters.isEbvError(T)?QueryFilters.ebvError():QueryFilters.isNumeric(N)&&QueryFilters.isNumeric(T)||QueryFilters.isSimpleLiteral(N)&&QueryFilters.isSimpleLiteral(T)||QueryFilters.isXsdType("string",N)&&QueryFilters.isXsdType("string",T)||QueryFilters.isXsdType("boolean",N)&&QueryFilters.isXsdType("boolean",T)?QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(N)<=QueryFilters.effectiveTypeValue(T)):(QueryFilters.isXsdType("dateTime",N)||QueryFilters.isXsdType("date",N))&&(QueryFilters.isXsdType("dateTime",T)||QueryFilters.isXsdType("date",T))?QueryFilters.isXsdType("dateTime",N)&&QueryFilters.isXsdType("date",T)||QueryFilters.isXsdType("date",N)&&QueryFilters.isXsdType("dateTime",T)?QueryFilters.ebvFalse():null!=(N=ye.compareDateComponents(N.value,T.value))?1!=N?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError():QueryFilters.ebvFalse()},QueryFilters.runAddition=function(N,T,_,I,D,O){var s=QueryFilters.runFilter(N,_,I,D,O);if(QueryFilters.isEbvError(s))return QueryFilters.ebvError();if(N=s,QueryFilters.isNumeric(s)){for(s=0;s<T.length;s++){var R=QueryFilters.runFilter(T[s].expression,_,I,D,O);if(!QueryFilters.isNumeric(R))return QueryFilters.ebvFalse();"+"===T[s].operator?N=QueryFilters.runSumFunction(N,R):"-"===T[s].operator&&(N=QueryFilters.runSubFunction(N,R))}return N}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(N,T){if(QueryFilters.isEbvError(N)||QueryFilters.isEbvError(T))return QueryFilters.ebvError();var _=QueryFilters.effectiveTypeValue(N)+QueryFilters.effectiveTypeValue(T);return QueryFilters.isDouble(N)||QueryFilters.isDouble(T)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:_}:QueryFilters.isFloat(N)||QueryFilters.isFloat(T)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:_}:QueryFilters.isDecimal(N)||QueryFilters.isDecimal(T)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:_}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:_}},QueryFilters.runSubFunction=function(N,T){if(QueryFilters.isEbvError(N)||QueryFilters.isEbvError(T))return QueryFilters.ebvError();var _=QueryFilters.effectiveTypeValue(N)-QueryFilters.effectiveTypeValue(T);return QueryFilters.isDouble(N)||QueryFilters.isDouble(T)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:_}:QueryFilters.isFloat(N)||QueryFilters.isFloat(T)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:_}:QueryFilters.isDecimal(N)||QueryFilters.isDecimal(T)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:_}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:_}},QueryFilters.runMultiplication=function(N,T,_,I,D,O){if(N=QueryFilters.runFilter(N,_,I,D,O),QueryFilters.isEbvError(N))return N;var s=N;if(QueryFilters.isNumeric(N)){for(var R=0;R<T.length;R++){var G=QueryFilters.runFilter(T[R].expression,_,I,D,O);if(QueryFilters.isEbvError(G))return N;if(!QueryFilters.isNumeric(G))return QueryFilters.ebvFalse();"*"===T[R].operator?s=QueryFilters.runMulFunction(s,G):"/"===T[R].operator&&(s=QueryFilters.runDivFunction(s,G))}return s}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(N,T){if(QueryFilters.isEbvError(N)||QueryFilters.isEbvError(T))return QueryFilters.ebvError();var _=QueryFilters.effectiveTypeValue(N)*QueryFilters.effectiveTypeValue(T);return QueryFilters.isDouble(N)||QueryFilters.isDouble(T)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:_}:QueryFilters.isFloat(N)||QueryFilters.isFloat(T)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:_}:QueryFilters.isDecimal(N)||QueryFilters.isDecimal(T)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:_}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:_}},QueryFilters.runDivFunction=function(N,T){if(QueryFilters.isEbvError(N)||QueryFilters.isEbvError(T))return QueryFilters.ebvError();var _=QueryFilters.effectiveTypeValue(N)/QueryFilters.effectiveTypeValue(T);return QueryFilters.isDouble(N)||QueryFilters.isDouble(T)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:_}:QueryFilters.isFloat(N)||QueryFilters.isFloat(T)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:_}:QueryFilters.isDecimal(N)||QueryFilters.isDecimal(T)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:_}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:_}},QueryFilters.runBuiltInCall=function(N,T,_,I,D,O){if("notexists"===N||"exists"===N){for(var s in N=[],_)N.push(JSON.stringify(_[s]));return T[N=N.sort().join("")]}s=[];for(var R=0;R<T.length;R++)if("var"===T[R].token)s.push(T[R]);else{var G=QueryFilters.runFilter(T[R],_,I,D,O);if(QueryFilters.isEbvError(G))return G;s.push(G)}if("str"===N)return"literal"===s[0].token?{token:"literal",type:null,value:""+s[0].value}:"uri"===s[0].token?{token:"literal",type:null,value:s[0].value}:QueryFilters.ebvFalse();if("lang"===N)return"literal"===s[0].token?null!=s[0].lang?{token:"literal",value:""+s[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===N)return"literal"===s[0].token?null!=(_=s[0]).type?"string"==typeof _.type?{token:"uri",value:_.type,prefix:null,suffix:null}:_.type:null==_.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError():QueryFilters.ebvError();if("isliteral"===N)return"literal"===s[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===N)return"blank"===s[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===N||"isiri"===N)return"uri"===s[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===N)return _=QueryFilters.RDFTermEquality(s[0],s[1],I,O),QueryFilters.isEbvError(_)&&(_=!1),QueryFilters.ebvBoolean(_);if("langmatches"===N)return _=s[0],T=s[1],"literal"===_.token&&"literal"===T.token?"*"===T.value&&""!=_.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===_.value.toLowerCase().indexOf(T.value.toLowerCase())):QueryFilters.ebvError();if("bound"===N)return null==(T=s[0].value)?QueryFilters.ebvError():null!=_[T]?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if(null!=I.customFns[N])return I.customFns[N](QueryFilters,s);throw"Builtin call "+N+" not implemented yet"},QueryFilters.runUnaryExpression=function(N,T,_,I,D,O){if(T=QueryFilters.runFilter(T,_,I,D,O),QueryFilters.isEbvError(T))return T;if("!"===N){var s=QueryFilters.ebv(T);return QueryFilters.isEbvError(s)?QueryFilters.ebvFalse():QueryFilters.ebvBoolean(!s)}if("+"===N)return QueryFilters.isNumeric(T)?T:QueryFilters.ebvError();if("-"===N){if(QueryFilters.isNumeric(T)){for(s in N={},T)N[s]=T[s];return N.value=-N.value,N}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(N,T,_,I,D,O,s){if(null==N)return QueryFilters.ebvError();if(N=QueryFilters.runFilter(N,I,D,O,s),null==T)return QueryFilters.ebvError();if(T=QueryFilters.runFilter(T,I,D,O,s),null!=_&&(_=QueryFilters.runFilter(_,I,D,O,s)),null==T||"literal"!==T.token||null!=_&&"literal"!==_.token)return QueryFilters.ebvError();if(T=T.value,_=null==_?null:_.value,null!=N&&"var"==N.token){if(null==I[N.value])return QueryFilters.ebvError();N=I[N.value]}else{if(null==N||"literal"!==N.token)return QueryFilters.ebvError();if(null!=N.type&&!QueryFilters.isXsdType("string",N))return QueryFilters.ebvError();N=N.value}return(null==_?new RegExp(T):new RegExp(T,_.toLowerCase())).exec(N)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(N,T,_){return null!=N.value.type&&"object"==typeof N.value.type&&(N.value.type=ye.lexicalFormBaseUri(N.value.type,_)),N},QueryFilters.runIriRefOrFunction=function(N,T,_,I,D,O){if(null==T)return N;for(var s=[],R=0;R<T.length;R++)s.push(QueryFilters.runFilter(T[R],_,I,D,O));if("http://www.w3.org/2001/XMLSchema#integer"==(N=ye.lexicalFormBaseUri(N,O))||"http://www.w3.org/2001/XMLSchema#decimal"==N||"http://www.w3.org/2001/XMLSchema#double"==N||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==N||"http://www.w3.org/2001/XMLSchema#negativeInteger"==N||"http://www.w3.org/2001/XMLSchema#long"==N||"http://www.w3.org/2001/XMLSchema#int"==N||"http://www.w3.org/2001/XMLSchema#short"==N||"http://www.w3.org/2001/XMLSchema#byte"==N||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==N||"http://www.w3.org/2001/XMLSchema#unsignedLong"==N||"http://www.w3.org/2001/XMLSchema#unsignedInt"==N||"http://www.w3.org/2001/XMLSchema#unsignedShort"==N||"http://www.w3.org/2001/XMLSchema#unsignedByte"==N||"http://www.w3.org/2001/XMLSchema#positiveInteger"==N){if("literal"!==(s=s[0]).token)return QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#integer"==(s=QueryFilters.normalizeLiteralDatatype(s,I,O)).type||"http://www.w3.org/2001/XMLSchema#decimal"==s.type||"http://www.w3.org/2001/XMLSchema#double"==s.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==s.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==s.type||"http://www.w3.org/2001/XMLSchema#long"==s.type||"http://www.w3.org/2001/XMLSchema#int"==s.type||"http://www.w3.org/2001/XMLSchema#short"==s.type||"http://www.w3.org/2001/XMLSchema#byte"==s.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==s.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==s.type)return s.type=N,s;if("http://www.w3.org/2001/XMLSchema#boolean"==s.type)return 1==QueryFilters.ebv(s)?(s.type=N,s.value=1):(s.type=N,s.value=0),s;if("http://www.w3.org/2001/XMLSchema#float"==s.type||"http://www.w3.org/2001/XMLSchema#double"==s.type)return s.type=N,s.value=parseInt(s.value),s;if("http://www.w3.org/2001/XMLSchema#string"!=s.type&&null!=s.type)return QueryFilters.ebvError();if(2<s.value.split(".").length||2<s.value.split("-").length||2<s.value.split("/").length||2<s.value.split("+").length||"http://www.w3.org/2001/XMLSchema#decimal"==N&&(-1!=s.value.indexOf("e")||-1!=s.value.indexOf("E"))||("http://www.w3.org/2001/XMLSchema#int"==N||"http://www.w3.org/2001/XMLSchema#integer"==N)&&(-1!=s.value.indexOf("e")||-1!=s.value.indexOf("E")||-1!=s.value.indexOf(".")))return QueryFilters.ebvError();try{return s.value=parseInt(parseFloat(s.value)),isNaN(s.value)?QueryFilters.ebvError():(s.type=N,s)}catch(G){return QueryFilters.ebvError()}}else{if("http://www.w3.org/2001/XMLSchema#boolean"==N)return"literal"===(s=s[0]).token&&null==s.type?"true"===s.value||"1"===s.value?QueryFilters.ebvTrue():"false"===s.value||"0"===s.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===s.token?QueryFilters.isEbvError(s)?s:QueryFilters.ebvBoolean(s):QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#string"==N)return"literal"===(s=s[0]).token?"http://www.w3.org/2001/XMLSchema#integer"==(s=QueryFilters.normalizeLiteralDatatype(s,I,O)).type||"http://www.w3.org/2001/XMLSchema#decimal"==s.type||"http://www.w3.org/2001/XMLSchema#double"==s.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==s.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==s.type||"http://www.w3.org/2001/XMLSchema#long"==s.type||"http://www.w3.org/2001/XMLSchema#int"==s.type||"http://www.w3.org/2001/XMLSchema#short"==s.type||"http://www.w3.org/2001/XMLSchema#byte"==s.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==s.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==s.type||"http://www.w3.org/2001/XMLSchema#float"==s.type?(s.type=N,s.value=""+s.value,s):"http://www.w3.org/2001/XMLSchema#string"==s.type?s:"http://www.w3.org/2001/XMLSchema#boolean"==s.type?(QueryFilters.ebv(s)?(s.type=N,s.value="true"):(s.type=N,s.value="false"),s):"http://www.w3.org/2001/XMLSchema#dateTime"==s.type||"http://www.w3.org/2001/XMLSchema#date"==s.type?(s.type=N,"string"!=typeof s.value&&(s.value=ye.iso8601(s.value)),s):null==s.type?(s.value=""+s.value,s.type=N,s):QueryFilters.ebvError():"uri"===s.token?{token:"literal",value:ye.lexicalFormBaseUri(s,O),type:N,lang:null}:QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#dateTime"==N||"http://www.w3.org/2001/XMLSchema#date"==N){if("http://www.w3.org/2001/XMLSchema#dateTime"==(s=s[0]).type||"http://www.w3.org/2001/XMLSchema#date"==s.type)return s;if("http://www.w3.org/2001/XMLSchema#string"!=s.type&&null!=s.type)return QueryFilters.ebvError();try{return s.value=ye.iso8601(ye.parseISO8601(s.value)),s.type=N,s}catch(G){return QueryFilters.ebvError()}}else{if("http://www.w3.org/2001/XMLSchema#float"!=N)return null!=I.customFns[N]?I.customFns[N](QueryFilters,s):QueryFilters.ebvError();if("literal"!==(s=s[0]).token)return QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#decimal"==(s=QueryFilters.normalizeLiteralDatatype(s,I,O)).type||"http://www.w3.org/2001/XMLSchema#int"==s.type)return s.type=N,s.value=parseFloat(s.value),s;if("http://www.w3.org/2001/XMLSchema#boolean"==s.type)return 1==QueryFilters.ebv(s)?(s.type=N,s.value=1):(s.type=N,s.value=0),s;if("http://www.w3.org/2001/XMLSchema#float"==s.type||"http://www.w3.org/2001/XMLSchema#double"==s.type)return s.type=N,s.value=parseFloat(s.value),s;if("http://www.w3.org/2001/XMLSchema#string"==s.type)try{return s.value=parseFloat(s.value),isNaN(s.value)?QueryFilters.ebvError():(s.type=N,s)}catch(G){return QueryFilters.ebvError()}else{if(null!=s.type)return QueryFilters.ebvError();if(2<s.value.split(".").length||2<s.value.split("-").length||2<s.value.split("/").length||2<s.value.split("+").length)return QueryFilters.ebvError();try{return s.value=parseFloat(s.value),isNaN(s.value)?QueryFilters.ebvError():(s.type=N,s)}catch(G){return QueryFilters.ebvError()}}}}},Ee.exports={QueryFilters}},{"./utils":58}],54:[function(Ce,Ee,Be){var ye=Ce("./utils"),j=Ce("./utils"),N={variablesInBGP:function(T){if(I=T.variables)return I;var D,_=T.value||T,I=[];for(D in _)_[D]&&"var"===_[D].token?I.push(_[D].value):_[D]&&"blank"===_[D].token&&I.push("blank:"+_[D].value);return T.variables=I},connected:function(T,_){for(var I="/"+T.vars.join("/")+"/",D=0;D<_.vars.length;D++)if(-1!=I.indexOf("/"+_.vars[D]+"/"))return!0;return!1},variablesIntersectionBGP:function(T,_){for(var I=N.variablesInBGP(T),s=N.variablesInBGP(_),D={},O=0;O<I.lenght;O++)D[I[O]]=1;for(O=0;O<s.length;O++)I=D[s[O]]||0,I++,D[s[O]]=I;var R;s=[];for(R in D)2==D[R]&&s.push(D[R]);return s},executeAndBGPsGroups:function(T){for(var _={},I={},D=0,O=function(oe,he){for(var pe=0;pe<oe.length;pe++)if(-1!=he.indexOf("/"+oe[pe]+"/"))return!0;return!1},s=function(oe,he,pe,V){var Se,W=[],ee="",ge="";for(Se in he)ee+=Se,W=W.concat(_[Se]),ge+=I[Se];ge=ge+fe.join("/")+"/",W.push(oe),pe[ee]=W,V[ee]=ge},R=0;R<T.length;R++){var re,G=T[R],Y={},X={},fe=N.variablesInBGP(G),ne={};for(re in I)O(fe,I[re])?ne[re]=!0:(Y[re]=_[re],X[re]=I[re]);0===ye.size(ne)?(Y["g"+D]=[G],X["g"+D]="/"+fe.join("/")+"/",D++):s(G,ne,Y,X),_=Y,I=X}return ye.values(_)},intersectionSize:function(T,_){for(var I=_.i.split("_"),D=0;D<I.length;D++)if(""!=I[D]&&-1!=T.i.indexOf("_"+I[D]+"_"))return 1;return 0},createJoinTree:function(T,_){for(var I="/"+T.vars.join("/")+"/",D=T.vars.concat([]),O=[],s=0;s<_.vars.length;s++)-1!=I.indexOf("/"+_.vars[s]+"/")?0==_.vars[s].indexOf("_:")?O.push("blank:"+_.vars[s]):O.push(_.vars[s]):D.push(_.vars[s]);I=_.i.split("_");var R=T.i.split("_"),G={};for(s=0;s<I.length;s++)""!=I[s]&&(G[I[s]]=!0);for(s=0;s<R.length;s++)""!=R[s]&&(G[R[s]]=!0);return s=ye.keys(G),{left:T,right:_,cost:T.cost+_.cost,i:"_"+s.sort().join("_")+"_",vars:D,join:O}},executeBushyTree:function(T,_,I,D,O){null==T.left?N.executeEmptyJoinBGP(T.right,_,I,D,O):null==T.right?N.executeEmptyJoinBGP(T.left,_,I,D,O):N.executeBushyTree(T.left,_,I,D,function(s){null!=s?N.executeBushyTree(T.right,_,I,D,function(R){O(null!=R?N.joinBindings2(T.join,s,R):null)}):O(null)})},executeAndBGPsDPSize:function(T,_,I,D,O){T=N.executeAndBGPsGroups(T);var s=[];j.eachSeries(T,function(R,G){I.computeCosts(R,D,function(Y){var X={},fe={},ne={},re=1,oe=null,he={};ne[1]=[];for(var pe=0;pe<Y.length;pe++){for(var V in re=[],delete Y[pe].variables,Y[pe])"_cost"!=V&&("var"===Y[pe][V].token||"blank"===Y[pe][V].token)&&re.push(Y[pe][V].value);fe["_"+pe+"_"]={left:Y[pe],right:null,cost:Y[pe]._cost,i:"_"+pe+"_",vars:re},re={left:Y[pe],right:null,cost:Y[pe]._cost,i:"_"+pe+"_",vars:re},X["_"+pe+"_"]=re,delete Y[pe]._cost,he["_"+pe+"_"]=!0,ne[1].push("_"+pe+"_"),(null==oe||oe.cost>re.cost)&&(oe=re)}for(V=2;V<=Y.length;V++)for(var W=1;W<V;W++){var ee=ne[""+W]||[],ge=ne[""+(V-W)]||[];for(pe=0;pe<ee.length;pe++)for(var Se=0;Se<ge.length;Se++)if(ee[pe]!==ge[Se]){var Le=fe[ee[pe]],Ne=fe[ge[Se]];if(0==N.intersectionSize(Le,Ne)&&N.connected(Le,Ne)&&(re=V,!he[(Le=N.createJoinTree(X[Le.i],X[Ne.i])).i])){he[Le.i]=!0,Ne=Le.cost+1,null!=X[Le.i]&&(Ne=X[Le.i].cost);var Qe=ne[V]||[];Qe.push(Le.i),fe[Le.i]=Le,ne[V]=Qe,Ne>Le.cost&&(re===V&&(oe=Le),X[Le.i]=Le)}}}s.push(oe),G()})},function(){var R=null;j.eachSeries(s,function(G,Y){N.executeBushyTree(G,_,I,D,function(X){X?(R=null==R?X:N.crossProductBindings(R,X),Y()):Y("Error executing bushy tree")})},function(G){G?O(null,G):O(R)})})},executeEmptyJoinBGP:function(T,_,I,D,O){return N.executeBGPDatasets(T,_,I,D,O)},executeBGPDatasets:function(T,_,I,D,O){var s={};if(null==T.graph){var R=[];j.eachSeries(_.implicit,function(Y,X){null==s[Y.oid]?(s[Y.oid]=!0,T.graph=Y,I.rangeQuery(T,D,function(fe){fe=N.buildBindingsFromRange(fe,T),R.push(fe),X()})):X()},function(){var Y=N.unionManyBindings(R);O(Y)})}else if("var"===T.graph.token){var G=T.graph.value;R=[];j.eachSeries(_.named,function(X,fe){null==s[X.oid]?(s[X.oid]=!0,T.graph=X,null!=R?I.rangeQuery(T,D,function(ne){if(null!=ne){ne=N.buildBindingsFromRange(ne,T);for(var re=0;re<ne.length;re++)ne[re][G]=X.oid;R.push(ne)}else R=null;fe()}):fe()):fe()},function(){if(null==R)O(null);else{var X=N.unionManyBindings(R);O(X)}})}else I.rangeQuery(T,D,function(Y){null!=Y?(Y=N.buildBindingsFromRange(Y,T),O(Y)):O(null)})},buildBindingsFromRange:function(T,_){N.variablesInBGP(_);var I=_.value||_,D={};for(Y in I)I[Y]&&"var"===I[Y].token?D[Y]=I[Y].value:I[Y]&&"blank"===I[Y].token&&(D[Y]="blank:"+I[Y].value);if(I=[],null!=T)for(var O=0;O<T.length;O++){var Y,s={},R=T[O],G=!1;for(Y in D){var X=R[Y];if(null!=s[D[Y]]&&s[D[Y]]!==X){G=!0;break}s[D[Y]]=X}G||I.push(s)}return I},areCompatibleBindings:function(T,_){for(var I in T)if(null!=_[I]&&_[I]!=T[I])return!1;return!0},mergeBindings:function(T,_){var D,I={};for(D in T)I[D]=T[D];for(D in _)I[D]=_[D];return I},joinBindings2:function(T,_,I){for(var O,s,R,G,D={},Y=[],X=0;X<_.length;X++){O=_[X],G=D;for(var fe=0;fe<T.length;fe++)s=O[s=T[fe]],fe==T.length-1?((R=G[s]||[]).push(O),G[s]=R):(R=G[s]||{},G=G[s]=R)}for(X=0;X<I.length;X++)for(O=I[X],G=D,fe=0;fe<T.length;fe++)if(null!=G[s=O[s=T[fe]]])if(fe==T.length-1)for(_=0;_<G[s].length;_++)Y.push(N.mergeBindings(G[s][_],O));else G=G[s];return Y},joinBindings:function(T,_){for(var I=[],D=0;D<T.length;D++)for(var O=T[D],s=0;s<_.length;s++){var R=_[s];N.areCompatibleBindings(O,R)&&I.push(N.mergeBindings(O,R))}return I},augmentMissingBindings:function(T,_){for(var I in _)null==T[I]&&(T[I]=null);return T},leftOuterJoinBindings:function(T,_){for(var I=[],D=0;D<T.length;D++){for(var O=T[D],s=!1,R=0;R<_.length;R++){var G=_[R];N.areCompatibleBindings(O,G)&&(s=!0,I.push(N.mergeBindings(O,G)))}!1===s&&(N.augmentMissingBindings(O,G),I.push(O))}return I},crossProductBindings:function(T,_){for(var I=[],D=0;D<T.length;D++)for(var O=T[D],s=0;s<_.length;s++)I.push(N.mergeBindings(O,_[s]));return I},unionBindings:function(T,_){return T.concat(_)},unionManyBindings:function(T){for(var _=[],I=0;I<T.length;I++)_=N.unionBindings(_,T[I]);return _}};Ee.exports={QueryPlan:N}},{"./utils":58}],55:[function(Ce,Ee,Be){var ye=Ce("./network_transport").NetworkTransport,j=Ce("./rvn3_parser").RVN3Parser,N=Ce("./jsonld_parser").JSONLDParser,T=Ce("./utils");(Be=function(_){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":j.parser,"text/n3":j.parser,"application/ld+json":N.parser,"application/json":N.parser},"undefined"!=typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=_)for(var I in _.parsers)this.parsers[I]=_.parsers[I];if(_&&null!=_.precedences)for(I in this.precedences=_.precedences,_.parsers)T.include(this.precedences,I)||this.precedences.push(I);for(this.acceptHeaderValue="",_=0;_<this.precedences.length;_++)this.acceptHeaderValue=0!=_?this.acceptHeaderValue+","+this.precedences[_]:this.acceptHeaderValue+this.precedences[_]}).prototype.registerParser=function(_,I){this.parsers[_]=I,this.precedences.push(_)},Be.prototype.unregisterParser=function(_){delete this.parsers[_];for(var I=[],D=0;D<this.precedences.length;D++)this.precedences[D]!=_&&I.push(this.precedences[D]);this.precedences=I},Be.prototype.setAcceptHeaderPrecedence=function(_){this.precedences=_},Be.prototype.load=function(_,I,D){var O=this;ye.load(_,this.acceptHeaderValue,function(s,R){if(s)D(s);else{var G=R.headers["Content-Type"]||R.headers["content-type"],Y=R.data;if(null!=G){var X;G=G.split(";")[0];for(X in O.parsers)if(-1!=X.indexOf("/")){var fe=X.split("/");if("*"===fe[1]){if(-1!=G.indexOf(fe[0]))return O.tryToParse(O.parsers[X],I,Y,{documentURI:_},D)}else if(-1!=G.indexOf(X)||-1!=G.indexOf(fe[1]))return O.tryToParse(O.parsers[X],I,Y,{documentURI:_},D)}else if(-1!=G.indexOf(X))return O.tryToParse(O.parsers[X],I,Y,{documentURI:_},D);D(Error("Unknown media type : "+G))}else D(Error("Uknown media type"))}})},Be.prototype.loadFromFile=function(_,I,D,O){try{var s=this;Ce("fs").readFile(D.split("file:/")[1],function(R,G){R?O(R):(G=G.toString("utf8"),s.tryToParse(_,I,G,{documentURI:D},O))})}catch(R){O(R)}},Be.prototype.tryToParse=function(_,I,D,O,s){try{"string"==typeof D&&(D=T.normalizeUnicodeLiterals(D)),_.parse(D,I,O,s)}catch(R){console.log(R.message),console.log(R.stack),s(R)}},Ee.exports={RDFLoader:Be}},{"./jsonld_parser":44,"./network_transport":46,"./rvn3_parser":57,"./utils":58,fs:4}],56:[function(Ce,Ee,Be){var ye=Ce("./utils"),j=Ce("./query_filters").QueryFilters;RDFModel={defaultContext:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},UrisMap:function(){this.defaultNs="",this.interfaceProperties="get remove set setDefault addAll resolve shrink".split(" ")}},RDFModel.UrisMap.prototype.values=function(){var T,N={};for(T in this)ye.include(this.interfaceProperties,T)||"function"==typeof this[T]||"defaultNs"===T||"interfaceProperties"===T||(N[T]=this[T]);return N},RDFModel.UrisMap.prototype.get=function(N){if(-1!=N.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[N]},RDFModel.UrisMap.prototype.remove=function(N){if(-1!=N.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[N],null},RDFModel.UrisMap.prototype.set=function(N,T){if(-1!=N.indexOf(" "))throw"Prefix must not contain any whitespaces";this[N]=T},RDFModel.UrisMap.prototype.setDefault=function(N){this.defaultNs=N},RDFModel.UrisMap.prototype.addAll=function(N,T){for(var _ in N)ye.include(this.interfaceProperties,_)||(null!=this[_]?!0===T&&(this[_]=N[_]):this[_]=N[_]);return this},RDFModel.UrisMap.prototype.resolve=function(N){var T=N.split(":");return N=T[0],T=T[1],""===N?null==this.defaultNs?null:this.defaultNs+T:null!=this[N]?this[N]+T:null},RDFModel.UrisMap.prototype.shrink=function(N){for(var T in this){var _=this[T];if(0===N.indexOf(_)&&""!==_&&"defaultNs"!=T)return T+":"+(N=N.split(_)[1])}return N},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(N,T){this.prefixes.addAll(N.prefixes,T),this.terms.addAll(N.terms,T)},RDFModel.Profile.prototype.resolve=function(N){return-1!=N.indexOf(":")?this.prefixes.resolve(N):null!=this.terms[N]?this.terms.resolve(N):null},RDFModel.Profile.prototype.setDefaultPrefix=function(N){this.prefixes.setDefault(N)},RDFModel.Profile.prototype.setDefaultVocabulary=function(N){this.terms.setDefault(N)},RDFModel.Profile.prototype.setPrefix=function(N,T){this.prefixes.set(N,T)},RDFModel.Profile.prototype.setTerm=function(N,T){this.terms.set(N,T)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var N=this;for(var T in this.filters={s:function(_){return function(I){return I.subject.equals(_)}},p:function(_){return function(I){return I.predicate.equals(_)}},o:function(_){return function(I){return I.object.equals(_)}},sp:function(_,I){return function(D){return D.subject.equals(_)&&D.predicate.equals(I)}},so:function(_,I){return function(D){return D.subject.equals(_)&&D.object.equals(I)}},po:function(_,I){return function(D){return D.predicate.equals(_)&&D.object.equals(I)}},spo:function(_,I,D){return function(O){return O.subject.equals(_)&&O.predicate.equals(I)&&O.object.equals(D)}},describes:function(_){return function(I){return I.subject.equals(_)||I.object.equals(_)}},type:function(_){var I=N.resolve("rdf:type");return function(D){return D.predicate.equals(I)&&D.object.equals(_)}}},RDFModel.defaultContext)this.prefixes.set(T,RDFModel.defaultContext[T])},RDFModel.RDFEnvironment.prototype=ye.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var N=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,N},RDFModel.RDFEnvironment.prototype.createNamedNode=function(N){var T=this.resolve(N);return null!=T?new RDFModel.NamedNode(T):new RDFModel.NamedNode(N)},RDFModel.RDFEnvironment.prototype.createLiteral=function(N,T,_){return null!=_?new RDFModel.Literal(N,T,_.toString()):new RDFModel.Literal(N,T,_)},RDFModel.RDFEnvironment.prototype.createTriple=function(N,T,_){return new RDFModel.Triple(N,T,_)},RDFModel.RDFEnvironment.prototype.createGraph=function(N){var T=new RDFModel.Graph;if(null!=N)for(var _=0;_<N.length;_++)T.add(N[_]);return T},RDFModel.RDFEnvironment.prototype.createAction=function(N,T){return function(_){return N(_)?T(_):_}},RDFModel.RDFEnvironment.prototype.createProfile=function(N){return!0===N?new RDFModel.RDFEnvironment.Profile:((N=new RDFModel.RDFEnvironment.Profile).importProfile(this),N)},RDFModel.RDFEnvironment.prototype.createTermMap=function(N){if(!0===N)return new RDFModel.UrisMap;N=this.terms.values();var _,T=new RDFModel.UrisMap;for(_ in N)T[_]=N[_];return T},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(N){if(!0===N)return new RDFModel.UrisMap;N=this.prefixes.values();var _,T=new RDFModel.UrisMap;for(_ in N)T[_]=N[_];return T},RDFModel.RDFNode=function(N){this.interfaceName=N,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(N){if(null==N.interfaceName)return this.valueOf()==N;for(var T in this.attributes){var _=this.attributes[T];if(this[_]!=N[_])return!1}return!0},RDFModel.BlankNode=function(N){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+N,this.bnodeId=N},RDFModel.BlankNode.prototype=ye.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(N,T,_){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=N,null!=T?this.language=T:null!=_&&(this.datatype=_)},RDFModel.Literal.prototype=ye.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var N='"'+this.nominalValue+'"';return null!=this.language?N=N+"@"+this.language:(null!=this.datatype||this.type)&&(N=N+"^^<"+(this.datatype||this.type)+">"),N},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return j.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(N){RDFModel.RDFNode.call(this,"NamedNode"),this.nominalValue=null!=N.value?N.value:N},RDFModel.NamedNode.prototype=ye.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(N,T,_){this.subject=N,this.predicate=T,this.object=_},RDFModel.Triple.prototype.equals=function(N){return this.subject.equals(N.subject)&&this.predicate.equals(N.predicate)&&this.object.equals(N.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(N){for(var T=0;T<this.actions.length;T++)N=this.actions[T](N);return T=N.subject.toString()+N.predicate.toString()+N.object.toString(),this.duplicates[T]||(this.duplicates[T]=!0,this.triples.push(N)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(N,T){if(this.actions.push(N),1==T)for(var _=0;_<this.triples.length;_++)this.triples[_]=N(this.triples[_]);return this},RDFModel.Graph.prototype.addAll=function(N){N=N.toArray();for(var T=0;T<N.length;T++)this.add(N[T]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(N){for(var T=null,_=0;_<this.triples.length;_++)if(this.triples[_].equals(N)){delete this.duplicates[N.subject.toString()+N.predicate.toString()+N.object.toString()],T=_;break}return null!=T&&this.triples.splice(T,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(N){for(var T=0;T<this.triples.length;T++)if(!0===N(this.triples[T],this))return!0;return!1},RDFModel.Graph.prototype.every=function(N){for(var T=0;T<this.triples.length;T++)if(!1===N(this.triples[T],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(N){for(var T=new RDFModel.Graph,_=0;_<this.triples.length;_++)!0===N(this.triples[_],this)&&T.add(this.triples[_]);return T},RDFModel.Graph.prototype.forEach=function(N){for(var T=0;T<this.triples.length;T++)N(this.triples[T],this)},RDFModel.Graph.prototype.merge=function(N){N=new RDFModel.Graph;for(var T=0;T<this.triples.length;T++)N.add(this.triples[T]);return N},RDFModel.Graph.prototype.match=function(N,T,_,I){for(var D=new RDFModel.Graph,O=0,s=0;s<this.triples.length;s++){var R=this.triples[s];if((null==N||R.subject.equals(N))&&(null==T||R.predicate.equals(T))&&(null==_||R.object.equals(_))){if(!(null==I||O<I))break;O++,D.add(R)}}return D},RDFModel.Graph.prototype.removeMatches=function(N,T,_){for(var I=[],D=0;D<this.triples.length;D++){var O=this.triples[D];(null==N||O.subject.equals(N))&&(null!=T&&!O.predicate.equals(T)||null!=_&&!O.object.equals(_)||I.push(O))}for(D=0;D<I.length;D++)this.remove(I[D]);return this},RDFModel.Graph.prototype.toNT=function(){var N="";return this.forEach(function(T){N+=T.toString()}),N},RDFModel.buildRDFResource=function(N,T,_,I){return"blank"===N.token?RDFModel.buildBlankNode(N,T,_,I):"literal"===N.token?RDFModel.buildLiteral(N,T,_,I):"uri"===N.token?RDFModel.buildNamedNode(N,T,_,I):"var"===N.token?null!=(N=T[N.value])?RDFModel.buildRDFResource(N,T,_,I):null:null},RDFModel.buildBlankNode=function(N,T,_,I){return null!=N.valuetmp&&(N.value=N.valuetmp),0===N.value.indexOf("_:")&&(N.value=N.value.split("_:")[1]),new RDFModel.BlankNode(N.value)},RDFModel.buildLiteral=function(N,T,_,I){return new RDFModel.Literal(N.value,N.lang,N.type)},RDFModel.buildNamedNode=function(N,T,_,I){return null==N.value&&null!=N.prefix&&(T=_.resolveNsInEnvironment(N.prefix,I),N.value=T+N.suffix),new RDFModel.NamedNode(N)},RDFModel.rdf=new RDFModel.RDFEnvironment,Ee.exports=RDFModel},{"./query_filters":53,"./utils":58}],57:[function(Ce,Ee,Be){function ye(N){switch(N[0]){case'"':return 0<N.indexOf("^^")?{literal:(N=N.split("^^"))[0]+"^^<"+N[1]+">"}:{literal:N};case"_":return{blank:N.replace("b","")};default:return{token:"uri",value:N,prefix:null,suffix:null}}}var j=Ce("n3").Parser;Ee.exports={RVN3Parser:{parser:{async:!0,parse:function(N,T,_,I){I||(I=_,_=T,T=null),T&&"string"==typeof T&&(T={token:"uri",value:T,prefix:null,suffix:null}),_&&_.baseURI&&(_.documentIRI=_.baseURI);var D=[];new j(_).parse(N,function(O,s){O?I(O):s?D.push({subject:ye(s.subject),predicate:ye(s.predicate),object:ye(s.object),graph:T}):I(!1,D)})},resetBlankNodeIds:function(){j._resetBlankNodeIds()}}}}},{n3:32}],58:[function(x,C,A){(function(n){var h=void 0!==n&&n.nextTick?n.nextTick:"undefined"!=typeof window&&window.setImmediate?window.setImmediate:function(Ce){setTimeout(Ce,0)},c=0,b=100,a=function(Ce){++c<b?Ce():(c=0,h(Ce))},f=function(Ce){try{if(null==Ce)return"";if("uri"===Ce.token)return"u"+Ce.value;if("blank"===Ce.token)return"b"+Ce.value;var Ee;if("literal"===Ce.token)return(Ee=(Ee="l"+Ce.value)+(Ce.type||""))+(Ce.lang||"")}catch(Be){if("object"==typeof Ce){for(p in Ee="",Ce)Ee=Ee+p+Ce[p];return Ee}return Ce}};parseISO8601=function(Ce){return Date.parse(Ce)},Date.prototype.toISOString||function(){function Ce(Ee){return 10>Ee?"0"+Ee:Ee}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+Ce(this.getUTCMonth()+1)+"-"+Ce(this.getUTCDate())+"T"+Ce(this.getUTCHours())+":"+Ce(this.getUTCMinutes())+":"+Ce(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(Ce){return Ce.toISOString()},compareDateComponents=function(Ce,Ee){var Be=parseISO8601(Ce),ye=parseISO8601(Ee);return Be==ye?0:Be<ye?-1:1},lexicalFormLiteral=function(Ce,Ee){var Be=Ce.value,ye=Ce.lang,j=Ce.type,N=null;return null!=Be&&null!=j&&"string"!=typeof j?(null==(Be=j.value)&&(Be=j.suffix,j=Ee.namespaces[j.prefix],Ce.type=j+Be,Be=j+Be),N=-1!=Be.indexOf("hexBinary")?'"'+Ce.value.toLowerCase()+'"^^<'+Be+">":'"'+Ce.value+'"^^<'+Be+">"):N=null==ye&&null==j?'"'+Be+'"':null==j?'"'+Be+'"@'+ye:-1!=j.indexOf("hexBinary")?'"'+Ce.value.toLowerCase()+'"^^<'+j+">":'"'+Ce.value+'"^^<'+j+">",N},normalizeUnicodeLiterals=function(a){for(var b=a.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],c={},d=0;d<b.length;d++)null==c[b[d]]&&(c[b[d]]=!0,a=a.replace(new RegExp("\\"+b[d],"g"),eval("'"+b[d]+"'")));return a},registerIndexedDB=function(Ce){if("undefined"==typeof window&&void 0!==n&&!1===n.browser){var Ee=x("sqlite3"),Be=x("indexeddb-js");Ee=new Ee.Database(":memory:"),Be=Be.makeScope("sqlite3",Ee);Ce.indexedDB=Be.indexedDB,Ce.IDBKeyRange=Be.IDBKeyRange}else(Be="undefined"==typeof window?self:window).indexedDB=Be.indexedDB||Be.mozIndexedDB||Be.webkitIndexedDB||Be.msIndexedDB,Be.IDBKeyRange=Be.IDBKeyRange||Be.webkitIDBKeyRange||Be.msIDBKeyRange,Be.indexedDB?(Ce.indexedDB=Be.indexedDB,Ce.IDBKeyRange=Be.IDBKeyRange):console.log("The browser does not support IndexDB.")},guid=function(){function Ce(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return Ce()+Ce()+"-"+Ce()+"-"+Ce()+"-"+Ce()+"-"+Ce()+Ce()+Ce()};var f=function(Ce){try{if(null==Ce)return"";if("uri"===Ce.token)return"u"+Ce.value;if("blank"===Ce.token)return"b"+Ce.value;var Ee;if("literal"===Ce.token)return(Ee=(Ee="l"+Ce.value)+(Ce.type||""))+(Ce.lang||"")}catch(Be){if("object"==typeof Ce){for(p in Ee="",Ce)Ee=Ee+p+Ce[p];return Ee}return Ce}},k=function(Ce,Ee){for(var Be=[],ye=0;ye<Ce.length;ye++)Ee(Ce[ye])&&Be.push(Ce[ye]);return Be},m=function(Ce,Ee){if(Ce.forEach)Ce.forEach(Ee);else for(var Be=0;Be<Ce.length;Be++)Ee(Ce[Be])};clone=function(Ce){return JSON.parse(JSON.stringify(Ce))};var d=function(){function Ce(){}return function(Ee){var Be=typeof Ee;if("function"==Be||Ee&&"object"==Be){Ce.prototype=Ee;var ye=new Ce;Ce.prototype=null}return ye||void 0}}(),l=function(Ce,Ee,Be){Ce()?Ee(function(ye){if(ye)return Be(ye);l(Ce,Ee,Be)}):Be()},u=function(Ce,Ee,Be){if(Be=Be||function(){},!Ce.length)return Be();var ye=0,j=function(){Ee(Ce[ye],function(N){N?(Be(N),Be=function(){}):(ye+=1)>=Ce.length?Be():a(j)})};j()},w=function(Ce,Ee,Be,ye){u(Ce,function(j,N){Be(Ee,j,function(T,_){Ee=_,N(T)})},function(j){ye(j,Ee)})};C.exports={isWorker:function(){return(void 0===n||!0===n.browser)&&"undefined"==typeof window},nextTick:a,hasTerm:f,lexicalFormBaseUri:function(Ce,Ee){var j=null;if(Ee=Ee||{},null==Ce.value){j=Ce.prefix;var Be=Ce.suffix,ye=Ee.namespaces[j];j=null!=ye?ye+Be:j+":"+Be}else j=Ce.value;return null===j?null:(-1==j.indexOf(":")&&(j=(Ee.base||"")+j),j)},parseISO8601,compareDateComponents,iso8601,normalizeUnicodeLiterals,lexicalFormLiteral,registerIndexedDB,guid,hashTerm:f,keys:function(Ce){var Be,Ee=[];for(Be in Ce)Ee.push(Be);return Ee},values:function(Ce){var Be,Ee=[];for(Be in Ce)Ee.push(Ce[Be]);return Ee},size:function(Ce){if(Ce.length)return Ce.length;var Be,Ee=0;for(Be in Ce)Ee++;return Ee},map:function(Ce,Ee){if(Ce.map)return Ce.map(Ee);for(var Be=[],ye=0;ye<Ce.length;ye++)Be[ye]=Ee(Ce[ye]);return Be},each:m,forEach:m,include:function(Ce,Ee){for(var Be=0;Be<Ce.length;Be++)if(Ce[Be]===Ee)return!0;return!1},reject:k,remove:k,clone,create:d,whilst:l,eachSeries:u,eachParallel:function(Ce,Ee,Be){if(Be=Be||function(){},!Ce.length)return Be();for(var ye=!1,j=0,N=function(_){if(_)throw ye=!0,Error(_);ye||++j===Ce.length&&Be()},T=0;T<Ce.length;T++)!function(_,I,D,O){a(function(){try{O(_[I],function(){D()})}catch(s){D(s)}})}(Ce,T,N,Ee)},seq:function(){var Ce=arguments;return function(){var Ee=this,Be=Array.prototype.slice.call(arguments),ye=Be.pop();w(Ce,Be,function(j,N,T){N.apply(Ee,j.concat([function(){var _=arguments[0],I=Array.prototype.slice.call(arguments,1);T(_,I)}]))},function(j,N){ye.apply(Ee,[j].concat(N))})}},yieldFrequency:function(Ce){b=Ce}}}).call(this,x("2ionoC"))},{"2ionoC":9}]},{},[42])(42)}),function(Ce,Ee){"object"==typeof exports&&"undefined"!=typeof module?module.exports=Ee():"function"==typeof define&&define.amd?define(Ee):(Ce=Ce||self).CodeMirror=Ee()}(this,function(){"use strict";var Ce=navigator.userAgent,Ee=navigator.platform,Be=/gecko\/\d/i.test(Ce),ye=/MSIE \d/.test(Ce),j=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ce),N=/Edge\/(\d+)/.exec(Ce),T=ye||j||N,_=T&&(ye?document.documentMode||6:+(N||j)[1]),I=!N&&/WebKit\//.test(Ce),D=I&&/Qt\/\d+\.\d+/.test(Ce),O=!N&&/Chrome\/(\d+)/.exec(Ce),s=O&&+O[1],R=/Opera\//.test(Ce),G=/Apple Computer/.test(navigator.vendor),Y=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Ce),X=/PhantomJS/.test(Ce),fe=G&&(/Mobile\/\w+/.test(Ce)||navigator.maxTouchPoints>2),ne=/Android/.test(Ce),re=fe||ne||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Ce),oe=fe||/Mac/.test(Ee),he=/\bCrOS\b/.test(Ce),pe=/win/i.test(Ee),V=R&&Ce.match(/Version\/(\d*\.\d*)/);V&&(V=Number(V[1])),V&&V>=15&&(R=!1,I=!0);var W=oe&&(D||R&&(null==V||V<12.11)),ee=Be||T&&_>=9;function ge(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var ke,Se=function(t,i){var E=t.className,L=ge(i).exec(E);if(L){var M=E.slice(L.index+L[0].length);t.className=E.slice(0,L.index)+(M?L[1]+M:"")}};function Le(t){for(var i=t.childNodes.length;i>0;--i)t.removeChild(t.firstChild);return t}function Ne(t,i){return Le(t).appendChild(i)}function Qe(t,i,E,L){var M=document.createElement(t);if(E&&(M.className=E),L&&(M.style.cssText=L),"string"==typeof i)M.appendChild(document.createTextNode(i));else if(i)for(var U=0;U<i.length;++U)M.appendChild(i[U]);return M}function $e(t,i,E,L){var M=Qe(t,i,E,L);return M.setAttribute("role","presentation"),M}function se(t,i){if(3==i.nodeType&&(i=i.parentNode),t.contains)return t.contains(i);do{if(11==i.nodeType&&(i=i.host),i==t)return!0}while(i=i.parentNode)}function me(){var t;try{t=document.activeElement}catch(i){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function _e(t,i){var E=t.className;ge(i).test(E)||(t.className+=(E?" ":"")+i)}function qe(t,i){for(var E=t.split(" "),L=0;L<E.length;L++)E[L]&&!ge(E[L]).test(i)&&(i+=" "+E[L]);return i}ke=document.createRange?function(t,i,E,L){var M=document.createRange();return M.setEnd(L||t,E),M.setStart(t,i),M}:function(t,i,E){var L=document.body.createTextRange();try{L.moveToElementText(t.parentNode)}catch(M){return L}return L.collapse(!0),L.moveEnd("character",E),L.moveStart("character",i),L};var Ze=function(t){t.select()};function st(t){var i=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,i)}}function yt(t,i,E){for(var L in i||(i={}),t)t.hasOwnProperty(L)&&(!1!==E||!i.hasOwnProperty(L))&&(i[L]=t[L]);return i}function vt(t,i,E,L,M){null==i&&(-1==(i=t.search(/[^\s\u00a0]/))&&(i=t.length));for(var U=L||0,te=M||0;;){var ce=t.indexOf("\t",U);if(ce<0||ce>=i)return te+(i-U);te+=ce-U,te+=E-te%E,U=ce+1}}fe?Ze=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:T&&(Ze=function(t){try{t.select()}catch(i){}});var Kt=function(){this.id=null,this.f=null,this.time=0,this.handler=st(this.onTimeout,this)};function Mt(t,i){for(var E=0;E<t.length;++E)if(t[E]==i)return E;return-1}Kt.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},Kt.prototype.set=function(t,i){this.f=i;var E=+new Date+t;(!this.id||E<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=E)};var ot={toString:function(){return"CodeMirror.Pass"}},dt={scroll:!1},ht={origin:"*mouse"},Lt={origin:"+move"};function xt(t,i,E){for(var L=0,M=0;;){var U=t.indexOf("\t",L);-1==U&&(U=t.length);var te=U-L;if(U==t.length||M+te>=i)return L+Math.min(te,i-M);if(M+=U-L,L=U+1,(M+=E-M%E)>=i)return L}}var Tt=[""];function Wt(t){for(;Tt.length<=t;)Tt.push(St(Tt)+" ");return Tt[t]}function St(t){return t[t.length-1]}function _r(t,i){for(var E=[],L=0;L<t.length;L++)E[L]=i(t[L],L);return E}function hr(){}function $t(t,i){var E;return Object.create?E=Object.create(t):(hr.prototype=t,E=new hr),i&&yt(i,E),E}var Fr=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function We(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||Fr.test(t))}function Ke(t,i){return i?!!(i.source.indexOf("\\w")>-1&&We(t))||i.test(t):We(t)}function Pe(t){for(var i in t)if(t.hasOwnProperty(i)&&t[i])return!1;return!0}var ie=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function be(t){return t.charCodeAt(0)>=768&&ie.test(t)}function Te(t,i,E){for(;(E<0?i>0:i<t.length)&&be(t.charAt(i));)i+=E;return i}function je(t,i,E){for(var L=i>E?-1:1;;){if(i==E)return i;var M=(i+E)/2,U=L<0?Math.ceil(M):Math.floor(M);if(U==i)return t(U)?i:E;t(U)?E=U:i=U+L}}var H=null;function z(t,i,E){var L;H=null;for(var M=0;M<t.length;++M){var U=t[M];if(U.from<i&&U.to>i)return M;U.to==i&&(U.from!=U.to&&"before"==E?L=M:H=M),U.from==i&&(U.from!=U.to&&"before"!=E?L=M:H=M)}return null!=L?L:H}var q=function(){function E(we){return we<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(we):1424<=we&&we<=1524?"R":1536<=we&&we<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(we-1536):1774<=we&&we<=2220?"r":8192<=we&&we<=8203?"w":8204==we?"b":"L"}var L=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,M=/[stwN]/,U=/[LRr]/,te=/[Lb1n]/,ce=/[1n]/;function ve(we,De,Ue){this.level=we,this.from=De,this.to=Ue}return function(we,De){var Ue="ltr"==De?"L":"R";if(0==we.length||"ltr"==De&&!L.test(we))return!1;for(var Ve=we.length,ze=[],rt=0;rt<Ve;++rt)ze.push(E(we.charCodeAt(rt)));for(var nt=0,lt=Ue;nt<Ve;++nt){var at=ze[nt];"m"==at?ze[nt]=lt:lt=at}for(var pt=0,ft=Ue;pt<Ve;++pt){var gt=ze[pt];"1"==gt&&"r"==ft?ze[pt]="n":U.test(gt)&&(ft=gt,"r"==gt&&(ze[pt]="R"))}for(var Ft=1,kt=ze[0];Ft<Ve-1;++Ft){var jt=ze[Ft];"+"==jt&&"1"==kt&&"1"==ze[Ft+1]?ze[Ft]="1":","==jt&&kt==ze[Ft+1]&&("1"==kt||"n"==kt)&&(ze[Ft]=kt),kt=jt}for(var zt=0;zt<Ve;++zt){var fr=ze[zt];if(","==fr)ze[zt]="N";else if("%"==fr){var Yt=void 0;for(Yt=zt+1;Yt<Ve&&"%"==ze[Yt];++Yt);for(var Dr=zt&&"!"==ze[zt-1]||Yt<Ve&&"1"==ze[Yt]?"1":"N",Rr=zt;Rr<Yt;++Rr)ze[Rr]=Dr;zt=Yt-1}}for(var rr=0,Br=Ue;rr<Ve;++rr){var mr=ze[rr];"L"==Br&&"1"==mr?ze[rr]="L":U.test(mr)&&(Br=mr)}for(var sr=0;sr<Ve;++sr)if(M.test(ze[sr])){var lr=void 0;for(lr=sr+1;lr<Ve&&M.test(ze[lr]);++lr);for(var Zt="L"==(sr?ze[sr-1]:Ue),pi=Zt==("L"==(lr<Ve?ze[lr]:Ue))?Zt?"L":"R":Ue,Wn=sr;Wn<lr;++Wn)ze[Wn]=pi;sr=lr-1}for(var zr,kr=[],cr=0;cr<Ve;)if(te.test(ze[cr])){var Ui=cr;for(++cr;cr<Ve&&te.test(ze[cr]);++cr);kr.push(new ve(0,Ui,cr))}else{var gn=cr,di=kr.length,qn="rtl"==De?1:0;for(++cr;cr<Ve&&"L"!=ze[cr];++cr);for(var Nr=gn;Nr<cr;)if(ce.test(ze[Nr])){gn<Nr&&(kr.splice(di,0,new ve(1,gn,Nr)),di+=qn);var gi=Nr;for(++Nr;Nr<cr&&ce.test(ze[Nr]);++Nr);kr.splice(di,0,new ve(2,gi,Nr)),di+=qn,gn=Nr}else++Nr;gn<cr&&kr.splice(di,0,new ve(1,gn,cr))}return"ltr"==De&&(1==kr[0].level&&(zr=we.match(/^\s+/))&&(kr[0].from=zr[0].length,kr.unshift(new ve(0,0,zr[0].length))),1==St(kr).level&&(zr=we.match(/\s+$/))&&(St(kr).to-=zr[0].length,kr.push(new ve(0,Ve-zr[0].length,Ve)))),"rtl"==De?kr.reverse():kr}}();function ue(t,i){var E=t.order;return null==E&&(E=t.order=q(t.text,i)),E}var le=[],Z=function(t,i,E){if(t.addEventListener)t.addEventListener(i,E,!1);else if(t.attachEvent)t.attachEvent("on"+i,E);else{var L=t._handlers||(t._handlers={});L[i]=(L[i]||le).concat(E)}};function ae(t,i){return t._handlers&&t._handlers[i]||le}function xe(t,i,E){if(t.removeEventListener)t.removeEventListener(i,E,!1);else if(t.detachEvent)t.detachEvent("on"+i,E);else{var L=t._handlers,M=L&&L[i];if(M){var U=Mt(M,E);U>-1&&(L[i]=M.slice(0,U).concat(M.slice(U+1)))}}}function Fe(t,i){var E=ae(t,i);if(E.length)for(var L=Array.prototype.slice.call(arguments,2),M=0;M<E.length;++M)E[M].apply(null,L)}function Ae(t,i,E){return"string"==typeof i&&(i={type:i,preventDefault:function(){this.defaultPrevented=!0}}),Fe(t,E||i.type,t,i),et(i)||i.codemirrorIgnore}function Me(t){var i=t._handlers&&t._handlers.cursorActivity;if(i)for(var E=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),L=0;L<i.length;++L)-1==Mt(E,i[L])&&E.push(i[L])}function Ie(t,i){return ae(t,i).length>0}function Re(t){t.prototype.on=function(i,E){Z(this,i,E)},t.prototype.off=function(i,E){xe(this,i,E)}}function Oe(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Xe(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function et(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Je(t){Oe(t),Xe(t)}function _t(t){return t.target||t.srcElement}function mt(t){var i=t.which;return null==i&&(1&t.button?i=1:2&t.button?i=3:4&t.button&&(i=2)),oe&&t.ctrlKey&&1==i&&(i=3),i}var At,Ot,wt=function(){if(T&&_<9)return!1;var t=Qe("div");return"draggable"in t||"dragDrop"in t}();function Pt(t){if(null==At){var i=Qe("span","\u200b");Ne(t,Qe("span",[i,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(At=i.offsetWidth<=1&&i.offsetHeight>2&&!(T&&_<8))}var E=At?Qe("span","\u200b"):Qe("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return E.setAttribute("cm-text",""),E}function tr(t){if(null!=Ot)return Ot;var i=Ne(t,document.createTextNode("A\u062eA")),E=ke(i,0,1).getBoundingClientRect(),L=ke(i,1,2).getBoundingClientRect();return Le(t),!(!E||E.left==E.right)&&(Ot=L.right-E.right<3)}var t,pr=3!="\n\nb".split(/\n/).length?function(t){for(var i=0,E=[],L=t.length;i<=L;){var M=t.indexOf("\n",i);-1==M&&(M=t.length);var U=t.slice(i,"\r"==t.charAt(M-1)?M-1:M),te=U.indexOf("\r");-1!=te?(E.push(U.slice(0,te)),i+=te+1):(E.push(U),i=M+1)}return E}:function(t){return t.split(/\r\n?|\n/)},Mr=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(i){return!1}}:function(t){var i;try{i=t.ownerDocument.selection.createRange()}catch(E){}return!(!i||i.parentElement()!=t)&&0!=i.compareEndPoints("StartToEnd",i)},Lr="oncopy"in(t=Qe("div"))||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy),Ar=null;var jr={},Er={};function Gi(t,i){arguments.length>2&&(i.dependencies=Array.prototype.slice.call(arguments,2)),jr[t]=i}function Qr(t){if("string"==typeof t&&Er.hasOwnProperty(t))t=Er[t];else if(t&&"string"==typeof t.name&&Er.hasOwnProperty(t.name)){var i=Er[t.name];"string"==typeof i&&(i={name:i}),(t=$t(i,t)).name=i.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Qr("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Qr("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Jn(t,i){i=Qr(i);var E=jr[i.name];if(!E)return Jn(t,"text/plain");var L=E(t,i);if(sn.hasOwnProperty(i.name)){var M=sn[i.name];for(var U in M)!M.hasOwnProperty(U)||(L.hasOwnProperty(U)&&(L["_"+U]=L[U]),L[U]=M[U])}if(L.name=i.name,i.helperType&&(L.helperType=i.helperType),i.modeProps)for(var te in i.modeProps)L[te]=i.modeProps[te];return L}var sn={};function e(t,i){yt(i,sn.hasOwnProperty(t)?sn[t]:sn[t]={})}function qr(t,i){if(!0===i)return i;if(t.copyState)return t.copyState(i);var E={};for(var L in i){var M=i[L];M instanceof Array&&(M=M.concat([])),E[L]=M}return E}function vi(t,i){for(var E;t.innerMode&&((E=t.innerMode(i))&&E.mode!=t);)i=E.state,t=E.mode;return E||{mode:t,state:i}}function Ao(t,i,E){return!t.startState||t.startState(i,E)}var or=function(t,i,E){this.pos=this.start=0,this.string=t,this.tabSize=i||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=E};function bt(t,i){if((i-=t.first)<0||i>=t.size)throw new Error("There is no line "+(i+t.first)+" in the document.");for(var E=t;!E.lines;)for(var L=0;;++L){var M=E.children[L],U=M.chunkSize();if(i<U){E=M;break}i-=U}return E.lines[i]}function Vn(t,i,E){var L=[],M=i.line;return t.iter(i.line,E.line+1,function(U){var te=U.text;M==E.line&&(te=te.slice(0,E.ch)),M==i.line&&(te=te.slice(i.ch)),L.push(te),++M}),L}function Eo(t,i,E){var L=[];return t.iter(i,E,function(M){L.push(M.text)}),L}function ln(t,i){var E=i-t.height;if(E)for(var L=t;L;L=L.parent)L.height+=E}function Xt(t){if(null==t.parent)return null;for(var i=t.parent,E=Mt(i.lines,t),L=i.parent;L;i=L,L=L.parent)for(var M=0;L.children[M]!=i;++M)E+=L.children[M].chunkSize();return E+i.first}function Yn(t,i){var E=t.first;e:do{for(var L=0;L<t.children.length;++L){var M=t.children[L],U=M.height;if(i<U){t=M;continue e}i-=U,E+=M.chunkSize()}return E}while(!t.lines);for(var te=0;te<t.lines.length;++te){var ve=t.lines[te].height;if(i<ve)break;i-=ve}return E+te}function Hi(t,i){return i>=t.first&&i<t.first+t.size}function To(t,i){return String(t.lineNumberFormatter(i+t.firstLineNumber))}function it(t,i,E){if(void 0===E&&(E=null),!(this instanceof it))return new it(t,i,E);this.line=t,this.ch=i,this.sticky=E}function Et(t,i){return t.line-i.line||t.ch-i.ch}function As(t,i){return t.sticky==i.sticky&&0==Et(t,i)}function Es(t){return it(t.line,t.ch)}function Io(t,i){return Et(t,i)<0?i:t}function No(t,i){return Et(t,i)<0?t:i}function Ts(t,i){return Math.max(t.first,Math.min(i,t.first+t.size-1))}function It(t,i){if(i.line<t.first)return it(t.first,0);var E=t.first+t.size-1;return i.line>E?it(E,bt(t,E).text.length):function Fl(t,i){var E=t.ch;return null==E||E>i?it(t.line,i):E<0?it(t.line,0):t}(i,bt(t,i.line).text.length)}function Ll(t,i){for(var E=[],L=0;L<i.length;L++)E[L]=It(t,i[L]);return E}or.prototype.eol=function(){return this.pos>=this.string.length},or.prototype.sol=function(){return this.pos==this.lineStart},or.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},or.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},or.prototype.eat=function(t){var i=this.string.charAt(this.pos);if("string"==typeof t?i==t:i&&(t.test?t.test(i):t(i)))return++this.pos,i},or.prototype.eatWhile=function(t){for(var i=this.pos;this.eat(t););return this.pos>i},or.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},or.prototype.skipToEnd=function(){this.pos=this.string.length},or.prototype.skipTo=function(t){var i=this.string.indexOf(t,this.pos);if(i>-1)return this.pos=i,!0},or.prototype.backUp=function(t){this.pos-=t},or.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=vt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?vt(this.string,this.lineStart,this.tabSize):0)},or.prototype.indentation=function(){return vt(this.string,null,this.tabSize)-(this.lineStart?vt(this.string,this.lineStart,this.tabSize):0)},or.prototype.match=function(t,i,E){if("string"!=typeof t){var U=this.string.slice(this.pos).match(t);return U&&U.index>0?null:(U&&!1!==i&&(this.pos+=U[0].length),U)}var L=function(te){return E?te.toLowerCase():te};if(L(this.string.substr(this.pos,t.length))==L(t))return!1!==i&&(this.pos+=t.length),!0},or.prototype.current=function(){return this.string.slice(this.start,this.pos)},or.prototype.hideFirstChars=function(t,i){this.lineStart+=t;try{return i()}finally{this.lineStart-=t}},or.prototype.lookAhead=function(t){var i=this.lineOracle;return i&&i.lookAhead(t)},or.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var dr=function(t,i){this.state=t,this.lookAhead=i},wr=function(t,i,E,L){this.state=i,this.doc=t,this.line=E,this.maxLookAhead=L||0,this.baseTokens=null,this.baseTokenPos=1};function Cr(t,i,E,L){var M=[t.state.modeGen],U={};Xi(t,i.text,t.doc.mode,E,function(we,De){return M.push(we,De)},U,L);for(var te=E.state,ce=function(we){E.baseTokens=M;var De=t.state.overlays[we],Ue=1,Ve=0;E.state=!0,Xi(t,i.text,De.mode,E,function(ze,rt){for(var nt=Ue;Ve<ze;){var lt=M[Ue];lt>ze&&M.splice(Ue,1,ze,M[Ue+1],lt),Ue+=2,Ve=Math.min(ze,lt)}if(rt)if(De.opaque)M.splice(nt,Ue-nt,ze,"overlay "+rt),Ue=nt+2;else for(;nt<Ue;nt+=2){var at=M[nt+1];M[nt+1]=(at?at+" ":"")+"overlay "+rt}},U),E.state=te,E.baseTokens=null,E.baseTokenPos=1},ve=0;ve<t.state.overlays.length;++ve)ce(ve);return{styles:M,classes:U.bgClass||U.textClass?U:null}}function vn(t,i,E){if(!i.styles||i.styles[0]!=t.state.modeGen){var L=yi(t,Xt(i)),M=i.text.length>t.options.maxHighlightLength&&qr(t.doc.mode,L.state),U=Cr(t,i,L);M&&(L.state=M),i.stateAfter=L.save(!M),i.styles=U.styles,U.classes?i.styleClasses=U.classes:i.styleClasses&&(i.styleClasses=null),E===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return i.styles}function yi(t,i,E){var L=t.doc,M=t.display;if(!L.mode.startState)return new wr(L,!0,i);var U=function En(t,i,E){for(var L,M,U=t.doc,te=E?-1:i-(t.doc.mode.innerMode?1e3:100),ce=i;ce>te;--ce){if(ce<=U.first)return U.first;var ve=bt(U,ce-1),we=ve.stateAfter;if(we&&(!E||ce+(we instanceof dr?we.lookAhead:0)<=U.modeFrontier))return ce;var De=vt(ve.text,null,t.options.tabSize);(null==M||L>De)&&(M=ce-1,L=De)}return M}(t,i,E),te=U>L.first&&bt(L,U-1).stateAfter,ce=te?wr.fromSaved(L,te,U):new wr(L,Ao(L.mode),U);return L.iter(U,i,function(ve){Is(t,ve.text,ce);var we=ce.line;ve.stateAfter=we==i-1||we%5==0||we>=M.viewFrom&&we<M.viewTo?ce.save():null,ce.nextLine()}),E&&(L.modeFrontier=ce.line),ce}function Is(t,i,E,L){var M=t.doc.mode,U=new or(i,t.options.tabSize,E);for(U.start=U.pos=L||0,""==i&&Ns(M,E.state);!U.eol();)Ms(M,U,E.state),U.start=U.pos}function Ns(t,i){if(t.blankLine)return t.blankLine(i);if(t.innerMode){var E=vi(t,i);if(E.mode.blankLine)return E.mode.blankLine(E.state)}}function Ms(t,i,E,L){for(var M=0;M<10;M++){L&&(L[0]=vi(t,E).mode);var U=t.token(i,E);if(i.pos>i.start)return U}throw new Error("Mode "+t.name+" failed to advance stream.")}wr.prototype.lookAhead=function(t){var i=this.doc.getLine(this.line+t);return null!=i&&t>this.maxLookAhead&&(this.maxLookAhead=t),i},wr.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var i=this.baseTokens[this.baseTokenPos+1];return{type:i&&i.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},wr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},wr.fromSaved=function(t,i,E){return i instanceof dr?new wr(t,qr(t.mode,i.state),E,i.lookAhead):new wr(t,qr(t.mode,i),E)},wr.prototype.save=function(t){var i=!1!==t?qr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new dr(i,this.maxLookAhead):i};var Dt=function(t,i,E){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=i||null,this.state=E};function Rt(t,i,E,L){var te,De,M=t.doc,U=M.mode,ce=bt(M,(i=It(M,i)).line),ve=yi(t,i.line,E),we=new or(ce.text,t.options.tabSize,ve);for(L&&(De=[]);(L||we.pos<i.ch)&&!we.eol();)we.start=we.pos,te=Ms(U,we,ve.state),L&&De.push(new Dt(we,te,qr(M.mode,ve.state)));return L?De:new Dt(we,te,ve.state)}function yn(t,i){if(t)for(;;){var E=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!E)break;t=t.slice(0,E.index)+t.slice(E.index+E[0].length);var L=E[1]?"bgClass":"textClass";null==i[L]?i[L]=E[2]:new RegExp("(?:^|\\s)"+E[2]+"(?:$|\\s)").test(i[L])||(i[L]+=" "+E[2])}return t}function Xi(t,i,E,L,M,U,te){var ce=E.flattenSpans;null==ce&&(ce=t.options.flattenSpans);var Ue,ve=0,we=null,De=new or(i,t.options.tabSize,L),Ve=t.options.addModeClass&&[null];for(""==i&&yn(Ns(E,L.state),U);!De.eol();){if(De.pos>t.options.maxHighlightLength?(ce=!1,te&&Is(t,i,L,De.pos),De.pos=i.length,Ue=null):Ue=yn(Ms(E,De,L.state,Ve),U),Ve){var ze=Ve[0].name;ze&&(Ue="m-"+(Ue?ze+" "+Ue:ze))}if(!ce||we!=Ue){for(;ve<De.start;)M(ve=Math.min(De.start,ve+5e3),we);we=Ue}De.start=De.pos}for(;ve<De.pos;){var rt=Math.min(De.pos,ve+5e3);M(rt,we),ve=rt}}var Bt=!1,Nt=!1;function jo(t,i,E){this.marker=t,this.from=i,this.to=E}function Tn(t,i){if(t)for(var E=0;E<t.length;++E){var L=t[E];if(L.marker==i)return L}}function Al(t,i){for(var E,L=0;L<t.length;++L)t[L]!=i&&(E||(E=[])).push(t[L]);return E}function mi(t,i){if(i.full)return null;var E=Hi(t,i.from.line)&&bt(t,i.from.line).markedSpans,L=Hi(t,i.to.line)&&bt(t,i.to.line).markedSpans;if(!E&&!L)return null;var M=i.from.ch,U=i.to.ch,te=0==Et(i.from,i.to),ce=function El(t,i,E){var L;if(t)for(var M=0;M<t.length;++M){var U=t[M],te=U.marker;if(null==U.from||(te.inclusiveLeft?U.from<=i:U.from<i)||U.from==i&&"bookmark"==te.type&&(!E||!U.marker.insertLeft)){var ve=null==U.to||(te.inclusiveRight?U.to>=i:U.to>i);(L||(L=[])).push(new jo(te,U.from,ve?null:U.to))}}return L}(E,M,te),ve=function In(t,i,E){var L;if(t)for(var M=0;M<t.length;++M){var U=t[M],te=U.marker;if(null==U.to||(te.inclusiveRight?U.to>=i:U.to>i)||U.from==i&&"bookmark"==te.type&&(!E||U.marker.insertLeft)){var ve=null==U.from||(te.inclusiveLeft?U.from<=i:U.from<i);(L||(L=[])).push(new jo(te,ve?null:U.from-i,null==U.to?null:U.to-i))}}return L}(L,U,te),we=1==i.text.length,De=St(i.text).length+(we?M:0);if(ce)for(var Ue=0;Ue<ce.length;++Ue){var Ve=ce[Ue];if(null==Ve.to){var ze=Tn(ve,Ve.marker);ze?we&&(Ve.to=null==ze.to?null:ze.to+De):Ve.to=M}}if(ve)for(var rt=0;rt<ve.length;++rt){var nt=ve[rt];if(null!=nt.to&&(nt.to+=De),null==nt.from)Tn(ce,nt.marker)||(nt.from=De,we&&(ce||(ce=[])).push(nt));else nt.from+=De,we&&(ce||(ce=[])).push(nt)}ce&&(ce=wn(ce)),ve&&ve!=ce&&(ve=wn(ve));var at=[ce];if(!we){var ft,pt=i.text.length-2;if(pt>0&&ce)for(var gt=0;gt<ce.length;++gt)null==ce[gt].to&&(ft||(ft=[])).push(new jo(ce[gt].marker,null,null));for(var Ft=0;Ft<pt;++Ft)at.push(ft);at.push(ve)}return at}function wn(t){for(var i=0;i<t.length;++i){var E=t[i];null!=E.from&&E.from==E.to&&!1!==E.marker.clearWhenEmpty&&t.splice(i--,1)}return t.length?t:null}function Kr(t){var i=t.markedSpans;if(i){for(var E=0;E<i.length;++E)i[E].marker.detachLine(t);t.markedSpans=null}}function Jr(t,i){if(i){for(var E=0;E<i.length;++E)i[E].marker.attachLine(t);t.markedSpans=i}}function br(t){return t.inclusiveLeft?-1:0}function Sr(t){return t.inclusiveRight?1:0}function js(t,i){var E=t.lines.length-i.lines.length;if(0!=E)return E;var L=t.find(),M=i.find(),U=Et(L.from,M.from)||br(t)-br(i);return U?-U:Et(L.to,M.to)||Sr(t)-Sr(i)||i.id-t.id}function Os(t,i){var L,E=Nt&&t.markedSpans;if(E)for(var M=void 0,U=0;U<E.length;++U)(M=E[U]).marker.collapsed&&null==(i?M.from:M.to)&&(!L||js(L,M.marker)<0)&&(L=M.marker);return L}function Tl(t){return Os(t,!0)}function Ro(t){return Os(t,!1)}function Il(t,i){var L,E=Nt&&t.markedSpans;if(E)for(var M=0;M<E.length;++M){var U=E[M];U.marker.collapsed&&(null==U.from||U.from<i)&&(null==U.to||U.to>i)&&(!L||js(L,U.marker)<0)&&(L=U.marker)}return L}function Nl(t,i,E,L,M){var U=bt(t,i),te=Nt&&U.markedSpans;if(te)for(var ce=0;ce<te.length;++ce){var ve=te[ce];if(ve.marker.collapsed){var we=ve.marker.find(0),De=Et(we.from,E)||br(ve.marker)-br(M),Ue=Et(we.to,L)||Sr(ve.marker)-Sr(M);if(!(De>=0&&Ue<=0||De<=0&&Ue>=0)&&(De<=0&&(ve.marker.inclusiveRight&&M.inclusiveLeft?Et(we.to,E)>=0:Et(we.to,E)>0)||De>=0&&(ve.marker.inclusiveRight&&M.inclusiveLeft?Et(we.from,L)<=0:Et(we.from,L)<0)))return!0}}}function Vr(t){for(var i;i=Tl(t);)t=i.find(-1,!0).line;return t}function Bo(t,i){var E=bt(t,i),L=Vr(E);return E==L?i:Xt(L)}function Ml(t,i){if(i>t.lastLine())return i;var L,E=bt(t,i);if(!Cn(t,E))return i;for(;L=Ro(E);)E=L.find(1,!0).line;return Xt(E)+1}function Cn(t,i){var E=Nt&&i.markedSpans;if(E)for(var L=void 0,M=0;M<E.length;++M)if((L=E[M]).marker.collapsed){if(null==L.from)return!0;if(!L.marker.widgetNode&&0==L.from&&L.marker.inclusiveLeft&&Ds(t,i,L))return!0}}function Ds(t,i,E){if(null==E.to){var L=E.marker.find(1,!0);return Ds(t,L.line,Tn(L.line.markedSpans,E.marker))}if(E.marker.inclusiveRight&&E.to==i.text.length)return!0;for(var M=void 0,U=0;U<i.markedSpans.length;++U)if((M=i.markedSpans[U]).marker.collapsed&&!M.marker.widgetNode&&M.from==E.to&&(null==M.to||M.to!=E.from)&&(M.marker.inclusiveLeft||E.marker.inclusiveRight)&&Ds(t,i,M))return!0}function bn(t){for(var i=0,E=(t=Vr(t)).parent,L=0;L<E.lines.length;++L){var M=E.lines[L];if(M==t)break;i+=M.height}for(var U=E.parent;U;U=(E=U).parent)for(var te=0;te<U.children.length;++te){var ce=U.children[te];if(ce==E)break;i+=ce.height}return i}function Po(t){if(0==t.height)return 0;for(var E,i=t.text.length,L=t;E=Tl(L);){var M=E.find(0,!0);L=M.from.line,i+=M.from.ch-M.to.ch}for(L=t;E=Ro(L);){var U=E.find(0,!0);i-=L.text.length-U.from.ch,i+=(L=U.to.line).text.length-U.to.ch}return i}function Nn(t){var i=t.display,E=t.doc;i.maxLine=bt(E,E.first),i.maxLineLength=Po(i.maxLine),i.maxLineChanged=!0,E.iter(function(L){var M=Po(L);M>i.maxLineLength&&(i.maxLineLength=M,i.maxLine=L)})}var Mn=function(t,i,E){this.text=t,Jr(this,i),this.height=E?E(this):1};function Rs(t){t.parent=null,Kr(t)}Mn.prototype.lineNo=function(){return Xt(this)},Re(Mn);var ta={},ra={};function jl(t,i){if(!t||/^\s*$/.test(t))return null;var E=i.addModeClass?ra:ta;return E[t]||(E[t]=t.replace(/\S+/g,"cm-$&"))}function Ol(t,i){var E=$e("span",null,null,I?"padding-right: .1px":null),L={pre:$e("pre",[E],"CodeMirror-line"),content:E,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};i.measure={};for(var M=0;M<=(i.rest?i.rest.length:0);M++){var U=M?i.rest[M-1]:i.line,te=void 0;L.pos=0,L.addToken=na,tr(t.display.measure)&&(te=ue(U,t.doc.direction))&&(L.addToken=ia(L.addToken,te)),L.map=[],Bl(U,L,vn(t,U,i!=t.display.externalMeasured&&Xt(U))),U.styleClasses&&(U.styleClasses.bgClass&&(L.bgClass=qe(U.styleClasses.bgClass,L.bgClass||"")),U.styleClasses.textClass&&(L.textClass=qe(U.styleClasses.textClass,L.textClass||""))),0==L.map.length&&L.map.push(0,0,L.content.appendChild(Pt(t.display.measure))),0==M?(i.measure.map=L.map,i.measure.cache={}):((i.measure.maps||(i.measure.maps=[])).push(L.map),(i.measure.caches||(i.measure.caches=[])).push({}))}if(I){var ve=L.content.lastChild;(/\bcm-tab\b/.test(ve.className)||ve.querySelector&&ve.querySelector(".cm-tab"))&&(L.content.className="cm-tab-wrap-hack")}return Fe(t,"renderLine",t,i.line,L.pre),L.pre.className&&(L.textClass=qe(L.pre.className,L.textClass||"")),L}function Dl(t){var i=Qe("span","\u2022","cm-invalidchar");return i.title="\\u"+t.charCodeAt(0).toString(16),i.setAttribute("aria-label",i.title),i}function na(t,i,E,L,M,U,te){if(i){var De,ce=t.splitSpaces?function Rl(t,i){if(t.length>1&&!/  /.test(t))return t;for(var E=i,L="",M=0;M<t.length;M++){var U=t.charAt(M);" "==U&&E&&(M==t.length-1||32==t.charCodeAt(M+1))&&(U="\xa0"),L+=U,E=" "==U}return L}(i,t.trailingSpace):i,ve=t.cm.state.specialChars,we=!1;if(ve.test(i)){De=document.createDocumentFragment();for(var Ue=0;;){ve.lastIndex=Ue;var Ve=ve.exec(i),ze=Ve?Ve.index-Ue:i.length-Ue;if(ze){var rt=document.createTextNode(ce.slice(Ue,Ue+ze));T&&_<9?De.appendChild(Qe("span",[rt])):De.appendChild(rt),t.map.push(t.pos,t.pos+ze,rt),t.col+=ze,t.pos+=ze}if(!Ve)break;Ue+=ze+1;var nt=void 0;if("\t"==Ve[0]){var lt=t.cm.options.tabSize,at=lt-t.col%lt;(nt=De.appendChild(Qe("span",Wt(at),"cm-tab"))).setAttribute("role","presentation"),nt.setAttribute("cm-text","\t"),t.col+=at}else"\r"==Ve[0]||"\n"==Ve[0]?((nt=De.appendChild(Qe("span","\r"==Ve[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",Ve[0]),t.col+=1):((nt=t.cm.options.specialCharPlaceholder(Ve[0])).setAttribute("cm-text",Ve[0]),T&&_<9?De.appendChild(Qe("span",[nt])):De.appendChild(nt),t.col+=1);t.map.push(t.pos,t.pos+1,nt),t.pos++}}else t.col+=i.length,De=document.createTextNode(ce),t.map.push(t.pos,t.pos+i.length,De),T&&_<9&&(we=!0),t.pos+=i.length;if(t.trailingSpace=32==ce.charCodeAt(i.length-1),E||L||M||we||U||te){var pt=E||"";L&&(pt+=L),M&&(pt+=M);var ft=Qe("span",[De],pt,U);if(te)for(var gt in te)te.hasOwnProperty(gt)&&"style"!=gt&&"class"!=gt&&ft.setAttribute(gt,te[gt]);return t.content.appendChild(ft)}t.content.appendChild(De)}}function ia(t,i){return function(E,L,M,U,te,ce,ve){M=M?M+" cm-force-border":"cm-force-border";for(var we=E.pos,De=we+L.length;;){for(var Ue=void 0,Ve=0;Ve<i.length&&!((Ue=i[Ve]).to>we&&Ue.from<=we);Ve++);if(Ue.to>=De)return t(E,L,M,U,te,ce,ve);t(E,L.slice(0,Ue.to-we),M,U,null,ce,ve),U=null,L=L.slice(Ue.to-we),we=Ue.to}}}function Wi(t,i,E,L){var M=!L&&E.widgetNode;M&&t.map.push(t.pos,t.pos+i,M),!L&&t.cm.display.input.needsContentAttribute&&(M||(M=t.content.appendChild(document.createElement("span"))),M.setAttribute("cm-marker",E.id)),M&&(t.cm.display.input.setUneditable(M),t.content.appendChild(M)),t.pos+=i,t.trailingSpace=!1}function Bl(t,i,E){var L=t.markedSpans,M=t.text,U=0;if(L)for(var Ue,Ve,rt,nt,lt,at,pt,ce=M.length,ve=0,we=1,De="",ze=0;;){if(ze==ve){rt=nt=lt=Ve="",pt=null,at=null,ze=1/0;for(var ft=[],gt=void 0,Ft=0;Ft<L.length;++Ft){var kt=L[Ft],jt=kt.marker;if("bookmark"==jt.type&&kt.from==ve&&jt.widgetNode)ft.push(jt);else if(kt.from<=ve&&(null==kt.to||kt.to>ve||jt.collapsed&&kt.to==ve&&kt.from==ve)){if(null!=kt.to&&kt.to!=ve&&ze>kt.to&&(ze=kt.to,nt=""),jt.className&&(rt+=" "+jt.className),jt.css&&(Ve=(Ve?Ve+";":"")+jt.css),jt.startStyle&&kt.from==ve&&(lt+=" "+jt.startStyle),jt.endStyle&&kt.to==ze&&(gt||(gt=[])).push(jt.endStyle,kt.to),jt.title&&((pt||(pt={})).title=jt.title),jt.attributes)for(var zt in jt.attributes)(pt||(pt={}))[zt]=jt.attributes[zt];jt.collapsed&&(!at||js(at.marker,jt)<0)&&(at=kt)}else kt.from>ve&&ze>kt.from&&(ze=kt.from)}if(gt)for(var fr=0;fr<gt.length;fr+=2)gt[fr+1]==ze&&(nt+=" "+gt[fr]);if(!at||at.from==ve)for(var Yt=0;Yt<ft.length;++Yt)Wi(i,0,ft[Yt]);if(at&&(at.from||0)==ve){if(Wi(i,(null==at.to?ce+1:at.to)-ve,at.marker,null==at.from),null==at.to)return;at.to==ve&&(at=!1)}}if(ve>=ce)break;for(var Dr=Math.min(ce,ze);;){if(De){var Rr=ve+De.length;if(!at){var rr=Rr>Dr?De.slice(0,Dr-ve):De;i.addToken(i,rr,Ue?Ue+rt:rt,lt,ve+rr.length==ze?nt:"",Ve,pt)}if(Rr>=Dr){De=De.slice(Dr-ve),ve=Dr;break}ve=Rr,lt=""}De=M.slice(U,U=E[we++]),Ue=jl(E[we++],i.cm.options)}}else for(var te=1;te<E.length;te+=2)i.addToken(i,M.slice(U,U=E[te]),jl(E[te+1],i.cm.options))}function qi(t,i,E){this.line=i,this.rest=function ea(t){for(var i,E;i=Ro(t);)t=i.find(1,!0).line,(E||(E=[])).push(t);return E}(i),this.size=this.rest?Xt(St(this.rest))-E+1:1,this.node=this.text=null,this.hidden=Cn(t,i)}function zi(t,i,E){for(var M,L=[],U=i;U<E;U=M){var te=new qi(t.doc,bt(t.doc,U),U);M=U+te.size,L.push(te)}return L}var wi=null;var Ki=null;function gr(t,i){var E=ae(t,i);if(E.length){var M,L=Array.prototype.slice.call(arguments,2);wi?M=wi.delayedCallbacks:Ki?M=Ki:(M=Ki=[],setTimeout(Ql,0));for(var U=function(ce){M.push(function(){return E[ce].apply(null,L)})},te=0;te<E.length;++te)U(te)}}function Ql(){var t=Ki;Ki=null;for(var i=0;i<t.length;++i)t[i]()}function Ul(t,i,E,L){for(var M=0;M<i.changes.length;M++){var U=i.changes[M];"text"==U?Hl(t,i):"gutter"==U?Ps(t,i,E,L):"class"==U?Bs(t,i):"widget"==U&&ua(t,i,L)}i.changes=null}function Ci(t){return t.node==t.text&&(t.node=Qe("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),T&&_<8&&(t.node.style.zIndex=2)),t.node}function Gl(t,i){var E=t.display.externalMeasured;return E&&E.line==i.line?(t.display.externalMeasured=null,i.measure=E.measure,E.built):Ol(t,i)}function Hl(t,i){var E=i.text.className,L=Gl(t,i);i.text==i.node&&(i.node=L.pre),i.text.parentNode.replaceChild(L.pre,i.text),i.text=L.pre,L.bgClass!=i.bgClass||L.textClass!=i.textClass?(i.bgClass=L.bgClass,i.textClass=L.textClass,Bs(t,i)):E&&(i.text.className=E)}function Bs(t,i){(function la(t,i){var E=i.bgClass?i.bgClass+" "+(i.line.bgClass||""):i.line.bgClass;if(E&&(E+=" CodeMirror-linebackground"),i.background)E?i.background.className=E:(i.background.parentNode.removeChild(i.background),i.background=null);else if(E){var L=Ci(i);i.background=L.insertBefore(Qe("div",null,E),L.firstChild),t.display.input.setUneditable(i.background)}})(t,i),i.line.wrapClass?Ci(i).className=i.line.wrapClass:i.node!=i.text&&(i.node.className="");var E=i.textClass?i.textClass+" "+(i.line.textClass||""):i.line.textClass;i.text.className=E||""}function Ps(t,i,E,L){if(i.gutter&&(i.node.removeChild(i.gutter),i.gutter=null),i.gutterBackground&&(i.node.removeChild(i.gutterBackground),i.gutterBackground=null),i.line.gutterClass){var M=Ci(i);i.gutterBackground=Qe("div",null,"CodeMirror-gutter-background "+i.line.gutterClass,"left: "+(t.options.fixedGutter?L.fixedPos:-L.gutterTotalWidth)+"px; width: "+L.gutterTotalWidth+"px"),t.display.input.setUneditable(i.gutterBackground),M.insertBefore(i.gutterBackground,i.text)}var U=i.line.gutterMarkers;if(t.options.lineNumbers||U){var te=Ci(i),ce=i.gutter=Qe("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?L.fixedPos:-L.gutterTotalWidth)+"px");if(ce.setAttribute("aria-hidden","true"),t.display.input.setUneditable(ce),te.insertBefore(ce,i.text),i.line.gutterClass&&(ce.className+=" "+i.line.gutterClass),t.options.lineNumbers&&(!U||!U["CodeMirror-linenumbers"])&&(i.lineNumber=ce.appendChild(Qe("div",To(t.options,E),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+L.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),U)for(var ve=0;ve<t.display.gutterSpecs.length;++ve){var we=t.display.gutterSpecs[ve].className,De=U.hasOwnProperty(we)&&U[we];De&&ce.appendChild(Qe("div",[De],"CodeMirror-gutter-elt","left: "+L.gutterLeft[we]+"px; width: "+L.gutterWidth[we]+"px"))}}}function ua(t,i,E){i.alignable&&(i.alignable=null);for(var L=ge("CodeMirror-linewidget"),M=i.node.firstChild,U=void 0;M;M=U)U=M.nextSibling,L.test(M.className)&&i.node.removeChild(M);Wl(t,i,E)}function Xl(t,i,E,L){var M=Gl(t,i);return i.text=i.node=M.pre,M.bgClass&&(i.bgClass=M.bgClass),M.textClass&&(i.textClass=M.textClass),Bs(t,i),Ps(t,i,E,L),Wl(t,i,L),i.node}function Wl(t,i,E){if(Qs(t,i.line,i,E,!0),i.rest)for(var L=0;L<i.rest.length;L++)Qs(t,i.rest[L],i,E,!1)}function Qs(t,i,E,L,M){if(i.widgets)for(var U=Ci(E),te=0,ce=i.widgets;te<ce.length;++te){var ve=ce[te],we=Qe("div",[ve.node],"CodeMirror-linewidget"+(ve.className?" "+ve.className:""));ve.handleMouseEvents||we.setAttribute("cm-ignore-events","true"),aa(ve,we,E,L),t.display.input.setUneditable(we),M&&ve.above?U.insertBefore(we,E.gutter||E.text):U.appendChild(we),gr(ve,"redraw")}}function aa(t,i,E,L){if(t.noHScroll){(E.alignable||(E.alignable=[])).push(i);var M=L.wrapperWidth;i.style.left=L.fixedPos+"px",t.coverGutter||(M-=L.gutterTotalWidth,i.style.paddingLeft=L.gutterTotalWidth+"px"),i.style.width=M+"px"}t.coverGutter&&(i.style.zIndex=5,i.style.position="relative",t.noHScroll||(i.style.marginLeft=-L.gutterTotalWidth+"px"))}function Ji(t){if(null!=t.height)return t.height;var i=t.doc.cm;if(!i)return 0;if(!se(document.body,t.node)){var E="position: relative;";t.coverGutter&&(E+="margin-left: -"+i.display.gutters.offsetWidth+"px;"),t.noHScroll&&(E+="width: "+i.display.wrapper.clientWidth+"px;"),Ne(i.display.measure,Qe("div",[t.node],null,E))}return t.height=t.node.parentNode.offsetHeight}function Sn(t,i){for(var E=_t(i);E!=t.wrapper;E=E.parentNode)if(!E||1==E.nodeType&&"true"==E.getAttribute("cm-ignore-events")||E.parentNode==t.sizer&&E!=t.mover)return!0}function Vi(t){return t.lineSpace.offsetTop}function Us(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Gs(t){if(t.cachedPaddingH)return t.cachedPaddingH;var i=Ne(t.measure,Qe("pre","x","CodeMirror-line-like")),E=window.getComputedStyle?window.getComputedStyle(i):i.currentStyle,L={left:parseInt(E.paddingLeft),right:parseInt(E.paddingRight)};return!isNaN(L.left)&&!isNaN(L.right)&&(t.cachedPaddingH=L),L}function un(t){return 50-t.display.nativeBarWidth}function Zn(t){return t.display.scroller.clientWidth-un(t)-t.display.barWidth}function Qo(t){return t.display.scroller.clientHeight-un(t)-t.display.barHeight}function Hs(t,i,E){if(t.line==i)return{map:t.measure.map,cache:t.measure.cache};if(t.rest){for(var L=0;L<t.rest.length;L++)if(t.rest[L]==i)return{map:t.measure.maps[L],cache:t.measure.caches[L]};for(var M=0;M<t.rest.length;M++)if(Xt(t.rest[M])>E)return{map:t.measure.maps[M],cache:t.measure.caches[M],before:!0}}}function ql(t,i,E,L){return an(t,bi(t,i),E,L)}function Uo(t,i){if(i>=t.display.viewFrom&&i<t.display.viewTo)return t.display.view[$n(t,i)];var E=t.display.externalMeasured;return E&&i>=E.lineN&&i<E.lineN+E.size?E:void 0}function bi(t,i){var E=Xt(i),L=Uo(t,E);L&&!L.text?L=null:L&&L.changes&&(Ul(t,L,E,to(t)),t.curOp.forceUpdate=!0),L||(L=function ca(t,i){var E=Xt(i=Vr(i)),L=t.display.externalMeasured=new qi(t.doc,i,E);L.lineN=E;var M=L.built=Ol(t,L);return L.text=M.pre,Ne(t.display.lineMeasure,M.pre),L}(t,i));var M=Hs(L,i,E);return{line:i,view:L,rect:null,map:M.map,cache:M.cache,before:M.before,hasHeights:!1}}function an(t,i,E,L,M){i.before&&(E=-1);var te,U=E+(L||"");return i.cache.hasOwnProperty(U)?te=i.cache[U]:(i.rect||(i.rect=i.view.text.getBoundingClientRect()),i.hasHeights||(function fa(t,i,E){var L=t.options.lineWrapping,M=L&&Zn(t);if(!i.measure.heights||L&&i.measure.width!=M){var U=i.measure.heights=[];if(L){i.measure.width=M;for(var te=i.text.firstChild.getClientRects(),ce=0;ce<te.length-1;ce++){var ve=te[ce],we=te[ce+1];Math.abs(ve.bottom-we.bottom)>2&&U.push((ve.bottom+we.top)/2-E.top)}}U.push(E.bottom-E.top)}}(t,i.view,i.rect),i.hasHeights=!0),te=function Go(t,i,E,L){var we,M=Xs(i.map,E,L),U=M.node,te=M.start,ce=M.end,ve=M.collapse;if(3==U.nodeType){for(var De=0;De<4;De++){for(;te&&be(i.line.text.charAt(M.coverStart+te));)--te;for(;M.coverStart+ce<M.coverEnd&&be(i.line.text.charAt(M.coverStart+ce));)++ce;if((we=T&&_<9&&0==te&&ce==M.coverEnd-M.coverStart?U.parentNode.getBoundingClientRect():ha(ke(U,te,ce).getClientRects(),L)).left||we.right||0==te)break;ce=te,te-=1,ve="right"}T&&_<11&&(we=function zl(t,i){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function J(t){if(null!=Ar)return Ar;var i=Ne(t,Qe("span","x")),E=i.getBoundingClientRect(),L=ke(i,0,1).getBoundingClientRect();return Ar=Math.abs(E.left-L.left)>1}(t))return i;var E=screen.logicalXDPI/screen.deviceXDPI,L=screen.logicalYDPI/screen.deviceYDPI;return{left:i.left*E,right:i.right*E,top:i.top*L,bottom:i.bottom*L}}(t.display.measure,we))}else{var Ue;te>0&&(ve=L="right"),we=t.options.lineWrapping&&(Ue=U.getClientRects()).length>1?Ue["right"==L?Ue.length-1:0]:U.getBoundingClientRect()}if(T&&_<9&&!te&&(!we||!we.left&&!we.right)){var Ve=U.parentNode.getClientRects()[0];we=Ve?{left:Ve.left,right:Ve.left+nn(t.display),top:Ve.top,bottom:Ve.bottom}:Yi}for(var ze=we.top-i.rect.top,rt=we.bottom-i.rect.top,nt=(ze+rt)/2,lt=i.view.measure.heights,at=0;at<lt.length-1&&!(nt<lt[at]);at++);var pt=at?lt[at-1]:0,ft=lt[at],gt={left:("right"==ve?we.right:we.left)-i.rect.left,right:("left"==ve?we.left:we.right)-i.rect.left,top:pt,bottom:ft};return!we.left&&!we.right&&(gt.bogus=!0),t.options.singleCursorHeightPerLine||(gt.rtop=ze,gt.rbottom=rt),gt}(t,i,E,L),te.bogus||(i.cache[U]=te)),{left:te.left,right:te.right,top:M?te.rtop:te.top,bottom:M?te.rbottom:te.bottom}}var jn,Yi={left:0,right:0,top:0,bottom:0};function Xs(t,i,E){for(var L,M,U,te,ce,ve,we=0;we<t.length;we+=3)if(ce=t[we],ve=t[we+1],i<ce?(M=0,U=1,te="left"):i<ve?U=(M=i-ce)+1:(we==t.length-3||i==ve&&t[we+3]>i)&&(M=(U=ve-ce)-1,i>=ve&&(te="right")),null!=M){if(L=t[we+2],ce==ve&&E==(L.insertLeft?"left":"right")&&(te=E),"left"==E&&0==M)for(;we&&t[we-2]==t[we-3]&&t[we-1].insertLeft;)L=t[2+(we-=3)],te="left";if("right"==E&&M==ve-ce)for(;we<t.length-3&&t[we+3]==t[we+4]&&!t[we+5].insertLeft;)L=t[(we+=3)+2],te="right";break}return{node:L,start:M,end:U,collapse:te,coverStart:ce,coverEnd:ve}}function ha(t,i){var E=Yi;if("left"==i)for(var L=0;L<t.length&&(E=t[L]).left==E.right;L++);else for(var M=t.length-1;M>=0&&(E=t[M]).left==E.right;M--);return E}function Zi(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var i=0;i<t.rest.length;i++)t.measure.caches[i]={}}function Ws(t){t.display.externalMeasure=null,Le(t.display.lineMeasure);for(var i=0;i<t.display.view.length;i++)Zi(t.display.view[i])}function $i(t){Ws(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Kl(){return O&&ne?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function fn(){return O&&ne?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function tn(t){var E=Vr(t).widgets,L=0;if(E)for(var M=0;M<E.length;++M)E[M].above&&(L+=Ji(E[M]));return L}function Ho(t,i,E,L,M){if(!M){var U=tn(i);E.top+=U,E.bottom+=U}if("line"==L)return E;L||(L="local");var te=bn(i);if("local"==L?te+=Vi(t.display):te-=t.display.viewOffset,"page"==L||"window"==L){var ce=t.display.lineSpace.getBoundingClientRect();te+=ce.top+("window"==L?0:fn());var ve=ce.left+("window"==L?0:Kl());E.left+=ve,E.right+=ve}return E.top+=te,E.bottom+=te,E}function Jl(t,i,E){if("div"==E)return i;var L=i.left,M=i.top;if("page"==E)L-=Kl(),M-=fn();else if("local"==E||!E){var U=t.display.sizer.getBoundingClientRect();L+=U.left,M+=U.top}var te=t.display.lineSpace.getBoundingClientRect();return{left:L-te.left,top:M-te.top}}function eo(t,i,E,L,M){return L||(L=bt(t.doc,i.line)),Ho(t,L,ql(t,L,i.ch,M),E)}function rn(t,i,E,L,M,U){function te(rt,nt){var lt=an(t,M,rt,nt?"right":"left",U);return nt?lt.left=lt.right:lt.right=lt.left,Ho(t,L,lt,E)}L=L||bt(t.doc,i.line),M||(M=bi(t,L));var ce=ue(L,t.doc.direction),ve=i.ch,we=i.sticky;if(ve>=L.text.length?(ve=L.text.length,we="before"):ve<=0&&(ve=0,we="after"),!ce)return te("before"==we?ve-1:ve,"before"==we);function De(rt,nt,lt){return te(lt?rt-1:rt,1==ce[nt].level!=lt)}var Ue=z(ce,ve,we),Ve=H,ze=De(ve,Ue,"before"==we);return null!=Ve&&(ze.other=De(ve,Ve,"before"!=we)),ze}function qs(t,i){var E=0;i=It(t.doc,i),t.options.lineWrapping||(E=nn(t.display)*i.ch);var L=bt(t.doc,i.line),M=bn(L)+Vi(t.display);return{left:E,right:E,top:M,bottom:M+L.height}}function zs(t,i,E,L,M){var U=it(t,i,E);return U.xRel=M,L&&(U.outside=L),U}function Xo(t,i,E){var L=t.doc;if((E+=t.display.viewOffset)<0)return zs(L.first,0,null,-1,-1);var M=Yn(L,E),U=L.first+L.size-1;if(M>U)return zs(L.first+L.size-1,bt(L,U).text.length,null,1,1);i<0&&(i=0);for(var te=bt(L,M);;){var ce=pa(t,te,M,i,E),ve=Il(te,ce.ch+(ce.xRel>0||ce.outside>0?1:0));if(!ve)return ce;var we=ve.find(1);if(we.line==M)return we;te=bt(L,M=we.line)}}function Vl(t,i,E,L){L-=tn(i);var M=i.text.length,U=je(function(te){return an(t,E,te-1).bottom<=L},M,0);return{begin:U,end:M=je(function(te){return an(t,E,te).top>L},U,M)}}function Ks(t,i,E,L){return E||(E=bi(t,i)),Vl(t,i,E,Ho(t,i,an(t,E,L),"line").top)}function Js(t,i,E,L){return!(t.bottom<=E)&&(t.top>E||(L?t.left:t.right)>i)}function pa(t,i,E,L,M){M-=bn(i);var U=bi(t,i),te=tn(i),ce=0,ve=i.text.length,we=!0,De=ue(i,t.doc.direction);if(De){var Ue=(t.options.lineWrapping?da:Yl)(t,i,E,U,De,L,M);ce=(we=1!=Ue.level)?Ue.from:Ue.to-1,ve=we?Ue.to:Ue.from-1}var nt,lt,Ve=null,ze=null,rt=je(function(Ft){var kt=an(t,U,Ft);return kt.top+=te,kt.bottom+=te,!!Js(kt,L,M,!1)&&(kt.top<=M&&kt.left<=L&&(Ve=Ft,ze=kt),!0)},ce,ve),at=!1;if(ze){var pt=L-ze.left<ze.right-L,ft=pt==we;rt=Ve+(ft?0:1),lt=ft?"after":"before",nt=pt?ze.left:ze.right}else{!we&&(rt==ve||rt==ce)&&rt++,lt=0==rt?"after":rt==i.text.length?"before":an(t,U,rt-(we?1:0)).bottom+te<=M==we?"after":"before";var gt=rn(t,it(E,rt,lt),"line",i,U);nt=gt.left,at=M<gt.top?-1:M>=gt.bottom?1:0}return zs(E,rt=Te(i.text,rt,1),lt,at,L-nt)}function Yl(t,i,E,L,M,U,te){var ce=je(function(Ue){var Ve=M[Ue],ze=1!=Ve.level;return Js(rn(t,it(E,ze?Ve.to:Ve.from,ze?"before":"after"),"line",i,L),U,te,!0)},0,M.length-1),ve=M[ce];if(ce>0){var we=1!=ve.level,De=rn(t,it(E,we?ve.from:ve.to,we?"after":"before"),"line",i,L);Js(De,U,te,!0)&&De.top>te&&(ve=M[ce-1])}return ve}function da(t,i,E,L,M,U,te){var ce=Vl(t,i,L,te),ve=ce.begin,we=ce.end;/\s/.test(i.text.charAt(we-1))&&we--;for(var De=null,Ue=null,Ve=0;Ve<M.length;Ve++){var ze=M[Ve];if(!(ze.from>=we||ze.to<=ve)){var nt=an(t,L,1!=ze.level?Math.min(we,ze.to)-1:Math.max(ve,ze.from)).right,lt=nt<U?U-nt+1e9:nt-U;(!De||Ue>lt)&&(De=ze,Ue=lt)}}return De||(De=M[M.length-1]),De.from<ve&&(De={from:ve,to:De.to,level:De.level}),De.to>we&&(De={from:De.from,to:we,level:De.level}),De}function Si(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==jn){jn=Qe("pre",null,"CodeMirror-line-like");for(var i=0;i<49;++i)jn.appendChild(document.createTextNode("x")),jn.appendChild(Qe("br"));jn.appendChild(document.createTextNode("x"))}Ne(t.measure,jn);var E=jn.offsetHeight/50;return E>3&&(t.cachedTextHeight=E),Le(t.measure),E||1}function nn(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var i=Qe("span","xxxxxxxxxx"),E=Qe("pre",[i],"CodeMirror-line-like");Ne(t.measure,E);var L=i.getBoundingClientRect(),M=(L.right-L.left)/10;return M>2&&(t.cachedCharWidth=M),M||10}function to(t){for(var i=t.display,E={},L={},M=i.gutters.clientLeft,U=i.gutters.firstChild,te=0;U;U=U.nextSibling,++te){var ce=t.display.gutterSpecs[te].className;E[ce]=U.offsetLeft+U.clientLeft+M,L[ce]=U.clientWidth}return{fixedPos:On(i),gutterTotalWidth:i.gutters.offsetWidth,gutterLeft:E,gutterWidth:L,wrapperWidth:i.wrapper.clientWidth}}function On(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function Wo(t){var i=Si(t.display),E=t.options.lineWrapping,L=E&&Math.max(5,t.display.scroller.clientWidth/nn(t.display)-3);return function(M){if(Cn(t.doc,M))return 0;var U=0;if(M.widgets)for(var te=0;te<M.widgets.length;te++)M.widgets[te].height&&(U+=M.widgets[te].height);return E?U+(Math.ceil(M.text.length/L)||1)*i:U+i}}function Vs(t){var i=t.doc,E=Wo(t);i.iter(function(L){var M=E(L);M!=L.height&&ln(L,M)})}function Dn(t,i,E,L){var M=t.display;if(!E&&"true"==_t(i).getAttribute("cm-not-content"))return null;var U,te,ce=M.lineSpace.getBoundingClientRect();try{U=i.clientX-ce.left,te=i.clientY-ce.top}catch(Ue){return null}var we,ve=Xo(t,U,te);if(L&&ve.xRel>0&&(we=bt(t.doc,ve.line).text).length==ve.ch){var De=vt(we,we.length,t.options.tabSize)-we.length;ve=it(ve.line,Math.max(0,Math.round((U-Gs(t.display).left)/nn(t.display))-De))}return ve}function $n(t,i){if(i>=t.display.viewTo||(i-=t.display.viewFrom)<0)return null;for(var E=t.display.view,L=0;L<E.length;L++)if((i-=E[L].size)<0)return L}function Tr(t,i,E,L){null==i&&(i=t.doc.first),null==E&&(E=t.doc.first+t.doc.size),L||(L=0);var M=t.display;if(L&&E<M.viewTo&&(null==M.updateLineNumbers||M.updateLineNumbers>i)&&(M.updateLineNumbers=i),t.curOp.viewChanged=!0,i>=M.viewTo)Nt&&Bo(t.doc,i)<M.viewTo&&Bn(t);else if(E<=M.viewFrom)Nt&&Ml(t.doc,E+L)>M.viewFrom?Bn(t):(M.viewFrom+=L,M.viewTo+=L);else if(i<=M.viewFrom&&E>=M.viewTo)Bn(t);else if(i<=M.viewFrom){var U=ro(t,E,E+L,1);U?(M.view=M.view.slice(U.index),M.viewFrom=U.lineN,M.viewTo+=L):Bn(t)}else if(E>=M.viewTo){var te=ro(t,i,i,-1);te?(M.view=M.view.slice(0,te.index),M.viewTo=te.lineN):Bn(t)}else{var ce=ro(t,i,i,-1),ve=ro(t,E,E+L,1);ce&&ve?(M.view=M.view.slice(0,ce.index).concat(zi(t,ce.lineN,ve.lineN)).concat(M.view.slice(ve.index)),M.viewTo+=L):Bn(t)}var we=M.externalMeasured;we&&(E<we.lineN?we.lineN+=L:i<we.lineN+we.size&&(M.externalMeasured=null))}function Rn(t,i,E){t.curOp.viewChanged=!0;var L=t.display,M=t.display.externalMeasured;if(M&&i>=M.lineN&&i<M.lineN+M.size&&(L.externalMeasured=null),!(i<L.viewFrom||i>=L.viewTo)){var U=L.view[$n(t,i)];if(null!=U.node){var te=U.changes||(U.changes=[]);-1==Mt(te,E)&&te.push(E)}}}function Bn(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function ro(t,i,E,L){var U,M=$n(t,i),te=t.display.view;if(!Nt||E==t.doc.first+t.doc.size)return{index:M,lineN:E};for(var ce=t.display.viewFrom,ve=0;ve<M;ve++)ce+=te[ve].size;if(ce!=i){if(L>0){if(M==te.length-1)return null;U=ce+te[M].size-i,M++}else U=ce-i;i+=U,E+=U}for(;Bo(t.doc,E)!=E;){if(M==(L<0?0:te.length-1))return null;E+=L*te[M-(L<0?1:0)].size,M+=L}return{index:M,lineN:E}}function Ys(t){for(var i=t.display.view,E=0,L=0;L<i.length;L++){var M=i[L];!M.hidden&&(!M.node||M.changes)&&++E}return E}function no(t){t.display.input.showSelection(t.display.input.prepareSelection())}function Zl(t,i){void 0===i&&(i=!0);var E=t.doc,L={},M=L.cursors=document.createDocumentFragment(),U=L.selection=document.createDocumentFragment(),te=t.options.$customCursor;te&&(i=!0);for(var ce=0;ce<E.sel.ranges.length;ce++)if(i||ce!=E.sel.primIndex){var ve=E.sel.ranges[ce];if(!(ve.from().line>=t.display.viewTo||ve.to().line<t.display.viewFrom)){var we=ve.empty();if(te){var De=te(t,ve);De&&ki(t,De,M)}else(we||t.options.showCursorWhenSelecting)&&ki(t,ve.head,M);we||qo(t,ve,U)}}return L}function ki(t,i,E){var L=rn(t,i,"div",null,null,!t.options.singleCursorHeightPerLine),M=E.appendChild(Qe("div","\xa0","CodeMirror-cursor"));if(M.style.left=L.left+"px",M.style.top=L.top+"px",M.style.height=Math.max(0,L.bottom-L.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var U=eo(t,i,"div",null,null),te=U.right-U.left;M.style.width=(te>0?te:t.defaultCharWidth())+"px"}if(L.other){var ce=E.appendChild(Qe("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));ce.style.display="",ce.style.left=L.other.left+"px",ce.style.top=L.other.top+"px",ce.style.height=.85*(L.other.bottom-L.other.top)+"px"}}function io(t,i){return t.top-i.top||t.left-i.left}function qo(t,i,E){var L=t.display,M=t.doc,U=document.createDocumentFragment(),te=Gs(t.display),ce=te.left,ve=Math.max(L.sizerWidth,Zn(t)-L.sizer.offsetLeft)-te.right,we="ltr"==M.direction;function De(ft,gt,Ft,kt){gt<0&&(gt=0),gt=Math.round(gt),kt=Math.round(kt),U.appendChild(Qe("div",null,"CodeMirror-selected","position: absolute; left: "+ft+"px;\n                             top: "+gt+"px; width: "+(null==Ft?ve-ft:Ft)+"px;\n                             height: "+(kt-gt)+"px"))}function Ue(ft,gt,Ft){var zt,fr,kt=bt(M,ft),jt=kt.text.length;function Yt(rr,Br){return eo(t,it(ft,rr),"div",kt,Br)}function Dr(rr,Br,mr){var sr=Ks(t,kt,null,rr),lr="ltr"==Br==("after"==mr)?"left":"right";return Yt("after"==mr?sr.begin:sr.end-(/\s/.test(kt.text.charAt(sr.end-1))?2:1),lr)[lr]}var Rr=ue(kt,M.direction);return function Ge(t,i,E,L){if(!t)return L(i,E,"ltr",0);for(var M=!1,U=0;U<t.length;++U){var te=t[U];(te.from<E&&te.to>i||i==E&&te.to==i)&&(L(Math.max(te.from,i),Math.min(te.to,E),1==te.level?"rtl":"ltr",U),M=!0)}M||L(i,E,"ltr")}(Rr,gt||0,null==Ft?jt:Ft,function(rr,Br,mr,sr){var lr="ltr"==mr,Zt=Yt(rr,lr?"left":"right"),Pr=Yt(Br-1,lr?"right":"left"),pi=null==gt&&0==rr,Wn=null==Ft&&Br==jt,kr=0==sr,zr=!Rr||sr==Rr.length-1;if(Pr.top-Zt.top<=3){var Ui=(we?Wn:pi)&&zr,gn=(we?pi:Wn)&&kr?ce:(lr?Zt:Pr).left,di=Ui?ve:(lr?Pr:Zt).right;De(gn,Zt.top,di-gn,Zt.bottom)}else{var qn,Nr,gi,Sl;lr?(qn=we&&pi&&kr?ce:Zt.left,Nr=we?ve:Dr(rr,mr,"before"),gi=we?ce:Dr(Br,mr,"after"),Sl=we&&Wn&&zr?ve:Pr.right):(qn=we?Dr(rr,mr,"before"):ce,Nr=!we&&pi&&kr?ve:Zt.right,gi=!we&&Wn&&zr?ce:Pr.left,Sl=we?Dr(Br,mr,"after"):ve),De(qn,Zt.top,Nr-qn,Zt.bottom),Zt.bottom<Pr.top&&De(ce,Zt.bottom,null,Pr.top),De(gi,Pr.top,Sl-gi,Pr.bottom)}(!zt||io(Zt,zt)<0)&&(zt=Zt),io(Pr,zt)<0&&(zt=Pr),(!fr||io(Zt,fr)<0)&&(fr=Zt),io(Pr,fr)<0&&(fr=Pr)}),{start:zt,end:fr}}var Ve=i.from(),ze=i.to();if(Ve.line==ze.line)Ue(Ve.line,Ve.ch,ze.ch);else{var rt=bt(M,Ve.line),nt=bt(M,ze.line),lt=Vr(rt)==Vr(nt),at=Ue(Ve.line,Ve.ch,lt?rt.text.length+1:null).end,pt=Ue(ze.line,lt?0:null,ze.ch).start;lt&&(at.top<pt.top-2?(De(at.right,at.top,null,at.bottom),De(ce,pt.top,pt.left,pt.bottom)):De(at.right,at.top,pt.left-at.right,at.bottom)),at.bottom<pt.top&&De(ce,at.bottom,null,pt.top)}E.appendChild(U)}function zo(t){if(t.state.focused){var i=t.display;clearInterval(i.blinker);var E=!0;i.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?i.blinker=setInterval(function(){t.hasFocus()||ei(t),i.cursorDiv.style.visibility=(E=!E)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(i.cursorDiv.style.visibility="hidden")}}function oo(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||_i(t))}function Ko(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&ei(t))},100)}function _i(t,i){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(Fe(t,"focus",t,i),t.state.focused=!0,_e(t.display.wrapper,"CodeMirror-focused"),!t.curOp&&t.display.selForContextMenu!=t.doc.sel&&(t.display.input.reset(),I&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),zo(t))}function ei(t,i){t.state.delayingBlurEvent||(t.state.focused&&(Fe(t,"blur",t,i),t.state.focused=!1,Se(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function Jo(t){for(var i=t.display,E=i.lineDiv.offsetTop,L=Math.max(0,i.scroller.getBoundingClientRect().top),M=i.lineDiv.getBoundingClientRect().top,U=0,te=0;te<i.view.length;te++){var ce=i.view[te],ve=t.options.lineWrapping,we=void 0,De=0;if(!ce.hidden){if(M+=ce.line.height,T&&_<8){var Ue=ce.node.offsetTop+ce.node.offsetHeight;we=Ue-E,E=Ue}else{var Ve=ce.node.getBoundingClientRect();we=Ve.bottom-Ve.top,!ve&&ce.text.firstChild&&(De=ce.text.firstChild.getBoundingClientRect().right-Ve.left-1)}var ze=ce.line.height-we;if((ze>.005||ze<-.005)&&(M<L&&(U-=ze),ln(ce.line,we),ti(ce.line),ce.rest))for(var rt=0;rt<ce.rest.length;rt++)ti(ce.rest[rt]);if(De>t.display.sizerWidth){var nt=Math.ceil(De/nn(t.display));nt>t.display.maxLineLength&&(t.display.maxLineLength=nt,t.display.maxLine=ce.line,t.display.maxLineChanged=!0)}}}Math.abs(U)>2&&(i.scroller.scrollTop+=U)}function ti(t){if(t.widgets)for(var i=0;i<t.widgets.length;++i){var E=t.widgets[i],L=E.node.parentNode;L&&(E.height=L.offsetHeight)}}function Fi(t,i,E){var L=E&&null!=E.top?Math.max(0,E.top):t.scroller.scrollTop;L=Math.floor(L-Vi(t));var M=E&&null!=E.bottom?E.bottom:L+t.wrapper.clientHeight,U=Yn(i,L),te=Yn(i,M);if(E&&E.ensure){var ce=E.ensure.from.line,ve=E.ensure.to.line;ce<U?(U=ce,te=Yn(i,bn(bt(i,ce))+t.wrapper.clientHeight)):Math.min(ve,i.lastLine())>=te&&(U=Yn(i,bn(bt(i,ve))-t.wrapper.clientHeight),te=ve)}return{from:U,to:Math.max(te,U+1)}}function $s(t,i){var E=t.display,L=Si(t.display);i.top<0&&(i.top=0);var M=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:E.scroller.scrollTop,U=Qo(t),te={};i.bottom-i.top>U&&(i.bottom=i.top+U);var ce=t.doc.height+Us(E),ve=i.top<L,we=i.bottom>ce-L;if(i.top<M)te.scrollTop=ve?0:i.top;else if(i.bottom>M+U){var De=Math.min(i.top,(we?ce:i.bottom)-U);De!=M&&(te.scrollTop=De)}var Ue=t.options.fixedGutter?0:E.gutters.offsetWidth,Ve=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:E.scroller.scrollLeft-Ue,ze=Zn(t)-E.gutters.offsetWidth,rt=i.right-i.left>ze;return rt&&(i.right=i.left+ze),i.left<10?te.scrollLeft=0:i.left<Ve?te.scrollLeft=Math.max(0,i.left+Ue-(rt?0:10)):i.right>ze+Ve-3&&(te.scrollLeft=i.right+(rt?0:10)-ze),te}function Vo(t,i){null!=i&&(Yo(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+i)}function Ai(t){Yo(t);var i=t.getCursor();t.curOp.scrollToPos={from:i,to:i,margin:t.options.cursorScrollMargin}}function Ei(t,i,E){(null!=i||null!=E)&&Yo(t),null!=i&&(t.curOp.scrollLeft=i),null!=E&&(t.curOp.scrollTop=E)}function Yo(t){var i=t.curOp.scrollToPos;i&&(t.curOp.scrollToPos=null,$l(t,qs(t,i.from),qs(t,i.to),i.margin))}function $l(t,i,E,L){var M=$s(t,{left:Math.min(i.left,E.left),top:Math.min(i.top,E.top)-L,right:Math.max(i.right,E.right),bottom:Math.max(i.bottom,E.bottom)+L});Ei(t,M.scrollLeft,M.scrollTop)}function so(t,i){Math.abs(t.doc.scrollTop-i)<2||(Be||ts(t,{top:i}),el(t,i,!0),Be&&ts(t),ur(t,100))}function el(t,i,E){i=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,i)),(t.display.scroller.scrollTop!=i||E)&&(t.doc.scrollTop=i,t.display.scrollbars.setScrollTop(i),t.display.scroller.scrollTop!=i&&(t.display.scroller.scrollTop=i))}function ri(t,i,E,L){i=Math.max(0,Math.min(i,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(!(E?i==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-i)<2)||L)&&(t.doc.scrollLeft=i,iu(t),t.display.scroller.scrollLeft!=i&&(t.display.scroller.scrollLeft=i),t.display.scrollbars.setScrollLeft(i))}function Ti(t){var i=t.display,E=i.gutters.offsetWidth,L=Math.round(t.doc.height+Us(t.display));return{clientHeight:i.scroller.clientHeight,viewHeight:i.wrapper.clientHeight,scrollWidth:i.scroller.scrollWidth,clientWidth:i.scroller.clientWidth,viewWidth:i.wrapper.clientWidth,barLeft:t.options.fixedGutter?E:0,docHeight:L,scrollHeight:L+un(t)+i.barHeight,nativeBarWidth:i.nativeBarWidth,gutterWidth:E}}var ni=function(t,i,E){this.cm=E;var L=this.vert=Qe("div",[Qe("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),M=this.horiz=Qe("div",[Qe("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");L.tabIndex=M.tabIndex=-1,t(L),t(M),Z(L,"scroll",function(){L.clientHeight&&i(L.scrollTop,"vertical")}),Z(M,"scroll",function(){M.clientWidth&&i(M.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,T&&_<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ni.prototype.update=function(t){var i=t.scrollWidth>t.clientWidth+1,E=t.scrollHeight>t.clientHeight+1,L=t.nativeBarWidth;if(E){this.vert.style.display="block",this.vert.style.bottom=i?L+"px":"0";var M=t.viewHeight-(i?L:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+M)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(i){this.horiz.style.display="block",this.horiz.style.right=E?L+"px":"0",this.horiz.style.left=t.barLeft+"px";var U=t.viewWidth-t.barLeft-(E?L:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+U)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==L&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:E?L:0,bottom:i?L:0}},ni.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ni.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ni.prototype.zeroWidthHack=function(){var t=oe&&!Y?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Kt,this.disableVert=new Kt},ni.prototype.enableZeroWidthBar=function(t,i,E){t.style.pointerEvents="auto",i.set(1e3,function L(){var M=t.getBoundingClientRect();("vert"==E?document.elementFromPoint(M.right-1,(M.top+M.bottom)/2):document.elementFromPoint((M.right+M.left)/2,M.bottom-1))!=t?t.style.pointerEvents="none":i.set(1e3,L)})},ni.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var lo=function(){};function on(t,i){i||(i=Ti(t));var E=t.display.barWidth,L=t.display.barHeight;Zo(t,i);for(var M=0;M<4&&E!=t.display.barWidth||L!=t.display.barHeight;M++)E!=t.display.barWidth&&t.options.lineWrapping&&Jo(t),Zo(t,Ti(t)),E=t.display.barWidth,L=t.display.barHeight}function Zo(t,i){var E=t.display,L=E.scrollbars.update(i);E.sizer.style.paddingRight=(E.barWidth=L.right)+"px",E.sizer.style.paddingBottom=(E.barHeight=L.bottom)+"px",E.heightForcer.style.borderBottom=L.bottom+"px solid transparent",L.right&&L.bottom?(E.scrollbarFiller.style.display="block",E.scrollbarFiller.style.height=L.bottom+"px",E.scrollbarFiller.style.width=L.right+"px"):E.scrollbarFiller.style.display="",L.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(E.gutterFiller.style.display="block",E.gutterFiller.style.height=L.bottom+"px",E.gutterFiller.style.width=i.gutterWidth+"px"):E.gutterFiller.style.display=""}lo.prototype.update=function(){return{bottom:0,right:0}},lo.prototype.setScrollLeft=function(){},lo.prototype.setScrollTop=function(){},lo.prototype.clear=function(){};var ii={native:ni,null:lo};function $o(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&Se(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new ii[t.options.scrollbarStyle](function(i){t.display.wrapper.insertBefore(i,t.display.scrollbarFiller),Z(i,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),i.setAttribute("cm-not-content","true")},function(i,E){"horizontal"==E?ri(t,i):so(t,i)},t),t.display.scrollbars.addClass&&_e(t.display.wrapper,t.display.scrollbars.addClass)}var ma=0;function Pn(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ma,markArrays:null},function oa(t){wi?wi.ops.push(t):t.ownsGroup=wi={ops:[t],delayedCallbacks:[]}}(t.curOp)}function oi(t){var i=t.curOp;i&&function sa(t,i){var E=t.ownsGroup;if(E)try{!function Pl(t){var i=t.delayedCallbacks,E=0;do{for(;E<i.length;E++)i[E].call(null);for(var L=0;L<t.ops.length;L++){var M=t.ops[L];if(M.cursorActivityHandlers)for(;M.cursorActivityCalled<M.cursorActivityHandlers.length;)M.cursorActivityHandlers[M.cursorActivityCalled++].call(null,M.cm)}}while(E<i.length)}(E)}finally{wi=null,i(E)}}(i,function(E){for(var L=0;L<E.ops.length;L++)E.ops[L].cm.curOp=null;!function eu(t){for(var i=t.ops,E=0;E<i.length;E++)xa(i[E]);for(var L=0;L<i.length;L++)tu(i[L]);for(var M=0;M<i.length;M++)wa(i[M]);for(var U=0;U<i.length;U++)ru(i[U]);for(var te=0;te<i.length;te++)Ca(i[te])}(E)})}function xa(t){var i=t.cm,E=i.display;(function Sa(t){var i=t.display;!i.scrollbarsClipped&&i.scroller.offsetWidth&&(i.nativeBarWidth=i.scroller.offsetWidth-i.scroller.clientWidth,i.heightForcer.style.height=un(t)+"px",i.sizer.style.marginBottom=-i.nativeBarWidth+"px",i.sizer.style.borderRightWidth=un(t)+"px",i.scrollbarsClipped=!0)})(i),t.updateMaxLine&&Nn(i),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<E.viewFrom||t.scrollToPos.to.line>=E.viewTo)||E.maxLineChanged&&i.options.lineWrapping,t.update=t.mustUpdate&&new es(i,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function tu(t){t.updatedDisplay=t.mustUpdate&&tl(t.cm,t.update)}function wa(t){var i=t.cm,E=i.display;t.updatedDisplay&&Jo(i),t.barMeasure=Ti(i),E.maxLineChanged&&!i.options.lineWrapping&&(t.adjustWidthTo=ql(i,E.maxLine,E.maxLine.text.length).left+3,i.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(E.scroller.clientWidth,E.sizer.offsetLeft+t.adjustWidthTo+un(i)+i.display.barWidth),t.maxScrollLeft=Math.max(0,E.sizer.offsetLeft+t.adjustWidthTo-Zn(i))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=E.input.prepareSelection())}function ru(t){var i=t.cm;null!=t.adjustWidthTo&&(i.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<i.doc.scrollLeft&&ri(i,Math.min(i.display.scroller.scrollLeft,t.maxScrollLeft),!0),i.display.maxLineChanged=!1);var E=t.focus&&t.focus==me();t.preparedSelection&&i.display.input.showSelection(t.preparedSelection,E),(t.updatedDisplay||t.startHeight!=i.doc.height)&&on(i,t.barMeasure),t.updatedDisplay&&rl(i,t.barMeasure),t.selectionChanged&&zo(i),i.state.focused&&t.updateInput&&i.display.input.reset(t.typing),E&&oo(t.cm)}function Ca(t){var i=t.cm,E=i.display,L=i.doc;if(t.updatedDisplay&&nu(i,t.update),null!=E.wheelStartX&&(null!=t.scrollTop||null!=t.scrollLeft||t.scrollToPos)&&(E.wheelStartX=E.wheelStartY=null),null!=t.scrollTop&&el(i,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&ri(i,t.scrollLeft,!0,!0),t.scrollToPos){var M=function Zs(t,i,E,L){var M;null==L&&(L=0),!t.options.lineWrapping&&i==E&&(E="before"==i.sticky?it(i.line,i.ch+1,"before"):i,i=i.ch?it(i.line,"before"==i.sticky?i.ch-1:i.ch,"after"):i);for(var U=0;U<5;U++){var te=!1,ce=rn(t,i),ve=E&&E!=i?rn(t,E):ce,we=$s(t,M={left:Math.min(ce.left,ve.left),top:Math.min(ce.top,ve.top)-L,right:Math.max(ce.left,ve.left),bottom:Math.max(ce.bottom,ve.bottom)+L}),De=t.doc.scrollTop,Ue=t.doc.scrollLeft;if(null!=we.scrollTop&&(so(t,we.scrollTop),Math.abs(t.doc.scrollTop-De)>1&&(te=!0)),null!=we.scrollLeft&&(ri(t,we.scrollLeft),Math.abs(t.doc.scrollLeft-Ue)>1&&(te=!0)),!te)break}return M}(i,It(L,t.scrollToPos.from),It(L,t.scrollToPos.to),t.scrollToPos.margin);!function Li(t,i){if(!Ae(t,"scrollCursorIntoView")){var E=t.display,L=E.sizer.getBoundingClientRect(),M=null;if(i.top+L.top<0?M=!0:i.bottom+L.top>(window.innerHeight||document.documentElement.clientHeight)&&(M=!1),null!=M&&!X){var U=Qe("div","\u200b",null,"position: absolute;\n                         top: "+(i.top-E.viewOffset-Vi(t.display))+"px;\n                         height: "+(i.bottom-i.top+un(t)+E.barHeight)+"px;\n                         left: "+i.left+"px; width: "+Math.max(2,i.right-i.left)+"px;");t.display.lineSpace.appendChild(U),U.scrollIntoView(M),t.display.lineSpace.removeChild(U)}}}(i,M)}var U=t.maybeHiddenMarkers,te=t.maybeUnhiddenMarkers;if(U)for(var ce=0;ce<U.length;++ce)U[ce].lines.length||Fe(U[ce],"hide");if(te)for(var ve=0;ve<te.length;++ve)te[ve].lines.length&&Fe(te[ve],"unhide");E.wrapper.offsetHeight&&(L.scrollTop=i.display.scroller.scrollTop),t.changeObjs&&Fe(i,"changes",i,t.changeObjs),t.update&&t.update.finish()}function Ur(t,i){if(t.curOp)return i();Pn(t);try{return i()}finally{oi(t)}}function vr(t,i){return function(){if(t.curOp)return i.apply(t,arguments);Pn(t);try{return i.apply(t,arguments)}finally{oi(t)}}}function Ir(t){return function(){if(this.curOp)return t.apply(this,arguments);Pn(this);try{return t.apply(this,arguments)}finally{oi(this)}}}function Ut(t){return function(){var i=this.cm;if(!i||i.curOp)return t.apply(this,arguments);Pn(i);try{return t.apply(this,arguments)}finally{oi(i)}}}function ur(t,i){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(i,st(ba,t))}function ba(t){var i=t.doc;if(!(i.highlightFrontier>=t.display.viewTo)){var E=+new Date+t.options.workTime,L=yi(t,i.highlightFrontier),M=[];i.iter(L.line,Math.min(i.first+i.size,t.display.viewTo+500),function(U){if(L.line>=t.display.viewFrom){var te=U.styles,ce=U.text.length>t.options.maxHighlightLength?qr(i.mode,L.state):null,ve=Cr(t,U,L,!0);ce&&(L.state=ce),U.styles=ve.styles;var we=U.styleClasses,De=ve.classes;De?U.styleClasses=De:we&&(U.styleClasses=null);for(var Ue=!te||te.length!=U.styles.length||we!=De&&(!we||!De||we.bgClass!=De.bgClass||we.textClass!=De.textClass),Ve=0;!Ue&&Ve<te.length;++Ve)Ue=te[Ve]!=U.styles[Ve];Ue&&M.push(L.line),U.stateAfter=L.save(),L.nextLine()}else U.text.length<=t.options.maxHighlightLength&&Is(t,U.text,L),U.stateAfter=L.line%5==0?L.save():null,L.nextLine();if(+new Date>E)return ur(t,t.options.workDelay),!0}),i.highlightFrontier=L.line,i.modeFrontier=Math.max(i.modeFrontier,L.line),M.length&&Ur(t,function(){for(var U=0;U<M.length;U++)Rn(t,M[U],"text")})}}var es=function(t,i,E){var L=t.display;this.viewport=i,this.visible=Fi(L,t.doc,i),this.editorIsHidden=!L.wrapper.offsetWidth,this.wrapperHeight=L.wrapper.clientHeight,this.wrapperWidth=L.wrapper.clientWidth,this.oldDisplayWidth=Zn(t),this.force=E,this.dims=to(t),this.events=[]};function tl(t,i){var E=t.display,L=t.doc;if(i.editorIsHidden)return Bn(t),!1;if(!i.force&&i.visible.from>=E.viewFrom&&i.visible.to<=E.viewTo&&(null==E.updateLineNumbers||E.updateLineNumbers>=E.viewTo)&&E.renderedView==E.view&&0==Ys(t))return!1;ou(t)&&(Bn(t),i.dims=to(t));var M=L.first+L.size,U=Math.max(i.visible.from-t.options.viewportMargin,L.first),te=Math.min(M,i.visible.to+t.options.viewportMargin);E.viewFrom<U&&U-E.viewFrom<20&&(U=Math.max(L.first,E.viewFrom)),E.viewTo>te&&E.viewTo-te<20&&(te=Math.min(M,E.viewTo)),Nt&&(U=Bo(t.doc,U),te=Ml(t.doc,te));var ce=U!=E.viewFrom||te!=E.viewTo||E.lastWrapHeight!=i.wrapperHeight||E.lastWrapWidth!=i.wrapperWidth;(function ga(t,i,E){var L=t.display;0==L.view.length||i>=L.viewTo||E<=L.viewFrom?(L.view=zi(t,i,E),L.viewFrom=i):(L.viewFrom>i?L.view=zi(t,i,L.viewFrom).concat(L.view):L.viewFrom<i&&(L.view=L.view.slice($n(t,i))),L.viewFrom=i,L.viewTo<E?L.view=L.view.concat(zi(t,L.viewTo,E)):L.viewTo>E&&(L.view=L.view.slice(0,$n(t,E)))),L.viewTo=E})(t,U,te),E.viewOffset=bn(bt(t.doc,E.viewFrom)),t.display.mover.style.top=E.viewOffset+"px";var ve=Ys(t);if(!ce&&0==ve&&!i.force&&E.renderedView==E.view&&(null==E.updateLineNumbers||E.updateLineNumbers>=E.viewTo))return!1;var we=function ka(t){if(t.hasFocus())return null;var i=me();if(!i||!se(t.display.lineDiv,i))return null;var E={activeElt:i};if(window.getSelection){var L=window.getSelection();L.anchorNode&&L.extend&&se(t.display.lineDiv,L.anchorNode)&&(E.anchorNode=L.anchorNode,E.anchorOffset=L.anchorOffset,E.focusNode=L.focusNode,E.focusOffset=L.focusOffset)}return E}(t);return ve>4&&(E.lineDiv.style.display="none"),function Fa(t,i,E){var L=t.display,M=t.options.lineNumbers,U=L.lineDiv,te=U.firstChild;function ce(rt){var nt=rt.nextSibling;return I&&oe&&t.display.currentWheelTarget==rt?rt.style.display="none":rt.parentNode.removeChild(rt),nt}for(var ve=L.view,we=L.viewFrom,De=0;De<ve.length;De++){var Ue=ve[De];if(!Ue.hidden)if(Ue.node&&Ue.node.parentNode==U){for(;te!=Ue.node;)te=ce(te);var ze=M&&null!=i&&i<=we&&Ue.lineNumber;Ue.changes&&(Mt(Ue.changes,"gutter")>-1&&(ze=!1),Ul(t,Ue,we,E)),ze&&(Le(Ue.lineNumber),Ue.lineNumber.appendChild(document.createTextNode(To(t.options,we)))),te=Ue.node.nextSibling}else{var Ve=Xl(t,Ue,we,E);U.insertBefore(Ve,te)}we+=Ue.size}for(;te;)te=ce(te)}(t,E.updateLineNumbers,i.dims),ve>4&&(E.lineDiv.style.display=""),E.renderedView=E.view,function _a(t){if(t&&t.activeElt&&t.activeElt!=me()&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&se(document.body,t.anchorNode)&&se(document.body,t.focusNode))){var i=window.getSelection(),E=document.createRange();E.setEnd(t.anchorNode,t.anchorOffset),E.collapse(!1),i.removeAllRanges(),i.addRange(E),i.extend(t.focusNode,t.focusOffset)}}(we),Le(E.cursorDiv),Le(E.selectionDiv),E.gutters.style.height=E.sizer.style.minHeight=0,ce&&(E.lastWrapHeight=i.wrapperHeight,E.lastWrapWidth=i.wrapperWidth,ur(t,400)),E.updateLineNumbers=null,!0}function nu(t,i){for(var E=i.viewport,L=!0;;L=!1){if(L&&t.options.lineWrapping&&i.oldDisplayWidth!=Zn(t))L&&(i.visible=Fi(t.display,t.doc,E));else if(E&&null!=E.top&&(E={top:Math.min(t.doc.height+Us(t.display)-Qo(t),E.top)}),i.visible=Fi(t.display,t.doc,E),i.visible.from>=t.display.viewFrom&&i.visible.to<=t.display.viewTo)break;if(!tl(t,i))break;Jo(t);var M=Ti(t);no(t),on(t,M),rl(t,M),i.force=!1}i.signal(t,"update",t),(t.display.viewFrom!=t.display.reportedViewFrom||t.display.viewTo!=t.display.reportedViewTo)&&(i.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function ts(t,i){var E=new es(t,i);if(tl(t,E)){Jo(t),nu(t,E);var L=Ti(t);no(t),on(t,L),rl(t,L),E.finish()}}function rs(t){var i=t.gutters.offsetWidth;t.sizer.style.marginLeft=i+"px",gr(t,"gutterChanged",t)}function rl(t,i){t.display.sizer.style.minHeight=i.docHeight+"px",t.display.heightForcer.style.top=i.docHeight+"px",t.display.gutters.style.height=i.docHeight+t.display.barHeight+un(t)+"px"}function iu(t){var i=t.display,E=i.view;if(i.alignWidgets||i.gutters.firstChild&&t.options.fixedGutter){for(var L=On(i)-i.scroller.scrollLeft+t.doc.scrollLeft,M=i.gutters.offsetWidth,U=L+"px",te=0;te<E.length;te++)if(!E[te].hidden){t.options.fixedGutter&&(E[te].gutter&&(E[te].gutter.style.left=U),E[te].gutterBackground&&(E[te].gutterBackground.style.left=U));var ce=E[te].alignable;if(ce)for(var ve=0;ve<ce.length;ve++)ce[ve].style.left=U}t.options.fixedGutter&&(i.gutters.style.left=L+M+"px")}}function ou(t){if(!t.options.lineNumbers)return!1;var i=t.doc,E=To(t.options,i.first+i.size-1),L=t.display;if(E.length!=L.lineNumChars){var M=L.measure.appendChild(Qe("div",[Qe("div",E)],"CodeMirror-linenumber CodeMirror-gutter-elt")),U=M.firstChild.offsetWidth,te=M.offsetWidth-U;return L.lineGutter.style.width="",L.lineNumInnerWidth=Math.max(U,L.lineGutter.offsetWidth-te)+1,L.lineNumWidth=L.lineNumInnerWidth+te,L.lineNumChars=L.lineNumInnerWidth?E.length:-1,L.lineGutter.style.width=L.lineNumWidth+"px",rs(t.display),!0}return!1}function ns(t,i){for(var E=[],L=!1,M=0;M<t.length;M++){var U=t[M],te=null;if("string"!=typeof U&&(te=U.style,U=U.className),"CodeMirror-linenumbers"==U){if(!i)continue;L=!0}E.push({className:U,style:te})}return i&&!L&&E.push({className:"CodeMirror-linenumbers",style:null}),E}function su(t){var i=t.gutters,E=t.gutterSpecs;Le(i),t.lineGutter=null;for(var L=0;L<E.length;++L){var M=E[L],U=M.className,te=M.style,ce=i.appendChild(Qe("div",null,"CodeMirror-gutter "+U));te&&(ce.style.cssText=te),"CodeMirror-linenumbers"==U&&(t.lineGutter=ce,ce.style.width=(t.lineNumWidth||1)+"px")}i.style.display=E.length?"":"none",rs(t)}function uo(t){su(t.display),Tr(t),iu(t)}function lu(t,i,E,L){var M=this;this.input=E,M.scrollbarFiller=Qe("div",null,"CodeMirror-scrollbar-filler"),M.scrollbarFiller.setAttribute("cm-not-content","true"),M.gutterFiller=Qe("div",null,"CodeMirror-gutter-filler"),M.gutterFiller.setAttribute("cm-not-content","true"),M.lineDiv=$e("div",null,"CodeMirror-code"),M.selectionDiv=Qe("div",null,null,"position: relative; z-index: 1"),M.cursorDiv=Qe("div",null,"CodeMirror-cursors"),M.measure=Qe("div",null,"CodeMirror-measure"),M.lineMeasure=Qe("div",null,"CodeMirror-measure"),M.lineSpace=$e("div",[M.measure,M.lineMeasure,M.selectionDiv,M.cursorDiv,M.lineDiv],null,"position: relative; outline: none");var U=$e("div",[M.lineSpace],"CodeMirror-lines");M.mover=Qe("div",[U],null,"position: relative"),M.sizer=Qe("div",[M.mover],"CodeMirror-sizer"),M.sizerWidth=null,M.heightForcer=Qe("div",null,null,"position: absolute; height: 50px; width: 1px;"),M.gutters=Qe("div",null,"CodeMirror-gutters"),M.lineGutter=null,M.scroller=Qe("div",[M.sizer,M.heightForcer,M.gutters],"CodeMirror-scroll"),M.scroller.setAttribute("tabIndex","-1"),M.wrapper=Qe("div",[M.scrollbarFiller,M.gutterFiller,M.scroller],"CodeMirror"),M.wrapper.setAttribute("translate","no"),T&&_<8&&(M.gutters.style.zIndex=-1,M.scroller.style.paddingRight=0),!I&&!(Be&&re)&&(M.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(M.wrapper):t(M.wrapper)),M.viewFrom=M.viewTo=i.first,M.reportedViewFrom=M.reportedViewTo=i.first,M.view=[],M.renderedView=null,M.externalMeasured=null,M.viewOffset=0,M.lastWrapHeight=M.lastWrapWidth=0,M.updateLineNumbers=null,M.nativeBarWidth=M.barHeight=M.barWidth=0,M.scrollbarsClipped=!1,M.lineNumWidth=M.lineNumInnerWidth=M.lineNumChars=null,M.alignWidgets=!1,M.cachedCharWidth=M.cachedTextHeight=M.cachedPaddingH=null,M.maxLine=null,M.maxLineLength=0,M.maxLineChanged=!1,M.wheelDX=M.wheelDY=M.wheelStartX=M.wheelStartY=null,M.shift=!1,M.selForContextMenu=null,M.activeTouch=null,M.gutterSpecs=ns(L.gutters,L.lineNumbers),su(M),E.init(M)}es.prototype.signal=function(t,i){Ie(t,i)&&this.events.push(arguments)},es.prototype.finish=function(){for(var t=0;t<this.events.length;t++)Fe.apply(null,this.events[t])};var is=0,cn=null;function uu(t){var i=t.wheelDeltaX,E=t.wheelDeltaY;return null==i&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(i=t.detail),null==E&&t.detail&&t.axis==t.VERTICAL_AXIS?E=t.detail:null==E&&(E=t.wheelDelta),{x:i,y:E}}function La(t){var i=uu(t);return i.x*=cn,i.y*=cn,i}function ao(t,i){O&&s>=102&&(null==t.display.chromeScrollHack?t.display.sizer.style.pointerEvents="none":clearTimeout(t.display.chromeScrollHack),t.display.chromeScrollHack=setTimeout(function(){t.display.chromeScrollHack=null,t.display.sizer.style.pointerEvents=""},100));var E=uu(i),L=E.x,M=E.y,U=cn;0===i.deltaMode&&(L=i.deltaX,M=i.deltaY,U=1);var te=t.display,ce=te.scroller,ve=ce.scrollWidth>ce.clientWidth,we=ce.scrollHeight>ce.clientHeight;if(L&&ve||M&&we){if(M&&oe&&I)e:for(var De=i.target,Ue=te.view;De!=ce;De=De.parentNode)for(var Ve=0;Ve<Ue.length;Ve++)if(Ue[Ve].node==De){t.display.currentWheelTarget=De;break e}if(L&&!Be&&!R&&null!=U)return M&&we&&so(t,Math.max(0,ce.scrollTop+M*U)),ri(t,Math.max(0,ce.scrollLeft+L*U)),(!M||M&&we)&&Oe(i),void(te.wheelStartX=null);if(M&&null!=U){var ze=M*U,rt=t.doc.scrollTop,nt=rt+te.wrapper.clientHeight;ze<0?rt=Math.max(0,rt+ze-50):nt=Math.min(t.doc.height,nt+ze+50),ts(t,{top:rt,bottom:nt})}is<20&&0!==i.deltaMode&&(null==te.wheelStartX?(te.wheelStartX=ce.scrollLeft,te.wheelStartY=ce.scrollTop,te.wheelDX=L,te.wheelDY=M,setTimeout(function(){if(null!=te.wheelStartX){var lt=ce.scrollLeft-te.wheelStartX,at=ce.scrollTop-te.wheelStartY,pt=at&&te.wheelDY&&at/te.wheelDY||lt&&te.wheelDX&&lt/te.wheelDX;te.wheelStartX=te.wheelStartY=null,pt&&(cn=(cn*is+pt)/(is+1),++is)}},200)):(te.wheelDX+=L,te.wheelDY+=M))}}T?cn=-.53:Be?cn=15:O?cn=-.7:G&&(cn=-1/3);var Gr=function(t,i){this.ranges=t,this.primIndex=i};Gr.prototype.primary=function(){return this.ranges[this.primIndex]},Gr.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var i=0;i<this.ranges.length;i++){var E=this.ranges[i],L=t.ranges[i];if(!As(E.anchor,L.anchor)||!As(E.head,L.head))return!1}return!0},Gr.prototype.deepCopy=function(){for(var t=[],i=0;i<this.ranges.length;i++)t[i]=new Qt(Es(this.ranges[i].anchor),Es(this.ranges[i].head));return new Gr(t,this.primIndex)},Gr.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},Gr.prototype.contains=function(t,i){i||(i=t);for(var E=0;E<this.ranges.length;E++){var L=this.ranges[E];if(Et(i,L.from())>=0&&Et(t,L.to())<=0)return E}return-1};var Qt=function(t,i){this.anchor=t,this.head=i};function Yr(t,i,E){var L=t&&t.options.selectionsMayTouch,M=i[E];i.sort(function(Ve,ze){return Et(Ve.from(),ze.from())}),E=Mt(i,M);for(var U=1;U<i.length;U++){var te=i[U],ce=i[U-1],ve=Et(ce.to(),te.from());if(L&&!te.empty()?ve>0:ve>=0){var we=No(ce.from(),te.from()),De=Io(ce.to(),te.to()),Ue=ce.empty()?te.from()==te.head:ce.from()==ce.head;U<=E&&--E,i.splice(--U,2,new Qt(Ue?De:we,Ue?we:De))}}return new Gr(i,E)}function Qn(t,i){return new Gr([new Qt(t,i||t)],0)}function kn(t){return t.text?it(t.from.line+t.text.length-1,St(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function au(t,i){if(Et(t,i.from)<0)return t;if(Et(t,i.to)<=0)return kn(i);var E=t.line+i.text.length-(i.to.line-i.from.line)-1,L=t.ch;return t.line==i.to.line&&(L+=kn(i).ch-i.to.ch),it(E,L)}function os(t,i){for(var E=[],L=0;L<t.sel.ranges.length;L++){var M=t.sel.ranges[L];E.push(new Qt(au(M.anchor,i),au(M.head,i)))}return Yr(t.cm,E,t.sel.primIndex)}function fu(t,i,E){return t.line==i.line?it(E.line,t.ch-i.ch+E.ch):it(E.line+(t.line-i.line),t.ch)}function ss(t){t.doc.mode=Jn(t.options,t.doc.modeOption),fo(t)}function fo(t){t.doc.iter(function(i){i.stateAfter&&(i.stateAfter=null),i.styles&&(i.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,ur(t,100),t.state.modeGen++,t.curOp&&Tr(t)}function nl(t,i){return 0==i.from.ch&&0==i.to.ch&&""==St(i.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function il(t,i,E,L){function M(pt){return E?E[pt]:null}function U(pt,ft,gt){(function xi(t,i,E,L){t.text=i,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Kr(t),Jr(t,E);var M=L?L(t):1;M!=t.height&&ln(t,M)})(pt,ft,gt,L),gr(pt,"change",pt,i)}function te(pt,ft){for(var gt=[],Ft=pt;Ft<ft;++Ft)gt.push(new Mn(we[Ft],M(Ft),L));return gt}var ce=i.from,ve=i.to,we=i.text,De=bt(t,ce.line),Ue=bt(t,ve.line),Ve=St(we),ze=M(we.length-1),rt=ve.line-ce.line;if(i.full)t.insert(0,te(0,we.length)),t.remove(we.length,t.size-we.length);else if(nl(t,i)){var nt=te(0,we.length-1);U(Ue,Ue.text,ze),rt&&t.remove(ce.line,rt),nt.length&&t.insert(ce.line,nt)}else if(De==Ue)if(1==we.length)U(De,De.text.slice(0,ce.ch)+Ve+De.text.slice(ve.ch),ze);else{var lt=te(1,we.length-1);lt.push(new Mn(Ve+De.text.slice(ve.ch),ze,L)),U(De,De.text.slice(0,ce.ch)+we[0],M(0)),t.insert(ce.line+1,lt)}else if(1==we.length)U(De,De.text.slice(0,ce.ch)+we[0]+Ue.text.slice(ve.ch),M(0)),t.remove(ce.line+1,rt);else{U(De,De.text.slice(0,ce.ch)+we[0],M(0)),U(Ue,Ve+Ue.text.slice(ve.ch),ze);var at=te(1,we.length-1);rt>1&&t.remove(ce.line+1,rt-1),t.insert(ce.line+1,at)}gr(t,"change",t,i)}function Un(t,i,E){!function L(M,U,te){if(M.linked)for(var ce=0;ce<M.linked.length;++ce){var ve=M.linked[ce];if(ve.doc!=U){var we=te&&ve.sharedHist;E&&!we||(i(ve.doc,we),L(ve.doc,M,we))}}}(t,null,!0)}function cu(t,i){if(i.cm)throw new Error("This document is already in use.");t.doc=i,i.cm=t,Vs(t),ss(t),hu(t),t.options.direction=i.direction,t.options.lineWrapping||Nn(t),t.options.mode=i.modeOption,Tr(t)}function hu(t){("rtl"==t.doc.direction?_e:Se)(t.display.lineDiv,"CodeMirror-rtl")}function ls(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function ol(t,i){var E={from:Es(i.from),to:kn(i),text:Vn(t,i.from,i.to)};return du(t,E,i.from.line,i.to.line+1),Un(t,function(L){return du(L,E,i.from.line,i.to.line+1)},!0),E}function pu(t){for(;t.length;){if(!St(t).ranges)break;t.pop()}}function ar(t,i,E,L){var M=t.history;M.undone.length=0;var te,ce,U=+new Date;if((M.lastOp==L||M.lastOrigin==i.origin&&i.origin&&("+"==i.origin.charAt(0)&&M.lastModTime>U-(t.cm?t.cm.options.historyEventDelay:500)||"*"==i.origin.charAt(0)))&&(te=function Ta(t,i){return i?(pu(t.done),St(t.done)):t.done.length&&!St(t.done).ranges?St(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),St(t.done)):void 0}(M,M.lastOp==L)))ce=St(te.changes),0==Et(i.from,i.to)&&0==Et(i.from,ce.to)?ce.to=kn(i):te.changes.push(ol(t,i));else{var ve=St(M.done);for((!ve||!ve.ranges)&&us(t.sel,M.done),te={changes:[ol(t,i)],generation:M.generation},M.done.push(te);M.done.length>M.undoDepth;)M.done.shift(),M.done[0].ranges||M.done.shift()}M.done.push(E),M.generation=++M.maxGeneration,M.lastModTime=M.lastSelTime=U,M.lastOp=M.lastSelOp=L,M.lastOrigin=M.lastSelOrigin=i.origin,ce||Fe(t,"historyAdded")}function Ia(t,i,E,L){var M=t.history,U=L&&L.origin;E==M.lastSelOp||U&&M.lastSelOrigin==U&&(M.lastModTime==M.lastSelTime&&M.lastOrigin==U||function yr(t,i,E,L){var M=i.charAt(0);return"*"==M||"+"==M&&E.ranges.length==L.ranges.length&&E.somethingSelected()==L.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,U,St(M.done),i))?M.done[M.done.length-1]=i:us(i,M.done),M.lastSelTime=+new Date,M.lastSelOrigin=U,M.lastSelOp=E,L&&!1!==L.clearRedo&&pu(M.undone)}function us(t,i){var E=St(i);E&&E.ranges&&E.equals(t)||i.push(t)}function du(t,i,E,L){var M=i["spans_"+t.id],U=0;t.iter(Math.max(t.first,E),Math.min(t.first+t.size,L),function(te){te.markedSpans&&((M||(M=i["spans_"+t.id]={}))[U]=te.markedSpans),++U})}function Na(t){if(!t)return null;for(var i,E=0;E<t.length;++E)t[E].marker.explicitlyCleared?i||(i=t.slice(0,E)):i&&i.push(t[E]);return i?i.length?i:null:t}function gu(t,i){var E=function Ma(t,i){var E=i["spans_"+t.id];if(!E)return null;for(var L=[],M=0;M<i.text.length;++M)L.push(Na(E[M]));return L}(t,i),L=mi(t,i);if(!E)return L;if(!L)return E;for(var M=0;M<E.length;++M){var U=E[M],te=L[M];if(U&&te)e:for(var ce=0;ce<te.length;++ce){for(var ve=te[ce],we=0;we<U.length;++we)if(U[we].marker==ve.marker)continue e;U.push(ve)}else te&&(E[M]=te)}return E}function Ii(t,i,E){for(var L=[],M=0;M<t.length;++M){var U=t[M];if(U.ranges)L.push(E?Gr.prototype.deepCopy.call(U):U);else{var te=U.changes,ce=[];L.push({changes:ce});for(var ve=0;ve<te.length;++ve){var we=te[ve],De=void 0;if(ce.push({from:we.from,to:we.to,text:we.text}),i)for(var Ue in we)(De=Ue.match(/^spans_(\d+)$/))&&Mt(i,Number(De[1]))>-1&&(St(ce)[Ue]=we[Ue],delete we[Ue])}}}return L}function sl(t,i,E,L){if(L){var M=t.anchor;if(E){var U=Et(i,M)<0;U!=Et(E,M)<0?(M=i,i=E):U!=Et(i,E)<0&&(i=E)}return new Qt(M,i)}return new Qt(E||i,i)}function as(t,i,E,L,M){null==M&&(M=t.cm&&(t.cm.display.shift||t.extend)),xr(t,new Gr([sl(t.sel.primary(),i,E,M)],0),L)}function vu(t,i,E){for(var L=[],M=t.cm&&(t.cm.display.shift||t.extend),U=0;U<t.sel.ranges.length;U++)L[U]=sl(t.sel.ranges[U],i[U],null,M);xr(t,Yr(t.cm,L,t.sel.primIndex),E)}function ll(t,i,E,L){var M=t.sel.ranges.slice(0);M[i]=E,xr(t,Yr(t.cm,M,t.sel.primIndex),L)}function yu(t,i,E,L){xr(t,Qn(i,E),L)}function co(t,i,E){var L=t.history.done,M=St(L);M&&M.ranges?(L[L.length-1]=i,cs(t,i,E)):xr(t,i,E)}function xr(t,i,E){cs(t,i,E),Ia(t,t.sel,t.cm?t.cm.curOp.id:NaN,E)}function cs(t,i,E){(Ie(t,"beforeSelectionChange")||t.cm&&Ie(t.cm,"beforeSelectionChange"))&&(i=function fs(t,i,E){var L={ranges:i.ranges,update:function(M){this.ranges=[];for(var U=0;U<M.length;U++)this.ranges[U]=new Qt(It(t,M[U].anchor),It(t,M[U].head))},origin:E&&E.origin};return Fe(t,"beforeSelectionChange",t,L),t.cm&&Fe(t.cm,"beforeSelectionChange",t.cm,L),L.ranges!=i.ranges?Yr(t.cm,L.ranges,L.ranges.length-1):i}(t,i,E));var L=E&&E.bias||(Et(i.primary().head,t.sel.primary().head)<0?-1:1);mu(t,wu(t,i,L,!0)),(!E||!1!==E.scroll)&&t.cm&&"nocursor"!=t.cm.getOption("readOnly")&&Ai(t.cm)}function mu(t,i){i.equals(t.sel)||(t.sel=i,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,Me(t.cm)),gr(t,"cursorActivity",t))}function xu(t){mu(t,wu(t,t.sel,null,!1))}function wu(t,i,E,L){for(var M,U=0;U<i.ranges.length;U++){var te=i.ranges[U],ce=i.ranges.length==t.sel.ranges.length&&t.sel.ranges[U],ve=hs(t,te.anchor,ce&&ce.anchor,E,L),we=hs(t,te.head,ce&&ce.head,E,L);(M||ve!=te.anchor||we!=te.head)&&(M||(M=i.ranges.slice(0,U)),M[U]=new Qt(ve,we))}return M?Yr(t.cm,M,i.primIndex):i}function Ni(t,i,E,L,M){var U=bt(t,i.line);if(U.markedSpans)for(var te=0;te<U.markedSpans.length;++te){var ce=U.markedSpans[te],ve=ce.marker,we="selectLeft"in ve?!ve.selectLeft:ve.inclusiveLeft,De="selectRight"in ve?!ve.selectRight:ve.inclusiveRight;if((null==ce.from||(we?ce.from<=i.ch:ce.from<i.ch))&&(null==ce.to||(De?ce.to>=i.ch:ce.to>i.ch))){if(M&&(Fe(ve,"beforeCursorEnter"),ve.explicitlyCleared)){if(U.markedSpans){--te;continue}break}if(!ve.atomic)continue;if(E){var Ue=ve.find(L<0?1:-1),Ve=void 0;if((L<0?De:we)&&(Ue=Cu(t,Ue,-L,Ue&&Ue.line==i.line?U:null)),Ue&&Ue.line==i.line&&(Ve=Et(Ue,E))&&(L<0?Ve<0:Ve>0))return Ni(t,Ue,i,L,M)}var ze=ve.find(L<0?-1:1);return(L<0?we:De)&&(ze=Cu(t,ze,L,ze.line==i.line?U:null)),ze?Ni(t,ze,i,L,M):null}}return i}function hs(t,i,E,L,M){var U=L||1;return Ni(t,i,E,U,M)||!M&&Ni(t,i,E,U,!0)||Ni(t,i,E,-U,M)||!M&&Ni(t,i,E,-U,!0)||(t.cantEdit=!0,it(t.first,0))}function Cu(t,i,E,L){return E<0&&0==i.ch?i.line>t.first?It(t,it(i.line-1)):null:E>0&&i.ch==(L||bt(t,i.line)).text.length?i.line<t.first+t.size-1?it(i.line+1,0):null:new it(i.line,i.ch+E)}function ho(t){t.setSelection(it(t.firstLine(),0),it(t.lastLine()),dt)}function po(t,i,E){var L={canceled:!1,from:i.from,to:i.to,text:i.text,origin:i.origin,cancel:function(){return L.canceled=!0}};return E&&(L.update=function(M,U,te,ce){M&&(L.from=It(t,M)),U&&(L.to=It(t,U)),te&&(L.text=te),void 0!==ce&&(L.origin=ce)}),Fe(t,"beforeChange",t,L),t.cm&&Fe(t.cm,"beforeChange",t.cm,L),L.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:L.from,to:L.to,text:L.text,origin:L.origin}}function Mi(t,i,E){if(t.cm){if(!t.cm.curOp)return vr(t.cm,Mi)(t,i,E);if(t.cm.state.suppressEdits)return}if(!(Ie(t,"beforeChange")||t.cm&&Ie(t.cm,"beforeChange"))||(i=po(t,i,!0))){var L=Bt&&!E&&function Do(t,i,E){var L=null;if(t.iter(i.line,E.line+1,function(ze){if(ze.markedSpans)for(var rt=0;rt<ze.markedSpans.length;++rt){var nt=ze.markedSpans[rt].marker;nt.readOnly&&(!L||-1==Mt(L,nt))&&(L||(L=[])).push(nt)}}),!L)return null;for(var M=[{from:i,to:E}],U=0;U<L.length;++U)for(var te=L[U],ce=te.find(0),ve=0;ve<M.length;++ve){var we=M[ve];if(!(Et(we.to,ce.from)<0||Et(we.from,ce.to)>0)){var De=[ve,1],Ue=Et(we.from,ce.from),Ve=Et(we.to,ce.to);(Ue<0||!te.inclusiveLeft&&!Ue)&&De.push({from:we.from,to:ce.from}),(Ve>0||!te.inclusiveRight&&!Ve)&&De.push({from:ce.to,to:we.to}),M.splice.apply(M,De),ve+=De.length-3}}return M}(t,i.from,i.to);if(L)for(var M=L.length-1;M>=0;--M)Gn(t,{from:L[M].from,to:L[M].to,text:M?[""]:i.text,origin:i.origin});else Gn(t,i)}}function Gn(t,i){if(1!=i.text.length||""!=i.text[0]||0!=Et(i.from,i.to)){var E=os(t,i);ar(t,i,E,t.cm?t.cm.curOp.id:NaN),go(t,i,E,mi(t,i));var L=[];Un(t,function(M,U){!U&&-1==Mt(L,M.history)&&(ds(M.history,i),L.push(M.history)),go(M,i,null,mi(M,i))})}}function hn(t,i,E){var L=t.cm&&t.cm.state.suppressEdits;if(!L||E){for(var U,M=t.history,te=t.sel,ce="undo"==i?M.done:M.undone,ve="undo"==i?M.undone:M.done,we=0;we<ce.length&&(U=ce[we],!(E?U.ranges&&!U.equals(t.sel):!U.ranges));we++);if(we!=ce.length){for(M.lastOrigin=M.lastSelOrigin=null;;){if(!(U=ce.pop()).ranges){if(L)return void ce.push(U);break}if(us(U,ve),E&&!U.equals(t.sel))return void xr(t,U,{clearRedo:!1});te=U}var De=[];us(te,ve),ve.push({changes:De,generation:M.generation}),M.generation=U.generation||++M.maxGeneration;for(var Ue=Ie(t,"beforeChange")||t.cm&&Ie(t.cm,"beforeChange"),Ve=function(nt){var lt=U.changes[nt];if(lt.origin=i,Ue&&!po(t,lt,!1))return ce.length=0,{};De.push(ol(t,lt));var at=nt?os(t,lt):St(ce);go(t,lt,at,gu(t,lt)),!nt&&t.cm&&t.cm.scrollIntoView({from:lt.from,to:kn(lt)});var pt=[];Un(t,function(ft,gt){!gt&&-1==Mt(pt,ft.history)&&(ds(ft.history,lt),pt.push(ft.history)),go(ft,lt,null,gu(ft,lt))})},ze=U.changes.length-1;ze>=0;--ze){var rt=Ve(ze);if(rt)return rt.v}}}}function bu(t,i){if(0!=i&&(t.first+=i,t.sel=new Gr(_r(t.sel.ranges,function(M){return new Qt(it(M.anchor.line+i,M.anchor.ch),it(M.head.line+i,M.head.ch))}),t.sel.primIndex),t.cm)){Tr(t.cm,t.first,t.first-i,i);for(var E=t.cm.display,L=E.viewFrom;L<E.viewTo;L++)Rn(t.cm,L,"gutter")}}function go(t,i,E,L){if(t.cm&&!t.cm.curOp)return vr(t.cm,go)(t,i,E,L);if(i.to.line<t.first)bu(t,i.text.length-1-(i.to.line-i.from.line));else if(!(i.from.line>t.lastLine())){if(i.from.line<t.first){var M=i.text.length-1-(t.first-i.from.line);bu(t,M),i={from:it(t.first,0),to:it(i.to.line+M,i.to.ch),text:[St(i.text)],origin:i.origin}}var U=t.lastLine();i.to.line>U&&(i={from:i.from,to:it(U,bt(t,U).text.length),text:[i.text[0]],origin:i.origin}),i.removed=Vn(t,i.from,i.to),E||(E=os(t,i)),t.cm?function Su(t,i,E){var L=t.doc,M=t.display,U=i.from,te=i.to,ce=!1,ve=U.line;t.options.lineWrapping||(ve=Xt(Vr(bt(L,U.line))),L.iter(ve,te.line+1,function(ze){if(ze==M.maxLine)return ce=!0,!0})),L.sel.contains(i.from,i.to)>-1&&Me(t),il(L,i,E,Wo(t)),t.options.lineWrapping||(L.iter(ve,U.line+i.text.length,function(ze){var rt=Po(ze);rt>M.maxLineLength&&(M.maxLine=ze,M.maxLineLength=rt,M.maxLineChanged=!0,ce=!1)}),ce&&(t.curOp.updateMaxLine=!0)),function Mo(t,i){if(t.modeFrontier=Math.min(t.modeFrontier,i),!(t.highlightFrontier<i-10)){for(var E=t.first,L=i-1;L>E;L--){var M=bt(t,L).stateAfter;if(M&&(!(M instanceof dr)||L+M.lookAhead<i)){E=L+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,E)}}(L,U.line),ur(t,400);var we=i.text.length-(te.line-U.line)-1;i.full?Tr(t):U.line!=te.line||1!=i.text.length||nl(t.doc,i)?Tr(t,U.line,te.line+1,we):Rn(t,U.line,"text");var De=Ie(t,"changes"),Ue=Ie(t,"change");if(Ue||De){var Ve={from:U,to:te,text:i.text,removed:i.removed,origin:i.origin};Ue&&gr(t,"change",t,Ve),De&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(Ve)}t.display.selForContextMenu=null}(t.cm,i,L):il(t,i,L),cs(t,E,dt),t.cantEdit&&hs(t,it(t.firstLine(),0))&&(t.cantEdit=!1)}}function si(t,i,E,L,M){var U;L||(L=E),Et(L,E)<0&&(E=(U=[L,E])[0],L=U[1]),"string"==typeof i&&(i=t.splitLines(i)),Mi(t,{from:E,to:L,text:i,origin:M})}function ku(t,i,E,L){E<t.line?t.line+=L:i<t.line&&(t.line=i,t.ch=0)}function ps(t,i,E,L){for(var M=0;M<t.length;++M){var U=t[M],te=!0;if(U.ranges){U.copied||((U=t[M]=U.deepCopy()).copied=!0);for(var ce=0;ce<U.ranges.length;ce++)ku(U.ranges[ce].anchor,i,E,L),ku(U.ranges[ce].head,i,E,L)}else{for(var ve=0;ve<U.changes.length;++ve){var we=U.changes[ve];if(E<we.from.line)we.from=it(we.from.line+L,we.from.ch),we.to=it(we.to.line+L,we.to.ch);else if(i<=we.to.line){te=!1;break}}te||(t.splice(0,M+1),M=0)}}}function ds(t,i){var E=i.from.line,L=i.to.line,M=i.text.length-(L-E)-1;ps(t.done,E,L,M),ps(t.undone,E,L,M)}function Zr(t,i,E,L){var M=i,U=i;return"number"==typeof i?U=bt(t,Ts(t,i)):M=Xt(i),null==M?null:(L(U,M)&&t.cm&&Rn(t.cm,M,E),U)}function $r(t){this.lines=t,this.parent=null;for(var i=0,E=0;E<t.length;++E)t[E].parent=this,i+=t[E].height;this.height=i}function vo(t){this.children=t;for(var i=0,E=0,L=0;L<t.length;++L){var M=t[L];i+=M.chunkSize(),E+=M.height,M.parent=this}this.size=i,this.height=E,this.parent=null}Qt.prototype.from=function(){return No(this.anchor,this.head)},Qt.prototype.to=function(){return Io(this.anchor,this.head)},Qt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},$r.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,i){for(var E=t,L=t+i;E<L;++E){var M=this.lines[E];this.height-=M.height,Rs(M),gr(M,"delete")}this.lines.splice(t,i)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,i,E){this.height+=E,this.lines=this.lines.slice(0,t).concat(i).concat(this.lines.slice(t));for(var L=0;L<i.length;++L)i[L].parent=this},iterN:function(t,i,E){for(var L=t+i;t<L;++t)if(E(this.lines[t]))return!0}},vo.prototype={chunkSize:function(){return this.size},removeInner:function(t,i){this.size-=i;for(var E=0;E<this.children.length;++E){var L=this.children[E],M=L.chunkSize();if(t<M){var U=Math.min(i,M-t),te=L.height;if(L.removeInner(t,U),this.height-=te-L.height,M==U&&(this.children.splice(E--,1),L.parent=null),0==(i-=U))break;t=0}else t-=M}if(this.size-i<25&&(this.children.length>1||!(this.children[0]instanceof $r))){var ce=[];this.collapse(ce),this.children=[new $r(ce)],this.children[0].parent=this}},collapse:function(t){for(var i=0;i<this.children.length;++i)this.children[i].collapse(t)},insertInner:function(t,i,E){this.size+=i.length,this.height+=E;for(var L=0;L<this.children.length;++L){var M=this.children[L],U=M.chunkSize();if(t<=U){if(M.insertInner(t,i,E),M.lines&&M.lines.length>50){for(var te=M.lines.length%25+25,ce=te;ce<M.lines.length;){var ve=new $r(M.lines.slice(ce,ce+=25));M.height-=ve.height,this.children.splice(++L,0,ve),ve.parent=this}M.lines=M.lines.slice(0,te),this.maybeSpill()}break}t-=U}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var E=new vo(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=E.size,t.height-=E.height;var M=Mt(t.parent.children,t);t.parent.children.splice(M+1,0,E)}else{var L=new vo(t.children);L.parent=t,t.children=[L,E],t=L}E.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,i,E){for(var L=0;L<this.children.length;++L){var M=this.children[L],U=M.chunkSize();if(t<U){var te=Math.min(i,U-t);if(M.iterN(t,te,E))return!0;if(0==(i-=te))break;t=0}else t-=U}}};var li=function(t,i,E){if(E)for(var L in E)E.hasOwnProperty(L)&&(this[L]=E[L]);this.doc=t,this.node=i};function gs(t,i,E){bn(i)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Vo(t,E)}li.prototype.clear=function(){var t=this.doc.cm,i=this.line.widgets,E=this.line,L=Xt(E);if(null!=L&&i){for(var M=0;M<i.length;++M)i[M]==this&&i.splice(M--,1);i.length||(E.widgets=null);var U=Ji(this);ln(E,Math.max(0,E.height-U)),t&&(Ur(t,function(){gs(t,E,-U),Rn(t,L,"widget")}),gr(t,"lineWidgetCleared",t,this,L))}},li.prototype.changed=function(){var t=this,i=this.height,E=this.doc.cm,L=this.line;this.height=null;var M=Ji(this)-i;!M||(Cn(this.doc,L)||ln(L,L.height+M),E&&Ur(E,function(){E.curOp.forceUpdate=!0,gs(E,L,M),gr(E,"lineWidgetChanged",E,t,Xt(L))}))},Re(li);var _u=0,Hn=function(t,i){this.lines=[],this.type=i,this.doc=t,this.id=++_u};function ji(t,i,E,L,M){if(L&&L.shared)return function ul(t,i,E,L,M){(L=yt(L)).shared=!1;var U=[ji(t,i,E,L,M)],te=U[0],ce=L.widgetNode;return Un(t,function(ve){ce&&(L.widgetNode=ce.cloneNode(!0)),U.push(ji(ve,It(ve,i),It(ve,E),L,M));for(var we=0;we<ve.linked.length;++we)if(ve.linked[we].isParent)return;te=St(U)}),new yo(U,te)}(t,i,E,L,M);if(t.cm&&!t.cm.curOp)return vr(t.cm,ji)(t,i,E,L,M);var U=new Hn(t,M),te=Et(i,E);if(L&&yt(L,U,!1),te>0||0==te&&!1!==U.clearWhenEmpty)return U;if(U.replacedWith&&(U.collapsed=!0,U.widgetNode=$e("span",[U.replacedWith],"CodeMirror-widget"),L.handleMouseEvents||U.widgetNode.setAttribute("cm-ignore-events","true"),L.insertLeft&&(U.widgetNode.insertLeft=!0)),U.collapsed){if(Nl(t,i.line,i,E,U)||i.line!=E.line&&Nl(t,E.line,i,E,U))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function xn(){Nt=!0}()}U.addToHistory&&ar(t,{from:i,to:E,origin:"markText"},t.sel,NaN);var we,ce=i.line,ve=t.cm;if(t.iter(ce,E.line+1,function(Ue){ve&&U.collapsed&&!ve.options.lineWrapping&&Vr(Ue)==ve.display.maxLine&&(we=!0),U.collapsed&&ce!=i.line&&ln(Ue,0),function Oo(t,i,E){var L=E&&window.WeakSet&&(E.markedSpans||(E.markedSpans=new WeakSet));L&&t.markedSpans&&L.has(t.markedSpans)?t.markedSpans.push(i):(t.markedSpans=t.markedSpans?t.markedSpans.concat([i]):[i],L&&L.add(t.markedSpans)),i.marker.attachLine(t)}(Ue,new jo(U,ce==i.line?i.ch:null,ce==E.line?E.ch:null),t.cm&&t.cm.curOp),++ce}),U.collapsed&&t.iter(i.line,E.line+1,function(Ue){Cn(t,Ue)&&ln(Ue,0)}),U.clearOnEnter&&Z(U,"beforeCursorEnter",function(){return U.clear()}),U.readOnly&&(function mn(){Bt=!0}(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),U.collapsed&&(U.id=++_u,U.atomic=!0),ve){if(we&&(ve.curOp.updateMaxLine=!0),U.collapsed)Tr(ve,i.line,E.line+1);else if(U.className||U.startStyle||U.endStyle||U.css||U.attributes||U.title)for(var De=i.line;De<=E.line;De++)Rn(ve,De,"text");U.atomic&&xu(ve.doc),gr(ve,"markerAdded",ve,U)}return U}Hn.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,i=t&&!t.curOp;if(i&&Pn(t),Ie(this,"clear")){var E=this.find();E&&gr(this,"clear",E.from,E.to)}for(var L=null,M=null,U=0;U<this.lines.length;++U){var te=this.lines[U],ce=Tn(te.markedSpans,this);t&&!this.collapsed?Rn(t,Xt(te),"text"):t&&(null!=ce.to&&(M=Xt(te)),null!=ce.from&&(L=Xt(te))),te.markedSpans=Al(te.markedSpans,ce),null==ce.from&&this.collapsed&&!Cn(this.doc,te)&&t&&ln(te,Si(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var ve=0;ve<this.lines.length;++ve){var we=Vr(this.lines[ve]),De=Po(we);De>t.display.maxLineLength&&(t.display.maxLine=we,t.display.maxLineLength=De,t.display.maxLineChanged=!0)}null!=L&&t&&this.collapsed&&Tr(t,L,M+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&xu(t.doc)),t&&gr(t,"markerCleared",t,this,L,M),i&&oi(t),this.parent&&this.parent.clear()}},Hn.prototype.find=function(t,i){null==t&&"bookmark"==this.type&&(t=1);for(var E,L,M=0;M<this.lines.length;++M){var U=this.lines[M],te=Tn(U.markedSpans,this);if(null!=te.from&&(E=it(i?U:Xt(U),te.from),-1==t))return E;if(null!=te.to&&(L=it(i?U:Xt(U),te.to),1==t))return L}return E&&{from:E,to:L}},Hn.prototype.changed=function(){var t=this,i=this.find(-1,!0),E=this,L=this.doc.cm;!i||!L||Ur(L,function(){var M=i.line,U=Xt(i.line),te=Uo(L,U);if(te&&(Zi(te),L.curOp.selectionChanged=L.curOp.forceUpdate=!0),L.curOp.updateMaxLine=!0,!Cn(E.doc,M)&&null!=E.height){var ce=E.height;E.height=null;var ve=Ji(E)-ce;ve&&ln(M,M.height+ve)}gr(L,"markerChanged",L,t)})},Hn.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var i=this.doc.cm.curOp;(!i.maybeHiddenMarkers||-1==Mt(i.maybeHiddenMarkers,this))&&(i.maybeUnhiddenMarkers||(i.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Hn.prototype.detachLine=function(t){if(this.lines.splice(Mt(this.lines,t),1),!this.lines.length&&this.doc.cm){var i=this.doc.cm.curOp;(i.maybeHiddenMarkers||(i.maybeHiddenMarkers=[])).push(this)}},Re(Hn);var yo=function(t,i){this.markers=t,this.primary=i;for(var E=0;E<t.length;++E)t[E].parent=this};function vs(t){return t.findMarks(it(t.first,0),t.clipPos(it(t.lastLine())),function(i){return i.parent})}function fl(t){for(var i=function(L){var M=t[L],U=[M.primary.doc];Un(M.primary.doc,function(ve){return U.push(ve)});for(var te=0;te<M.markers.length;te++){var ce=M.markers[te];-1==Mt(U,ce.doc)&&(ce.parent=null,M.markers.splice(te--,1))}},E=0;E<t.length;E++)i(E)}yo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();gr(this,"clear")}},yo.prototype.find=function(t,i){return this.primary.find(t,i)},Re(yo);var Oa=0,Or=function(t,i,E,L,M){if(!(this instanceof Or))return new Or(t,i,E,L,M);null==E&&(E=0),vo.call(this,[new $r([new Mn("",null)])]),this.first=E,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=E;var U=it(E,0);this.sel=Qn(U),this.history=new ls(null),this.id=++Oa,this.modeOption=i,this.lineSep=L,this.direction="rtl"==M?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),il(this,{from:U,to:U,text:t}),xr(this,Qn(U),dt)};Or.prototype=$t(vo.prototype,{constructor:Or,iter:function(t,i,E){E?this.iterN(t-this.first,i-t,E):this.iterN(this.first,this.first+this.size,t)},insert:function(t,i){for(var E=0,L=0;L<i.length;++L)E+=i[L].height;this.insertInner(t-this.first,i,E)},remove:function(t,i){this.removeInner(t-this.first,i)},getValue:function(t){var i=Eo(this,this.first,this.first+this.size);return!1===t?i:i.join(t||this.lineSeparator())},setValue:Ut(function(t){var i=it(this.first,0),E=this.first+this.size-1;Mi(this,{from:i,to:it(E,bt(this,E).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Ei(this.cm,0,0),xr(this,Qn(i),dt)}),replaceRange:function(t,i,E,L){si(this,t,i=It(this,i),E=E?It(this,E):i,L)},getRange:function(t,i,E){var L=Vn(this,It(this,t),It(this,i));return!1===E?L:""===E?L.join(""):L.join(E||this.lineSeparator())},getLine:function(t){var i=this.getLineHandle(t);return i&&i.text},getLineHandle:function(t){if(Hi(this,t))return bt(this,t)},getLineNumber:function(t){return Xt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=bt(this,t)),Vr(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return It(this,t)},getCursor:function(t){var i=this.sel.primary();return null==t||"head"==t?i.head:"anchor"==t?i.anchor:"end"==t||"to"==t||!1===t?i.to():i.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ut(function(t,i,E){yu(this,It(this,"number"==typeof t?it(t,i||0):t),null,E)}),setSelection:Ut(function(t,i,E){yu(this,It(this,t),It(this,i||t),E)}),extendSelection:Ut(function(t,i,E){as(this,It(this,t),i&&It(this,i),E)}),extendSelections:Ut(function(t,i){vu(this,Ll(this,t),i)}),extendSelectionsBy:Ut(function(t,i){vu(this,Ll(this,_r(this.sel.ranges,t)),i)}),setSelections:Ut(function(t,i,E){if(t.length){for(var L=[],M=0;M<t.length;M++)L[M]=new Qt(It(this,t[M].anchor),It(this,t[M].head||t[M].anchor));null==i&&(i=Math.min(t.length-1,this.sel.primIndex)),xr(this,Yr(this.cm,L,i),E)}}),addSelection:Ut(function(t,i,E){var L=this.sel.ranges.slice(0);L.push(new Qt(It(this,t),It(this,i||t))),xr(this,Yr(this.cm,L,L.length-1),E)}),getSelection:function(t){for(var E,i=this.sel.ranges,L=0;L<i.length;L++){var M=Vn(this,i[L].from(),i[L].to());E=E?E.concat(M):M}return!1===t?E:E.join(t||this.lineSeparator())},getSelections:function(t){for(var i=[],E=this.sel.ranges,L=0;L<E.length;L++){var M=Vn(this,E[L].from(),E[L].to());!1!==t&&(M=M.join(t||this.lineSeparator())),i[L]=M}return i},replaceSelection:function(t,i,E){for(var L=[],M=0;M<this.sel.ranges.length;M++)L[M]=t;this.replaceSelections(L,i,E||"+input")},replaceSelections:Ut(function(t,i,E){for(var L=[],M=this.sel,U=0;U<M.ranges.length;U++){var te=M.ranges[U];L[U]={from:te.from(),to:te.to(),text:this.splitLines(t[U]),origin:E}}for(var ce=i&&"end"!=i&&function Aa(t,i,E){for(var L=[],M=it(t.first,0),U=M,te=0;te<i.length;te++){var ce=i[te],ve=fu(ce.from,M,U),we=fu(kn(ce),M,U);if(M=ce.to,U=we,"around"==E){var De=t.sel.ranges[te],Ue=Et(De.head,De.anchor)<0;L[te]=new Qt(Ue?we:ve,Ue?ve:we)}else L[te]=new Qt(ve,ve)}return new Gr(L,t.sel.primIndex)}(this,L,i),ve=L.length-1;ve>=0;ve--)Mi(this,L[ve]);ce?co(this,ce):this.cm&&Ai(this.cm)}),undo:Ut(function(){hn(this,"undo")}),redo:Ut(function(){hn(this,"redo")}),undoSelection:Ut(function(){hn(this,"undo",!0)}),redoSelection:Ut(function(){hn(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,i=0,E=0,L=0;L<t.done.length;L++)t.done[L].ranges||++i;for(var M=0;M<t.undone.length;M++)t.undone[M].ranges||++E;return{undo:i,redo:E}},clearHistory:function(){var t=this;this.history=new ls(this.history),Un(this,function(i){return i.history=t.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Ii(this.history.done),undone:Ii(this.history.undone)}},setHistory:function(t){var i=this.history=new ls(this.history);i.done=Ii(t.done.slice(0),null,!0),i.undone=Ii(t.undone.slice(0),null,!0)},setGutterMarker:Ut(function(t,i,E){return Zr(this,t,"gutter",function(L){var M=L.gutterMarkers||(L.gutterMarkers={});return M[i]=E,!E&&Pe(M)&&(L.gutterMarkers=null),!0})}),clearGutter:Ut(function(t){var i=this;this.iter(function(E){E.gutterMarkers&&E.gutterMarkers[t]&&Zr(i,E,"gutter",function(){return E.gutterMarkers[t]=null,Pe(E.gutterMarkers)&&(E.gutterMarkers=null),!0})})}),lineInfo:function(t){var i;if("number"==typeof t){if(!Hi(this,t)||(i=t,!(t=bt(this,t))))return null}else if(null==(i=Xt(t)))return null;return{line:i,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:Ut(function(t,i,E){return Zr(this,t,"gutter"==i?"gutter":"class",function(L){var M="text"==i?"textClass":"background"==i?"bgClass":"gutter"==i?"gutterClass":"wrapClass";if(L[M]){if(ge(E).test(L[M]))return!1;L[M]+=" "+E}else L[M]=E;return!0})}),removeLineClass:Ut(function(t,i,E){return Zr(this,t,"gutter"==i?"gutter":"class",function(L){var M="text"==i?"textClass":"background"==i?"bgClass":"gutter"==i?"gutterClass":"wrapClass",U=L[M];if(!U)return!1;if(null==E)L[M]=null;else{var te=U.match(ge(E));if(!te)return!1;var ce=te.index+te[0].length;L[M]=U.slice(0,te.index)+(te.index&&ce!=U.length?" ":"")+U.slice(ce)||null}return!0})}),addLineWidget:Ut(function(t,i,E){return function ja(t,i,E,L){var M=new li(t,E,L),U=t.cm;return U&&M.noHScroll&&(U.display.alignWidgets=!0),Zr(t,i,"widget",function(te){var ce=te.widgets||(te.widgets=[]);if(null==M.insertAt?ce.push(M):ce.splice(Math.min(ce.length,Math.max(0,M.insertAt)),0,M),M.line=te,U&&!Cn(t,te)){var ve=bn(te)<t.scrollTop;ln(te,te.height+Ji(M)),ve&&Vo(U,M.height),U.curOp.forceUpdate=!0}return!0}),U&&gr(U,"lineWidgetAdded",U,M,"number"==typeof i?i:Xt(i)),M}(this,t,i,E)}),removeLineWidget:function(t){t.clear()},markText:function(t,i,E){return ji(this,It(this,t),It(this,i),E,E&&E.type||"range")},setBookmark:function(t,i){var E={replacedWith:i&&(null==i.nodeType?i.widget:i),insertLeft:i&&i.insertLeft,clearWhenEmpty:!1,shared:i&&i.shared,handleMouseEvents:i&&i.handleMouseEvents};return ji(this,t=It(this,t),t,E,"bookmark")},findMarksAt:function(t){var i=[],E=bt(this,(t=It(this,t)).line).markedSpans;if(E)for(var L=0;L<E.length;++L){var M=E[L];(null==M.from||M.from<=t.ch)&&(null==M.to||M.to>=t.ch)&&i.push(M.marker.parent||M.marker)}return i},findMarks:function(t,i,E){t=It(this,t),i=It(this,i);var L=[],M=t.line;return this.iter(t.line,i.line+1,function(U){var te=U.markedSpans;if(te)for(var ce=0;ce<te.length;ce++){var ve=te[ce];!(null!=ve.to&&M==t.line&&t.ch>=ve.to||null==ve.from&&M!=t.line||null!=ve.from&&M==i.line&&ve.from>=i.ch)&&(!E||E(ve.marker))&&L.push(ve.marker.parent||ve.marker)}++M}),L},getAllMarks:function(){var t=[];return this.iter(function(i){var E=i.markedSpans;if(E)for(var L=0;L<E.length;++L)null!=E[L].from&&t.push(E[L].marker)}),t},posFromIndex:function(t){var i,E=this.first,L=this.lineSeparator().length;return this.iter(function(M){var U=M.text.length+L;if(U>t)return i=t,!0;t-=U,++E}),It(this,it(E,i))},indexFromPos:function(t){var i=(t=It(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var E=this.lineSeparator().length;return this.iter(this.first,t.line,function(L){i+=L.text.length+E}),i},copy:function(t){var i=new Or(Eo(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return i.scrollTop=this.scrollTop,i.scrollLeft=this.scrollLeft,i.sel=this.sel,i.extend=!1,t&&(i.history.undoDepth=this.history.undoDepth,i.setHistory(this.getHistory())),i},linkedDoc:function(t){t||(t={});var i=this.first,E=this.first+this.size;null!=t.from&&t.from>i&&(i=t.from),null!=t.to&&t.to<E&&(E=t.to);var L=new Or(Eo(this,i,E),t.mode||this.modeOption,i,this.lineSep,this.direction);return t.sharedHist&&(L.history=this.history),(this.linked||(this.linked=[])).push({doc:L,sharedHist:t.sharedHist}),L.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function al(t,i){for(var E=0;E<i.length;E++){var L=i[E],M=L.find(),U=t.clipPos(M.from),te=t.clipPos(M.to);if(Et(U,te)){var ce=ji(t,U,te,L.primary,L.primary.type);L.markers.push(ce),ce.parent=L}}}(L,vs(this)),L},unlinkDoc:function(t){if(t instanceof Jt&&(t=t.doc),this.linked)for(var i=0;i<this.linked.length;++i){if(this.linked[i].doc==t){this.linked.splice(i,1),t.unlinkDoc(this),fl(vs(this));break}}if(t.history==this.history){var L=[t.id];Un(t,function(M){return L.push(M.id)},!0),t.history=new ls(null),t.history.done=Ii(this.history.done,L),t.history.undone=Ii(this.history.undone,L)}},iterLinkedDocs:function(t){Un(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):pr(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Ut(function(t){"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(i){return i.order=null}),this.cm&&function Ea(t){Ur(t,function(){hu(t),Tr(t)})}(this.cm))})}),Or.prototype.eachLine=Or.prototype.iter;var Fu=0;function Da(t){var i=this;if(Lu(i),!Ae(i,t)&&!Sn(i.display,t)){Oe(t),T&&(Fu=+new Date);var E=Dn(i,t,!0),L=t.dataTransfer.files;if(E&&!i.isReadOnly())if(L&&L.length&&window.FileReader&&window.File)for(var M=L.length,U=Array(M),te=0,ce=function(){++te==M&&vr(i,function(){var ze={from:E=It(i.doc,E),to:E,text:i.doc.splitLines(U.filter(function(rt){return null!=rt}).join(i.doc.lineSeparator())),origin:"paste"};Mi(i.doc,ze),co(i.doc,Qn(It(i.doc,E),It(i.doc,kn(ze))))})()},ve=function(ze,rt){if(i.options.allowDropFileTypes&&-1==Mt(i.options.allowDropFileTypes,ze.type))ce();else{var nt=new FileReader;nt.onerror=function(){return ce()},nt.onload=function(){var lt=nt.result;/[\x00-\x08\x0e-\x1f]{2}/.test(lt)||(U[rt]=lt),ce()},nt.readAsText(ze)}},we=0;we<L.length;we++)ve(L[we],we);else{if(i.state.draggingText&&i.doc.sel.contains(E)>-1)return i.state.draggingText(t),void setTimeout(function(){return i.display.input.focus()},20);try{var De=t.dataTransfer.getData("Text");if(De){var Ue;if(i.state.draggingText&&!i.state.draggingText.copy&&(Ue=i.listSelections()),cs(i.doc,Qn(E,E)),Ue)for(var Ve=0;Ve<Ue.length;++Ve)si(i.doc,"",Ue[Ve].anchor,Ue[Ve].head,"drag");i.replaceSelection(De,"around","paste"),i.display.input.focus()}}catch(ze){}}}}function Lu(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Au(t){if(document.getElementsByClassName){for(var i=document.getElementsByClassName("CodeMirror"),E=[],L=0;L<i.length;L++){var M=i[L].CodeMirror;M&&E.push(M)}E.length&&E[0].operation(function(){for(var U=0;U<E.length;U++)t(E[U])})}}var Eu=!1;function Pa(){Eu||(function Qa(){var t;Z(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Au(ys)},100))}),Z(window,"blur",function(){return Au(ei)})}(),Eu=!0)}function ys(t){var i=t.display;i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.scrollbarsClipped=!1,t.setSize()}for(var _n={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},mo=0;mo<10;mo++)_n[mo+48]=_n[mo+96]=String(mo);for(var ui=65;ui<=90;ui++)_n[ui]=String.fromCharCode(ui);for(var Oi=1;Oi<=12;Oi++)_n[Oi+111]=_n[Oi+63235]="F"+Oi;var Fn={};function Ua(t){var i=t.split(/-(?!$)/);t=i[i.length-1];for(var E,L,M,U,te=0;te<i.length-1;te++){var ce=i[te];if(/^(cmd|meta|m)$/i.test(ce))U=!0;else if(/^a(lt)?$/i.test(ce))E=!0;else if(/^(c|ctrl|control)$/i.test(ce))L=!0;else{if(!/^s(hift)?$/i.test(ce))throw new Error("Unrecognized modifier name: "+ce);M=!0}}return E&&(t="Alt-"+t),L&&(t="Ctrl-"+t),U&&(t="Cmd-"+t),M&&(t="Shift-"+t),t}function ms(t){var i={};for(var E in t)if(t.hasOwnProperty(E)){var L=t[E];if(/^(name|fallthrough|(de|at)tach)$/.test(E))continue;if("..."==L){delete t[E];continue}for(var M=_r(E.split(" "),Ua),U=0;U<M.length;U++){var te=void 0,ce=void 0;U==M.length-1?(ce=M.join(" "),te=L):(ce=M.slice(0,U+1).join(" "),te="...");var ve=i[ce];if(ve){if(ve!=te)throw new Error("Inconsistent bindings for "+ce)}else i[ce]=te}delete t[E]}for(var we in i)t[we]=i[we];return t}function Ln(t,i,E,L){var M=(i=Di(i)).call?i.call(t,L):i[t];if(!1===M)return"nothing";if("..."===M)return"multi";if(null!=M&&E(M))return"handled";if(i.fallthrough){if("[object Array]"!=Object.prototype.toString.call(i.fallthrough))return Ln(t,i.fallthrough,E,L);for(var U=0;U<i.fallthrough.length;U++){var te=Ln(t,i.fallthrough[U],E,L);if(te)return te}}}function xo(t){var i="string"==typeof t?t:_n[t.keyCode];return"Ctrl"==i||"Alt"==i||"Shift"==i||"Mod"==i}function cl(t,i,E){var L=t;return i.altKey&&"Alt"!=L&&(t="Alt-"+t),(W?i.metaKey:i.ctrlKey)&&"Ctrl"!=L&&(t="Ctrl-"+t),(W?i.ctrlKey:i.metaKey)&&"Mod"!=L&&(t="Cmd-"+t),!E&&i.shiftKey&&"Shift"!=L&&(t="Shift-"+t),t}function xs(t,i){if(R&&34==t.keyCode&&t.char)return!1;var E=_n[t.keyCode];return null!=E&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(E=t.code),cl(E,t,i))}function Di(t){return"string"==typeof t?Fn[t]:t}function Xn(t,i){for(var E=t.doc.sel.ranges,L=[],M=0;M<E.length;M++){for(var U=i(E[M]);L.length&&Et(U.from,St(L).to)<=0;){var te=L.pop();if(Et(te.from,U.from)<0){U.from=te.from;break}}L.push(U)}Ur(t,function(){for(var ce=L.length-1;ce>=0;ce--)si(t.doc,"",L[ce].from,L[ce].to,"+delete");Ai(t)})}function wo(t,i,E){var L=Te(t.text,i+E,E);return L<0||L>t.text.length?null:L}function Ri(t,i,E){var L=wo(t,i.ch,E);return null==L?null:new it(i.line,L,E<0?"after":"before")}function ws(t,i,E,L,M){if(t){"rtl"==i.doc.direction&&(M=-M);var U=ue(E,i.doc.direction);if(U){var we,te=M<0?St(U):U[0],ve=M<0==(1==te.level)?"after":"before";if(te.level>0||"rtl"==i.doc.direction){var De=bi(i,E);we=M<0?E.text.length-1:0;var Ue=an(i,De,we).top;we=je(function(Ve){return an(i,De,Ve).top==Ue},M<0==(1==te.level)?te.from:te.to-1,we),"before"==ve&&(we=wo(E,we,1))}else we=M<0?te.to:te.from;return new it(L,we,ve)}}return new it(L,M<0?E.text.length:0,M<0?"before":"after")}Fn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Fn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Fn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Fn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Fn.default=oe?Fn.macDefault:Fn.pcDefault;var Bi={selectAll:ho,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),dt)},killLine:function(t){return Xn(t,function(i){if(i.empty()){var E=bt(t.doc,i.head.line).text.length;return i.head.ch==E&&i.head.line<t.lastLine()?{from:i.head,to:it(i.head.line+1,0)}:{from:i.head,to:it(i.head.line,E)}}return{from:i.from(),to:i.to()}})},deleteLine:function(t){return Xn(t,function(i){return{from:it(i.from().line,0),to:It(t.doc,it(i.to().line+1,0))}})},delLineLeft:function(t){return Xn(t,function(i){return{from:it(i.from().line,0),to:i.from()}})},delWrappedLineLeft:function(t){return Xn(t,function(i){var E=t.charCoords(i.head,"div").top+5;return{from:t.coordsChar({left:0,top:E},"div"),to:i.from()}})},delWrappedLineRight:function(t){return Xn(t,function(i){var E=t.charCoords(i.head,"div").top+5,L=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:E},"div");return{from:i.from(),to:L}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(it(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(it(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(i){return Co(t,i.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(i){return bo(t,i.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(i){return function bs(t,i){var E=bt(t.doc,i),L=function $u(t){for(var i;i=Ro(t);)t=i.find(1,!0).line;return t}(E);return L!=E&&(i=Xt(L)),ws(!0,t,E,i,-1)}(t,i.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(i){var E=t.cursorCoords(i.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:E},"div")},Lt)},goLineLeft:function(t){return t.extendSelectionsBy(function(i){var E=t.cursorCoords(i.head,"div").top+5;return t.coordsChar({left:0,top:E},"div")},Lt)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(i){var E=t.cursorCoords(i.head,"div").top+5,L=t.coordsChar({left:0,top:E},"div");return L.ch<t.getLine(L.line).search(/\S/)?bo(t,i.head):L},Lt)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var i=[],E=t.listSelections(),L=t.options.tabSize,M=0;M<E.length;M++){var U=E[M].from(),te=vt(t.getLine(U.line),U.ch,L);i.push(Wt(L-te%L))}t.replaceSelections(i)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Ur(t,function(){for(var i=t.listSelections(),E=[],L=0;L<i.length;L++)if(i[L].empty()){var M=i[L].head,U=bt(t.doc,M.line).text;if(U)if(M.ch==U.length&&(M=new it(M.line,M.ch-1)),M.ch>0)M=new it(M.line,M.ch+1),t.replaceRange(U.charAt(M.ch-1)+U.charAt(M.ch-2),it(M.line,M.ch-2),M,"+transpose");else if(M.line>t.doc.first){var te=bt(t.doc,M.line-1).text;te&&(M=new it(M.line,1),t.replaceRange(U.charAt(0)+t.doc.lineSeparator()+te.charAt(te.length-1),it(M.line-1,te.length-1),M,"+transpose"))}E.push(new Qt(M,M))}t.setSelections(E)})},newlineAndIndent:function(t){return Ur(t,function(){for(var i=t.listSelections(),E=i.length-1;E>=0;E--)t.replaceRange(t.doc.lineSeparator(),i[E].anchor,i[E].head,"+input");i=t.listSelections();for(var L=0;L<i.length;L++)t.indentLine(i[L].from().line,null,!0);Ai(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function Co(t,i){var E=bt(t.doc,i),L=Vr(E);return L!=E&&(i=Xt(L)),ws(!0,t,L,i,1)}function bo(t,i){var E=Co(t,i.line),L=bt(t.doc,E.line),M=ue(L,t.doc.direction);if(!M||0==M[0].level){var U=Math.max(E.ch,L.text.search(/\S/)),te=i.line==E.line&&i.ch<=U&&i.ch;return it(E.line,te?0:U,E.sticky)}return E}function ai(t,i,E){if("string"==typeof i&&!(i=Bi[i]))return!1;t.display.input.ensurePolled();var L=t.display.shift,M=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),E&&(t.display.shift=!1),M=i(t)!=ot}finally{t.display.shift=L,t.state.suppressEdits=!1}return M}var Qi=new Kt;function pn(t,i,E,L){var M=t.state.keySeq;if(M){if(xo(i))return"handled";if(/\'$/.test(i)?t.state.keySeq=null:Qi.set(50,function(){t.state.keySeq==M&&(t.state.keySeq=null,t.display.input.reset())}),fi(t,M+" "+i,E,L))return!0}return fi(t,i,E,L)}function fi(t,i,E,L){var M=function Pi(t,i,E){for(var L=0;L<t.state.keyMaps.length;L++){var M=Ln(i,t.state.keyMaps[L],E,t);if(M)return M}return t.options.extraKeys&&Ln(i,t.options.extraKeys,E,t)||Ln(i,t.options.keyMap,E,t)}(t,i,L);return"multi"==M&&(t.state.keySeq=i),"handled"==M&&gr(t,"keyHandled",t,i,E),("handled"==M||"multi"==M)&&(Oe(E),zo(t)),!!M}function hl(t,i){var E=xs(i,!0);return!!E&&(i.shiftKey&&!t.state.keySeq?pn(t,"Shift-"+E,i,function(L){return ai(t,L,!0)})||pn(t,E,i,function(L){if("string"==typeof L?/^go[A-Z]/.test(L):L.motion)return ai(t,L)}):pn(t,E,i,function(L){return ai(t,L)}))}var Ss=null;function pl(t){var i=this;if(!(t.target&&t.target!=i.display.input.getField()||(i.curOp.focus=me(),Ae(i,t)))){T&&_<11&&27==t.keyCode&&(t.returnValue=!1);var E=t.keyCode;i.display.shift=16==E||t.shiftKey;var L=hl(i,t);R&&(Ss=L?E:null,!L&&88==E&&!Lr&&(oe?t.metaKey:t.ctrlKey)&&i.replaceSelection("",null,"cut")),Be&&!oe&&!L&&46==E&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==E&&!/\bCodeMirror-crosshair\b/.test(i.display.lineDiv.className)&&function Iu(t){var i=t.display.lineDiv;function E(L){(18==L.keyCode||!L.altKey)&&(Se(i,"CodeMirror-crosshair"),xe(document,"keyup",E),xe(document,"mouseover",E))}_e(i,"CodeMirror-crosshair"),Z(document,"keyup",E),Z(document,"mouseover",E)}(i)}}function dl(t){16==t.keyCode&&(this.doc.sel.shift=!1),Ae(this,t)}function gl(t){var i=this;if(!(t.target&&t.target!=i.display.input.getField()||Sn(i.display,t)||Ae(i,t)||t.ctrlKey&&!t.altKey||oe&&t.metaKey)){var E=t.keyCode,L=t.charCode;if(R&&E==Ss)return Ss=null,void Oe(t);if(!R||t.which&&!(t.which<10)||!hl(i,t)){var M=String.fromCharCode(null==L?E:L);"\b"!=M&&(function Tu(t,i,E){return pn(t,"'"+E+"'",i,function(L){return ai(t,L,!0)})}(i,t,M)||i.display.input.onKeyPress(t))}}}var So,Hr,vl=function(t,i,E){this.time=t,this.pos=i,this.button=E};function Mu(t){var i=this,E=i.display;if(!(Ae(i,t)||E.activeTouch&&E.input.supportsTouch())){if(E.input.ensurePolled(),E.shift=t.shiftKey,Sn(E,t))return void(I||(E.scroller.draggable=!1,setTimeout(function(){return E.scroller.draggable=!0},100)));if(!ks(i,t)){var L=Dn(i,t),M=mt(t),U=L?function dn(t,i){var E=+new Date;return Hr&&Hr.compare(E,t,i)?(So=Hr=null,"triple"):So&&So.compare(E,t,i)?(Hr=new vl(E,t,i),So=null,"double"):(So=new vl(E,t,i),Hr=null,"single")}(L,M):"single";window.focus(),1==M&&i.state.selectingText&&i.state.selectingText(t),(!L||!function Ga(t,i,E,L,M){var U="Click";return"double"==L?U="Double"+U:"triple"==L&&(U="Triple"+U),pn(t,cl(U=(1==i?"Left":2==i?"Middle":"Right")+U,M),M,function(te){if("string"==typeof te&&(te=Bi[te]),!te)return!1;var ce=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),ce=te(t,E)!=ot}finally{t.state.suppressEdits=!1}return ce})}(i,M,L,U,t))&&(1==M?L?function Xa(t,i,E,L){T?setTimeout(st(oo,t),0):t.curOp.focus=me();var te,M=function Ha(t,i,E){var L=t.getOption("configureMouse"),M=L?L(t,i,E):{};if(null==M.unit){var U=he?E.shiftKey&&E.metaKey:E.altKey;M.unit=U?"rectangle":"single"==i?"char":"double"==i?"word":"line"}return(null==M.extend||t.doc.extend)&&(M.extend=t.doc.extend||E.shiftKey),null==M.addNew&&(M.addNew=oe?E.metaKey:E.ctrlKey),null==M.moveOnDrag&&(M.moveOnDrag=!(oe?E.altKey:E.ctrlKey)),M}(t,E,L),U=t.doc.sel;t.options.dragDrop&&wt&&!t.isReadOnly()&&"single"==E&&(te=U.contains(i))>-1&&(Et((te=U.ranges[te]).from(),i)<0||i.xRel>0)&&(Et(te.to(),i)>0||i.xRel<0)?function Wa(t,i,E,L){var M=t.display,U=!1,te=vr(t,function(we){I&&(M.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:Ko(t)),xe(M.wrapper.ownerDocument,"mouseup",te),xe(M.wrapper.ownerDocument,"mousemove",ce),xe(M.scroller,"dragstart",ve),xe(M.scroller,"drop",te),U||(Oe(we),L.addNew||as(t.doc,E,null,null,L.extend),I&&!G||T&&9==_?setTimeout(function(){M.wrapper.ownerDocument.body.focus({preventScroll:!0}),M.input.focus()},20):M.input.focus())}),ce=function(we){U=U||Math.abs(i.clientX-we.clientX)+Math.abs(i.clientY-we.clientY)>=10},ve=function(){return U=!0};I&&(M.scroller.draggable=!0),t.state.draggingText=te,te.copy=!L.moveOnDrag,Z(M.wrapper.ownerDocument,"mouseup",te),Z(M.wrapper.ownerDocument,"mousemove",ce),Z(M.scroller,"dragstart",ve),Z(M.scroller,"drop",te),t.state.delayingBlurEvent=!0,setTimeout(function(){return M.input.focus()},20),M.scroller.dragDrop&&M.scroller.dragDrop()}(t,L,i,M):function qa(t,i,E,L){T&&Ko(t);var M=t.display,U=t.doc;Oe(i);var te,ce,ve=U.sel,we=ve.ranges;if(L.addNew&&!L.extend?te=(ce=U.sel.contains(E))>-1?we[ce]:new Qt(E,E):(te=U.sel.primary(),ce=U.sel.primIndex),"rectangle"==L.unit)L.addNew||(te=new Qt(E,E)),E=Dn(t,i,!0,!0),ce=-1;else{var De=yl(t,E,L.unit);te=L.extend?sl(te,De.anchor,De.head,L.extend):De}L.addNew?-1==ce?(ce=we.length,xr(U,Yr(t,we.concat([te]),ce),{scroll:!1,origin:"*mouse"})):we.length>1&&we[ce].empty()&&"char"==L.unit&&!L.extend?(xr(U,Yr(t,we.slice(0,ce).concat(we.slice(ce+1)),0),{scroll:!1,origin:"*mouse"}),ve=U.sel):ll(U,ce,te,ht):(ce=0,xr(U,new Gr([te],0),ht),ve=U.sel);var Ue=E;function Ve(ft){if(0!=Et(Ue,ft))if(Ue=ft,"rectangle"==L.unit){for(var gt=[],Ft=t.options.tabSize,kt=vt(bt(U,E.line).text,E.ch,Ft),jt=vt(bt(U,ft.line).text,ft.ch,Ft),zt=Math.min(kt,jt),fr=Math.max(kt,jt),Yt=Math.min(E.line,ft.line),Dr=Math.min(t.lastLine(),Math.max(E.line,ft.line));Yt<=Dr;Yt++){var Rr=bt(U,Yt).text,rr=xt(Rr,zt,Ft);zt==fr?gt.push(new Qt(it(Yt,rr),it(Yt,rr))):Rr.length>rr&&gt.push(new Qt(it(Yt,rr),it(Yt,xt(Rr,fr,Ft))))}gt.length||gt.push(new Qt(E,E)),xr(U,Yr(t,ve.ranges.slice(0,ce).concat(gt),ce),{origin:"*mouse",scroll:!1}),t.scrollIntoView(ft)}else{var lr,Br=te,mr=yl(t,ft,L.unit),sr=Br.anchor;Et(mr.anchor,sr)>0?(lr=mr.head,sr=No(Br.from(),mr.anchor)):(lr=mr.anchor,sr=Io(Br.to(),mr.head));var Zt=ve.ranges.slice(0);Zt[ce]=function ju(t,i){var E=i.anchor,L=i.head,M=bt(t.doc,E.line);if(0==Et(E,L)&&E.sticky==L.sticky)return i;var U=ue(M);if(!U)return i;var te=z(U,E.ch,E.sticky),ce=U[te];if(ce.from!=E.ch&&ce.to!=E.ch)return i;var we,ve=te+(ce.from==E.ch==(1!=ce.level)?0:1);if(0==ve||ve==U.length)return i;if(L.line!=E.line)we=(L.line-E.line)*("ltr"==t.doc.direction?1:-1)>0;else{var De=z(U,L.ch,L.sticky),Ue=De-te||(L.ch-E.ch)*(1==ce.level?-1:1);we=De==ve-1||De==ve?Ue<0:Ue>0}var Ve=U[ve+(we?-1:0)],ze=we==(1==Ve.level),rt=ze?Ve.from:Ve.to,nt=ze?"after":"before";return E.ch==rt&&E.sticky==nt?i:new Qt(new it(E.line,rt,nt),L)}(t,new Qt(It(U,sr),lr)),xr(U,Yr(t,Zt,ce),ht)}}var ze=M.wrapper.getBoundingClientRect(),rt=0;function nt(ft){var gt=++rt,Ft=Dn(t,ft,!0,"rectangle"==L.unit);if(Ft)if(0!=Et(Ft,Ue)){t.curOp.focus=me(),Ve(Ft);var kt=Fi(M,U);(Ft.line>=kt.to||Ft.line<kt.from)&&setTimeout(vr(t,function(){rt==gt&&nt(ft)}),150)}else{var jt=ft.clientY<ze.top?-20:ft.clientY>ze.bottom?20:0;jt&&setTimeout(vr(t,function(){rt==gt&&(M.scroller.scrollTop+=jt,nt(ft))}),50)}}function lt(ft){t.state.selectingText=!1,rt=1/0,ft&&(Oe(ft),M.input.focus()),xe(M.wrapper.ownerDocument,"mousemove",at),xe(M.wrapper.ownerDocument,"mouseup",pt),U.history.lastSelOrigin=null}var at=vr(t,function(ft){0!==ft.buttons&&mt(ft)?nt(ft):lt(ft)}),pt=vr(t,lt);t.state.selectingText=pt,Z(M.wrapper.ownerDocument,"mousemove",at),Z(M.wrapper.ownerDocument,"mouseup",pt)}(t,L,i,M)}(i,L,U,t):_t(t)==E.scroller&&Oe(t):2==M?(L&&as(i.doc,L),setTimeout(function(){return E.input.focus()},20)):3==M&&(ee?i.display.input.onContextMenu(t):Ko(i)))}}}function yl(t,i,E){if("char"==E)return new Qt(i,i);if("word"==E)return t.findWordAt(i);if("line"==E)return new Qt(it(i.line,0),It(t.doc,it(i.line+1,0)));var L=E(t,i);return new Qt(L.from,L.to)}function Ou(t,i,E,L){var M,U;if(i.touches)M=i.touches[0].clientX,U=i.touches[0].clientY;else try{M=i.clientX,U=i.clientY}catch(Ve){return!1}if(M>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;L&&Oe(i);var te=t.display,ce=te.lineDiv.getBoundingClientRect();if(U>ce.bottom||!Ie(t,E))return et(i);U-=ce.top-te.viewOffset;for(var ve=0;ve<t.display.gutterSpecs.length;++ve){var we=te.gutters.childNodes[ve];if(we&&we.getBoundingClientRect().right>=M)return Fe(t,E,t,Yn(t.doc,U),t.display.gutterSpecs[ve].className,i),et(i)}}function ks(t,i){return Ou(t,i,"gutterClick",!0)}function Du(t,i){Sn(t.display,i)||function Ru(t,i){return!!Ie(t,"gutterContextMenu")&&Ou(t,i,"gutterContextMenu",!1)}(t,i)||Ae(t,i,"contextmenu")||ee||t.display.input.onContextMenu(i)}function Bu(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),$i(t)}vl.prototype.compare=function(t,i,E){return this.time+400>t&&0==Et(i,this.pos)&&E==this.button};var ci={toString:function(){return"CodeMirror.Init"}},Pu={},ko={};function Qu(t,i,E){if(!i!=!(E&&E!=ci)){var M=t.display.dragFunctions,U=i?Z:xe;U(t.display.scroller,"dragstart",M.start),U(t.display.scroller,"dragenter",M.enter),U(t.display.scroller,"dragover",M.over),U(t.display.scroller,"dragleave",M.leave),U(t.display.scroller,"drop",M.drop)}}function Ka(t){t.options.lineWrapping?(_e(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(Se(t.display.wrapper,"CodeMirror-wrap"),Nn(t)),Vs(t),Tr(t),$i(t),setTimeout(function(){return on(t)},100)}function Jt(t,i){var E=this;if(!(this instanceof Jt))return new Jt(t,i);this.options=i=i?yt(i):{},yt(Pu,i,!1);var L=i.value;"string"==typeof L?L=new Or(L,i.mode,null,i.lineSeparator,i.direction):i.mode&&(L.modeOption=i.mode),this.doc=L;var M=new Jt.inputStyles[i.inputStyle](this),U=this.display=new lu(t,L,M,i);for(var te in U.wrapper.CodeMirror=this,Bu(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),$o(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Kt,keySeq:null,specialChars:null},i.autofocus&&!re&&U.input.focus(),T&&_<11&&setTimeout(function(){return E.display.input.reset(!0)},20),function Ja(t){var i=t.display;Z(i.scroller,"mousedown",vr(t,Mu)),Z(i.scroller,"dblclick",T&&_<11?vr(t,function(ve){if(!Ae(t,ve)){var we=Dn(t,ve);if(we&&!ks(t,ve)&&!Sn(t.display,ve)){Oe(ve);var De=t.findWordAt(we);as(t.doc,De.anchor,De.head)}}}):function(ve){return Ae(t,ve)||Oe(ve)}),Z(i.scroller,"contextmenu",function(ve){return Du(t,ve)}),Z(i.input.getField(),"contextmenu",function(ve){i.scroller.contains(ve.target)||Du(t,ve)});var E,L={end:0};function M(){i.activeTouch&&(E=setTimeout(function(){return i.activeTouch=null},1e3),(L=i.activeTouch).end=+new Date)}function U(ve){if(1!=ve.touches.length)return!1;var we=ve.touches[0];return we.radiusX<=1&&we.radiusY<=1}function te(ve,we){if(null==we.left)return!0;var De=we.left-ve.left,Ue=we.top-ve.top;return De*De+Ue*Ue>400}Z(i.scroller,"touchstart",function(ve){if(!Ae(t,ve)&&!U(ve)&&!ks(t,ve)){i.input.ensurePolled(),clearTimeout(E);var we=+new Date;i.activeTouch={start:we,moved:!1,prev:we-L.end<=300?L:null},1==ve.touches.length&&(i.activeTouch.left=ve.touches[0].pageX,i.activeTouch.top=ve.touches[0].pageY)}}),Z(i.scroller,"touchmove",function(){i.activeTouch&&(i.activeTouch.moved=!0)}),Z(i.scroller,"touchend",function(ve){var we=i.activeTouch;if(we&&!Sn(i,ve)&&null!=we.left&&!we.moved&&new Date-we.start<300){var Ue,De=t.coordsChar(i.activeTouch,"page");Ue=!we.prev||te(we,we.prev)?new Qt(De,De):!we.prev.prev||te(we,we.prev.prev)?t.findWordAt(De):new Qt(it(De.line,0),It(t.doc,it(De.line+1,0))),t.setSelection(Ue.anchor,Ue.head),t.focus(),Oe(ve)}M()}),Z(i.scroller,"touchcancel",M),Z(i.scroller,"scroll",function(){i.scroller.clientHeight&&(so(t,i.scroller.scrollTop),ri(t,i.scroller.scrollLeft,!0),Fe(t,"scroll",t))}),Z(i.scroller,"mousewheel",function(ve){return ao(t,ve)}),Z(i.scroller,"DOMMouseScroll",function(ve){return ao(t,ve)}),Z(i.wrapper,"scroll",function(){return i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),i.dragFunctions={enter:function(ve){Ae(t,ve)||Je(ve)},over:function(ve){Ae(t,ve)||(function Ba(t,i){var E=Dn(t,i);if(E){var L=document.createDocumentFragment();ki(t,E,L),t.display.dragCursor||(t.display.dragCursor=Qe("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),Ne(t.display.dragCursor,L)}}(t,ve),Je(ve))},start:function(ve){return function Ra(t,i){if(T&&(!t.state.draggingText||+new Date-Fu<100))Je(i);else if(!Ae(t,i)&&!Sn(t.display,i)&&(i.dataTransfer.setData("Text",t.getSelection()),i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setDragImage&&!G)){var E=Qe("img",null,null,"position: fixed; left: 0; top: 0;");E.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",R&&(E.width=E.height=1,t.display.wrapper.appendChild(E),E._top=E.offsetTop),i.dataTransfer.setDragImage(E,0,0),R&&E.parentNode.removeChild(E)}}(t,ve)},drop:vr(t,Da),leave:function(ve){Ae(t,ve)||Lu(t)}};var ce=i.input.getField();Z(ce,"keyup",function(ve){return dl.call(t,ve)}),Z(ce,"keydown",vr(t,pl)),Z(ce,"keypress",vr(t,gl)),Z(ce,"focus",function(ve){return _i(t,ve)}),Z(ce,"blur",function(ve){return ei(t,ve)})}(this),Pa(),Pn(this),this.curOp.forceUpdate=!0,cu(this,L),i.autofocus&&!re||this.hasFocus()?setTimeout(function(){E.hasFocus()&&!E.state.focused&&_i(E)},20):ei(this),ko)ko.hasOwnProperty(te)&&ko[te](this,i[te],ci);ou(this),i.finishInit&&i.finishInit(this);for(var ce=0;ce<_s.length;++ce)_s[ce](this);oi(this),I&&i.lineWrapping&&"optimizelegibility"==getComputedStyle(U.lineDiv).textRendering&&(U.lineDiv.style.textRendering="auto")}Jt.defaults=Pu,Jt.optionHandlers=ko;var _s=[];function _o(t,i,E,L){var U,M=t.doc;null==E&&(E="add"),"smart"==E&&(M.mode.indent?U=yi(t,i).state:E="prev");var te=t.options.tabSize,ce=bt(M,i),ve=vt(ce.text,null,te);ce.stateAfter&&(ce.stateAfter=null);var De,we=ce.text.match(/^\s*/)[0];if(L||/\S/.test(ce.text)){if("smart"==E&&((De=M.mode.indent(U,ce.text.slice(we.length),ce.text))==ot||De>150)){if(!L)return;E="prev"}}else De=0,E="not";"prev"==E?De=i>M.first?vt(bt(M,i-1).text,null,te):0:"add"==E?De=ve+t.options.indentUnit:"subtract"==E?De=ve-t.options.indentUnit:"number"==typeof E&&(De=ve+E),De=Math.max(0,De);var Ue="",Ve=0;if(t.options.indentWithTabs)for(var ze=Math.floor(De/te);ze;--ze)Ve+=te,Ue+="\t";if(Ve<De&&(Ue+=Wt(De-Ve)),Ue!=we)return si(M,Ue,it(i,0),it(i,we.length),"+input"),ce.stateAfter=null,!0;for(var rt=0;rt<M.sel.ranges.length;rt++){var nt=M.sel.ranges[rt];if(nt.head.line==i&&nt.head.ch<we.length){var lt=it(i,we.length);ll(M,rt,new Qt(lt,lt));break}}}Jt.defineInitHook=function(t){return _s.push(t)};var en=null;function Fs(t){en=t}function Ls(t,i,E,L,M){var U=t.doc;t.display.shift=!1,L||(L=U.sel);var te=+new Date-200,ce="paste"==M||t.state.pasteIncoming>te,ve=pr(i),we=null;if(ce&&L.ranges.length>1)if(en&&en.text.join("\n")==i){if(L.ranges.length%en.text.length==0){we=[];for(var De=0;De<en.text.length;De++)we.push(U.splitLines(en.text[De]))}}else ve.length==L.ranges.length&&t.options.pasteLinesPerSelection&&(we=_r(ve,function(at){return[at]}));for(var Ue=t.curOp.updateInput,Ve=L.ranges.length-1;Ve>=0;Ve--){var ze=L.ranges[Ve],rt=ze.from(),nt=ze.to();ze.empty()&&(E&&E>0?rt=it(rt.line,rt.ch-E):t.state.overwrite&&!ce?nt=it(nt.line,Math.min(bt(U,nt.line).text.length,nt.ch+St(ve).length)):ce&&en&&en.lineWise&&en.text.join("\n")==ve.join("\n")&&(rt=nt=it(rt.line,0)));var lt={from:rt,to:nt,text:we?we[Ve%we.length]:ve,origin:M||(ce?"paste":t.state.cutIncoming>te?"cut":"+input")};Mi(t.doc,lt),gr(t,"inputRead",t,lt)}i&&!ce&&ml(t,i),Ai(t),t.curOp.updateInput<2&&(t.curOp.updateInput=Ue),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Uu(t,i){var E=t.clipboardData&&t.clipboardData.getData("Text");if(E)return t.preventDefault(),!i.isReadOnly()&&!i.options.disableInput&&i.hasFocus()&&Ur(i,function(){return Ls(i,E,0,null,"paste")}),!0}function ml(t,i){if(t.options.electricChars&&t.options.smartIndent)for(var E=t.doc.sel,L=E.ranges.length-1;L>=0;L--){var M=E.ranges[L];if(!(M.head.ch>100||L&&E.ranges[L-1].head.line==M.head.line)){var U=t.getModeAt(M.head),te=!1;if(U.electricChars){for(var ce=0;ce<U.electricChars.length;ce++)if(i.indexOf(U.electricChars.charAt(ce))>-1){te=_o(t,M.head.line,"smart");break}}else U.electricInput&&U.electricInput.test(bt(t.doc,M.head.line).text.slice(0,M.head.ch))&&(te=_o(t,M.head.line,"smart"));te&&gr(t,"electricInput",t,M.head.line)}}}function Gu(t){for(var i=[],E=[],L=0;L<t.doc.sel.ranges.length;L++){var M=t.doc.sel.ranges[L].head.line,U={anchor:it(M,0),head:it(M+1,0)};E.push(U),i.push(t.getRange(U.anchor,U.head))}return{text:i,ranges:E}}function xl(t,i,E,L){t.setAttribute("autocorrect",E?"":"off"),t.setAttribute("autocapitalize",L?"":"off"),t.setAttribute("spellcheck",!!i)}function Hu(){var t=Qe("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),i=Qe("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return I?t.style.width="1000px":t.setAttribute("wrap","off"),fe&&(t.style.border="1px solid black"),xl(t),i}function wl(t,i,E,L,M){var U=i,te=E,ce=bt(t,i.line),ve=M&&"rtl"==t.direction?-E:E;function De(pt){var ft;if("codepoint"==L){var gt=ce.text.charCodeAt(i.ch+(E>0?0:-1));if(isNaN(gt))ft=null;else{var Ft=E>0?gt>=55296&&gt<56320:gt>=56320&&gt<57343;ft=new it(i.line,Math.max(0,Math.min(ce.text.length,i.ch+E*(Ft?2:1))),-E)}}else ft=M?function Cs(t,i,E,L){var M=ue(i,t.doc.direction);if(!M)return Ri(i,E,L);E.ch>=i.text.length?(E.ch=i.text.length,E.sticky="before"):E.ch<=0&&(E.ch=0,E.sticky="after");var U=z(M,E.ch,E.sticky),te=M[U];if("ltr"==t.doc.direction&&te.level%2==0&&(L>0?te.to>E.ch:te.from<E.ch))return Ri(i,E,L);var ve,ce=function(at,pt){return wo(i,at instanceof it?at.ch:at,pt)},we=function(at){return t.options.lineWrapping?(ve=ve||bi(t,i),Ks(t,i,ve,at)):{begin:0,end:i.text.length}},De=we("before"==E.sticky?ce(E,-1):E.ch);if("rtl"==t.doc.direction||1==te.level){var Ue=1==te.level==L<0,Ve=ce(E,Ue?1:-1);if(null!=Ve&&(Ue?Ve<=te.to&&Ve<=De.end:Ve>=te.from&&Ve>=De.begin)){var ze=Ue?"before":"after";return new it(E.line,Ve,ze)}}var rt=function(at,pt,ft){for(;at>=0&&at<M.length;at+=pt){var Ft=M[at],kt=pt>0==(1!=Ft.level),jt=kt?ft.begin:ce(ft.end,-1);if(Ft.from<=jt&&jt<Ft.to||(jt=kt?Ft.from:ce(Ft.to,-1),ft.begin<=jt&&jt<ft.end))return zt=jt,kt?new it(E.line,ce(zt,1),"before"):new it(E.line,zt,"after")}var zt},nt=rt(U+L,L,De);if(nt)return nt;var lt=L>0?De.end:ce(De.begin,-1);return null==lt||L>0&&lt==i.text.length||!(nt=rt(L>0?0:M.length-1,L,we(lt)))?null:nt}(t.cm,ce,i,E):Ri(ce,i,E);if(null==ft){if(pt||!function we(){var pt=i.line+ve;return!(pt<t.first||pt>=t.first+t.size)&&(i=new it(pt,i.ch,i.sticky),ce=bt(t,pt))}())return!1;i=ws(M,t.cm,ce,i.line,ve)}else i=ft;return!0}if("char"==L||"codepoint"==L)De();else if("column"==L)De(!0);else if("word"==L||"group"==L)for(var Ue=null,Ve="group"==L,ze=t.cm&&t.cm.getHelper(i,"wordChars"),rt=!0;!(E<0)||De(!rt);rt=!1){var nt=ce.text.charAt(i.ch)||"\n",lt=Ke(nt,ze)?"w":Ve&&"\n"==nt?"n":!Ve||/\s/.test(nt)?null:"p";if(Ve&&!rt&&!lt&&(lt="s"),Ue&&Ue!=lt){E<0&&(E=1,De(),i.sticky="after");break}if(lt&&(Ue=lt),E>0&&!De(!rt))break}var at=hs(t,i,U,te,!0);return As(U,at)&&(at.hitSide=!0),at}function Cl(t,i,E,L){var te,we,M=t.doc,U=i.left;if("page"==L){var ce=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),ve=Math.max(ce-.5*Si(t.display),3);te=(E>0?i.bottom:i.top)+E*ve}else"line"==L&&(te=E>0?i.bottom+3:i.top-3);for(;(we=Xo(t,U,te)).outside;){if(E<0?te<=0:te>=M.height){we.hitSide=!0;break}te+=5*E}return we}var qt=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Kt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function bl(t,i){var E=Uo(t,i.line);if(!E||E.hidden)return null;var L=bt(t.doc,i.line),M=Hs(E,L,i.line),U=ue(L,t.doc.direction),te="left";U&&(te=z(U,i.ch)%2?"right":"left");var ve=Xs(M.map,i.ch,te);return ve.offset="right"==ve.collapse?ve.end:ve.start,ve}function hi(t,i){return i&&(t.bad=!0),t}function Fo(t,i,E){var L;if(i==t.display.lineDiv){if(!(L=t.display.lineDiv.childNodes[E]))return hi(t.clipPos(it(t.display.viewTo-1)),!0);i=null,E=0}else for(L=i;;L=L.parentNode){if(!L||L==t.display.lineDiv)return null;if(L.parentNode&&L.parentNode==t.display.lineDiv)break}for(var M=0;M<t.display.view.length;M++){var U=t.display.view[M];if(U.node==L)return Za(U,i,E)}}function Za(t,i,E){var L=t.text.firstChild,M=!1;if(!i||!se(L,i))return hi(it(Xt(t.line),0),!0);if(i==L&&(M=!0,i=L.childNodes[E],E=0,!i)){var U=t.rest?St(t.rest):t.line;return hi(it(Xt(U),U.text.length),M)}var te=3==i.nodeType?i:null,ce=i;for(!te&&1==i.childNodes.length&&3==i.firstChild.nodeType&&(te=i.firstChild,E&&(E=te.nodeValue.length));ce.parentNode!=L;)ce=ce.parentNode;var ve=t.measure,we=ve.maps;function De(lt,at,pt){for(var ft=-1;ft<(we?we.length:0);ft++)for(var gt=ft<0?ve.map:we[ft],Ft=0;Ft<gt.length;Ft+=3){var kt=gt[Ft+2];if(kt==lt||kt==at){var jt=Xt(ft<0?t.line:t.rest[ft]),zt=gt[Ft]+pt;return(pt<0||kt!=lt)&&(zt=gt[Ft+(pt?1:0)]),it(jt,zt)}}}var Ue=De(te,ce,E);if(Ue)return hi(Ue,M);for(var Ve=ce.nextSibling,ze=te?te.nodeValue.length-E:0;Ve;Ve=Ve.nextSibling){if(Ue=De(Ve,Ve.firstChild,0))return hi(it(Ue.line,Ue.ch-ze),M);ze+=Ve.textContent.length}for(var rt=ce.previousSibling,nt=E;rt;rt=rt.previousSibling){if(Ue=De(rt,rt.firstChild,-1))return hi(it(Ue.line,Ue.ch+nt),M);nt+=rt.textContent.length}}qt.prototype.init=function(t){var i=this,E=this,L=E.cm,M=E.div=t.lineDiv;function U(ce){for(var ve=ce.target;ve;ve=ve.parentNode){if(ve==M)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(ve.className))break}return!1}function te(ce){if(U(ce)&&!Ae(L,ce)){if(L.somethingSelected())Fs({lineWise:!1,text:L.getSelections()}),"cut"==ce.type&&L.replaceSelection("",null,"cut");else{if(!L.options.lineWiseCopyCut)return;var ve=Gu(L);Fs({lineWise:!0,text:ve.text}),"cut"==ce.type&&L.operation(function(){L.setSelections(ve.ranges,0,dt),L.replaceSelection("",null,"cut")})}if(ce.clipboardData){ce.clipboardData.clearData();var we=en.text.join("\n");if(ce.clipboardData.setData("Text",we),ce.clipboardData.getData("Text")==we)return void ce.preventDefault()}var De=Hu(),Ue=De.firstChild;L.display.lineSpace.insertBefore(De,L.display.lineSpace.firstChild),Ue.value=en.text.join("\n");var Ve=me();Ze(Ue),setTimeout(function(){L.display.lineSpace.removeChild(De),Ve.focus(),Ve==M&&E.showPrimarySelection()},50)}}M.contentEditable=!0,xl(M,L.options.spellcheck,L.options.autocorrect,L.options.autocapitalize),Z(M,"paste",function(ce){!U(ce)||Ae(L,ce)||Uu(ce,L)||_<=11&&setTimeout(vr(L,function(){return i.updateFromDOM()}),20)}),Z(M,"compositionstart",function(ce){i.composing={data:ce.data,done:!1}}),Z(M,"compositionupdate",function(ce){i.composing||(i.composing={data:ce.data,done:!1})}),Z(M,"compositionend",function(ce){i.composing&&(ce.data!=i.composing.data&&i.readFromDOMSoon(),i.composing.done=!0)}),Z(M,"touchstart",function(){return E.forceCompositionEnd()}),Z(M,"input",function(){i.composing||i.readFromDOMSoon()}),Z(M,"copy",te),Z(M,"cut",te)},qt.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},qt.prototype.prepareSelection=function(){var t=Zl(this.cm,!1);return t.focus=me()==this.div,t},qt.prototype.showSelection=function(t,i){!t||!this.cm.display.view.length||((t.focus||i)&&this.showPrimarySelection(),this.showMultipleSelections(t))},qt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},qt.prototype.showPrimarySelection=function(){var t=this.getSelection(),i=this.cm,E=i.doc.sel.primary(),L=E.from(),M=E.to();if(i.display.viewTo==i.display.viewFrom||L.line>=i.display.viewTo||M.line<i.display.viewFrom)t.removeAllRanges();else{var U=Fo(i,t.anchorNode,t.anchorOffset),te=Fo(i,t.focusNode,t.focusOffset);if(!U||U.bad||!te||te.bad||0!=Et(No(U,te),L)||0!=Et(Io(U,te),M)){var ce=i.display.view,ve=L.line>=i.display.viewFrom&&bl(i,L)||{node:ce[0].measure.map[2],offset:0},we=M.line<i.display.viewTo&&bl(i,M);if(!we){var De=ce[ce.length-1].measure,Ue=De.maps?De.maps[De.maps.length-1]:De.map;we={node:Ue[Ue.length-1],offset:Ue[Ue.length-2]-Ue[Ue.length-3]}}if(!ve||!we)return void t.removeAllRanges();var ze,Ve=t.rangeCount&&t.getRangeAt(0);try{ze=ke(ve.node,ve.offset,we.offset,we.node)}catch(rt){}ze&&(!Be&&i.state.focused?(t.collapse(ve.node,ve.offset),ze.collapsed||(t.removeAllRanges(),t.addRange(ze))):(t.removeAllRanges(),t.addRange(ze)),Ve&&null==t.anchorNode?t.addRange(Ve):Be&&this.startGracePeriod()),this.rememberSelection()}}},qt.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},qt.prototype.showMultipleSelections=function(t){Ne(this.cm.display.cursorDiv,t.cursors),Ne(this.cm.display.selectionDiv,t.selection)},qt.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},qt.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var i=t.getRangeAt(0).commonAncestorContainer;return se(this.div,i)},qt.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||me()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},qt.prototype.blur=function(){this.div.blur()},qt.prototype.getField=function(){return this.div},qt.prototype.supportsTouch=function(){return!0},qt.prototype.receivedFocus=function(){var t=this,i=this;this.selectionInEditor()?setTimeout(function(){return t.pollSelection()},20):Ur(this.cm,function(){return i.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function E(){i.cm.state.focused&&(i.pollSelection(),i.polling.set(i.cm.options.pollInterval,E))})},qt.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},qt.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),i=this.cm;if(ne&&O&&this.cm.display.gutterSpecs.length&&function Va(t){for(var i=t;i;i=i.parentNode)if(/CodeMirror-gutter-wrapper/.test(i.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var E=Fo(i,t.anchorNode,t.anchorOffset),L=Fo(i,t.focusNode,t.focusOffset);E&&L&&Ur(i,function(){xr(i.doc,Qn(E,L),dt),(E.bad||L.bad)&&(i.curOp.selectionChanged=!0)})}}},qt.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var U,te,ce,t=this.cm,i=t.display,E=t.doc.sel.primary(),L=E.from(),M=E.to();if(0==L.ch&&L.line>t.firstLine()&&(L=it(L.line-1,bt(t.doc,L.line-1).length)),M.ch==bt(t.doc,M.line).text.length&&M.line<t.lastLine()&&(M=it(M.line+1,0)),L.line<i.viewFrom||M.line>i.viewTo-1)return!1;L.line==i.viewFrom||0==(U=$n(t,L.line))?(te=Xt(i.view[0].line),ce=i.view[0].node):(te=Xt(i.view[U].line),ce=i.view[U-1].node.nextSibling);var we,De,ve=$n(t,M.line);if(ve==i.view.length-1?(we=i.viewTo-1,De=i.lineDiv.lastChild):(we=Xt(i.view[ve+1].line)-1,De=i.view[ve+1].node.previousSibling),!ce)return!1;for(var Ue=t.doc.splitLines(function Ya(t,i,E,L,M){var U="",te=!1,ce=t.doc.lineSeparator(),ve=!1;function we(ze){return function(rt){return rt.id==ze}}function De(){te&&(U+=ce,ve&&(U+=ce),te=ve=!1)}function Ue(ze){ze&&(De(),U+=ze)}function Ve(ze){if(1==ze.nodeType){var rt=ze.getAttribute("cm-text");if(rt)return void Ue(rt);var lt,nt=ze.getAttribute("cm-marker");if(nt){var at=t.findMarks(it(L,0),it(M+1,0),we(+nt));return void(at.length&&(lt=at[0].find(0))&&Ue(Vn(t.doc,lt.from,lt.to).join(ce)))}if("false"==ze.getAttribute("contenteditable"))return;var pt=/^(pre|div|p|li|table|br)$/i.test(ze.nodeName);if(!/^br$/i.test(ze.nodeName)&&0==ze.textContent.length)return;pt&&De();for(var ft=0;ft<ze.childNodes.length;ft++)Ve(ze.childNodes[ft]);/^(pre|p)$/i.test(ze.nodeName)&&(ve=!0),pt&&(te=!0)}else 3==ze.nodeType&&Ue(ze.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ve(i),i!=E;)i=i.nextSibling,ve=!1;return U}(t,ce,De,te,we)),Ve=Vn(t.doc,it(te,0),it(we,bt(t.doc,we).text.length));Ue.length>1&&Ve.length>1;)if(St(Ue)==St(Ve))Ue.pop(),Ve.pop(),we--;else{if(Ue[0]!=Ve[0])break;Ue.shift(),Ve.shift(),te++}for(var ze=0,rt=0,nt=Ue[0],lt=Ve[0],at=Math.min(nt.length,lt.length);ze<at&&nt.charCodeAt(ze)==lt.charCodeAt(ze);)++ze;for(var pt=St(Ue),ft=St(Ve),gt=Math.min(pt.length-(1==Ue.length?ze:0),ft.length-(1==Ve.length?ze:0));rt<gt&&pt.charCodeAt(pt.length-rt-1)==ft.charCodeAt(ft.length-rt-1);)++rt;if(1==Ue.length&&1==Ve.length&&te==L.line)for(;ze&&ze>L.ch&&pt.charCodeAt(pt.length-rt-1)==ft.charCodeAt(ft.length-rt-1);)ze--,rt++;Ue[Ue.length-1]=pt.slice(0,pt.length-rt).replace(/^\u200b+/,""),Ue[0]=Ue[0].slice(ze).replace(/\u200b+$/,"");var Ft=it(te,ze),kt=it(we,Ve.length?St(Ve).length-rt:0);return Ue.length>1||Ue[0]||Et(Ft,kt)?(si(t.doc,Ue,Ft,kt,"+input"),!0):void 0},qt.prototype.ensurePolled=function(){this.forceCompositionEnd()},qt.prototype.reset=function(){this.forceCompositionEnd()},qt.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},qt.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},qt.prototype.updateFromDOM=function(){var t=this;(this.cm.isReadOnly()||!this.pollContent())&&Ur(this.cm,function(){return Tr(t.cm)})},qt.prototype.setUneditable=function(t){t.contentEditable="false"},qt.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||vr(this.cm,Ls)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},qt.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},qt.prototype.onContextMenu=function(){},qt.prototype.resetPosition=function(){},qt.prototype.needsContentAttribute=!0;var er=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new Kt,this.hasSelection=!1,this.composing=null};er.prototype.init=function(t){var i=this,E=this,L=this.cm;this.createField(t);var M=this.textarea;function U(te){if(!Ae(L,te)){if(L.somethingSelected())Fs({lineWise:!1,text:L.getSelections()});else{if(!L.options.lineWiseCopyCut)return;var ce=Gu(L);Fs({lineWise:!0,text:ce.text}),"cut"==te.type?L.setSelections(ce.ranges,null,dt):(E.prevInput="",M.value=ce.text.join("\n"),Ze(M))}"cut"==te.type&&(L.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),fe&&(M.style.width="0px"),Z(M,"input",function(){T&&_>=9&&i.hasSelection&&(i.hasSelection=null),E.poll()}),Z(M,"paste",function(te){Ae(L,te)||Uu(te,L)||(L.state.pasteIncoming=+new Date,E.fastPoll())}),Z(M,"cut",U),Z(M,"copy",U),Z(t.scroller,"paste",function(te){if(!Sn(t,te)&&!Ae(L,te)){if(!M.dispatchEvent)return L.state.pasteIncoming=+new Date,void E.focus();var ce=new Event("paste");ce.clipboardData=te.clipboardData,M.dispatchEvent(ce)}}),Z(t.lineSpace,"selectstart",function(te){Sn(t,te)||Oe(te)}),Z(M,"compositionstart",function(){var te=L.getCursor("from");E.composing&&E.composing.range.clear(),E.composing={start:te,range:L.markText(te,L.getCursor("to"),{className:"CodeMirror-composing"})}}),Z(M,"compositionend",function(){E.composing&&(E.poll(),E.composing.range.clear(),E.composing=null)})},er.prototype.createField=function(t){this.wrapper=Hu(),this.textarea=this.wrapper.firstChild},er.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},er.prototype.prepareSelection=function(){var t=this.cm,i=t.display,E=t.doc,L=Zl(t);if(t.options.moveInputWithCursor){var M=rn(t,E.sel.primary().head,"div"),U=i.wrapper.getBoundingClientRect(),te=i.lineDiv.getBoundingClientRect();L.teTop=Math.max(0,Math.min(i.wrapper.clientHeight-10,M.top+te.top-U.top)),L.teLeft=Math.max(0,Math.min(i.wrapper.clientWidth-10,M.left+te.left-U.left))}return L},er.prototype.showSelection=function(t){var E=this.cm.display;Ne(E.cursorDiv,t.cursors),Ne(E.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},er.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var i=this.cm;if(i.somethingSelected()){this.prevInput="";var E=i.getSelection();this.textarea.value=E,i.state.focused&&Ze(this.textarea),T&&_>=9&&(this.hasSelection=E)}else t||(this.prevInput=this.textarea.value="",T&&_>=9&&(this.hasSelection=null))}},er.prototype.getField=function(){return this.textarea},er.prototype.supportsTouch=function(){return!1},er.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!re||me()!=this.textarea))try{this.textarea.focus()}catch(t){}},er.prototype.blur=function(){this.textarea.blur()},er.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},er.prototype.receivedFocus=function(){this.slowPoll()},er.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},er.prototype.fastPoll=function(){var t=!1,i=this;i.pollingFast=!0,i.polling.set(20,function E(){i.poll()||t?(i.pollingFast=!1,i.slowPoll()):(t=!0,i.polling.set(60,E))})},er.prototype.poll=function(){var t=this,i=this.cm,E=this.textarea,L=this.prevInput;if(this.contextMenuPending||!i.state.focused||Mr(E)&&!L&&!this.composing||i.isReadOnly()||i.options.disableInput||i.state.keySeq)return!1;var M=E.value;if(M==L&&!i.somethingSelected())return!1;if(T&&_>=9&&this.hasSelection===M||oe&&/[\uf700-\uf7ff]/.test(M))return i.display.input.reset(),!1;if(i.doc.sel==i.display.selForContextMenu){var U=M.charCodeAt(0);if(8203==U&&!L&&(L="\u200b"),8666==U)return this.reset(),this.cm.execCommand("undo")}for(var te=0,ce=Math.min(L.length,M.length);te<ce&&L.charCodeAt(te)==M.charCodeAt(te);)++te;return Ur(i,function(){Ls(i,M.slice(te),L.length-te,null,t.composing?"*compose":null),M.length>1e3||M.indexOf("\n")>-1?E.value=t.prevInput="":t.prevInput=M,t.composing&&(t.composing.range.clear(),t.composing.range=i.markText(t.composing.start,i.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},er.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},er.prototype.onKeyPress=function(){T&&_>=9&&(this.hasSelection=null),this.fastPoll()},er.prototype.onContextMenu=function(t){var i=this,E=i.cm,L=E.display,M=i.textarea;i.contextMenuPending&&i.contextMenuPending();var U=Dn(E,t),te=L.scroller.scrollTop;if(U&&!R){E.options.resetSelectionOnContextMenu&&-1==E.doc.sel.contains(U)&&vr(E,xr)(E.doc,Qn(U),dt);var Ue,ve=M.style.cssText,we=i.wrapper.style.cssText,De=i.wrapper.offsetParent.getBoundingClientRect();if(i.wrapper.style.cssText="position: static",M.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-De.top-5)+"px; left: "+(t.clientX-De.left-5)+"px;\n      z-index: 1000; background: "+(T?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",I&&(Ue=window.scrollY),L.input.focus(),I&&window.scrollTo(null,Ue),L.input.reset(),E.somethingSelected()||(M.value=i.prevInput=" "),i.contextMenuPending=ze,L.selForContextMenu=E.doc.sel,clearTimeout(L.detectingSelectAll),T&&_>=9&&Ve(),ee){Je(t);var rt=function(){xe(window,"mouseup",rt),setTimeout(ze,20)};Z(window,"mouseup",rt)}else setTimeout(ze,50)}function Ve(){if(null!=M.selectionStart){var nt=E.somethingSelected(),lt="\u200b"+(nt?M.value:"");M.value="\u21da",M.value=lt,i.prevInput=nt?"":"\u200b",M.selectionStart=1,M.selectionEnd=lt.length,L.selForContextMenu=E.doc.sel}}function ze(){if(i.contextMenuPending==ze&&(i.contextMenuPending=!1,i.wrapper.style.cssText=we,M.style.cssText=ve,T&&_<9&&L.scrollbars.setScrollTop(L.scroller.scrollTop=te),null!=M.selectionStart)){(!T||T&&_<9)&&Ve();var nt=0,lt=function(){L.selForContextMenu==E.doc.sel&&0==M.selectionStart&&M.selectionEnd>0&&"\u200b"==i.prevInput?vr(E,ho)(E):nt++<10?L.detectingSelectAll=setTimeout(lt,500):(L.selForContextMenu=null,L.input.reset())};L.detectingSelectAll=setTimeout(lt,200)}}},er.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},er.prototype.setUneditable=function(){},er.prototype.needsContentAttribute=!1,function za(t){var i=t.optionHandlers;function E(L,M,U,te){t.defaults[L]=M,U&&(i[L]=te?function(ce,ve,we){we!=ci&&U(ce,ve,we)}:U)}t.defineOption=E,t.Init=ci,E("value","",function(L,M){return L.setValue(M)},!0),E("mode",null,function(L,M){L.doc.modeOption=M,ss(L)},!0),E("indentUnit",2,ss,!0),E("indentWithTabs",!1),E("smartIndent",!0),E("tabSize",4,function(L){fo(L),$i(L),Tr(L)},!0),E("lineSeparator",null,function(L,M){if(L.doc.lineSep=M,M){var U=[],te=L.doc.first;L.doc.iter(function(ve){for(var we=0;;){var De=ve.text.indexOf(M,we);if(-1==De)break;we=De+M.length,U.push(it(te,De))}te++});for(var ce=U.length-1;ce>=0;ce--)si(L.doc,M,U[ce],it(U[ce].line,U[ce].ch+M.length))}}),E("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(L,M,U){L.state.specialChars=new RegExp(M.source+(M.test("\t")?"":"|\t"),"g"),U!=ci&&L.refresh()}),E("specialCharPlaceholder",Dl,function(L){return L.refresh()},!0),E("electricChars",!0),E("inputStyle",re?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),E("spellcheck",!1,function(L,M){return L.getInputField().spellcheck=M},!0),E("autocorrect",!1,function(L,M){return L.getInputField().autocorrect=M},!0),E("autocapitalize",!1,function(L,M){return L.getInputField().autocapitalize=M},!0),E("rtlMoveVisually",!pe),E("wholeLineUpdateBefore",!0),E("theme","default",function(L){Bu(L),uo(L)},!0),E("keyMap","default",function(L,M,U){var te=Di(M),ce=U!=ci&&Di(U);ce&&ce.detach&&ce.detach(L,te),te.attach&&te.attach(L,ce||null)}),E("extraKeys",null),E("configureMouse",null),E("lineWrapping",!1,Ka,!0),E("gutters",[],function(L,M){L.display.gutterSpecs=ns(M,L.options.lineNumbers),uo(L)},!0),E("fixedGutter",!0,function(L,M){L.display.gutters.style.left=M?On(L.display)+"px":"0",L.refresh()},!0),E("coverGutterNextToScrollbar",!1,function(L){return on(L)},!0),E("scrollbarStyle","native",function(L){$o(L),on(L),L.display.scrollbars.setScrollTop(L.doc.scrollTop),L.display.scrollbars.setScrollLeft(L.doc.scrollLeft)},!0),E("lineNumbers",!1,function(L,M){L.display.gutterSpecs=ns(L.options.gutters,M),uo(L)},!0),E("firstLineNumber",1,uo,!0),E("lineNumberFormatter",function(L){return L},uo,!0),E("showCursorWhenSelecting",!1,no,!0),E("resetSelectionOnContextMenu",!0),E("lineWiseCopyCut",!0),E("pasteLinesPerSelection",!0),E("selectionsMayTouch",!1),E("readOnly",!1,function(L,M){"nocursor"==M&&(ei(L),L.display.input.blur()),L.display.input.readOnlyChanged(M)}),E("screenReaderLabel",null,function(L,M){M=""===M?null:M,L.display.input.screenReaderLabelChanged(M)}),E("disableInput",!1,function(L,M){M||L.display.input.reset()},!0),E("dragDrop",!0,Qu),E("allowDropFileTypes",null),E("cursorBlinkRate",530),E("cursorScrollMargin",0),E("cursorHeight",1,no,!0),E("singleCursorHeightPerLine",!0,no,!0),E("workTime",100),E("workDelay",100),E("flattenSpans",!0,fo,!0),E("addModeClass",!1,fo,!0),E("pollInterval",100),E("undoDepth",200,function(L,M){return L.doc.history.undoDepth=M}),E("historyEventDelay",1250),E("viewportMargin",10,function(L){return L.refresh()},!0),E("maxHighlightLength",1e4,fo,!0),E("moveInputWithCursor",!0,function(L,M){M||L.display.input.resetPosition()}),E("tabindex",null,function(L,M){return L.display.input.getField().tabIndex=M||""}),E("autofocus",null),E("direction","ltr",function(L,M){return L.doc.setDirection(M)},!0),E("phrases",null)}(Jt),function Xu(t){var i=t.optionHandlers,E=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(L,M){var U=this.options,te=U[L];U[L]==M&&"mode"!=L||(U[L]=M,i.hasOwnProperty(L)&&vr(this,i[L])(this,M,te),Fe(this,"optionChange",this,L))},getOption:function(L){return this.options[L]},getDoc:function(){return this.doc},addKeyMap:function(L,M){this.state.keyMaps[M?"push":"unshift"](Di(L))},removeKeyMap:function(L){for(var M=this.state.keyMaps,U=0;U<M.length;++U)if(M[U]==L||M[U].name==L)return M.splice(U,1),!0},addOverlay:Ir(function(L,M){var U=L.token?L:t.getMode(this.options,L);if(U.startState)throw new Error("Overlays may not be stateful.");(function Wr(t,i,E){for(var L=0,M=E(i);L<t.length&&E(t[L])<=M;)L++;t.splice(L,0,i)})(this.state.overlays,{mode:U,modeSpec:L,opaque:M&&M.opaque,priority:M&&M.priority||0},function(te){return te.priority}),this.state.modeGen++,Tr(this)}),removeOverlay:Ir(function(L){for(var M=this.state.overlays,U=0;U<M.length;++U){var te=M[U].modeSpec;if(te==L||"string"==typeof L&&te.name==L)return M.splice(U,1),this.state.modeGen++,void Tr(this)}}),indentLine:Ir(function(L,M,U){"string"!=typeof M&&"number"!=typeof M&&(M=null==M?this.options.smartIndent?"smart":"prev":M?"add":"subtract"),Hi(this.doc,L)&&_o(this,L,M,U)}),indentSelection:Ir(function(L){for(var M=this.doc.sel.ranges,U=-1,te=0;te<M.length;te++){var ce=M[te];if(ce.empty())ce.head.line>U&&(_o(this,ce.head.line,L,!0),U=ce.head.line,te==this.doc.sel.primIndex&&Ai(this));else{var ve=ce.from(),we=ce.to(),De=Math.max(U,ve.line);U=Math.min(this.lastLine(),we.line-(we.ch?0:1))+1;for(var Ue=De;Ue<U;++Ue)_o(this,Ue,L);var Ve=this.doc.sel.ranges;0==ve.ch&&M.length==Ve.length&&Ve[te].from().ch>0&&ll(this.doc,te,new Qt(ve,Ve[te].to()),dt)}}}),getTokenAt:function(L,M){return Rt(this,L,M)},getLineTokens:function(L,M){return Rt(this,it(L),M,!0)},getTokenTypeAt:function(L){L=It(this.doc,L);var ve,M=vn(this,bt(this.doc,L.line)),U=0,te=(M.length-1)/2,ce=L.ch;if(0==ce)ve=M[2];else for(;;){var we=U+te>>1;if((we?M[2*we-1]:0)>=ce)te=we;else{if(!(M[2*we+1]<ce)){ve=M[2*we+2];break}U=we+1}}var De=ve?ve.indexOf("overlay "):-1;return De<0?ve:0==De?null:ve.slice(0,De-1)},getModeAt:function(L){var M=this.doc.mode;return M.innerMode?t.innerMode(M,this.getTokenAt(L).state).mode:M},getHelper:function(L,M){return this.getHelpers(L,M)[0]},getHelpers:function(L,M){var U=[];if(!E.hasOwnProperty(M))return U;var te=E[M],ce=this.getModeAt(L);if("string"==typeof ce[M])te[ce[M]]&&U.push(te[ce[M]]);else if(ce[M])for(var ve=0;ve<ce[M].length;ve++){var we=te[ce[M][ve]];we&&U.push(we)}else ce.helperType&&te[ce.helperType]?U.push(te[ce.helperType]):te[ce.name]&&U.push(te[ce.name]);for(var De=0;De<te._global.length;De++){var Ue=te._global[De];Ue.pred(ce,this)&&-1==Mt(U,Ue.val)&&U.push(Ue.val)}return U},getStateAfter:function(L,M){var U=this.doc;return yi(this,(L=Ts(U,null==L?U.first+U.size-1:L))+1,M).state},cursorCoords:function(L,M){var te=this.doc.sel.primary();return rn(this,null==L?te.head:"object"==typeof L?It(this.doc,L):L?te.from():te.to(),M||"page")},charCoords:function(L,M){return eo(this,It(this.doc,L),M||"page")},coordsChar:function(L,M){return Xo(this,(L=Jl(this,L,M||"page")).left,L.top)},lineAtHeight:function(L,M){return L=Jl(this,{top:L,left:0},M||"page").top,Yn(this.doc,L+this.display.viewOffset)},heightAtLine:function(L,M,U){var ce,te=!1;if("number"==typeof L){var ve=this.doc.first+this.doc.size-1;L<this.doc.first?L=this.doc.first:L>ve&&(L=ve,te=!0),ce=bt(this.doc,L)}else ce=L;return Ho(this,ce,{top:0,left:0},M||"page",U||te).top+(te?this.doc.height-bn(ce):0)},defaultTextHeight:function(){return Si(this.display)},defaultCharWidth:function(){return nn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(L,M,U,te,ce){var ve=this.display,we=(L=rn(this,It(this.doc,L))).bottom,De=L.left;if(M.style.position="absolute",M.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(M),ve.sizer.appendChild(M),"over"==te)we=L.top;else if("above"==te||"near"==te){var Ue=Math.max(ve.wrapper.clientHeight,this.doc.height),Ve=Math.max(ve.sizer.clientWidth,ve.lineSpace.clientWidth);("above"==te||L.bottom+M.offsetHeight>Ue)&&L.top>M.offsetHeight?we=L.top-M.offsetHeight:L.bottom+M.offsetHeight<=Ue&&(we=L.bottom),De+M.offsetWidth>Ve&&(De=Ve-M.offsetWidth)}M.style.top=we+"px",M.style.left=M.style.right="","right"==ce?(De=ve.sizer.clientWidth-M.offsetWidth,M.style.right="0px"):("left"==ce?De=0:"middle"==ce&&(De=(ve.sizer.clientWidth-M.offsetWidth)/2),M.style.left=De+"px"),U&&function va(t,i){var E=$s(t,i);null!=E.scrollTop&&so(t,E.scrollTop),null!=E.scrollLeft&&ri(t,E.scrollLeft)}(this,{left:De,top:we,right:De+M.offsetWidth,bottom:we+M.offsetHeight})},triggerOnKeyDown:Ir(pl),triggerOnKeyPress:Ir(gl),triggerOnKeyUp:dl,triggerOnMouseDown:Ir(Mu),execCommand:function(L){if(Bi.hasOwnProperty(L))return Bi[L].call(null,this)},triggerElectric:Ir(function(L){ml(this,L)}),findPosH:function(L,M,U,te){var ce=1;M<0&&(ce=-1,M=-M);for(var ve=It(this.doc,L),we=0;we<M&&!(ve=wl(this.doc,ve,ce,U,te)).hitSide;++we);return ve},moveH:Ir(function(L,M){var U=this;this.extendSelectionsBy(function(te){return U.display.shift||U.doc.extend||te.empty()?wl(U.doc,te.head,L,M,U.options.rtlMoveVisually):L<0?te.from():te.to()},Lt)}),deleteH:Ir(function(L,M){var U=this.doc.sel,te=this.doc;U.somethingSelected()?te.replaceSelection("",null,"+delete"):Xn(this,function(ce){var ve=wl(te,ce.head,L,M,!1);return L<0?{from:ve,to:ce.head}:{from:ce.head,to:ve}})}),findPosV:function(L,M,U,te){var ce=1,ve=te;M<0&&(ce=-1,M=-M);for(var we=It(this.doc,L),De=0;De<M;++De){var Ue=rn(this,we,"div");if(null==ve?ve=Ue.left:Ue.left=ve,(we=Cl(this,Ue,ce,U)).hitSide)break}return we},moveV:Ir(function(L,M){var U=this,te=this.doc,ce=[],ve=!this.display.shift&&!te.extend&&te.sel.somethingSelected();if(te.extendSelectionsBy(function(De){if(ve)return L<0?De.from():De.to();var Ue=rn(U,De.head,"div");null!=De.goalColumn&&(Ue.left=De.goalColumn),ce.push(Ue.left);var Ve=Cl(U,Ue,L,M);return"page"==M&&De==te.sel.primary()&&Vo(U,eo(U,Ve,"div").top-Ue.top),Ve},Lt),ce.length)for(var we=0;we<te.sel.ranges.length;we++)te.sel.ranges[we].goalColumn=ce[we]}),findWordAt:function(L){var U=bt(this.doc,L.line).text,te=L.ch,ce=L.ch;if(U){var ve=this.getHelper(L,"wordChars");"before"!=L.sticky&&ce!=U.length||!te?++ce:--te;for(var we=U.charAt(te),De=Ke(we,ve)?function(Ue){return Ke(Ue,ve)}:/\s/.test(we)?function(Ue){return/\s/.test(Ue)}:function(Ue){return!/\s/.test(Ue)&&!Ke(Ue)};te>0&&De(U.charAt(te-1));)--te;for(;ce<U.length&&De(U.charAt(ce));)++ce}return new Qt(it(L.line,te),it(L.line,ce))},toggleOverwrite:function(L){null!=L&&L==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?_e(this.display.cursorDiv,"CodeMirror-overwrite"):Se(this.display.cursorDiv,"CodeMirror-overwrite"),Fe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==me()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Ir(function(L,M){Ei(this,L,M)}),getScrollInfo:function(){var L=this.display.scroller;return{left:L.scrollLeft,top:L.scrollTop,height:L.scrollHeight-un(this)-this.display.barHeight,width:L.scrollWidth-un(this)-this.display.barWidth,clientHeight:Qo(this),clientWidth:Zn(this)}},scrollIntoView:Ir(function(L,M){null==L?(L={from:this.doc.sel.primary().head,to:null},null==M&&(M=this.options.cursorScrollMargin)):"number"==typeof L?L={from:it(L,0),to:null}:null==L.from&&(L={from:L,to:null}),L.to||(L.to=L.from),L.margin=M||0,null!=L.from.line?function ya(t,i){Yo(t),t.curOp.scrollToPos=i}(this,L):$l(this,L.from,L.to,L.margin)}),setSize:Ir(function(L,M){var U=this,te=function(ve){return"number"==typeof ve||/^\d+$/.test(String(ve))?ve+"px":ve};null!=L&&(this.display.wrapper.style.width=te(L)),null!=M&&(this.display.wrapper.style.height=te(M)),this.options.lineWrapping&&Ws(this);var ce=this.display.viewFrom;this.doc.iter(ce,this.display.viewTo,function(ve){if(ve.widgets)for(var we=0;we<ve.widgets.length;we++)if(ve.widgets[we].noHScroll){Rn(U,ce,"widget");break}++ce}),this.curOp.forceUpdate=!0,Fe(this,"refresh",this)}),operation:function(L){return Ur(this,L)},startOperation:function(){return Pn(this)},endOperation:function(){return oi(this)},refresh:Ir(function(){var L=this.display.cachedTextHeight;Tr(this),this.curOp.forceUpdate=!0,$i(this),Ei(this,this.doc.scrollLeft,this.doc.scrollTop),rs(this.display),(null==L||Math.abs(L-Si(this.display))>.5||this.options.lineWrapping)&&Vs(this),Fe(this,"refresh",this)}),swapDoc:Ir(function(L){var M=this.doc;return M.cm=null,this.state.selectingText&&this.state.selectingText(),cu(this,L),$i(this),this.display.input.reset(),Ei(this,L.scrollLeft,L.scrollTop),this.curOp.forceScroll=!0,gr(this,"swapDoc",this,M),M}),phrase:function(L){var M=this.options.phrases;return M&&Object.prototype.hasOwnProperty.call(M,L)?M[L]:L},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Re(t),t.registerHelper=function(L,M,U){E.hasOwnProperty(L)||(E[L]=t[L]={_global:[]}),E[L][M]=U},t.registerGlobalHelper=function(L,M,U,te){t.registerHelper(L,M,te),E[L]._global.push({pred:U,val:te})}}(Jt);var ef="iter insert remove copy getEditor constructor".split(" ");for(var Lo in Or.prototype)Or.prototype.hasOwnProperty(Lo)&&Mt(ef,Lo)<0&&(Jt.prototype[Lo]=function(t){return function(){return t.apply(this.doc,arguments)}}(Or.prototype[Lo]));return Re(Or),Jt.inputStyles={textarea:er,contenteditable:qt},Jt.defineMode=function(t){!Jt.defaults.mode&&"null"!=t&&(Jt.defaults.mode=t),Gi.apply(this,arguments)},Jt.defineMIME=function Kn(t,i){Er[t]=i},Jt.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),Jt.defineMIME("text/plain","null"),Jt.defineExtension=function(t,i){Jt.prototype[t]=i},Jt.defineDocExtension=function(t,i){Or.prototype[t]=i},Jt.fromTextArea=function $a(t,i){if((i=i?yt(i):{}).value=t.value,!i.tabindex&&t.tabIndex&&(i.tabindex=t.tabIndex),!i.placeholder&&t.placeholder&&(i.placeholder=t.placeholder),null==i.autofocus){var E=me();i.autofocus=E==t||null!=t.getAttribute("autofocus")&&E==document.body}function L(){t.value=ce.getValue()}var M;if(t.form&&(Z(t.form,"submit",L),!i.leaveSubmitMethodAlone)){var U=t.form;M=U.submit;try{var te=U.submit=function(){L(),U.submit=M,U.submit(),U.submit=te}}catch(ve){}}i.finishInit=function(ve){ve.save=L,ve.getTextArea=function(){return t},ve.toTextArea=function(){ve.toTextArea=isNaN,L(),t.parentNode.removeChild(ve.getWrapperElement()),t.style.display="",t.form&&(xe(t.form,"submit",L),!i.leaveSubmitMethodAlone&&"function"==typeof t.form.submit&&(t.form.submit=M))}},t.style.display="none";var ce=Jt(function(ve){return t.parentNode.insertBefore(ve,t.nextSibling)},i);return ce},function Wu(t){t.off=xe,t.on=Z,t.wheelEventPixels=La,t.Doc=Or,t.splitLines=pr,t.countColumn=vt,t.findColumn=xt,t.isWordChar=We,t.Pass=ot,t.signal=Fe,t.Line=Mn,t.changeEnd=kn,t.scrollbarModel=ii,t.Pos=it,t.cmpPos=Et,t.modes=jr,t.mimeModes=Er,t.resolveMode=Qr,t.getMode=Jn,t.modeExtensions=sn,t.extendMode=e,t.copyState=qr,t.startState=Ao,t.innerMode=vi,t.commands=Bi,t.keyMap=Fn,t.keyName=xs,t.isModifierKey=xo,t.lookupKey=Ln,t.normalizeKeyMap=ms,t.StringStream=or,t.SharedTextMarker=yo,t.TextMarker=Hn,t.LineWidget=li,t.e_preventDefault=Oe,t.e_stopPropagation=Xe,t.e_stop=Je,t.addClass=_e,t.contains=se,t.rmClass=Se,t.keyNames=_n}(Jt),Jt.version="5.65.5",Jt}),function(Ce){"object"==typeof exports&&"object"==typeof module?Ce(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],Ce):Ce(CodeMirror)}(function(Ce){"use strict";Ce.defineMode("turtle",function(Ee){var ye,Be=Ee.indentUnit;function j(R){return new RegExp("^(?:"+R.join("|")+")$","i")}j([]);var T=j(["@prefix","@base","a"]),_=/[*+\-<>=&|]/;function I(R,G){var Y=R.next();if(ye=null,"<"==Y&&!R.match(/^[\s\u00a0=]/,!1))return R.match(/^[^\s\u00a0>]*>?/),"atom";if('"'==Y||"'"==Y)return G.tokenize=function D(R){return function(G,Y){for(var fe,X=!1;null!=(fe=G.next());){if(fe==R&&!X){Y.tokenize=I;break}X=!X&&"\\"==fe}return"string"}}(Y),G.tokenize(R,G);if(/[{}\(\),\.;\[\]]/.test(Y))return ye=Y,null;if("#"==Y)return R.skipToEnd(),"comment";if(_.test(Y))return R.eatWhile(_),null;if(":"==Y)return"operator";if(R.eatWhile(/[_\w\d]/),":"==R.peek())return"variable-3";var X=R.current();return T.test(X)?"meta":Y>="A"&&Y<="Z"?"comment":"keyword"}function O(R,G,Y){R.context={prev:R.context,indent:R.indent,col:Y,type:G}}function s(R){R.indent=R.context.indent,R.context=R.context.prev}return{startState:function(){return{tokenize:I,context:null,indent:0,col:0}},token:function(R,G){if(R.sol()&&(G.context&&null==G.context.align&&(G.context.align=!1),G.indent=R.indentation()),R.eatSpace())return null;var Y=G.tokenize(R,G);if("comment"!=Y&&G.context&&null==G.context.align&&"pattern"!=G.context.type&&(G.context.align=!0),"("==ye)O(G,")",R.column());else if("["==ye)O(G,"]",R.column());else if("{"==ye)O(G,"}",R.column());else if(/[\]\}\)]/.test(ye)){for(;G.context&&"pattern"==G.context.type;)s(G);G.context&&ye==G.context.type&&s(G)}else"."==ye&&G.context&&"pattern"==G.context.type?s(G):/atom|string|variable/.test(Y)&&G.context&&(/[\}\]]/.test(G.context.type)?O(G,"pattern",R.column()):"pattern"==G.context.type&&!G.context.align&&(G.context.align=!0,G.context.col=R.column()));return Y},indent:function(R,G){var Y=G&&G.charAt(0),X=R.context;if(/[\]\}]/.test(Y))for(;X&&"pattern"==X.type;)X=X.prev;var fe=X&&Y==X.type;return X?"pattern"==X.type?X.col:X.align?X.col+(fe?0:1):X.indent+(fe?0:Be):0},lineComment:"#"}}),Ce.defineMIME("text/turtle","turtle")}),function(Ce){"object"==typeof exports&&"object"==typeof module?Ce(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],Ce):Ce(CodeMirror)}(function(Ce){"use strict";Ce.defineMode("sparql",function(Ee){var ye,Be=Ee.indentUnit;function j(G){return new RegExp("^(?:"+G.join("|")+")$","i")}var N=j(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","iri","uri","bnode","count","sum","min","max","avg","sample","group_concat","rand","abs","ceil","floor","round","concat","substr","strlen","replace","ucase","lcase","encode_for_uri","contains","strstarts","strends","strbefore","strafter","year","month","day","hours","minutes","seconds","timezone","tz","now","uuid","struuid","md5","sha1","sha256","sha384","sha512","coalesce","if","strlang","strdt","isnumeric","regex","exists","isblank","isliteral","a","bind"]),T=j(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc","as","having","undef","values","group","minus","in","not","service","silent","using","insert","delete","union","true","false","with","data","copy","to","move","add","create","drop","clear","load"]),_=/[*+\-<>=&|\^\/!\?]/;function I(G,Y){var X=G.next();if(ye=null,"$"==X||"?"==X)return"?"==X&&G.match(/\s/,!1)?"operator":(G.match(/^[A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][A-Za-z0-9_\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]*/),"variable-2");if("<"==X&&!G.match(/^[\s\u00a0=]/,!1))return G.match(/^[^\s\u00a0>]*>?/),"atom";if('"'==X||"'"==X)return Y.tokenize=function O(G){return function(Y,X){for(var ne,fe=!1;null!=(ne=Y.next());){if(ne==G&&!fe){X.tokenize=I;break}fe=!fe&&"\\"==ne}return"string"}}(X),Y.tokenize(G,Y);if(/[{}\(\),\.;\[\]]/.test(X))return ye=X,"bracket";if("#"==X)return G.skipToEnd(),"comment";if(_.test(X))return"operator";if(":"==X)return D(G),"atom";if("@"==X)return G.eatWhile(/[a-z\d\-]/i),"meta";if(G.eatWhile(/[_\w\d]/),G.eat(":"))return D(G),"atom";var fe=G.current();return N.test(fe)?"builtin":T.test(fe)?"keyword":"variable"}function D(G){G.match(/(\.(?=[\w_\-\\%])|[:\w_-]|\\[-\\_~.!$&'()*+,;=/?#@%]|%[a-f\d][a-f\d])+/i)}function s(G,Y,X){G.context={prev:G.context,indent:G.indent,col:X,type:Y}}function R(G){G.indent=G.context.indent,G.context=G.context.prev}return{startState:function(){return{tokenize:I,context:null,indent:0,col:0}},token:function(G,Y){if(G.sol()&&(Y.context&&null==Y.context.align&&(Y.context.align=!1),Y.indent=G.indentation()),G.eatSpace())return null;var X=Y.tokenize(G,Y);if("comment"!=X&&Y.context&&null==Y.context.align&&"pattern"!=Y.context.type&&(Y.context.align=!0),"("==ye)s(Y,")",G.column());else if("["==ye)s(Y,"]",G.column());else if("{"==ye)s(Y,"}",G.column());else if(/[\]\}\)]/.test(ye)){for(;Y.context&&"pattern"==Y.context.type;)R(Y);Y.context&&ye==Y.context.type&&(R(Y),"}"==ye&&Y.context&&"pattern"==Y.context.type&&R(Y))}else"."==ye&&Y.context&&"pattern"==Y.context.type?R(Y):/atom|string|variable/.test(X)&&Y.context&&(/[\}\]]/.test(Y.context.type)?s(Y,"pattern",G.column()):"pattern"==Y.context.type&&!Y.context.align&&(Y.context.align=!0,Y.context.col=G.column()));return X},indent:function(G,Y){var X=Y&&Y.charAt(0),fe=G.context;if(/[\]\}]/.test(X))for(;fe&&"pattern"==fe.type;)fe=fe.prev;var ne=fe&&X==fe.type;return fe?"pattern"==fe.type?fe.col:fe.align?fe.col+(ne?0:1):fe.indent+(ne?0:Be):0},lineComment:"#"}}),Ce.defineMIME("application/sparql-query","sparql")});