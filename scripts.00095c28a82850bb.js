function dateConverter(Ce){const Ee=1721425.5,ye=["So","Mo","Di","Mi","Do","Fr","Sa"],M={GREGORIAN:["ZERO","Jan","Feb","M\xe4rz","Apr","Mai","Juni","Juli","Aug","Sep","Okt","Nov","Dez"],JULIAN:["ZERO","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JEWISH:["ZERO","Tishri","Heshvan","Kislev","Tevet","Shevat","AdarI","AdarII","Nisan","Iyyar","Sivan","Tammuz","Av","Elul"],FRENCH:["ZERO","Vendemiaire","Brumaire","Frimaire","Nivose","Pluviose","Ventose","Germinal","Floreal","Prairial","Messidor","Thermidor","Fructidor","Extra"]};function T(Z,H){return Z-H*Math.floor(Z/H)}function F(Z){return(Z=parseInt(Z))%4==0&&!(Z%100==0&&Z%400!=0)}function I(Z,H,ce){return Ee-1+365*(Z-1)+Math.floor((Z-1)/4)+-Math.floor((Z-1)/100)+Math.floor((Z-1)/400)+Math.floor((367*H-362)/12+(H<=2?0:F(Z)?-1:-2)+ce)}function j(Z,H){Z=parseInt(Z);const ce={};let le;switch(H){case"GREGORIAN":case"gregorian":le=function O(Z){let H,ce,le,ee,se,de,he,V,W,Y,ge,ke,_e,Se;return H=Math.floor(Z-.5)+.5,ce=H-Ee,le=Math.floor(ce/146097),ee=T(ce,146097),se=Math.floor(ee/36524),de=T(ee,36524),he=Math.floor(de/1461),V=T(de,1461),W=Math.floor(V/365),Y=400*le+100*se+4*he+W,4==se||4==W||Y++,ge=H-I(Y,1,1),ke=H<I(Y,3,1)?0:F(Y)?1:2,_e=Math.floor((12*(ge+ke)+373)/367),Se=H-I(Y,_e,1)+1,Y<=0&&Y--,new Array(Y,_e,Se)}(Z);break;case"JULIAN":case"julian":le=S.jd_to_julian(Z);break;case"JEWISH":case"jewish":le=S.jd_to_hebrew(Z);break;case"FRENCH":case"french":le=S.jd_to_french_revolutionary(Z)}return ce.year=le[0],ce.month=le[1],ce.day=le[2],ce.weekday=function E(Z){return Z=Number(Z),T(Math.floor(Z+1.5),7)}(Z),ce}const s=j(Ce.dateval1,Ce.calendar),D=j(Ce.dateval2,Ce.calendar);let q="";if(Ce.dateprecision1==Ce.dateprecision2)switch(Ce.dateprecision1){case"DAY":q=s.year===D.year&&s.month===D.month&&s.day===D.day?"["+ye[s.weekday]+"] "+s.day+". "+M[Ce.calendar][s.month]+" "+s.year:"["+ye[s.weekday]+"] "+s.day+". "+M[Ce.calendar][s.month]+" "+s.year+" \u2013 ["+ye[D.weekday]+"] "+D.day+". "+M[Ce.calendar][D.month]+" "+D.year;break;case"MONTH":q=s.year===D.year&&s.month===D.month?M[Ce.calendar][s.month]+" "+s.year:M[Ce.calendar][s.month]+" "+s.year+" \u2013 "+M[Ce.calendar][D.month]+" "+D.year;break;case"YEAR":q=s.year===D.year?s.year:s.year+"\u2013"+D.year}else{switch(Ce.dateprecision1){case"DAY":q="["+ye[s.weekday]+"] "+s.day+". "+M[Ce.calendar][s.month]+" "+s.year;break;case"MONTH":q=M[Ce.calendar][s.month]+" "+s.year;break;case"YEAR":q=s.year}switch(q+=" \u2013 ",Ce.dateprecision2){case"DAY":q+="["+ye[D.weekday]+"] "+D.day+". "+M[Ce.calendar][D.month]+" "+D.year;break;case"MONTH":q+=M[Ce.calendar][D.month]+" "+D.year;break;case"YEAR":q+=D.year}}return q+=" ("+{GREGORIAN:{name:"Gregorian",short:"G",n_months:12},JULIAN:{name:"Julian",short:"Ju",n_months:12},JEWISH:{name:"Jewish",short:"Je",n_months:13},FRENCH:{name:"Revol.",short:"R",n_months:13}}[Ce.calendar].short+")",q}function htmlConverter(Ce,Ee){let ye,M,T,E,F,I,O,j,s,D,Be="";const q={p:0,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,ol:0,ul:0,li:1,a:2,strong:3,u:3,s:3,em:3,span:3,sup:3,sub:3},Z={settings:{utf8str:"",textattr:{},css:{width:"100%",minHeight:"30px"},matching:{strong:"bold",u:"underline",s:"strikethrough",em:"italic",a:"_link",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",ol:"ol",ul:"ul",li:"li",span:"style",p:"p",sup:"sup",sub:"sub"}}},H={};for(let le in Z.settings.matching)H[Z.settings.matching[le]]=le;const ce=Object.keys(Ce);ce.sort(function(le,ee){return q[H[le]]-q[H[ee]]}),ye=[];for(let le in ce)for(O in I=ce[le],Ce[I])T=Ce[I][O].start,void 0===ye[T]&&(ye[T]=[]),ye[T].push({propname:I,proptype:"start"}),"_link"==ye[T][ye[T].length-1].propname?(ye[T][ye[T].length-1].href=Ce[I][O].href,void 0!==Ce[I][O].resid&&(ye[T][ye[T].length-1].resid=Ce[I][O].resid)):"style"==ye[T][ye[T].length-1].propname&&(ye[T][ye[T].length-1].css=Ce[I][O].css),T=Ce[I][O].end,void 0===ye[T]&&(ye[T]=[]),ye[T].push({propname:I,proptype:"end"});for(M=[],j=0;j<=Ee.length;j++){if(void 0!==ye[j]){for(F=[],D=[],s=ye[j].length-1;s>=0;s--)if("end"==ye[j][s].proptype&&"linebreak"!=ye[j][s].propname){for(;void 0!==(E=M.pop())&&(Be+="</"+H[E]+">",E!=ye[j][s].propname);)F.push(E);for(;void 0!==(E=F.pop());)M.push(E),Be+="<"+H[E]+">"}for(s in ye[j])if("start"==ye[j][s].proptype)if("linebreak"==ye[j][s].propname)Be+="<br/>";else if("_link"==ye[j][s].propname){M.push(ye[j][s].propname);let le=ye[j][s].href;void 0===le&&void 0!==ye[j][s].resid&&(le="https://www.salsah.org/api/resources/"+ye[j][s].resid),Be+="<"+H[ye[j][s].propname]+' href="'+le,void 0!==ye[j][s].resid?Be+='" class="salsah-link">':Be+='">'}else"style"==ye[j][s].propname?(M.push(ye[j][s].propname),Be+="<"+H[ye[j][s].propname]+' style="'+ye[j][s].css+'">'):(M.push(ye[j][s].propname),Be+="<"+H[ye[j][s].propname]+">")}j<Ee.length&&(Be+=Ee.charAt(j))}return Be=Be.replace(/\n/g,"<br/>"),Be=Be.replace(/\r/g,""),Be}(function(Ce){var Ee,Be,M="hasOwnProperty",T=/[\.\/]/,E=/\s*,\s*/,I=function(H,ce){return H-ce},O={n:{}},j=function(){for(var H=0,ce=this.length;ce>H;H++)if(void 0!==this[H])return this[H]},s=function(){for(var H=this.length;--H;)if(void 0!==this[H])return this[H]},D=Object.prototype.toString,q=String,Z=Array.isArray||function(H){return H instanceof Array||"[object Array]"==D.call(H)};eve=function(H,ce){var le,ee=Be,se=Array.prototype.slice.call(arguments,2),de=eve.listeners(H),he=0,V=[],W={},Y=[],ge=Ee;Y.firstDefined=j,Y.lastDefined=s,Ee=H,Be=0;for(var ke=0,_e=de.length;_e>ke;ke++)"zIndex"in de[ke]&&(V.push(de[ke].zIndex),de[ke].zIndex<0&&(W[de[ke].zIndex]=de[ke]));for(V.sort(I);V[he]<0;)if(le=W[V[he++]],Y.push(le.apply(ce,se)),Be)return Be=ee,Y;for(ke=0;_e>ke;ke++)if("zIndex"in(le=de[ke]))if(le.zIndex==V[he]){if(Y.push(le.apply(ce,se)),Be)break;do{if((le=W[V[++he]])&&Y.push(le.apply(ce,se)),Be)break}while(le)}else W[le.zIndex]=le;else if(Y.push(le.apply(ce,se)),Be)break;return Be=ee,Ee=ge,Y},eve._events=O,eve.listeners=function(H){var ce,le,ee,se,de,he,V,W,Y=Z(H)?H:H.split(T),ge=O,ke=[ge],_e=[];for(se=0,de=Y.length;de>se;se++){for(W=[],he=0,V=ke.length;V>he;he++)for(le=[(ge=ke[he].n)[Y[se]],ge["*"]],ee=2;ee--;)(ce=le[ee])&&(W.push(ce),_e=_e.concat(ce.f||[]));ke=W}return _e},eve.separator=function(H){H?(H="["+(H=q(H).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",T=new RegExp(H)):T=/[\.\/]/},eve.on=function(H,ce){if("function"!=typeof ce)return function(){};for(var le=Z(H)?Z(H[0])?H:[H]:q(H).split(E),ee=0,se=le.length;se>ee;ee++)!function(de){for(var he,V=Z(de)?de:q(de).split(T),W=O,Y=0,ge=V.length;ge>Y;Y++)W=(W=W.n).hasOwnProperty(V[Y])&&W[V[Y]]||(W[V[Y]]={n:{}});for(W.f=W.f||[],Y=0,ge=W.f.length;ge>Y;Y++)if(W.f[Y]==ce){he=!0;break}!he&&W.f.push(ce)}(le[ee]);return function(de){+de==+de&&(ce.zIndex=+de)}},eve.f=function(H){var ce=[].slice.call(arguments,1);return function(){eve.apply(null,[H,null].concat(ce).concat([].slice.call(arguments,0)))}},eve.stop=function(){Be=1},eve.nt=function(H){var ce=Z(Ee)?Ee.join("."):Ee;return H?new RegExp("(?:\\.|\\/|^)"+H+"(?:\\.|\\/|$)").test(ce):ce},eve.nts=function(){return Z(Ee)?Ee:Ee.split(T)},eve.off=eve.unbind=function(H,ce){if(H){var le=Z(H)?Z(H[0])?H:[H]:q(H).split(E);if(le.length>1)for(var ee=0,se=le.length;se>ee;ee++)eve.off(le[ee],ce);else{le=Z(H)?H:q(H).split(T);var de,he,V,W,Y,ge=[O],ke=[];for(ee=0,se=le.length;se>ee;ee++)for(W=0;W<ge.length;W+=V.length-2){if(V=[W,1],de=ge[W].n,"*"!=le[ee])de[le[ee]]&&(V.push(de[le[ee]]),ke.unshift({n:de,name:le[ee]}));else for(he in de)de[M](he)&&(V.push(de[he]),ke.unshift({n:de,name:he}));ge.splice.apply(ge,V)}for(ee=0,se=ge.length;se>ee;ee++)for(de=ge[ee];de.n;){if(ce){if(de.f){for(W=0,Y=de.f.length;Y>W;W++)if(de.f[W]==ce){de.f.splice(W,1);break}!de.f.length&&delete de.f}for(he in de.n)if(de.n[M](he)&&de.n[he].f){var _e=de.n[he].f;for(W=0,Y=_e.length;Y>W;W++)if(_e[W]==ce){_e.splice(W,1);break}!_e.length&&delete de.n[he].f}}else for(he in delete de.f,de.n)de.n[M](he)&&de.n[he].f&&delete de.n[he].f;de=de.n}e:for(ee=0,se=ke.length;se>ee;ee++){for(he in(de=ke[ee]).n[de.name].f)continue e;for(he in de.n[de.name].n)continue e;delete de.n[de.name]}}}else eve._events=O={n:{}}},eve.once=function(H,ce){var le=function(){return eve.off(H,le),ce.apply(this,arguments)};return eve.on(H,le)},eve.version="0.5.0",eve.toString=function(){return"You are running Eve 0.5.0"},"undefined"!=typeof module&&module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],function(){return eve}):Ce.eve=eve})(this),function(Ce,Ee){if("function"==typeof define&&define.amd)define(["eve"],function(ye){return Ee(Ce,ye)});else if("undefined"!=typeof exports){var Be=require("eve");module.exports=Ee(Ce,Be)}else Ee(Ce,Ce.eve)}(window||this,function(Ce,Ee){var M,T,E,F,I,O,j,D,q,Z,H,ce,le,ee,se,de,he,Be=(M=void 0===Ee?function(){}:Ee,E={},F=Ce.requestAnimationFrame||Ce.webkitRequestAnimationFrame||Ce.mozRequestAnimationFrame||Ce.oRequestAnimationFrame||Ce.msRequestAnimationFrame||function(V){return setTimeout(V,16,(new Date).getTime()),!0},I=Array.isArray||function(V){return V instanceof Array||"[object Array]"==Object.prototype.toString.call(V)},O=0,j="M"+(+new Date).toString(36),D=Date.now||function(){return+new Date},q=function(V){var W=this;if(null==V)return W.s;var Y=W.s-V;W.b+=W.dur*Y,W.B+=W.dur*Y,W.s=V},Z=function(V){return null==V?this.spd:void(this.spd=V)},H=function(V){var W=this;return null==V?W.dur:(W.s=W.s*V/W.dur,void(W.dur=V))},ce=function(){var V=this;delete E[V.id],V.update(),M("mina.stop."+V.id,V)},le=function(){var V=this;V.pdif||(delete E[V.id],V.update(),V.pdif=V.get()-V.b)},ee=function(){var V=this;V.pdif&&(V.b=V.get()-V.pdif,delete V.pdif,E[V.id]=V,de())},se=function(){var V,W=this;if(I(W.start)){V=[];for(var Y=0,ge=W.start.length;ge>Y;Y++)V[Y]=+W.start[Y]+(W.end[Y]-W.start[Y])*W.easing(W.s)}else V=+W.start+(W.end-W.start)*W.easing(W.s);W.set(V)},de=function(V){if(V){var W=0;for(var Y in E)if(E.hasOwnProperty(Y)){var ge=E[Y],ke=ge.get();W++,ge.s=(ke-ge.b)/(ge.dur/ge.spd),ge.s>=1&&(delete E[Y],ge.s=1,W--,function(_e){setTimeout(function(){M("mina.finish."+_e.id,_e)})}(ge)),ge.update()}T=!!W&&F(de)}else T||(T=F(de))},(he=function(V,W,Y,ge,ke,_e,Se){var We={id:j+(O++).toString(36),start:V,end:W,b:Y,s:0,dur:ge-Y,spd:1,get:ke,set:_e,easing:Se||he.linear,status:q,speed:Z,duration:H,stop:ce,pause:le,resume:ee,update:se};E[We.id]=We;var $e,Fe=0;for($e in E)if(E.hasOwnProperty($e)&&2==++Fe)break;return 1==Fe&&de(),We}).time=D,he.getById=function(V){return E[V]||null},he.linear=function(V){return V},he.easeout=function(V){return Math.pow(V,1.7)},he.easein=function(V){return Math.pow(V,.48)},he.easeinout=function(V){if(1==V)return 1;if(0==V)return 0;var W=.48-V/1.04,Y=Math.sqrt(.1734+W*W),ge=Y-W,_e=-Y-W,We=Math.pow(Math.abs(ge),1/3)*(0>ge?-1:1)+Math.pow(Math.abs(_e),1/3)*(0>_e?-1:1)+.5;return 3*(1-We)*We*We+We*We*We},he.backin=function(V){if(1==V)return 1;var W=1.70158;return V*V*((W+1)*V-W)},he.backout=function(V){if(0==V)return 0;var W=1.70158;return(V-=1)*V*((W+1)*V+W)+1},he.elastic=function(V){return V==!!V?V:Math.pow(2,-10*V)*Math.sin((V-.075)*(2*Math.PI)/.3)+1},he.bounce=function(V){var Y=7.5625,ge=2.75;return 1/ge>V?Y*V*V:2/ge>V?Y*(V-=1.5/ge)*V+.75:2.5/ge>V?Y*(V-=2.25/ge)*V+.9375:Y*(V-=2.625/ge)*V+.984375},Ce.mina=he,he),ye=function(M){function T(ie,be){if(ie){if(ie.nodeType)return Y(ie);if(F(ie,"array")&&T.set)return T.set.apply(T,ie);if(ie instanceof de)return ie;if(null==be)return Y(ie=ke.doc.querySelector(String(ie)))}return new W(ie=null==ie?"100%":ie,be=null==be?"100%":be)}function E(ie,be){if(be){if("#text"==ie&&(ie=ke.doc.createTextNode(be.text||be["#text"]||"")),"#comment"==ie&&(ie=ke.doc.createComment(be.text||be["#text"]||"")),"string"==typeof ie&&(ie=E(ie)),"string"==typeof be)return 1==ie.nodeType?"xlink:"==be.substring(0,6)?ie.getAttributeNS(yt,be.substring(6)):"xml:"==be.substring(0,4)?ie.getAttributeNS(It,be.substring(4)):ie.getAttribute(be):"text"==be?ie.nodeValue:null;if(1==ie.nodeType){for(var Te in be)if(be[_e](Te)){var De=Se(be[Te]);De?"xlink:"==Te.substring(0,6)?ie.setAttributeNS(yt,Te.substring(6),De):"xml:"==Te.substring(0,4)?ie.setAttributeNS(It,Te.substring(4),De):ie.setAttribute(Te,De):ie.removeAttribute(Te)}}else"text"in be&&(ie.nodeValue=be.text)}else ie=ke.doc.createElementNS(It,ie);return ie}function F(ie,be){return"finite"==(be=Se.prototype.toLowerCase.call(be))?isFinite(ie):!("array"!=be||!(ie instanceof Array||Array.isArray&&Array.isArray(ie)))||("null"==be&&null===ie||be==typeof ie&&null!==ie||"object"==be&&ie===Object(ie)||st.call(ie).slice(8,-1).toLowerCase()==be)}function O(ie,be){for(var Te=0,De=ie.length;De>Te;Te++)if(ie[Te]===be)return ie.push(ie.splice(Te,1)[0])}function j(ie,be,Te){return function De(){var Qe=Array.prototype.slice.call(arguments,0),G=Qe.join("\u2400"),J=De.cache=De.cache||{},X=De.count=De.count||[];return J[_e](G)?(O(X,G),Te?Te(J[G]):J[G]):(X.length>=1e3&&delete J[X.shift()],X.push(G),J[G]=ie.apply(be,Qe),Te?Te(J[G]):J[G])}}function D(ie){return ie%360*qe/180}function le(ie){return ie.node.ownerSVGElement&&Y(ie.node.ownerSVGElement)||T.select("svg")}function se(ie){F(ie,"array")||(ie=Array.prototype.slice.call(arguments,0));for(var be=0,Te=0,De=this.node;this[be];)delete this[be++];for(be=0;be<ie.length;be++)"set"==ie[be].type?ie[be].forEach(function(G){De.appendChild(G.node)}):De.appendChild(ie[be].node);var Qe=De.childNodes;for(be=0;be<Qe.length;be++)this[Te++]=Y(Qe[be]);return this}function de(ie){if(ie.snap in St)return St[ie.snap];var be;try{be=ie.ownerSVGElement}catch(Qe){}this.node=ie,be&&(this.paper=new W(be)),this.type=ie.tagName||ie.nodeName;var Te=this.id=At(this);if(this.anims={},this._={transform:[]},ie.snap=Te,St[Te]=this,"g"==this.type&&(this.add=se),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var De in W.prototype)W.prototype[_e](De)&&(this[De]=W.prototype[De])}function he(ie){this.node=ie}function V(ie,be){var Te=E(ie);return be.appendChild(Te),Y(Te)}function W(ie,be){var Te,De,Qe,G=W.prototype;if(ie&&ie.tagName&&"svg"==ie.tagName.toLowerCase()){if(ie.snap in St)return St[ie.snap];var J=ie.ownerDocument;for(var X in Te=new de(ie),De=ie.getElementsByTagName("desc")[0],Qe=ie.getElementsByTagName("defs")[0],De||((De=E("desc")).appendChild(J.createTextNode("Created with Snap")),Te.node.appendChild(De)),Qe||(Qe=E("defs"),Te.node.appendChild(Qe)),Te.defs=Qe,G)G[_e](X)&&(Te[X]=G[X]);Te.paper=Te.root=Te}else E((Te=V("svg",ke.doc.body)).node,{height:be,version:1.1,width:ie,xmlns:It});return Te}function Y(ie){return ie&&(ie instanceof de||ie instanceof he?ie:ie.tagName&&"svg"==ie.tagName.toLowerCase()?new W(ie):ie.tagName&&"object"==ie.tagName.toLowerCase()&&"image/svg+xml"==ie.type?new W(ie.contentDocument.getElementsByTagName("svg")[0]):new de(ie))}function ge(ie,be){for(var Te=0,De=ie.length;De>Te;Te++){var Qe={type:ie[Te].type,attr:ie[Te].attr()},G=ie[Te].children();be.push(Qe),G.length&&ge(G,Qe.childNodes=[])}}T.version="0.5.1",T.toString=function(){return"Snap v"+this.version},T._={};var ke={win:M.window,doc:M.window.document};T._.glob=ke;var ie,be,_e="hasOwnProperty",Se=String,We=parseFloat,$e=parseInt,Fe=Math,oe=Fe.max,me=Fe.min,Ae=Fe.abs,qe=(Fe.pow,Fe.PI),et=(Fe.round,""),st=Object.prototype.toString,dt=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,xt=(T._.separator=/[,\s]+/,/[\s]*,[\s]*/),Pt={hs:1,rg:1},Wt=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,tt=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,it=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,vt=0,ct="S"+(+new Date).toString(36),At=function(ie){return(ie&&ie.type?ie.type:et)+ct+(vt++).toString(36)},yt="http://www.w3.org/1999/xlink",It="http://www.w3.org/2000/svg",St={};T.url=function(ie){return"url('#"+ie+"')"},T._.$=E,T._.id=At,T.format=(ie=/\{([^\}]+)\}/g,be=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(De,Qe){return Se(De).replace(ie,function(G,J){return function(De,Qe,G){var J=G;return Qe.replace(be,function(X,ae,ne,te,ue){ae=ae||te,J&&(ae in J&&(J=J[ae]),"function"==typeof J&&ue&&(J=J()))}),J=(null==J||J==G?De:J)+""}(G,J,Qe)})}),T._.clone=function I(ie){if("function"==typeof ie||Object(ie)!==ie)return ie;var be=new ie.constructor;for(var Te in ie)ie[_e](Te)&&(be[Te]=I(ie[Te]));return be},T._.cacher=j,T.rad=D,T.deg=function q(ie){return 180*ie/qe%360},T.sin=function(ie){return Fe.sin(T.rad(ie))},T.tan=function(ie){return Fe.tan(T.rad(ie))},T.cos=function(ie){return Fe.cos(T.rad(ie))},T.asin=function(ie){return T.deg(Fe.asin(ie))},T.acos=function(ie){return T.deg(Fe.acos(ie))},T.atan=function(ie){return T.deg(Fe.atan(ie))},T.atan2=function(ie){return T.deg(Fe.atan2(ie))},T.angle=function s(ie,be,Te,De,Qe,G){if(null==Qe){var J=ie-Te,X=be-De;return J||X?(180+180*Fe.atan2(-X,-J)/qe+360)%360:0}return s(ie,be,Qe,G)-s(Te,De,Qe,G)},T.len=function(ie,be,Te,De){return Math.sqrt(T.len2(ie,be,Te,De))},T.len2=function(ie,be,Te,De){return(ie-Te)*(ie-Te)+(be-De)*(be-De)},T.closestPoint=function(ie,be,Te){function De(He){var Ze=He.x-be,Ke=He.y-Te;return Ze*Ze+Ke*Ke}for(var Qe,G,J,X,ae=ie.node,ne=ae.getTotalLength(),te=ne/ae.pathSegList.numberOfItems*.125,ue=1/0,we=0;ne>=we;we+=te)(X=De(J=ae.getPointAtLength(we)))<ue&&(Qe=J,G=we,ue=X);for(te*=.5;te>.5;){var Le,Ie,Me,Ne,je,Re;(Me=G-te)>=0&&(je=De(Le=ae.getPointAtLength(Me)))<ue?(Qe=Le,G=Me,ue=je):(Ne=G+te)<=ne&&(Re=De(Ie=ae.getPointAtLength(Ne)))<ue?(Qe=Ie,G=Ne,ue=Re):te*=.5}return{x:Qe.x,y:Qe.y,length:G,distance:Math.sqrt(ue)}},T.is=F,T.snapTo=function(ie,be,Te){if(Te=F(Te,"finite")?Te:10,F(ie,"array")){for(var De=ie.length;De--;)if(Ae(ie[De]-be)<=Te)return ie[De]}else{var Qe=be%(ie=+ie);if(Te>Qe)return be-Qe;if(Qe>ie-Te)return be-Qe+ie}return be},T.getRGB=j(function(ie){if(!ie||(ie=Se(ie)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:cr};if("none"==ie)return{r:-1,g:-1,b:-1,hex:"none",toString:cr};if(!(Pt[_e](ie.toLowerCase().substring(0,2))||"#"==ie.charAt())&&(ie=Ut(ie)),!ie)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:cr};var be,Te,De,Qe,G,J,X=ie.match(dt);return X?(X[2]&&(De=$e(X[2].substring(5),16),Te=$e(X[2].substring(3,5),16),be=$e(X[2].substring(1,3),16)),X[3]&&(De=$e((G=X[3].charAt(3))+G,16),Te=$e((G=X[3].charAt(2))+G,16),be=$e((G=X[3].charAt(1))+G,16)),X[4]&&(J=X[4].split(xt),be=We(J[0]),"%"==J[0].slice(-1)&&(be*=2.55),Te=We(J[1]),"%"==J[1].slice(-1)&&(Te*=2.55),De=We(J[2]),"%"==J[2].slice(-1)&&(De*=2.55),"rgba"==X[1].toLowerCase().slice(0,4)&&(Qe=We(J[3])),J[3]&&"%"==J[3].slice(-1)&&(Qe/=100)),X[5]?(J=X[5].split(xt),be=We(J[0]),"%"==J[0].slice(-1)&&(be/=100),Te=We(J[1]),"%"==J[1].slice(-1)&&(Te/=100),De=We(J[2]),"%"==J[2].slice(-1)&&(De/=100),("deg"==J[0].slice(-3)||"\xb0"==J[0].slice(-1))&&(be/=360),"hsba"==X[1].toLowerCase().slice(0,4)&&(Qe=We(J[3])),J[3]&&"%"==J[3].slice(-1)&&(Qe/=100),T.hsb2rgb(be,Te,De,Qe)):X[6]?(J=X[6].split(xt),be=We(J[0]),"%"==J[0].slice(-1)&&(be/=100),Te=We(J[1]),"%"==J[1].slice(-1)&&(Te/=100),De=We(J[2]),"%"==J[2].slice(-1)&&(De/=100),("deg"==J[0].slice(-3)||"\xb0"==J[0].slice(-1))&&(be/=360),"hsla"==X[1].toLowerCase().slice(0,4)&&(Qe=We(J[3])),J[3]&&"%"==J[3].slice(-1)&&(Qe/=100),T.hsl2rgb(be,Te,De,Qe)):(be=me(Fe.round(be),255),Te=me(Fe.round(Te),255),De=me(Fe.round(De),255),Qe=me(oe(Qe,0),1),(X={r:be,g:Te,b:De,toString:cr}).hex="#"+(16777216|De|Te<<8|be<<16).toString(16).slice(1),X.opacity=F(Qe,"finite")?Qe:1,X)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:cr}},T),T.hsb=j(function(ie,be,Te){return T.hsb2rgb(ie,be,Te).hex}),T.hsl=j(function(ie,be,Te){return T.hsl2rgb(ie,be,Te).hex}),T.rgb=j(function(ie,be,Te,De){if(F(De,"finite")){var Qe=Fe.round;return"rgba("+[Qe(ie),Qe(be),Qe(Te),+De.toFixed(2)]+")"}return"#"+(16777216|Te|be<<8|ie<<16).toString(16).slice(1)});var Ut=function(ie){var be=ke.doc.getElementsByTagName("head")[0]||ke.doc.getElementsByTagName("svg")[0],Te="rgb(255, 0, 0)";return(Ut=j(function(De){if("red"==De.toLowerCase())return Te;be.style.color=Te,be.style.color=De;var Qe=ke.doc.defaultView.getComputedStyle(be,et).getPropertyValue("color");return Qe==Te?null:Qe}))(ie)},Xr=function(){return"hsb("+[this.h,this.s,this.b]+")"},Rr=function(){return"hsl("+[this.h,this.s,this.l]+")"},cr=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},tr=function(ie,be,Te){if(null==be&&F(ie,"object")&&"r"in ie&&"g"in ie&&"b"in ie&&(Te=ie.b,be=ie.g,ie=ie.r),null==be&&F(ie,string)){var De=T.getRGB(ie);ie=De.r,be=De.g,Te=De.b}return(ie>1||be>1||Te>1)&&(ie/=255,be/=255,Te/=255),[ie,be,Te]},mr=function(ie,be,Te,De){var Qe={r:ie=Fe.round(255*ie),g:be=Fe.round(255*be),b:Te=Fe.round(255*Te),opacity:F(De,"finite")?De:1,hex:T.rgb(ie,be,Te),toString:cr};return F(De,"finite")&&(Qe.opacity=De),Qe};T.color=function(ie){var be;return F(ie,"object")&&"h"in ie&&"s"in ie&&"b"in ie?(be=T.hsb2rgb(ie),ie.r=be.r,ie.g=be.g,ie.b=be.b,ie.opacity=1,ie.hex=be.hex):F(ie,"object")&&"h"in ie&&"s"in ie&&"l"in ie?(be=T.hsl2rgb(ie),ie.r=be.r,ie.g=be.g,ie.b=be.b,ie.opacity=1,ie.hex=be.hex):(F(ie,"string")&&(ie=T.getRGB(ie)),F(ie,"object")&&"r"in ie&&"g"in ie&&"b"in ie&&!("error"in ie)?(be=T.rgb2hsl(ie),ie.h=be.h,ie.s=be.s,ie.l=be.l,be=T.rgb2hsb(ie),ie.v=be.b):((ie={hex:"none"}).r=ie.g=ie.b=ie.h=ie.s=ie.v=ie.l=-1,ie.error=1)),ie.toString=cr,ie},T.hsb2rgb=function(ie,be,Te,De){var Qe,G,J,X,ae;return F(ie,"object")&&"h"in ie&&"s"in ie&&"b"in ie&&(Te=ie.b,be=ie.s,De=ie.o,ie=ie.h),Qe=G=J=Te-(ae=Te*be),Qe+=[ae,X=ae*(1-Ae((ie=(ie*=360)%360/60)%2-1)),0,0,X,ae][ie=~~ie],G+=[X,ae,ae,X,0,0][ie],J+=[0,0,X,ae,ae,X][ie],mr(Qe,G,J,De)},T.hsl2rgb=function(ie,be,Te,De){var Qe,G,J,X,ae;return F(ie,"object")&&"h"in ie&&"s"in ie&&"l"in ie&&(Te=ie.l,be=ie.s,ie=ie.h),(ie>1||be>1||Te>1)&&(ie/=360,be/=100,Te/=100),Qe=G=J=Te-(ae=2*be*(.5>Te?Te:1-Te))/2,Qe+=[ae,X=ae*(1-Ae((ie=(ie*=360)%360/60)%2-1)),0,0,X,ae][ie=~~ie],G+=[X,ae,ae,X,0,0][ie],J+=[0,0,X,ae,ae,X][ie],mr(Qe,G,J,De)},T.rgb2hsb=function(ie,be,Te){var G,J;return ie=(Te=tr(ie,be,Te))[0],be=Te[1],Te=Te[2],{h:((0==(J=(G=oe(ie,be,Te))-me(ie,be,Te))?null:G==ie?(be-Te)/J:G==be?(Te-ie)/J+2:(ie-be)/J+4)+360)%6*60/360,s:0==J?0:J/G,b:G,toString:Xr}},T.rgb2hsl=function(ie,be,Te){var G,J,X,ae;return ie=(Te=tr(ie,be,Te))[0],be=Te[1],Te=Te[2],G=((J=oe(ie,be,Te))+(X=me(ie,be,Te)))/2,{h:((0==(ae=J-X)?null:J==ie?(be-Te)/ae:J==be?(Te-ie)/ae+2:(ie-be)/ae+4)+360)%6*60/360,s:0==ae?0:.5>G?ae/(2*G):ae/(2-2*G),l:G,toString:Rr}},T.parsePathString=function(ie){if(!ie)return null;var be=T.path(ie);if(be.arr)return T.path.clone(be.arr);var Te={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},De=[];return F(ie,"array")&&F(ie[0],"array")&&(De=T.path.clone(ie)),De.length||Se(ie).replace(Wt,function(Qe,G,J){var X=[],ae=G.toLowerCase();if(J.replace(it,function(ne,te){te&&X.push(+te)}),"m"==ae&&X.length>2&&(De.push([G].concat(X.splice(0,2))),ae="l",G="m"==G?"l":"L"),"o"==ae&&1==X.length&&De.push([G,X[0]]),"r"==ae)De.push([G].concat(X));else for(;X.length>=Te[ae]&&(De.push([G].concat(X.splice(0,Te[ae]))),Te[ae]););}),De.toString=T.path.toString,be.arr=T.path.clone(De),De};var Xe=T.parseTransformString=function(ie){if(!ie)return null;var be=[];return F(ie,"array")&&F(ie[0],"array")&&(be=T.path.clone(ie)),be.length||Se(ie).replace(tt,function(Te,De,Qe){var G=[];De.toLowerCase(),Qe.replace(it,function(J,X){X&&G.push(+X)}),be.push([De].concat(G))}),be.toString=T.path.toString,be};T._.svgTransform2string=function Z(ie){var be=[];return ie=ie.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(Te,De,Qe){return Qe=Qe.split(/\s*,\s*|\s+/),"rotate"==De&&1==Qe.length&&Qe.push(0,0),"scale"==De&&(Qe.length>2?Qe=Qe.slice(0,2):2==Qe.length&&Qe.push(0,0),1==Qe.length&&Qe.push(Qe[0],0,0)),"skewX"==De?be.push(["m",1,0,Fe.tan(D(Qe[0])),1,0,0]):"skewY"==De?be.push(["m",1,Fe.tan(D(Qe[0])),0,1,0,0]):be.push([De.charAt(0)].concat(Qe)),Te}),be},T._.rgTransform=/^[a-z][\s]*-?\.?\d/i,T._.transform2matrix=function H(ie,be){var Te=Xe(ie),De=new T.Matrix;if(Te)for(var Qe=0,G=Te.length;G>Qe;Qe++){var J,X,ae,ne,te,ue=Te[Qe],we=ue.length,Le=Se(ue[0]).toLowerCase(),Ie=ue[0]!=Le,Me=Ie?De.invert():0;"t"==Le&&2==we?De.translate(ue[1],0):"t"==Le&&3==we?Ie?(J=Me.x(0,0),X=Me.y(0,0),ae=Me.x(ue[1],ue[2]),ne=Me.y(ue[1],ue[2]),De.translate(ae-J,ne-X)):De.translate(ue[1],ue[2]):"r"==Le?2==we?(te=te||be,De.rotate(ue[1],te.x+te.width/2,te.y+te.height/2)):4==we&&(Ie?(ae=Me.x(ue[2],ue[3]),ne=Me.y(ue[2],ue[3]),De.rotate(ue[1],ae,ne)):De.rotate(ue[1],ue[2],ue[3])):"s"==Le?2==we||3==we?(te=te||be,De.scale(ue[1],ue[we-1],te.x+te.width/2,te.y+te.height/2)):4==we?Ie?(ae=Me.x(ue[2],ue[3]),ne=Me.y(ue[2],ue[3]),De.scale(ue[1],ue[1],ae,ne)):De.scale(ue[1],ue[1],ue[2],ue[3]):5==we&&(Ie?(ae=Me.x(ue[3],ue[4]),ne=Me.y(ue[3],ue[4]),De.scale(ue[1],ue[2],ae,ne)):De.scale(ue[1],ue[2],ue[3],ue[4])):"m"==Le&&7==we&&De.add(ue[1],ue[2],ue[3],ue[4],ue[5],ue[6])}return De},T._unit2px=function ee(ie,be,Te){function De(ne){if(null==ne)return et;if(ne==+ne)return ne;E(ae,{width:ne});try{return ae.getBBox().width}catch(te){return 0}}function Qe(ne){if(null==ne)return et;if(ne==+ne)return ne;E(ae,{height:ne});try{return ae.getBBox().height}catch(te){return 0}}function G(ne,te){null==be?X[ne]=te(ie.attr(ne)||0):ne==be&&(X=te(null==Te?ie.attr(ne)||0:Te))}var J=le(ie).node,X={},ae=J.querySelector(".svg---mgr");switch(ae||(ae=E("rect"),E(ae,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),J.appendChild(ae)),ie.type){case"rect":G("rx",De),G("ry",Qe);case"image":G("width",De),G("height",Qe);case"text":G("x",De),G("y",Qe);break;case"circle":G("cx",De),G("cy",Qe),G("r",De);break;case"ellipse":G("cx",De),G("cy",Qe),G("rx",De),G("ry",Qe);break;case"line":G("x1",De),G("x2",De),G("y1",Qe),G("y2",Qe);break;case"marker":G("refX",De),G("markerWidth",De),G("refY",Qe),G("markerHeight",Qe);break;case"radialGradient":G("fx",De),G("fy",Qe);break;case"tspan":G("dx",De),G("dy",Qe);break;default:G(be,De)}return J.removeChild(ae),X},ke.doc.contains||ke.doc.compareDocumentPosition,T._.getSomeDefs=function ce(ie){var be=ie.node.ownerSVGElement&&Y(ie.node.ownerSVGElement)||ie.node.parentNode&&Y(ie.node.parentNode)||T.select("svg")||T(0,0),Te=be.select("defs"),De=null!=Te&&Te.node;return De||(De=V("defs",be.node).node),De},T._.getSomeSVG=le,T.select=function(ie){return ie=Se(ie).replace(/([^\\]):/g,"$1\\:"),Y(ke.doc.querySelector(ie))},T.selectAll=function(ie){for(var be=ke.doc.querySelectorAll(ie),Te=(T.set||Array)(),De=0;De<be.length;De++)Te.push(Y(be[De]));return Te},setInterval(function(){for(var ie in St)if(St[_e](ie)){var be=St[ie],Te=be.node;("svg"!=be.type&&!Te.ownerSVGElement||"svg"==be.type&&(!Te.parentNode||"ownerSVGElement"in Te.parentNode&&!Te.ownerSVGElement))&&delete St[ie]}},1e4),de.prototype.attr=function(ie,be){var Te=this,De=Te.node;if(!ie){if(1!=De.nodeType)return{text:De.nodeValue};for(var Qe=De.attributes,G={},J=0,X=Qe.length;X>J;J++)G[Qe[J].nodeName]=Qe[J].nodeValue;return G}if(F(ie,"string")){if(!(arguments.length>1))return Ee("snap.util.getattr."+ie,Te).firstDefined();var ae={};ae[ie]=be,ie=ae}for(var ne in ie)ie[_e](ne)&&Ee("snap.util.attr."+ne,Te,ie[ne]);return Te},T.parse=function(ie){var be=ke.doc.createDocumentFragment(),Te=!0,De=ke.doc.createElement("div");if((ie=Se(ie)).match(/^\s*<\s*svg(?:\s|>)/)||(ie="<svg>"+ie+"</svg>",Te=!1),De.innerHTML=ie,ie=De.getElementsByTagName("svg")[0])if(Te)be=ie;else for(;ie.firstChild;)be.appendChild(ie.firstChild);return new he(be)},T.fragment=function(){for(var ie=Array.prototype.slice.call(arguments,0),be=ke.doc.createDocumentFragment(),Te=0,De=ie.length;De>Te;Te++){var Qe=ie[Te];Qe.node&&Qe.node.nodeType&&be.appendChild(Qe.node),Qe.nodeType&&be.appendChild(Qe),"string"==typeof Qe&&be.appendChild(T.parse(Qe).node)}return new he(be)},T._.make=V,T._.wrap=Y,W.prototype.el=function(ie,be){var Te=V(ie,this.node);return be&&Te.attr(be),Te},de.prototype.children=function(){for(var ie=[],be=this.node.childNodes,Te=0,De=be.length;De>Te;Te++)ie[Te]=T(be[Te]);return ie},de.prototype.toJSON=function(){var ie=[];return ge([this],ie),ie[0]},Ee.on("snap.util.getattr",function(){var ie=Ee.nt(),be=(ie=ie.substring(ie.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(Te){return"-"+Te.toLowerCase()});return Je[_e](be)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(be):E(this.node,ie)});var Je={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};Ee.on("snap.util.attr",function(ie){var be=Ee.nt(),Te={};Te[be=be.substring(be.lastIndexOf(".")+1)]=ie;var De=be.replace(/-(\w)/gi,function(G,J){return J.toUpperCase()}),Qe=be.replace(/[A-Z]/g,function(G){return"-"+G.toLowerCase()});Je[_e](Qe)?this.node.style[De]=null==ie?et:ie:E(this.node,Te)}),W.prototype,T.ajax=function(ie,be,Te,De){var Qe=new XMLHttpRequest,G=At();if(Qe){if(F(be,"function"))De=Te,Te=be,be=null;else if(F(be,"object")){var J=[];for(var X in be)be.hasOwnProperty(X)&&J.push(encodeURIComponent(X)+"="+encodeURIComponent(be[X]));be=J.join("&")}return Qe.open(be?"POST":"GET",ie,!0),be&&(Qe.setRequestHeader("X-Requested-With","XMLHttpRequest"),Qe.setRequestHeader("Content-type","application/x-www-form-urlencoded")),Te&&(Ee.once("snap.ajax."+G+".0",Te),Ee.once("snap.ajax."+G+".200",Te),Ee.once("snap.ajax."+G+".304",Te)),Qe.onreadystatechange=function(){4==Qe.readyState&&Ee("snap.ajax."+G+"."+Qe.status,De,Qe)},4==Qe.readyState||Qe.send(be),Qe}},T.load=function(ie,be,Te){T.ajax(ie,function(De){var Qe=T.parse(De.responseText);Te?be.call(Te,Qe):be(Qe)})};return T.getElementByPoint=function(ie,be){var De=(this.canvas,ke.doc.elementFromPoint(ie,be));if(ke.win.opera&&"svg"==De.tagName){var Qe=function(ie){var be=ie.getBoundingClientRect(),Te=ie.ownerDocument,De=Te.body,Qe=Te.documentElement,G=Qe.clientTop||De.clientTop||0,J=Qe.clientLeft||De.clientLeft||0;return{y:be.top+(g.win.pageYOffset||Qe.scrollTop||De.scrollTop)-G,x:be.left+(g.win.pageXOffset||Qe.scrollLeft||De.scrollLeft)-J}}(De),G=De.createSVGRect();G.x=ie-Qe.x,G.y=be-Qe.y,G.width=G.height=1;var J=De.getIntersectionList(G,null);J.length&&(De=J[J.length-1])}return De?Y(De):null},T.plugin=function(ie){ie(T,de,W,ke,he)},ke.win.Snap=T,T}(Ce||this);return ye.plugin(function(M,T,E,F,I){function O(W,Y){if(null==Y){var ge=!0;if(!(Y="linearGradient"==W.type||"radialGradient"==W.type?W.node.getAttribute("gradientTransform"):"pattern"==W.type?W.node.getAttribute("patternTransform"):W.node.getAttribute("transform")))return new M.Matrix;Y=M._.svgTransform2string(Y)}else Y=M._.rgTransform.test(Y)?Z(Y).replace(/\.{3}|\u2026/g,W._.transform||""):M._.svgTransform2string(Y),q(Y,"array")&&(Y=M.path?M.path.toString.call(Y):Z(Y)),W._.transform=Y;var ke=M._.transform2matrix(Y,W.getBBox(1));return ge?ke:void(W.matrix=ke)}function s(W){return function(){var Y=W?"<"+this.type:"",ge=this.node.attributes,ke=this.node.childNodes;if(W)for(var _e=0,Se=ge.length;Se>_e;_e++)Y+=" "+ge[_e].name+'="'+ge[_e].value.replace(/"/g,'\\"')+'"';if(ke.length){for(W&&(Y+=">"),_e=0,Se=ke.length;Se>_e;_e++)3==ke[_e].nodeType?Y+=ke[_e].nodeValue:1==ke[_e].nodeType&&(Y+=de(ke[_e]).toString());W&&(Y+="</"+this.type+">")}else W&&(Y+="/>");return Y}}var D=T.prototype,q=M.is,Z=String,H=M._unit2px,ce=M._.$,le=M._.make,ee=M._.getSomeDefs,se="hasOwnProperty",de=M._.wrap;D.getBBox=function(W){if("tspan"==this.type)return M._.box(this.node.getClientRects().item(0));if(!M.Matrix||!M.path)return this.node.getBBox();var Y=this,ge=new M.Matrix;if(Y.removed)return M._.box();for(;"use"==Y.type;)if(W||(ge=ge.add(Y.transform().localMatrix.translate(Y.attr("x")||0,Y.attr("y")||0))),Y.original)Y=Y.original;else{var ke=Y.attr("xlink:href");Y=Y.original=Y.node.ownerDocument.getElementById(ke.substring(ke.indexOf("#")+1))}var _e=Y._,Se=M.path.get[Y.type]||M.path.get.deflt;try{return W?(_e.bboxwt=Se?M.path.getBBox(Y.realPath=Se(Y)):M._.box(Y.node.getBBox()),M._.box(_e.bboxwt)):(Y.realPath=Se(Y),Y.matrix=Y.transform().localMatrix,_e.bbox=M.path.getBBox(M.path.map(Y.realPath,ge.add(Y.matrix))),M._.box(_e.bbox))}catch(We){return M._.box()}};var he=function(){return this.string};D.transform=function(W){var Y=this._;if(null==W){for(var ge,ke=this,_e=new M.Matrix(this.node.getCTM()),Se=O(this),We=[Se],$e=new M.Matrix,Fe=Se.toTransformString(),oe=Z(Se)==Z(this.matrix)?Z(Y.transform):Fe;"svg"!=ke.type&&(ke=ke.parent());)We.push(O(ke));for(ge=We.length;ge--;)$e.add(We[ge]);return{string:oe,globalMatrix:_e,totalMatrix:$e,localMatrix:Se,diffMatrix:_e.clone().add(Se.invert()),global:_e.toTransformString(),total:$e.toTransformString(),local:Fe,toString:he}}return W instanceof M.Matrix?(this.matrix=W,this._.transform=W.toTransformString()):O(this,W),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?ce(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?ce(this.node,{patternTransform:this.matrix}):ce(this.node,{transform:this.matrix})),this},D.parent=function(){return de(this.node.parentNode)},D.append=D.add=function(W){if(W){if("set"==W.type){var Y=this;return W.forEach(function(ge){Y.add(ge)}),this}W=de(W),this.node.appendChild(W.node),W.paper=this.paper}return this},D.appendTo=function(W){return W&&(W=de(W)).append(this),this},D.prepend=function(W){if(W){if("set"==W.type){var Y,ge=this;return W.forEach(function(_e){Y?Y.after(_e):ge.prepend(_e),Y=_e}),this}var ke=(W=de(W)).parent();this.node.insertBefore(W.node,this.node.firstChild),this.add&&this.add(),W.paper=this.paper,this.parent()&&this.parent().add(),ke&&ke.add()}return this},D.prependTo=function(W){return(W=de(W)).prepend(this),this},D.before=function(W){if("set"==W.type){var Y=this;return W.forEach(function(ke){var _e=ke.parent();Y.node.parentNode.insertBefore(ke.node,Y.node),_e&&_e.add()}),this.parent().add(),this}var ge=(W=de(W)).parent();return this.node.parentNode.insertBefore(W.node,this.node),this.parent()&&this.parent().add(),ge&&ge.add(),W.paper=this.paper,this},D.after=function(W){var Y=(W=de(W)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(W.node,this.node.nextSibling):this.node.parentNode.appendChild(W.node),this.parent()&&this.parent().add(),Y&&Y.add(),W.paper=this.paper,this},D.insertBefore=function(W){W=de(W);var Y=this.parent();return W.node.parentNode.insertBefore(this.node,W.node),this.paper=W.paper,Y&&Y.add(),W.parent()&&W.parent().add(),this},D.insertAfter=function(W){W=de(W);var Y=this.parent();return W.node.parentNode.insertBefore(this.node,W.node.nextSibling),this.paper=W.paper,Y&&Y.add(),W.parent()&&W.parent().add(),this},D.remove=function(){var W=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,W&&W.add(),this},D.select=function(W){return de(this.node.querySelector(W))},D.selectAll=function(W){for(var Y=this.node.querySelectorAll(W),ge=(M.set||Array)(),ke=0;ke<Y.length;ke++)ge.push(de(Y[ke]));return ge},D.asPX=function(W,Y){return null==Y&&(Y=this.attr(W)),+H(this,W,Y)},D.use=function(){var W,Y=this.node.id;return Y||(Y=this.id,ce(this.node,{id:Y})),W="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?le(this.type,this.node.parentNode):le("use",this.node.parentNode),ce(W.node,{"xlink:href":"#"+Y}),W.original=this,W},D.clone=function(){var W=de(this.node.cloneNode(!0));return ce(W.node,"id")&&ce(W.node,{id:W.id}),function j(W){function Y(st,dt){var xt=ce(st.node,dt);(xt=(xt=xt&&xt.match(Se))&&xt[2])&&"#"==xt.charAt()&&(xt=xt.substring(1))&&($e[xt]=($e[xt]||[]).concat(function(Pt){var Wt={};Wt[dt]=M.url(Pt),ce(st.node,Wt)}))}function ge(st){var dt=ce(st.node,"xlink:href");dt&&"#"==dt.charAt()&&(dt=dt.substring(1))&&($e[dt]=($e[dt]||[]).concat(function(xt){st.attr("xlink:href","#"+xt)}))}for(var ke,_e=W.selectAll("*"),Se=/^\s*url\(("|'|)(.*)\1\)\s*$/,We=[],$e={},Fe=0,oe=_e.length;oe>Fe;Fe++){Y(ke=_e[Fe],"fill"),Y(ke,"stroke"),Y(ke,"filter"),Y(ke,"mask"),Y(ke,"clip-path"),ge(ke);var me=ce(ke.node,"id");me&&(ce(ke.node,{id:ke.id}),We.push({old:me,id:ke.id}))}for(Fe=0,oe=We.length;oe>Fe;Fe++){var Ae=$e[We[Fe].old];if(Ae)for(var qe=0,et=Ae.length;et>qe;qe++)Ae[qe](We[Fe].id)}}(W),W.insertAfter(this),W},D.toDefs=function(){return ee(this).appendChild(this.node),this},D.pattern=D.toPattern=function(W,Y,ge,ke){var _e=le("pattern",ee(this));return null==W&&(W=this.getBBox()),q(W,"object")&&"x"in W&&(Y=W.y,ge=W.width,ke=W.height,W=W.x),ce(_e.node,{x:W,y:Y,width:ge,height:ke,patternUnits:"userSpaceOnUse",id:_e.id,viewBox:[W,Y,ge,ke].join(" ")}),_e.node.appendChild(this.node),_e},D.marker=function(W,Y,ge,ke,_e,Se){var We=le("marker",ee(this));return null==W&&(W=this.getBBox()),q(W,"object")&&"x"in W&&(Y=W.y,ge=W.width,ke=W.height,_e=W.refX||W.cx,Se=W.refY||W.cy,W=W.x),ce(We.node,{viewBox:[W,Y,ge,ke].join(" "),markerWidth:ge,markerHeight:ke,orient:"auto",refX:_e||0,refY:Se||0,id:We.id}),We.node.appendChild(this.node),We};var V={};D.data=function(W,Y){var ge=V[this.id]=V[this.id]||{};if(0==arguments.length)return Ee("snap.data.get."+this.id,this,ge,null),ge;if(1==arguments.length){if(M.is(W,"object")){for(var ke in W)W[se](ke)&&this.data(ke,W[ke]);return this}return Ee("snap.data.get."+this.id,this,ge[W],W),ge[W]}return ge[W]=Y,Ee("snap.data.set."+this.id,this,Y,W),this},D.removeData=function(W){return null==W?V[this.id]={}:V[this.id]&&delete V[this.id][W],this},D.outerSVG=D.toString=s(1),D.innerSVG=s(),D.toDataURL=function(){if(Ce&&Ce.btoa){var W=this.getBBox(),Y=M.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+W.x.toFixed(3),y:+W.y.toFixed(3),width:+W.width.toFixed(3),height:+W.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(Y)))}},I.prototype.select=D.select,I.prototype.selectAll=D.selectAll}),ye.plugin(function(M,T,E,F,I){function O(H,ce,le){return function(ee){var se=ee.slice(H,ce);return 1==se.length&&(se=se[0]),le?le(se):se}}var j=T.prototype,s=M.is,D=String,q="hasOwnProperty",Z=function(H,ce,le,ee){"function"!=typeof le||le.length||(ee=le,le=Be.linear),this.attr=H,this.dur=ce,le&&(this.easing=le),ee&&(this.callback=ee)};M._.Animation=Z,M.animation=function(H,ce,le,ee){return new Z(H,ce,le,ee)},j.inAnim=function(){var H=this,ce=[];for(var le in H.anims)H.anims[q](le)&&function(ee){ce.push({anim:new Z(ee._attrs,ee.dur,ee.easing,ee._callback),mina:ee,curStatus:ee.status(),status:function(se){return ee.status(se)},stop:function(){ee.stop()}})}(H.anims[le]);return ce},M.animate=function(H,ce,le,ee,se,de){"function"!=typeof se||se.length||(de=se,se=Be.linear);var he=Be.time(),V=Be(H,ce,he,he+ee,Be.time,le,se);return de&&Ee.once("mina.finish."+V.id,de),V},j.stop=function(){for(var H=this.inAnim(),ce=0,le=H.length;le>ce;ce++)H[ce].stop();return this},j.animate=function(H,ce,le,ee){"function"!=typeof le||le.length||(ee=le,le=Be.linear),H instanceof Z&&(ee=H.callback,le=H.easing,ce=H.dur,H=H.attr);var se,de,he,V,W=[],Y=[],ge={},ke=this;for(var _e in H)if(H[q](_e)){ke.equal?(se=(V=ke.equal(_e,D(H[_e]))).from,de=V.to,he=V.f):(se=+ke.attr(_e),de=+H[_e]);var Se=s(se,"array")?se.length:1;ge[_e]=O(W.length,W.length+Se,he),W=W.concat(se),Y=Y.concat(de)}var We=Be.time(),$e=Be(W,Y,We,We+ce,Be.time,function(Fe){var oe={};for(var me in ge)ge[q](me)&&(oe[me]=ge[me](Fe));ke.attr(oe)},le);return ke.anims[$e.id]=$e,$e._attrs=H,$e._callback=ee,Ee("snap.animcreated."+ke.id,$e),Ee.once("mina.finish."+$e.id,function(){Ee.off("mina.*."+$e.id),delete ke.anims[$e.id],ee&&ee.call(ke)}),Ee.once("mina.stop."+$e.id,function(){Ee.off("mina.*."+$e.id),delete ke.anims[$e.id]}),ke}}),ye.plugin(function(M,T,E,F,I){function O(Z,H,ce,le,ee,se){return null==H&&"[object SVGMatrix]"==j.call(Z)?(this.a=Z.a,this.b=Z.b,this.c=Z.c,this.d=Z.d,this.e=Z.e,void(this.f=Z.f)):void(null!=Z?(this.a=+Z,this.b=+H,this.c=+ce,this.d=+le,this.e=+ee,this.f=+se):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var j=Object.prototype.toString,s=String,D=Math;(function(Z){function H(le){return le[0]*le[0]+le[1]*le[1]}function ce(le){var ee=D.sqrt(H(le));le[0]&&(le[0]/=ee),le[1]&&(le[1]/=ee)}Z.add=function(le,ee,se,de,he,V){if(le&&le instanceof O)return this.add(le.a,le.b,le.c,le.d,le.e,le.f);var W=le*this.a+ee*this.c,Y=le*this.b+ee*this.d;return this.e+=he*this.a+V*this.c,this.f+=he*this.b+V*this.d,this.c=se*this.a+de*this.c,this.d=se*this.b+de*this.d,this.a=W,this.b=Y,this},O.prototype.multLeft=function(le,ee,se,de,he,V){if(le&&le instanceof O)return this.multLeft(le.a,le.b,le.c,le.d,le.e,le.f);var W=le*this.a+se*this.b,Y=le*this.c+se*this.d,ge=le*this.e+se*this.f+he;return this.b=ee*this.a+de*this.b,this.d=ee*this.c+de*this.d,this.f=ee*this.e+de*this.f+V,this.a=W,this.c=Y,this.e=ge,this},Z.invert=function(){var le=this,ee=le.a*le.d-le.b*le.c;return new O(le.d/ee,-le.b/ee,-le.c/ee,le.a/ee,(le.c*le.f-le.d*le.e)/ee,(le.b*le.e-le.a*le.f)/ee)},Z.clone=function(){return new O(this.a,this.b,this.c,this.d,this.e,this.f)},Z.translate=function(le,ee){return this.e+=le*this.a+ee*this.c,this.f+=le*this.b+ee*this.d,this},Z.scale=function(le,ee,se,de){return null==ee&&(ee=le),(se||de)&&this.translate(se,de),this.a*=le,this.b*=le,this.c*=ee,this.d*=ee,(se||de)&&this.translate(-se,-de),this},Z.rotate=function(le,ee,se){le=M.rad(le),ee=ee||0,se=se||0;var de=+D.cos(le).toFixed(9),he=+D.sin(le).toFixed(9);return this.add(de,he,-he,de,ee,se),this.add(1,0,0,1,-ee,-se)},Z.skewX=function(le){return this.skew(le,0)},Z.skewY=function(le){return this.skew(0,le)},Z.skew=function(le,ee){le=le||0,ee=ee||0,le=M.rad(le),ee=M.rad(ee);var se=D.tan(le).toFixed(9),de=D.tan(ee).toFixed(9);return this.add(1,de,se,1,0,0)},Z.x=function(le,ee){return le*this.a+ee*this.c+this.e},Z.y=function(le,ee){return le*this.b+ee*this.d+this.f},Z.get=function(le){return+this[s.fromCharCode(97+le)].toFixed(4)},Z.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},Z.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},Z.determinant=function(){return this.a*this.d-this.b*this.c},Z.split=function(){var le={};le.dx=this.e,le.dy=this.f;var ee=[[this.a,this.b],[this.c,this.d]];le.scalex=D.sqrt(H(ee[0])),ce(ee[0]),le.shear=ee[0][0]*ee[1][0]+ee[0][1]*ee[1][1],ee[1]=[ee[1][0]-ee[0][0]*le.shear,ee[1][1]-ee[0][1]*le.shear],le.scaley=D.sqrt(H(ee[1])),ce(ee[1]),le.shear/=le.scaley,this.determinant()<0&&(le.scalex=-le.scalex);var se=ee[0][1],de=ee[1][1];return 0>de?(le.rotate=M.deg(D.acos(de)),0>se&&(le.rotate=360-le.rotate)):le.rotate=M.deg(D.asin(se)),le.isSimple=!(+le.shear.toFixed(9)||le.scalex.toFixed(9)!=le.scaley.toFixed(9)&&le.rotate),le.isSuperSimple=!+le.shear.toFixed(9)&&le.scalex.toFixed(9)==le.scaley.toFixed(9)&&!le.rotate,le.noRotation=!+le.shear.toFixed(9)&&!le.rotate,le},Z.toTransformString=function(le){var ee=le||this.split();return+ee.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(ee.scalex=+ee.scalex.toFixed(4),ee.scaley=+ee.scaley.toFixed(4),ee.rotate=+ee.rotate.toFixed(4),(ee.dx||ee.dy?"t"+[+ee.dx.toFixed(4),+ee.dy.toFixed(4)]:"")+(ee.rotate?"r"+[+ee.rotate.toFixed(4),0,0]:"")+(1!=ee.scalex||1!=ee.scaley?"s"+[ee.scalex,ee.scaley,0,0]:""))}})(O.prototype),M.Matrix=O,M.matrix=function(Z,H,ce,le,ee,se){return new O(Z,H,ce,le,ee,se)}}),ye.plugin(function(M,T,E,F,I){function O(Y){return function(ge){if(Ee.stop(),ge instanceof I&&1==ge.node.childNodes.length&&("radialGradient"==ge.node.firstChild.tagName||"linearGradient"==ge.node.firstChild.tagName||"pattern"==ge.node.firstChild.tagName)&&(ge=ge.node.firstChild,ce(this).appendChild(ge),ge=Z(ge)),ge instanceof T)if("radialGradient"==ge.type||"linearGradient"==ge.type||"pattern"==ge.type){ge.node.id||ee(ge.node,{id:ge.id});var ke=se(ge.node.id)}else ke=ge.attr(Y);else if((ke=M.color(ge)).error){var _e=M(ce(this).ownerSVGElement).gradient(ge);_e?(_e.node.id||ee(_e.node,{id:_e.id}),ke=se(_e.node.id)):ke=ge}else ke=de(ke);var Se={};Se[Y]=ke,ee(this.node,Se),this.node.style[Y]=V}}function j(Y){Ee.stop(),Y==+Y&&(Y+="px"),this.node.style.fontSize=Y}function s(Y){for(var ge=[],ke=Y.childNodes,_e=0,Se=ke.length;Se>_e;_e++){var We=ke[_e];3==We.nodeType&&ge.push(We.nodeValue),"tspan"==We.tagName&&(1==We.childNodes.length&&3==We.firstChild.nodeType?ge.push(We.firstChild.nodeValue):ge.push(s(We)))}return ge}function D(){return Ee.stop(),this.node.style.fontSize}var Y,q=M._.make,Z=M._.wrap,H=M.is,ce=M._.getSomeDefs,le=/^url\((['"]?)([^)]+)\1\)$/,ee=M._.$,se=M.url,de=String,he=M._.separator,V="";M.deurl=function(Y){var ge=String(Y).match(le);return ge?ge[2]:Y},Ee.on("snap.util.attr.mask",function(Y){if(Y instanceof T||Y instanceof I){if(Ee.stop(),Y instanceof I&&1==Y.node.childNodes.length&&(Y=Y.node.firstChild,ce(this).appendChild(Y),Y=Z(Y)),"mask"==Y.type)var ge=Y;else(ge=q("mask",ce(this))).node.appendChild(Y.node);!ge.node.id&&ee(ge.node,{id:ge.id}),ee(this.node,{mask:se(ge.id)})}}),Y=function(Y){if(Y instanceof T||Y instanceof I){Ee.stop();for(var ge,ke=Y.node;ke;){if("clipPath"===ke.nodeName){ge=new T(ke);break}if("svg"===ke.nodeName){ge=void 0;break}ke=ke.parentNode}ge||((ge=q("clipPath",ce(this))).node.appendChild(Y.node),!ge.node.id&&ee(ge.node,{id:ge.id})),ee(this.node,{"clip-path":se(ge.node.id||ge.id)})}},Ee.on("snap.util.attr.clip",Y),Ee.on("snap.util.attr.clip-path",Y),Ee.on("snap.util.attr.clipPath",Y),Ee.on("snap.util.attr.fill",O("fill")),Ee.on("snap.util.attr.stroke",O("stroke"));var W=/^([lr])(?:\(([^)]*)\))?(.*)$/i;Ee.on("snap.util.grad.parse",function(Y){function ge(Ae,qe){for(var et=(qe-Fe)/(Ae-oe),st=oe;Ae>st;st++)We[st].offset=+(+Fe+et*(st-oe)).toFixed(2);oe=Ae,Fe=qe}var ke=(Y=de(Y)).match(W);if(!ke)return null;var _e=ke[1],Se=ke[2],We=ke[3];1==(Se=Se.split(/\s*,\s*/).map(function(Ae){return+Ae==Ae?+Ae:Ae})).length&&0==Se[0]&&(Se=[]);var $e=(We=(We=We.split("-")).map(function(Ae){var qe={color:(Ae=Ae.split(":"))[0]};return Ae[1]&&(qe.offset=parseFloat(Ae[1])),qe})).length,Fe=0,oe=0;$e--;for(var me=0;$e>me;me++)"offset"in We[me]&&ge(me,We[me].offset);return We[$e].offset=We[$e].offset||100,ge($e,We[$e].offset),{type:_e,params:Se,stops:We}}),Ee.on("snap.util.attr.d",function(Y){Ee.stop(),H(Y,"array")&&H(Y[0],"array")&&(Y=M.path.toString.call(Y)),(Y=de(Y)).match(/[ruo]/i)&&(Y=M.path.toAbsolute(Y)),ee(this.node,{d:Y})})(-1),Ee.on("snap.util.attr.#text",function(Y){Ee.stop(),Y=de(Y);for(var ge=F.doc.createTextNode(Y);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(ge)})(-1),Ee.on("snap.util.attr.path",function(Y){Ee.stop(),this.attr({d:Y})})(-1),Ee.on("snap.util.attr.class",function(Y){Ee.stop(),this.node.className.baseVal=Y})(-1),Ee.on("snap.util.attr.viewBox",function(Y){var ge;ge=H(Y,"object")&&"x"in Y?[Y.x,Y.y,Y.width,Y.height].join(" "):H(Y,"array")?Y.join(" "):Y,ee(this.node,{viewBox:ge}),Ee.stop()})(-1),Ee.on("snap.util.attr.transform",function(Y){this.transform(Y),Ee.stop()})(-1),Ee.on("snap.util.attr.r",function(Y){"rect"==this.type&&(Ee.stop(),ee(this.node,{rx:Y,ry:Y}))})(-1),Ee.on("snap.util.attr.textpath",function(Y){if(Ee.stop(),"text"==this.type){var ge,ke,_e;if(!Y&&this.textPath){for(ke=this.textPath;ke.node.firstChild;)this.node.appendChild(ke.node.firstChild);return ke.remove(),void delete this.textPath}if(H(Y,"string")){var Se=ce(this),We=Z(Se.parentNode).path(Y);Se.appendChild(We.node),ge=We.id,We.attr({id:ge})}else(Y=Z(Y))instanceof T&&((ge=Y.attr("id"))||(ge=Y.id,Y.attr({id:ge})));if(ge)if(ke=this.textPath,_e=this.node,ke)ke.attr({"xlink:href":"#"+ge});else{for(ke=ee("textPath",{"xlink:href":"#"+ge});_e.firstChild;)ke.appendChild(_e.firstChild);_e.appendChild(ke),this.textPath=Z(ke)}}})(-1),Ee.on("snap.util.attr.text",function(Y){if("text"==this.type){for(var ge=this.node,ke=function(Se){var We=ee("tspan");if(H(Se,"array"))for(var $e=0;$e<Se.length;$e++)We.appendChild(ke(Se[$e]));else We.appendChild(F.doc.createTextNode(Se));return We.normalize&&We.normalize(),We};ge.firstChild;)ge.removeChild(ge.firstChild);for(var _e=ke(Y);_e.firstChild;)ge.appendChild(_e.firstChild)}Ee.stop()})(-1),Ee.on("snap.util.attr.fontSize",j)(-1),Ee.on("snap.util.attr.font-size",j)(-1),Ee.on("snap.util.getattr.transform",function(){return Ee.stop(),this.transform()})(-1),Ee.on("snap.util.getattr.textpath",function(){return Ee.stop(),this.textPath})(-1),function(){function Y(ke){return function(){Ee.stop();var _e=F.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+ke);return"none"==_e?_e:M(F.doc.getElementById(_e.match(le)[1]))}}function ge(ke){return function(_e){Ee.stop();var Se="marker"+ke.charAt(0).toUpperCase()+ke.substring(1);if(""!=_e&&_e){if("marker"==_e.type){var We=_e.node.id;return We||ee(_e.node,{id:_e.id}),void(this.node.style[Se]=se(We))}}else this.node.style[Se]="none"}}Ee.on("snap.util.getattr.marker-end",Y("end"))(-1),Ee.on("snap.util.getattr.markerEnd",Y("end"))(-1),Ee.on("snap.util.getattr.marker-start",Y("start"))(-1),Ee.on("snap.util.getattr.markerStart",Y("start"))(-1),Ee.on("snap.util.getattr.marker-mid",Y("mid"))(-1),Ee.on("snap.util.getattr.markerMid",Y("mid"))(-1),Ee.on("snap.util.attr.marker-end",ge("end"))(-1),Ee.on("snap.util.attr.markerEnd",ge("end"))(-1),Ee.on("snap.util.attr.marker-start",ge("start"))(-1),Ee.on("snap.util.attr.markerStart",ge("start"))(-1),Ee.on("snap.util.attr.marker-mid",ge("mid"))(-1),Ee.on("snap.util.attr.markerMid",ge("mid"))(-1)}(),Ee.on("snap.util.getattr.r",function(){return"rect"==this.type&&ee(this.node,"rx")==ee(this.node,"ry")?(Ee.stop(),ee(this.node,"rx")):void 0})(-1),Ee.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){Ee.stop();var Y=s(this.node);return 1==Y.length?Y[0]:Y}})(-1),Ee.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),Ee.on("snap.util.getattr.fill",function(Y){if(!Y){Ee.stop();var ge=Ee("snap.util.getattr.fill",this,!0).firstDefined();return M(M.deurl(ge))||ge}})(-1),Ee.on("snap.util.getattr.stroke",function(Y){if(!Y){Ee.stop();var ge=Ee("snap.util.getattr.stroke",this,!0).firstDefined();return M(M.deurl(ge))||ge}})(-1),Ee.on("snap.util.getattr.viewBox",function(){Ee.stop();var Y=ee(this.node,"viewBox");return Y?(Y=Y.split(he),M._.box(+Y[0],+Y[1],+Y[2],+Y[3])):void 0})(-1),Ee.on("snap.util.getattr.points",function(){var Y=ee(this.node,"points");return Ee.stop(),Y?Y.split(he):void 0})(-1),Ee.on("snap.util.getattr.path",function(){var Y=ee(this.node,"d");return Ee.stop(),Y})(-1),Ee.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),Ee.on("snap.util.getattr.fontSize",D)(-1),Ee.on("snap.util.getattr.font-size",D)(-1)}),ye.plugin(function(M,T,E,F,I){var O=/\S+/g,j=String,s=T.prototype;s.addClass=function(D){var q,H,ce,le=j(D||"").match(O)||[],ee=this.node,se=ee.className.baseVal,de=se.match(O)||[];if(le.length){for(q=0;H=le[q++];)~de.indexOf(H)||de.push(H);se!=(ce=de.join(" "))&&(ee.className.baseVal=ce)}return this},s.removeClass=function(D){var q,Z,H,ce,le=j(D||"").match(O)||[],ee=this.node,se=ee.className.baseVal,de=se.match(O)||[];if(de.length){for(q=0;H=le[q++];)~(Z=de.indexOf(H))&&de.splice(Z,1);se!=(ce=de.join(" "))&&(ee.className.baseVal=ce)}return this},s.hasClass=function(D){return!!~(this.node.className.baseVal.match(O)||[]).indexOf(D)},s.toggleClass=function(D,q){if(null!=q)return q?this.addClass(D):this.removeClass(D);var Z,H,ce,le,ee=(D||"").match(O)||[],se=this.node,de=se.className.baseVal,he=de.match(O)||[];for(Z=0;ce=ee[Z++];)~(H=he.indexOf(ce))?he.splice(H,1):he.push(ce);return de!=(le=he.join(" "))&&(se.className.baseVal=le),this}}),ye.plugin(function(M,T,E,F,I){function O(H){return H}function j(H){return function(ce){return+ce.toFixed(3)+H}}var s={"+":function(H,ce){return H+ce},"-":function(H,ce){return H-ce},"/":function(H,ce){return H/ce},"*":function(H,ce){return H*ce}},D=String,q=/[a-z]+$/i,Z=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;Ee.on("snap.util.attr",function(H){var ce=D(H).match(Z);if(ce){var le=Ee.nt(),ee=le.substring(le.lastIndexOf(".")+1),se=this.attr(ee),de={};Ee.stop();var he=ce[3]||"",V=se.match(q),W=s[ce[1]];if(V&&V==he?H=W(parseFloat(se),+ce[2]):(se=this.asPX(ee),H=W(this.asPX(ee),this.asPX(ee,ce[2]+he))),isNaN(se)||isNaN(H))return;de[ee]=H,this.attr(de)}})(-10),Ee.on("snap.util.equal",function(H,ce){var le=D(this.attr(H)||""),ee=D(ce).match(Z);if(ee){Ee.stop();var se=ee[3]||"",de=le.match(q),he=s[ee[1]];return de&&de==se?{from:parseFloat(le),to:he(parseFloat(le),+ee[2]),f:j(de)}:{from:le=this.asPX(H),to:he(le,this.asPX(H,ee[2]+se)),f:O}}})(-10)}),ye.plugin(function(M,T,E,F,I){var O=E.prototype,j=M.is;O.rect=function(D,q,Z,H,ce,le){var ee;return null==le&&(le=ce),j(D,"object")&&"[object Object]"==D?ee=D:null!=D&&(ee={x:D,y:q,width:Z,height:H},null!=ce&&(ee.rx=ce,ee.ry=le)),this.el("rect",ee)},O.circle=function(D,q,Z){var H;return j(D,"object")&&"[object Object]"==D?H=D:null!=D&&(H={cx:D,cy:q,r:Z}),this.el("circle",H)};var s=function(){function D(){this.parentNode.removeChild(this)}return function(q,Z){var H=F.doc.createElement("img"),ce=F.doc.body;H.style.cssText="position:absolute;left:-9999em;top:-9999em",H.onload=function(){Z.call(H),H.onload=H.onerror=null,ce.removeChild(H)},H.onerror=D,ce.appendChild(H),H.src=q}}();O.image=function(D,q,Z,H,ce){var le=this.el("image");if(j(D,"object")&&"src"in D)le.attr(D);else if(null!=D){var ee={"xlink:href":D,preserveAspectRatio:"none"};null!=q&&null!=Z&&(ee.x=q,ee.y=Z),null!=H&&null!=ce?(ee.width=H,ee.height=ce):s(D,function(){M._.$(le.node,{width:this.offsetWidth,height:this.offsetHeight})}),M._.$(le.node,ee)}return le},O.ellipse=function(D,q,Z,H){var ce;return j(D,"object")&&"[object Object]"==D?ce=D:null!=D&&(ce={cx:D,cy:q,rx:Z,ry:H}),this.el("ellipse",ce)},O.path=function(D){var q;return j(D,"object")&&!j(D,"array")?q=D:D&&(q={d:D}),this.el("path",q)},O.group=O.g=function(D){var q=this.el("g");return 1==arguments.length&&D&&!D.type?q.attr(D):arguments.length&&q.add(Array.prototype.slice.call(arguments,0)),q},O.svg=function(D,q,Z,H,ce,le,ee,se){var de={};return j(D,"object")&&null==q?de=D:(null!=D&&(de.x=D),null!=q&&(de.y=q),null!=Z&&(de.width=Z),null!=H&&(de.height=H),null!=ce&&null!=le&&null!=ee&&null!=se&&(de.viewBox=[ce,le,ee,se])),this.el("svg",de)},O.mask=function(D){var q=this.el("mask");return 1==arguments.length&&D&&!D.type?q.attr(D):arguments.length&&q.add(Array.prototype.slice.call(arguments,0)),q},O.ptrn=function(D,q,Z,H,ce,le,ee,se){if(j(D,"object"))var de=D;else de={patternUnits:"userSpaceOnUse"},D&&(de.x=D),q&&(de.y=q),null!=Z&&(de.width=Z),null!=H&&(de.height=H),de.viewBox=null!=ce&&null!=le&&null!=ee&&null!=se?[ce,le,ee,se]:[D||0,q||0,Z||0,H||0];return this.el("pattern",de)},O.use=function(D){return null!=D?(D instanceof T&&(D.attr("id")||D.attr({id:M._.id(D)}),D=D.attr("id")),"#"==String(D).charAt()&&(D=D.substring(1)),this.el("use",{"xlink:href":"#"+D})):T.prototype.use.call(this)},O.symbol=function(D,q,Z,H){var ce={};return null!=D&&null!=q&&null!=Z&&null!=H&&(ce.viewBox=[D,q,Z,H]),this.el("symbol",ce)},O.text=function(D,q,Z){var H={};return j(D,"object")?H=D:null!=D&&(H={x:D,y:q,text:Z||""}),this.el("text",H)},O.line=function(D,q,Z,H){var ce={};return j(D,"object")?ce=D:null!=D&&(ce={x1:D,x2:Z,y1:q,y2:H}),this.el("line",ce)},O.polyline=function(D){arguments.length>1&&(D=Array.prototype.slice.call(arguments,0));var q={};return j(D,"object")&&!j(D,"array")?q=D:null!=D&&(q={points:D}),this.el("polyline",q)},O.polygon=function(D){arguments.length>1&&(D=Array.prototype.slice.call(arguments,0));var q={};return j(D,"object")&&!j(D,"array")?q=D:null!=D&&(q={points:D}),this.el("polygon",q)},function(){function D(){return this.selectAll("stop")}function q(de,he){var V=se("stop"),W={offset:+he+"%"};de=M.color(de),W["stop-color"]=de.hex,de.opacity<1&&(W["stop-opacity"]=de.opacity),se(V,W);for(var Y,ge=this.stops(),ke=0;ke<ge.length;ke++){if(parseFloat(ge[ke].attr("offset"))>he){this.node.insertBefore(V,ge[ke].node),Y=!0;break}}return Y||this.node.appendChild(V),this}function Z(){if("linearGradient"==this.type){var de=se(this.node,"x1")||0,he=se(this.node,"x2")||1,V=se(this.node,"y1")||0,W=se(this.node,"y2")||0;return M._.box(de,V,math.abs(he-de),math.abs(W-V))}var Y=this.node.cx||.5,ge=this.node.cy||.5,ke=this.node.r||0;return M._.box(Y-ke,ge-ke,2*ke,2*ke)}function H(de){var he=de,V=this.stops();if("string"==typeof de&&(he=Ee("snap.util.grad.parse",null,"l(0,0,0,1)"+de).firstDefined().stops),M.is(he,"array")){for(var W=0;W<V.length;W++)if(he[W]){var Y=M.color(he[W].color),ge={offset:he[W].offset+"%"};ge["stop-color"]=Y.hex,Y.opacity<1&&(ge["stop-opacity"]=Y.opacity),V[W].attr(ge)}else V[W].remove();for(W=V.length;W<he.length;W++)this.addStop(he[W].color,he[W].offset);return this}}function le(de,he,V,W,Y){var ge=M._.make("linearGradient",de);return ge.stops=D,ge.addStop=q,ge.getBBox=Z,ge.setStops=H,null!=he&&se(ge.node,{x1:he,y1:V,x2:W,y2:Y}),ge}function ee(de,he,V,W,Y,ge){var ke=M._.make("radialGradient",de);return ke.stops=D,ke.addStop=q,ke.getBBox=Z,null!=he&&se(ke.node,{cx:he,cy:V,r:W}),null!=Y&&null!=ge&&se(ke.node,{fx:Y,fy:ge}),ke}var se=M._.$;O.gradient=function(de){return function ce(de,he){var V,W=Ee("snap.util.grad.parse",null,he).firstDefined();if(!W)return null;W.params.unshift(de),V="l"==W.type.toLowerCase()?le.apply(0,W.params):ee.apply(0,W.params),W.type!=W.type.toLowerCase()&&se(V.node,{gradientUnits:"userSpaceOnUse"});for(var Y=W.stops,ge=Y.length,ke=0;ge>ke;ke++){var _e=Y[ke];V.addStop(_e.color,_e.offset)}return V}(this.defs,de)},O.gradientLinear=function(de,he,V,W){return le(this.defs,de,he,V,W)},O.gradientRadial=function(de,he,V,W,Y){return ee(this.defs,de,he,V,W,Y)},O.toString=function(){var de,he=this.node.ownerDocument,V=he.createDocumentFragment(),W=he.createElement("div"),Y=this.node.cloneNode(!0);return V.appendChild(W),W.appendChild(Y),M._.$(Y,{xmlns:"http://www.w3.org/2000/svg"}),de=W.innerHTML,V.removeChild(V.firstChild),de},O.toDataURL=function(){return Ce&&Ce.btoa?"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this))):void 0},O.clear=function(){for(var de,he=this.node.firstChild;he;)de=he.nextSibling,"defs"!=he.tagName?he.parentNode.removeChild(he):O.clear.call({node:he}),he=de}}()}),ye.plugin(function(M,T,E,F){function I(Xe){var Je=I.ps=I.ps||{};return Je[Xe]?Je[Xe].sleep=100:Je[Xe]={sleep:100},setTimeout(function(){for(var Pe in Je)Je[tt](Pe)&&Pe!=Xe&&(Je[Pe].sleep--,!Je[Pe].sleep&&delete Je[Pe])}),Je[Xe]}function O(Xe,Je,Pe,ie){return null==Xe&&(Xe=Je=Pe=ie=0),null==Je&&(Je=Xe.y,Pe=Xe.width,ie=Xe.height,Xe=Xe.x),{x:Xe,y:Je,width:Pe,w:Pe,height:ie,h:ie,x2:Xe+Pe,y2:Je+ie,cx:Xe+Pe/2,cy:Je+ie/2,r1:ct.min(Pe,ie)/2,r2:ct.max(Pe,ie)/2,r0:ct.sqrt(Pe*Pe+ie*ie)/2,path:Se(Xe,Je,Pe,ie),vb:[Xe,Je,Pe,ie].join(" ")}}function j(){return this.join(",").replace(it,"$1")}function s(Xe){var Je=Wt(Xe);return Je.toString=j,Je}function D(Xe,Je,Pe,ie,be,Te,De,Qe,G){return null==G?se(Xe,Je,Pe,ie,be,Te,De,Qe):Z(Xe,Je,Pe,ie,be,Te,De,Qe,function de(Xe,Je,Pe,ie,be,Te,De,Qe,G){if(!(0>G||se(Xe,Je,Pe,ie,be,Te,De,Qe)<G)){var J,X=1,ae=X/2,ne=X-ae,te=.01;for(J=se(Xe,Je,Pe,ie,be,Te,De,Qe,ne);Ut(J-G)>te;)J=se(Xe,Je,Pe,ie,be,Te,De,Qe,ne+=(G>J?1:-1)*(ae/=2));return ne}}(Xe,Je,Pe,ie,be,Te,De,Qe,G))}function q(Xe,Je){function Pe(ie){return+(+ie).toFixed(3)}return M._.cacher(function(ie,be,Te){ie instanceof T&&(ie=ie.attr("d"));for(var De,Qe,G,J,X,ae="",ne={},te=0,ue=0,we=(ie=et(ie)).length;we>ue;ue++){if("M"==(G=ie[ue])[0])De=+G[1],Qe=+G[2];else{if(te+(J=D(De,Qe,G[1],G[2],G[3],G[4],G[5],G[6]))>be){if(Je&&!ne.start){if(ae+=["C"+Pe((X=D(De,Qe,G[1],G[2],G[3],G[4],G[5],G[6],be-te)).start.x),Pe(X.start.y),Pe(X.m.x),Pe(X.m.y),Pe(X.x),Pe(X.y)],Te)return ae;ne.start=ae,ae=["M"+Pe(X.x),Pe(X.y)+"C"+Pe(X.n.x),Pe(X.n.y),Pe(X.end.x),Pe(X.end.y),Pe(G[5]),Pe(G[6])].join(),te+=J,De=+G[5],Qe=+G[6];continue}if(!Xe&&!Je)return D(De,Qe,G[1],G[2],G[3],G[4],G[5],G[6],be-te)}te+=J,De=+G[5],Qe=+G[6]}ae+=G.shift()+G}return ne.end=ae,Xe?te:Je?ne:Z(De,Qe,G[0],G[1],G[2],G[3],G[4],G[5],1)},null,M._.clone)}function Z(Xe,Je,Pe,ie,be,Te,De,Qe,G){var J=1-G,X=St(J,3),ae=St(J,2),ne=G*G,te=ne*G,Le=Xe+2*G*(Pe-Xe)+ne*(be-2*Pe+Xe),Ie=Je+2*G*(ie-Je)+ne*(Te-2*ie+Je),Me=Pe+2*G*(be-Pe)+ne*(De-2*be+Pe),Ne=ie+2*G*(Te-ie)+ne*(Qe-2*Te+ie);return{x:X*Xe+3*ae*G*Pe+3*J*G*G*be+te*De,y:X*Je+3*ae*G*ie+3*J*G*G*Te+te*Qe,m:{x:Le,y:Ie},n:{x:Me,y:Ne},start:{x:J*Xe+G*Pe,y:J*Je+G*ie},end:{x:J*be+G*De,y:J*Te+G*Qe},alpha:90-180*ct.atan2(Le-Me,Ie-Ne)/At}}function H(Xe,Je,Pe,ie,be,Te,De,Qe){M.is(Xe,"array")||(Xe=[Xe,Je,Pe,ie,be,Te,De,Qe]);var G=qe.apply(null,Xe);return O(G.min.x,G.min.y,G.max.x-G.min.x,G.max.y-G.min.y)}function ce(Xe,Je,Pe){return Je>=Xe.x&&Je<=Xe.x+Xe.width&&Pe>=Xe.y&&Pe<=Xe.y+Xe.height}function le(Xe,Je){return Xe=O(Xe),ce(Je=O(Je),Xe.x,Xe.y)||ce(Je,Xe.x2,Xe.y)||ce(Je,Xe.x,Xe.y2)||ce(Je,Xe.x2,Xe.y2)||ce(Xe,Je.x,Je.y)||ce(Xe,Je.x2,Je.y)||ce(Xe,Je.x,Je.y2)||ce(Xe,Je.x2,Je.y2)||(Xe.x<Je.x2&&Xe.x>Je.x||Je.x<Xe.x2&&Je.x>Xe.x)&&(Xe.y<Je.y2&&Xe.y>Je.y||Je.y<Xe.y2&&Je.y>Xe.y)}function ee(Xe,Je,Pe,ie,be){return Xe*(Xe*(-3*Je+9*Pe-9*ie+3*be)+6*Je-12*Pe+6*ie)-3*Je+3*Pe}function se(Xe,Je,Pe,ie,be,Te,De,Qe,G){null==G&&(G=1);for(var J=(G=G>1?1:0>G?0:G)/2,ae=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ne=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],te=0,ue=0;12>ue;ue++){var we=J*ae[ue]+J,Le=ee(we,Xe,Pe,be,De),Ie=ee(we,Je,ie,Te,Qe),Me=Le*Le+Ie*Ie;te+=ne[ue]*ct.sqrt(Me)}return J*te}function he(Xe,Je,Pe,ie,be,Te,De,Qe){if(!(It(Xe,Pe)<yt(be,De)||yt(Xe,Pe)>It(be,De)||It(Je,ie)<yt(Te,Qe)||yt(Je,ie)>It(Te,Qe))){var X=(Xe-Pe)*(Te-Qe)-(Je-ie)*(be-De);if(X){var ae=((Xe*ie-Je*Pe)*(be-De)-(Xe-Pe)*(be*Qe-Te*De))/X,ne=((Xe*ie-Je*Pe)*(Te-Qe)-(Je-ie)*(be*Qe-Te*De))/X,te=+ae.toFixed(2),ue=+ne.toFixed(2);if(!(te<+yt(Xe,Pe).toFixed(2)||te>+It(Xe,Pe).toFixed(2)||te<+yt(be,De).toFixed(2)||te>+It(be,De).toFixed(2)||ue<+yt(Je,ie).toFixed(2)||ue>+It(Je,ie).toFixed(2)||ue<+yt(Te,Qe).toFixed(2)||ue>+It(Te,Qe).toFixed(2)))return{x:ae,y:ne}}}}function V(Xe,Je,Pe){if(!le(H(Xe),H(Je)))return Pe?0:[];for(var Qe=~~(se.apply(0,Xe)/8),G=~~(se.apply(0,Je)/8),J=[],X=[],ae={},ne=Pe?0:[],te=0;Qe+1>te;te++){var ue=Z.apply(0,Xe.concat(te/Qe));J.push({x:ue.x,y:ue.y,t:te/Qe})}for(te=0;G+1>te;te++)ue=Z.apply(0,Je.concat(te/G)),X.push({x:ue.x,y:ue.y,t:te/G});for(te=0;Qe>te;te++)for(var we=0;G>we;we++){var Le=J[te],Ie=J[te+1],Me=X[we],Ne=X[we+1],je=Ut(Ie.x-Le.x)<.001?"y":"x",Re=Ut(Ne.x-Me.x)<.001?"y":"x",He=he(Le.x,Le.y,Ie.x,Ie.y,Me.x,Me.y,Ne.x,Ne.y);if(He){if(ae[He.x.toFixed(4)]==He.y.toFixed(4))continue;ae[He.x.toFixed(4)]=He.y.toFixed(4);var Ze=Le.t+Ut((He[je]-Le[je])/(Ie[je]-Le[je]))*(Ie.t-Le.t),Ke=Me.t+Ut((He[Re]-Me[Re])/(Ne[Re]-Me[Re]))*(Ne.t-Me.t);Ze>=0&&1>=Ze&&Ke>=0&&1>=Ke&&(Pe?ne++:ne.push({x:He.x,y:He.y,t1:Ze,t2:Ke}))}}return ne}function ge(Xe,Je,Pe){Xe=et(Xe),Je=et(Je);for(var ie,be,Te,De,Qe,G,J,X,ae,ne,te=Pe?0:[],ue=0,we=Xe.length;we>ue;ue++){var Le=Xe[ue];if("M"==Le[0])ie=Qe=Le[1],be=G=Le[2];else{"C"==Le[0]?(ae=[ie,be].concat(Le.slice(1)),ie=ae[6],be=ae[7]):(ae=[ie,be,ie,be,Qe,G,Qe,G],ie=Qe,be=G);for(var Ie=0,Me=Je.length;Me>Ie;Ie++){var Ne=Je[Ie];if("M"==Ne[0])Te=J=Ne[1],De=X=Ne[2];else{"C"==Ne[0]?(ne=[Te,De].concat(Ne.slice(1)),Te=ne[6],De=ne[7]):(ne=[Te,De,Te,De,J,X,J,X],Te=J,De=X);var je=V(ae,ne,Pe);if(Pe)te+=je;else{for(var Re=0,He=je.length;He>Re;Re++)je[Re].segment1=ue,je[Re].segment2=Ie,je[Re].bez1=ae,je[Re].bez2=ne;te=te.concat(je)}}}}}return te}function _e(Xe){var Je=I(Xe);if(Je.bbox)return Wt(Je.bbox);if(!Xe)return O();for(var Pe,ie=0,be=0,Te=[],De=[],Qe=0,G=(Xe=et(Xe)).length;G>Qe;Qe++)if("M"==(Pe=Xe[Qe])[0])ie=Pe[1],be=Pe[2],Te.push(ie),De.push(be);else{var J=qe(ie,be,Pe[1],Pe[2],Pe[3],Pe[4],Pe[5],Pe[6]);Te=Te.concat(J.min.x,J.max.x),De=De.concat(J.min.y,J.max.y),ie=Pe[5],be=Pe[6]}var X=yt.apply(0,Te),ae=yt.apply(0,De),ue=O(X,ae,It.apply(0,Te)-X,It.apply(0,De)-ae);return Je.bbox=Wt(ue),ue}function Se(Xe,Je,Pe,ie,be){if(be)return[["M",+Xe+ +be,Je],["l",Pe-2*be,0],["a",be,be,0,0,1,be,be],["l",0,ie-2*be],["a",be,be,0,0,1,-be,be],["l",2*be-Pe,0],["a",be,be,0,0,1,-be,-be],["l",0,2*be-ie],["a",be,be,0,0,1,be,-be],["z"]];var Te=[["M",Xe,Je],["l",Pe,0],["l",0,ie],["l",-Pe,0],["z"]];return Te.toString=j,Te}function We(Xe,Je,Pe,ie,be){if(null==be&&null==ie&&(ie=Pe),Xe=+Xe,Je=+Je,Pe=+Pe,ie=+ie,null!=be)var Te=Math.PI/180,De=Xe+Pe*Math.cos(-ie*Te),Qe=Xe+Pe*Math.cos(-be*Te),X=[["M",De,Je+Pe*Math.sin(-ie*Te)],["A",Pe,Pe,0,+(be-ie>180),0,Qe,Je+Pe*Math.sin(-be*Te)]];else X=[["M",Xe,Je],["m",0,-ie],["a",Pe,ie,0,1,1,0,2*ie],["a",Pe,ie,0,1,1,0,-2*ie],["z"]];return X.toString=j,X}function Fe(Xe){var Je=I(Xe);if(Je.abs)return s(Je.abs);if(Pt(Xe,"array")&&Pt(Xe&&Xe[0],"array")||(Xe=M.parsePathString(Xe)),!Xe||!Xe.length)return[["M",0,0]];var Pe,ie=[],be=0,Te=0,De=0,Qe=0,G=0;"M"==Xe[0][0]&&(De=be=+Xe[0][1],Qe=Te=+Xe[0][2],G++,ie[0]=["M",be,Te]);for(var J,X,ae=3==Xe.length&&"M"==Xe[0][0]&&"R"==Xe[1][0].toUpperCase()&&"Z"==Xe[2][0].toUpperCase(),ne=G,te=Xe.length;te>ne;ne++){if(ie.push(J=[]),(Pe=(X=Xe[ne])[0])!=Pe.toUpperCase())switch(J[0]=Pe.toUpperCase(),J[0]){case"A":J[1]=X[1],J[2]=X[2],J[3]=X[3],J[4]=X[4],J[5]=X[5],J[6]=+X[6]+be,J[7]=+X[7]+Te;break;case"V":J[1]=+X[1]+Te;break;case"H":J[1]=+X[1]+be;break;case"R":for(var ue=[be,Te].concat(X.slice(1)),we=2,Le=ue.length;Le>we;we++)ue[we]=+ue[we]+be,ue[++we]=+ue[we]+Te;ie.pop(),ie=ie.concat(dt(ue,ae));break;case"O":ie.pop(),(ue=We(be,Te,X[1],X[2])).push(ue[0]),ie=ie.concat(ue);break;case"U":ie.pop(),ie=ie.concat(We(be,Te,X[1],X[2],X[3])),J=["U"].concat(ie[ie.length-1].slice(-2));break;case"M":De=+X[1]+be,Qe=+X[2]+Te;default:for(we=1,Le=X.length;Le>we;we++)J[we]=+X[we]+(we%2?be:Te)}else if("R"==Pe)ue=[be,Te].concat(X.slice(1)),ie.pop(),ie=ie.concat(dt(ue,ae)),J=["R"].concat(X.slice(-2));else if("O"==Pe)ie.pop(),(ue=We(be,Te,X[1],X[2])).push(ue[0]),ie=ie.concat(ue);else if("U"==Pe)ie.pop(),ie=ie.concat(We(be,Te,X[1],X[2],X[3])),J=["U"].concat(ie[ie.length-1].slice(-2));else for(var Ie=0,Me=X.length;Me>Ie;Ie++)J[Ie]=X[Ie];if("O"!=(Pe=Pe.toUpperCase()))switch(J[0]){case"Z":be=+De,Te=+Qe;break;case"H":be=J[1];break;case"V":Te=J[1];break;case"M":De=J[J.length-2],Qe=J[J.length-1];default:be=J[J.length-2],Te=J[J.length-1]}}return ie.toString=j,Je.abs=s(ie),ie}function oe(Xe,Je,Pe,ie){return[Xe,Je,Pe,ie,Pe,ie]}function me(Xe,Je,Pe,ie,be,Te){var De=.3333333333333333,Qe=2/3;return[De*Xe+Qe*Pe,De*Je+Qe*ie,De*be+Qe*Pe,De*Te+Qe*ie,be,Te]}function Ae(Xe,Je,Pe,ie,be,Te,De,Qe,G,J){var X,ae=120*At/180,ne=At/180*(+be||0),te=[],ue=M._.cacher(function(Ui,e,wn){return{x:Ui*ct.cos(wn)-e*ct.sin(wn),y:Ui*ct.sin(wn)+e*ct.cos(wn)}});if(!Pe||!ie)return[Xe,Je,Qe,G,Qe,G];if(J)Ze=J[0],Ke=J[1],Re=J[2],He=J[3];else{Xe=(X=ue(Xe,Je,-ne)).x,Je=X.y,Qe=(X=ue(Qe,G,-ne)).x,G=X.y;var we=(ct.cos(At/180*be),ct.sin(At/180*be),(Xe-Qe)/2),Le=(Je-G)/2,Ie=we*we/(Pe*Pe)+Le*Le/(ie*ie);Ie>1&&(Pe*=Ie=ct.sqrt(Ie),ie*=Ie);var Me=Pe*Pe,Ne=ie*ie,je=(Te==De?-1:1)*ct.sqrt(Ut((Me*Ne-Me*Le*Le-Ne*we*we)/(Me*Le*Le+Ne*we*we))),Re=je*Pe*Le/ie+(Xe+Qe)/2,He=je*-ie*we/Pe+(Je+G)/2,Ze=ct.asin(((Je-He)/ie).toFixed(9)),Ke=ct.asin(((G-He)/ie).toFixed(9));0>(Ze=Re>Xe?At-Ze:Ze)&&(Ze=2*At+Ze),0>(Ke=Re>Qe?At-Ke:Ke)&&(Ke=2*At+Ke),De&&Ze>Ke&&(Ze-=2*At),!De&&Ke>Ze&&(Ke-=2*At)}var Ft=Ke-Ze;if(Ut(Ft)>ae){var mt=Ke,wt=Qe,Nt=G;Ke=Ze+ae*(De&&Ke>Ze?1:-1),te=Ae(Qe=Re+Pe*ct.cos(Ke),G=He+ie*ct.sin(Ke),Pe,ie,be,0,De,wt,Nt,[Ke,mt,Re,He])}Ft=Ke-Ze;var Bt=ct.cos(Ze),Rt=ct.sin(Ze),Zt=ct.cos(Ke),br=ct.sin(Ke),jr=ct.tan(Ft/4),wr=4/3*Pe*jr,Br=4/3*ie*jr,K=[Xe,Je],xr=[Xe+wr*Rt,Je-Br*Bt],en=[Qe+wr*br,G-Br*Zt],Qi=[Qe,G];if(xr[0]=2*K[0]-xr[0],xr[1]=2*K[1]-xr[1],J)return[xr,en,Qi].concat(te);for(var fn=[],Wr=0,cn=(te=[xr,en,Qi].concat(te).join().split(",")).length;cn>Wr;Wr++)fn[Wr]=Wr%2?ue(te[Wr-1],te[Wr],ne).y:ue(te[Wr],te[Wr+1],ne).x;return fn}function qe(Xe,Je,Pe,ie,be,Te,De,Qe){for(var G,J,X,ae,ne,te,ue,we,Le=[],Ie=[[],[]],Me=0;2>Me;++Me)if(0==Me?(J=6*Xe-12*Pe+6*be,G=-3*Xe+9*Pe-9*be+3*De,X=3*Pe-3*Xe):(J=6*Je-12*ie+6*Te,G=-3*Je+9*ie-9*Te+3*Qe,X=3*ie-3*Je),Ut(G)<1e-12){if(Ut(J)<1e-12)continue;(ae=-X/J)>0&&1>ae&&Le.push(ae)}else ue=J*J-4*X*G,we=ct.sqrt(ue),0>ue||((ne=(-J+we)/(2*G))>0&&1>ne&&Le.push(ne),(te=(-J-we)/(2*G))>0&&1>te&&Le.push(te));for(var Ne,je=Le.length,Re=je;je--;)Ne=1-(ae=Le[je]),Ie[0][je]=Ne*Ne*Ne*Xe+3*Ne*Ne*ae*Pe+3*Ne*ae*ae*be+ae*ae*ae*De,Ie[1][je]=Ne*Ne*Ne*Je+3*Ne*Ne*ae*ie+3*Ne*ae*ae*Te+ae*ae*ae*Qe;return Ie[0][Re]=Xe,Ie[1][Re]=Je,Ie[0][Re+1]=De,Ie[1][Re+1]=Qe,Ie[0].length=Ie[1].length=Re+2,{min:{x:yt.apply(0,Ie[0]),y:yt.apply(0,Ie[1])},max:{x:It.apply(0,Ie[0]),y:It.apply(0,Ie[1])}}}function et(Xe,Je){var Pe=!Je&&I(Xe);if(!Je&&Pe.curve)return s(Pe.curve);for(var ie=Fe(Xe),be=Je&&Fe(Je),Te={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},De={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Qe=function(je,Re,He){var Ze,Ke;if(!je)return["C",Re.x,Re.y,Re.x,Re.y,Re.x,Re.y];switch(!(je[0]in{T:1,Q:1})&&(Re.qx=Re.qy=null),je[0]){case"M":Re.X=je[1],Re.Y=je[2];break;case"A":je=["C"].concat(Ae.apply(0,[Re.x,Re.y].concat(je.slice(1))));break;case"S":"C"==He||"S"==He?(Ze=2*Re.x-Re.bx,Ke=2*Re.y-Re.by):(Ze=Re.x,Ke=Re.y),je=["C",Ze,Ke].concat(je.slice(1));break;case"T":"Q"==He||"T"==He?(Re.qx=2*Re.x-Re.qx,Re.qy=2*Re.y-Re.qy):(Re.qx=Re.x,Re.qy=Re.y),je=["C"].concat(me(Re.x,Re.y,Re.qx,Re.qy,je[1],je[2]));break;case"Q":Re.qx=je[1],Re.qy=je[2],je=["C"].concat(me(Re.x,Re.y,je[1],je[2],je[3],je[4]));break;case"L":je=["C"].concat(oe(Re.x,Re.y,je[1],je[2]));break;case"H":je=["C"].concat(oe(Re.x,Re.y,je[1],Re.y));break;case"V":je=["C"].concat(oe(Re.x,Re.y,Re.x,je[1]));break;case"Z":je=["C"].concat(oe(Re.x,Re.y,Re.X,Re.Y))}return je},G=function(je,Re){if(je[Re].length>7){je[Re].shift();for(var He=je[Re];He.length;)X[Re]="A",be&&(ae[Re]="A"),je.splice(Re++,0,["C"].concat(He.splice(0,6)));je.splice(Re,1),we=It(ie.length,be&&be.length||0)}},J=function(je,Re,He,Ze,Ke){je&&Re&&"M"==je[Ke][0]&&"M"!=Re[Ke][0]&&(Re.splice(Ke,0,["M",Ze.x,Ze.y]),He.bx=0,He.by=0,He.x=je[Ke][1],He.y=je[Ke][2],we=It(ie.length,be&&be.length||0))},X=[],ae=[],ne="",te="",ue=0,we=It(ie.length,be&&be.length||0);we>ue;ue++){ie[ue]&&(ne=ie[ue][0]),"C"!=ne&&(X[ue]=ne,ue&&(te=X[ue-1])),ie[ue]=Qe(ie[ue],Te,te),"A"!=X[ue]&&"C"==ne&&(X[ue]="C"),G(ie,ue),be&&(be[ue]&&(ne=be[ue][0]),"C"!=ne&&(ae[ue]=ne,ue&&(te=ae[ue-1])),be[ue]=Qe(be[ue],De,te),"A"!=ae[ue]&&"C"==ne&&(ae[ue]="C"),G(be,ue)),J(ie,be,Te,De,ue),J(be,ie,De,Te,ue);var Le=ie[ue],Ie=be&&be[ue],Me=Le.length,Ne=be&&Ie.length;Te.x=Le[Me-2],Te.y=Le[Me-1],Te.bx=vt(Le[Me-4])||Te.x,Te.by=vt(Le[Me-3])||Te.y,De.bx=be&&(vt(Ie[Ne-4])||De.x),De.by=be&&(vt(Ie[Ne-3])||De.y),De.x=be&&Ie[Ne-2],De.y=be&&Ie[Ne-1]}return be||(Pe.curve=s(ie)),be?[ie,be]:ie}function dt(Xe,Je){for(var Pe=[],ie=0,be=Xe.length;be-2*!Je>ie;ie+=2){var Te=[{x:+Xe[ie-2],y:+Xe[ie-1]},{x:+Xe[ie],y:+Xe[ie+1]},{x:+Xe[ie+2],y:+Xe[ie+3]},{x:+Xe[ie+4],y:+Xe[ie+5]}];Je?ie?be-4==ie?Te[3]={x:+Xe[0],y:+Xe[1]}:be-2==ie&&(Te[2]={x:+Xe[0],y:+Xe[1]},Te[3]={x:+Xe[2],y:+Xe[3]}):Te[0]={x:+Xe[be-2],y:+Xe[be-1]}:be-4==ie?Te[3]=Te[2]:ie||(Te[0]={x:+Xe[ie],y:+Xe[ie+1]}),Pe.push(["C",(-Te[0].x+6*Te[1].x+Te[2].x)/6,(-Te[0].y+6*Te[1].y+Te[2].y)/6,(Te[1].x+6*Te[2].x-Te[3].x)/6,(Te[1].y+6*Te[2].y-Te[3].y)/6,Te[2].x,Te[2].y])}return Pe}var xt=T.prototype,Pt=M.is,Wt=M._.clone,tt="hasOwnProperty",it=/,?([a-z]),?/gi,vt=parseFloat,ct=Math,At=ct.PI,yt=ct.min,It=ct.max,St=ct.pow,Ut=ct.abs,Xr=q(1),Rr=q(),cr=q(0,1),tr=M._unit2px,mr={path:function(Xe){return Xe.attr("path")},circle:function(Xe){var Je=tr(Xe);return We(Je.cx,Je.cy,Je.r)},ellipse:function(Xe){var Je=tr(Xe);return We(Je.cx||0,Je.cy||0,Je.rx,Je.ry)},rect:function(Xe){var Je=tr(Xe);return Se(Je.x||0,Je.y||0,Je.width,Je.height,Je.rx,Je.ry)},image:function(Xe){var Je=tr(Xe);return Se(Je.x||0,Je.y||0,Je.width,Je.height)},line:function(Xe){return"M"+[Xe.attr("x1")||0,Xe.attr("y1")||0,Xe.attr("x2"),Xe.attr("y2")]},polyline:function(Xe){return"M"+Xe.attr("points")},polygon:function(Xe){return"M"+Xe.attr("points")+"z"},deflt:function(Xe){var Je=Xe.node.getBBox();return Se(Je.x,Je.y,Je.width,Je.height)}};M.path=I,M.path.getTotalLength=Xr,M.path.getPointAtLength=Rr,M.path.getSubpath=function(Xe,Je,Pe){if(this.getTotalLength(Xe)-Pe<1e-6)return cr(Xe,Je).end;var ie=cr(Xe,Pe,1);return Je?cr(ie,Je).end:ie},xt.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},xt.getPointAtLength=function(Xe){return Rr(this.attr("d"),Xe)},xt.getSubpath=function(Xe,Je){return M.path.getSubpath(this.attr("d"),Xe,Je)},M._.box=O,M.path.findDotsAtSegment=Z,M.path.bezierBBox=H,M.path.isPointInsideBBox=ce,M.closest=function(Xe,Je,Pe,ie){for(var be=100,Te=O(Xe-be/2,Je-be/2,be,be),De=[],Qe=Pe[0].hasOwnProperty("x")?function(we){return{x:Pe[we].x,y:Pe[we].y}}:function(we){return{x:Pe[we],y:ie[we]}},G=0;1e6>=be&&!G;){for(var J=0,X=Pe.length;X>J;J++){var ae=Qe(J);if(ce(Te,ae.x,ae.y)){G++,De.push(ae);break}}G||(Te=O(Xe-(be*=2)/2,Je-be/2,be,be))}if(1e6!=be){var ne,te=1/0;for(J=0,X=De.length;X>J;J++){var ue=M.len(Xe,Je,De[J].x,De[J].y);te>ue&&(te=ue,De[J].len=ue,ne=De[J])}return ne}},M.path.isBBoxIntersect=le,M.path.intersection=function W(Xe,Je){return ge(Xe,Je)},M.path.intersectionNumber=function Y(Xe,Je){return ge(Xe,Je,1)},M.path.isPointInside=function ke(Xe,Je,Pe){var ie=_e(Xe);return ce(ie,Je,Pe)&&ge(Xe,[["M",Je,Pe],["H",ie.x2+10]],1)%2==1},M.path.getBBox=_e,M.path.get=mr,M.path.toRelative=function $e(Xe){var Je=I(Xe),Pe=String.prototype.toLowerCase;if(Je.rel)return s(Je.rel);M.is(Xe,"array")&&M.is(Xe&&Xe[0],"array")||(Xe=M.parsePathString(Xe));var ie=[],be=0,Te=0,De=0,Qe=0,G=0;"M"==Xe[0][0]&&(De=be=Xe[0][1],Qe=Te=Xe[0][2],G++,ie.push(["M",be,Te]));for(var J=G,X=Xe.length;X>J;J++){var ae=ie[J]=[],ne=Xe[J];if(ne[0]!=Pe.call(ne[0]))switch(ae[0]=Pe.call(ne[0]),ae[0]){case"a":ae[1]=ne[1],ae[2]=ne[2],ae[3]=ne[3],ae[4]=ne[4],ae[5]=ne[5],ae[6]=+(ne[6]-be).toFixed(3),ae[7]=+(ne[7]-Te).toFixed(3);break;case"v":ae[1]=+(ne[1]-Te).toFixed(3);break;case"m":De=ne[1],Qe=ne[2];default:for(var te=1,ue=ne.length;ue>te;te++)ae[te]=+(ne[te]-(te%2?be:Te)).toFixed(3)}else{ae=ie[J]=[],"m"==ne[0]&&(De=ne[1]+be,Qe=ne[2]+Te);for(var we=0,Le=ne.length;Le>we;we++)ie[J][we]=ne[we]}var Ie=ie[J].length;switch(ie[J][0]){case"z":be=De,Te=Qe;break;case"h":be+=+ie[J][Ie-1];break;case"v":Te+=+ie[J][Ie-1];break;default:be+=+ie[J][Ie-2],Te+=+ie[J][Ie-1]}}return ie.toString=j,Je.rel=s(ie),ie},M.path.toAbsolute=Fe,M.path.toCubic=et,M.path.map=function st(Xe,Je){if(!Je)return Xe;var Pe,ie,be,Te,De,Qe,G;for(be=0,De=(Xe=et(Xe)).length;De>be;be++)for(Te=1,Qe=(G=Xe[be]).length;Qe>Te;Te+=2)Pe=Je.x(G[Te],G[Te+1]),ie=Je.y(G[Te],G[Te+1]),G[Te]=Pe,G[Te+1]=ie;return Xe},M.path.toString=j,M.path.clone=s}),ye.plugin(function(M,T,E,F){var I=Math.max,O=Math.min,j=function(D){if(this.items=[],this.bindings={},this.length=0,this.type="set",D)for(var q=0,Z=D.length;Z>q;q++)D[q]&&(this[this.items.length]=this.items[this.items.length]=D[q],this.length++)},s=j.prototype;s.push=function(){for(var D,q,Z=0,H=arguments.length;H>Z;Z++)(D=arguments[Z])&&(this[q=this.items.length]=this.items[q]=D,this.length++);return this},s.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},s.forEach=function(D,q){for(var Z=0,H=this.items.length;H>Z;Z++)if(!1===D.call(q,this.items[Z],Z))return this;return this},s.animate=function(D,q,Z,H){"function"!=typeof Z||Z.length||(H=Z,Z=Be.linear),D instanceof M._.Animation&&(H=D.callback,Z=D.easing,q=Z.dur,D=D.attr);var ce=arguments;if(M.is(D,"array")&&M.is(ce[ce.length-1],"array"))var le=!0;var ee,se=function(){ee?this.b=ee:ee=this.b},de=0,he=this,V=H&&function(){++de==he.length&&H.call(this)};return this.forEach(function(W,Y){Ee.once("snap.animcreated."+W.id,se),le?ce[Y]&&W.animate.apply(W,ce[Y]):W.animate(D,q,Z,V)})},s.remove=function(){for(;this.length;)this.pop().remove();return this},s.bind=function(D,q,Z){var H={};if("function"==typeof q)this.bindings[D]=q;else{var ce=Z||D;this.bindings[D]=function(le){H[ce]=le,q.attr(H)}}return this},s.attr=function(D){var q={};for(var Z in D)this.bindings[Z]?this.bindings[Z](D[Z]):q[Z]=D[Z];for(var H=0,ce=this.items.length;ce>H;H++)this.items[H].attr(q);return this},s.clear=function(){for(;this.length;)this.pop()},s.splice=function(D,q,Z){D=0>D?I(this.length+D,0):D,q=I(0,O(this.length-D,q));var H,ce=[],le=[],ee=[];for(H=2;H<arguments.length;H++)ee.push(arguments[H]);for(H=0;q>H;H++)le.push(this[D+H]);for(;H<this.length-D;H++)ce.push(this[D+H]);var se=ee.length;for(H=0;H<se+ce.length;H++)this.items[D+H]=this[D+H]=se>H?ee[H]:ce[H-se];for(H=this.items.length=this.length-=q-se;this[H];)delete this[H++];return new j(le)},s.exclude=function(D){for(var q=0,Z=this.length;Z>q;q++)if(this[q]==D)return this.splice(q,1),!0;return!1},s.insertAfter=function(D){for(var q=this.items.length;q--;)this.items[q].insertAfter(D);return this},s.getBBox=function(){for(var D=[],q=[],Z=[],H=[],ce=this.items.length;ce--;)if(!this.items[ce].removed){var le=this.items[ce].getBBox();D.push(le.x),q.push(le.y),Z.push(le.x+le.width),H.push(le.y+le.height)}return{x:D=O.apply(0,D),y:q=O.apply(0,q),x2:Z=I.apply(0,Z),y2:H=I.apply(0,H),width:Z-D,height:H-q,cx:D+(Z-D)/2,cy:q+(H-q)/2}},s.clone=function(D){D=new j;for(var q=0,Z=this.items.length;Z>q;q++)D.push(this.items[q].clone());return D},s.toString=function(){return"Snap\u2018s set"},s.type="set",M.Set=j,M.set=function(){var D=new j;return arguments.length&&D.push.apply(D,Array.prototype.slice.call(arguments,0)),D}}),ye.plugin(function(M,T,E,F){function I(he){var V=he[0];switch(V.toLowerCase()){case"t":return[V,0,0];case"m":return[V,1,0,0,1,0,0];case"r":return 4==he.length?[V,0,he[2],he[3]]:[V,0];case"s":return 5==he.length?[V,1,1,he[3],he[4]]:3==he.length?[V,1,1]:[V,1]}}function j(he){return he}function s(he){return function(V){return+V.toFixed(3)+he}}function D(he){return he.join(" ")}function q(he){return M.rgb(he[0],he[1],he[2],he[3])}function Z(he){var V,W,Y,ge,ke,_e,Se=0,We=[];for(V=0,W=he.length;W>V;V++){for(ke="[",_e=['"'+he[V][0]+'"'],Y=1,ge=he[V].length;ge>Y;Y++)_e[Y]="val["+Se+++"]";ke+=_e+"]",We[V]=ke}return Function("val","return Snap.path.toString.call(["+We+"])")}function H(he){for(var V=[],W=0,Y=he.length;Y>W;W++)for(var ge=1,ke=he[W].length;ke>ge;ge++)V.push(he[W][ge]);return V}function ce(he){return isFinite(he)}var ee={},se=/[%a-z]+$/i,de=String;ee.stroke=ee.fill="colour",T.prototype.equal=function(he,V){return Ee("snap.util.equal",this,he,V).firstDefined()},Ee.on("snap.util.equal",function(he,V){var W,Y,ge=de(this.attr(he)||""),ke=this;if("colour"==ee[he])return W=M.color(ge),Y=M.color(V),{from:[W.r,W.g,W.b,W.opacity],to:[Y.r,Y.g,Y.b,Y.opacity],f:q};if("viewBox"==he)return{from:W=this.attr(he).vb.split(" ").map(Number),to:Y=V.split(" ").map(Number),f:D};if("transform"==he||"gradientTransform"==he||"patternTransform"==he)return"string"==typeof V&&(V=de(V).replace(/\.{3}|\u2026/g,ge)),function O(he,V,W){he=he||new M.Matrix,V=V||new M.Matrix,he=M.parseTransformString(he.toTransformString())||[],V=M.parseTransformString(V.toTransformString())||[];for(var Y,ge,ke,_e,Se=Math.max(he.length,V.length),We=[],$e=[],Fe=0;Se>Fe;Fe++){if(ke=he[Fe]||I(V[Fe]),_e=V[Fe]||I(ke),ke[0]!=_e[0]||"r"==ke[0].toLowerCase()&&(ke[2]!=_e[2]||ke[3]!=_e[3])||"s"==ke[0].toLowerCase()&&(ke[3]!=_e[3]||ke[4]!=_e[4])){he=M._.transform2matrix(he,W()),V=M._.transform2matrix(V,W()),We=[["m",he.a,he.b,he.c,he.d,he.e,he.f]],$e=[["m",V.a,V.b,V.c,V.d,V.e,V.f]];break}for(We[Fe]=[],$e[Fe]=[],Y=0,ge=Math.max(ke.length,_e.length);ge>Y;Y++)Y in ke&&(We[Fe][Y]=ke[Y]),Y in _e&&($e[Fe][Y]=_e[Y])}return{from:H(We),to:H($e),f:Z(We)}}(ge=this.matrix,V=M._.rgTransform.test(V)?M._.transform2matrix(V,this.getBBox()):M._.transform2matrix(M._.svgTransform2string(V),this.getBBox()),function(){return ke.getBBox(1)});if("d"==he||"path"==he)return{from:H((W=M.path.toCubic(ge,V))[0]),to:H(W[1]),f:Z(W[0])};if("points"==he)return{from:W=de(ge).split(M._.separator),to:Y=de(V).split(M._.separator),f:function(We){return We}};if(ce(ge)&&ce(V))return{from:parseFloat(ge),to:parseFloat(V),f:j};var _e=ge.match(se),Se=de(V).match(se);return _e&&function le(he,V){return!(!M.is(he,"array")||!M.is(V,"array"))&&he.toString()==V.toString()}(_e,Se)?{from:parseFloat(ge),to:parseFloat(V),f:s(_e)}:{from:this.asPX(he),to:this.asPX(he,V),f:j}})}),ye.plugin(function(M,T,E,F){for(var I=T.prototype,j=("createTouch"in F.doc),s=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],D={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},q=function(V,W){var Y="y"==V?"scrollTop":"scrollLeft",ge=W&&W.node?W.node.ownerDocument:F.doc;return ge[Y in ge.documentElement?"documentElement":"body"][Y]},Z=function(){return this.originalEvent.preventDefault()},H=function(){return this.originalEvent.stopPropagation()},ce=function(V,W,Y,ge){var ke=j&&D[W]?D[W]:W,_e=function(Se){var We=q("y",ge),$e=q("x",ge);if(j&&D.hasOwnProperty(W))for(var Fe=0,oe=Se.targetTouches&&Se.targetTouches.length;oe>Fe;Fe++)if(Se.targetTouches[Fe].target==V||V.contains(Se.targetTouches[Fe].target)){var me=Se;(Se=Se.targetTouches[Fe]).originalEvent=me,Se.preventDefault=Z,Se.stopPropagation=H;break}var Ae=Se.clientX+$e,qe=Se.clientY+We;return Y.call(ge,Se,Ae,qe)};return W!==ke&&V.addEventListener(W,_e,!1),V.addEventListener(ke,_e,!1),function(){return W!==ke&&V.removeEventListener(W,_e,!1),V.removeEventListener(ke,_e,!1),!0}},le=[],ee=function(V){for(var W,Y=V.clientX,ge=V.clientY,ke=q("y"),_e=q("x"),Se=le.length;Se--;){if(W=le[Se],j){for(var We,$e=V.touches&&V.touches.length;$e--;)if((We=V.touches[$e]).identifier==W.el._drag.id||W.el.node.contains(We.target)){Y=We.clientX,ge=We.clientY,(V.originalEvent?V.originalEvent:V).preventDefault();break}}else V.preventDefault();var Fe=W.el.node;Fe.nextSibling,Fe.parentNode,Fe.style.display,Y+=_e,ge+=ke,Ee("snap.drag.move."+W.el.id,W.move_scope||W.el,Y-W.el._drag.x,ge-W.el._drag.y,Y,ge,V)}},se=function(V){M.unmousemove(ee).unmouseup(se);for(var W,Y=le.length;Y--;)(W=le[Y]).el._drag={},Ee("snap.drag.end."+W.el.id,W.end_scope||W.start_scope||W.move_scope||W.el,V),Ee.off("snap.drag.*."+W.el.id);le=[]},de=s.length;de--;)!function(V){M[V]=I[V]=function(W,Y){if(M.is(W,"function"))this.events=this.events||[],this.events.push({name:V,f:W,unbind:ce(this.node||document,V,W,Y||this)});else for(var ge=0,ke=this.events.length;ke>ge;ge++)if(this.events[ge].name==V)try{this.events[ge].f.call(this)}catch(_e){}return this},M["un"+V]=I["un"+V]=function(W){for(var Y=this.events||[],ge=Y.length;ge--;)if(Y[ge].name==V&&(Y[ge].f==W||!W))return Y[ge].unbind(),Y.splice(ge,1),!Y.length&&delete this.events,this;return this}}(s[de]);I.hover=function(V,W,Y,ge){return this.mouseover(V,Y).mouseout(W,ge||Y)},I.unhover=function(V,W){return this.unmouseover(V).unmouseout(W)};var he=[];I.drag=function(V,W,Y,ge,ke,_e){function Se(oe,me,Ae){(oe.originalEvent||oe).preventDefault(),$e._drag.x=me,$e._drag.y=Ae,$e._drag.id=oe.identifier,!le.length&&M.mousemove(ee).mouseup(se),le.push({el:$e,move_scope:ge,start_scope:ke,end_scope:_e}),W&&Ee.on("snap.drag.start."+$e.id,W),V&&Ee.on("snap.drag.move."+$e.id,V),Y&&Ee.on("snap.drag.end."+$e.id,Y),Ee("snap.drag.start."+$e.id,ke||ge||$e,me,Ae,oe)}function We(oe,me,Ae){Ee("snap.draginit."+$e.id,$e,oe,me,Ae)}var Fe,$e=this;return arguments.length?(Ee.on("snap.draginit."+$e.id,Se),$e._drag={},he.push({el:$e,start:Se,init:We}),$e.mousedown(We),$e):$e.drag(function(oe,me){this.attr({transform:Fe+(Fe?"T":"t")+[oe,me]})},function(){Fe=this.transform().local})},I.undrag=function(){for(var V=he.length;V--;)he[V].el==this&&(this.unmousedown(he[V].init),he.splice(V,1),Ee.unbind("snap.drag.*."+this.id),Ee.unbind("snap.draginit."+this.id));return!he.length&&M.unmousemove(ee).unmouseup(se),this}}),ye.plugin(function(M,T,E,F){var I=(T.prototype,E.prototype),O=/^\s*url\((.+)\)/,j=String,s=M._.$;M.filter={},I.filter=function(D){var q=this;"svg"!=q.type&&(q=q.paper);var Z=M.parse(j(D)),H=M._.id(),ce=(q.node.offsetWidth,q.node.offsetHeight,s("filter"));return s(ce,{id:H,filterUnits:"userSpaceOnUse"}),ce.appendChild(Z.node),q.defs.appendChild(ce),new T(ce)},Ee.on("snap.util.getattr.filter",function(){Ee.stop();var D=s(this.node,"filter");if(D){var q=j(D).match(O);return q&&M.select(q[1])}}),Ee.on("snap.util.attr.filter",function(D){if(D instanceof T&&"filter"==D.type){Ee.stop();var q=D.node.id;q||(s(D.node,{id:D.id}),q=D.id),s(this.node,{filter:M.url(q)})}D&&"none"!=D||(Ee.stop(),this.node.removeAttribute("filter"))}),M.filter.blur=function(D,q){null==D&&(D=2);var Z=null==q?D:[D,q];return M.format('<feGaussianBlur stdDeviation="{def}"/>',{def:Z})},M.filter.blur.toString=function(){return this()},M.filter.shadow=function(D,q,Z,H,ce){return null==ce&&(null==H?(ce=Z,Z=4,H="#000"):(ce=H,H=Z,Z=4)),null==Z&&(Z=4),null==ce&&(ce=1),null==D&&(D=0,q=2),null==q&&(q=D),H=M.color(H),M.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:H,dx:D,dy:q,blur:Z,opacity:ce})},M.filter.shadow.toString=function(){return this()},M.filter.grayscale=function(D){return null==D&&(D=1),M.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-D),b:.7152-.7152*(1-D),c:.0722-.0722*(1-D),d:.2126-.2126*(1-D),e:.7152+.2848*(1-D),f:.0722-.0722*(1-D),g:.2126-.2126*(1-D),h:.0722+.9278*(1-D)})},M.filter.grayscale.toString=function(){return this()},M.filter.sepia=function(D){return null==D&&(D=1),M.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-D),b:.769-.769*(1-D),c:.189-.189*(1-D),d:.349-.349*(1-D),e:.686+.314*(1-D),f:.168-.168*(1-D),g:.272-.272*(1-D),h:.534-.534*(1-D),i:.131+.869*(1-D)})},M.filter.sepia.toString=function(){return this()},M.filter.saturate=function(D){return null==D&&(D=1),M.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-D})},M.filter.saturate.toString=function(){return this()},M.filter.hueRotate=function(D){return D=D||0,M.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:D})},M.filter.hueRotate.toString=function(){return this()},M.filter.invert=function(D){return null==D&&(D=1),M.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:D,amount2:1-D})},M.filter.invert.toString=function(){return this()},M.filter.brightness=function(D){return null==D&&(D=1),M.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:D})},M.filter.brightness.toString=function(){return this()},M.filter.contrast=function(D){return null==D&&(D=1),M.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:D,amount2:.5-D/2})},M.filter.contrast.toString=function(){return this()}}),ye.plugin(function(M,T,E,F,I){var O=M._.box,j=M.is,s=/^[^a-z]*([tbmlrc])/i,D=function(){return"T"+this.dx+","+this.dy};T.prototype.getAlign=function(q,Z){null==Z&&j(q,"string")&&(Z=q,q=null);var H=(q=q||this.paper).getBBox?q.getBBox():O(q),ce=this.getBBox(),le={};switch(Z=(Z=Z&&Z.match(s))?Z[1].toLowerCase():"c"){case"t":le.dx=0,le.dy=H.y-ce.y;break;case"b":le.dx=0,le.dy=H.y2-ce.y2;break;case"m":le.dx=0,le.dy=H.cy-ce.cy;break;case"l":le.dx=H.x-ce.x,le.dy=0;break;case"r":le.dx=H.x2-ce.x2,le.dy=0;break;default:le.dx=H.cx-ce.cx,le.dy=0}return le.toString=D,le},T.prototype.align=function(q,Z){return this.transform("..."+this.getAlign(q,Z))}}),ye.plugin(function(M,T,E,F){function I(Se){Se=Se.split(/(?=#)/);var We=new String(Se[5]);return We[50]=Se[0],We[100]=Se[1],We[200]=Se[2],We[300]=Se[3],We[400]=Se[4],We[500]=Se[5],We[600]=Se[6],We[700]=Se[7],We[800]=Se[8],We[900]=Se[9],Se[10]&&(We.A100=Se[10],We.A200=Se[11],We.A400=Se[12],We.A700=Se[13]),We}M.mui={},M.flat={},M.mui.red=I("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),M.mui.pink=I("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),M.mui.purple=I("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),M.mui.deeppurple=I("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),M.mui.indigo=I("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),M.mui.blue=I("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),M.mui.lightblue=I("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),M.mui.cyan=I("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),M.mui.teal=I("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),M.mui.green=I("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),M.mui.lightgreen=I("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),M.mui.lime=I("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),M.mui.yellow=I("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),M.mui.amber=I("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),M.mui.orange=I("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),M.mui.deeporange=I("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),M.mui.brown=I("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),M.mui.grey=I("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),M.mui.bluegrey=I("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),M.flat.turquoise="#1abc9c",M.flat.greensea="#16a085",M.flat.sunflower="#f1c40f",M.flat.orange="#f39c12",M.flat.emerland="#2ecc71",M.flat.nephritis="#27ae60",M.flat.carrot="#e67e22",M.flat.pumpkin="#d35400",M.flat.peterriver="#3498db",M.flat.belizehole="#2980b9",M.flat.alizarin="#e74c3c",M.flat.pomegranate="#c0392b",M.flat.amethyst="#9b59b6",M.flat.wisteria="#8e44ad",M.flat.clouds="#ecf0f1",M.flat.silver="#bdc3c7",M.flat.wetasphalt="#34495e",M.flat.midnightblue="#2c3e50",M.flat.concrete="#95a5a6",M.flat.asbestos="#7f8c8d",M.importMUIColors=function(){for(var Se in M.mui)M.mui.hasOwnProperty(Se)&&(Ce[Se]=M.mui[Se])}}),ye}),function(Ce){if("object"==typeof exports)module.exports=Ce();else if("function"==typeof define&&define.amd)define(Ce);else{var Ee;"undefined"!=typeof window?Ee=window:"undefined"!=typeof global?Ee=global:"undefined"!=typeof self&&(Ee=self),Ee.rdfstore=Ce()}}(function(){return function Ce(Ee,Be,ye){function M(F,I){if(!Be[F]){if(!Ee[F]){var O="function"==typeof require&&require;if(!I&&O)return O(F,!0);if(T)return T(F,!0);throw Error("Cannot find module '"+F+"'")}O=Be[F]={exports:{}},Ee[F][0].call(O.exports,function(j){return M(Ee[F][1][j]||j)},O,O.exports,Ce,Ee,Be,ye)}return Be[F].exports}for(var T="function"==typeof require&&require,E=0;E<ye.length;E++)M(ye[E]);return M}({1:[function(Ce,Ee,Be){!function(){function ye(T){this.message=T}var M=void 0!==Be?Be:this;ye.prototype=Error(),ye.prototype.name="InvalidCharacterError",M.btoa||(M.btoa=function(T){for(var E,F,I=0,O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j="";T.charAt(0|I)||(O="=",I%1);j+=O.charAt(63&E>>8-I%1*8)){if(255<(F=T.charCodeAt(I+=.75)))throw new ye("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");E=E<<8|F}return j}),M.atob||(M.atob=function(T){if((T=T.replace(/=+$/,"")).length%4==1)throw new ye("'atob' failed: The string to be decoded is not correctly encoded.");for(var F,I,E=0,O=0,j="";I=T.charAt(O++);~I&&(F=E%4?64*F+I:I,E++%4)?j+=String.fromCharCode(255&F>>(-2*E&6)):0)I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(I);return j})}()},{}],2:[function(Ce,Ee,Be){!function(ye){function M(E){return 43===(E=E.charCodeAt(0))?62:47===E?63:48>E?-1:58>E?E-48+52:91>E?E-65:123>E?E-97+26:void 0}var T="undefined"!=typeof Uint8Array?Uint8Array:Array;ye.toByteArray=function(E){function F(Z){D[q++]=Z}var I,O,j,s,D;if(0<E.length%4)throw Error("Invalid string. Length must be a multiple of 4");I=E.length,s="="===E.charAt(I-2)?2:"="===E.charAt(I-1)?1:0,D=new T(3*E.length/4-s),O=0<s?E.length-4:E.length;var q=0;for(I=0;I<O;I+=4)F((16711680&(j=M(E.charAt(I))<<18|M(E.charAt(I+1))<<12|M(E.charAt(I+2))<<6|M(E.charAt(I+3))))>>16),F((65280&j)>>8),F(255&j);return 2===s?F(255&(j=M(E.charAt(I))<<2|M(E.charAt(I+1))>>4)):1===s&&(F((j=M(E.charAt(I))<<10|M(E.charAt(I+1))<<4|M(E.charAt(I+2))>>2)>>8&255),F(255&j)),D},ye.fromByteArray=function(E){var F,j,s,I=E.length%3,O="";for(F=0,s=E.length-I;F<s;F+=3)j=(E[F]<<16)+(E[F+1]<<8)+E[F+2],O+=j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(j>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(j>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(j>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&j);switch(I){case 1:j=E[E.length-1],O+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(j>>2),O+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(j<<4&63),O+="==";break;case 2:j=(E[E.length-2]<<8)+E[E.length-1],O+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(j>>10),O+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(j>>4&63),O+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(j<<2&63),O+="="}return O}}(void 0===Be?this.base64js={}:Be)},{}],3:[function(Ce,Ee,Be){(function(ye,M){(function(){function T(tt){return"function"==typeof tt}function j(){return function(){setTimeout(s,1)}}function s(){for(var tt=0;tt<We;tt+=2)(0,st[tt])(st[tt+1]),st[tt]=void 0,st[tt+1]=void 0;We=0}function q(){}function le(tt,it){if(tt===it)de(tt,new TypeError("You cannot resolve a promise with itself"));else if("function"==typeof it||"object"==typeof it&&null!==it)if(it.constructor===tt.constructor)!function ce(tt,it){1===it._state?se(tt,it._result):2===it._state?de(tt,it._result):he(it,void 0,function(vt){le(tt,vt)},function(vt){de(tt,vt)})}(tt,it);else{var vt;try{vt=it.then}catch(ct){xt.error=ct,vt=xt}vt===xt?de(tt,xt.error):void 0===vt?se(tt,it):T(vt)?function H(tt,it,vt){oe(function(ct){var At=!1,yt=function Z(tt,it,vt,ct){try{tt.call(it,vt,ct)}catch(At){return At}}(vt,it,function(It){At||(At=!0,it!==It?le(ct,It):se(ct,It))},function(It){At||(At=!0,de(ct,It))},ct._label);!At&&yt&&(At=!0,de(ct,yt))},tt)}(tt,it,vt):se(tt,it)}else se(tt,it)}function ee(tt){tt._onerror&&tt._onerror(tt._result),V(tt)}function se(tt,it){void 0===tt._state&&(tt._result=it,tt._state=1,0!==tt._subscribers.length&&oe(V,tt))}function de(tt,it){void 0===tt._state&&(tt._state=2,tt._result=it,oe(ee,tt))}function he(tt,it,vt,ct){var At=tt._subscribers,yt=At.length;tt._onerror=null,At[yt]=it,At[yt+1]=vt,At[yt+2]=ct,0===yt&&tt._state&&oe(V,tt)}function V(tt){var it=tt._subscribers,vt=tt._state;if(0!==it.length){for(var ct,At,yt=tt._result,It=0;It<it.length;It+=3)ct=it[It],At=it[It+vt],ct?Y(vt,ct,At,yt):At(yt);tt._subscribers.length=0}}function W(){this.error=null}function Y(tt,it,vt,ct){var yt,It,St,Ut,At=T(vt);if(At){try{yt=vt(ct)}catch(Xr){Pt.error=Xr,yt=Pt}if(yt===Pt?(Ut=!0,It=yt.error,yt=null):St=!0,it===yt)return void de(it,new TypeError("A promises callback cannot return that same promise."))}else yt=ct,St=!0;void 0===it._state&&(At&&St?le(it,yt):Ut?de(it,It):1===tt?se(it,yt):2===tt&&de(it,yt))}function ke(tt,it){this._instanceConstructor=tt,this.promise=new tt(q),this._validateInput(it)?(this._input=it,this._remaining=this.length=it.length,this._init(),0===this.length?se(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&se(this.promise,this._result))):de(this.promise,this._validationError())}function _e(tt){if(this._id=Wt++,this._result=this._state=void 0,this._subscribers=[],q!==tt){if(!T(tt))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof _e))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");!function ge(tt,it){try{it(function(vt){le(tt,vt)},function(vt){de(tt,vt)})}catch(vt){de(tt,vt)}}(this,tt)}}var $e,Fe,dt,Se=Array.isArray?Array.isArray:function(tt){return"[object Array]"===Object.prototype.toString.call(tt)},We=0,oe=function(tt,it){st[We]=tt,st[We+1]=it,2===(We+=2)&&(Fe?Fe(s):dt())},me="undefined"!=typeof window?window:void 0,Ae=(qe=me||{}).MutationObserver||qe.WebKitMutationObserver,qe=void 0!==ye&&"[object process]"==={}.toString.call(ye),et="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,st=Array(1e3);dt=qe?function E(){var tt=ye.nextTick,it=ye.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(it)&&"0"===it[1]&&"10"===it[2]&&(tt=setImmediate),function(){tt(s)}}():Ae?function I(){var tt=0,it=new Ae(s),vt=document.createTextNode("");return it.observe(vt,{characterData:!0}),function(){vt.data=tt=++tt%2}}():et?function O(){var tt=new MessageChannel;return tt.port1.onmessage=s,function(){tt.port2.postMessage(0)}}():void 0===me&&"function"==typeof Ce?function D(){try{var tt=Ce("vertx");return $e=tt.runOnLoop||tt.runOnContext,function F(){return function(){$e(s)}}()}catch(it){return j()}}():j();var xt=new W,Pt=new W;ke.prototype._validateInput=function(tt){return Se(tt)},ke.prototype._validationError=function(){return Error("Array Methods must be provided an Array")},ke.prototype._init=function(){this._result=Array(this.length)},ke.prototype._enumerate=function(){for(var tt=this.length,it=this.promise,vt=this._input,ct=0;void 0===it._state&&ct<tt;ct++)this._eachEntry(vt[ct],ct)},ke.prototype._eachEntry=function(tt,it){var vt=this._instanceConstructor;"object"==typeof tt&&null!==tt?tt.constructor===vt&&void 0!==tt._state?(tt._onerror=null,this._settledAt(tt._state,it,tt._result)):this._willSettleAt(vt.resolve(tt),it):(this._remaining--,this._result[it]=tt)},ke.prototype._settledAt=function(tt,it,vt){var ct=this.promise;void 0===ct._state&&(this._remaining--,2===tt?de(ct,vt):this._result[it]=vt),0===this._remaining&&se(ct,this._result)},ke.prototype._willSettleAt=function(tt,it){var vt=this;he(tt,void 0,function(ct){vt._settledAt(1,it,ct)},function(ct){vt._settledAt(2,it,ct)})};var Wt=0;_e.all=function(tt){return new ke(this,tt).promise},_e.race=function(tt){function it(It){le(ct,It)}function vt(It){de(ct,It)}var ct=new this(q);if(!Se(tt))return de(ct,new TypeError("You must pass an array to race.")),ct;for(var At=tt.length,yt=0;void 0===ct._state&&yt<At;yt++)he(this.resolve(tt[yt]),void 0,it,vt);return ct},_e.resolve=function(tt){if(tt&&"object"==typeof tt&&tt.constructor===this)return tt;var it=new this(q);return le(it,tt),it},_e.reject=function(tt){var it=new this(q);return de(it,tt),it},_e._setScheduler=function(tt){Fe=tt},_e._setAsap=function(tt){oe=tt},_e._asap=oe,_e.prototype={constructor:_e,then:function(tt,it){var vt=this._state;if(1===vt&&!tt||2===vt&&!it)return this;var ct=new this.constructor(q),At=this._result;if(vt){var yt=arguments[vt-1];oe(function(){Y(vt,ct,yt,At)})}else he(this,ct,tt,it);return ct},catch:function(tt){return this.then(null,tt)}},qe={Promise:_e,polyfill:me=function(){var tt;if(void 0!==M)tt=M;else if("undefined"!=typeof self)tt=self;else try{tt=Function("return this")()}catch(vt){throw Error("polyfill failed because global object is unavailable in this environment")}var it=tt.Promise;(!it||"[object Promise]"!==Object.prototype.toString.call(it.resolve())||it.cast)&&(tt.Promise=_e)}},void 0!==Ee&&Ee.exports?Ee.exports=qe:void 0!==this&&(this.ES6Promise=qe),me()}).call(this)}).call(this,Ce("7YKIPe"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"7YKIPe":10}],4:[function(Ce,Ee,Be){function ye(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function M(E){return"function"==typeof E}function T(E){return"object"==typeof E&&null!==E}Ee.exports=ye,ye.EventEmitter=ye,ye.prototype._events=void 0,ye.prototype._maxListeners=void 0,ye.defaultMaxListeners=10,ye.prototype.setMaxListeners=function(E){if("number"!=typeof E||0>E||isNaN(E))throw TypeError("n must be a positive number");return this._maxListeners=E,this},ye.prototype.emit=function(E){var F,I,O,j;if(this._events||(this._events={}),"error"===E&&(!this._events.error||T(this._events.error)&&!this._events.error.length))throw(F=arguments[1])instanceof Error?F:TypeError('Uncaught, unspecified "error" event.');if(void 0===(I=this._events[E]))return!1;if(M(I))switch(arguments.length){case 1:I.call(this);break;case 2:I.call(this,arguments[1]);break;case 3:I.call(this,arguments[1],arguments[2]);break;default:for(F=arguments.length,O=Array(F-1),j=1;j<F;j++)O[j-1]=arguments[j];I.apply(this,O)}else if(T(I)){for(F=arguments.length,O=Array(F-1),j=1;j<F;j++)O[j-1]=arguments[j];for(F=(I=I.slice()).length,j=0;j<F;j++)I[j].apply(this,O)}return!0},ye.prototype.addListener=function(E,F){var I;if(!M(F))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",E,M(F.listener)?F.listener:F),this._events[E]?T(this._events[E])?this._events[E].push(F):this._events[E]=[this._events[E],F]:this._events[E]=F,T(this._events[E])&&!this._events[E].warned&&(I=void 0!==this._maxListeners?this._maxListeners:ye.defaultMaxListeners)&&0<I&&this._events[E].length>I&&(this._events[E].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[E].length),"function"==typeof console.trace&&console.trace()),this},ye.prototype.on=ye.prototype.addListener,ye.prototype.once=function(E,F){function I(){this.removeListener(E,I),O||(O=!0,F.apply(this,arguments))}if(!M(F))throw TypeError("listener must be a function");var O=!1;return I.listener=F,this.on(E,I),this},ye.prototype.removeListener=function(E,F){var I,O,j;if(!M(F))throw TypeError("listener must be a function");if(!this._events||!this._events[E])return this;if(j=(I=this._events[E]).length,O=-1,I===F||M(I.listener)&&I.listener===F)delete this._events[E],this._events.removeListener&&this.emit("removeListener",E,F);else if(T(I)){for(;0<j--;)if(I[j]===F||I[j].listener&&I[j].listener===F){O=j;break}if(0>O)return this;1===I.length?(I.length=0,delete this._events[E]):I.splice(O,1),this._events.removeListener&&this.emit("removeListener",E,F)}return this},ye.prototype.removeAllListeners=function(E){var F;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[E]&&delete this._events[E],this;if(0===arguments.length){for(F in this._events)"removeListener"!==F&&this.removeAllListeners(F);return this.removeAllListeners("removeListener"),this._events={},this}if(M(F=this._events[E]))this.removeListener(E,F);else for(;F.length;)this.removeListener(E,F[F.length-1]);return delete this._events[E],this},ye.prototype.listeners=function(E){return this._events&&this._events[E]?M(this._events[E])?[this._events[E]]:this._events[E].slice():[]},ye.listenerCount=function(E,F){return E._events&&E._events[F]?M(E._events[F])?1:E._events[F].length:0}},{}],5:[function(Ce,Ee,Be){},{}],6:[function(Ce,Ee,Be){function ye(oe,me,Ae){if(!(this instanceof ye))return new ye(oe,me,Ae);var et,st,qe=typeof oe;if("base64"===me&&"string"===qe)for(oe=oe.trim?oe.trim():oe.replace(/^\s+|\s+$/g,"");oe.length%4!=0;)oe+="=";if("number"===qe)et=ee(oe);else if("string"===qe)et=ye.byteLength(oe,me);else{if("object"!==qe)throw Error("First argument needs to be a number, array or string.");et=ee(oe.length)}if(ye._useTypedArrays?st=ye._augment(new Uint8Array(et)):((st=this).length=et,st._isBuffer=!0),ye._useTypedArrays&&"number"==typeof oe.byteLength)st._set(oe);else{var dt=oe;if(se(dt)||ye.isBuffer(dt)||dt&&"object"==typeof dt&&"number"==typeof dt.length)for(me=0;me<et;me++)ye.isBuffer(oe)?st[me]=oe.readUInt8(me):st[me]=oe[me];else if("string"===qe)st.write(oe,0,me);else if("number"===qe&&!ye._useTypedArrays&&!Ae)for(me=0;me<et;me++)st[me]=0}return st}function M(oe,me,Ae){var qe="";for(Ae=Math.min(oe.length,Ae);me<Ae;me++)qe+=String.fromCharCode(oe[me]);return qe}function T(oe,me,Ae,qe){if(qe||(Se("boolean"==typeof Ae,"missing or invalid endian"),Se(null!=me,"missing offset"),Se(me+1<oe.length,"Trying to read beyond buffer length")),!(me>=(qe=oe.length)))return Ae?(Ae=oe[me],me+1<qe&&(Ae|=oe[me+1]<<8)):(Ae=oe[me]<<8,me+1<qe&&(Ae|=oe[me+1])),Ae}function E(oe,me,Ae,qe){var et;if(qe||(Se("boolean"==typeof Ae,"missing or invalid endian"),Se(null!=me,"missing offset"),Se(me+3<oe.length,"Trying to read beyond buffer length")),!(me>=(qe=oe.length)))return Ae?(me+2<qe&&(et=oe[me+2]<<16),me+1<qe&&(et|=oe[me+1]<<8),et|=oe[me],me+3<qe&&(et+=oe[me+3]<<24>>>0)):(me+1<qe&&(et=oe[me+1]<<16),me+2<qe&&(et|=oe[me+2]<<8),me+3<qe&&(et|=oe[me+3]),et+=oe[me]<<24>>>0),et}function F(oe,me,Ae,qe){if(qe||(Se("boolean"==typeof Ae,"missing or invalid endian"),Se(null!=me,"missing offset"),Se(me+1<oe.length,"Trying to read beyond buffer length")),!(me>=oe.length))return 32768&(oe=T(oe,me,Ae,!0))?-1*(65535-oe+1):oe}function I(oe,me,Ae,qe){if(qe||(Se("boolean"==typeof Ae,"missing or invalid endian"),Se(null!=me,"missing offset"),Se(me+3<oe.length,"Trying to read beyond buffer length")),!(me>=oe.length))return 2147483648&(oe=E(oe,me,Ae,!0))?-1*(4294967295-oe+1):oe}function O(oe,me,Ae,qe){return qe||(Se("boolean"==typeof Ae,"missing or invalid endian"),Se(me+3<oe.length,"Trying to read beyond buffer length")),$e.read(oe,me,Ae,23,4)}function j(oe,me,Ae,qe){return qe||(Se("boolean"==typeof Ae,"missing or invalid endian"),Se(me+7<oe.length,"Trying to read beyond buffer length")),$e.read(oe,me,Ae,52,8)}function s(oe,me,Ae,qe,et){et||(Se(null!=me,"missing value"),Se("boolean"==typeof qe,"missing or invalid endian"),Se(null!=Ae,"missing offset"),Se(Ae+1<oe.length,"trying to write beyond buffer length"),ge(me,65535));var st=oe.length;if(!(Ae>=st))for(et=0,st=Math.min(st-Ae,2);et<st;et++)oe[Ae+et]=(me&255<<8*(qe?et:1-et))>>>8*(qe?et:1-et)}function D(oe,me,Ae,qe,et){et||(Se(null!=me,"missing value"),Se("boolean"==typeof qe,"missing or invalid endian"),Se(null!=Ae,"missing offset"),Se(Ae+3<oe.length,"trying to write beyond buffer length"),ge(me,4294967295));var st=oe.length;if(!(Ae>=st))for(et=0,st=Math.min(st-Ae,4);et<st;et++)oe[Ae+et]=me>>>8*(qe?et:3-et)&255}function q(oe,me,Ae,qe,et){et||(Se(null!=me,"missing value"),Se("boolean"==typeof qe,"missing or invalid endian"),Se(null!=Ae,"missing offset"),Se(Ae+1<oe.length,"Trying to write beyond buffer length"),ke(me,32767,-32768)),Ae>=oe.length||s(oe,0<=me?me:65535+me+1,Ae,qe,et)}function Z(oe,me,Ae,qe,et){et||(Se(null!=me,"missing value"),Se("boolean"==typeof qe,"missing or invalid endian"),Se(null!=Ae,"missing offset"),Se(Ae+3<oe.length,"Trying to write beyond buffer length"),ke(me,2147483647,-2147483648)),Ae>=oe.length||D(oe,0<=me?me:4294967295+me+1,Ae,qe,et)}function H(oe,me,Ae,qe,et){et||(Se(null!=me,"missing value"),Se("boolean"==typeof qe,"missing or invalid endian"),Se(null!=Ae,"missing offset"),Se(Ae+3<oe.length,"Trying to write beyond buffer length"),_e(me,34028234663852886e22,-34028234663852886e22)),Ae>=oe.length||$e.write(oe,me,Ae,qe,23,4)}function ce(oe,me,Ae,qe,et){et||(Se(null!=me,"missing value"),Se("boolean"==typeof qe,"missing or invalid endian"),Se(null!=Ae,"missing offset"),Se(Ae+7<oe.length,"Trying to write beyond buffer length"),_e(me,17976931348623157e292,-17976931348623157e292)),Ae>=oe.length||$e.write(oe,me,Ae,qe,52,8)}function le(oe,me,Ae){return"number"!=typeof oe?Ae:(oe=~~oe)>=me?me:0<=oe?oe:0<=(oe+=me)?oe:0}function ee(oe){return 0>(oe=~~Math.ceil(+oe))?0:oe}function se(oe){return(Array.isArray||function(me){return"[object Array]"===Object.prototype.toString.call(me)})(oe)}function de(oe){return 16>oe?"0"+oe.toString(16):oe.toString(16)}function he(oe){for(var me=[],Ae=0;Ae<oe.length;Ae++){var qe=oe.charCodeAt(Ae);if(127>=qe)me.push(oe.charCodeAt(Ae));else{var et=Ae;for(55296<=qe&&57343>=qe&&Ae++,qe=encodeURIComponent(oe.slice(et,Ae+1)).substr(1).split("%"),et=0;et<qe.length;et++)me.push(parseInt(qe[et],16))}}return me}function V(oe){for(var me=[],Ae=0;Ae<oe.length;Ae++)me.push(255&oe.charCodeAt(Ae));return me}function W(oe,me,Ae,qe){for(var et=0;et<qe&&!(et+Ae>=me.length||et>=oe.length);et++)me[et+Ae]=oe[et];return et}function Y(oe){try{return decodeURIComponent(oe)}catch(me){return String.fromCharCode(65533)}}function ge(oe,me){Se("number"==typeof oe,"cannot write a non-number as a number"),Se(0<=oe,"specified a negative value for writing an unsigned value"),Se(oe<=me,"value is larger than maximum value for type"),Se(Math.floor(oe)===oe,"value has a fractional component")}function ke(oe,me,Ae){Se("number"==typeof oe,"cannot write a non-number as a number"),Se(oe<=me,"value larger than maximum allowed value"),Se(oe>=Ae,"value smaller than minimum allowed value"),Se(Math.floor(oe)===oe,"value has a fractional component")}function _e(oe,me,Ae){Se("number"==typeof oe,"cannot write a non-number as a number"),Se(oe<=me,"value larger than maximum allowed value"),Se(oe>=Ae,"value smaller than minimum allowed value")}function Se(oe,me){if(!oe)throw Error(me||"Failed assertion")}var We=Ce("base64-js"),$e=Ce("ieee754");Be.Buffer=ye,Be.SlowBuffer=ye,Be.INSPECT_MAX_BYTES=50,ye.poolSize=8192,ye._useTypedArrays=function(){try{var oe=new ArrayBuffer(0),me=new Uint8Array(oe);return me.foo=function(){return 42},42===me.foo()&&"function"==typeof me.subarray}catch(Ae){return!1}}(),ye.isEncoding=function(oe){switch(String(oe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ye.isBuffer=function(oe){return!(null==oe||!oe._isBuffer)},ye.byteLength=function(oe,me){var Ae;switch(oe+="",me||"utf8"){case"hex":Ae=oe.length/2;break;case"utf8":case"utf-8":Ae=he(oe).length;break;case"ascii":case"binary":case"raw":Ae=oe.length;break;case"base64":Ae=We.toByteArray(oe).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Ae=2*oe.length;break;default:throw Error("Unknown encoding")}return Ae},ye.concat=function(oe,me){if(Se(se(oe),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===oe.length)return new ye(0);if(1===oe.length)return oe[0];var Ae;if("number"!=typeof me)for(Ae=me=0;Ae<oe.length;Ae++)me+=oe[Ae].length;var qe=new ye(me),et=0;for(Ae=0;Ae<oe.length;Ae++){var st=oe[Ae];st.copy(qe,et),et+=st.length}return qe},ye.prototype.write=function(oe,me,Ae,qe){if(isFinite(me))isFinite(Ae)||(qe=Ae,Ae=void 0);else{var et=qe;qe=me,me=Ae,Ae=et}switch(me=Number(me)||0,et=this.length-me,Ae?(Ae=Number(Ae))>et&&(Ae=et):Ae=et,qe=String(qe||"utf8").toLowerCase()){case"hex":for(me=Number(me)||0,qe=this.length-me,Ae?(Ae=Number(Ae))>qe&&(Ae=qe):Ae=qe,Se((qe=oe.length)%2==0,"Invalid hex string"),Ae>qe/2&&(Ae=qe/2),qe=0;qe<Ae;qe++)et=parseInt(oe.substr(2*qe,2),16),Se(!isNaN(et),"Invalid hex string"),this[me+qe]=et;ye._charsWritten=2*qe,oe=qe;break;case"utf8":case"utf-8":oe=ye._charsWritten=W(he(oe),this,me,Ae);break;case"ascii":case"binary":oe=ye._charsWritten=W(V(oe),this,me,Ae);break;case"base64":oe=ye._charsWritten=W(We.toByteArray(oe),this,me,Ae);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":et=[];for(var st,dt=0;dt<oe.length;dt++)qe=(st=oe.charCodeAt(dt))>>8,st%=256,et.push(st),et.push(qe);oe=ye._charsWritten=W(et,this,me,Ae);break;default:throw Error("Unknown encoding")}return oe},ye.prototype.toString=function(oe,me,Ae){if(oe=String(oe||"utf8").toLowerCase(),me=Number(me)||0,(Ae=void 0!==Ae?Number(Ae):Ae=this.length)===me)return"";switch(oe){case"hex":for(oe=this.length,(!me||0>me)&&(me=0),(!Ae||0>Ae||Ae>oe)&&(Ae=oe),oe="";me<Ae;me++)oe+=de(this[me]);Ae=oe;break;case"utf8":case"utf-8":var qe=oe="";for(Ae=Math.min(this.length,Ae);me<Ae;me++)127>=this[me]?(oe+=Y(qe)+String.fromCharCode(this[me]),qe=""):qe+="%"+this[me].toString(16);Ae=oe+Y(qe);break;case"ascii":case"binary":Ae=M(this,me,Ae);break;case"base64":Ae=0===me&&Ae===this.length?We.fromByteArray(this):We.fromByteArray(this.slice(me,Ae));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(Ae=this.slice(me,Ae),me="",oe=0;oe<Ae.length;oe+=2)me+=String.fromCharCode(Ae[oe]+256*Ae[oe+1]);Ae=me;break;default:throw Error("Unknown encoding")}return Ae},ye.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},ye.prototype.copy=function(oe,me,Ae,qe){if(Ae||(Ae=0),qe||0===qe||(qe=this.length),me||(me=0),qe!==Ae&&0!==oe.length&&0!==this.length)if(Se(qe>=Ae,"sourceEnd < sourceStart"),Se(0<=me&&me<oe.length,"targetStart out of bounds"),Se(0<=Ae&&Ae<this.length,"sourceStart out of bounds"),Se(0<=qe&&qe<=this.length,"sourceEnd out of bounds"),qe>this.length&&(qe=this.length),oe.length-me<qe-Ae&&(qe=oe.length-me+Ae),100>(qe-=Ae)||!ye._useTypedArrays)for(var et=0;et<qe;et++)oe[et+me]=this[et+Ae];else oe._set(this.subarray(Ae,Ae+qe),me)},ye.prototype.slice=function(oe,me){if(oe=le(oe,Ae=this.length,0),me=le(me,Ae,Ae),ye._useTypedArrays)return ye._augment(this.subarray(oe,me));for(var Ae,qe=new ye(Ae=me-oe,void 0,!0),et=0;et<Ae;et++)qe[et]=this[et+oe];return qe},ye.prototype.get=function(oe){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(oe)},ye.prototype.set=function(oe,me){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(oe,me)},ye.prototype.readUInt8=function(oe,me){if(me||(Se(null!=oe,"missing offset"),Se(oe<this.length,"Trying to read beyond buffer length")),!(oe>=this.length))return this[oe]},ye.prototype.readUInt16LE=function(oe,me){return T(this,oe,!0,me)},ye.prototype.readUInt16BE=function(oe,me){return T(this,oe,!1,me)},ye.prototype.readUInt32LE=function(oe,me){return E(this,oe,!0,me)},ye.prototype.readUInt32BE=function(oe,me){return E(this,oe,!1,me)},ye.prototype.readInt8=function(oe,me){if(me||(Se(null!=oe,"missing offset"),Se(oe<this.length,"Trying to read beyond buffer length")),!(oe>=this.length))return 128&this[oe]?-1*(255-this[oe]+1):this[oe]},ye.prototype.readInt16LE=function(oe,me){return F(this,oe,!0,me)},ye.prototype.readInt16BE=function(oe,me){return F(this,oe,!1,me)},ye.prototype.readInt32LE=function(oe,me){return I(this,oe,!0,me)},ye.prototype.readInt32BE=function(oe,me){return I(this,oe,!1,me)},ye.prototype.readFloatLE=function(oe,me){return O(this,oe,!0,me)},ye.prototype.readFloatBE=function(oe,me){return O(this,oe,!1,me)},ye.prototype.readDoubleLE=function(oe,me){return j(this,oe,!0,me)},ye.prototype.readDoubleBE=function(oe,me){return j(this,oe,!1,me)},ye.prototype.writeUInt8=function(oe,me,Ae){Ae||(Se(null!=oe,"missing value"),Se(null!=me,"missing offset"),Se(me<this.length,"trying to write beyond buffer length"),ge(oe,255)),me>=this.length||(this[me]=oe)},ye.prototype.writeUInt16LE=function(oe,me,Ae){s(this,oe,me,!0,Ae)},ye.prototype.writeUInt16BE=function(oe,me,Ae){s(this,oe,me,!1,Ae)},ye.prototype.writeUInt32LE=function(oe,me,Ae){D(this,oe,me,!0,Ae)},ye.prototype.writeUInt32BE=function(oe,me,Ae){D(this,oe,me,!1,Ae)},ye.prototype.writeInt8=function(oe,me,Ae){Ae||(Se(null!=oe,"missing value"),Se(null!=me,"missing offset"),Se(me<this.length,"Trying to write beyond buffer length"),ke(oe,127,-128)),me>=this.length||(0<=oe?this.writeUInt8(oe,me,Ae):this.writeUInt8(255+oe+1,me,Ae))},ye.prototype.writeInt16LE=function(oe,me,Ae){q(this,oe,me,!0,Ae)},ye.prototype.writeInt16BE=function(oe,me,Ae){q(this,oe,me,!1,Ae)},ye.prototype.writeInt32LE=function(oe,me,Ae){Z(this,oe,me,!0,Ae)},ye.prototype.writeInt32BE=function(oe,me,Ae){Z(this,oe,me,!1,Ae)},ye.prototype.writeFloatLE=function(oe,me,Ae){H(this,oe,me,!0,Ae)},ye.prototype.writeFloatBE=function(oe,me,Ae){H(this,oe,me,!1,Ae)},ye.prototype.writeDoubleLE=function(oe,me,Ae){ce(this,oe,me,!0,Ae)},ye.prototype.writeDoubleBE=function(oe,me,Ae){ce(this,oe,me,!1,Ae)},ye.prototype.fill=function(oe,me,Ae){if(oe||(oe=0),me||(me=0),Ae||(Ae=this.length),"string"==typeof oe&&(oe=oe.charCodeAt(0)),Se("number"==typeof oe&&!isNaN(oe),"value is not a number"),Se(Ae>=me,"end < start"),Ae!==me&&0!==this.length)for(Se(0<=me&&me<this.length,"start out of bounds"),Se(0<=Ae&&Ae<=this.length,"end out of bounds");me<Ae;me++)this[me]=oe},ye.prototype.inspect=function(){for(var oe=[],me=this.length,Ae=0;Ae<me;Ae++)if(oe[Ae]=de(this[Ae]),Ae===Be.INSPECT_MAX_BYTES){oe[Ae+1]="...";break}return"<Buffer "+oe.join(" ")+">"},ye.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(ye._useTypedArrays)return new ye(this).buffer;for(var oe=new Uint8Array(this.length),me=0,Ae=oe.length;me<Ae;me+=1)oe[me]=this[me];return oe.buffer}throw Error("Buffer.toArrayBuffer not supported in this browser")};var Fe=ye.prototype;ye._augment=function(oe){return oe._isBuffer=!0,oe._get=oe.get,oe._set=oe.set,oe.get=Fe.get,oe.set=Fe.set,oe.write=Fe.write,oe.toString=Fe.toString,oe.toLocaleString=Fe.toString,oe.toJSON=Fe.toJSON,oe.copy=Fe.copy,oe.slice=Fe.slice,oe.readUInt8=Fe.readUInt8,oe.readUInt16LE=Fe.readUInt16LE,oe.readUInt16BE=Fe.readUInt16BE,oe.readUInt32LE=Fe.readUInt32LE,oe.readUInt32BE=Fe.readUInt32BE,oe.readInt8=Fe.readInt8,oe.readInt16LE=Fe.readInt16LE,oe.readInt16BE=Fe.readInt16BE,oe.readInt32LE=Fe.readInt32LE,oe.readInt32BE=Fe.readInt32BE,oe.readFloatLE=Fe.readFloatLE,oe.readFloatBE=Fe.readFloatBE,oe.readDoubleLE=Fe.readDoubleLE,oe.readDoubleBE=Fe.readDoubleBE,oe.writeUInt8=Fe.writeUInt8,oe.writeUInt16LE=Fe.writeUInt16LE,oe.writeUInt16BE=Fe.writeUInt16BE,oe.writeUInt32LE=Fe.writeUInt32LE,oe.writeUInt32BE=Fe.writeUInt32BE,oe.writeInt8=Fe.writeInt8,oe.writeInt16LE=Fe.writeInt16LE,oe.writeInt16BE=Fe.writeInt16BE,oe.writeInt32LE=Fe.writeInt32LE,oe.writeInt32BE=Fe.writeInt32BE,oe.writeFloatLE=Fe.writeFloatLE,oe.writeFloatBE=Fe.writeFloatBE,oe.writeDoubleLE=Fe.writeDoubleLE,oe.writeDoubleBE=Fe.writeDoubleBE,oe.fill=Fe.fill,oe.inspect=Fe.inspect,oe.toArrayBuffer=Fe.toArrayBuffer,oe}},{"base64-js":2,ieee754:23}],7:[function(Ce,Ee,Be){var ye=Ee.exports;Ce("events");var M=Ce("./lib/request"),T=Ce("url");ye.request=function(F,I){"string"==typeof F&&(F=T.parse(F)),F||(F={}),F.host||F.port||(F.port=parseInt(window.location.port,10)),!F.host&&F.hostname&&(F.host=F.hostname),F.scheme||(F.scheme=window.location.protocol.split(":")[0]),F.host||(F.host=window.location.hostname||window.location.host),/:/.test(F.host)&&(F.port||(F.port=F.host.split(":")[1]),F.host=F.host.split(":")[0]),F.port||(F.port="https"==F.scheme?443:80);var O=new M(new E,F);return I&&O.on("response",I),O},ye.get=function(F,I){F.method="GET";var O=ye.request(F,I);return O.end(),O},ye.Agent=function(){},ye.Agent.defaultMaxSockets=4;var E=function(){if("undefined"==typeof window)throw Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject)for(var F=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],I=0;I<F.length;I++)try{var O=new window.ActiveXObject(F[I]);return function(){if(O){var j=O;return O=null,j}return new window.ActiveXObject(F[I])}}catch(j){}throw Error("ajax not supported in this browser")}();ye.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":8,events:4,url:36}],8:[function(Ce,Ee,Be){Be=Ce("stream");var ye=Ce("./response"),M=Ce("Base64");Ce=Ce("inherits");var T=Ee.exports=function(I,O){var j=this;j.writable=!0,j.xhr=I,j.body=[],j.uri=(O.scheme||"http")+"://"+O.host+(O.port?":"+O.port:"")+(O.path||"/"),void 0===O.withCredentials&&(O.withCredentials=!0);try{I.withCredentials=O.withCredentials}catch(H){}if(I.open(O.method||"GET",j.uri,!0),j._headers={},O.headers)for(var s=E(O.headers),D=0;D<s.length;D++){var q=s[D];j.isSafeRequestHeader(q)&&j.setHeader(q,O.headers[q])}O.auth&&this.setHeader("Authorization","Basic "+M.btoa(O.auth));var Z=new ye;Z.on("close",function(){j.emit("close")}),Z.on("ready",function(){j.emit("response",Z)}),I.onreadystatechange=function(){I.__aborted||Z.handle(I)}};Ce(T,Be),T.prototype.setHeader=function(I,O){this._headers[I.toLowerCase()]=O},T.prototype.getHeader=function(I){return this._headers[I.toLowerCase()]},T.prototype.removeHeader=function(I){delete this._headers[I.toLowerCase()]},T.prototype.write=function(I){this.body.push(I)},T.prototype.destroy=function(I){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},T.prototype.end=function(I){void 0!==I&&this.body.push(I);var O=E(this._headers);for(I=0;I<O.length;I++){var j=O[I],s=this._headers[j];if(F(s))for(var D=0;D<s.length;D++)this.xhr.setRequestHeader(j,s[D]);else this.xhr.setRequestHeader(j,s)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else{if(F(this.body[0]))for(O=[],I=0;I<this.body.length;I++)O.push.apply(O,this.body[I]);else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(I=D=0;I<this.body.length;I++)D+=this.body[I].length;for(O=new this.body[0].constructor(D),I=j=0;I<this.body.length;I++)for(s=this.body[I],D=0;D<s.length;D++)O[j++]=s[D]}else for(O="",I=0;I<this.body.length;I++)O+=this.body[I].toString();this.xhr.send(O)}},T.unsafeHeaders="accept-charset accept-encoding access-control-request-headers access-control-request-method connection content-length cookie cookie2 content-transfer-encoding date expect host keep-alive origin referer te trailer transfer-encoding upgrade user-agent via".split(" "),T.prototype.isSafeRequestHeader=function(I){if(!I)return!1;var O;e:if(O=T.unsafeHeaders,I=I.toLowerCase(),O.indexOf)O=O.indexOf(I);else{for(var j=0;j<O.length;j++)if(O[j]===I){O=j;break e}O=-1}return-1===O};var E=Object.keys||function(I){var j,O=[];for(j in I)O.push(j);return O},F=Array.isArray||function(I){return"[object Array]"===Object.prototype.toString.call(I)}},{"./response":9,Base64:1,inherits:24,stream:15}],9:[function(Ce,Ee,Be){function ye(F){F=F.getAllResponseHeaders().split(/\r?\n/);for(var I={},O=0;O<F.length;O++){var j=F[O];if(""!==j){var s=j.match(/^([^:]+):\s*(.*)/);s?(j=s[1].toLowerCase(),s=s[2],void 0!==I[j]?E(I[j])?I[j].push(s):I[j]=[I[j],s]:I[j]=s):I[j]=!0}}return I}Be=Ce("stream"),Ce=Ce("util"),Ee=Ee.exports=function(F){this.offset=0,this.readable=!0},Ce.inherits(Ee,Be);var M=!0,T=!0;Ee.prototype.getResponse=function(F){var I=String(F.responseType).toLowerCase();return"blob"===I?F.responseBlob||F.response:"arraybuffer"===I?F.response:F.responseText},Ee.prototype.getHeader=function(F){return this.headers[F.toLowerCase()]},Ee.prototype.handle=function(F){if(2===F.readyState&&T){try{this.statusCode=F.status,this.headers=ye(F)}catch(I){T=!1}T&&this.emit("ready")}else if(M&&3===F.readyState){try{this.statusCode||(this.statusCode=F.status,this.headers=ye(F),this.emit("ready"))}catch(I){}try{this._emitData(F)}catch(I){M=!1}}else 4===F.readyState&&(this.statusCode||(this.statusCode=F.status,this.emit("ready")),this._emitData(F),F.error?this.emit("error",this.getResponse(F)):this.emit("end"),this.emit("close"))},Ee.prototype._emitData=function(F){(F=this.getResponse(F)).toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(F,this.offset)),this.offset=F.byteLength):F.length>this.offset&&(this.emit("data",F.slice(this.offset)),this.offset=F.length)};var E=Array.isArray||function(F){return"[object Array]"===Object.prototype.toString.call(F)}},{stream:15,util:38}],10:[function(Ce,Ee,Be){function ye(){}(Ce=Ee.exports={}).nextTick=function(){if("undefined"!=typeof window&&window.setImmediate)return function(T){return window.setImmediate(T)};if("undefined"!=typeof window&&window.postMessage&&window.addEventListener){var M=[];return window.addEventListener("message",function(T){var E=T.source;E!==window&&null!==E||"process-tick"!==T.data||(T.stopPropagation(),0<M.length&&M.shift()())},!0),function(T){M.push(T),window.postMessage("process-tick","*")}}return function(T){setTimeout(T,0)}}(),Ce.title="browser",Ce.browser=!0,Ce.env={},Ce.argv=[],Ce.on=ye,Ce.addListener=ye,Ce.once=ye,Ce.off=ye,Ce.removeListener=ye,Ce.removeAllListeners=ye,Ce.emit=ye,Ce.binding=function(M){throw Error("process.binding is not supported")},Ce.cwd=function(){return"/"},Ce.chdir=function(M){throw Error("process.chdir is not supported")}},{}],11:[function(Ce,Ee,Be){Ee.exports=function(M,T,E,F){E=E||"=";var I={};if("string"!=typeof M||0===M.length)return I;var O=/\+/g;for(M=M.split(T||"&"),T=1e3,F&&"number"==typeof F.maxKeys&&(T=F.maxKeys),F=M.length,0<T&&F>T&&(F=T),T=0;T<F;++T){var D,j=M[T].replace(O,"%20"),s=j.indexOf(E);0<=s?(D=j.substr(0,s),j=j.substr(s+1)):(D=j,j=""),D=decodeURIComponent(D),j=decodeURIComponent(j),Object.prototype.hasOwnProperty.call(I,D)?ye(I[D])?I[D].push(j):I[D]=[I[D],j]:I[D]=j}return I};var ye=Array.isArray||function(M){return"[object Array]"===Object.prototype.toString.call(M)}},{}],12:[function(Ce,Ee,Be){var M=function(F){switch(typeof F){case"string":return F;case"boolean":return F?"true":"false";case"number":return isFinite(F)?F:"";default:return""}};Ee.exports=function(F,I,O,j){return I=I||"&",O=O||"=",null===F&&(F=void 0),"object"==typeof F?function ye(F,I){if(F.map)return F.map(I);for(var O=[],j=0;j<F.length;j++)O.push(I(F[j],j));return O}(E(F),function(s){var D=encodeURIComponent(M(s))+O;return T(F[s])?F[s].map(function(q){return D+encodeURIComponent(M(q))}).join(I):D+encodeURIComponent(M(F[s]))}).join(I):j?encodeURIComponent(M(j))+O+encodeURIComponent(M(F)):""};var T=Array.isArray||function(F){return"[object Array]"===Object.prototype.toString.call(F)},E=Object.keys||function(F){var O,I=[];for(O in F)Object.prototype.hasOwnProperty.call(F,O)&&I.push(O);return I}},{}],13:[function(Ce,Ee,Be){Be.decode=Be.parse=Ce("./decode"),Be.encode=Be.stringify=Ce("./encode")},{"./decode":11,"./encode":12}],14:[function(Ce,Ee,Be){function ye(I){if(!(this instanceof ye))return new ye(I);E.call(this,I),F.call(this,I),I&&!1===I.readable&&(this.readable=!1),I&&!1===I.writable&&(this.writable=!1),this.allowHalfOpen=!0,I&&!1===I.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",M)}function M(){if(!this.allowHalfOpen&&!this._writableState.ended){var I=this;T(function(){I.end()})}}Ee.exports=ye,Ee=Ce("inherits");var T=Ce("process/browser.js").nextTick,E=Ce("./readable.js"),F=Ce("./writable.js");Ee(ye,E),ye.prototype.write=F.prototype.write,ye.prototype.end=F.prototype.end,ye.prototype._write=F.prototype._write},{"./readable.js":18,"./writable.js":20,inherits:24,"process/browser.js":16}],15:[function(Ce,Ee,Be){function ye(){M.call(this)}Ee.exports=ye;var M=Ce("events").EventEmitter;Ce("inherits")(ye,M),ye.Readable=Ce("./readable.js"),ye.Writable=Ce("./writable.js"),ye.Duplex=Ce("./duplex.js"),ye.Transform=Ce("./transform.js"),ye.PassThrough=Ce("./passthrough.js"),ye.Stream=ye,ye.prototype.pipe=function(T,E){function F(H){T.writable&&!1===T.write(H)&&q.pause&&q.pause()}function I(){q.readable&&q.resume&&q.resume()}function O(){Z||(Z=!0,T.end())}function j(){Z||(Z=!0,"function"==typeof T.destroy&&T.destroy())}function s(H){if(D(),0===M.listenerCount(this,"error"))throw H}function D(){q.removeListener("data",F),T.removeListener("drain",I),q.removeListener("end",O),q.removeListener("close",j),q.removeListener("error",s),T.removeListener("error",s),q.removeListener("end",D),q.removeListener("close",D),T.removeListener("close",D)}var q=this;q.on("data",F),T.on("drain",I),T._isStdio||E&&!1===E.end||(q.on("end",O),q.on("close",j));var Z=!1;return q.on("error",s),T.on("error",s),q.on("end",D),q.on("close",D),T.on("close",D),T.emit("pipe",q),T}},{"./duplex.js":14,"./passthrough.js":17,"./readable.js":18,"./transform.js":19,"./writable.js":20,events:4,inherits:24}],16:[function(Ce,Ee,Be){(Ce=Ee.exports={}).nextTick=function(){if("undefined"!=typeof window&&window.setImmediate)return function(M){return window.setImmediate(M)};if("undefined"!=typeof window&&window.postMessage&&window.addEventListener){var ye=[];return window.addEventListener("message",function(M){var T=M.source;T!==window&&null!==T||"process-tick"!==M.data||(M.stopPropagation(),0<ye.length&&ye.shift()())},!0),function(M){ye.push(M),window.postMessage("process-tick","*")}}return function(M){setTimeout(M,0)}}(),Ce.title="browser",Ce.browser=!0,Ce.env={},Ce.argv=[],Ce.binding=function(ye){throw Error("process.binding is not supported")},Ce.cwd=function(){return"/"},Ce.chdir=function(ye){throw Error("process.chdir is not supported")}},{}],17:[function(Ce,Ee,Be){function ye(T){if(!(this instanceof ye))return new ye(T);M.call(this,T)}Ee.exports=ye;var M=Ce("./transform.js");Ce("inherits")(ye,M),ye.prototype._transform=function(T,E,F){F(null,T)}},{"./transform.js":19,inherits:24}],18:[function(Ce,Ee,Be){(function(ye){function M(V,W){var Y=(V=V||{}).highWaterMark;this.highWaterMark=Y||0===Y?Y:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.calledRead=this.reading=this.endEmitted=this.ended=this.flowing=!1,this.sync=!0,this.readableListening=this.emittedReadable=this.needReadable=!1,this.objectMode=!!V.objectMode,this.defaultEncoding=V.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.encoding=this.decoder=null,V.encoding&&(he||(he=Ce("string_decoder").StringDecoder),this.decoder=new he(V.encoding),this.encoding=V.encoding)}function T(V){if(!(this instanceof T))return new T(V);this._readableState=new M(V,this),this.readable=!0,ee.call(this)}function E(V,W,Y,ge,ke){var _e;_e=Y;var Se=null;return se.isBuffer(_e)||"string"==typeof _e||null==_e||W.objectMode||Se||(Se=new TypeError("Invalid non-string/buffer chunk")),(_e=Se)?V.emit("error",_e):null==Y?(W.reading=!1,W.ended||(W.decoder&&!W.ended&&(Y=W.decoder.end())&&Y.length&&(W.buffer.push(Y),W.length+=W.objectMode?1:Y.length),W.ended=!0,0<W.length?I(V):H(V))):W.objectMode||Y&&0<Y.length?W.ended&&!ke?(Y=Error("stream.push() after EOF"),V.emit("error",Y)):W.endEmitted&&ke?(Y=Error("stream.unshift() after end event"),V.emit("error",Y)):(!W.decoder||ke||ge||(Y=W.decoder.write(Y)),W.length+=W.objectMode?1:Y.length,ke?W.buffer.unshift(Y):(W.reading=!1,W.buffer.push(Y)),W.needReadable&&I(V),function O(V,W){W.readingMore||(W.readingMore=!0,de(function(){for(var Y=W.length;!W.reading&&!W.flowing&&!W.ended&&W.length<W.highWaterMark&&(V.read(0),Y!==W.length);)Y=W.length;W.readingMore=!1}))}(V,W)):ke||(W.reading=!1),!W.ended&&(W.needReadable||W.length<W.highWaterMark||0===W.length)}function F(V,W){if(0===W.length&&W.ended)return 0;if(W.objectMode)return 0===V?0:1;if(isNaN(V)||null===V)return W.flowing&&W.buffer.length?W.buffer[0].length:W.length;if(0>=V)return 0;if(V>W.highWaterMark){var Y=V;if(8388608<=Y)Y=8388608;else{Y--;for(var ge=1;32>ge;ge<<=1)Y|=Y>>ge;Y++}W.highWaterMark=Y}return V>W.length?W.ended?W.length:(W.needReadable=!0,0):V}function I(V){var W=V._readableState;W.needReadable=!1,W.emittedReadable||(W.emittedReadable=!0,W.sync?de(function(){V.emit("readable")}):V.emit("readable"))}function s(V){function W(ke,_e,Se){!1===ke.write(ge)&&Y.awaitDrain++}var ge,Y=V._readableState;for(Y.awaitDrain=0;Y.pipesCount&&null!==(ge=V.read());)if(1===Y.pipesCount?W(Y.pipes):ce(Y.pipes,W),V.emit("data",ge),0<Y.awaitDrain)return;0===Y.pipesCount?(Y.flowing=!1,0<le.listenerCount(V,"data")&&q(V)):Y.ranOut=!0}function D(){this._readableState.ranOut&&(this._readableState.ranOut=!1,s(this))}function q(V,W){if(V._readableState.flowing)throw Error("Cannot switch to old mode now.");var Y=W||!1,ge=!1;V.readable=!0,V.pipe=ee.prototype.pipe,V.on=V.addListener=ee.prototype.on,V.on("readable",function(){ge=!0;for(var ke;!Y&&null!==(ke=V.read());)V.emit("data",ke);null===ke&&(ge=!1,V._readableState.needReadable=!0)}),V.pause=function(){Y=!0,this.emit("pause")},V.resume=function(){Y=!1,ge?de(function(){V.emit("readable")}):this.read(0),this.emit("resume")},V.emit("readable")}function Z(V,W){var Y=W.buffer,ge=W.length,ke=!!W.decoder,_e=!!W.objectMode;if(0===Y.length)return null;if(0===ge)ge=null;else if(_e)ge=Y.shift();else if(!V||V>=ge)ge=ke?Y.join(""):se.concat(Y,ge),Y.length=0;else if(V<Y[0].length)ge=(_e=Y[0]).slice(0,V),Y[0]=_e.slice(V);else if(V===Y[0].length)ge=Y.shift();else{ge=ke?"":new se(V);for(var Se=0,We=0,$e=Y.length;We<$e&&Se<V;We++){_e=Y[0];var Fe=Math.min(V-Se,_e.length);ke?ge+=_e.slice(0,Fe):_e.copy(ge,Se,0,Fe),Fe<_e.length?Y[0]=_e.slice(Fe):Y.shift(),Se+=Fe}}return ge}function H(V){var W=V._readableState;if(0<W.length)throw Error("endReadable called on non-empty stream");!W.endEmitted&&W.calledRead&&(W.ended=!0,de(function(){W.endEmitted||0!==W.length||(W.endEmitted=!0,V.readable=!1,V.emit("end"))}))}function ce(V,W){for(var Y=0,ge=V.length;Y<ge;Y++)W(V[Y],Y)}Ee.exports=T,T.ReadableState=M;var he,le=Ce("events").EventEmitter,ee=Ce("./index.js"),se=Ce("buffer").Buffer,de=Ce("process/browser.js").nextTick;Ce("inherits")(T,ee),T.prototype.push=function(V,W){var Y=this._readableState;return"string"!=typeof V||Y.objectMode||(W=W||Y.defaultEncoding)!==Y.encoding&&(V=new se(V,W),W=""),E(this,Y,V,W,!1)},T.prototype.unshift=function(V){return E(this,this._readableState,V,"",!0)},T.prototype.setEncoding=function(V){he||(he=Ce("string_decoder").StringDecoder),this._readableState.decoder=new he(V),this._readableState.encoding=V},T.prototype.read=function(V){var W=this._readableState;W.calledRead=!0;var Y=V;if(("number"!=typeof V||0<V)&&(W.emittedReadable=!1),0===V&&W.needReadable&&(W.length>=W.highWaterMark||W.ended))return I(this),null;if(0===(V=F(V,W))&&W.ended)return 0===W.length&&H(this),null;var ge=W.needReadable;return W.length-V<=W.highWaterMark&&(ge=!0),(W.ended||W.reading)&&(ge=!1),ge&&(W.reading=!0,W.sync=!0,0===W.length&&(W.needReadable=!0),this._read(W.highWaterMark),W.sync=!1),ge&&!W.reading&&(V=F(Y,W)),null===(Y=0<V?Z(V,W):null)&&(W.needReadable=!0,V=0),W.length-=V,0!==W.length||W.ended||(W.needReadable=!0),W.ended&&!W.endEmitted&&0===W.length&&H(this),Y},T.prototype._read=function(V){this.emit("error",Error("not implemented"))},T.prototype.pipe=function(V,W){function Y(qe){qe===$e&&ke()}function ge(){V.end()}function ke(){V.removeListener("close",Se),V.removeListener("finish",We),V.removeListener("drain",me),V.removeListener("error",_e),V.removeListener("unpipe",Y),$e.removeListener("end",ge),$e.removeListener("end",ke),V._writableState&&!V._writableState.needDrain||me()}function _e(qe){$e.unpipe(V),0===Ae&&0===le.listenerCount(V,"error")&&V.emit("error",qe)}function Se(){V.removeListener("finish",We),$e.unpipe(V)}function We(){V.removeListener("close",Se),$e.unpipe(V)}var $e=this,Fe=this._readableState;switch(Fe.pipesCount){case 0:Fe.pipes=V;break;case 1:Fe.pipes=[Fe.pipes,V];break;default:Fe.pipes.push(V)}Fe.pipesCount+=1;var oe=W&&!1===W.end||V===ye.stdout||V===ye.stderr?ke:ge;Fe.endEmitted?de(oe):$e.once("end",oe),V.on("unpipe",Y);var me=function j(V){return function(){var W=V._readableState;W.awaitDrain--,0===W.awaitDrain&&s(V)}}($e);V.on("drain",me);var Ae=le.listenerCount(V,"error");return V.once("error",_e),V.once("close",Se),V.once("finish",We),V.emit("pipe",$e),Fe.flowing||(this.on("readable",D),Fe.flowing=!0,de(function(){s($e)})),V},T.prototype.unpipe=function(V){var W=this._readableState;if(0===W.pipesCount)return this;if(1===W.pipesCount)return V&&V!==W.pipes||(V||(V=W.pipes),W.pipes=null,W.pipesCount=0,this.removeListener("readable",D),W.flowing=!1,V&&V.emit("unpipe",this)),this;if(!V){V=W.pipes;var Y=W.pipesCount;W.pipes=null,W.pipesCount=0,this.removeListener("readable",D),W.flowing=!1;for(var ge=0;ge<Y;ge++)V[ge].emit("unpipe",this);return this}e:{Y=0;for(var ke=(ge=W.pipes).length;Y<ke;Y++)if(ge[Y]===V){ge=Y;break e}ge=-1}return-1===ge||(W.pipes.splice(ge,1),--W.pipesCount,1===W.pipesCount&&(W.pipes=W.pipes[0]),V.emit("unpipe",this)),this},T.prototype.on=function(V,W){var Y=ee.prototype.on.call(this,V,W);if("data"!==V||this._readableState.flowing||q(this),"readable"===V&&this.readable){var ge=this._readableState;ge.readableListening||(ge.readableListening=!0,ge.emittedReadable=!1,ge.needReadable=!0,ge.reading?ge.length&&I(this):this.read(0))}return Y},T.prototype.addListener=T.prototype.on,T.prototype.resume=function(){q(this),this.read(0),this.emit("resume")},T.prototype.pause=function(){q(this,!0),this.emit("pause")},T.prototype.wrap=function(V){var W=this._readableState,Y=!1,ge=this;for(var ke in V.on("end",function(){if(W.decoder&&!W.ended){var _e=W.decoder.end();_e&&_e.length&&ge.push(_e)}ge.push(null)}),V.on("data",function(_e){W.decoder&&(_e=W.decoder.write(_e)),_e&&(W.objectMode||_e.length)&&!ge.push(_e)&&(Y=!0,V.pause())}),V)"function"==typeof V[ke]&&void 0===this[ke]&&(this[ke]=function(_e){return function(){return V[_e].apply(V,arguments)}}(ke));return ce(["error","close","destroy","pause","resume"],function(_e){V.on(_e,function(Se){return ge.emit.apply(ge,_e,Se)})}),ge._read=function(_e){Y&&(Y=!1,V.resume())},ge},T._fromList=Z}).call(this,Ce("7YKIPe"))},{"./index.js":15,"7YKIPe":10,buffer:6,events:4,inherits:24,"process/browser.js":16,string_decoder:21}],19:[function(Ce,Ee,Be){function ye(F,I){this.afterTransform=function(O,j){var s;(s=I._transformState).transforming=!1;var D=s.writecb;return D?(s.writechunk=null,s.writecb=null,null!=j&&I.push(j),D&&D(O),(s=I._readableState).reading=!1,(s.needReadable||s.length<s.highWaterMark)&&I._read(s.highWaterMark),s=void 0):s=I.emit("error",Error("no writecb in Transform class")),s},this.transforming=this.needTransform=!1,this.writechunk=this.writecb=null}function M(F){if(!(this instanceof M))return new M(F);E.call(this,F),this._transformState=new ye(F,this);var I=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(O){T(I,O)}):T(I)})}function T(F,I){if(I)return F.emit("error",I);var O=F._transformState;if(F._writableState.length)throw Error("calling transform done when ws.length != 0");if(O.transforming)throw Error("calling transform done when still transforming");return F.push(null)}Ee.exports=M;var E=Ce("./duplex.js");Ce("inherits")(M,E),M.prototype.push=function(F,I){return this._transformState.needTransform=!1,E.prototype.push.call(this,F,I)},M.prototype._transform=function(F,I,O){throw Error("not implemented")},M.prototype._write=function(F,I,O){var j=this._transformState;j.writecb=O,j.writechunk=F,j.writeencoding=I,j.transforming||(F=this._readableState,(j.needTransform||F.needReadable||F.length<F.highWaterMark)&&this._read(F.highWaterMark))},M.prototype._read=function(F){(F=this._transformState).writechunk&&F.writecb&&!F.transforming?(F.transforming=!0,this._transform(F.writechunk,F.writeencoding,F.afterTransform)):F.needTransform=!0}},{"./duplex.js":14,inherits:24}],20:[function(Ce,Ee,Be){function ye(de,he,V){this.chunk=de,this.encoding=he,this.callback=V}function M(de,he){var V=(de=de||{}).highWaterMark;this.highWaterMark=V||0===V?V:16384,this.objectMode=!!de.objectMode,this.highWaterMark=~~this.highWaterMark,this.finished=this.ended=this.ending=this.needDrain=!1,this.decodeStrings=!1!==de.decodeStrings,this.defaultEncoding=de.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(W){!function s(de,he){var V=de._writableState,W=V.sync,Y=V.writecb;if(function j(de){de.writing=!1,de.writecb=null,de.length-=de.writelen,de.writelen=0}(V),he)!function O(de,he,V,W,Y){V?ee(function(){Y(W)}):Y(W),de.emit("error",W)}(de,0,W,he,Y);else{var ge=V.ending&&0===V.length&&!V.finished&&!V.writing;ge||V.bufferProcessing||!V.buffer.length||function q(de,he){he.bufferProcessing=!0;for(var V=0;V<he.buffer.length;V++){var W=(Se=he.buffer[V]).chunk,Y=de,ge=he,ke=W,_e=Se.encoding,Se=Se.callback;if(ge.writelen=he.objectMode?1:W.length,ge.writecb=Se,ge.writing=!0,ge.sync=!0,Y._write(ke,_e,ge.onwrite),ge.sync=!1,he.writing){V++;break}}he.bufferProcessing=!1,V<he.buffer.length?he.buffer=he.buffer.slice(V):he.buffer.length=0}(de,V),W?ee(function(){D(de,V,ge,Y)}):D(de,V,ge,Y)}}(he,W)},this.writecb=null,this.writelen=0,this.buffer=[]}function T(de){if(!(this instanceof T||this instanceof le.Duplex))return new T(de);this._writableState=new M(de,this),this.writable=!0,le.call(this)}function D(de,he,V,W){!V&&0===he.length&&he.needDrain&&(he.needDrain=!1,de.emit("drain")),W(),V&&Z(de,he)}function Z(de,he){var V=he.ending&&0===he.length&&!he.finished&&!he.writing;return V&&(he.finished=!0,de.emit("finish")),V}Ee.exports=T,T.WritableState=M;var H="undefined"!=typeof Uint8Array?function(de){return de instanceof Uint8Array}:function(de){return de&&de.constructor&&"Uint8Array"===de.constructor.name},ce="undefined"!=typeof ArrayBuffer?function(de){return de instanceof ArrayBuffer}:function(de){return de&&de.constructor&&"ArrayBuffer"===de.constructor.name};Ee=Ce("inherits");var le=Ce("./index.js"),ee=Ce("process/browser.js").nextTick,se=Ce("buffer").Buffer;Ee(T,le),T.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))},T.prototype.write=function(de,he,V){var W=this._writableState,Y=!1;return"function"==typeof he&&(V=he,he=null),!se.isBuffer(de)&&H(de)&&(de=new se(de)),ce(de)&&"undefined"!=typeof Uint8Array&&(de=new se(new Uint8Array(de))),se.isBuffer(de)?he="buffer":he||(he=W.defaultEncoding),"function"!=typeof V&&(V=function(){}),W.ended?function E(de,he,V){var W=Error("write after end");de.emit("error",W),ee(function(){V(W)})}(this,0,V):function F(de,he,V,W){var Y=!0;if(!se.isBuffer(V)&&"string"!=typeof V&&null!=V&&!he.objectMode){var ge=new TypeError("Invalid non-string/buffer chunk");de.emit("error",ge),ee(function(){W(ge)}),Y=!1}return Y}(this,W,de,V)&&(Y=function I(de,he,V,W,Y){he.objectMode||!1===he.decodeStrings||"string"!=typeof V||(V=new se(V,W));var ge=he.objectMode?1:V.length;he.length+=ge;var ke=he.length<he.highWaterMark;return he.needDrain=!ke,he.writing?he.buffer.push(new ye(V,W,Y)):(he.writelen=ge,he.writecb=Y,he.writing=!0,he.sync=!0,de._write(V,W,he.onwrite),he.sync=!1),ke}(this,W,de,he,V)),Y},T.prototype._write=function(de,he,V){V(Error("not implemented"))},T.prototype.end=function(de,he,V){var W=this._writableState;"function"==typeof de?(V=de,he=de=null):"function"==typeof he&&(V=he,he=null),null!=de&&this.write(de,he),!W.ending&&!W.finished&&(de=V,W.ending=!0,Z(this,W),de&&(W.finished?ee(de):this.once("finish",de)),W.ended=!0)}},{"./index.js":15,buffer:6,inherits:24,"process/browser.js":16}],21:[function(Ce,Ee,Be){function ye(F){return F.toString(this.encoding)}function M(F){return this.charLength=(F=this.charReceived=F.length%2)?2:0,F}function T(F){return this.charLength=(F=this.charReceived=F.length%3)?3:0,F}var E=Ce("buffer").Buffer;(Ce=Be.StringDecoder=function(F){if(this.encoding=(F||"utf8").toLowerCase().replace(/[-_]/,""),F&&!E.isEncoding(F))throw Error("Unknown encoding: "+F);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=M;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=T;break;default:return void(this.write=ye)}this.charBuffer=new E(6),this.charLength=this.charReceived=0}).prototype.write=function(F){for(var I="",O=0;this.charLength;){var j=F.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:F.length;if(F.copy(this.charBuffer,this.charReceived,O,j),this.charReceived+=j-O,O=j,this.charReceived<this.charLength)return"";var s=(I=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(I.length-1);if(!(55296<=s&&56319>=s)){if(this.charReceived=this.charLength=0,j==F.length)return I;F=F.slice(j,F.length);break}this.charLength+=this.surrogateSize,I=""}return s=this.detectIncompleteChar(F),O=F.length,this.charLength&&(F.copy(this.charBuffer,0,F.length-s,O),this.charReceived=s,O-=s),O=(I+=F.toString(this.encoding,0,O)).length-1,55296<=(s=I.charCodeAt(O))&&56319>=s?(F=this.surrogateSize,this.charLength+=F,this.charReceived+=F,this.charBuffer.copy(this.charBuffer,F,0,F),this.charBuffer.write(I.charAt(I.length-1),this.encoding),I.substring(0,O)):I},Ce.prototype.detectIncompleteChar=function(F){for(var I=3<=F.length?3:F.length;0<I;I--){var O=F[F.length-I];if(1==I&&O>>5==6){this.charLength=2;break}if(2>=I&&O>>4==14){this.charLength=3;break}if(3>=I&&O>>3==30){this.charLength=4;break}}return I},Ce.prototype.end=function(F){var I="";return F&&F.length&&(I=this.write(F)),this.charReceived&&(F=this.encoding,I+=this.charBuffer.slice(0,this.charReceived).toString(F)),I}},{buffer:6}],22:[function(Ce,Ee,Be){var ye=Ce("http");for(var M in Ce=Ee.exports,ye)ye.hasOwnProperty(M)&&(Ce[M]=ye[M]);Ce.request=function(T,E){return T||(T={}),T.scheme="https",T.protocol="https:",ye.request.call(this,T,E)}},{http:7}],23:[function(Ce,Ee,Be){Be.read=function(ye,M,T,E,F){var I,O=(1<<(I=8*F-E-1))-1,j=O>>1,s=-7,D=T?-1:1,q=ye[M+(F=T?F-1:0)];for(F+=D,T=q&(1<<-s)-1,q>>=-s,s+=I;0<s;T=256*T+ye[M+F],F+=D,s-=8);for(I=T&(1<<-s)-1,T>>=-s,s+=E;0<s;I=256*I+ye[M+F],F+=D,s-=8);if(0===T)T=1-j;else{if(T===O)return I?NaN:1/0*(q?-1:1);I+=Math.pow(2,E),T-=j}return(q?-1:1)*I*Math.pow(2,T-E)},Be.write=function(ye,M,T,E,F,I){var O,j=8*I-F-1,s=(1<<j)-1,D=s>>1,q=23===F?Math.pow(2,-24)-Math.pow(2,-77):0;I=E?0:I-1;var Z=E?1:-1,H=0>M||0===M&&0>1/M?1:0;for(M=Math.abs(M),isNaN(M)||M===1/0?(M=isNaN(M)?1:0,E=s):(E=Math.floor(Math.log(M)/Math.LN2),1>M*(O=Math.pow(2,-E))&&(E--,O*=2),2<=(M=1<=E+D?M+q/O:M+q*Math.pow(2,1-D))*O&&(E++,O/=2),E+D>=s?(M=0,E=s):1<=E+D?(M=(M*O-1)*Math.pow(2,F),E+=D):(M=M*Math.pow(2,D-1)*Math.pow(2,F),E=0));8<=F;ye[T+I]=255&M,I+=Z,M/=256,F-=8);for(E=E<<F|M,j+=F;0<j;ye[T+I]=255&E,I+=Z,E/=256,j-=8);ye[T+I-Z]|=128*H}},{}],24:[function(Ce,Ee,Be){Ee.exports="function"==typeof Object.create?function(ye,M){ye.super_=M,ye.prototype=Object.create(M.prototype,{constructor:{value:ye,enumerable:!1,writable:!0,configurable:!0}})}:function(ye,M){ye.super_=M;var T=function(){};T.prototype=M.prototype,ye.prototype=new T,ye.prototype.constructor=ye}},{}],25:[function(Ce,Ee,Be){},{}],26:[function(Ce,Ee,Be){(function(ye,M,T){!function(){var E=void 0!==ye&&ye.versions&&ye.versions.node,F=!E&&("undefined"!=typeof window||"undefined"!=typeof self);F&&void 0===M&&("undefined"!=typeof window?M=window:"undefined"!=typeof self?M=self:"undefined"!=typeof $&&(M=$));var I=function(j){function s(){}function D(G,J){if(oe(J))for(var X=0;X<J.length;++X)J[X]=D(G,J[X]);else if(xt(J))J["@list"]=D(G,J["@list"]);else if(Fe(J)){Pt(J)&&(J["@id"]=G.getId(J["@id"]));X=Object.keys(J).sort();for(var ae=0;ae<X.length;++ae){var ne=X[ae];"@id"!==ne&&(J[ne]=D(G,J[ne]))}}return J}function Z(G){var J={};if(dt(G)){J.type="literal";var X=G["@value"],ae=G["@type"]||null;"boolean"==typeof X||"[object Boolean]"===Object.prototype.toString.call(X)?(J.value=X.toString(),J.datatype=ae||"http://www.w3.org/2001/XMLSchema#boolean"):qe(X)||"http://www.w3.org/2001/XMLSchema#double"===ae?(qe(X)||(X=parseFloat(X)),J.value=X.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),J.datatype=ae||"http://www.w3.org/2001/XMLSchema#double"):Ae(X)?(J.value=X.toFixed(0),J.datatype=ae||"http://www.w3.org/2001/XMLSchema#integer"):"@language"in G?(J.value=X,J.datatype=ae||mr,J.language=G["@language"]):(J.value=X,J.datatype=ae||tr)}else G=Fe(G)?G["@id"]:G,J.type=0===G.indexOf("_:")?"blank node":"IRI",J.value=G;return"IRI"!==J.type||Wt(J.value)?J:null}function H(G,J,X,ae,ne,te){if(oe(G))for(var ue=0;ue<G.length;++ue)H(G[ue],J,X,ae,void 0,te);else if(Fe(G))if(dt(G)){if("@type"in G){var we=G["@type"];0===we.indexOf("_:")&&(G["@type"]=ae.getId(we))}te&&te.push(G)}else{if("@type"in G){var Le=G["@type"];for(ue=0;ue<Le.length;++ue)0===(we=Le[ue]).indexOf("_:")&&ae.getId(we)}for(et(ne)&&(ne=Pt(G)?ae.getId(G["@id"]):G["@id"]),te&&te.push({"@id":ne}),(ue=(te=J[X])[ne]=te[ne]||{})["@id"]=ne,we=Object.keys(G).sort(),Le=0;Le<we.length;++Le){if("@id"!==(Ie=we[Le]))if("@reverse"===Ie){var Ne,Ie={"@id":ne},Me=G["@reverse"];for(Ne in Me)for(var je=Me[Ne],Re=0;Re<je.length;++Re){var He=je[Re],Ze=He["@id"];Pt(He)&&(Ze=ae.getId(Ze)),H(He,J,X,ae,Ze),j.addValue(te[Ze],Ne,Ie,{propertyIsArray:!0,allowDuplicate:!1})}}else if("@graph"===Ie)ne in J||(J[ne]={}),H(G[Ie],J,"@merged"===X?X:ne,ae);else if("@type"!==Ie&&$e(Ie)){if("@index"===Ie&&Ie in ue&&(G[Ie]!==ue[Ie]||G[Ie]["@id"]!==ue[Ie]["@id"]))throw new Pe("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:ue});ue[Ie]=G[Ie]}else if(Me=G[Ie],0===Ie.indexOf("_:")&&(Ie=ae.getId(Ie)),0===Me.length)j.addValue(ue,Ie,[],{propertyIsArray:!0});else for(je=0;je<Me.length;++je)Re=Me[je],"@type"===Ie&&(Re=0===Re.indexOf("_:")?ae.getId(Re):Re),Ze=!1,!Fe(He=Re)||"@value"in He||"@set"in He||"@list"in He||(Ze=1<Object.keys(He).length||!("@id"in He)),Ze||st(Re)?(He=Pt(Re)?ae.getId(Re["@id"]):Re["@id"],j.addValue(ue,Ie,{"@id":He},{propertyIsArray:!0,allowDuplicate:!1}),H(Re,J,X,ae,He)):(xt(Re)?(He=[],H(Re["@list"],J,X,ae,ne,He),Re={"@list":He}):H(Re,J,X,ae,ne),j.addValue(ue,Ie,Re,{propertyIsArray:!0,allowDuplicate:!1}))}}else te&&te.push(G)}function ce(G){for(var J=G["@default"],X=Object.keys(G).sort(),ae=0;ae<X.length;++ae){if("@default"!==(ne=X[ae])){var te=G[ne];(ue=J[ne])?"@graph"in ue||(ue["@graph"]=[]):J[ne]=ue={"@id":ne,"@graph":[]};for(var ne=ue["@graph"],ue=Object.keys(te).sort(),we=0;we<ue.length;++we){var Le=te[ue[we]];st(Le)||ne.push(Le)}}}return J}function le(G,J,X,ae,ne){if(!oe(te=X)||1!==te.length||!Fe(te[0]))throw new Pe("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:te});for(var te,ue={embed:se(X=X[0],te=G.options,"embed"),explicit:se(X,te,"explicit"),requireAll:se(X,te,"requireAll")},we=X,Le={},Ie=0;Ie<J.length;++Ie){var Me=J[Ie],Ne=G.subjects[Me];de(Ne,we,ue)&&(Le[Me]=Ne)}for(J=Object.keys(Le).sort(),we=0;we<J.length;++we)if(Me=Le[Ne=J[we]],"@link"===ue.embed&&Ne in G.link)V(ae,ne,G.link[Ne]);else{var je;if(null===ne&&(G.uniqueEmbeds={}),(Ie={})["@id"]=Ne,G.link[Ne]=Ie,!(je="@never"===ue.embed))e:{for(var Re=(je=G.subjectStack).length-1;0<=Re;--Re)if(je[Re]["@id"]===Me["@id"]){je=!0;break e}je=!1}if(je)V(ae,ne,Ie);else{for(("@last"===ue.embed&&(Ne in G.uniqueEmbeds&&he(G,Ne),G.uniqueEmbeds[Ne]={parent:ae,property:ne}),G.subjectStack.push(Me),Ne=Object.keys(Me).sort(),je=0);je<Ne.length;je++)if($e(Re=Ne[je]))Ie[Re]=tt(Me[Re]);else if(!ue.explicit||Re in X)for(var He=Me[Re],Ze=0;Ze<He.length;++Ze){var Ke=He[Ze];if(xt(Ke)){var Ft={"@list":[]};V(Ie,Re,Ft);var wt,mt=Ke["@list"];for(wt in mt)if(st(Ke=mt[wt])){var Nt=Re in X?X[Re][0]["@list"]:ee(ue);le(G,[Ke["@id"]],Nt,Ft,"@list")}else V(Ft,"@list",tt(Ke))}else st(Ke)?(Nt=Re in X?X[Re]:ee(ue),le(G,[Ke["@id"]],Nt,Ie,Re)):V(Ie,Re,tt(Ke))}for(Ne=Object.keys(X).sort(),je=0;je<Ne.length;++je)$e(Re=Ne[je])||(se(Me=X[Re][0],te,"omitDefault")||Re in Ie||(He="@null","@default"in Me&&(He=tt(Me["@default"])),oe(He)||(He=[He]),Ie[Re]=[{"@preserve":He}]));V(ae,ne,Ie),G.subjectStack.pop()}}}function ee(G){var X,J={};for(X in G)void 0!==G[X]&&(J["@"+X]=[G[X]]);return[J]}function se(G,J,X){var ae="@"+X;return G=ae in G?G[ae][0]:J[X],"embed"===X&&(!0===G?G="@last":!1===G?G="@never":"@always"!==G&&"@never"!==G&&"@link"!==G&&(G="@last")),G}function de(G,J,X){if("@type"in J&&(1!==J["@type"].length||!Fe(J["@type"][0]))){for(J=J["@type"],X=0;X<J.length;++X)if(j.hasValue(G,"@type",J[X]))return!0;return!1}var te,ae=!0,ne=!1;for(te in J){if($e(te)){if("@id"!==te&&"@type"!==te)continue;if(ae=!1,"@id"===te&&me(J[te])){if(G[te]!==J[te])return!1;ne=!0;continue}}if(ae=!1,te in G){if(oe(J[te])&&0===J[te].length&&void 0!==G[te])return!1;ne=!0}else{var ue=oe(J[te])&&Fe(J[te][0])&&"@default"in J[te][0];if(X.requireAll&&!ue)return!1}}return ae||ne}function he(G,J){var X=G.uniqueEmbeds,ae=(te=X[J]).parent,ne=te.property,te={"@id":J};if(oe(ae)){for(ne=0;ne<ae.length;++ne)if(j.compareValues(ae[ne],te)){ae[ne]=te;break}}else{var ue=oe(ae[ne]);j.removeValue(ae,ne,te,{propertyIsArray:ue}),j.addValue(ae,ne,te,{propertyIsArray:ue})}var we=function(Le){for(var Ie=Object.keys(X),Me=0;Me<Ie.length;++Me){var Ne=Ie[Me];Ne in X&&Fe(X[Ne].parent)&&X[Ne].parent["@id"]===Le&&(delete X[Ne],we(Ne))}};we(J)}function V(G,J,X){Fe(G)?j.addValue(G,J,X,{propertyIsArray:!0}):G.push(X)}function W(G,J,X){if(oe(J)){for(var ae=[],ne=0;ne<J.length;++ne){var te=W(G,J[ne],X);null!==te&&ae.push(te)}J=ae}else if(Fe(J)){if("@preserve"in J)return"@null"===J["@preserve"]?null:J["@preserve"];if(dt(J))return J;if(xt(J))return J["@list"]=W(G,J["@list"],X),J;if((te=ge(G,"@id"))in J)if((te=J[te])in X.link){if(-1!==(ne=X.link[te].indexOf(J)))return X.link[te][ne];X.link[te].push(J)}else X.link[te]=[J];for(ae in J)te=W(G,J[ae],X),ne=j.getContextValue(G,ae,"@container"),X.compactArrays&&oe(te)&&1===te.length&&null===ne&&(te=te[0]),J[ae]=te}return J}function Y(G,J){return G.length<J.length?-1:J.length<G.length?1:G===J?0:G<J?-1:1}function ge(G,J,X,ae,ne){if(null===J)return J;et(X)&&(X=null),et(ne)&&(ne=!1),ae=ae||{};var te=G.getInverse();if($e(J))return J in te?te[J]["@none"]["@type"]["@none"]:J;if(ae.vocab&&J in te){var ue=G["@language"]||"@none";te=[];Fe(X)&&"@index"in X&&te.push("@index");var we="@language",Le="@null";if(ne)we="@type",Le="@reverse",te.push("@set");else if(xt(X)){"@index"in X||te.push("@list");var Ie=X["@list"];Le=0===Ie.length?ue:null,ue=null;for(ne=0;ne<Ie.length;++ne){var Me=Ie[ne],Ne="@none",je="@none";if(dt(Me)?"@language"in Me?Ne=Me["@language"]:"@type"in Me?je=Me["@type"]:Ne="@null":je="@id",null===Le?Le=Ne:Ne!==Le&&dt(Me)&&(Le="@none"),null===ue?ue=je:je!==ue&&(ue="@none"),"@none"===Le&&"@none"===ue)break}Le=Le||"@none","@none"!==(ue=ue||"@none")&&(we="@type",Le=ue)}else dt(X)?"@language"in X&&!("@index"in X)?(te.push("@language"),Le=X["@language"]):"@type"in X&&(we="@type",Le=X["@type"]):(we="@type",Le="@id"),te.push("@set");te.push("@none");e:{for((Ie=X,ne=we,null===Le&&(Le="@null"),we=[],"@id"!==Le&&"@reverse"!==Le||!st(Ie)?we.push(Le):("@reverse"===Le&&we.push("@reverse"),(Le=ge(G,Ie["@id"],null,{vocab:!0}))in G.mappings&&G.mappings[Le]&&G.mappings[Le]["@id"]===Ie["@id"]?we.push.apply(we,["@vocab","@id"]):we.push.apply(we,["@id","@vocab"])),we.push("@none"),Ie=G.inverse[J],Le=0);Le<te.length;++Le)if((ue=te[Le])in Ie)for(ue=Ie[ue][ne],Me=0;Me<we.length;++Me)if((Ne=we[Me])in ue){te=ue[Ne];break e}te=null}if(null!==te)return te}if(ae.vocab&&"@vocab"in G&&(te=G["@vocab"],0===J.indexOf(te)&&J!==te&&!((te=J.substr(te.length))in G.mappings)))return te;for(te=null,ne=0,we=[],Ie=G.fastCurieMap,Le=J.length-1;ne<Le&&J[ne]in Ie;++ne)""in(Ie=Ie[J[ne]])&&we.push(Ie[""][0]);for(ne=we.length-1;0<=ne;--ne)for(Le=(Ie=we[ne]).terms,ue=0;ue<Le.length;++ue)(Me=Le[ue]+":"+J.substr(Ie.iri.length))in G.mappings&&(null!==X||G.mappings[Me]["@id"]!==J)||!(null===te||0>Y(Me,te))||(te=Me);if(null!==te)return te;if(!ae.vocab&&(null!==(G=G["@base"])&&(me(G)&&(G=j.url.parse(G||"")),X="",""!==G.href?X+=(G.protocol||"")+"//"+(G.authority||""):J.indexOf("//")&&(X+="//"),0===J.indexOf(X)))){for(J=j.url.parse(J.substr(X.length)),G=G.normalizedPath.split("/"),X=J.normalizedPath.split("/"),ae=J.fragment||J.query?0:1;0<G.length&&X.length>ae&&G[0]===X[0];)G.shift(),X.shift();if(ae="",0<G.length)for(G.pop(),te=0;te<G.length;++te)ae+="../";ae+=X.join("/"),null!==J.query&&(ae+="?"+J.query),null!==J.fragment&&(ae+="#"+J.fragment),""===ae&&(ae="./"),J=ae}return J}function _e(G,J,X,ae){if(X in ae){if(ae[X])return;throw new Pe("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:J,term:X})}if(ae[X]=!1,$e(X))throw new Pe("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:J,term:X});if(""===X)throw new Pe("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:J});G.mappings[X]&&delete G.mappings[X];var ne=J[X];if(null===ne||Fe(ne)&&null===ne["@id"])G.mappings[X]=null,ae[X]=!0;else{if(me(ne)&&(ne={"@id":ne}),!Fe(ne))throw new Pe("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:J});var te=G.mappings[X]={};if(te.reverse=!1,"@reverse"in ne){if("@id"in ne)throw new Pe("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:J});var ue=ne["@reverse"];if(!me(ue))throw new Pe("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:J});if(!Wt(ue=Se(G,ue,{vocab:!0,base:!1},J,ae)))throw new Pe("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:J});te["@id"]=ue,te.reverse=!0}else if("@id"in ne){if(!me(ue=ne["@id"]))throw new Pe("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:J});if(ue!==X){if(!Wt(ue=Se(G,ue,{vocab:!0,base:!1},J,ae))&&!$e(ue))throw new Pe("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:J});te["@id"]=ue}}var we=X.indexOf(":");if(te._termHasColon=-1!==we,!("@id"in te))if(te._termHasColon)(ue=X.substr(0,we))in J&&_e(G,J,ue,ae),G.mappings[ue]?(we=X.substr(we+1),te["@id"]=G.mappings[ue]["@id"]+we):te["@id"]=X;else{if(!("@vocab"in G))throw new Pe("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:J,term:X});te["@id"]=G["@vocab"]+X}if(ae[X]=!0,"@type"in ne){if(!me(X=ne["@type"]))throw new Pe("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:J});if("@id"!==X&&"@vocab"!==X){if(!Wt(X=Se(G,X,{vocab:!0,base:!1},J,ae)))throw new Pe("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:J});if(0===X.indexOf("_:"))throw new Pe("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:J})}te["@type"]=X}if("@container"in ne){if("@list"!==(G=ne["@container"])&&"@set"!==G&&"@index"!==G&&"@language"!==G)throw new Pe("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:J});if(te.reverse&&"@index"!==G&&"@set"!==G&&null!==G)throw new Pe("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:J});te["@container"]=G}if("@language"in ne&&!("@type"in ne)){if(null!==(ne=ne["@language"])&&!me(ne))throw new Pe("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:J});null!==ne&&(ne=ne.toLowerCase()),te["@language"]=ne}if("@context"===(ue=te["@id"])||"@preserve"===ue)throw new Pe("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:J})}}function Se(G,J,X,ae,ne){if(null===J||$e(J))return J;if(J=String(J),ae&&J in ae&&!0!==ne[J]&&_e(G,ae,J,ne),(X=X||{}).vocab){var te=G.mappings[J];if(null===te)return null;if(te)return te["@id"]}if(-1!==(te=J.indexOf(":"))){X=J.substr(0,te);var ue=J.substr(te+1);return"_"===X||0===ue.indexOf("//")?J:(ae&&X in ae&&_e(G,ae,X,ne),(te=G.mappings[X])?te["@id"]+ue:J)}return X.vocab&&"@vocab"in G?G["@vocab"]+J:(X.base&&(J=j.prependBase(G["@base"],J)),J)}function We(G){function J(X,ae,ne){var te=X[ae];X=X[ae]={};for(var ue,we=0;we<te.length;++we)(ue=ne>=(ue=te[we].iri).length?"":ue[ne])in X?X[ue].push(te[we]):X[ue]=[te[we]];for(ae in X)""!==ae&&J(X,ae,ne+1)}return{"@base":j.url.parse(G.base||""),mappings:{},inverse:null,getInverse:function(){if(this.inverse)return this.inverse;for(var X=this.inverse={},ae=this.fastCurieMap={},ne={},te=this["@language"]||"@none",ue=this.mappings,we=Object.keys(ue).sort(Y),Le=0;Le<we.length;++Le){var Ie=we[Le],Me=ue[Ie];if(null!==Me){var Ne=Me["@container"]||"@none",je=Me["@id"];oe(je)||(je=[je]);for(var Re=0;Re<je.length;++Re){var He=je[Re],Ze=X[He],Ke=$e(He);Ze?Ke||Me._termHasColon||ne[He].push(Ie):(X[He]=Ze={},Ke||Me._termHasColon||(ne[He]=[Ie],Ke={iri:He,terms:ne[He]},He[0]in ae?ae[He[0]].push(Ke):ae[He[0]]=[Ke])),Ze[Ne]||(Ze[Ne]={"@language":{},"@type":{}}),Ze=Ze[Ne],Me.reverse?"@reverse"in(Ze=Ze["@type"])||(Ze["@reverse"]=Ie):"@type"in Me?(Ze=Ze["@type"],(He=Me["@type"])in Ze||(Ze[He]=Ie)):"@language"in Me?(Ze=Ze["@language"],(He=Me["@language"]||"@null")in Ze||(Ze[He]=Ie)):(te in(He=Ze["@language"])||(He[te]=Ie),"@none"in(He=Ze["@type"])||(He["@none"]=Ie),"@none"in(Ze=Ze["@language"])||(Ze["@none"]=Ie))}}}for(var Ft in ae)J(ae,Ft,1);return X},clone:function(){var X={};return X["@base"]=this["@base"],X.mappings=tt(this.mappings),X.clone=this.clone,X.inverse=null,X.getInverse=this.getInverse,"@language"in this&&(X["@language"]=this["@language"]),"@vocab"in this&&(X["@vocab"]=this["@vocab"]),X}}}function $e(G){if(!me(G))return!1;switch(G){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function Fe(G){return"[object Object]"===Object.prototype.toString.call(G)}function oe(G){return Array.isArray(G)}function me(G){return"string"==typeof G||"[object String]"===Object.prototype.toString.call(G)}function Ae(G){return"number"==typeof G||"[object Number]"===Object.prototype.toString.call(G)}function qe(G){return Ae(G)&&-1!==String(G).indexOf(".")}function et(G){return void 0===G}function st(G){return Fe(G)&&1===Object.keys(G).length&&"@id"in G}function dt(G){return Fe(G)&&"@value"in G}function xt(G){return Fe(G)&&"@list"in G}function Pt(G){var J=!1;return Fe(G)&&(J="@id"in G?0===G["@id"].indexOf("_:"):0===Object.keys(G).length||!("@value"in G||"@set"in G||"@list"in G)),J}function Wt(G){return me(G)&&-1!==G.indexOf(":")}function tt(G){if(G&&"object"==typeof G){var J;if(oe(G)){J=[];for(var X=0;X<G.length;++X)J[X]=tt(G[X])}else if(Fe(G))for(X in J={},G)J[X]=tt(G[X]);else J=G.toString();return J}return G}function it(G,J,X,ae){var ne=Object.keys(J).length;if(oe(G)){for(var te=0;te<G.length;++te)it(G[te],J,X,ae);return ne<Object.keys(J).length}if(Fe(G)){for(var ue in G)if("@context"!==ue)it(G[ue],J,X,ae);else{var we=G[ue];if(oe(we)){var Le=we.length;for(te=0;te<Le;++te){var Ie=we[te];me(Ie)&&(Ie=j.prependBase(ae,Ie),X?oe(Ie=J[Ie])?(Array.prototype.splice.apply(we,[te,1].concat(Ie)),te+=Ie.length-1,Le=we.length):we[te]=Ie:Ie in J||(J[Ie]=!1))}}else me(we)&&(we=j.prependBase(ae,we),X?G[ue]=J[we]:we in J||(J[we]=!1))}return ne<Object.keys(J).length}return!1}function vt(G,J,X){var ae=null,ne=function(te,ue,we,Le,Ie){if(Object.keys(ue).length>Je)return ae=new Pe("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:Je}),Ie(ae);var Me={};it(te,Me,!1,Le)||(it(te,Me,!0,Le),Ie(null,te));var je,Ne=[];for(je in Me)!1===Me[je]&&Ne.push(je);var Re=Ne.length;for(je=0;je<Ne.length;++je)!function(He){if(He in ue)return ae=new Pe("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:He}),Ie(ae);var Ze=tt(ue);Ze[He]=!0;var Ke=function(mt,wt){if(!ae){var Nt=wt?wt.document:null;if(!mt&&me(Nt))try{Nt=JSON.parse(Nt)}catch(Bt){mt=Bt}if(mt?mt=new Pe("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:He,cause:mt}):Fe(Nt)||(mt=new Pe("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:He,cause:mt})),mt)return Ie(ae=mt);Nt="@context"in Nt?{"@context":Nt["@context"]}:{"@context":{}},wt.contextUrl&&(oe(Nt["@context"])||(Nt["@context"]=[Nt["@context"]]),Nt["@context"].push(wt.contextUrl)),ne(Nt,Ze,we,He,function(Bt,Rt){if(Bt)return Ie(Bt);Me[He]=Rt["@context"],0===--Re&&(it(te,Me,!0,Le),Ie(null,te))})}},Ft=we(He,Ke);Ft&&"then"in Ft&&Ft.then(Ke.bind(null,null),Ke)}(Ne[je])};ne(G,{},J.documentLoader,J.base,X)}function ct(G){var J=/^[ \t]*(?:#.*)?$/,X=/^[ \t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \t]+(?:<([^:]+:[^>]*)>)[ \t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+))|(?:"([^"\\]*(?:\\.[^"\\]*)*)"(?:(?:\^\^(?:<([^:]+:[^>]*)>))|(?:@([a-z]+(?:-[a-z0-9]+)*)))?))[ \t]*(?:\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \t]*\.))[ \t]*(?:#.*)?$/,ae={};G=G.split(/(?:\r\n)|(?:\n)|(?:\r)/g);for(var ne=0,te=0;te<G.length;++te){var ue=G[te];if(ne++,!J.test(ue)){if(null===(we=ue.match(X)))throw new Pe("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:ne});if(ue={},et(we[1])?ue.subject={type:"blank node",value:we[2]}:ue.subject={type:"IRI",value:we[1]},ue.predicate={type:"IRI",value:we[3]},et(we[4]))if(et(we[5])){ue.object={type:"literal"},et(we[7])?et(we[8])?ue.object.datatype=tr:(ue.object.datatype=mr,ue.object.language=we[8]):ue.object.datatype=we[7];var Le=we[6].replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");ue.object.value=Le}else ue.object={type:"blank node",value:we[5]};else ue.object={type:"IRI",value:we[4]};if(Le="@default",et(we[9])?et(we[10])||(Le=we[10]):Le=we[9],Le in ae){for(var we=!0,Ie=(Le=ae[Le],0);we&&Ie<Le.length;++Ie){var Me;e:{Me=Le[Ie];for(var Ne=["subject","predicate","object"],je=0;je<Ne.length;++je){var Re=Ne[je];if(Me[Re].type!==ue[Re].type||Me[Re].value!==ue[Re].value){Me=!1;break e}}Me=!(Me.object.language!==ue.object.language||Me.object.datatype!==ue.object.datatype)}Me&&(we=!1)}we&&Le.push(ue)}else ae[Le]=[ue]}}return ae}function At(G,J){var X=G.subject,ae=G.predicate,ne=G.object,te=J||null;"name"in G&&G.name&&(te=G.name.value);var ue="";ue=(ue="IRI"===X.type?ue+"<"+X.value+">":ue+X.value)+" ",ue=(ue="IRI"===ae.type?ue+"<"+ae.value+">":ue+ae.value)+" ";return"IRI"===ne.type?ue+="<"+ne.value+">":"blank node"===ne.type?ue+=ne.value:(ue+='"'+(X=ne.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"'))+'"',ne.datatype===mr?ne.language&&(ue+="@"+ne.language):ne.datatype!==tr&&(ue+="^^<"+ne.datatype+">")),null!=te&&(ue=0!==te.indexOf("_:")?ue+" <"+te+">":ue+" "+te),ue+" .\n"}function yt(G){this.prefix=G,this.counter=0,this.existing={}}function It(G,J){var X="";0===G.indexOf("/")&&(X="/");for(var ae=G.split("/"),ne=[];0<ae.length;)"."===ae[0]||""===ae[0]&&1<ae.length?ae.shift():".."===ae[0]?(ae.shift(),J||0<ne.length&&".."!==ne[ne.length-1]?ne.pop():ne.push("..")):ne.push(ae.shift());return X+ne.join("/")}if(j.compact=function(G,J,X,ae){return 2>arguments.length?j.nextTick(function(){ae(new TypeError("Could not compact, too few arguments."))}):("function"==typeof X&&(ae=X,X={}),X=X||{},null===J?j.nextTick(function(){ae(new Pe("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))}):null===G?j.nextTick(function(){ae(null,null)}):("base"in X||(X.base="string"==typeof G?G:""),"compactArrays"in X||(X.compactArrays=!0),"graph"in X||(X.graph=!1),"skipExpansion"in X||(X.skipExpansion=!1),"documentLoader"in X||(X.documentLoader=j.loadDocument),"link"in X||(X.link=!1),X.link&&(X.skipExpansion=!0),void function(ne,te,ue){if(te.skipExpansion)return j.nextTick(function(){ue(null,ne)});j.expand(ne,te,ue)}(G,X,function(ne,te){if(ne)return ae(new Pe("Could not expand input before compaction.","jsonld.CompactError",{cause:ne}));var ue=We(X);j.processContext(ue,J,X,function(we,Le){if(we)return ae(new Pe("Could not process context before compaction.","jsonld.CompactError",{cause:we}));var Ie;try{Ie=(new ie).compact(Le,null,te,X)}catch(Re){return ae(Re)}var Me=X;Me.compactArrays&&!Me.graph&&oe(Ie)?1===Ie.length?Ie=Ie[0]:0===Ie.length&&(Ie={}):Me.graph&&Fe(Ie)&&(Ie=[Ie]),Fe(J)&&"@context"in J&&(J=J["@context"]),oe(J=tt(J))||(J=[J]),Me=J,J=[];for(var Ne=0;Ne<Me.length;++Ne)(!Fe(Me[Ne])||0<Object.keys(Me[Ne]).length)&&J.push(Me[Ne]);if(Me=0<J.length,1===J.length&&(J=J[0]),oe(Ie)){var je=ge(Le,"@graph");Ne=Ie;Ie={},Me&&(Ie["@context"]=J),Ie[je]=Ne}else if(Fe(Ie)&&Me)for(je in Ne=Ie,Ie={"@context":J},Ne)Ie[je]=Ne[je];ae(null,Ie,Le)})})))},j.expand=function(G,J,X){function ae(ne){if("base"in J||(J.base=ne.documentUrl||""),ne={document:tt(ne.document),remoteContext:{"@context":ne.contextUrl}},"expandContext"in J){var te=tt(J.expandContext);ne.expandContext="object"==typeof te&&"@context"in te?te:{"@context":te}}vt(ne,J,function(ue,we){if(ue)return X(ue);var Le;try{var Ie=new ie,Me=We(J),Ne=we.document,je=we.remoteContext["@context"];we.expandContext&&(Me=Ie.processContext(Me,we.expandContext["@context"],J)),je&&(Me=Ie.processContext(Me,je,J)),Fe(Le=Ie.expand(Me,null,Ne,J,!1))&&"@graph"in Le&&1===Object.keys(Le).length?Le=Le["@graph"]:null===Le&&(Le=[]),oe(Le)||(Le=[Le])}catch(Re){return X(Re)}X(null,Le)})}if(1>arguments.length)return j.nextTick(function(){X(new TypeError("Could not expand, too few arguments."))});"function"==typeof J&&(X=J,J={}),"documentLoader"in(J=J||{})||(J.documentLoader=j.loadDocument),"keepFreeFloatingNodes"in J||(J.keepFreeFloatingNodes=!1),j.nextTick(function(){if("string"==typeof G){var ne=function(ue,we){if(ue)return X(ue);try{if(!we.document)throw new Pe("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof we.document&&(we.document=JSON.parse(we.document))}catch(Le){return X(new Pe("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Le,remoteDoc:we}))}ae(we)},te=J.documentLoader(G,ne);te&&"then"in te&&te.then(ne.bind(null,null),ne)}else ae({contextUrl:null,documentUrl:null,document:G})})},j.flatten=function(G,J,X,ae){if(1>arguments.length)return j.nextTick(function(){ae(new TypeError("Could not flatten, too few arguments."))});"function"==typeof X?(ae=X,X={}):"function"==typeof J&&(ae=J,J=null,X={}),"base"in(X=X||{})||(X.base="string"==typeof G?G:""),"documentLoader"in X||(X.documentLoader=j.loadDocument),j.expand(G,X,function(ne,te){if(ne)return ae(new Pe("Could not expand input before flattening.","jsonld.FlattenError",{cause:ne}));var ue;try{ue=(new ie).flatten(te)}catch(we){return ae(we)}if(null===J)return ae(null,ue);X.graph=!0,X.skipExpansion=!0,j.compact(ue,J,X,function(we,Le){if(we)return ae(new Pe("Could not compact flattened output.","jsonld.FlattenError",{cause:we}));ae(null,Le)})})},j.frame=function(G,J,X,ae){function ne(te){var we,ue=te.document;ue?(we=ue["@context"],te.contextUrl?(we?oe(we)?we.push(te.contextUrl):we=[we,te.contextUrl]:we=te.contextUrl,ue["@context"]=we):we=we||{}):we={},j.expand(G,X,function(Le,Ie){if(Le)return ae(new Pe("Could not expand input before framing.","jsonld.FrameError",{cause:Le}));var Me=tt(X);Me.isFrame=!0,Me.keepFreeFloatingNodes=!0,j.expand(ue,Me,function(Ne,je){if(Ne)return ae(new Pe("Could not expand frame before framing.","jsonld.FrameError",{cause:Ne}));var Re;try{Re=(new ie).frame(Ie,je,Me)}catch(He){return ae(He)}Me.graph=!0,Me.skipExpansion=!0,Me.link={},j.compact(Re,we,Me,function(He,Ze,Ke){if(He)return ae(new Pe("Could not compact framed output.","jsonld.FrameError",{cause:He}));He=ge(Ke,"@graph"),Me.link={},Ze[He]=W(Ke,Ze[He],Me),ae(null,Ze)})})})}if(2>arguments.length)return j.nextTick(function(){ae(new TypeError("Could not frame, too few arguments."))});"function"==typeof X&&(ae=X,X={}),"base"in(X=X||{})||(X.base="string"==typeof G?G:""),"documentLoader"in X||(X.documentLoader=j.loadDocument),"embed"in X||(X.embed="@last"),X.explicit=X.explicit||!1,"requireAll"in X||(X.requireAll=!0),X.omitDefault=X.omitDefault||!1,j.nextTick(function(){if("string"==typeof J){var te=function(we,Le){if(we)return ae(we);try{if(!Le.document)throw new Pe("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof Le.document&&(Le.document=JSON.parse(Le.document))}catch(Ie){return ae(new Pe("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Ie,remoteDoc:Le}))}ne(Le)},ue=X.documentLoader(J,te);ue&&"then"in ue&&ue.then(te.bind(null,null),te)}else ne({contextUrl:null,documentUrl:null,document:J})})},j.link=function(G,J,X,ae){var ne={};J&&(ne["@context"]=J),ne["@embed"]="@link",j.frame(G,ne,X,ae)},j.objectify=function(G,J,X,ae){"function"==typeof X&&(ae=X,X={}),"base"in(X=X||{})||(X.base="string"==typeof G?G:""),"documentLoader"in X||(X.documentLoader=j.loadDocument),j.expand(G,X,function(ne,te){if(ne)return ae(new Pe("Could not expand input before linking.","jsonld.LinkError",{cause:ne}));var ue;try{ue=(new ie).flatten(te)}catch(we){return ae(we)}X.graph=!0,X.skipExpansion=!0,j.compact(ue,J,X,function(we,Le,Ie){if(we)return ae(new Pe("Could not compact flattened output before linking.","jsonld.LinkError",{cause:we}));var Me=Le[we=ge(Ie,"@graph")][0],Ne=function(He){if(Fe(He)||oe(He)){if(Fe(He)){if(Ne.visited[He["@id"]])return;Ne.visited[He["@id"]]=!0}for(var Ze in He){var Ke=He[Ze],Ft="@id"===j.getContextValue(Ie,Ze,"@type");if(oe(Ke)||Fe(Ke)||Ft)if(me(Ke)&&Ft)He[Ze]=Ke=Me[Ke],Ne(Ke);else if(oe(Ke))for(var mt=0;mt<Ke.length;++mt)me(Ke[mt])&&Ft?Ke[mt]=Me[Ke[mt]]:Fe(Ke[mt])&&"@id"in Ke[mt]&&(Ke[mt]=Me[Ke[mt]["@id"]]),Ne(Ke[mt]);else Fe(Ke)&&(He[Ze]=Ke=Me[Ke["@id"]],Ne(Ke))}}};for(var je in Ne.visited={},Ne(Me),Le.of_type={},Me)if("@type"in Me[je]){oe(we=Me[je]["@type"])||(we=[we]);for(var Re=0;Re<we.length;++Re)we[Re]in Le.of_type||(Le.of_type[we[Re]]=[]),Le.of_type[we[Re]].push(Me[je])}ae(null,Le)})})},j.normalize=function(G,J,X){if(1>arguments.length)return j.nextTick(function(){X(new TypeError("Could not normalize, too few arguments."))});if("function"==typeof J&&(X=J,J={}),"algorithm"in(J=J||{})||(J.algorithm="URGNA2012"),"base"in J||(J.base="string"==typeof G?G:""),"documentLoader"in J||(J.documentLoader=j.loadDocument),"inputFormat"in J){if("application/nquads"!==J.inputFormat)return X(new Pe("Unknown normalization input format.","jsonld.NormalizeError"));var ae=ct(G);(new ie).normalize(ae,J,X)}else delete(ae=tt(J)).format,ae.produceGeneralizedRdf=!1,j.toRDF(G,ae,function(ne,te){if(ne)return X(new Pe("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:ne}));(new ie).normalize(te,J,X)})},j.fromRDF=function(G,J,X){if(1>arguments.length)return j.nextTick(function(){X(new TypeError("Could not convert from RDF, too few arguments."))});"function"==typeof J&&(X=J,J={}),"useRdfType"in(J=J||{})||(J.useRdfType=!1),"useNativeTypes"in J||(J.useNativeTypes=!1),"format"in J||!me(G)||"format"in J||(J.format="application/nquads"),j.nextTick(function(){function ae(ue,we,Le){(new ie).fromRDF(ue,we,Le)}var ne;if(J.format){if(!(ne=J.rdfParser||Xr[J.format]))return X(new Pe("Unknown input format.","jsonld.UnknownFormat",{format:J.format}))}else ne=function(){return G};var te=!1;try{G=ne(G,function(ue,we){if(te=!0,ue)return X(ue);ae(we,J,X)})}catch(ue){if(!te)return X(ue);throw ue}if(G){if("then"in G)return G.then(function(ue){ae(ue,J,X)},X);ae(G,J,X)}})},j.toRDF=function(G,J,X){if(1>arguments.length)return j.nextTick(function(){X(new TypeError("Could not convert to RDF, too few arguments."))});"function"==typeof J&&(X=J,J={}),"base"in(J=J||{})||(J.base="string"==typeof G?G:""),"documentLoader"in J||(J.documentLoader=j.loadDocument),j.expand(G,J,function(ae,ne){if(ae)return X(new Pe("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:ae}));var te;try{if(te=ie.prototype.toRDF(ne,J),J.format){if("application/nquads"===J.format){var Ie,ue=X,Le=[];for(Ie in te)for(var Me=te[Ie],Ne=0;Ne<Me.length;++Ne){var je=Me[Ne];"@default"===Ie&&(Ie=null),Le.push(At(je,Ie))}return ue(null,Le.sort().join(""))}throw new Pe("Unknown output format.","jsonld.UnknownFormat",{format:J.format})}}catch(Re){return X(Re)}X(null,te)})},j.createNodeMap=function(G,J,X){if(1>arguments.length)return j.nextTick(function(){X(new TypeError("Could not create node map, too few arguments."))});"function"==typeof J&&(X=J,J={}),"base"in(J=J||{})||(J.base="string"==typeof G?G:""),"documentLoader"in J||(J.documentLoader=j.loadDocument),j.expand(G,J,function(ae,ne){if(ae)return X(new Pe("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:ae}));var te;try{te=(new ie).createNodeMap(ne,J)}catch(ue){return X(ue)}X(null,te)})},j.merge=function(G,J,X,ae){function ne(je,Re){if(!we){if(je)return we=je,ae(new Pe("Could not expand input before flattening.","jsonld.FlattenError",{cause:je}));ue.push(Re),0==--Le&&te(ue)}}function te(je){var Re=!0;"mergeNodes"in X&&(Re=X.mergeNodes);var Ke,He=X.namer||X.issuer||new yt("_:b"),Ze={"@default":{}};try{for(var Ft=0;Ft<je.length;++Ft){var mt=je[Ft],wt=(mt=j.relabelBlankNodes(mt,{issuer:new yt("_:b"+Ft+"-")}),Re||0===Ft?Ze:{"@default":{}});if(H(mt,wt,"@default",He),wt!==Ze)for(var Nt in wt){var Bt=wt[Nt];if(Nt in Ze){var Zt,Rt=Ze[Nt];for(Zt in Bt)Zt in Rt||(Rt[Zt]=Bt[Zt])}else Ze[Nt]=Bt}}Ke=ce(Ze)}catch(br){return ae(br)}for(je=[],Re=Object.keys(Ke).sort(),He=0;He<Re.length;++He)st(Ze=Ke[Re[He]])||je.push(Ze);if(null===J)return ae(null,je);X.graph=!0,X.skipExpansion=!0,j.compact(je,J,X,function(br,jr){if(br)return ae(new Pe("Could not compact merged output.","jsonld.MergeError",{cause:br}));ae(null,jr)})}if(1>arguments.length)return j.nextTick(function(){ae(new TypeError("Could not merge, too few arguments."))});if(!oe(G))return j.nextTick(function(){ae(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof X?(ae=X,X={}):"function"==typeof J&&(ae=J,J=null,X={}),X=X||{};for(var ue=[],we=null,Le=G.length,Ie=0;Ie<G.length;++Ie){var Ne,Me={};for(Ne in X)Me[Ne]=X[Ne];j.expand(G[Ie],Me,ne)}},j.relabelBlankNodes=function(G,J){return D((J=J||{}).namer||J.issuer||new yt("_:b"),G)},j.prependBase=function(G,J){var X,ae=G;if(null===ae)X=J;else if(-1!==J.indexOf(":"))X=J;else{me(ae)&&(ae=j.url.parse(ae||"")),X=j.url.parse(J);var te,ue,ne=ae.protocol||"";null!==X.authority?(te=X.authority,ue=X.path,ae=X.query):(te=ae.authority,""===X.path?(ue=ae.path,ae=null!==X.query?X.query:ae.query):(0===X.path.indexOf("/")?ue=X.path:(ue=ae.path,""!==X.path&&(0<(ue=ue.substr(0,ue.lastIndexOf("/")+1)).length&&"/"!==ue.substr(-1)&&(ue+="/"),ue+=X.path)),ae=X.query)),null!==te&&(ne+="//"+te),ne+=ue=It(ue,!!te),null!==ae&&(ne+="?"+ae),null!==X.fragment&&(ne+="#"+X.fragment),""===ne&&(ne="./"),X=ne}return X},j.documentLoader=function(G,J){var X=new Pe("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return E?J(X,{contextUrl:null,documentUrl:G,document:null}):j.promisify(function(ae){ae(X)})},j.loadDocument=function(G,J){var X=j.documentLoader(G,J);X&&"then"in X&&X.then(J.bind(null,null),J)},j.promises=function(G){G=G||{};var J=Array.prototype.slice,X=j.promisify,ae=G.api||{},ne=G.version||"jsonld.js";"string"==typeof G.api&&(G.version||(ne=G.api),ae={}),ae.expand=function(ue){if(1>arguments.length)throw new TypeError("Could not expand, too few arguments.");return X.apply(null,[j.expand].concat(J.call(arguments)))},ae.compact=function(ue,we){if(2>arguments.length)throw new TypeError("Could not compact, too few arguments.");return X.apply(null,[function(Le,Ie,Me,Ne){j.compact(Le,Ie,Me,function(je,Re){Ne(je,Re)})}].concat(J.call(arguments)))},ae.flatten=function(ue){if(1>arguments.length)throw new TypeError("Could not flatten, too few arguments.");return X.apply(null,[j.flatten].concat(J.call(arguments)))},ae.frame=function(ue,we){if(2>arguments.length)throw new TypeError("Could not frame, too few arguments.");return X.apply(null,[j.frame].concat(J.call(arguments)))},ae.fromRDF=function(ue){if(1>arguments.length)throw new TypeError("Could not convert from RDF, too few arguments.");return X.apply(null,[j.fromRDF].concat(J.call(arguments)))},ae.toRDF=function(ue){if(1>arguments.length)throw new TypeError("Could not convert to RDF, too few arguments.");return X.apply(null,[j.toRDF].concat(J.call(arguments)))},ae.normalize=function(ue){if(1>arguments.length)throw new TypeError("Could not normalize, too few arguments.");return X.apply(null,[j.normalize].concat(J.call(arguments)))},"jsonld.js"===ne&&(ae.link=function(ue,we){if(2>arguments.length)throw new TypeError("Could not link, too few arguments.");return X.apply(null,[j.link].concat(J.call(arguments)))},ae.objectify=function(ue){return X.apply(null,[j.objectify].concat(J.call(arguments)))},ae.createNodeMap=function(ue){return X.apply(null,[j.createNodeMap].concat(J.call(arguments)))},ae.merge=function(ue){return X.apply(null,[j.merge].concat(J.call(arguments)))});try{j.Promise=M.Promise||Ce("es6-promise").Promise}catch(ue){for(var te in G=function(){throw Error("Unable to find a Promise implementation.")},ae)ae[te]=G}return ae},j.promisify=function(G){if(!j.Promise)try{j.Promise=M.Promise||Ce("es6-promise").Promise}catch(X){throw Error("Unable to find a Promise implementation.")}var J=Array.prototype.slice.call(arguments,1);return new j.Promise(function(X,ae){G.apply(null,J.concat(function(ne,te){ne?ae(ne):X(te)}))})},j.promises({api:j.promises}),s.prototype=j.promises({version:"json-ld-1.0"}),s.prototype.toString=function(){return this instanceof s?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},j.JsonLdProcessor=s,Ut=!!Object.defineProperty)try{Object.defineProperty({},"x",{})}catch(G){Ut=!1}Ut&&(Object.defineProperty(s,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(s.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:s})),F&&void 0===M.JsonLdProcessor&&(Ut?Object.defineProperty(M,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:s}):M.JsonLdProcessor=s);var St="function"==typeof setImmediate&&setImmediate,Ut=St?function(G){St(G)}:function(G){setTimeout(G,0)};j.nextTick="object"==typeof ye&&"function"==typeof ye.nextTick?ye.nextTick:Ut,j.setImmediate=St?Ut:j.nextTick,j.parseLinkHeader=function(G){var J={};G=G.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g);for(var X=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,ae=0;ae<G.length;++ae){var ne=G[ae].match(X);if(ne){for(var te={target:ne[1]},ue=ne[2],we=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;ne=we.exec(ue);)te[ne[1]]=void 0===ne[2]?ne[3]:ne[2];oe(J[ne=te.rel||""])?J[ne].push(te):J[ne]=ne in J?[J[ne],te]:te}}return J},j.RequestQueue=function(){this._requests={}},j.RequestQueue.prototype.wrapLoader=function(G){return this._loader=G,this._usePromise=1===G.length,this.add.bind(this)},j.RequestQueue.prototype.add=function(G,J){var X=this;if(!J&&!X._usePromise)throw Error("callback must be specified.");if(X._usePromise)return new j.Promise(function(ae,ne){var te=X._requests[G];te||(te=X._requests[G]=X._loader(G).then(function(ue){return delete X._requests[G],ue}).catch(function(ue){throw delete X._requests[G],ue})),te.then(function(ue){ae(ue)}).catch(function(ue){ne(ue)})});G in X._requests?X._requests[G].push(J):(X._requests[G]=[J],X._loader(G,function(ae,ne){var te=X._requests[G];delete X._requests[G];for(var ue=0;ue<te.length;++ue)te[ue](ae,ne)}))},j.DocumentCache=function(G){this.order=[],this.cache={},this.size=G||50,this.expires=3e4},j.DocumentCache.prototype.get=function(G){if(G in this.cache){var J=this.cache[G];if(J.expires>=+new Date)return J.ctx;delete this.cache[G],this.order.splice(this.order.indexOf(G),1)}return null},j.DocumentCache.prototype.set=function(G,J){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(G),this.cache[G]={ctx:J,expires:+new Date+this.expires}},j.ActiveContextCache=function(G){this.order=[],this.cache={},this.size=G||100},j.ActiveContextCache.prototype.get=function(G,J){var X=JSON.stringify(G),ae=JSON.stringify(J);return(X=this.cache[X])&&ae in X?X[ae]:null},j.ActiveContextCache.prototype.set=function(G,J,X){if(this.order.length===this.size){var ae=this.order.shift();delete this.cache[ae.activeCtx][ae.localCtx]}G=JSON.stringify(G),J=JSON.stringify(J),this.order.push({activeCtx:G,localCtx:J}),G in this.cache||(this.cache[G]={}),this.cache[G][J]=tt(X)},j.cache={activeCtx:new j.ActiveContextCache},j.documentLoaders={},j.documentLoaders.jquery=function(G,J){function X(ne,te){return 0!==ne.indexOf("http:")&&0!==ne.indexOf("https:")?te(new Pe('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:ne}),{contextUrl:null,documentUrl:ne,document:null}):J.secure&&0!==ne.indexOf("https")?te(new Pe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:ne}),{contextUrl:null,documentUrl:ne,document:null}):void G.ajax({url:ne,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(ue,we,Le){if(ue={contextUrl:null,documentUrl:ne,document:ue},we=Le.getResponseHeader("Content-Type"),(Le=Le.getResponseHeader("Link"))&&"application/ld+json"!==we){if(oe(Le=j.parseLinkHeader(Le)[Xe]))return te(new Pe("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:ne}),ue);Le&&(ue.contextUrl=Le.target)}te(null,ue)},error:function(ue,we,Le){te(new Pe("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:ne,cause:Le}),{contextUrl:null,documentUrl:ne,document:null})}})}J=J||{};var ae=new j.RequestQueue;return("usePromise"in J?J.usePromise:"undefined"!=typeof Promise)?ae.wrapLoader(function(ne){return j.promisify(X,ne)}):ae.wrapLoader(X)},j.documentLoaders.node=function(G){function J(Le,Ie,Me){if(0!==Le.indexOf("http:")&&0!==Le.indexOf("https:"))return Me(new Pe('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:Le}),{contextUrl:null,documentUrl:Le,document:null});if(G.secure&&0!==Le.indexOf("https"))return Me(new Pe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:Le}),{contextUrl:null,documentUrl:Le,document:null});var Ne=null;if(null!==Ne)return Me(null,Ne);var Re,je={Accept:"application/ld+json, application/json"};for(Re in G.headers)je[Re]=G.headers[Re];ne({url:Le,headers:je,strictSSL:X,followRedirect:!1},function(He,Ze,Ke){if(Ne={contextUrl:null,documentUrl:Le,document:Ke||null},He)return Me(new Pe("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:Le,cause:He}),Ne);if(Ke=te.STATUS_CODES[Ze.statusCode],400<=Ze.statusCode)return Me(new Pe("URL could not be dereferenced: "+Ke,"jsonld.InvalidUrl",{code:"loading document failed",url:Le,httpStatusCode:Ze.statusCode}),Ne);if(Ze.headers.link&&"application/ld+json"!==Ze.headers["content-type"]){if(oe(Ke=j.parseLinkHeader(Ze.headers.link)[Xe]))return Me(new Pe("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:Le}),Ne);Ke&&(Ne.contextUrl=Ke.target)}if(300<=Ze.statusCode&&400>Ze.statusCode&&Ze.headers.location)return Ie.length===ae?Me(new Pe("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:Le,httpStatusCode:Ze.statusCode,redirects:Ie}),Ne):-1!==Ie.indexOf(Le)?Me(new Pe("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:Le,httpStatusCode:Ze.statusCode,redirects:Ie}),Ne):(Ie.push(Le),J(Ze.headers.location,Ie,Me));Ie.push(Le),Me(He,Ne)})}var X=!("strictSSL"in(G=G||{}))||G.strictSSL,ae="maxRedirects"in G?G.maxRedirects:-1,ne="request"in G?G.request:Ce("request"),te=Ce("http"),ue=new j.RequestQueue;if(G.usePromise)return ue.wrapLoader(function(Le){return j.promisify(J,Le,[])});var we=G.headers||{};if("Accept"in we||"accept"in we)throw new RangeError('Accept header may not be specified as an option; only "application/ld+json, application/json" is supported.');return ue.wrapLoader(function(Le,Ie){J(Le,[],Ie)})},j.documentLoaders.xhr=function(G){function J(ne,te){if(0!==ne.indexOf("http:")&&0!==ne.indexOf("https:"))return te(new Pe('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:ne}),{contextUrl:null,documentUrl:ne,document:null});if(G.secure&&0!==ne.indexOf("https"))return te(new Pe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:ne}),{contextUrl:null,documentUrl:ne,document:null});var ue=new(G.xhr||XMLHttpRequest);ue.onload=function(){if(400<=ue.status)return te(new Pe("URL could not be dereferenced: "+ue.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:ne,httpStatusCode:ue.status}),{contextUrl:null,documentUrl:ne,document:null});var Ie,we={contextUrl:null,documentUrl:ne,document:ue.response},Le=ue.getResponseHeader("Content-Type");if(X.test(ue.getAllResponseHeaders())&&(Ie=ue.getResponseHeader("Link")),Ie&&"application/ld+json"!==Le){if(oe(Ie=j.parseLinkHeader(Ie)[Xe]))return te(new Pe("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:ne}),we);Ie&&(we.contextUrl=Ie.target)}te(null,we)},ue.onerror=function(){te(new Pe("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:ne}),{contextUrl:null,documentUrl:ne,document:null})},ue.open("GET",ne,!0),ue.setRequestHeader("Accept","application/ld+json, application/json"),ue.send()}G=G||{};var X=/(^|(\r\n))link:/i,ae=new j.RequestQueue;return("usePromise"in G?G.usePromise:"undefined"!=typeof Promise)?ae.wrapLoader(function(ne){return j.promisify(J,ne)}):ae.wrapLoader(J)},j.useDocumentLoader=function(G){if(!(G in j.documentLoaders))throw new Pe('Unknown document loader type: "'+G+'"',"jsonld.UnknownDocumentLoader",{type:G});j.documentLoader=j.documentLoaders[G].apply(j,Array.prototype.slice.call(arguments,1))},j.processContext=function(G,J){var X={},ae=2;3<arguments.length&&(X=arguments[2]||{},ae+=1);var ne=arguments[ae];if("base"in X||(X.base=""),"documentLoader"in X||(X.documentLoader=j.loadDocument),null===J)return ne(null,We(X));Fe(J=tt(J))&&"@context"in J||(J={"@context":J}),vt(J,X,function(te,ue){if(te)return ne(te);try{ue=(new ie).processContext(G,ue,X)}catch(we){return ne(we)}ne(null,ue)})},j.hasProperty=function(G,J){var X=!1;return J in G&&(X=!oe(X=G[J])||0<X.length),X},j.hasValue=function(G,J,X){var ae=!1;if(j.hasProperty(G,J))if(J=xt(G=G[J]),oe(G)||J){for(J&&(G=G["@list"]),J=0;J<G.length;++J)if(j.compareValues(X,G[J])){ae=!0;break}}else oe(X)||(ae=j.compareValues(X,G));return ae},j.addValue=function(G,J,X,ae){if("propertyIsArray"in(ae=ae||{})||(ae.propertyIsArray=!1),"allowDuplicate"in ae||(ae.allowDuplicate=!0),oe(X)){0!==X.length||!ae.propertyIsArray||J in G||(G[J]=[]);for(var ne=0;ne<X.length;++ne)j.addValue(G,J,X[ne],ae)}else J in G?(ne=!ae.allowDuplicate&&j.hasValue(G,J,X),oe(G[J])||ne&&!ae.propertyIsArray||(G[J]=[G[J]]),ne||G[J].push(X)):G[J]=ae.propertyIsArray?[X]:X},j.getValues=function(G,J){var X=G[J]||[];return oe(X)||(X=[X]),X},j.removeProperty=function(G,J){delete G[J]},j.removeValue=function(G,J,X,ae){"propertyIsArray"in(ae=ae||{})||(ae.propertyIsArray=!1);var ne=j.getValues(G,J).filter(function(te){return!j.compareValues(te,X)});0===ne.length?j.removeProperty(G,J):G[J]=1!==ne.length||ae.propertyIsArray?ne:ne[0]},j.compareValues=function(G,J){return!!(G===J||dt(G)&&dt(J)&&G["@value"]===J["@value"]&&G["@type"]===J["@type"]&&G["@language"]===J["@language"]&&G["@index"]===J["@index"])||!!(Fe(G)&&"@id"in G&&Fe(J)&&"@id"in J)&&G["@id"]===J["@id"]},j.getContextValue=function(G,J,X){var ae=null;return null===J||("@language"===X&&X in G&&(ae=G[X]),G.mappings[J]&&(G=G.mappings[J],et(X)?ae=G:X in G&&(ae=G[X]))),ae};var Xr={};if(j.registerRDFParser=function(G,J){Xr[G]=J},j.unregisterRDFParser=function(G){delete Xr[G]},E){if(void 0===Rr)var Rr=null;if(void 0===cr)var cr={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var tr="http://www.w3.org/2001/XMLSchema#string",mr="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",Xe="http://www.w3.org/ns/json-ld#context",Je=10,Pe=function(G,J,X){E?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=Error().stack),this.name=J||"jsonld.Error",this.message=G||"An unspecified JSON-LD error occurred.",this.details=X||{}};E?Ce("util").inherits(Pe,Error):"undefined"!=typeof Error&&(Pe.prototype=Error());var ie=function(){};ie.prototype.compact=function(G,J,X,ae){if(oe(X)){for(var ne=[],te=0;te<X.length;++te){var ue=this.compact(G,J,X[te],ae);null!==ue&&ne.push(ue)}if(ae.compactArrays&&1===ne.length)null===(we=j.getContextValue(G,J,"@container"))&&(ne=ne[0]);return ne}if(Fe(X)){if(ae.link&&"@id"in X&&X["@id"]in ae.link)for(ne=ae.link[X["@id"]],te=0;te<ne.length;++te)if(ne[te].expanded===X)return ne[te].compacted;if(dt(X)||st(X))return ne=function ke(G,J,X){if(dt(X)){var ne=j.getContextValue(G,J,"@type"),te=j.getContextValue(G,J,"@language"),ae=j.getContextValue(G,J,"@container");if(!(ae="@index"in X&&"@index"!==ae)&&(X["@type"]===ne||X["@language"]===te))return X["@value"];ne=1===(ne=Object.keys(X).length)||2===ne&&"@index"in X&&!ae,te="@language"in G;var ue=me(X["@value"]);return J=G.mappings[J]&&null===G.mappings[J]["@language"],!ne||te&&ue&&!J?(J={},ae&&(J[ge(G,"@index")]=X["@index"]),"@type"in X?J[ge(G,"@type")]=ge(G,X["@type"],null,{vocab:!0}):"@language"in X&&(J[ge(G,"@language")]=X["@language"]),J[ge(G,"@value")]=X["@value"],J):X["@value"]}return ae=Se(G,J,{vocab:!0}),ne=j.getContextValue(G,J,"@type"),X=ge(G,X["@id"],null,{vocab:"@vocab"===ne}),"@id"===ne||"@vocab"===ne||"@graph"===ae?X:((J={})[ge(G,"@id")]=X,J)}(G,J,X),ae.link&&st(X)&&(X["@id"]in ae.link||(ae.link[X["@id"]]=[]),ae.link[X["@id"]].push({expanded:X,compacted:ne})),ne;te="@reverse"===J,ne={},ae.link&&"@id"in X&&(X["@id"]in ae.link||(ae.link[X["@id"]]=[]),ae.link[X["@id"]].push({expanded:X,compacted:ne}));for(var Le=Object.keys(X).sort(),Ie=0;Ie<Le.length;++Ie){var Me=Le[Ie],Ne=X[Me];if("@id"===Me||"@type"===Me){var je;if(me(Ne))je=ge(G,Ne,null,{vocab:"@type"===Me});else{je=[];for(var Re=0;Re<Ne.length;++Re)je.push(ge(G,Ne[Re],null,{vocab:!0}))}Me=ge(G,Me),we=oe(je)&&0===Ne.length,j.addValue(ne,Me,je,{propertyIsArray:we})}else if("@reverse"===Me){for(ue in je=this.compact(G,"@reverse",Ne,ae))G.mappings[ue]&&G.mappings[ue].reverse&&(Ne=je[ue],we=j.getContextValue(G,ue,"@container"),j.addValue(ne,ue,Ne,{propertyIsArray:"@set"===we||!ae.compactArrays}),delete je[ue]);0<Object.keys(je).length&&(Me=ge(G,Me),j.addValue(ne,Me,je))}else if("@index"===Me)"@index"!==(we=j.getContextValue(G,J,"@container"))&&(Me=ge(G,Me),j.addValue(ne,Me,Ne));else if("@graph"!==Me&&"@list"!==Me&&$e(Me))Me=ge(G,Me),j.addValue(ne,Me,Ne);else for(0===Ne.length&&(je=ge(G,Me,Ne,{vocab:!0},te),j.addValue(ne,je,Ne,{propertyIsArray:!0})),Re=0;Re<Ne.length;++Re){var He=Ne[Re];je=ge(G,Me,He,{vocab:!0},te);var Ft,we=j.getContextValue(G,je,"@container"),Ze=xt(He),Ke=null;if(Ze&&(Ke=He["@list"]),Ke=this.compact(G,je,Ze?Ke:He,ae),Ze)if(oe(Ke)||(Ke=[Ke]),"@list"!==we)(Ze={})[ge(G,"@list")]=Ke,Ke=Ze,"@index"in He&&(Ke[ge(G,"@index")]=He["@index"]);else if(je in ne)throw new Pe('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===we||"@index"===we)je in ne?Ft=ne[je]:ne[je]=Ft={},"@language"===we&&dt(Ke)&&(Ke=Ke["@value"]),j.addValue(Ft,He[we],Ke);else we=!ae.compactArrays||"@set"===we||"@list"===we||oe(Ke)&&0===Ke.length||"@list"===Me||"@graph"===Me,j.addValue(ne,je,Ke,{propertyIsArray:we})}}return ne}return X},ie.prototype.expand=function(G,J,X,ae,ne){if(null==X)return null;if(!oe(X)&&!Fe(X))return ne||null!==J&&"@graph"!==Se(G,J,{vocab:!0})?function q(G,J,X){if(null==X)return null;var ae=Se(G,J,{vocab:!0});if("@id"===ae)return Se(G,X,{base:!0});if("@type"===ae)return Se(G,X,{vocab:!0,base:!0});var ne=j.getContextValue(G,J,"@type");return"@id"===ne||"@graph"===ae&&me(X)?{"@id":Se(G,X,{base:!0})}:"@vocab"===ne?{"@id":Se(G,X,{vocab:!0,base:!0})}:$e(ae)?X:(ae={},null!==ne?ae["@type"]=ne:me(X)&&null!==(G=j.getContextValue(G,J,"@language"))&&(ae["@language"]=G),-1===["boolean","number","string"].indexOf(typeof X)&&(X=X.toString()),ae["@value"]=X,ae)}(G,J,X):null;if(oe(X)){var te=[],ue=j.getContextValue(G,J,"@container");ne=ne||"@list"===ue;for(var we=0;we<X.length;++we){var Le=this.expand(G,J,X[we],ae);if(ne&&(oe(Le)||xt(Le)))throw new Pe("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==Le&&(oe(Le)?te=te.concat(Le):te.push(Le))}return te}"@context"in X&&(G=this.processContext(G,X["@context"],ae));we=Se(G,J,{vocab:!0}),te={},Le=Object.keys(X).sort();for(var Ie=0;Ie<Le.length;++Ie){var Me=Le[Ie],Ne=X[Me];if("@context"!==Me){var je=Se(G,Me,{vocab:!0});if(null!==je&&(Wt(je)||$e(je))){if($e(je)){if("@reverse"===we)throw new Pe("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Ne});if(je in te)throw new Pe("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:je})}if("@id"===je&&!me(Ne)){if(!ae.isFrame)throw new Pe('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Ne});if(!Fe(Ne))throw new Pe('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:Ne})}if("@type"===je){var Re=void 0;if((Re=me(ue=Ne))||(Re=Fe(ue)&&0===Object.keys(ue).length),!Re){if(Re=!1,oe(ue)){Re=!0;for(var He=0;He<ue.length;++He)if(!me(ue[He])){Re=!1;break}}if(!Re)throw new Pe('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:ue})}}if("@graph"===je&&!Fe(Ne)&&!oe(Ne))throw new Pe('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Ne});if("@value"===je&&(Fe(Ne)||oe(Ne)))throw new Pe('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Ne});if("@language"===je){if(null===Ne)continue;if(!me(Ne))throw new Pe('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Ne});Ne=Ne.toLowerCase()}if("@index"===je&&!me(Ne))throw new Pe('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Ne});if("@reverse"===je){if(!Fe(Ne))throw new Pe('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Ne});if("@reverse"in(Ne=this.expand(G,"@reverse",Ne,ae)))for(var Ze in Ne["@reverse"])j.addValue(te,Ze,Ne["@reverse"][Ze],{propertyIsArray:!0});for(Ze in Me=te["@reverse"]||null,Ne)if("@reverse"!==Ze)for(null===Me&&(Me=te["@reverse"]={}),j.addValue(Me,Ze,[],{propertyIsArray:!0}),je=Ne[Ze],ue=0;ue<je.length;++ue){if(dt(Re=je[ue])||xt(Re))throw new Pe('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ne});j.addValue(Me,Ze,Re,{propertyIsArray:!0})}}else{if("@language"===(ue=j.getContextValue(G,Me,"@container"))&&Fe(Ne)){Re=[],He=Object.keys(Ne).sort();for(var Ke=0;Ke<He.length;++Ke){var Ft=He[Ke],mt=Ne[Ft];oe(mt)||(mt=[mt]);for(var wt=0;wt<mt.length;++wt){var Nt=mt[wt];if(null!==Nt){if(!me(Nt))throw new Pe("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:Ne});Re.push({"@value":Nt,"@language":Ft.toLowerCase()})}}}Ne=Re}else if("@index"===ue&&Fe(Ne)){for(Re=Me,He=[],Ke=Object.keys(Ne).sort(),Ft=0;Ft<Ke.length;++Ft)for(oe(wt=Ne[mt=Ke[Ft]])||(wt=[wt]),wt=this.expand(G,Re,wt,ae,!1),Nt=0;Nt<wt.length;++Nt){var Bt=wt[Nt];"@index"in Bt||(Bt["@index"]=mt),He.push(Bt)}Ne=He}else if((Re="@list"===je)||"@set"===je){if(He=J,Re&&"@graph"===we&&(He=null),Ne=this.expand(G,He,Ne,ae,Re),Re&&xt(Ne))throw new Pe("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else Ne=this.expand(G,Me,Ne,ae,!1);if(null!==Ne||"@value"===je)if("@list"===je||xt(Ne)||"@list"!==ue||(Ne={"@list":Ne=oe(Ne)?Ne:[Ne]}),G.mappings[Me]&&G.mappings[Me].reverse)for(Me=te["@reverse"]=te["@reverse"]||{},oe(Ne)||(Ne=[Ne]),ue=0;ue<Ne.length;++ue){if(dt(Re=Ne[ue])||xt(Re))throw new Pe('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Ne});j.addValue(Me,je,Re,{propertyIsArray:!0})}else Me=-1===["@index","@id","@type","@value","@language"].indexOf(je),j.addValue(te,je,Ne,{propertyIsArray:Me})}}}}if(G=(Le=Object.keys(te)).length,"@value"in te){if("@type"in te&&"@language"in te)throw new Pe('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:te});if(X=G-1,"@type"in te&&--X,"@index"in te&&--X,"@language"in te&&--X,0!==X)throw new Pe('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:te});if(null===te["@value"])te=null;else{if("@language"in te&&!me(te["@value"]))throw new Pe("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:te});if("@type"in te&&(!Wt(te["@type"])||0===te["@type"].indexOf("_:")))throw new Pe('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:te})}}else if("@type"in te&&!oe(te["@type"]))te["@type"]=[te["@type"]];else if("@set"in te||"@list"in te){if(1<G&&(2!==G||!("@index"in te)))throw new Pe('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:te});"@set"in te&&(te=te["@set"],G=(Le=Object.keys(te)).length)}else 1===G&&"@language"in te&&(te=null);return!Fe(te)||ae.keepFreeFloatingNodes||ne||null!==J&&"@graph"!==we||!(0===G||"@value"in te||"@list"in te||1===G&&"@id"in te)||(te=null),te},ie.prototype.createNodeMap=function(G,J){var ae={"@default":{}};return H(G,ae,"@default",(J=J||{}).namer||J.issuer||new yt("_:b")),ce(ae)},ie.prototype.flatten=function(G){G=this.createNodeMap(G);for(var J=[],X=Object.keys(G).sort(),ae=0;ae<X.length;++ae){var ne=G[X[ae]];st(ne)||J.push(ne)}return J},ie.prototype.frame=function(G,J,X){X={options:X,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}};var ae=new yt("_:b");return H(G,X.graphs,"@merged",ae),X.subjects=X.graphs["@merged"],G=[],le(X,Object.keys(X.subjects).sort(),J,G,null),G},ie.prototype.normalize=function(G,J,X){return"URDNA2015"===J.algorithm?new be(J).main(G,X):"URGNA2012"===J.algorithm?new Te(J).main(G,X):void X(Error("Invalid RDF Dataset Normalization algorithm: "+J.algorithm))},ie.prototype.fromRDF=function(G,J,X){var ue,ae={},ne={"@default":ae},te={};for(ue in G){var we=G[ue];ue in ne||(ne[ue]={}),"@default"===ue||ue in ae||(ae[ue]={"@id":ue});for(var Le=ne[ue],Ie=0;Ie<we.length;++Ie){var je=(Ne=we[Ie]).subject.value,Me=Ne.predicate.value,Ne=Ne.object;je in Le||(Le[je]={"@id":je});je=Le[je];var Re="IRI"===Ne.type||"blank node"===Ne.type;if(!Re||Ne.value in Le||(Le[Ne.value]={"@id":Ne.value}),"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===Me&&!J.useRdfType&&Re)j.addValue(je,"@type",Ne.value,{propertyIsArray:!0});else{var He,Ze=Ne,Ke=J.useNativeTypes;"IRI"===Ze.type||"blank node"===Ze.type?He={"@id":Ze.value}:(He={"@value":Ze.value},Ze.language?He["@language"]=Ze.language:((Ze=Ze.datatype)||(Ze=tr),Ke?("http://www.w3.org/2001/XMLSchema#boolean"===Ze?"true"===He["@value"]?He["@value"]=!0:"false"===He["@value"]&&(He["@value"]=!1):(Ke=He["@value"],!isNaN(parseFloat(Ke))&&isFinite(Ke)&&("http://www.w3.org/2001/XMLSchema#integer"===Ze?(Ke=parseInt(He["@value"],10)).toFixed(0)===He["@value"]&&(He["@value"]=Ke):"http://www.w3.org/2001/XMLSchema#double"===Ze&&(He["@value"]=parseFloat(He["@value"])))),-1===["http://www.w3.org/2001/XMLSchema#boolean","http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#double",tr].indexOf(Ze)&&(He["@type"]=Ze)):Ze!==tr&&(He["@type"]=Ze))),j.addValue(je,Me,He,{propertyIsArray:!0}),Re&&("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===Ne.value?("usages"in(Ne=Le[Ne.value])||(Ne.usages=[]),Ne.usages.push({node:je,property:Me,value:He})):te[Ne.value]=!(Ne.value in te)&&{node:je,property:Me,value:He})}}}for(ue in ne)if("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"in(J=ne[ue])){for(we=J["http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"],G=0;G<we.usages.length;++G){for(je=(Ne=we.usages[G]).node,Ie=Ne.property,Ne=Ne.value,Me=[],Le=[],Re=Object.keys(je).length;"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"===Ie&&Fe(te[je["@id"]])&&oe(je["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"])&&1===je["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"].length&&oe(je["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"])&&1===je["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"].length&&(3===Re||4===Re&&oe(je["@type"])&&1===je["@type"].length&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#List"===je["@type"][0])&&(Me.push(je["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"][0]),Le.push(je["@id"]),je=(Ne=te[je["@id"]]).node,Ie=Ne.property,Ne=Ne.value,Re=Object.keys(je).length,0===je["@id"].indexOf("_:")););if("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"===Ie){if("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===je["@id"])continue;Ne=J[Ne["@id"]]["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"][0],Me.pop(),Le.pop()}for(delete Ne["@id"],Ne["@list"]=Me.reverse(),je=0;je<Le.length;++je)delete J[Le[je]]}delete we.usages}for(te=[],ue=Object.keys(ae).sort(),G=0;G<ue.length;++G){if(je=ae[J=ue[G]],J in ne)for(we=je["@graph"]=[],J=ne[J],Le=Object.keys(J).sort(),Ie=0;Ie<Le.length;++Ie)st(Me=J[Le[Ie]])||we.push(Me);st(je)||te.push(je)}X(null,te)},ie.prototype.toRDF=function(G,J){var X=new yt("_:b"),ae={"@default":{}};H(G,ae,"@default",X);for(var ne={},te=Object.keys(ae).sort(),ue=0;ue<te.length;++ue){if("@default"===(we=te[ue])||Wt(we)){for(var Le=we,we=ae[we],Ie=X,Me=J,Ne=[],je=Object.keys(we).sort(),Re=0;Re<je.length;++Re)for(var He=je[Re],Ze=we[He],Ke=Object.keys(Ze).sort(),Ft=0;Ft<Ke.length;++Ft){var mt=Ke[Ft],wt=Ze[mt];if("@type"===mt)mt="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";else if($e(mt))continue;for(var Nt=0;Nt<wt.length;++Nt){var Bt=wt[Nt],Rt={};if(Rt.type=0===He.indexOf("_:")?"blank node":"IRI",Rt.value=He,Wt(He)){var Zt={};if(Zt.type=0===mt.indexOf("_:")?"blank node":"IRI",Zt.value=mt,Wt(mt)&&("blank node"!==Zt.type||Me.produceGeneralizedRdf))if(xt(Bt)){Bt=Bt["@list"];for(var br=Ie,jr=Ne,wr={type:"IRI",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},Br={type:"IRI",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},K=0;K<Bt.length;++K){var xr=Bt[K],en={type:"blank node",value:br.getId()};jr.push({subject:Rt,predicate:Zt,object:en}),Rt=en,Zt=wr,(xr=Z(xr))&&jr.push({subject:Rt,predicate:Zt,object:xr}),Zt=Br}jr.push({subject:Rt,predicate:Zt,object:{type:"IRI",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}})}else(Bt=Z(Bt))&&Ne.push({subject:Rt,predicate:Zt,object:Bt})}}}ne[Le]=Ne}}return ne},ie.prototype.processContext=function(G,J,X){if(Fe(J)&&"@context"in J&&oe(J["@context"])&&(J=J["@context"]),0===(J=oe(J)?J:[J]).length)return G.clone();for(var ae=G,ne=0;ne<J.length;++ne){var te=J[ne];if(null===te)ae=G=We(X);else{if(Fe(te)&&"@context"in te&&(te=te["@context"]),!Fe(te))throw new Pe("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:te});if(j.cache.activeCtx&&(G=j.cache.activeCtx.get(G,te))){ae=G;continue}G=ae;ae=ae.clone();var ue={};if("@base"in te){var we=te["@base"];if(null===we)we=null;else{if(!me(we))throw new Pe('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:te});if(""!==we&&!Wt(we))throw new Pe('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:te})}null!==we&&(we=j.url.parse(we||"")),ae["@base"]=we,ue["@base"]=!0}if("@vocab"in te){if(null===(we=te["@vocab"]))delete ae["@vocab"];else{if(!me(we))throw new Pe('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:te});if(!Wt(we))throw new Pe('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:te});ae["@vocab"]=we}ue["@vocab"]=!0}if("@language"in te){if(null===(we=te["@language"]))delete ae["@language"];else{if(!me(we))throw new Pe('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:te});ae["@language"]=we.toLowerCase()}ue["@language"]=!0}for(var Le in te)_e(ae,te,Le,ue);j.cache.activeCtx&&j.cache.activeCtx.set(G,te,ae)}}return ae};var G,J,be=(G={subject:"s",object:"o",name:"g"},(J=function(X){X=X||{},this.name="URDNA2015",this.options=X,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new yt("_:c14n"),this.quads=[],this.schedule={},this.schedule.MAX_DEPTH="maxCallStackDepth"in X?X.maxCallStackDepth:500,this.schedule.MAX_TOTAL_DEPTH="maxTotalCallStackDepth"in X?X.maxCallStackDepth:4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice="timeSlice"in X?X.timeSlice:10}).prototype.doWork=function(X,ae){var ne=this.schedule;if(ne.totalDepth>=ne.MAX_TOTAL_DEPTH)return ae(Error("Maximum total call stack depth exceeded; normalization aborting."));!function te(){if(ne.depth===ne.MAX_DEPTH)return ne.depth=0,ne.running=!1,j.nextTick(te);var ue=(new Date).getTime();if(ne.running||(ne.start=(new Date).getTime(),ne.deadline=ne.start+ne.timeSlice),ue<ne.deadline)return ne.running=!0,ne.depth++,ne.totalDepth++,X(function(we,Le){ne.depth--,ne.totalDepth--,ae(we,Le)});ne.depth=0,ne.running=!1,j.setImmediate(te)}()},J.prototype.forEach=function(X,ae,ne){var ue,Le,te=this,we=0;if(oe(X))Le=X.length,ue=function(){return we!==Le&&(ue.value=X[we++],ue.key=we,!0)};else{var Ie=Object.keys(X);Le=Ie.length,ue=function(){return we!==Le&&(ue.key=Ie[we++],ue.value=X[ue.key],!0)}}!function Me(Ne,je){return Ne?ne(Ne):ue()?te.doWork(function(){ae(ue.value,ue.key,Me)}):void ne()}()},J.prototype.waterfall=function(X,ae){var ne=this;ne.forEach(X,function(te,ue,we){ne.doWork(te,we)},ae)},J.prototype.whilst=function(X,ae,ne){var te=this;!function ue(we){return we?ne(we):X()?void te.doWork(ae,ue):ne()}()},J.prototype.main=function(X,ae){var te,ne=this;if(ne.schedule.start=(new Date).getTime(),ne.options.format&&"application/nquads"!==ne.options.format)return ae(new Pe("Unknown output format.","jsonld.UnknownFormat",{format:ne.options.format}));var ue={};ne.waterfall([function(we){ne.forEach(X,function(Le,Ie,Me){"@default"===Ie&&(Ie=null),ne.forEach(Le,function(Ne,je,Re){null!==Ie&&(0===Ie.indexOf("_:")?Ne.name={type:"blank node",value:Ie}:Ne.name={type:"IRI",value:Ie}),ne.quads.push(Ne),ne.forEachComponent(Ne,function(He){"blank node"===He.type&&((He=He.value)in ne.blankNodeInfo?ne.blankNodeInfo[He].quads.push(Ne):(ue[He]=!0,ne.blankNodeInfo[He]={quads:[Ne]}))}),Re()},Me)},we)},function(we){var Le=!0;ne.whilst(function(){return Le},function(Ie){Le=!1,ne.hashToBlankNodes={},ne.waterfall([function(Me){ne.forEach(ue,function(Ne,je,Re){ne.hashFirstDegreeQuads(je,function(He,Ze){if(He)return Re(He);Ze in ne.hashToBlankNodes?ne.hashToBlankNodes[Ze].push(je):ne.hashToBlankNodes[Ze]=[je],Re()})},Me)},function(Me){var Ne=Object.keys(ne.hashToBlankNodes).sort();ne.forEach(Ne,function(je,Re,He){if(1<(Re=ne.hashToBlankNodes[je]).length)return He();Re=Re[0],ne.canonicalIssuer.getId(Re),delete ue[Re],delete ne.hashToBlankNodes[je],Le=!0,He()},Me)}],Ie)},we)},function(we){var Le=Object.keys(ne.hashToBlankNodes).sort();ne.forEach(Le,function(Ie,Me,Ne){var je=[],Re=ne.hashToBlankNodes[Ie];ne.waterfall([function(He){ne.forEach(Re,function(Ze,Ke,Ft){if(ne.canonicalIssuer.hasId(Ze))return Ft();(Ke=new yt("_:b")).getId(Ze),ne.hashNDegreeQuads(Ze,Ke,function(mt,wt){if(mt)return Ft(mt);je.push(wt),Ft()})},He)},function(He){je.sort(function(Ze,Ke){return Ze.hash<Ke.hash?-1:Ze.hash>Ke.hash?1:0}),ne.forEach(je,function(Ze,Ke,Ft){for(var mt in Ze.issuer.existing)ne.canonicalIssuer.getId(mt);Ft()},He)}],Ne)},we)},function(we){var Le=[];ne.waterfall([function(Ie){ne.forEach(ne.quads,function(Me,Ne,je){ne.forEachComponent(Me,function(Re){"blank node"===Re.type&&0!==Re.value.indexOf(ne.canonicalIssuer.prefix)&&(Re.value=ne.canonicalIssuer.getId(Re.value))}),Le.push(At(Me)),je()},Ie)},function(Ie){if(Le.sort(),"application/nquads"===ne.options.format)return te=Le.join(""),Ie();te=ct(Le.join("")),Ie()}],we)}],function(we){ae(we,te)})},J.prototype.hashFirstDegreeQuads=function(X,ae){var ne=this,te=ne.blankNodeInfo[X];if("hash"in te)return ae(null,te.hash);var ue=[];ne.forEach(te.quads,function(we,Le,Ie){var Me={predicate:we.predicate};ne.forEachComponent(we,function(Ne,je){Me[je]=ne.modifyFirstDegreeComponent(X,Ne,je)}),ue.push(At(Me)),Ie()},function(we){if(we)return ae(we);ue.sort(),te.hash=Qe.hashNQuads(ne.name,ue),ae(null,te.hash)})},J.prototype.modifyFirstDegreeComponent=function(X,ae){return"blank node"!==ae.type||((ae=tt(ae)).value=ae.value===X?"_:a":"_:z"),ae},J.prototype.hashRelatedBlankNode=function(X,ae,ne,te,ue){var Le,we=this;we.waterfall([function(Ie){return we.canonicalIssuer.hasId(X)?(Le=we.canonicalIssuer.getId(X),Ie()):ne.hasId(X)?(Le=ne.getId(X),Ie()):void we.hashFirstDegreeQuads(X,function(Me,Ne){if(Me)return Ie(Me);Le=Ne,Ie()})}],function(Ie){return Ie?ue(Ie):((Ie=new Qe(we.name)).update(te),"g"!==te&&Ie.update(we.getRelatedPredicate(ae)),Ie.update(Le),ue(null,Ie.digest()))})},J.prototype.getRelatedPredicate=function(X){return"<"+X.predicate.value+">"},J.prototype.hashNDegreeQuads=function(X,ae,ne){var ue,te=this,we=new Qe(te.name);te.waterfall([function(Le){te.createHashToRelated(X,ae,function(Ie,Me){if(Ie)return Le(Ie);ue=Me,Le()})},function(Le){var Ie=Object.keys(ue).sort();te.forEach(Ie,function(Me,Ne,je){we.update(Me);var He,Re="",Ze=new De(ue[Me]);te.whilst(function(){return Ze.hasNext()},function(Ke){var Ft=Ze.next(),mt=ae.clone(),wt="",Nt=[];te.waterfall([function(Bt){te.forEach(Ft,function(Rt,Zt,br){if(te.canonicalIssuer.hasId(Rt)?wt+=te.canonicalIssuer.getId(Rt):(mt.hasId(Rt)||Nt.push(Rt),wt+=mt.getId(Rt)),0!==Re.length&&wt.length>=Re.length&&wt>Re)return Ke();br()},Bt)},function(Bt){te.forEach(Nt,function(Rt,Zt,br){te.hashNDegreeQuads(Rt,mt,function(jr,wr){return jr?br(jr):(wt+=mt.getId(Rt),wt+="<"+wr.hash+">",mt=wr.issuer,0!==Re.length&&wt.length>=Re.length&&wt>Re?Ke():void br())})},Bt)},function(Bt){(0===Re.length||wt<Re)&&(Re=wt,He=mt),Bt()}],Ke)},function(Ke){if(Ke)return je(Ke);we.update(Re),ae=He,je()})},Le)}],function(Le){ne(Le,{hash:we.digest(),issuer:ae})})},J.prototype.createHashToRelated=function(X,ae,ne){var te=this,ue={};te.forEach(te.blankNodeInfo[X].quads,function(we,Le,Ie){te.forEach(we,function(Me,Ne,je){if("predicate"===Ne||"blank node"!==Me.type||Me.value===X)return je();var Re=Me.value;te.hashRelatedBlankNode(Re,we,ae,G[Ne],function(He,Ze){if(He)return je(He);Ze in ue?ue[Ze].push(Re):ue[Ze]=[Re],je()})},Ie)},function(we){ne(we,ue)})},J.prototype.forEachComponent=function(X,ae){for(var ne in X)"predicate"!==ne&&ae(X[ne],ne,X)},J),Te=function(){var G=function(J){be.call(this,J),this.name="URGNA2012"};return G.prototype=new be,G.prototype.modifyFirstDegreeComponent=function(J,X,ae){return"blank node"!==X.type||((X=tt(X)).value="name"===ae?"_:g":X.value===J?"_:a":"_:z"),X},G.prototype.getRelatedPredicate=function(J){return J.predicate.value},G.prototype.createHashToRelated=function(J,X,ae){var ne=this,te={};ne.forEach(ne.blankNodeInfo[J].quads,function(ue,we,Le){var Ie;if("blank node"===ue.subject.type&&ue.subject.value!==J)Ie=ue.subject.value,we="p";else{if("blank node"!==ue.object.type||ue.object.value===J)return Le();Ie=ue.object.value,we="r"}ne.hashRelatedBlankNode(Ie,ue,X,we,function(Me,Ne){Ne in te?te[Ne].push(Ie):te[Ne]=[Ie],Le()})},function(ue){ae(ue,te)})},G}();Object.keys||(Object.keys=function(G){if(G!==Object(G))throw new TypeError("Object.keys called on non-object");var X,J=[];for(X in G)Object.prototype.hasOwnProperty.call(G,X)&&J.push(X);return J}),j.registerRDFParser("application/nquads",ct),j.registerRDFParser("rdfa-api",function(G){for(var J={"@default":[]},X=G.getSubjects(),ae=0;ae<X.length;++ae){var ne=X[ae];if(null!==ne)if(null!==(te=G.getSubjectTriples(ne))){var ue,te=te.predicates;for(ue in te)for(var we=te[ue].objects,Le=0;Le<we.length;++Le){var Ie=we[Le],Me={};0===ne.indexOf("_:")?Me.subject={type:"blank node",value:ne}:Me.subject={type:"IRI",value:ne},0===ue.indexOf("_:")?Me.predicate={type:"blank node",value:ue}:Me.predicate={type:"IRI",value:ue};var Ne=Ie.value;if("http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"===Ie.type){Rr||(Rr=Ce("xmldom").XMLSerializer);for(var je=new Rr,Re=(Ne="",0);Re<Ie.value.length;Re++)Ie.value[Re].nodeType===cr.ELEMENT_NODE?Ne+=je.serializeToString(Ie.value[Re]):Ie.value[Re].nodeType===cr.TEXT_NODE&&(Ne+=Ie.value[Re].nodeValue)}Me.object={},"http://www.w3.org/1999/02/22-rdf-syntax-ns#object"===Ie.type?0===Ie.value.indexOf("_:")?Me.object.type="blank node":Me.object.type="IRI":(Me.object.type="literal","http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral"===Ie.type?Ie.language?(Me.object.datatype=mr,Me.object.language=Ie.language):Me.object.datatype=tr:Me.object.datatype=Ie.type),Me.object.value=Ne,J["@default"].push(Me)}}}return J}),j.IdentifierIssuer=yt,j.UniqueNamer=yt,yt.prototype.clone=function(){var G=new yt(this.prefix);return G.counter=this.counter,G.existing=tt(this.existing),G},yt.prototype.getId=function(G){if(G&&G in this.existing)return this.existing[G];var J=this.prefix+this.counter;return this.counter+=1,G&&(this.existing[G]=J),J},yt.prototype.getName=yt.prototype.getName,yt.prototype.hasId=function(G){return G in this.existing},yt.prototype.isNamed=yt.prototype.hasId;var De=function(G){this.list=G.sort(),this.done=!1,this.left={};for(var J=0;J<G.length;++J)this.left[G[J]]=!0};De.prototype.hasNext=function(){return!this.done},De.prototype.next=function(){for(var G=this.list.slice(),J=null,X=0,ae=this.list.length,ne=0;ne<ae;++ne){var te=this.list[ne],ue=this.left[te];(null===J||te>J)&&(ue&&0<ne&&te>this.list[ne-1]||!ue&&ne<ae-1&&te>this.list[ne+1])&&(J=te,X=ne)}if(null===J)this.done=!0;else for(ne=this.left[J]?X-1:X+1,this.list[X]=this.list[ne],this.list[ne]=J,ne=0;ne<ae;++ne)this.list[ne]>J&&(this.left[this.list[ne]]=!this.left[this.list[ne]]);return G};var Qe=function(G){if(!(this instanceof Qe))return new Qe(G);if(-1===["URDNA2015","URGNA2012"].indexOf(G))throw Error("Invalid RDF Dataset Normalization algorithm: "+G);Qe._init.call(this,G)};return Qe.hashNQuads=function(G,J){for(var X=new Qe(G),ae=0;ae<J.length;++ae)X.update(J[ae]);return X.digest()},function(G){if(G){var J=Ce("crypto");Qe._init=function(te){this.md=J.createHash("URDNA2015"===te?"sha256":"sha1")},Qe.prototype.update=function(te){return this.md.update(te,"utf8")},Qe.prototype.digest=function(){return this.md.digest("hex")}}else{Qe._init=function(te){te="URDNA2015"===te?new ne.Algorithm:new ae.Algorithm,this.md=new X(te)},Qe.prototype.update=function(te){return this.md.update(te)},Qe.prototype.digest=function(){return this.md.digest().toHex()};var X=function(te){if(!(this instanceof X))return new X(te);if(this._algorithm=te,!X._padding||X._padding.length<this._algorithm.blockSize){X._padding=String.fromCharCode(128),te=String.fromCharCode(0);for(var ue=64;0<ue;)1&ue&&(X._padding+=te),0<(ue>>>=1)&&(te+=te)}this.start()};X.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var te=this._algorithm.messageLengthSize/4,ue=0;ue<te;++ue)this.fullMessageLength.push(0);return this._input=new X.ByteBuffer,this.state=this._algorithm.start(),this},X.prototype.update=function(te){te=new X.ByteBuffer(unescape(encodeURIComponent(te))),this.messageLength+=te.length();for(var ue=[(ue=te.length())/4294967296>>>0,ue>>>0],we=this.fullMessageLength.length-1;0<=we;--we)this.fullMessageLength[we]+=ue[1],ue[1]=ue[0]+(this.fullMessageLength[we]/4294967296>>>0),this.fullMessageLength[we]>>>=0,ue[0]=ue[1]/4294967296>>>0;for(this._input.putBytes(te.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(2048<this._input.read||0===this._input.length())&&this._input.compact(),this},X.prototype.digest=function(){var te=new X.ByteBuffer;te.putBytes(this._input.bytes()),te.putBytes(X._padding.substr(0,this._algorithm.blockSize-(this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize&this._algorithm.blockSize-1)));for(var ue=new X.ByteBuffer,we=0;we<this.fullMessageLength.length;++we)ue.putInt32(this.fullMessageLength[we]<<3|this.fullMessageLength[we+1]>>>28);return this._algorithm.writeMessageLength(te,ue),te=this._algorithm.digest(this.state.copy(),te),ue=new X.ByteBuffer,te.write(ue),ue},X.ByteBuffer=function(te){this.data="string"==typeof te?te:"",this.read=0},X.ByteBuffer.prototype.putInt32=function(te){this.data+=String.fromCharCode(te>>24&255)+String.fromCharCode(te>>16&255)+String.fromCharCode(te>>8&255)+String.fromCharCode(255&te)},X.ByteBuffer.prototype.getInt32=function(){var te=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,te},X.ByteBuffer.prototype.putBytes=function(te){this.data+=te},X.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},X.ByteBuffer.prototype.length=function(){return this.data.length-this.read},X.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},X.ByteBuffer.prototype.toHex=function(){for(var te="",ue=this.read;ue<this.data.length;++ue){var we=this.data.charCodeAt(ue);16>we&&(te+="0"),te+=we.toString(16)}return te};var ae={_w:null,Algorithm:function(){this.name="sha1",this.blockSize=64,this.digestLength=20,this.messageLengthSize=8}};ae.Algorithm.prototype.start=function(){return ae._w||(ae._w=Array(80)),ae._createState()},ae.Algorithm.prototype.writeMessageLength=function(te,ue){te.putBytes(ue.bytes())},ae.Algorithm.prototype.digest=function(te,ue){for(var we,Le,Ie,Me,Ne,je,He,Ze=ue.length(),Ke=ae._w;64<=Ze;){for(Le=te.h0,Ie=te.h1,Me=te.h2,Ne=te.h3,je=te.h4,He=0;16>He;++He)we=ue.getInt32(),Ke[He]=we,we=(Le<<5|Le>>>27)+(Ne^Ie&(Me^Ne))+je+1518500249+we,je=Ne,Ne=Me,Me=Ie<<30|Ie>>>2,Ie=Le,Le=we;for(;20>He;++He)we=(we=Ke[He-3]^Ke[He-8]^Ke[He-14]^Ke[He-16])<<1|we>>>31,Ke[He]=we,we=(Le<<5|Le>>>27)+(Ne^Ie&(Me^Ne))+je+1518500249+we,je=Ne,Ne=Me,Me=Ie<<30|Ie>>>2,Ie=Le,Le=we;for(;32>He;++He)we=(we=Ke[He-3]^Ke[He-8]^Ke[He-14]^Ke[He-16])<<1|we>>>31,Ke[He]=we,we=(Le<<5|Le>>>27)+(Ie^Me^Ne)+je+1859775393+we,je=Ne,Ne=Me,Me=Ie<<30|Ie>>>2,Ie=Le,Le=we;for(;40>He;++He)we=(we=Ke[He-6]^Ke[He-16]^Ke[He-28]^Ke[He-32])<<2|we>>>30,Ke[He]=we,we=(Le<<5|Le>>>27)+(Ie^Me^Ne)+je+1859775393+we,je=Ne,Ne=Me,Me=Ie<<30|Ie>>>2,Ie=Le,Le=we;for(;60>He;++He)we=(we=Ke[He-6]^Ke[He-16]^Ke[He-28]^Ke[He-32])<<2|we>>>30,Ke[He]=we,we=(Le<<5|Le>>>27)+(Ie&Me|Ne&(Ie^Me))+je+2400959708+we,je=Ne,Ne=Me,Me=Ie<<30|Ie>>>2,Ie=Le,Le=we;for(;80>He;++He)we=(we=Ke[He-6]^Ke[He-16]^Ke[He-28]^Ke[He-32])<<2|we>>>30,Ke[He]=we,we=(Le<<5|Le>>>27)+(Ie^Me^Ne)+je+3395469782+we,je=Ne,Ne=Me,Me=Ie<<30|Ie>>>2,Ie=Le,Le=we;te.h0=te.h0+Le|0,te.h1=te.h1+Ie|0,te.h2=te.h2+Me|0,te.h3=te.h3+Ne|0,te.h4=te.h4+je|0,Ze-=64}return te},ae._createState=function(){var te={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520,copy:function(){var ue=ae._createState();return ue.h0=te.h0,ue.h1=te.h1,ue.h2=te.h2,ue.h3=te.h3,ue.h4=te.h4,ue},write:function(ue){ue.putInt32(te.h0),ue.putInt32(te.h1),ue.putInt32(te.h2),ue.putInt32(te.h3),ue.putInt32(te.h4)}};return te};var ne={_k:null,_w:null,Algorithm:function(){this.name="sha256",this.blockSize=64,this.digestLength=32,this.messageLengthSize=8}};ne.Algorithm.prototype.start=function(){return ne._k||ne._init(),ne._createState()},ne.Algorithm.prototype.writeMessageLength=function(te,ue){te.putBytes(ue.bytes())},ne.Algorithm.prototype.digest=function(te,ue){for(var we,Le,Me,Ne,je,Re,He,Ze,Ke,Ft,mt,wt,Nt=ue.length(),Bt=ne._k,Rt=ne._w;64<=Nt;){for(Ne=0;16>Ne;++Ne)Rt[Ne]=ue.getInt32();for(;64>Ne;++Ne)we=((we=Rt[Ne-2])>>>17|we<<15)^(we>>>19|we<<13)^we>>>10,Le=((Le=Rt[Ne-15])>>>7|Le<<25)^(Le>>>18|Le<<14)^Le>>>3,Rt[Ne]=we+Rt[Ne-7]+Le+Rt[Ne-16]|0;for(je=te.h0,Re=te.h1,He=te.h2,Ze=te.h3,Ke=te.h4,Ft=te.h5,mt=te.h6,wt=te.h7,Ne=0;64>Ne;++Ne)Le=(je>>>2|je<<30)^(je>>>13|je<<19)^(je>>>22|je<<10),Me=je&Re|He&(je^Re),we=wt+(we=(Ke>>>6|Ke<<26)^(Ke>>>11|Ke<<21)^(Ke>>>25|Ke<<7))+(mt^Ke&(Ft^mt))+Bt[Ne]+Rt[Ne],wt=mt,mt=Ft,Ft=Ke,Ke=Ze+we|0,Ze=He,He=Re,Re=je,je=we+(Le+=Me)|0;te.h0=te.h0+je|0,te.h1=te.h1+Re|0,te.h2=te.h2+He|0,te.h3=te.h3+Ze|0,te.h4=te.h4+Ke|0,te.h5=te.h5+Ft|0,te.h6=te.h6+mt|0,te.h7=te.h7+wt|0,Nt-=64}return te},ne._createState=function(){var te={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225,copy:function(){var ue=ne._createState();return ue.h0=te.h0,ue.h1=te.h1,ue.h2=te.h2,ue.h3=te.h3,ue.h4=te.h4,ue.h5=te.h5,ue.h6=te.h6,ue.h7=te.h7,ue},write:function(ue){ue.putInt32(te.h0),ue.putInt32(te.h1),ue.putInt32(te.h2),ue.putInt32(te.h3),ue.putInt32(te.h4),ue.putInt32(te.h5),ue.putInt32(te.h6),ue.putInt32(te.h7)}};return te},ne._init=function(){ne._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ne._w=Array(64)}}}(E),j.url={},j.url.parsers={simple:{keys:"href scheme authority path query fragment".split(" "),regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:"href protocol scheme authority auth user password hostname port path directory file query fragment".split(" "),regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},j.url.parse=function(G,J){for(var X={},ae=j.url.parsers[J||"full"],ne=ae.regex.exec(G),te=ae.keys.length;te--;)X[ae.keys[te]]=void 0===ne[te]?null:ne[te];return X.normalizedPath=It(X.path,!!X.authority),X},E?j.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&j.useDocumentLoader("xhr"),E&&(j.use=function(G){if("request"!==G)throw new Pe("Unknown extension.","jsonld.UnknownExtension",{extension:G});j.request=Ce("jsonld-request")},Ut={exports:{},filename:T},Ce("pkginfo")(Ut,"version"),j.version=Ut.exports.version),j},O=function(){return I(function(){return O()})};I(O),"function"==typeof Ce&&void 0!==Ee&&Ee.exports&&(Ee.exports=O),F&&("undefined"==typeof jsonld?jsonld=jsonldjs=O:jsonldjs=O)}()}).call(this,Ce("7YKIPe"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},"/../node_modules/jsonld/js")},{"7YKIPe":10,crypto:25,"es6-promise":3,http:25,"jsonld-request":25,pkginfo:25,request:25,util:25,xmldom:25}],27:[function(Ce,Ee,Be){var ye=Ce;Ce=function(){},Be=Ee.exports={Lexer:Ce("./lib/N3Lexer"),Parser:Ce("./lib/N3Parser"),Writer:Ce("./lib/N3Writer"),Store:Ce("./lib/N3Store"),StreamParser:Ce("./lib/N3StreamParser"),StreamWriter:Ce("./lib/N3StreamWriter"),Util:Ce("./lib/N3Util")},Object.keys(Be).forEach(function(M){Object.defineProperty(Be,M,{configurable:!0,enumerable:!0,get:function(){return delete Be[M],Be[M]=ye("./lib/N3"+M)}})})},{"./lib/N3Lexer":28,"./lib/N3Parser":29,"./lib/N3Store":30,"./lib/N3StreamParser":31,"./lib/N3StreamWriter":32,"./lib/N3Util":33,"./lib/N3Writer":34}],28:[function(Ce,Ee,Be){function ye(O){if(!(this instanceof ye))return new ye(O);if(O&&O.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var j=this;this._tokenize=this.tokenize,this.tokenize=function(s,D){this._tokenize(s,function(q,Z){!q&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(Z.type)?D&&D(q,Z):D&&D(q||j._syntaxError(Z.type,D=null))})}}}var M=String.fromCharCode,T="function"==typeof setImmediate?setImmediate:function(O){setTimeout(O,0)},E=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,F={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},I=/[\x00-\x20<>\\"\{\}\|\^\`]/;ye.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(O,j){function s(he){O(he._syntaxError(/^\S*/.exec(D)[0]))}for(var D=this._input;;){for(var q;q=this._newline.exec(D);)D=D.substr(q[0].length,D.length),this._line++;if((q=this._whitespace.exec(D))&&(D=D.substr(q[0].length,D.length)),this._endOfFile.test(D))return j&&O(D=null,{line:this._line,type:"eof",value:"",prefix:""}),this._input=D;q=this._line;var Z="",H="",ce="",le=D[0],ee=null,se=0,de=!1;switch(le){case"^":if(1===D.length)break;if("^"!==D[1])return s(this);if(this._prevTokenType="^","<"!==(D=D.substr(2))[0]){de=!0;break}case"<":if(ee=this._unescapedIri.exec(D))Z="IRI",H=ee[1];else if(ee=this._iri.exec(D)){if(null===(H=this._unescape(ee[1]))||I.test(H))return s(this);Z="IRI"}break;case"_":((ee=this._blank.exec(D))||j&&(ee=this._blank.exec(D+" ")))&&(Z="prefixed",ce="_",H=ee[1]);break;case'"':case"'":if(ee=this._unescapedString.exec(D))Z="literal",H=ee[0];else if(ee=this._singleQuotedString.exec(D)){if(null===(H=this._unescape(ee[0])))return s(this);Z="literal",H=H.replace(/^'|'$/g,'"')}else if(ee=this._tripleQuotedString.exec(D)){if(H=ee[1]||ee[2],this._line+=H.split(/\r\n|\r|\n/).length-1,null===(H=this._unescape(H)))return s(this);Z="literal",H=H.replace(/^'|'$/g,'"')}break;case"@":"literal"===this._prevTokenType&&(ee=this._langcode.exec(D))?(Z="langcode",H=ee[1]):(ee=this._keyword.exec(D))&&(Z=ee[0]);break;case".":if(1===D.length?j:"0">D[1]||"9"<D[1]){Z=".",se=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(ee=this._number.exec(D))&&(Z="literal",H='"'+ee[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(ee[1]?"double":/^[+\-]?\d+$/.test(ee[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(ee=this._sparqlKeyword.exec(D))?Z=ee[0].toUpperCase():de=!0;break;case"f":case"t":(ee=this._boolean.exec(D))?(Z="literal",H='"'+ee[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):de=!0;break;case"a":(ee=this._shortPredicates.exec(D))?(Z="abbreviation",H="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):de=!0;break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":se=1,Z=le;break;default:de=!0}if(de&&("@prefix"!==this._prevTokenType&&"PREFIX"!==this._prevTokenType||!(ee=this._prefix.exec(D))?((ee=this._prefixed.exec(D))||j&&(ee=this._prefixed.exec(D+" ")))&&(Z="prefixed",ce=ee[1]||"",H=this._unescape(ee[2])):(Z="prefix",H=ee[1]||"")),"^"===this._prevTokenType&&(Z="IRI"===Z||"prefixed"===Z?"type":""),!Z)return j||!/^'''|^"""/.test(D)&&/\n|\r/.test(D)?s(this):this._input=D;O(null,{line:q,type:Z,value:H,prefix:ce}),this._prevTokenType=Z,D=D.substr(se||ee[0].length,D.length)}},_unescape:function(O){try{return O.replace(E,function(j,s,D,q){if(s){if(j=parseInt(s,16),isNaN(j))throw Error();return M(j)}if(D){if(j=parseInt(D,16),isNaN(j))throw Error();return 65535>=j?M(j):M(55296+(j-=65536)/1024,56320+(1023&j))}if(!(j=F[q]))throw Error();return j})}catch(j){return null}},_syntaxError:function(O){return this._input=null,Error('Syntax error: unexpected "'+O+'" on line '+this._line+".")},tokenize:function(O,j){function s(Z){null!==q._input&&(q._input+=Z,q._tokenizeToEnd(j,!1))}function D(){null!==q._input&&q._tokenizeToEnd(j,!0)}var q=this;this._line=1,"string"==typeof O?(this._input=O,T(function(){q._tokenizeToEnd(j,!0)})):(this._input="",O&&"function"!=typeof O?("function"==typeof O.setEncoding&&O.setEncoding("utf8"),O.on("data",s),O.on("end",D)):(this.addChunk=s,this.end=D,j||(j=O)))}},Ee.exports=ye},{}],29:[function(Ce,Ee,Be){function ye(s){if(!(this instanceof ye))return new ye(s);this._tripleStack=[],this._graph=null,s=s||{},this._setBase(s.documentIRI);var D="turtle"===(H="string"==typeof s.format&&s.format.match(/\w*$/)[0].toLowerCase()),q="trig"===H,Z=/triple/.test(H),H=/quad/.test(H);H=Z||H;(this._supportsNamedGraphs=!D)||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(D||q||Z),H&&(this._base="",this._resolveIRI=function(ce){return this._error("Disallowed relative IRI",ce),this._callback=M,this._subject=null}),this._blankNodePrefix="string"!=typeof s.blankNodePrefix?"":"_:"+s.blankNodePrefix.replace(/^_:/,""),this._lexer=s.lexer||new T({lineMode:H})}function M(){}var T=Ce("./N3Lexer"),E=/^[a-z][a-z0-9+.-]*:/i,F=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,I=/(?:^|\/)\.\.?(?:$|[\/#?])/,O=0,j=0;ye._resetBlankNodeIds=function(){O=j=0},ye.prototype={_setBase:function(s){if(s){if(0<=s.indexOf("#"))throw Error("Invalid base IRI "+s)}else s=null;(this._base=s)&&(this._basePath=s.replace(/[^\/?]*(?:\?.*)?$/,""),s=s.match(F),this._baseRoot=s[0],this._baseScheme=s[1])},_readInTopContext:function(s){switch(s.type){case"eof":return null!==this._graph?this._error("Unclosed graph",s):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"@prefix":return this._sparqlStyle=!1,this._readPrefix;case"PREFIX":return this._sparqlStyle=!0,this._readPrefix;case"@base":return this._sparqlStyle=!1,this._readBaseIRI;case"BASE":return this._sparqlStyle=!0,this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(s)}},_readSubject:function(s){switch(this._predicate=null,s.type){case"IRI":null===this._base||E.test(s.value)?this._subject=s.value:this._subject=this._resolveIRI(s);break;case"prefixed":var D=this._prefixes[s.prefix];if(void 0===D)return this._error('Undefined prefix "'+s.prefix+':"',s);this._subject=D+s.value;break;case"[":return this._subject="_:b"+j++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;case"}":return this._readPunctuation(s);default:return this._error("Expected subject but got "+s.type,s)}return this._readPredicateOrNamedGraph},_readPredicate:function(s){var D=s.type;switch(D){case"IRI":case"abbreviation":null===this._base||E.test(s.value)?this._predicate=s.value:this._predicate=this._resolveIRI(s);break;case"prefixed":if("_"===s.prefix)return this._error("Disallowed blank node as predicate",s);if(void 0===(D=this._prefixes[s.prefix]))return this._error('Undefined prefix "'+s.prefix+':"',s);this._predicate=D+s.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+D,s):(this._subject=null,"]"===D?this._readBlankNodeTail(s):this._readPunctuation(s));case";":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',s)}return this._readObject},_readObject:function(s){switch(s.type){case"IRI":null===this._base||E.test(s.value)?this._object=s.value:this._object=this._resolveIRI(s);break;case"prefixed":var D=this._prefixes[s.prefix];if(void 0===D)return this._error('Undefined prefix "'+s.prefix+':"',s);this._object=D+s.value;break;case"literal":return this._object=s.value,this._readDataTypeOrLang;case"[":return s="_:b"+j++,this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:s,type:"blank"}),this._subject=s,this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",type:"list"}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',s)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(s){return"{"===s.type?this._readGraph(s):this._readPredicate(s)},_readGraph:function(s){return"{"!==s.type?this._error("Expected graph but got "+s.type,s):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(s){return"]"===s.type?(this._subject=null,this._readBlankNodeTail(s)):(this._predicate=null,this._readPredicate(s))},_readBlankNodeTail:function(s){return"]"!==s.type?this._readBlankNodePunctuation(s):(null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""}),s=this._tripleStack.pop(),this._subject=s.subject,null!==s.object?(this._predicate=s.predicate,this._object=s.object,this._getTripleEndReader()):null!==this._predicate?this._readPredicate:this._readPredicateOrNamedGraph)},_readDataTypeOrLang:function(s){switch(s.type){case"type":if(""===s.prefix)s=null===this._base||E.test(s.value)?s.value:this._resolveIRI(s);else{var D=this._prefixes[s.prefix];if(void 0===D)return this._error('Undefined prefix "'+s.prefix+':"',s);s=D+s.value}return this._object+="^^"+s,this._getTripleEndReader();case"langcode":return this._object+="@"+s.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,s)}},_readListItem:function(s){var D=null,q=null,Z=this._subject,H=this._tripleStack,ce=H[H.length-1],le=this._readListItem;switch(s.type){case"IRI":D=null===this._base||E.test(s.value)?s.value:this._resolveIRI(s);break;case"prefixed":if(void 0===(D=this._prefixes[s.prefix]))return this._error('Undefined prefix "'+s.prefix+':"',s);D+=s.value;break;case"literal":D=s.value,le=this._readDataTypeOrLang;break;case"[":q="_:b"+j++,D="_:b"+j++,H.push({subject:q,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",object:D,type:"blank"}),this._subject=D,le=this._readBlankNodeHead;break;case"(":q="_:b"+j++,H.push({subject:q,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",object:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",type:"list"}),this._subject=null,le=this._readListItem;break;case")":if(H.pop(),0!==H.length&&"list"===H[H.length-1].type&&this._callback(null,{subject:ce.subject,predicate:ce.predicate,object:ce.object,graph:this._graph||""}),this._subject=ce.subject,null===ce.predicate){if(le=this._readPredicate,"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===ce.subject)return le}else if(this._predicate=ce.predicate,this._object=ce.object,le=this._getTripleEndReader(),"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===ce.object)return le;q="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil";break;default:return this._error('Expected list item instead of "'+s.type+'"',s)}return null===q&&(this._subject=q="_:b"+j++),null===Z?"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===ce.object?ce.object=q:ce.subject=q:this._callback(null,{subject:Z,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",object:q,graph:this._graph||""}),null!==D&&this._callback(null,{subject:q,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",object:D,graph:this._graph||""}),le},_readPunctuation:function(s){var D=this._subject,q=this._graph;switch(s.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",s);this._graph=null;case".":this._subject=null,s=this._readInTopContext;break;case";":s=this._readPredicate;break;case",":s=this._readObject;break;case"IRI":if(this._supportsQuads&&null===this._graph){q=null===this._base||E.test(s.value)?s.value:this._resolveIRI(s),D=this._subject,s=this._readQuadPunctuation;break}case"prefixed":if(this._supportsQuads&&null===this._graph){if(void 0===(q=this._prefixes[s.prefix]))return this._error('Undefined prefix "'+s.prefix+':"',s);q+=s.value,s=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',s)}return null!==D&&this._callback(null,{subject:D,predicate:this._predicate,object:this._object,graph:q||""}),s},_readBlankNodePunctuation:function(s){switch(s.type){case";":s=this._readPredicate;break;case",":s=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',s)}return this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""}),s},_readQuadPunctuation:function(s){return"."!==s.type?this._error("Expected dot to follow quad",s):this._readInTopContext},_readPrefix:function(s){return"prefix"!==s.type?this._error("Expected prefix to follow @prefix",s):(this._prefix=s.value,this._readPrefixIRI)},_readPrefixIRI:function(s){return"IRI"!==s.type?this._error('Expected IRI to follow prefix "'+this._prefix+':"',s):(s=null===this._base||E.test(s.value)?s.value:this._resolveIRI(s),this._prefixes[this._prefix]=s,this._prefixCallback(this._prefix,s),this._readDeclarationPunctuation)},_readBaseIRI:function(s){if("IRI"!==s.type)return this._error("Expected IRI to follow base declaration",s);try{this._setBase(null===this._base||E.test(s.value)?s.value:this._resolveIRI(s))}catch(D){this._error(D.message,s)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(s){switch(s.type){case"IRI":case"prefixed":return this._readSubject(s),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",s)}},_readNamedGraphBlankLabel:function(s){return"]"!==s.type?this._error("Invalid graph label",s):(this._subject="_:b"+j++,this._readGraph)},_readDeclarationPunctuation:function(s){return this._sparqlStyle?this._readInTopContext(s):"."!==s.type?this._error("Expected declaration to end with a dot",s):this._readInTopContext},_getTripleEndReader:function(){var s=this._tripleStack;if(0===s.length)return this._readPunctuation;switch(s[s.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem}},_error:function(s,D){this._callback(Error(s+" at line "+D.line+"."))},_resolveIRI:function(s){switch((s=s.value)[0]){case void 0:return this._base;case"#":return this._base+s;case"?":return this._base.replace(/(?:\?.*)?$/,s);case"/":return("/"===s[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(s);default:return this._removeDotSegments(this._basePath+s)}},_removeDotSegments:function(s){if(!I.test(s))return s;for(var D="",q=s.length,Z=-1,H=-1,ce=0,le="/";Z<q;){switch(le){case":":if(0>H&&"/"===s[++Z]&&"/"===s[++Z])for(;(H=Z+1)<q&&"/"!==s[H];)Z=H;break;case"?":case"#":Z=q;break;case"/":if("."===s[Z+1])switch(le=s[1+ ++Z],le){case"/":D+=s.substring(ce,Z-1),ce=Z+1;break;case void 0:case"?":case"#":return D+s.substring(ce,Z)+s.substr(Z+1);case".":if(void 0===(le=s[1+ ++Z])||"/"===le||"?"===le||"#"===le){if((ce=(D+=s.substring(ce,Z-2)).lastIndexOf("/"))>=H&&(D=D.substr(0,ce)),"/"!==le)return D+"/"+s.substr(Z+1);ce=Z+1}}}le=s[++Z]}return D+s.substring(ce)},parse:function(s,D,q){this._readCallback=this._readInTopContext,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+O+++"_","function"==typeof s&&(q=D,D=s,s=null),this._callback=D||M,this._prefixCallback=q||M;var Z=this;this._lexer.tokenize(s,function(H,ce){null!==H?(Z._callback(H),Z._callback=M):void 0!==Z._readCallback&&(Z._readCallback=Z._readCallback(ce))}),s||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},Ee.exports=ye},{"./N3Lexer":28}],30:[function(Ce,Ee,Be){function ye(T,E){if(!(this instanceof ye))return new ye(T,E);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,E||!T||T[0]||(E=T,T=null),E=E||{},this._prefixes=Object.create(null),E.prefixes&&this.addPrefixes(E.prefixes),this.defaultGraph=E.defaultGraph||"http://example.org/#defaultGraph",T&&this.addTriples(T)}var M=Ce("./N3Util").expandPrefixedName;ye.prototype={get size(){var T=this._size;if(null!==T)return T;var F,I,O,E=this._graphs;for(O in E)for(var j in F=E[O].subjects)for(var s in I=F[j])T+=Object.keys(I[s]).length;return this._size=T},_addToIndex:function(T,E,F,I){return F=(T=T[E]||(T[E]={}))[F]||(T[F]={}),(T=I in F)||(F[I]=null),!T},_removeFromIndex:function(T,E,F,I){var s,O=T[E],j=O[F];for(s in delete j[I],j)return;for(s in delete O[F],O)return;delete T[E]},_findInIndex:function(T,E,F,I,O,j,s,D){var Z,H,q=[],ce=1<!E+!F+!I?Object.keys(this._ids):this._entities;for(var le in E&&((Z=T,T={})[E]=Z[E]),T){var ee=ce[le];if(E=T[le])for(var se in F&&((Z=E,E={})[F]=Z[F]),E){var de=ce[se];if(H=E[se])for(var he=((H=I?I in H?[I]:[]:Object.keys(H)).length-1);0<=he;he--){var V={subject:"",predicate:"",object:"",graph:D};V[O]=ee,V[j]=de,V[s]=ce[H[he]],q.push(V)}}}return q},_countInIndex:function(T,E,F,I){var j,s,O=0;for(var D in E&&((j=T,T={})[E]=j[E]),T)if(E=T[D])for(var q in F&&((j=E,E={})[F]=j[F]),E)(s=E[q])&&(I?I in s&&O++:O+=Object.keys(s).length);return O},addTriple:function(T,E,F,I){E||(I=T.graph,F=T.object,E=T.predicate,T=T.subject),I=I||this.defaultGraph;var O=this._graphs[I];O||(O=this._graphs[I]={subjects:{},predicates:{},objects:{}},Object.freeze(O)),I=this._ids;var j=this._entities;return T=I[T]||(I[j[++this._id]=T]=this._id),E=I[E]||(I[j[++this._id]=E]=this._id),F=I[F]||(I[j[++this._id]=F]=this._id),I=this._addToIndex(O.subjects,T,E,F),this._addToIndex(O.predicates,E,F,T),this._addToIndex(O.objects,F,T,E),this._size=null,I},addTriples:function(T){for(var E=T.length-1;0<=E;E--)this.addTriple(T[E])},addPrefix:function(T,E){this._prefixes[T]=E},addPrefixes:function(T){for(var E in T)this.addPrefix(E,T[E])},removeTriple:function(T,E,F,I){E||(I=T.graph,F=T.object,E=T.predicate,T=T.subject),I=I||this.defaultGraph;var O,D,q,j=this._ids,s=this._graphs;if(!((T=j[T])&&(E=j[E])&&(F=j[F])&&(O=s[I])))return!1;if(!((D=O.subjects[T])&&(q=D[E])&&F in q))return!1;for(T in this._removeFromIndex(O.subjects,T,E,F),this._removeFromIndex(O.predicates,E,F,T),this._removeFromIndex(O.objects,F,T,E),null!==this._size&&this._size--,O.subjects)return!0;return delete s[I],!0},removeTriples:function(T){for(var E=T.length-1;0<=E;E--)this.removeTriple(T[E])},find:function(T,E,F,I){var O=this._prefixes;return this.findByIRI(M(T,O),M(E,O),M(F,O),M(I,O))},findByIRI:function(T,E,F,I){var D,q,Z,O=[],j={},s=this._ids;for(var H in I?j[I]=this._graphs[I]:j=this._graphs,j)if(I=j[H]){if(T&&!(D=s[T])||E&&!(q=s[E])||F&&!(Z=s[F]))return O;D?Z?O.push(this._findInIndex(I.objects,Z,D,q,"object","subject","predicate",H)):O.push(this._findInIndex(I.subjects,D,q,null,"subject","predicate","object",H)):q?O.push(this._findInIndex(I.predicates,q,Z,null,"predicate","object","subject",H)):Z?O.push(this._findInIndex(I.objects,Z,null,null,"object","subject","predicate",H)):O.push(this._findInIndex(I.subjects,null,null,null,"subject","predicate","object",H))}return 1===O.length?O[0]:O.concat.apply([],O)},count:function(T,E,F,I){var O=this._prefixes;return this.countByIRI(M(T,O),M(E,O),M(F,O),M(I,O))},countByIRI:function(T,E,F,I){I=I||this.defaultGraph,I=this._graphs[I];var O=this._ids;return!I||T&&!(T=O[T])||E&&!(E=O[E])||F&&!(F=O[F])?0:T?F?this._countInIndex(I.objects,F,T,E):this._countInIndex(I.subjects,T,E,F):E?this._countInIndex(I.predicates,E,F,T):this._countInIndex(I.objects,F,T,E)},createBlankNode:function(T){var E,F;if(T)for(E=T="_:"+T,F=1;this._ids[E];)E=T+F++;else do{E="_:b"+this._blankNodeIndex++}while(this._ids[E]);return this._ids[E]=++this._id,E}},Ee.exports=ye},{"./N3Util":33}],31:[function(Ce,Ee,Be){function ye(E){if(!(this instanceof ye))return new ye(E);M.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var F=this,I=new T(E);I.parse(function(O,j){j&&F.push(j)||O&&F.emit("error",O)},this.emit.bind(this,"prefix")),this._transform=function(O,j,s){I.addChunk(O),s()},this._flush=function(O){I.end(),O()}}var M=Ce("stream").Transform;Be=Ce("util");var T=Ce("./N3Parser.js");Be.inherits(ye,M),Ee.exports=ye},{"./N3Parser.js":29,stream:15,util:38}],32:[function(Ce,Ee,Be){function ye(E){if(!(this instanceof ye))return new ye(E);M.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var F=this,I=new T({write:function(O,j,s){F.push(O),s&&s()},end:function(O){F.push(null),O&&O()}},E);this._transform=function(O,j,s){I.addTriple(O,s)},this._flush=function(O){I.end(O)}}var M=Ce("stream").Transform;Be=Ce("util");var T=Ce("./N3Writer.js");Be.inherits(ye,M),Ee.exports=ye},{"./N3Writer.js":34,stream:15,util:38}],33:[function(Ce,Ee,Be){function ye(E,F){for(var I in T)F?E.prototype[I]=M(T[I]):E[I]=T[I];return E}function M(E){return function(F){return E(this,F)}}var T={isIRI:function(E){return E&&('"'!==(E=E[0])&&"_"!==E)},isLiteral:function(E){return E&&'"'===E[0]},isBlank:function(E){return E&&"_:"===E.substr(0,2)},getLiteralValue:function(E){var F=/^"([^]*)"/.exec(E);if(!F)throw Error(E+" is not a literal");return F[1]},getLiteralType:function(E){var F=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(E);if(!F)throw Error(E+" is not a literal");return F[1]||(F[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(E){var F=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(E);if(!F)throw Error(E+" is not a literal");return F[1]?F[1].toLowerCase():""},isPrefixedName:function(E){return E&&/^[^:\/"']*:[^:\/"']+$/.test(E)},expandPrefixedName:function(E,F){var O,j,s,I=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(E);return I&&(j=F[O=I[1]],s=I.index),void 0===j?E:0===s?j+E.substr(O.length+1):E.substr(0,s+3)+j+E.substr(s+O.length+4)},createIRI:function(E){return E&&'"'===E[0]?T.getLiteralValue(E):E},createLiteral:function(E,F){if(!F)switch(typeof E){case"boolean":F="http://www.w3.org/2001/XMLSchema#boolean";break;case"number":if(isFinite(E)){F=E%1==0?"http://www.w3.org/2001/XMLSchema#integer":"http://www.w3.org/2001/XMLSchema#decimal";break}default:return'"'+E+'"'}return'"'+E+(/^[a-z]+(-[a-z0-9]+)*$/i.test(F)?'"@'+F.toLowerCase():'"^^'+F)},prefix:function(E){return T.prefixes({"":E})("")},prefixes:function(E){function F(j,s){if(s||!(j in I)){var D=Object.create(null);s=s||"",I[j]=function(q){return D[q]||(D[q]=s+q)}}return I[j]}var O,I=Object.create(null);for(O in E)F(O,E[O]);return F}};Ee.exports=ye(ye)},{}],34:[function(Ce,Ee,Be){function ye(O,j){if(!(this instanceof ye))return new ye(O,j);if(O&&"function"!=typeof O.write&&(j=O,O=null),j=j||{},O)this._outputStream=O,this._endStream=void 0===j.end||!!j.end;else{var s="";this._outputStream={write:function(D,q,Z){s+=D,Z&&Z()},end:function(D){D&&D(null,s)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(j.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),j.prefixes&&this.addPrefixes(j.prefixes))}function M(O){var j=I[O];return void 0===j&&(1===O.length?(j=O.charCodeAt(0).toString(16),j="\\u0000".substr(0,6-j.length)+j):(j=(1024*(O.charCodeAt(0)-55296)+O.charCodeAt(1)+9216).toString(16),j="\\U00000000".substr(0,10-j.length)+j)),j}var T=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,E=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,F=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,I={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};ye.prototype={_write:function(O,j){this._outputStream.write(O,"utf8",j)},_writeTriple:function(O,j,s,D,q){try{this._graph!==D&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(D?this._encodeIriOrBlankNode(D)+" {\n":"")),this._subject=null,this._graph="["!==D[0]?D:"]"),this._subject===O?this._predicate===j?this._write(", "+this._encodeObject(s),q):this._write(";\n    "+this._encodePredicate(this._predicate=j)+" "+this._encodeObject(s),q):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=O)+" "+this._encodePredicate(this._predicate=j)+" "+this._encodeObject(s),q)}catch(Z){q&&q(Z)}},_writeTripleLine:function(O,j,s,D,q){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(O)+" "+this._encodeIriOrBlankNode(j)+" "+this._encodeObject(s)+(D?" "+this._encodeIriOrBlankNode(D)+".\n":".\n"),q)}catch(Z){q&&q(Z)}},_encodeIriOrBlankNode:function(O){var j=O[0];return"["===j||"("===j||"_"===j&&":"===O[1]?O:(E.test(O)&&(O=O.replace(F,M)),(j=this._prefixRegex.exec(O))?j[1]?this._prefixIRIs[j[1]]+j[2]:O:"<"+O+">")},_encodeLiteral:function(O,j,s){return E.test(O)&&(O=O.replace(F,M)),s?'"'+O+'"@'+s:j?'"'+O+'"^^'+this._encodeIriOrBlankNode(j):'"'+O+'"'},_encodeSubject:function(O){if('"'===O[0])throw Error("A literal as subject is not allowed: "+O);return"["===O[0]&&(this._subject="]"),this._encodeIriOrBlankNode(O)},_encodePredicate:function(O){if('"'===O[0])throw Error("A literal as predicate is not allowed: "+O);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===O?"a":this._encodeIriOrBlankNode(O)},_encodeObject:function(O){if('"'!==O[0])return this._encodeIriOrBlankNode(O);var j=T.exec(O);if(!j)throw Error("Invalid literal: "+O);return this._encodeLiteral(j[1],j[2],j[3])},_blockedWrite:function(){throw Error("Cannot write because the writer has been closed.")},addTriple:function(O,j,s,D,q){void 0===s?this._writeTriple(O.subject,O.predicate,O.object,O.graph||"",j):"string"!=typeof D?this._writeTriple(O,j,s,"",D):this._writeTriple(O,j,s,D,q)},addTriples:function(O){for(var j=0;j<O.length;j++)this.addTriple(O[j])},addPrefix:function(O,j,s){var D={};D[O]=j,this.addPrefixes(D,s)},addPrefixes:function(O,j){var q,s=this._prefixIRIs,D=!1;for(q in O){var Z=O[q];/[#\/]$/.test(Z)&&s[Z]!==(q+=":")&&(D=!0,s[Z]=q,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+q+" <"+Z+">.\n"))}if(D){var H;Z=q="";for(H in s)q+=q?"|"+H:H,Z+=(Z?"|":"")+s[H];q=q.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+Z+")[^/]*$|^("+q+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(D?"\n":"",j)},blank:function(O,j){var D,q,s=O;switch(void 0===O?s=[]:"string"==typeof O?s=[{predicate:O,object:j}]:"length"in O||(s=[O]),q=s.length){case 0:return"[]";case 1:if("["!==(D=s[0]).object[0])return"[ "+this._encodePredicate(D.predicate)+" "+this._encodeObject(D.object)+" ]";default:for(var Z="[",H=0;H<q;H++)(D=s[H]).predicate===O?Z+=", "+this._encodeObject(D.object):(Z+=(H?";\n  ":"\n  ")+this._encodePredicate(D.predicate)+" "+this._encodeObject(D.object),O=D.predicate);return Z+"\n]"}},list:function(O){for(var j=O&&O.length||0,s=Array(j),D=0;D<j;D++)s[D]=this._encodeObject(O[D]);return"("+s.join(" ")+")"},_prefixRegex:/$0^/,end:function(O){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var j=O&&function(s,D){j=null,O(s,D)};if(this._endStream)try{return this._outputStream.end(j)}catch(s){}j&&j()}},Ee.exports=ye},{}],35:[function(Ce,Ee,Be){(function(ye){!function(M){function T(Y){throw RangeError(se[Y])}function E(Y,ge){for(var ke=Y.length;ke--;)Y[ke]=ge(Y[ke]);return Y}function F(Y,ge){return E(Y.split(ee),ge).join(".")}function I(Y){for(var Se,We,ge=[],ke=0,_e=Y.length;ke<_e;)55296<=(Se=Y.charCodeAt(ke++))&&56319>=Se&&ke<_e?56320==(64512&(We=Y.charCodeAt(ke++)))?ge.push(((1023&Se)<<10)+(1023&We)+65536):(ge.push(Se),ke--):ge.push(Se);return ge}function O(Y){return E(Y,function(ge){var ke="";return 65535<ge&&(ke+=he((ge-=65536)>>>10&1023|55296),ge=56320|1023&ge),ke+he(ge)}).join("")}function j(Y,ge){return Y+22+75*(26>Y)-((0!=ge)<<5)}function s(Y,ge,ke){var _e=0;for(Y=ke?de(Y/700):Y>>1,Y+=de(Y/ge);455<Y;_e+=36)Y=de(Y/35);return de(_e+36*Y/(Y+38))}function D(Y){var _e,Fe,oe,me,Ae,qe,ge=[],ke=Y.length,Se=0,We=128,$e=72;for(0>(Fe=Y.lastIndexOf("-"))&&(Fe=0),oe=0;oe<Fe;++oe)128<=Y.charCodeAt(oe)&&T("not-basic"),ge.push(Y.charCodeAt(oe));for(Fe=0<Fe?Fe+1:0;Fe<ke;){for(oe=Se,_e=1,me=36;Fe>=ke&&T("invalid-input"),(36<=(Ae=10>(Ae=Y.charCodeAt(Fe++))-48?Ae-22:26>Ae-65?Ae-65:26>Ae-97?Ae-97:36)||Ae>de((2147483647-Se)/_e))&&T("overflow"),Se+=Ae*_e,!(Ae<(qe=me<=$e?1:me>=$e+26?26:me-$e));me+=36)_e>de(2147483647/(Ae=36-qe))&&T("overflow"),_e*=Ae;$e=s(Se-oe,_e=ge.length+1,0==oe),de(Se/_e)>2147483647-We&&T("overflow"),We+=de(Se/_e),Se%=_e,ge.splice(Se++,0,We)}return O(ge)}function q(Y){var ge,ke,_e,Se,We,$e,Fe,oe,me,qe,et,st,Ae=[];for(qe=(Y=I(Y)).length,ge=128,ke=0,We=72,$e=0;$e<qe;++$e)128>(me=Y[$e])&&Ae.push(he(me));for((_e=Se=Ae.length)&&Ae.push("-");_e<qe;){for(Fe=2147483647,$e=0;$e<qe;++$e)(me=Y[$e])>=ge&&me<Fe&&(Fe=me);for(Fe-ge>de((2147483647-ke)/(et=_e+1))&&T("overflow"),ke+=(Fe-ge)*et,ge=Fe,$e=0;$e<qe;++$e)if((me=Y[$e])<ge&&2147483647<++ke&&T("overflow"),me==ge){for(oe=ke,Fe=36;!(oe<(me=Fe<=We?1:Fe>=We+26?26:Fe-We));Fe+=36)st=oe-me,oe=36-me,Ae.push(he(j(me+st%oe,0))),oe=de(st/oe);Ae.push(he(j(oe,0))),We=s(ke,et,_e==Se),ke=0,++_e}++ke,++ge}return Ae.join("")}var Z="object"==typeof Be&&Be,H="object"==typeof Ee&&Ee&&Ee.exports==Z&&Ee;((W="object"==typeof ye&&ye).global===W||W.window===W)&&(M=W);var V,ce=/^xn--/,le=/[^ -~]/,ee=/\x2E|\u3002|\uFF0E|\uFF61/g,se={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},de=Math.floor,he=String.fromCharCode,W={version:"1.2.4",ucs2:{decode:I,encode:O},decode:D,encode:q,toASCII:function(Y){return F(Y,function(ge){return le.test(ge)?"xn--"+q(ge):ge})},toUnicode:function(Y){return F(Y,function(ge){return ce.test(ge)?D(ge.slice(4).toLowerCase()):ge})}};if(Z&&!Z.nodeType)if(H)H.exports=W;else for(V in W)W.hasOwnProperty(V)&&(Z[V]=W[V]);else M.punycode=W}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],36:[function(Ce,Ee,Be){function ye(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function M(ee,se,de){if(ee&&T(ee)&&ee instanceof ye)return ee;var he=new ye;return he.parse(ee,se,de),he}function T(ee){return"object"==typeof ee&&null!==ee}var E=Ce("punycode");Be.parse=M,Be.resolve=function(ee,se){return M(ee,!1,!0).resolve(se)},Be.resolveObject=function(ee,se){return ee?M(ee,!1,!0).resolveObject(se):se},Be.format=function(ee){return"string"==typeof ee&&(ee=M(ee)),ee instanceof ye?ee.format():ye.prototype.format.call(ee)},Be.Url=ye;var F=/^([a-z0-9.+-]+:)/i,I=/:[0-9]*$/;Ee="{}|\\^`".split("").concat('<>"` \r\n\t'.split(""));var O=["'"].concat(Ee),j=["%","/","?",";","#"].concat(O),s=["/","?","#"],D=/^[a-z0-9A-Z_-]{0,63}$/,q=/^([a-z0-9A-Z_-]{0,63})(.*)$/,Z={javascript:!0,"javascript:":!0},H={javascript:!0,"javascript:":!0},ce={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},le=Ce("querystring");ye.prototype.parse=function(ee,se,de){if("string"!=typeof ee)throw new TypeError("Parameter 'url' must be a string, not "+typeof ee);if(ee=ee.trim(),he=F.exec(ee)){var he,V=(he=he[0]).toLowerCase();this.protocol=V,ee=ee.substr(he.length)}if(de||he||ee.match(/^\/\/[^@\/]+@[^@\/]+/)){var W="//"===ee.substr(0,2);!W||he&&H[he]||(ee=ee.substr(2),this.slashes=!0)}if(!H[he]&&(W||he&&!ce[he])){for(W=-1,de=0;de<s.length;de++)-1!==(he=ee.indexOf(s[de]))&&(-1===W||he<W)&&(W=he);for(-1!==(W=-1===W?ee.lastIndexOf("@"):ee.lastIndexOf("@",W))&&(de=ee.slice(0,W),ee=ee.slice(W+1),this.auth=decodeURIComponent(de)),W=-1,de=0;de<j.length;de++)-1!==(he=ee.indexOf(j[de]))&&(-1===W||he<W)&&(W=he);if(-1===W&&(W=ee.length),this.host=ee.slice(0,W),ee=ee.slice(W),this.parseHost(),this.hostname=this.hostname||"",!(W="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1])){var Y=this.hostname.split(/\./);for(de=0,he=Y.length;de<he;de++){var ge=Y[de];if(ge&&!ge.match(D)){for(var ke="",_e=0,Se=ge.length;_e<Se;_e++)ke=127<ge.charCodeAt(_e)?ke+"x":ke+ge[_e];if(!ke.match(D)){he=Y.slice(0,de),de=Y.slice(de+1),(ge=ge.match(q))&&(he.push(ge[1]),de.unshift(ge[2])),de.length&&(ee="/"+de.join(".")+ee),this.hostname=he.join(".");break}}}}if(this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase(),!W){for(ge=this.hostname.split("."),Y=[],de=0;de<ge.length;++de)he=ge[de],Y.push(he.match(/[^A-Za-z0-9_-]/)?"xn--"+E.encode(he):he);this.hostname=Y.join(".")}de=this.port?":"+this.port:"",this.host=(this.hostname||"")+de,this.href+=this.host,W&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==ee[0]&&(ee="/"+ee))}if(!Z[V])for(de=0,he=O.length;de<he;de++)W=O[de],(ge=encodeURIComponent(W))===W&&(ge=escape(W)),ee=ee.split(W).join(ge);return-1!==(de=ee.indexOf("#"))&&(this.hash=ee.substr(de),ee=ee.slice(0,de)),-1!==(de=ee.indexOf("?"))?(this.search=ee.substr(de),this.query=ee.substr(de+1),se&&(this.query=le.parse(this.query)),ee=ee.slice(0,de)):se&&(this.search="",this.query={}),ee&&(this.pathname=ee),ce[V]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(de=this.pathname||"",he=this.search||"",this.path=de+he),this.href=this.format(),this},ye.prototype.format=function(){var ee=this.auth||"";ee&&(ee=(ee=encodeURIComponent(ee)).replace(/%3A/i,":"),ee+="@");var se=this.protocol||"",de=this.pathname||"",he=this.hash||"",V=!1,W="";return this.host?V=ee+this.host:this.hostname&&(V=ee+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(V+=":"+this.port)),this.query&&T(this.query)&&Object.keys(this.query).length&&(W=le.stringify(this.query)),ee=this.search||W&&"?"+W||"",se&&":"!==se.substr(-1)&&(se+=":"),this.slashes||(!se||ce[se])&&!1!==V?(V="//"+(V||""),de&&"/"!==de.charAt(0)&&(de="/"+de)):V||(V=""),he&&"#"!==he.charAt(0)&&(he="#"+he),ee&&"?"!==ee.charAt(0)&&(ee="?"+ee),se+V+(de=de.replace(/[?#]/g,function(Y){return encodeURIComponent(Y)}))+(ee=ee.replace("#","%23"))+he},ye.prototype.resolve=function(ee){return this.resolveObject(M(ee,!1,!0)).format()},ye.prototype.resolveObject=function(ee){"string"==typeof ee&&((de=new ye).parse(ee,!1,!0),ee=de);var se=new ye;if(Object.keys(this).forEach(function(Se){se[Se]=this[Se]},this),se.hash=ee.hash,""===ee.href)return se.href=se.format(),se;if(ee.slashes&&!ee.protocol)return Object.keys(ee).forEach(function(Se){"protocol"!==Se&&(se[Se]=ee[Se])}),ce[se.protocol]&&se.hostname&&!se.pathname&&(se.path=se.pathname="/"),se.href=se.format(),se;if(ee.protocol&&ee.protocol!==se.protocol){if(!ce[ee.protocol])return Object.keys(ee).forEach(function(Se){se[Se]=ee[Se]}),se.href=se.format(),se;if(se.protocol=ee.protocol,ee.host||H[ee.protocol])se.pathname=ee.pathname;else{for(var Y=(ee.pathname||"").split("/");Y.length&&!(ee.host=Y.shift()););ee.host||(ee.host=""),ee.hostname||(ee.hostname=""),""!==Y[0]&&Y.unshift(""),2>Y.length&&Y.unshift(""),se.pathname=Y.join("/")}return se.search=ee.search,se.query=ee.query,se.host=ee.host||"",se.auth=ee.auth,se.hostname=ee.hostname||ee.host,se.port=ee.port,(se.pathname||se.search)&&(se.path=(se.pathname||"")+(se.search||"")),se.slashes=se.slashes||ee.slashes,se.href=se.format(),se}var de=se.pathname&&"/"===se.pathname.charAt(0),V=de=(he=ee.host||ee.pathname&&"/"===ee.pathname.charAt(0))||de||se.host&&ee.pathname,W=se.pathname&&se.pathname.split("/")||[],ge=(Y=ee.pathname&&ee.pathname.split("/")||[],se.protocol&&!ce[se.protocol]);if(ge&&(se.hostname="",se.port=null,se.host&&(""===W[0]?W[0]=se.host:W.unshift(se.host)),se.host="",ee.protocol&&(ee.hostname=null,ee.port=null,ee.host&&(""===Y[0]?Y[0]=ee.host:Y.unshift(ee.host)),ee.host=null),de=de&&(""===Y[0]||""===W[0])),he)se.host=ee.host||""===ee.host?ee.host:se.host,se.hostname=ee.hostname||""===ee.hostname?ee.hostname:se.hostname,se.search=ee.search,se.query=ee.query,W=Y;else if(Y.length)W||(W=[]),W.pop(),W=W.concat(Y),se.search=ee.search,se.query=ee.query;else if(null!=ee.search)return ge&&(se.hostname=se.host=W.shift(),ge=!!(se.host&&0<se.host.indexOf("@"))&&se.host.split("@"))&&(se.auth=ge.shift(),se.host=se.hostname=ge.shift()),se.search=ee.search,se.query=ee.query,(null!==se.pathname||null!==se.search)&&(se.path=(se.pathname?se.pathname:"")+(se.search?se.search:"")),se.href=se.format(),se;if(!W.length)return se.pathname=null,se.path=se.search?"/"+se.search:null,se.href=se.format(),se;for(var he=W.slice(-1)[0],ke=(Y=(se.host||ee.host)&&("."===he||".."===he)||""===he,0),_e=W.length;0<=_e;_e--)"."==(he=W[_e])?W.splice(_e,1):".."===he?(W.splice(_e,1),ke++):ke&&(W.splice(_e,1),ke--);if(!de&&!V)for(;ke--;ke)W.unshift("..");return!de||""===W[0]||W[0]&&"/"===W[0].charAt(0)||W.unshift(""),Y&&"/"!==W.join("/").substr(-1)&&W.push(""),V=""===W[0]||W[0]&&"/"===W[0].charAt(0),ge&&(se.hostname=se.host=V?"":W.length?W.shift():"",ge=!!(se.host&&0<se.host.indexOf("@"))&&se.host.split("@"))&&(se.auth=ge.shift(),se.host=se.hostname=ge.shift()),(de=de||se.host&&W.length)&&!V&&W.unshift(""),W.length?se.pathname=W.join("/"):(se.pathname=null,se.path=null),(null!==se.pathname||null!==se.search)&&(se.path=(se.pathname?se.pathname:"")+(se.search?se.search:"")),se.auth=ee.auth||se.auth,se.slashes=se.slashes||ee.slashes,se.href=se.format(),se},ye.prototype.parseHost=function(){var ee=this.host,se=I.exec(ee);se&&(":"!==(se=se[0])&&(this.port=se.substr(1)),ee=ee.substr(0,ee.length-se.length)),ee&&(this.hostname=ee)}},{punycode:35,querystring:13}],37:[function(Ce,Ee,Be){Ee.exports=function(ye){return ye&&"object"==typeof ye&&"function"==typeof ye.copy&&"function"==typeof ye.fill&&"function"==typeof ye.readUInt8}},{}],38:[function(Ce,Ee,Be){(function(ye,M){function T(Fe,oe){var me={seen:[],stylize:F};return 3<=arguments.length&&(me.depth=arguments[2]),4<=arguments.length&&(me.colors=arguments[3]),ce(oe)?me.showHidden=oe:oe&&Be._extend(me,oe),se(me.showHidden)&&(me.showHidden=!1),se(me.depth)&&(me.depth=2),se(me.colors)&&(me.colors=!1),se(me.customInspect)&&(me.customInspect=!0),me.colors&&(me.stylize=E),O(me,Fe,me.depth)}function E(Fe,oe){var me=T.styles[oe];return me?"\x1b["+T.colors[me][0]+"m"+Fe+"\x1b["+T.colors[me][1]+"m":Fe}function F(Fe,oe){return Fe}function O(Fe,oe,me){if(Fe.customInspect&&oe&&Y(oe.inspect)&&oe.inspect!==Be.inspect&&(!oe.constructor||oe.constructor.prototype!==oe))return ee(et=oe.inspect(me,Fe))||(et=O(Fe,et,me)),et;if(et=function j(Fe,oe){if(se(oe))return Fe.stylize("undefined","undefined");if(ee(oe)){var me="'"+JSON.stringify(oe).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Fe.stylize(me,"string")}if(le(oe))return Fe.stylize(""+oe,"number");if(ce(oe))return Fe.stylize(""+oe,"boolean");if(null===oe)return Fe.stylize("null","null")}(Fe,oe))return et;var Ae=Object.keys(oe),qe=function I(Fe){var oe={};return Fe.forEach(function(me,Ae){oe[me]=!0}),oe}(Ae);if(Fe.showHidden&&(Ae=Object.getOwnPropertyNames(oe)),W(oe)&&(0<=Ae.indexOf("message")||0<=Ae.indexOf("description")))return s(oe);if(0===Ae.length){if(Y(oe))return Fe.stylize("[Function"+(oe.name?": "+oe.name:"")+"]","special");if(de(oe))return Fe.stylize(RegExp.prototype.toString.call(oe),"regexp");if(V(oe))return Fe.stylize(Date.prototype.toString.call(oe),"date");if(W(oe))return s(oe)}var et="",st=!1,dt=["{","}"];return H(oe)&&(st=!0,dt=["[","]"]),Y(oe)&&(et=" [Function"+(oe.name?": "+oe.name:"")+"]"),de(oe)&&(et=" "+RegExp.prototype.toString.call(oe)),V(oe)&&(et=" "+Date.prototype.toUTCString.call(oe)),W(oe)&&(et=" "+s(oe)),0!==Ae.length||st&&0!=oe.length?0>me?de(oe)?Fe.stylize(RegExp.prototype.toString.call(oe),"regexp"):Fe.stylize("[Object]","special"):(Fe.seen.push(oe),Ae=st?function D(Fe,oe,me,Ae,qe){for(var et=[],st=0,dt=oe.length;st<dt;++st)Object.prototype.hasOwnProperty.call(oe,String(st))?et.push(q(Fe,oe,me,Ae,String(st),!0)):et.push("");return qe.forEach(function(xt){xt.match(/^\d+$/)||et.push(q(Fe,oe,me,Ae,xt,!0))}),et}(Fe,oe,me,qe,Ae):Ae.map(function(xt){return q(Fe,oe,me,qe,xt,st)}),Fe.seen.pop(),function Z(Fe,oe,me){return 60<Fe.reduce(function(qe,et){return 0<=et.indexOf("\n")&&0,qe+et.replace(/\u001b\[\d\d?m/g,"").length+1},0)?me[0]+(""===oe?"":oe+"\n ")+" "+Fe.join(",\n  ")+" "+me[1]:me[0]+oe+" "+Fe.join(", ")+" "+me[1]}(Ae,et,dt)):dt[0]+et+dt[1]}function s(Fe){return"["+Error.prototype.toString.call(Fe)+"]"}function q(Fe,oe,me,Ae,qe,et){var st,dt;if((oe=Object.getOwnPropertyDescriptor(oe,qe)||{value:oe[qe]}).get?dt=oe.set?Fe.stylize("[Getter/Setter]","special"):Fe.stylize("[Getter]","special"):oe.set&&(dt=Fe.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(Ae,qe)||(st="["+qe+"]"),dt||(0>Fe.seen.indexOf(oe.value)?-1<(dt=O(Fe,oe.value,null===me?null:me-1)).indexOf("\n")&&(dt=et?dt.split("\n").map(function(xt){return"  "+xt}).join("\n").substr(2):"\n"+dt.split("\n").map(function(xt){return"   "+xt}).join("\n")):dt=Fe.stylize("[Circular]","special")),se(st)){if(et&&qe.match(/^\d+$/))return dt;(st=JSON.stringify(""+qe)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(st=st.substr(1,st.length-2),st=Fe.stylize(st,"name")):(st=st.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),st=Fe.stylize(st,"string"))}return st+": "+dt}function H(Fe){return Array.isArray(Fe)}function ce(Fe){return"boolean"==typeof Fe}function le(Fe){return"number"==typeof Fe}function ee(Fe){return"string"==typeof Fe}function se(Fe){return void 0===Fe}function de(Fe){return he(Fe)&&"[object RegExp]"===Object.prototype.toString.call(Fe)}function he(Fe){return"object"==typeof Fe&&null!==Fe}function V(Fe){return he(Fe)&&"[object Date]"===Object.prototype.toString.call(Fe)}function W(Fe){return he(Fe)&&("[object Error]"===Object.prototype.toString.call(Fe)||Fe instanceof Error)}function Y(Fe){return"function"==typeof Fe}function ge(Fe){return 10>Fe?"0"+Fe.toString(10):Fe.toString(10)}function ke(){var Fe=new Date,oe=[ge(Fe.getHours()),ge(Fe.getMinutes()),ge(Fe.getSeconds())].join(":");return[Fe.getDate(),$e[Fe.getMonth()],oe].join(" ")}var _e=/%[sdj%]/g;Be.format=function(Fe){if(!ee(Fe)){for(var oe=[],me=0;me<arguments.length;me++)oe.push(T(arguments[me]));return oe.join(" ")}me=1;for(var Ae=arguments,qe=Ae.length,et=(oe=String(Fe).replace(_e,function(xt){if("%%"===xt)return"%";if(me>=qe)return xt;switch(xt){case"%s":return String(Ae[me++]);case"%d":return Number(Ae[me++]);case"%j":try{return JSON.stringify(Ae[me++])}catch(Pt){return"[Circular]"}default:return xt}}),Ae[me]);me<qe;et=Ae[++me])oe=null!==et&&he(et)?oe+" "+T(et):oe+" "+et;return oe},Be.deprecate=function(Fe,oe){if(se(M.process))return function(){return Be.deprecate(Fe,oe).apply(this,arguments)};if(!0===ye.noDeprecation)return Fe;var me=!1;return function(){if(!me){if(ye.throwDeprecation)throw Error(oe);ye.traceDeprecation?console.trace(oe):console.error(oe),me=!0}return Fe.apply(this,arguments)}};var We,Se={};Be.debuglog=function(Fe){if(se(We)&&(We=ye.env.NODE_DEBUG||""),Fe=Fe.toUpperCase(),!Se[Fe])if(new RegExp("\\b"+Fe+"\\b","i").test(We)){var oe=ye.pid;Se[Fe]=function(){var me=Be.format.apply(Be,arguments);console.error("%s %d: %s",Fe,oe,me)}}else Se[Fe]=function(){};return Se[Fe]},Be.inspect=T,T.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},T.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},Be.isArray=H,Be.isBoolean=ce,Be.isNull=function(Fe){return null===Fe},Be.isNullOrUndefined=function(Fe){return null==Fe},Be.isNumber=le,Be.isString=ee,Be.isSymbol=function(Fe){return"symbol"==typeof Fe},Be.isUndefined=se,Be.isRegExp=de,Be.isObject=he,Be.isDate=V,Be.isError=W,Be.isFunction=Y,Be.isPrimitive=function(Fe){return null===Fe||"boolean"==typeof Fe||"number"==typeof Fe||"string"==typeof Fe||"symbol"==typeof Fe||void 0===Fe},Be.isBuffer=Ce("./support/isBuffer");var $e="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");Be.log=function(){console.log("%s - %s",ke(),Be.format.apply(Be,arguments))},Be.inherits=Ce("inherits"),Be._extend=function(Fe,oe){if(!oe||!he(oe))return Fe;for(var me=Object.keys(oe),Ae=me.length;Ae--;)Fe[me[Ae]]=oe[me[Ae]];return Fe}}).call(this,Ce("7YKIPe"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":37,"7YKIPe":10,inherits:24}],39:[function(Ce,Ee,Be){function ye(F,I){this.name="NonSupportedSparqlFeatureError",this.feature=F,this.message=I||"SPARQL feature "+F+" non supported"}function M(F){this.name=ParserError,this.message=F||"Error parsing SPARQL query"}var T=Ce("./parser"),E=Ce("./utils");ye.prototype=Error(),ye.constructor=ye,M.prototype=Error(),M.constructor=M,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(F){return T.parse(F)},AbstractQueryTree.prototype.parseExecutableUnit=function(F){if("select"===F.kind||"ask"===F.kind||"modify"===F.kind||"construct"===F.kind)return this.parseSelect(F);if("insertdata"===F.kind||"deletedata"===F.kind)return this.parseInsertData(F);if("load"===F.kind||"clear"===F.kind||"drop"===F.kind||"create"===F.kind)return F;throw Error("unknown executable unit: "+F.kind)},AbstractQueryTree.prototype.parseSelect=function(F){return null==F?(console.log("error parsing query"),null):(F.pattern=this.build(F.pattern,{freshCounter:0}),F)},AbstractQueryTree.prototype.parseInsertData=function(F){return null==F?(console.log("error parsing query"),null):F},AbstractQueryTree.prototype.build=function(F,I){if("groupgraphpattern"===F.token)return this._buildGroupGraphPattern(F,I);if("basicgraphpattern"===F.token){var O={kind:"BGP",value:F.triplesContext};return AbstractQueryTree.translatePathExpressionsInBGP(O,I)}if("graphunionpattern"===F.token)return{kind:"UNION",value:[O=this.build(F.value[0],I),this.build(F.value[1],I)]};if("graphgraphpattern"===F.token)return{kind:"GRAPH",value:this.build(F.value,I),graph:F.graph};throw null!=F.token?new ye(F.token,"Non implemented SPARQL graph pattern: '"+F.token+"'"):new M("Error parsing graph pattern: '"+JSON.stringify(F)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(F,I){var O,s,D,j=[];for(D=0;D<F.value.length;D++)if(F.value[D].predicate&&"path"===F.value[D].predicate.token){O=F.value[D],s=F.value.slice(D+1);var q=AbstractQueryTree.translatePathExpression(O,I);if(O=null,"BGP"!==q.kind){if("ZERO_OR_MORE_PATH"===q.kind||"ONE_OR_MORE_PATH"===q.kind){if(D=0<j.length?{kind:"JOIN",lvalue:{kind:"BGP",value:j},rvalue:q}:q,"ZERO_OR_MORE_PATH"===q.kind)if("var"===q.y.token&&0===q.y.value.indexOf("fresh:")&&"var"===q.x.token&&0===q.x.value.indexOf("fresh:"))for(var Z=0;Z<F.value.length;Z++)F.value[Z].object&&"var"===F.value[Z].object.token&&F.value[Z].object.value===q.x.value&&((O=E.clone(F.value[Z],!0)).object=q.y);else if("var"===q.y.token&&0===q.y.value.indexOf("fresh:"))for(Z=0;Z<F.value.length;Z++)F.value[Z].subject&&"var"===F.value[Z].subject.token&&F.value[Z].subject.value===q.y.value&&((O=E.clone(F.value[Z],!0)).subject=q.x);return 0<s.length?(q=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:s},I),null!=O?{kind:"UNION",value:[{kind:"JOIN",lvalue:D,rvalue:q},{kind:"BGP",value:j=j.concat([O]).concat(s)}]}:{kind:"JOIN",lvalue:D,rvalue:q}):D}return q}j=j.concat(q.value)}else j.push(F.value[D]);return F.value=j,F},AbstractQueryTree.translatePathExpression=function(F,I){if("element"===F.predicate.kind)return"+"===F.predicate.modifier?(F.predicate.modifier=null,{kind:"ONE_OR_MORE_PATH",path:O=AbstractQueryTree.translatePathExpression(F,I),x:F.subject,y:F.object}):"*"===F.predicate.modifier?(F.predicate.modifier=null,{kind:"ZERO_OR_MORE_PATH",path:O=AbstractQueryTree.translatePathExpression(F,I),x:F.subject,y:F.object}):(F.predicate=F.predicate.value,{kind:"BGP",value:[F]});if("sequence"===F.predicate.kind){for(var D,q,O=F.subject,j=F.object,s=F.graph,Z=[],H=0;H<F.predicate.value.length;H++)H!=F.predicate.value.length-1?(D={token:"var",value:"fresh:"+I.freshCounter},I.freshCounter++):D=j,q={subject:O,predicate:F.predicate.value[H],object:D},null!=s&&(q.graph=E.clone(s,!0)),Z.push(q),H!=F.predicate.value.length-1&&(O=E.clone(D,!0));return AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:Z},I)}throw new ye("Non supported path expression "+F.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(F,I){for(var O=F.filters||[],j=F.binds||[],s={kind:"EMPTY_PATTERN"},D=0;D<F.patterns.length;D++){var q=F.patterns[D];"optionalgraphpattern"===q.token?s="FILTER"===(q=this.build(q.value,I)).kind?{kind:"LEFT_JOIN",lvalue:s,rvalue:q.value,filter:q.filter}:{kind:"LEFT_JOIN",lvalue:s,rvalue:q,filter:!0}:(q=this.build(q,I),s="EMPTY_PATTERN"==s.kind?q:{kind:"JOIN",lvalue:s,rvalue:q})}if(s.binds=j,0!=O.length){if("EMPTY_PATTERN"===s.kind||"LEFT_JOIN"===s.kind&&!0===s.filter||"LEFT_JOIN"===s.kind||"JOIN"===s.kind||"UNION"===s.kind||"GRAPH"===s.kind||"BGP"===s.kind)return{kind:"FILTER",filter:O,value:s};throw Error("Unknow kind of algebra expression: "+s.kind)}return s},AbstractQueryTree.prototype.collectBasicTriples=function(F,I){if(null==I&&(I=[]),"select"===F.kind)I=this.collectBasicTriples(F.pattern,I);else if("BGP"===F.kind)I=I.concat(F.value);else if("ZERO_OR_MORE_PATH"===F.kind)I=this.collectBasicTriples(F.path);else if("UNION"===F.kind)I=this.collectBasicTriples(F.value[0],I),I=this.collectBasicTriples(F.value[1],I);else if("GRAPH"===F.kind)I=this.collectBasicTriples(F.value,I);else if("LEFT_JOIN"===F.kind||"JOIN"===F.kind)I=this.collectBasicTriples(F.lvalue,I),I=this.collectBasicTriples(F.rvalue,I);else if("FILTER"===F.kind)I=this.collectBasicTriples(F.value,I);else if("construct"===F.kind)I=this.collectBasicTriples(F.pattern,I);else if("EMPTY_PATTERN"!==F.kind)throw"Unknown pattern: "+F.kind;return I},AbstractQueryTree.prototype.bind=function(F,I){if(null!=F.graph&&F.graph.token&&"var"===F.graph.token&&null!=I[F.graph.value]&&(F.graph=I[F.graph.value]),null!=F.filter){for(var O=[],j=0;j<F.filter.length;j++)F.filter[j].value=this._bindFilter(F.filter[j].value,I),O.push(F.filter[j]);F.filter=O}if("select"===F.kind)F.pattern=this.bind(F.pattern,I);else if("BGP"===F.kind)F.value=this._bindTripleContext(F.value,I);else if("ZERO_OR_MORE_PATH"===F.kind)F.path=this._bindTripleContext(F.path,I),F.x&&"var"===F.x.token&&null!=I[F.x.value]&&(F.x=I[F.x.value]),F.y&&"var"===F.y.token&&null!=I[F.y.value]&&(F.y=I[F.y.value]);else if("UNION"===F.kind)F.value[0]=this.bind(F.value[0],I),F.value[1]=this.bind(F.value[1],I);else if("GRAPH"===F.kind)F.value=this.bind(F.value,I);else if("LEFT_JOIN"===F.kind||"JOIN"===F.kind)F.lvalue=this.bind(F.lvalue,I),F.rvalue=this.bind(F.rvalue,I);else if("FILTER"===F.kind){var s=this;F.value=this.bind(F.value,I),F.filter=F.filter.map(function(D){return{token:"filter",value:s._bindFilter(D.value,I)}})}else if("EMPTY_PATTERN"!==F.kind)throw"Unknown pattern: "+F.kind;return F},AbstractQueryTree.prototype._bindTripleContext=function(F,I){for(var O=0;O<F.length;O++)for(var j in delete F[O].graph,delete F[O].variables,F[O]){var s=F[O][j];"var"===s.token&&null!=I[s.value]&&(F[O][j]=I[s.value])}return F},AbstractQueryTree.prototype._bindFilter=function(F,I){if(null!=F.expressionType){var O=F.expressionType;if("relationalexpression"==O)F.op1=this._bindFilter(F.op1,I),F.op2=this._bindFilter(F.op2,I);else if("conditionalor"==O||"conditionaland"==O)for(O=0;O<F.operands.length;O++)F.operands[O]=this._bindFilter(F.operands[O],I);else if("additiveexpression"==O)for(F.summand=this._bindFilter(F.summand,I),O=0;O<F.summands.length;O++)F.summands[O].expression=this._bindFilter(F.summands[O].expression,I);else if("builtincall"==O)for(O=0;O<F.args.length;O++)F.args[O]=this._bindFilter(F.args[O],I);else if("multiplicativeexpression"==O)for(F.factor=this._bindFilter(F.factor,I),O=0;O<F.factors.length;O++)F.factors[O].expression=this._bindFilter(F.factors[O].expression,I);else if("unaryexpression"==O)F.expression=this._bindFilter(F.expression,I);else if("irireforfunction"==O)for(O=0;O<F.factors.args;O++)F.args[O]=this._bindFilter(F.args[O],I);else"atomic"==O&&"var"==F.primaryexpression&&null!=I[F.value.value]&&(O=I[F.value.value],F.primaryexpression="uri"===O.token?"iri":"literal",F.value=O)}return F},AbstractQueryTree.prototype.replace=function(F,I,O,j){if(null!=F.graph&&F.graph.token&&F.graph.token===I.token&&F.graph.value==I.value&&(F.graph=E.clone(O,!0)),null!=F.filter){for(var s=[],D=0;D<F.filter.length;D++)F.filter[D].value=this._replaceFilter(F.filter[D].value,I,O,j),s.push(F.filter[D]);F.filter=s}if("select"===F.kind)F.pattern=this.replace(F.pattern,I,O,j);else if("BGP"===F.kind)F.value=this._replaceTripleContext(F.value,I,O,j);else if("ZERO_OR_MORE_PATH"===F.kind)F.path=this._replaceTripleContext(F.path,I,O,j),F.x&&F.x.token===I.token&&F.value===I.value&&(F.x=E.clone(O,!0)),F.y&&F.y.token===I.token&&F.value===I.value&&(F.y=E.clone(O,!0));else if("UNION"===F.kind)F.value[0]=this.replace(F.value[0],I,O,j),F.value[1]=this.replace(F.value[1],I,O,j);else if("GRAPH"===F.kind)F.value=this.replace(F.value,I,O);else if("LEFT_JOIN"===F.kind||"JOIN"===F.kind)F.lvalue=this.replace(F.lvalue,I,O,j),F.rvalue=this.replace(F.rvalue,I,O,j);else if("FILTER"===F.kind)F.value=this._replaceFilter(F.value,I,O,j);else if("EMPTY_PATTERN"!==F.kind)throw"Unknown pattern: "+F.kind;return F},AbstractQueryTree.prototype._replaceTripleContext=function(F,I,O,j){for(var s=0;s<F.length;s++)for(var D in F[s]){var q=F[s][D];"var"===q.token&&"var"===I.token&&q.value===I.value||"blank"===q.token&&"blank"===I.token&&q.value===I.value?F[s][D]=O:"literal"!==q.token&&"uri"!==q.token||"literal"!==I.token&&"uri"!==I.token||q.token!==I.token||E.lexicalFormTerm(q,j)[q.token]!==E.lexicalFormTerm(I,j)[q.token]||(F[s][D]=O)}return F},AbstractQueryTree.prototype._replaceFilter=function(F,I,O,j){if(null!=F.expressionType){var s=F.expressionType;if("relationalexpression"==s)F.op1=this._replaceFilter(F.op1,I,O,j),F.op2=this._replaceFilter(F.op2,I,O,j);else if("conditionalor"==s||"conditionaland"==s)for(s=0;s<F.operands.length;s++)F.operands[s]=this._replaceFilter(F.operands[s],I,O,j);else if("additiveexpression"==s)for(F.summand=this._replaceFilter(F.summand,I,O,j),s=0;s<F.summands.length;s++)F.summands[s].expression=this._replaceFilter(F.summands[s].expression,I,O,j);else if("builtincall"==s)for(s=0;s<F.args.length;s++)F.args[s]=this._replaceFilter(F.args[s],I,O,j);else if("multiplicativeexpression"==s)for(F.factor=this._replaceFilter(F.factor,I,O,j),s=0;s<F.factors.length;s++)F.factors[s].expression=this._replaceFilter(F.factors[s].expression,I,O,j);else if("unaryexpression"==s)F.expression=this._replaceFilter(F.expression,I,O,j);else if("irireforfunction"==s)for(s=0;s<F.factors.args;s++)F.args[s]=this._replaceFilter(F.args[s],I,O,j);else"atomic"==s&&(j=null,(F.primaryexpression==I.token&&F.value==I.value||"iri"==F.primaryexpression&&"uri"==I.token&&F.value==I.value)&&(j=O.value),null!=j&&(F.primaryexpression="uri"===O.token?"iri":O.token,F.value=j))}return F},AbstractQueryTree.prototype.treeWithUnion=function(F){if(null==F||null==F.kind)return!1;if("select"===F.kind)return this.treeWithUnion(F.pattern);if("BGP"===F.kind)return this.treeWithUnion(F.value);if("ZERO_OR_MORE_PATH"===F.kind)return!1;if("UNION"===F.kind){if(null==F.value[0].value||null==F.value[0].value.variables||null==F.value[1].value||null==F.value[1].value.variables)return!0;if(F.value[0].variables.join("/")===F.values[1].variables.join("/"))return!!this.treeWithUnion(F.value[0])||this.treeWithUnion(F.value[1])}else{if("GRAPH"===F.kind||"LEFT_JOIN"!==F.kind&&"JOIN"!==F.kind)return!1;if(this.treeWithUnion(F.lvalue))return!0;this.treeWithUnion(F.rvalue)}},Ee.exports={AbstractQueryTree,NonSupportedSparqlFeatureError:ye,SparqlParserError:M}},{"./parser":46,"./utils":57}],40:[function(Ce,Ee,Be){var ye=Ce("./utils"),M=ye.nextTick,T=function(F,I){if(0!=arguments.length){this.order=F,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var O=this;this._diskWrite(this.root,function(j){O.root=j,O._updateRootNode(O.root,function(s){O.comparator=function(D,q){return D<q?-1:D>q?1:0},O.merger=null,null!=I&&I(O)})})}};T.prototype._allocateNode=function(){return new E},T.prototype._diskWrite=function(F,I){M(function(){I(F)})},T.prototype._diskRead=function(F,I){M(function(){I(F)})},T.prototype._diskDelete=function(F,I){M(function(){I()})},T.prototype._updateRootNode=function(F,I){I(F)},T.prototype.search=function(F,I,O){this.__search(this,F,this.root,I,O)},T.prototype.__search=function(F,I,O,j,s){for(var D=0;D<O.numberActives&&1===F.comparator(I,O.keys[D].key);)D++;D<O.numberActives&&0===F.comparator(O.keys[D].key,I)?j(null!=s&&1==s||O.keys[D].data):!0===O.isLeaf?j(null):F._diskRead(O.children[D],function(q){F.__search(F,I,q,j,s)})},T.prototype.walk=function(F,I){this.__walk(this,this.root,F,I)},T.prototype.__walk=function(F,I,O,j){var s=I.numberActives,D=0;if(I.isLeaf){for(D=0;D<I.numberActives;D++)O(I.keys[D]);return j()}ye.whilst(function(){return D<s},function(q){F._diskRead(I.children[D],function(Z){F.__walk(F,Z,O,function(){F._diskRead(I.keys[D],function(H){O(H),D++,q()})})})},function(){F._diskRead(I.children[s],function(q){F.__walk(F,q,O,function(){j()})})})},T.prototype.walkNodes=function(F){this.__walkNodes(this,root,F,function(){})},T.prototype.__walkNodes=function(F,I,O,j){if(I.isLeaf)return O(I),j();O(I);var s=I.numberActives,D=0;ye.whilst(function(){return D<s},function(q){F._diskRead(I.children[D],function(Z){F.__walkNodes(F,Z,O,function(){D++,q()})})},function(){F._diskRead(I.children[s],function(q){F.__walkNodes(F,q,O,function(){})})})},T.prototype._splitChild=function(F,I,O,j){var s=this._allocateNode();s.isLeaf=O.isLeaf,s.level=O.level,s.numberActives=this.order-1;var D=O.keys[this.order-1];O.keys[this.order-1]=null;for(var q=0;q<this.order-1;q++)s.keys[q]=O.keys[q+this.order],O.keys[q+this.order]=null,O.isLeaf||(s.children[q]=O.children[q+this.order],O.children[q+this.order]=null);for(O.isLeaf||(s.children[q]=O.children[q+this.order],O.children[q+this.order]=null),O.numberActives=this.order-1,q=F.numberActives+1;q>I+1;q--)F.children[q]=F.children[q-1];for(F.children[I+1]=s,q=F.numberActives;q>I;q--)F.keys[q]=F.keys[q-1];F.keys[I]=D,F.numberActives++;var Z=this;this._diskWrite(s,function(H){Z._diskWrite(F,function(ce){ce.children[I+1]=H,Z._diskWrite(O,function(le){return j(ce)})})})},T.prototype.insert=function(F,I,O){if(this.root.numberActives===2*this.order-1){var j=this._allocateNode();j.isLeaf=!1,j.level=this.root.level+1,j.numberActives=0,j.children[0]=this.root;var s=this;this._splitChild(j,0,this.root,function(D){j=D,s.root=j,s._updateRootNode(j,function(q){s._insertNonFull(q,F,I,O)})})}else this._insertNonFull(this.root,F,I,O)},T.prototype._insertNonFull=function(F,I,O,j){this.__insertNonFull(this,F,F.numberActives-1,I,O,j)},T.prototype.__insertNonFull=function(F,I,O,j,s,D){if(I.isLeaf){for(;0<=O&&-1===F.comparator(j,I.keys[O].key);)I.keys[O+1]=I.keys[O],O--;0<=O&&0===F.comparator(j,I.keys[O].key)?I.keys[O]={key:j,data:s}:(I.keys[O+1]={key:j,data:s},I.numberActives++),F._diskWrite(I,function(q){return D(q)})}else{for(;0<=O&&-1===F.comparator(j,I.keys[O].key);)O--;O++,F._diskRead(I.children[O],function(q){q.numberActives===2*F.order-1?F._splitChild(I,O,q,function(){1===F.comparator(j,I.keys[O].key)&&O++,F._diskRead(I.children[O],function(Z){O=Z.numberActives-1,F.__insertNonFull(F,Z,O,j,s,D)})}):F._diskRead(I.children[O],function(Z){O=Z.numberActives-1,F.__insertNonFull(F,Z,O,j,s,D)})})}},T.prototype.delete=function(F,I){T.prototype.__deleteSearchNode(this,F,this.root,I)},T.prototype.__deleteSearchNode=function(F,I,O,j){var s=0;if(0===O.numberActives)return j(!1);for(;s<O.numberActives&&1===F.comparator(I,O.keys[s].key);)s++;var D=s;return s<O.numberActives&&0===F.comparator(I,O.keys[s].key)?F.__deleteNodeFound(F,D,I,O,j):!0===O.isLeaf?j(!1):void F._diskRead(O.children[s],function(q){if(null===q)return j(!1);var Z=!1,H=!1,ce=null,le=null;D===O.numberActives?(H=!0,le=O.children[D-1],ce=O.children[D-1]):0===D?(Z=!0,ce=O.children[1],le=O.children[1]):(le=O.children[D-1],ce=O.children[D+1]),F._diskRead(le,function(ee){F._diskRead(ce,function(se){!0===H&&(se=null),!0===Z&&(ee=null),q.numberActives===F.order-1&&null!=O?null!=se&&se.numberActives>F.order-1?F._moveKey(O,s,-1,function(de){F.__deleteSearchNode(F,I,q,j)}):null!=ee&&ee.numberActives>F.order-1?F._moveKey(O,s,1,function(de){F.__deleteSearchNode(F,I,q,j)}):null!=ee&&ee.numberActives===F.order-1?F._mergeSiblings(O,s,-1,function(de){F.__deleteSearchNode(F,I,de,j)}):null!=se&&se.numberActives===F.order-1&&F._mergeSiblings(O,s,1,function(de){F.__deleteSearchNode(F,I,de,j)}):F.__deleteSearchNode(F,I,q,j)})})})},T.prototype.__deleteNodeFound=function(F,I,O,j,s){if(j.isLeaf&&j.numberActives>F.order-1||j.isLeaf&&j===F.root)return F._deleteKeyFromNode(j,I,function(){s(!0)}),!0;!1===j.isLeaf&&F._diskRead(j.children[I],function(D){D.numberActives>F.order-1?F._getMaxKeyPos(F,D,function(q){O=q.node.keys[q.index],j.keys[I]=O,F._diskWrite(j,function(Z){Z=D,O=O.key,F.__deleteSearchNode(F,O,Z,s)})}):F._diskRead(j.children[I+1],function(q){q.numberActives>F.order-1?F._getMinKeyPos(F,q,function(Z){O=Z.node.keys[Z.index],j.keys[I]=O,F._diskWrite(j,function(H){H=q,O=O.key,F.__deleteSearchNode(F,O,H,s)})}):D.numberActives===F.order-1&&q.numberActives===F.order-1&&F._mergeNodes(D,j.keys[I],q,function(Z){j.children[I]=Z;for(var H=++I;H<j.numberActives;H++)j.children[H]=j.children[H+1],j.keys[H-1]=j.keys[H];j.children[H]=null,j.keys[H-1]=null,j.numberActives--,0===j.numberActives&&F.root===j&&(F.root=Z),F._diskWrite(j,function(ce){F.__deleteSearchNode(F,O,Z,s)})})})}),j.isLeaf&&j.numberActives>F.order-1&&F._deleteKeyFromNode(j,I,function(D){F.__deleteSearchNode(F,O,D,s)})},T.prototype._moveKey=function(F,I,O,j){1===O&&I--;var s=this;s._diskRead(F.children[I],function(D){s._diskRead(F.children[I+1],function(q){if(-1==O){D.keys[D.numberActives]=F.keys[I],D.children[D.numberActives+1]=q.children[0],q.children[0]=null,D.numberActives++,F.keys[I]=q.keys[0];for(var Z=1;Z<q.numberActives;Z++)q.keys[Z-1]=q.keys[Z],q.children[Z-1]=q.children[Z];q.children[q.numberActives-1]=q.children[q.numberActives],q.numberActives--}else{for(q.children[q.numberActives+1]=q.children[q.numberActives],Z=q.numberActives;0<Z;Z--)q.children[Z]=q.children[Z-1],q.keys[Z]=q.keys[Z-1];q.keys[0]=null,q.children[0]=null,q.children[0]=D.children[D.numberActives],q.keys[0]=F.keys[I],q.numberActives++,D.children[D.numberActives]=null,F.keys[I]=D.keys[D.numberActives-1],D.keys[D.numberActives-1]=null,D.numberActives--}s._diskWrite(D,function(H){s._diskWrite(q,function(ce){s._diskWrite(F,function(le){return j(le)})})})})})},T.prototype._mergeSiblings=function(F,I,O,j){var s,D,q;I===F.numberActives?(I--,O=F.children[F.numberActives-1],q=F.children[F.numberActives]):(O=F.children[I],q=F.children[I+1]);var Z=this;Z._diskRead(O,function(H){Z._diskRead(q,function(ce){var le=Z._allocateNode();for(le.isLeaf=H.isLeaf,le.level=H.level,D=0;D<Z.order-1;D++)le.keys[D]=H.keys[D],le.children[D]=H.children[D];for(le.keys[Z.order-1]=F.keys[I],le.children[Z.order-1]=H.children[Z.order-1],D=0;D<Z.order-1;D++)le.keys[D+Z.order]=ce.keys[D],le.children[D+Z.order]=ce.children[D];for(le.children[2*Z.order-1]=ce.children[Z.order-1],F.children[I]=le,D=I;D<F.numberActives;D++)F.keys[D]=F.keys[D+1],F.children[D+1]=F.children[D+2];for(le.numberActives=H.numberActives+ce.numberActives+1,F.numberActives--,s=F.numberActives;s<2*Z.order-1;s++)F.keys[s]=null;0===F.numberActives&&Z.root===F&&(Z.root=le,le.isLeaf=!le.level),Z._diskWrite(le,function(ee){Z._diskWrite(F,function(se){Z._diskDelete(H,function(){Z._diskDelete(ce,function(){if(Z.root!==ee)return j(ee);Z._updateRootNode(Z.root,function(){return j(ee)})})})})})})})},T.prototype._deleteKeyFromNode=function(F,I,O){var j=2*this.order-1;if(F.numberActives<j&&(j=F.numberActives),!1===F.isLeaf)return!1;for(;I<j-1;I++)F.keys[I]=F.keys[I+1];F.keys.pop(),F.numberActives--,this._diskWrite(F,function(s){return O(s)})},T.prototype._mergeNodes=function(F,I,O,j){var s,D;for((s=this._allocateNode()).isLeaf=!0,D=0;D<F.numberActives;D++)s.keys[D]=F.keys[D],s.children[D]=F.children[D];for(s.children[F.numberActives]=F.children[F.numberActives],s.keys[F.numberActives]=I,D=0;D<O.numberActives;D++)s.keys[D+F.numberActives+1]=O.keys[D],s.children[D+F.numberActives+1]=O.children[D];s.children[2*this.order-1]=O.children[O.numberActives],s.numberActives=F.numberActives+O.numberActives+1,s.isLeaf=F.isLeaf,s.level=F.level;var q=this;this._diskWrite(s,function(Z){q._diskDelete(F,function(){q._diskDelete(O,function(){return j(Z)})})})},T.prototype.audit=function(F){var I=[],O=[],D=this,j=function(q){for(var Z=0;Z<O.length;Z++)if(0===D.comparator(O[Z],q)){var H=" !!! duplicated key "+q;!0===F&&console.log(H),I.push(H)}},s=null;D=this;return this.walkNodes(function(q){!0===F&&(console.log("--- Node at "+q.level+" level"),console.log(" - leaf? "+q.isLeaf),console.log(" - num actives? "+q.numberActives),console.log(" - keys: "));for(var Z=q.numberActives;Z<q.keys.length;Z++)null!=q.keys[Z]&&!0===F&&(console.log(" * warning : redundant key data"),I.push(" * warning : redundant key data"));for(Z=q.numberActives+1;Z<q.children.length;Z++)null!=q.children[Z]&&!0===F&&(console.log(" * warning : redundant children data"),I.push(" * warning : redundant key data"));if(!1===q.isLeaf)for(Z=0;Z<q.numberActives;Z++){var H=this._diskRead(q.children[Z]).keys[this._diskRead(q.children[Z]).numberActives-1].key,ce=this._diskRead(q.children[Z+1]).keys[0].key;if(!0===F&&console.log("   "+q.keys[Z].key+"("+H+","+ce+")"),-1===D.comparator(q.keys[Z].key,H)){var le=" !!! value max left "+H+" > key "+q.keys[Z].key;!0===F&&console.log(le),I.push(le)}1===D.comparator(q.keys[Z].key,ce)&&(le=" !!! value min right "+ce+" < key "+q.keys[Z].key,!0===F&&console.log(le),I.push(le)),j(q.keys[Z].key),O.push(q.keys[Z].key)}else for(null===s?s=q.level:s!=q.level&&(le=" !!! Leaf node with wrong level value",!0===F&&console.log(le),I.push(le)),Z=0;Z<q.numberActives;Z++)!0===F&&console.log(" "+q.keys[Z].key),j(q.keys[Z].key),O.push(q.keys[Z].key);q!=D.root&&(q.numberActives>2*D.order-1&&(!0===F&&(le=" !!!! MAX num keys restriction violated "),console.log(le),I.push(le)),q.numberActives<D.order-1&&(!0===F&&(le=" !!!! MIN num keys restriction violated "),console.log(le),I.push(le)))}),I},T.prototype._getMaxKeyPos=function(F,I,O){var j={};return null===I?O(null):!0===I.isLeaf?(j.node=I,j.index=I.numberActives-1,O(j)):(j.node=I,j.index=I.numberActives-1,void F._diskRead(I.children[I.numberActives],function(s){return F._getMaxKeyPos(F,s,O)}))},T.prototype._getMinKeyPos=function(F,I,O){var j={};if(null===I&&O(null),!0===I.isLeaf)return j.node=I,j.index=0,O(j);j.node=I,j.index=0,F._diskRead(I.children[0],function(s){return F._getMinKeyPos(F,s,O)})};var E=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};Ee.exports={Tree:T,Node:E}},{"./utils":57}],41:[function(Ce,Ee,Be){var ye=Ce("./query_engine").QueryEngine,M=Ce("./quad_backend").QuadBackend,T=Ce("./persistent_quad_backend").PersistentQuadBackend,E=Ce("./lexicon").Lexicon,F=Ce("./persistent_lexicon").PersistentLexicon,I=Ce("./rdf_model"),O=Ce("./utils");Store=function(j,s){var D=null,q=null;if(0==arguments.length)q={};else if(1==arguments.length)q={},D=j;else{if(!(1<arguments.length))throw"An optional argument map and a callback must be provided";q=j,D=s}null==q.treeOrder&&(q.treeOrder=15);var Z=E,H=M;!0===q.persistent&&(Z=F,H=T),this.functionMap={};var ce=this;this.customFns={},new Z(function(le){var ee=function(){new H(q,function(se){var de=function(){q.backend=se,q.lexicon=le,ce.engine=new ye(q),D(null,ce)};q.overwrite?se.clear(de):de()})};!0===q.overwrite?le.clear(ee):ee()},q.name)},Store.prototype.rdf=I.rdf,Store.prototype.rdf.api=I,Store.prototype.registerCustomFunction=function(j,s){this.customFns[j]=s,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var j,s;1===arguments.length?(j=arguments[0],s=function(){}):2===arguments.length&&(j=arguments[0],s=arguments[1]),this.engine.execute(j,s)}},Store.prototype.executeWithEnvironment=function(){var j,s,D;if(3===arguments.length){j=arguments[0];var q=function(){};s=arguments[1],D=arguments[2]}else 4===arguments.length&&(j=arguments[0],q=arguments[3],s=arguments[1],D=arguments[2]);s=O.map(s,function(Z){return{token:"uri",value:Z}}),D=O.map(D,function(Z){return{token:"uri",value:Z}}),this.engine.execute(j,q,s,D)},Store.prototype.graph=function(){var j=null,s=null;if(1===arguments.length)s=arguments[0]||function(){},j=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";s=arguments[1]||function(){},j=arguments[0]}null!=this.rdf.resolve(j)&&(j=this.rdf.resolve(j)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+j+"> { ?s ?p ?o } }",s)},Store.prototype.node=function(){var j=null,s=null,D=null;if(2===arguments.length)D=arguments[0],s=arguments[1]||function(){},j=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";D=arguments[0],j=arguments[1],s=arguments[2]||function(){}}null!=this.rdf.resolve(j)&&(j=this.rdf.resolve(j)),null!=this.rdf.resolve(D)&&(D=this.rdf.resolve(D)),this.engine.execute("CONSTRUCT { <"+D+"> ?p ?o } WHERE { GRAPH <"+j+"> { <"+D+"> ?p ?o } }",s)},Store.prototype.startObservingNode=function(){var j,s,D;2===arguments.length?(j=arguments[0],D=arguments[1],this.engine.callbacksBackend.observeNode(j,D,function(){})):3===arguments.length&&(j=arguments[0],s=arguments[1],D=arguments[2],this.engine.callbacksBackend.observeNode(j,s,D,function(){}))},Store.prototype.stopObservingNode=function(j){this.engine.callbacksBackend.stopObservingNode(j)},Store.prototype.startObservingQuery=function(j,s,D){null!=D?this.engine.callbacksBackend.observeQuery(j,s,D):this.engine.callbacksBackend.observeQuery(j,s,function(){})},Store.prototype.stopObservingQuery=function(j){this.engine.callbacksBackend.stopObservingQuery(j)},Store.prototype.subscribe=function(j,s,D,q,Z){var H=this,ce=function(le,ee){var se=[],de={blanks:{},outCache:{}},he=[];O.each(ee,function(V){var W=I.buildRDFResource(V.subject,he,H.engine,de),Y=I.buildRDFResource(V.predicate,he,H.engine,de);V=I.buildRDFResource(V.object,he,H.engine,de),null!=W&&null!=Y&&null!=V&&(V=new I.Triple(W,Y,V),se.push(V))}),Z(le,se)};this.functionMap[Z]=ce,this.engine.callbacksBackend.subscribe(j,s,D,q,ce,function(){})},Store.prototype.unsubscribe=function(j){this.engine.callbacksBackend.unsubscribe(this.functionMap[j]),delete this.functionMap[j]},Store.prototype.setPrefix=function(j,s){this.rdf.setPrefix(j,s)},Store.prototype.setDefaultPrefix=function(j){this.rdf.setDefaultPrefix(j)},Store.prototype.insert=function(){var j,s,D;if(1===arguments.length)s=arguments[0],D=function(){};else if(2===arguments.length)s=arguments[0],D=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";s=arguments[0],j=this.rdf.createNamedNode(arguments[1]),D=arguments[2]||function(){}}var q="",Z=this;s.forEach(function(H){q=q+Z._nodeToQuery(H.subject)+Z._nodeToQuery(H.predicate)+Z._nodeToQuery(H.object)+"."}),q=null!=j?"INSERT DATA { GRAPH "+this._nodeToQuery(j)+" { "+q+" } }":"INSERT DATA { "+q+" }",this.engine.execute(q,D)},Store.prototype._nodeToQuery=function(j){if("NamedNode"===j.interfaceName){var s=this.rdf.resolve(j.valueOf());return null!=s?"<"+s+">":"<"+j.valueOf()+">"}return j.toString()},Store.prototype.delete=function(){var j,s,D;if(1===arguments.length)s=arguments[0],D=function(){};else if(2===arguments.length)s=arguments[0],D=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";s=arguments[0],j=this.rdf.createNamedNode(arguments[1]),D=arguments[2]||function(){}}var q="",Z=this;s.forEach(function(H){q=q+Z._nodeToQuery(H.subject)+Z._nodeToQuery(H.predicate)+Z._nodeToQuery(H.object)+"."}),q=null!=j?"DELETE DATA { GRAPH "+this._nodeToQuery(j)+" { "+q+" } }":"DELETE DATA { "+q+" }",this.engine.execute(q,D)},Store.prototype.clear=function(){var j,s;if(0===arguments.length)j=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),s=function(){};else if(1===arguments.length)j=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),s=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";j=this.rdf.createNamedNode(arguments[0]),s=arguments[1]||function(){}}j="CLEAR GRAPH "+this._nodeToQuery(j),this.engine.execute(j,s)},Store.prototype.setBatchLoadEvents=function(j){this.engine.eventsOnBatchLoad=j},Store.prototype.registerDefaultNamespace=function(j,s){this.rdf.prefixes.set(j,s),this.engine.registerDefaultNamespace(j,s)},Store.prototype.registerDefaultProfileNamespaces=function(){var s,j=this.rdf.prefixes.values();for(s in j)this.registerDefaultNamespace(s,j[s])},Store.prototype.load=function(){var j,s,D,q,Z={};if(3===arguments.length)D=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),j=arguments[0],s=arguments[1],q=arguments[2]||function(){};else if(4===arguments.length)j=arguments[0],s=arguments[1],"string"==typeof(Z=arguments[2])?(D=this.rdf.createNamedNode(Z),Z={}):(D=this.rdf.createNamedNode(Z.graph||this.engine.lexicon.defaultGraphUri),delete Z.graph),q=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===j)s=this.rdf.createNamedNode(s),this.engine.execute("LOAD <"+s.valueOf()+"> INTO GRAPH <"+D.valueOf()+">",q);else{var H=this,ce=this.engine.rdfLoader.parsers[j];if(!ce)return q(Error("Cannot find parser for the provided media type:"+j));j=[ce,{token:"uri",value:D.valueOf()},s,Z,function(le,ee){le?q(le,ee):H.engine.batchLoad(ee,function(se){null!=se?q(null,se):q(Error("Erro batch-loading triples."))})}],s&&"string"==typeof s&&0===s.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,j):this.engine.rdfLoader.tryToParse.apply(null,j)}},Store.prototype.registerParser=function(j,s){this.engine.rdfLoader.registerParser(j,s)},Store.prototype.registeredGraphs=function(j){this.engine.lexicon.registeredGraphs(!0,function(s){s=O.map(s,function(D){return new I.NamedNode(D)}),j(null,s)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(j){NetworkTransport=j},Store.prototype.close=function(j){null==j&&(j=function(){}),this.engine.close?this.engine.close(j):j()},Store.VERSION="0.9.17",Store.yieldFrequency=function(j){O.yieldFrequency(j)},Ee.exports.Store=Store,Ee.exports.create=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store},Ee.exports.connect=function(){(1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(Error("Store#connect is not supported in the 0.9.X series of the library"))}},{"./lexicon":44,"./persistent_lexicon":47,"./persistent_quad_backend":48,"./quad_backend":49,"./query_engine":51,"./rdf_model":55,"./utils":57}],42:[function(Ce,Ee,Be){var ye=Ce("./utils"),M=Ce("./utils");Ce("./quad_index");var T=Ce("./quad_index").Pattern,E=Ce("./rdf_model"),F=Ce("./abstract_query_tree").AbstractQueryTree;Callbacks={ANYTHING:{token:"var",value:"_"},added:"added",deleted:"deleted",eventsFlushed:"eventsFlushed",CallbacksBackend:function(I){for(this.aqt=new F,this.engine=I,this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices="SPOG GP OGS POG GSP OS".split(" "),this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={},I=0;I<this.indices.length;I++){var O=this.indices[I];this.indexMap[O]={},this.queriesIndexMap[O]={}}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(I,O){this.updateInProgress[I].push(O)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(I){if(!0!==this.ongoingModification){var O=this;if(null!=this.updateInProgress){var j=O.updateInProgress;O.updateInProgress=null,this.sendNotification(Callbacks.deleted,j[Callbacks.deleted],function(){O.sendNotification(Callbacks.added,j[Callbacks.added],function(){O.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){O.dispatchQueries(function(){I(!0)})})})})}else I(!0)}else I(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(I,O,j){for(var s={},D=0;D<O.length;D++){var Z,q=O[D];for(Z in this.indexMap){var H=this.indexMap[Z],ce=this.componentOrders[Z];this._searchCallbacksInIndex(H,ce,I,q,s),0!=this.pendingQueries.length&&(H=this.queriesIndexMap[Z],this._searchQueriesInIndex(H,ce,q))}}this.dispatchNotifications(s),null!=j&&j(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(I,O,j){for(var s=this.emptyNotificationsMap[I]||[],D=0;D<s.length;D++)s[D](I,O);j()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(I){for(var O in I){var j=this.callbacksMap[O],s=I[O][Callbacks.deleted];if(null!=s)try{j(Callbacks.deleted,s)}catch(q){}for(var D in I[O])if(D!=Callbacks.deleted)try{j(D,I[O][D])}catch(q){}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(I,O,j,s,D){var q=s[1];s=s[0];for(var Z=0;Z<O.length+1;Z++){for(var H=I._||[],ce=[],le=0;le<H.length;le++){var ee=H[le];null!=this.callbacksMap[ee]&&(D[ee]=D[ee]||{},D[ee][j]=D[ee][j]||[],D[ee][j].push(s),ce.push(ee))}if(I._=ce,null==I[""+q[H=O[Z]]])break;I=I[""+q[H]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(I,O){var j=this.emptyNotificationsMap[I]||[];j.push(O),this.emptyNotificationsMap[I]=j},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(I,O){var j=this.emptyNotificationsMap[I];null!=j&&(j=ye.reject(j,function(s){return s===O})),this.emptyNotificationsMap[I]=j},Callbacks.CallbacksBackend.prototype.subscribe=function(I,O,j,s,D,q){I=this._tokenizeComponents(I,O,j,s),O={blanks:{},outCache:{}},this.engine.registerNsInEnvironment(null,O);var Z=this;this.engine.normalizeQuad(I,O,!0,function(H){for(var ce=new T(H),le=Z._indexForPattern(ce),ee=(ce=Z.componentOrders[le],le=Z.indexMap[le],0);ee<ce.length;ee++){var se=H[ce[ee]];if("_"===se){null==le._&&(le._=[]),Z.callbackCounter++,le._.push(Z.callbackCounter),Z.callbacksMap[Z.callbackCounter]=D,Z.callbacksInverseMap[D]=Z.callbackCounter;break}ee===ce.length-1?(le[se]=le[se]||{_:[]},Z.callbackCounter++,le[se]._.push(Z.callbackCounter),Z.callbacksMap[Z.callbackCounter]=D,Z.callbacksInverseMap[D]=Z.callbackCounter):(le[se]=le[se]||{},le=le[se])}null!=q&&q(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(I){var O=this.callbacksInverseMap[I];null!=O&&(delete this.callbacksInverseMap[I],delete this.callbacksMap[O])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(I,O,j,s){var D={};return null==I?D.subject=Callbacks.ANYTHING:0==I.indexOf("_:")?D.subject={token:"blank",value:I}:D.subject={token:"uri",value:I},D.predicate=null==O?Callbacks.ANYTHING:{token:"uri",value:O},D.object=null==j?Callbacks.ANYTHING:{token:"uri",value:j},D.graph=null==s?Callbacks.ANYTHING:{token:"uri",value:s},D},Callbacks.CallbacksBackend.prototype._indexForPattern=function(I){I=I.indexKey;for(var O=this.indices,j=0;j<O.length;j++)for(var s=O[j],D=this.componentOrders[s],q=0;q<D.length&&!1!==ye.include(I,D[q]);q++)if(q==I.length-1)return s;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var I,O,j,s;4===arguments.length?(I=arguments[0],O=arguments[1],j=arguments[2],s=arguments[3]):(I=arguments[0],O=this.engine.lexicon.defaultGraphUri,j=arguments[1],s=arguments[2]),O="CONSTRUCT { <"+I+"> ?p ?o } WHERE { GRAPH <"+O+"> { <"+I+"> ?p ?o } }";var D=this,q={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,q);var Z=[];this.engine.execute(O,function(H,ce){if(H)s&&s(!1);else{var le=!1,ee=function(se,de){if("eventsFlushed"===se&&le){le=!1;try{j(ce)}catch(ge){}}else if("eventsFlushed"!==se){le=!0;for(var he=0;he<de.length;he++){var Y=de[he],V=E.buildRDFResource(Y.subject,Z,D.engine,q),W=E.buildRDFResource(Y.predicate,Z,D.engine,q);Y=E.buildRDFResource(Y.object,Z,D.engine,q);null!=V&&null!=W&&null!=Y&&(Y=new E.Triple(V,W,Y),se===Callbacks.added?ce.add(Y):se===Callbacks.deleted&&ce.remove(Y))}}};D.observersMap[j]=ee,D.subscribeEmpty(Callbacks.eventsFlushed,ee),D.subscribe(I,null,null,null,ee,function(){try{j(ce)}catch(se){}s&&s(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(I){return!!(I=this.observersMap[I])&&(this.unsubscribe(I),this.unsubscribeEmpty(Callbacks.eventsFlushed,I),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(I,O,j){var s=this.aqt.parseQueryString(I),D=(s=this.aqt.parseSelect(s.units[0]),s=this.aqt.collectBasicTriples(s),this),q={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,q);var Z=this.queryCounter;this.queryCounter++,this.queriesMap[Z]=I,this.queriesInverseMap[I]=Z,this.queriesList.push(Z),this.queriesCallbacksMap[Z]=O,M.eachSeries(s,function(H,ce){null==H.graph&&(H.graph=D.engine.lexicon.defaultGraphUriTerm),D.engine.normalizeQuad(H,q,!0,function(le){for(var ee=new T(le),se=D._indexForPattern(ee),de=(ee=D.componentOrders[se],se=D.queriesIndexMap[se],0);de<ee.length;de++){var he=le[ee[de]];if("string"==typeof he){null==se._&&(se._=[]),se._.push(Z);break}de===ee.length-1?(se[he]=se[he]||{_:[]},se[he]._.push(Z)):(se[he]=se[he]||{},se=se[he])}ce()})},function(){D.engine.execute(I,function(H,ce){H?console.log("ERROR in query callback "+ce):O(ce)}),null!=j&&j()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(I){var O=this.queriesInverseMap[I];null!=O&&(delete this.queriesInverseMap[I],delete this.queriesMap[O],this.queriesList=ye.reject(this.queriesList,function(j){return j===O}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(I,O,j){var s=j[1];for(j=j[0],j=0;j<O.length+1;j++){for(var D=I._||[],q=[],Z=0;Z<D.length;Z++){var H=D[Z];ye.include(this.pendingQueries,H)&&(ye.remove(this.pendingQueries,function(ce){return ce===H}),this.matchedQueries.push(H)),null!=this.queriesMap[H]&&q.push(H)}if(I._=q,null==I[""+s[D=O[j]]])break;I=I[""+s[D]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(I){var j,s,O=this,D={};M.eachSeries(this.matchedQueries,function(q,Z){null==D[q]?(D[q]=!0,j=O.queriesMap[q],s=O.queriesCallbacksMap[q],O.engine.execute(j,function(H,ce){if(!H)try{s(ce)}catch(le){}Z()})):Z()},function(){I()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,Ee.exports=Callbacks},{"./abstract_query_tree":39,"./quad_index":50,"./rdf_model":55,"./utils":57}],43:[function(Ce,Ee,Be){var ye=Ce("jsonld");Be.JSONLDParser={},(Ce=Be.JSONLDParser).parser={async:!0,parse:function(T,E,F,I){try{"string"==typeof T&&(T=JSON.parse(T)),function(T,E,F){var I=null;ye.normalize(T,{},function(O,j){if(O)F(O);else{var q,s=function(le){return"blank node"===le.type?{blank:le.value}:"IRI"===le.type?{token:"uri",value:le.value}:"literal"===le.type?null!=le.language?{literal:'"'+le.value+'"@'+le.language}:null!==le.datatype?{literal:'"'+le.value+'"^^<'+le.datatype+">"}:{literal:'"'+le.value+'"'}:void 0};for(q in I=[],j)for(var Z=j[q],H=0;H<Z.length;H++){var ce=Z[H];le=ce.subject,ee=ce.predicate,se=ce.object,I.push({subject:s(le),predicate:s(ee),object:s(se),graph:E})}F(null,I)}var le,ee,se})}(T,E,I)}catch(O){I(O)}}},Ee.exports={JSONLDParser:Ce}},{jsonld:26}],44:[function(Ce,Ee,Be){var ye=Ce("./utils"),M=Ce("./btree").Tree;Lexicon=function(T){var E=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,ye.seq(function(F){new M(2,function(I){E.uris=I,F()})},function(F){new M(2,function(I){E.literals=I,F()})},function(F){new M(2,function(I){E.knownGraphs=I,F()})},function(F){new M(2,function(I){E.oidUris=I,F()})},function(F){new M(2,function(I){E.oidLiterals=I,F()})},function(F){new M(2,function(I){E.oidBlanks=I,F()})})(function(){null!=T&&T(E)})},Lexicon.prototype.registerGraph=function(T,E,F){T!=this.defaultGraphOid?this.knownGraphs.insert(T,E,function(){F()}):F()},Lexicon.prototype.registeredGraphs=function(T,E){var F=[];this.knownGraphs.walk(function(I){!0===T?F.push(I.data):F.push(I.key)},function(){E(F)})},Lexicon.prototype.registerUri=function(T,E){var F=this;T===this.defaultGraphUri?E(this.defaultGraphOid):this.uris.search(T,function(I){if(null==I){var O=F.oidCounter,j="u"+O;F.oidCounter++,ye.seq(function(s){F.uris.insert(T,[O,0],function(){s()})},function(s){F.oidUris.insert(j,T,function(){s()})})(function(){E(O)})}else O=I[0],I[1]+=1,E(O)})},Lexicon.prototype.resolveUri=function(T,E){T===this.defaultGraphUri?E(this.defaultGraphOid):this.uris.search(T,function(F){E(null!=F?F[0]:-1)})},Lexicon.prototype.resolveUriCost=function(T,E){T===this.defaultGraphUri?E(0):this.uris.search(T,function(F){E(null!=F?F[1]:-1)})},Lexicon.prototype.registerBlank=function(T){var E=this.oidCounter;this.oidCounter++;var F=""+E;this.oidBlanks.insert(F,F,function(){T(E)})},Lexicon.prototype.resolveBlank=function(T,E){var F=this;this.oidBlanks.search(T,function(I){null!=I?E(I):(I=F.oidCounter,this.oidCounter++,E(""+I))})},Lexicon.prototype.resolveBlankCost=function(T,E){E(0)},Lexicon.prototype.registerLiteral=function(T,E){var F=this;this.literals.search(T,function(I){if(null==I){var O=F.oidCounter,j="l"+O;F.oidCounter++,ye.seq(function(s){F.literals.insert(T,[O,0],function(){s()})},function(s){F.oidLiterals.insert(j,T,function(){s()})})(function(){E(O)})}else O=I[0],I[1]+=1,E(O)})},Lexicon.prototype.resolveLiteral=function(T,E){this.literals.search(T,function(F){E(null!=F?F[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(T,E){this.literals.search(T,function(F){E(null!=F?F[1]:-1)})},Lexicon.prototype.parseLiteral=function(T){var E=T.lastIndexOf("@");if(-1!=E&&'"'===T[E-1]&&null!=T.substring(E,T.length).match(/^@[a-zA-Z\-]+$/g)){var F=T.substring(1,E-1);return{token:"literal",value:F,lang:T=T.substring(E+1,T.length)}}return-1!=(E=T.lastIndexOf("^^"))&&'"'===T[E-1]&&"<"===T[E+2]&&">"===T[T.length-1]?{token:"literal",value:F=T.substring(1,E-1),type:T=T.substring(E+3,T.length-1)}:{token:"literal",value:F=T.substring(1,T.length-1)}},Lexicon.prototype.parseUri=function(T){return{token:"uri",value:T}},Lexicon.prototype.retrieve=function(T,E){var F=this;T===this.defaultGraphOid?E({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):ye.seq(function(I,O){F.oidUris.search("u"+T,function(j){O(null,null!=j?F.parseUri(j):null)})},function(I,O){null==I?F.oidLiterals.search("l"+T,function(j){O(null,null!=j?F.parseLiteral(j):null)}):O(null,I)},function(I,O){null==I?F.oidBlanks.search(""+T,function(j){O(null,null!=j?{token:"blank",value:"_:"+T}:null)}):O(null,I)})(null,function(I,O){E(O)})},Lexicon.prototype.clear=function(T){var E=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,ye.seq(function(F){new M(2,function(I){E.uris=I,F()})},function(F){new M(2,function(I){E.literals=I,F()})},function(F){new M(2,function(I){E.knownGraphs=I,F()})},function(F){new M(2,function(I){E.oidUris=I,F()})},function(F){new M(2,function(I){E.oidLiterals=I,F()})},function(F){new M(2,function(I){E.oidBlanks=I,F()})})(function(){null!=T&&T()})},Lexicon.prototype.unregister=function(T,E,F){var I=this;ye.seq(function(O){I._unregisterTerm(T.subject.token,E.subject,O)},function(O){I._unregisterTerm(T.predicate.token,E.predicate,O)},function(O){I._unregisterTerm(T.object.token,E.object,O)},function(O){null!=T.graph?I._unregisterTerm(T.graph.token,E.graph,O):O()})(function(){F(!0)})},Lexicon.prototype._unregisterTerm=function(T,E,F){var I=this;if("uri"===T)if(E!=this.defaultGraphOid){var O="u"+E;I.oidUris.search(O,function(j){I.uris.search(j,function(s){var D=s[1];""+s[0]==""+E?0===D?ye.seq(function(q){I.oidUris.delete(O,function(){q()})},function(q){I.uris.delete(j,function(){q()})},function(q){I.knownGraphs.delete(E,function(){q()})})(function(){F()}):I.uris.insert(j,[E,D-1],function(){F()}):F()})})}else F();else"literal"===T?(this.oidCounter++,O="l"+E,I.oidLiterals.search(O,function(j){I.literals.search(j,function(s){var D=s[1];""+s[0]==""+E?0===D?ye.seq(function(q){I.oidLiterals.delete(O,function(){q()})},function(q){I.literals.delete(j,function(){q()})})(function(){F()}):I.literals.insert(j,[E,D-1],function(){F()}):F()})})):"blank"===T?I.oidBlanks.delete(""+E,function(){F()}):F()},Ee.exports={Lexicon}},{"./btree":40,"./utils":57}],45:[function(Ce,Ee,Be){if(!Ce("./utils").isWorker()){var ye=Ce("http"),M=Ce("https"),T=Ce("url");NetworkTransport={load:function(E,F,I,O){var j=null==O?3:O;O={host:(E=T.parse(E,!0,!0)).host,hostname:E.hostname,method:"GET",path:E.path,headers:{host:E.hostname,Accept:F}};var s=null;"http:"===E.protocol?(O.port=E.port||80,s=ye):"https:"===E.protocol&&(O.port=E.port||443,s=M),(E=s.request(O,function(D){var q=D.headers,Z="";"2"==(""+D.statusCode)[0]?(D.on("end",function(){I(null,{headers:q,data:Z})}),D.on("data",function(H){Z+=H})):"3"==(""+D.statusCode)[0]?0==j?I(Error("Too many redirections")):null!=(D=q.Location||q.location)?NetworkTransport.load(D,F,I,j-1):I(Error("Redirection without location header")):I(Error("HTTP error: "+D.statusCode))})).on("error",I),E.end()}},Ee.exports={NetworkTransport}}},{"./utils":57,http:7,https:22,url:36}],46:[function(Ce,Ee,Be){Ee.exports=function(){function ye(M,T,E,F){this.message=M,this.expected=T,this.found=E,this.location=F,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,ye)}return function(M,T){function E(){this.constructor=M}E.prototype=T.prototype,M.prototype=new E}(ye,Error),ye.buildMessage=function(M,T){function E(j){return j.charCodeAt(0).toString(16).toUpperCase()}function F(j){return j.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(s){return"\\x0"+E(s)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(s){return"\\x"+E(s)})}function I(j){return j.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(s){return"\\x0"+E(s)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(s){return"\\x"+E(s)})}var O={literal:function(j){return'"'+F(j.text)+'"'},class:function(j){var D,s="";for(D=0;D<j.parts.length;D++)s+=j.parts[D]instanceof Array?I(j.parts[D][0])+"-"+I(j.parts[D][1]):I(j.parts[D]);return"["+(j.inverted?"^":"")+s+"]"},any:function(j){return"any character"},end:function(j){return"end of input"},other:function(j){return j.description}};return"Expected "+function(j){var D,s=Array(j.length);for(D=0;D<j.length;D++){var Z,q=D;Z=j[D],Z=O[Z.type](Z),s[q]=Z}if(s.sort(),0<s.length){for(j=D=1;D<s.length;D++)s[D-1]!==s[D]&&(s[j]=s[D],j++);s.length=j}switch(s.length){case 1:return s[0];case 2:return s[0]+" or "+s[1];default:return s.slice(0,-1).join(", ")+", or "+s[s.length-1]}}(M)+" but "+(T?'"'+F(T)+'"':"end of input")+" found."},{SyntaxError:ye,parse:function(M,T){function E(o,C){return{type:"literal",text:o,ignoreCase:C}}function F(o,C,w){return{type:"class",parts:o,inverted:C,ignoreCase:w}}function I(o){return{type:"other",description:o}}function O(o){var w,C=oa[o];if(!C){for(w=o-1;!oa[w];)w--;for(C={line:(C=oa[w]).line,column:C.column};w<o;)10===M.charCodeAt(w)?(C.line++,C.column=1):C.column++,w++;oa[o]=C}return C}function j(o,C){var w=O(o),y=O(C);return{start:{offset:o,line:w.line,column:w.column},end:{offset:C,line:y.line,column:y.column}}}function s(o){n<Zn||(n>Zn&&(Zn=n,ff=[]),ff.push(o))}function D(){var o,C,w;if(R++,R++,o=n,(C=q())!==e){var y,P,Q,z,pe,Ge;if(R++,y=n,(P=H())!==e){for(Q=[],w=K();w!==e;)Q.push(w),w=K();if(Q!==e){for(w=[],z=ce();z!==e;)w.push(z),z=ce();if(w!==e){for(z=[],Q=K();Q!==e;)z.push(Q),Q=K();if(z!==e)if((Q=ee())!==e){for(pe=[],z=K();z!==e;)pe.push(z),z=K();if(pe!==e)if((z=se())!==e){for(pe=[],Ge=K();Ge!==e;)pe.push(Ge),Ge=K();if(pe!==e){var Ye,ut,ht,Ct,Qt,Ht,Yt;if(R++,pe=n,M.substr(n,8)===ni?(Ge=ni,n+=8):(Ge=e,0===R&&s(pn)),Ge!==e){for(Ye=[],ut=ne();ut!==e;)Ye.push(ut),ut=ne();if(Ye!==e)if(123===M.charCodeAt(n)?(ut=Jr,n++):(ut=e,0===R&&s(Pr)),ut!==e){if(ht=[],Ct=n,40===M.charCodeAt(n)?(Qt=jt,n++):(Qt=e,0===R&&s(Ot)),Qt!==e){if(Ht=[],(Yt=ge())!==e)for(;Yt!==e;)Ht.push(Yt),Yt=ge();else Ht=e;Ht!==e?(41===M.charCodeAt(n)?(Yt=Et,n++):(Yt=e,0===R&&s(Dt)),Yt!==e?Ct=Qt=[Qt,Ht,Yt]:(n=Ct,Ct=e)):(n=Ct,Ct=e)}else n=Ct,Ct=e;for(Ct===e&&(Ct=Br());Ct!==e;){if(ht.push(Ct),Ct=n,40===M.charCodeAt(n)?(Qt=jt,n++):(Qt=e,0===R&&s(Ot)),Qt!==e){if(Ht=[],(Yt=ge())!==e)for(;Yt!==e;)Ht.push(Yt),Yt=ge();else Ht=e;Ht!==e?(41===M.charCodeAt(n)?(Yt=Et,n++):(Yt=e,0===R&&s(Dt)),Yt!==e?Ct=Qt=[Qt,Ht,Yt]:(n=Ct,Ct=e)):(n=Ct,Ct=e)}else n=Ct,Ct=e;Ct===e&&(Ct=Br())}ht!==e?(125===M.charCodeAt(n)?(Ct=Sr,n++):(Ct=e,0===R&&s(Ar)),Ct!==e?pe=Ge=[Ge,Ye,ut,ht,Ct]:(n=pe,pe=e)):(n=pe,pe=e)}else n=pe,pe=e;else n=pe,pe=e}else n=pe,pe=e;if(pe===e&&(pe=null),R--,pe===e&&0===R&&s(Ts),pe!==e){for(y=P,P={named:[],implicit:[]},pe=0;pe<w.length;pe++)"default"===(Ge=w[pe]).kind?P.implicit.push(Ge.graph):P.named.push(Ge.graph);0===P.named.length&&0===P.implicit.length&&P.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"}),(w={kind:"select",token:"executableunit"}).dataset=P,w.projection=y.vars,w.modifier=y.modifier,w.pattern=Q,null!=z&&null!=z.limit&&(w.limit=z.limit),null!=z&&null!=z.offset&&(w.offset=z.offset),null!=z&&null!=z.order&&""!=z.order&&(w.order=z.order),null!=z&&null!=z.group&&(w.group=z.group),y=w}else n=y,y=e}else n=y,y=e}else n=y,y=e;else n=y,y=e}else n=y,y=e;else n=y,y=e}else n=y,y=e}else n=y,y=e}else n=y,y=e;if(R--,y===e&&0===R&&s(So),(w=y)===e){for(R++,w=n,Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e)if(M.substr(n,9)===Eo?(z=Eo,n+=9):(z=e,0===R&&s(Sl)),z===e&&(M.substr(n,9)===Io?(z=Io,n+=9):(z=e,0===R&&s(Fl))),z!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e){if(R++,Q=n,123===M.charCodeAt(n)?(z=Jr,n++):(z=e,0===R&&s(Pr)),z!==e){for(y=[],z=K();z!==e;)y.push(z),z=K();if(y!==e)if((z=ct())===e&&(z=null),z!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();y!==e?(125===M.charCodeAt(n)?(P=Sr,n++):(P=e,0===R&&s(Ar)),P!==e?Q=z:(n=Q,Q=e)):(n=Q,Q=e)}else n=Q,Q=e;else n=Q,Q=e}else n=Q,Q=e;if(R--,Q===e&&0===R&&s(xu),(z=Q)!==e){for(Q=[],y=K();y!==e;)Q.push(y),y=K();if(Q!==e){for(y=[],Q=ce();Q!==e;)y.push(Q),Q=ce();if(y!==e){for(Q=[],P=K();P!==e;)Q.push(P),P=K();if(Q!==e)if((P=ee())!==e){for(pe=[],Q=K();Q!==e;)pe.push(Q),Q=K();if(pe!==e)if((Q=se())!==e){for(w=z,z=y,y=P,P={named:[],implicit:[]},pe=0;pe<z.length;pe++)"default"===(Ge=z[pe]).kind?P.implicit.push(Ge.graph):P.named.push(Ge.graph);0===P.named.length&&0===P.implicit.length&&P.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"}),(z={kind:"construct",token:"executableunit"}).dataset=P,z.template=w,z.pattern=y,null!=Q&&null!=Q.limit&&(z.limit=Q.limit),null!=Q&&null!=Q.offset&&(z.offset=Q.offset),null!=Q&&null!=Q.order&&""!=Q.order&&(z.order=Q.order),w=z}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e}else n=w,w=e}else n=w,w=e}else n=w,w=e}else n=w,w=e;else n=w,w=e;if(w===e){for(w=n,Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e)if(M.substr(n,9)===Eo?(z=Eo,n+=9):(z=e,0===R&&s(Sl)),z===e&&(M.substr(n,9)===Io?(z=Io,n+=9):(z=e,0===R&&s(Fl))),z!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e){for(z=[],Q=ce();Q!==e;)z.push(Q),Q=ce();if(z!==e){for(Q=[],y=K();y!==e;)Q.push(y),y=K();if(Q!==e)if(M.substr(n,5)===hn?(y=hn,n+=5):(y=e,0===R&&s(qi)),y===e&&(M.substr(n,5)===Dn?(y=Dn,n+=5):(y=e,0===R&&s(zi))),y!==e){for(Q=[],P=K();P!==e;)Q.push(P),P=K();if(Q!==e)if(123===M.charCodeAt(n)?(P=Jr,n++):(P=e,0===R&&s(Pr)),P!==e){for(pe=[],Q=K();Q!==e;)pe.push(Q),Q=K();if(pe!==e)if((Q=qe())===e&&(Q=null),Q!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if(125===M.charCodeAt(n)?(P=Sr,n++):(P=e,0===R&&s(Ar)),P!==e){for(P=[],y=K();y!==e;)P.push(y),y=K();if(P!==e)if((y=se())!==e){for(w=z,z=y,y={named:[],implicit:[]},P=0;P<w.length;P++)"default"===(pe=w[P]).kind?y.implicit.push(pe.graph):y.named.push(pe.graph);0===y.named.length&&0===y.implicit.length&&y.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"}),(w={kind:"construct",token:"executableunit"}).dataset=y,w.template=Q,w.pattern={token:"basicgraphpattern",triplesContext:Q.triplesContext},null!=z&&null!=z.limit&&(w.limit=z.limit),null!=z&&null!=z.offset&&(w.offset=z.offset),null!=z&&null!=z.order&&""!=z.order&&(w.order=z.order)}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e}else n=w,w=e}else n=w,w=e;else n=w,w=e}if(R--,w===e&&0===R&&s(Wi),w===e){if(R++,w=n,M.substr(n,8)===ms?(Q=ms,n+=8):(Q=e,0===R&&s(No)),Q!==e){if(z=[],(y=ae())!==e)for(;y!==e;)z.push(y),y=ae();else z=e;if(z===e&&(42===M.charCodeAt(n)?(z=bn,n++):(z=e,0===R&&s(zr))),z!==e){for(y=[],P=ce();P!==e;)y.push(P),P=ce();y!==e?((P=ee())===e&&(P=null),P!==e?(pe=se())!==e?w=Q=[Q,z,y,P,pe]:(n=w,w=e):(n=w,w=e)):(n=w,w=e)}else n=w,w=e}else n=w,w=e;if(R--,w===e&&0===R&&s(_l),w===e){for(R++,w=n,Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e)if(M.substr(n,3)===ws?(z=ws,n+=3):(z=e,0===R&&s(rn)),z===e&&(M.substr(n,3)===Al?(z=Al,n+=3):(z=e,0===R&&s(aa))),z!==e){for(z=[],Q=K();Q!==e;)z.push(Q),Q=K();if(z!==e){for(Q=[],y=ce();y!==e;)Q.push(y),y=ce();if(Q!==e){for(y=[],z=K();z!==e;)y.push(z),z=K();if(y!==e)if((z=ee())!==e){for(w=Q,Q=z,z={named:[],implicit:[]},y=0;y<w.length;y++)"implicit"===(P=w[y]).kind?z.implicit.push(P.graph):z.named.push(P.graph);0===z.named.length&&0===z.implicit.length&&z.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"}),(w={kind:"ask",token:"executableunit"}).dataset=z,w.pattern=Q}else n=w,w=e;else n=w,w=e}else n=w,w=e}else n=w,w=e}else n=w,w=e;else n=w,w=e;R--,w===e&&0===R&&s(ua)}}}w!==e?(R++,Q=n,M.substr(n,6)===Po?(z=Po,n+=6):(z=e,0===R&&s(Es)),z===e&&(M.substr(n,6)===Zi?(z=Zi,n+=6):(z=e,0===R&&s(xi))),z!==e?(y=Pt())!==e?Q=z=[z,y]:(n=Q,Q=e):(n=Q,Q=e),Q===e&&(Q=null),Q!==e&&(Q=null!=Q?Q[1]:null),R--,Q===e&&0===R&&s(ma),Q!==e?o=C={token:"query",kind:"query",prologue:C,units:[w],inlineData:Q}:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;return R--,o===e&&0===R&&s(bt),R--,o===e&&0===R&&s($t),o===e&&(R++,o=ke(),R--,o===e&&0===R&&s(zl)),o}function q(){var o,C,w,y;for(R++,o=n,R++,C=n,y=[],w=K();w!==e;)y.push(w),w=K();if(y!==e)if(M.substr(n,4)===tn?(w=tn,n+=4):(w=e,0===R&&s(qt)),w===e&&(M.substr(n,4)===jn?(w=jn,n+=4):(w=e,0===R&&s(Hi))),w!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?(y=Nt())!==e?(C={token:"base"}).value=y:(n=C,C=e):(n=C,C=e)}else n=C,C=e;else n=C,C=e;if(R--,C===e&&0===R&&s(ds),C===e&&(C=null),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e){for(y=[],w=Z();w!==e;)y.push(w),w=Z();y!==e?o=C={token:"prologue",base:C,prefixes:y}:(n=o,o=e)}else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s($n),o}function Z(){var o,C,w,y;for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(M.substr(n,6)===ot?(w=ot,n+=6):(w=e,0===R&&s(Tt)),w===e&&(M.substr(n,6)===ko?(w=ko,n+=6):(w=e,0===R&&s(vs))),w!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if((C=Bt())!==e){for(y=[],w=K();w!==e;)y.push(w),w=K();y!==e?(w=Nt())!==e?((o={token:"prefix"}).prefix=C,o.local=w):(n=o,o=e):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e;return R--,o===e&&0===R&&s(gs),o}function H(){var o,C,w,y,P,Q,z,pe,Ge,Ye,ut,ht,Ct,Qt,Ht,Yt;for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(M.substr(n,6)===Lt?(w=Lt,n+=6):(w=e,0===R&&s(la)),w===e&&(M.substr(n,6)===ys?(w=ys,n+=6):(w=e,0===R&&s(_o))),w!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if(M.substr(n,8)===Jt?(C=Jt,n+=8):(C=e,0===R&&s(xn)),C===e&&(M.substr(n,8)===kr?(C=kr,n+=8):(C=e,0===R&&s(qr))),C===e&&(M.substr(n,7)===Ao?(C=Ao,n+=7):(C=e,0===R&&s(bl)),C===e&&(M.substr(n,7)===Lo?(C=Lo,n+=7):(C=e,0===R&&s(kl)))),C===e&&(C=null),C!==e){for(y=[],w=K();w!==e;)y.push(w),w=K();if(y!==e){for(w=[],y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if((Q=ne())!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?y=P=[P,Q,z]:(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(40===M.charCodeAt(n)?(Q=jt,n++):(Q=e,0===R&&s(Ot)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();if(z!==e)if((pe=te())!==e){for(Ge=[],Ye=K();Ye!==e;)Ge.push(Ye),Ye=K();if(Ge!==e)if(M.substr(n,2)===Cn?(Ye=Cn,n+=2):(Ye=e,0===R&&s(To)),Ye===e&&(M.substr(n,2)===On?(Ye=On,n+=2):(Ye=e,0===R&&s(Xi))),Ye!==e){for(ut=[],ht=K();ht!==e;)ut.push(ht),ht=K();if(ut!==e)if((ht=ne())!==e){for(Ct=[],Qt=K();Qt!==e;)Ct.push(Qt),Qt=K();if(Ct!==e)if(41===M.charCodeAt(n)?(Qt=Et,n++):(Qt=e,0===R&&s(Dt)),Qt!==e){for(Ht=[],Yt=K();Yt!==e;)Ht.push(Yt),Yt=K();Ht!==e?y=P=[P,Q,z,pe,Ge,Ye,ut,ht,Ct,Qt,Ht]:(n=y,y=e)}else n=y,y=e;else n=y,y=e}else n=y,y=e;else n=y,y=e}else n=y,y=e;else n=y,y=e}else n=y,y=e;else n=y,y=e}else n=y,y=e;else n=y,y=e}if(y!==e)for(;y!==e;){for(w.push(y),y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if((Q=ne())!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?y=P=[P,Q,z]:(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(40===M.charCodeAt(n)?(Q=jt,n++):(Q=e,0===R&&s(Ot)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();if(z!==e)if((pe=te())!==e){for(Ge=[],Ye=K();Ye!==e;)Ge.push(Ye),Ye=K();if(Ge!==e)if(M.substr(n,2)===Cn?(Ye=Cn,n+=2):(Ye=e,0===R&&s(To)),Ye===e&&(M.substr(n,2)===On?(Ye=On,n+=2):(Ye=e,0===R&&s(Xi))),Ye!==e){for(ut=[],ht=K();ht!==e;)ut.push(ht),ht=K();if(ut!==e)if((ht=ne())!==e){for(Ct=[],Qt=K();Qt!==e;)Ct.push(Qt),Qt=K();if(Ct!==e)if(41===M.charCodeAt(n)?(Qt=Et,n++):(Qt=e,0===R&&s(Dt)),Qt!==e){for(Ht=[],Yt=K();Yt!==e;)Ht.push(Yt),Yt=K();Ht!==e?y=P=[P,Q,z,pe,Ge,Ye,ut,ht,Ct,Qt,Ht]:(n=y,y=e)}else n=y,y=e;else n=y,y=e}else n=y,y=e;else n=y,y=e}else n=y,y=e;else n=y,y=e}else n=y,y=e;else n=y,y=e}else n=y,y=e;else n=y,y=e}}else w=e;if(w===e){for(w=n,y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if(42===M.charCodeAt(n)?(P=bn,n++):(P=e,0===R&&s(zr)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?w=y=[y,P,Q]:(n=w,w=e)}else n=w,w=e;else n=w,w=e}if(w!==e){if(o=C,C=w,w=[],3===C.length&&"*"===C[1])C={vars:[{token:"variable",kind:"*"}],modifier:lc(o)};else{for(y=0;y<C.length;y++)3===(P=C[y]).length?w.push({token:"variable",kind:"var",value:P[1]}):w.push({token:"variable",kind:"aliased",expression:P[3],alias:P[7]});C={vars:w,modifier:lc(o)}}o=C}else n=o,o=e}else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e;return R--,o===e&&0===R&&s(Cl),o}function ce(){var o,C,w,y;if(R++,o=n,M.substr(n,4)===Cs?(C=Cs,n+=4):(C=e,0===R&&s(Rn)),C===e&&(M.substr(n,4)===Mo?(C=Mo,n+=4):(C=e,0===R&&s(kn))),C!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e){for(R++,C=n,w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e?(y=le())!==e?C=w={graph:y,kind:"default",token:"graphClause"}:(n=C,C=e):(n=C,C=e),R--,C===e&&0===R&&s(jo),C===e){if(R++,C=n,M.substr(n,5)===nn?(w=nn,n+=5):(w=e,0===R&&s(ks)),w===e&&(M.substr(n,5)===wi?(w=wi,n+=5):(w=e,0===R&&s(Ss))),w!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?(y=le())!==e?C=w={graph:y,kind:"named",token:"graphCluase"}:(n=C,C=e):(n=C,C=e)}else n=C,C=e;R--,C===e&&0===R&&s(bs)}if(C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?o=C:(n=o,o=e)}else n=o,o=e}else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(xs),o}function le(){var o;return R++,o=wt(),R--,o===e&&0===R&&s(fa),o}function ee(){var o,C,w,y;if(R++,o=n,M.substr(n,5)===hn?(C=hn,n+=5):(C=e,0===R&&s(qi)),C===e&&(M.substr(n,5)===Dn?(C=Dn,n+=5):(C=e,0===R&&s(zi))),C===e&&(C=null),C!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if((C=et())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?o=C:(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(Ll),o}function se(){var o,C,w,y;if(R++,o=n,R++,C=n,M.substr(n,5)===El?(w=El,n+=5):(w=e,0===R&&s(ha)),w===e&&(M.substr(n,5)===Il?(w=Il,n+=5):(w=e,0===R&&s(Nl))),w!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(M.substr(n,2)===Oo?(y=Oo,n+=2):(y=e,0===R&&s(Fs)),y===e&&(M.substr(n,2)===ei?(y=ei,n+=2):(y=e,0===R&&s(ti))),y!==e){for(y=[],w=K();w!==e;)y.push(w),w=K();if(y!==e){if(w=[],(y=de())!==e)for(;y!==e;)w.push(y),y=de();else w=e;w!==e?C=w:(n=C,C=e)}else n=C,C=e}else n=C,C=e;else n=C,C=e}else n=C,C=e;if(R--,C===e&&0===R&&s(ca),C===e&&(C=null),C!==e){var P,Q;if(R++,w=n,M.substr(n,6)===Ml?(y=Ml,n+=6):(y=e,0===R&&s(Ji)),y!==e){if(P=[],(Q=he())!==e)for(;Q!==e;)P.push(Q),Q=he();else P=e;P!==e?w=y=[y,P]:(n=w,w=e)}else n=w,w=e;if(R--,w===e&&0===R&&s(da),w===e&&(w=null),w!==e){if(R++,w=n,M.substr(n,5)===_s?(y=_s,n+=5):(y=e,0===R&&s(Ki)),y===e&&(M.substr(n,5)===jl?(y=jl,n+=5):(y=e,0===R&&s(Ol))),y!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if(M.substr(n,2)===Oo?(P=Oo,n+=2):(P=e,0===R&&s(Fs)),P===e&&(M.substr(n,2)===ei?(P=ei,n+=2):(P=e,0===R&&s(ti))),P!==e){for(P=[],y=K();y!==e;)P.push(y),y=K();if(P!==e){if(y=[],(P=V())!==e)for(;P!==e;)y.push(P),P=V();else y=e;if(y!==e){for(P=[],Q=K();Q!==e;)P.push(Q),Q=K();P!==e?w=y:(n=w,w=e)}else n=w,w=e}else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;if(R--,w===e&&0===R&&s(ga),w===e&&(w=null),w!==e){if(R++,y=n,(P=W())!==e?((Q=Y())===e&&(Q=null),Q!==e?y=P=[P,Q]:(n=y,y=e)):(n=y,y=e),y===e&&(y=n,(P=Y())!==e?((Q=W())===e&&(Q=null),Q!==e?y=P=[P,Q]:(n=y,y=e)):(n=y,y=e)),y!==e){for(P={},Q=0;Q<y.length;Q++){var z=y[Q];null!=z&&null!=z.limit?P.limit=z.limit:null!=z&&null!=z.offset&&(P.offset=z.offset)}y=P}R--,y===e&&0===R&&s(Sn),y===e&&(y=null),y!==e?(o=C,C=y,y={},null!=C&&(null!=C.limit&&(y.limit=C.limit),null!=C.offset&&(y.offset=C.offset)),null!=o&&(y.group=o),y.order=w,o=y):(n=o,o=e)}else n=o,o=e}else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(Tl),o}function de(){var o,C,w,y,P,Q;for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if((w=Re())!==e){for(y=[],C=K();C!==e;)y.push(C),C=K();y!==e?o=w:(n=o,o=e)}else n=o,o=e;else n=o,o=e;if(o===e){for(o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if((w=tt())!==e){for(y=[],C=K();C!==e;)y.push(C),C=K();y!==e?o=w:(n=o,o=e)}else n=o,o=e;else n=o,o=e;if(o===e){for(o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(40===M.charCodeAt(n)?(w=jt,n++):(w=e,0===R&&s(Ot)),w!==e){for(y=[],C=K();C!==e;)y.push(C),C=K();if(y!==e)if((C=te())!==e){for(y=[],w=K();w!==e;)y.push(w),w=K();if(y!==e){if(w=n,M.substr(n,2)===Cn?(P=Cn,n+=2):(P=e,0===R&&s(To)),P===e&&(M.substr(n,2)===On?(P=On,n+=2):(P=e,0===R&&s(Xi))),P!==e){for(Q=[],y=K();y!==e;)Q.push(y),y=K();Q!==e?(y=ne())!==e?w=P=[P,Q,y]:(n=w,w=e):(n=w,w=e)}else n=w,w=e;if(w===e&&(w=null),w!==e){for(P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(41===M.charCodeAt(n)?(Q=Et,n++):(Q=e,0===R&&s(Dt)),Q!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();y!==e?o=C=0!=w.length?{token:"aliased_expression",expression:C,alias:w[2]}:C:(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e}else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e;if(o===e){for(o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if((w=ne())!==e){for(y=[],C=K();C!==e;)y.push(C),C=K();y!==e?o=w:(n=o,o=e)}else n=o,o=e;else n=o,o=e}}}return R--,o===e&&0===R&&s(pa),o}function he(){var o;return R++,o=xt(),R--,o===e&&0===R&&s(hr),o}function V(){var o,C,w,y,P;if(R++,o=n,M.substr(n,3)===Do?(C=Do,n+=3):(C=e,0===R&&s(Dl)),C===e&&(M.substr(n,3)===Rl?(C=Rl,n+=3):(C=e,0===R&&s(ya)),C===e&&(M.substr(n,4)===As?(C=As,n+=4):(C=e,0===R&&s(Bl)),C===e&&(M.substr(n,4)===Pl?(C=Pl,n+=4):(C=e,0===R&&s(Vi))))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if((y=je())!==e){for(w=[],P=K();P!==e;)w.push(P),P=K();w!==e?(o=y,o=C={direction:C.toUpperCase(),expression:o}):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;if(o===e)if(o=n,(C=xt())===e&&(C=ne()),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?("var"===C.token&&(C={token:"expression",expressionType:"atomic",primaryexpression:"var",value:C}),o=C={direction:"ASC",expression:C}):(n=o,o=e)}else n=o,o=e;return R--,o===e&&0===R&&s(va),o}function W(){var o,C,w,y;if(R++,o=n,M.substr(n,5)===Bo?(C=Bo,n+=5):(C=e,0===R&&s(Ql)),C===e&&(M.substr(n,5)===on?(C=on,n+=5):(C=e,0===R&&s(ri))),C!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if((C=Rt())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?o=C={limit:parseInt(C.value)}:(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(Ro),o}function Y(){var o,C,w,y;if(R++,o=n,M.substr(n,6)===Ul?(C=Ul,n+=6):(C=e,0===R&&s(Gl)),C===e&&(M.substr(n,6)===Hl?(C=Hl,n+=6):(C=e,0===R&&s(Xl))),C!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if((C=Rt())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?o=C={offset:parseInt(C.value)}:(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(Ls),o}function ge(){var o;return R++,(o=wt())===e&&((o=He())===e&&((o=Ze())===e&&((o=Ft())===e&&(M.substr(n,5)===Yi?(o=Yi,n+=5):(o=e,0===R&&s(ql)))))),R--,o===e&&0===R&&s(Wl),o}function ke(){var o,C,w,y,P,Q,z,pe;if(R++,o=n,(C=q())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e){if(R++,R++,w=n,M.substr(n,4)===Vr?(y=Vr,n+=4):(y=e,0===R&&s(Vl)),y===e&&(M.substr(n,4)===Uo?(y=Uo,n+=4):(y=e,0===R&&s(Is))),y!==e){for(P=[],y=K();y!==e;)P.push(y),y=K();if(P!==e)if((y=wt())!==e){for(Q=[],P=K();P!==e;)Q.push(P),P=K();if(Q!==e){if(P=n,M.substr(n,4)===Ns?(Q=Ns,n+=4):(Q=e,0===R&&s(Yl)),Q===e&&(M.substr(n,4)===Go?(Q=Go,n+=4):(Q=e,0===R&&s(wa))),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=We())!==e?P=Q=[Q,z,pe]:(n=P,P=e):(n=P,P=e)}else n=P,P=e;P===e&&(P=null),P!==e?(w=P,(P={kind:"load",token:"executableunit"}).sourceGraph=y,null!=w&&(P.destinyGraph=w[2]),w=P):(n=w,w=e)}else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;if(R--,w===e&&0===R&&s(Qo),(y=w)===e){if(R++,y=n,M.substr(n,5)===Zl?(w=Zl,n+=5):(w=e,0===R&&s(ii)),w===e&&(M.substr(n,5)===oi?(w=oi,n+=5):(w=e,0===R&&s(Ci))),w!==e){for(w=[],P=K();P!==e;)w.push(P),P=K();if(w!==e)if(M.substr(n,6)===Bn?(P=Bn,n+=6):(P=e,0===R&&s($i)),P===e&&(M.substr(n,6)===si?(P=si,n+=6):(P=e,0===R&&s(eo))),P===e&&(P=null),P!==e){for(P=[],w=K();w!==e;)P.push(w),w=K();P!==e?(w=$e())!==e?(y={kind:"clear",token:"executableunit"}).destinyGraph=w:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e}else n=y,y=e;if(R--,y===e&&0===R&&s(xa),y===e){if(R++,y=n,M.substr(n,4)===Pn?(w=Pn,n+=4):(w=e,0===R&&s(Or)),w===e&&(M.substr(n,4)===Fn?(w=Fn,n+=4):(w=e,0===R&&s(Qn))),w!==e){for(w=[],P=K();P!==e;)w.push(P),P=K();if(w!==e)if(M.substr(n,6)===Bn?(P=Bn,n+=6):(P=e,0===R&&s($i)),P===e&&(M.substr(n,6)===si?(P=si,n+=6):(P=e,0===R&&s(eo))),P===e&&(P=null),P!==e){for(P=[],w=K();w!==e;)P.push(w),w=K();P!==e?(w=$e())!==e?(y={kind:"drop",token:"executableunit"}).destinyGraph=w:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e}else n=y,y=e;if(R--,y===e&&0===R&&s(li),y===e){if(R++,y=n,M.substr(n,6)===$l?(w=$l,n+=6):(w=e,0===R&&s(eu)),w===e&&(M.substr(n,6)===bi?(w=bi,n+=6):(w=e,0===R&&s(tu))),w!==e){for(w=[],P=K();P!==e;)w.push(P),P=K();if(w!==e)if(M.substr(n,6)===Bn?(P=Bn,n+=6):(P=e,0===R&&s($i)),P===e&&(M.substr(n,6)===si?(P=si,n+=6):(P=e,0===R&&s(eo))),P===e&&(P=null),P!==e){for(P=[],w=K();w!==e;)P.push(w),w=K();P!==e?(w=We())!==e?(y={kind:"create",token:"executableunit"}).destinyGraph=w:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e}else n=y,y=e;if(R--,y===e&&0===R&&s(Ho),y===e){if(R++,y=n,M.substr(n,6)===ui?(w=ui,n+=6):(w=e,0===R&&s(ru)),w===e&&(M.substr(n,6)===ki?(w=ki,n+=6):(w=e,0===R&&s(js))),w!==e){for(w=[],P=K();P!==e;)w.push(P),P=K();if(w!==e)if(M.substr(n,4)===Si?(P=Si,n+=4):(P=e,0===R&&s(Xo)),P===e&&(M.substr(n,4)===_n?(P=_n,n+=4):(P=e,0===R&&s(to))),P!==e){for(P=[],w=K();w!==e;)P.push(w),w=K();P!==e?(w=oe())!==e?(y={kind:"insertdata",token:"executableunit"}).quads=w:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e}else n=y,y=e;if(R--,y===e&&0===R&&s(Ms),y===e){if(R++,y=n,M.substr(n,6)===An?(w=An,n+=6):(w=e,0===R&&s(Os)),w===e&&(M.substr(n,6)===Fi?(w=Fi,n+=6):(w=e,0===R&&s(Ds))),w!==e){for(w=[],P=K();P!==e;)w.push(P),P=K();w!==e?(M.substr(n,4)===Si?(P=Si,n+=4):(P=e,0===R&&s(Xo)),P===e&&(M.substr(n,4)===_n?(P=_n,n+=4):(P=e,0===R&&s(to))),P!==e?(w=oe())!==e?(y={kind:"deletedata",token:"executableunit"}).quads=w:(n=y,y=e):(n=y,y=e)):(n=y,y=e)}else n=y,y=e;if(R--,y===e&&0===R&&s(nu),y===e){if(R++,y=n,M.substr(n,6)===An?(w=An,n+=6):(w=e,0===R&&s(Os)),w===e&&(M.substr(n,6)===Fi?(w=Fi,n+=6):(w=e,0===R&&s(Ds))),w!==e){for(w=[],P=K();P!==e;)w.push(P),P=K();if(w!==e)if(M.substr(n,5)===hn?(P=hn,n+=5):(P=e,0===R&&s(qi)),P===e&&(M.substr(n,5)===Dn?(P=Dn,n+=5):(P=e,0===R&&s(zi))),P!==e){for(w=[],P=K();P!==e;)w.push(P),P=K();if(w!==e)if((P=et())!==e){for((y={kind:"modify"}).pattern=P,y.with=null,y.using=null,w=[],P=null==(P=P.patterns[0]).triplesContext&&null!=P.patterns?P.patterns[0].triplesContext:P.triplesContext,Q=0;Q<P.length;Q++)z={},pe=P[Q],z.subject=pe.subject,z.predicate=pe.predicate,z.object=pe.object,z.graph=pe.graph,w.push(z);y.delete=w}else n=y,y=e;else n=y,y=e}else n=y,y=e;else n=y,y=e}else n=y,y=e;if(R--,y===e&&0===R&&s(Rs),y===e){var Ge;if(R++,P=w=n,M.substr(n,4)===ai?(Q=ai,n+=4):(Q=e,0===R&&s(ro)),Q===e&&(M.substr(n,4)===iu?(Q=iu,n+=4):(Q=e,0===R&&s(Wo))),Q!==e){for(y=[],z=K();z!==e;)y.push(z),z=K();y!==e?(z=wt())!==e?P=Q=[Q,y,z]:(n=P,P=e):(n=P,P=e)}else n=P,P=e;if(P===e&&(P=null),P!==e){for(Q=[],y=K();y!==e;)Q.push(y),y=K();if(Q!==e){if(y=n,R++,Q=n,M.substr(n,6)===An?(z=An,n+=6):(z=e,0===R&&s(Os)),z===e&&(M.substr(n,6)===Fi?(z=Fi,n+=6):(z=e,0===R&&s(Ds))),z!==e?(z=Fe())!==e?Q=z:(n=Q,Q=e):(n=Q,Q=e),R--,Q===e&&0===R&&s(ou),(z=Q)!==e){for(Q=[],pe=K();pe!==e;)Q.push(pe),pe=K();Q!==e?((pe=_e())===e&&(pe=null),pe!==e?y=z=[z,Q,pe]:(n=y,y=e)):(n=y,y=e)}else n=y,y=e;if(y===e&&(y=_e()),y!==e){for(z=[],Q=K();Q!==e;)z.push(Q),Q=K();if(z!==e){for(Q=[],pe=Se();pe!==e;)Q.push(pe),pe=Se();if(Q!==e){for(pe=[],z=K();z!==e;)pe.push(z),z=K();if(pe!==e)if(M.substr(n,5)===hn?(z=hn,n+=5):(z=e,0===R&&s(qi)),z===e&&(M.substr(n,5)===Dn?(z=Dn,n+=5):(z=e,0===R&&s(zi))),z!==e){for(pe=[],z=K();z!==e;)pe.push(z),z=K();if(pe!==e)if((z=et())!==e){for(pe=[],Ge=K();Ge!==e;)pe.push(Ge),Ge=K();pe!==e?(w=P,P=Q,(Q={kind:"modify"}).with=""!=w&&null!=w?w[2]:null,3!==y.length||""!==y[2]&&null!=y[2]?3===y.length&&null!=y[0].length&&null!=y[1].length&&null!=y[2].length?(Q.delete=y[0],Q.insert=y[2]):(Q.insert=y,Q.delete=null):(Q.delete=y[0],Q.insert=null),""!=P&&(Q.using=P),Q.pattern=z,w=Q):(n=w,w=e)}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e}else n=w,w=e}else n=w,w=e}else n=w,w=e}else n=w,w=e;R--,w===e&&0===R&&s(Bs),y=w}}}}}}}if(R--,y===e&&0===R&&s(Kl),y!==e){for(w=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(59===M.charCodeAt(n)?(Q=sn,n++):(Q=e,0===R&&s(Kr)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?((pe=ke())===e&&(pe=null),pe!==e?w=P=[P,Q,z,pe]:(n=w,w=e)):(n=w,w=e)}else n=w,w=e;else n=w,w=e;w===e&&(w=null),w!==e?(o=w,(w={token:"query",kind:"update"}).prologue=C,C=[y],null!=o&&null!=o.length&&null!=o[3]&&null!=o[3].units&&(C=C.concat(o[3].units)),w.units=C,o=w):(n=o,o=e)}else n=o,o=e}else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(Jl),o}function _e(){var o,C;return R++,o=n,M.substr(n,6)===ui?(C=ui,n+=6):(C=e,0===R&&s(ru)),C===e&&(M.substr(n,6)===ki?(C=ki,n+=6):(C=e,0===R&&s(js))),C!==e?(C=Fe())!==e?o=C:(n=o,o=e):(n=o,o=e),R--,o===e&&0===R&&s(no),o}function Se(){var o,C,w,y,P;for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(M.substr(n,5)===Un?(w=Un,n+=5):(w=e,0===R&&s(io)),w===e&&(M.substr(n,5)===Gn?(w=Gn,n+=5):(w=e,0===R&&s(oo))),w!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e){if((C=wt())===e)if(C=n,M.substr(n,5)===nn?(w=nn,n+=5):(w=e,0===R&&s(ks)),w===e&&(M.substr(n,5)===wi?(w=wi,n+=5):(w=e,0===R&&s(Ss))),w!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();y!==e?(P=wt())!==e?C=w=[w,y,P]:(n=C,C=e):(n=C,C=e)}else n=C,C=e;C!==e?o=C=null!=C.length?{kind:"named",uri:C[2]}:{kind:"default",uri:C}:(n=o,o=e)}else n=o,o=e}else n=o,o=e;else n=o,o=e;return R--,o===e&&0===R&&s(su),o}function We(){var o,C,w;if(R++,o=n,M.substr(n,5)===fi?(C=fi,n+=5):(C=e,0===R&&s(qo)),C===e&&(M.substr(n,5)===ci?(C=ci,n+=5):(C=e,0===R&&s(Ps))),C!==e){for(C=[],w=K();w!==e;)C.push(w),w=K();C!==e?(w=wt())!==e?o=w:(n=o,o=e):(n=o,o=e)}else n=o,o=e;return R--,o===e&&0===R&&s(_i),o}function $e(){var o;return R++,(o=We())===e&&(M.substr(n,7)===Hn?(o=Hn,n+=7):(o=e,0===R&&s(Ca)),o===e&&(M.substr(n,7)===lu?(o=lu,n+=7):(o=e,0===R&&s(ba))),o!==e&&(o="default"),o===e&&(M.substr(n,5)===nn?(o=nn,n+=5):(o=e,0===R&&s(ks)),o===e&&(M.substr(n,5)===wi?(o=wi,n+=5):(o=e,0===R&&s(Ss))),o!==e&&(o="named"),o===e&&(M.substr(n,3)===uu?(o=uu,n+=3):(o=e,0===R&&s(ka)),o===e&&(M.substr(n,3)===au?(o=au,n+=3):(o=e,0===R&&s(Qr))),o!==e&&(o="all")))),R--,o===e&&0===R&&s(hi),o}function Fe(){var o,C,w,y;for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(123===M.charCodeAt(n)?(w=Jr,n++):(w=e,0===R&&s(Pr)),w!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if((C=me())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(125===M.charCodeAt(n)?(y=Sr,n++):(y=e,0===R&&s(Ar)),y!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?o=C=C.quadsContext:(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e;return R--,o===e&&0===R&&s(pr),o}function oe(){var o,C,w,y;for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(123===M.charCodeAt(n)?(w=Jr,n++):(w=e,0===R&&s(Pr)),w!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if((C=me())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(125===M.charCodeAt(n)?(y=Sr,n++):(y=e,0===R&&s(Ar)),y!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?o=C=C.quadsContext:(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e;return R--,o===e&&0===R&&s(Lr),o}function me(){var o,C,w,y,P,Q,z;if(R++,o=n,(C=qe())===e&&(C=null),C!==e){for(w=[],y=n,(P=Ae())!==e?(46===M.charCodeAt(n)?(Q=ar,n++):(Q=e,0===R&&s(Tr)),Q===e&&(Q=null),Q!==e?((z=qe())===e&&(z=null),z!==e?y=P=[P,Q,z]:(n=y,y=e)):(n=y,y=e)):(n=y,y=e);y!==e;)w.push(y),y=n,(P=Ae())!==e?(46===M.charCodeAt(n)?(Q=ar,n++):(Q=e,0===R&&s(Tr)),Q===e&&(Q=null),Q!==e?((z=qe())===e&&(z=null),z!==e?y=P=[P,Q,z]:(n=y,y=e)):(n=y,y=e)):(n=y,y=e);if(w!==e){if(o=C,C=[],null!=o&&null!=o.triplesContext)for(y=0;y<o.triplesContext.length;y++)(P=o.triplesContext[y]).graph=null,C.push(P);if(w&&0<w.length&&0<w[0].length&&(C=C.concat(w[0][0].quadsContext),null!=w[0][2]&&null!=w[0][2].triplesContext))for(y=0;y<w[0][2].triplesContext.length;y++)(P=w[0][2].triplesContext[y]).graph=null,C.push(P);o=C={token:"quads",quadsContext:C}}else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(dr),o}function Ae(){var o,C,w,y,P;for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(M.substr(n,5)===fi?(w=fi,n+=5):(w=e,0===R&&s(qo)),w===e&&(M.substr(n,5)===ci?(w=ci,n+=5):(w=e,0===R&&s(Ps))),w!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if((C=ae())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(123===M.charCodeAt(n)?(y=Jr,n++):(y=e,0===R&&s(Pr)),y!==e){for(y=[],w=K();w!==e;)y.push(w),w=K();if(y!==e)if((w=qe())===e&&(w=null),w!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if(125===M.charCodeAt(n)?(P=Sr,n++):(P=e,0===R&&s(Ar)),P!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e){if(o=C,C=w,w=[],null!=C)for(y=0;y<C.triplesContext.length;y++)(P=C.triplesContext[y]).graph=o,w.push(P);o=C={token:"quadsnottriples",quadsContext:w}}else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e;return R--,o===e&&0===R&&s(zo),o}function qe(){var o,C,w,y,P,Q,z;if(R++,o=n,(C=At())!==e){for(w=n,y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if(46===M.charCodeAt(n)?(P=ar,n++):(P=e,0===R&&s(Tr)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?((z=qe())===e&&(z=null),z!==e?w=y=[y,P,Q,z]:(n=w,w=e)):(n=w,w=e)}else n=w,w=e;else n=w,w=e;w===e&&(w=null),w!==e?(o=C.triplesContext,null!=w&&"object"==typeof w&&null!=w.length&&null!=w[3]&&null!=w[3].triplesContext&&(o=o.concat(w[3].triplesContext)),o=C={token:"triplestemplate",triplesContext:o}):(n=o,o=e)}else n=o,o=e;return R--,o===e&&0===R&&s(Sa),o}function et(){var o,C,w,y;if(R++,o=n,123===M.charCodeAt(n)?(C=Jr,n++):(C=e,0===R&&s(Pr)),C!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();var P;if(w!==e)if(R++,y=n,(P=H())!==e?(C=ee())!==e?(w=se())!==e?(y=P,(P={kind:"select",token:"subselect"}).projection=y.vars,P.modifier=y.modifier,P.pattern=C,null!=w&&null!=w.limit&&(P.limit=w.limit),null!=w&&null!=w.offset&&(P.offset=w.offset),null!=w&&null!=w.order&&""!=w.order&&(P.order=w.order),null!=w&&null!=w.group&&(P.group=w.group),y=P):(n=y,y=e):(n=y,y=e):(n=y,y=e),R--,y===e&&0===R&&s(Fo),(C=y)!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?(125===M.charCodeAt(n)?(y=Sr,n++):(y=e,0===R&&s(Ar)),y!==e?o=C:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;if(o===e)if(o=n,123===M.charCodeAt(n)?(C=Jr,n++):(C=e,0===R&&s(Pr)),C!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e){var Q,z,pe,Ge,Ye;if(R++,w=n,(C=st())===e&&(C=null),C!==e){for(P=[],y=K();y!==e;)P.push(y),y=K();if(P!==e){if(y=[],P=n,(Q=dt())!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();if(z!==e)if(46===M.charCodeAt(n)?(pe=ar,n++):(pe=e,0===R&&s(Tr)),pe===e&&(pe=null),pe!==e){for(Ge=[],Ye=K();Ye!==e;)Ge.push(Ye),Ye=K();Ge!==e?((Ye=st())===e&&(Ye=null),Ye!==e?P=Q=[Q,z,pe,Ge,Ye]:(n=P,P=e)):(n=P,P=e)}else n=P,P=e;else n=P,P=e}else n=P,P=e;for(;P!==e;)if(y.push(P),P=n,(Q=dt())!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();if(z!==e)if(46===M.charCodeAt(n)?(pe=ar,n++):(pe=e,0===R&&s(Tr)),pe===e&&(pe=null),pe!==e){for(Ge=[],Ye=K();Ye!==e;)Ge.push(Ye),Ye=K();Ge!==e?((Ye=st())===e&&(Ye=null),Ye!==e?P=Q=[Q,z,pe,Ge,Ye]:(n=P,P=e)):(n=P,P=e)}else n=P,P=e;else n=P,P=e}else n=P,P=e;if(y!==e){for(P=y,w=[],null!=C&&C!=[]&&w.push(C),C=0;C<P.length;C++)for(y=0;y<P[C].length;y++)null!=P[C][y]&&null!=P[C][y].token&&w.push(P[C][y]);for(P=[],Q=[],z=[],pe=[],C=0;C<w.length;C++)if("triplespattern"!==w[C].token&&"filter"!==w[C].token&&"bind"!==w[C].token){if(0!=Q.length||0!=z.length){for(Ge=[],y=0;y<Q.length;y++)Ge=Ge.concat(Q[y].triplesContext);0<Ge.length&&P.push({token:"basicgraphpattern",triplesContext:Ge}),Q=[]}P.push(w[C])}else"triplespattern"===w[C].token?Q.push(w[C]):"bind"===w[C].token?pe.push(w[C]):z.push(w[C]);if(0!=Q.length||0!=z.length){for(Ge=[],y=0;y<Q.length;y++)Ge=Ge.concat(Q[y].triplesContext);0<Ge.length&&P.push({token:"basicgraphpattern",triplesContext:Ge})}w=C={token:"groupgraphpattern",patterns:P,filters:z,binds:pe}}else n=w,w=e}else n=w,w=e}else n=w,w=e;if(R--,w===e&&0===R&&s(_a),(C=w)!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?(125===M.charCodeAt(n)?(y=Sr,n++):(y=e,0===R&&s(Ar)),y!==e?o=C:(n=o,o=e)):(n=o,o=e)}else n=o,o=e}else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(Fa),o}function st(){var o,C,w,y,P,Q;for(R++,o=n,R++,w=n,y=[],C=K();C!==e;)y.push(C),C=K();if(y!==e)if((C=X())!==e){for(P=[],y=K();y!==e;)P.push(y),y=K();if(P!==e)if((y=cr())!==e){if(w=C,C=y.triplesContext,y.pairs)for(P=0;P<y.pairs.length;P++){var z=null;null!=(Q=y.pairs[P])[1].length&&(Q[1]=Q[1][0]),w.token&&"triplesnodecollection"===w.token?("path"===(z={subject:w.chainSubject[0],predicate:Q[0],object:Q[1]}).predicate.token&&"element"===z.predicate.kind&&(z.predicate=z.predicate.value),C.push(z),C=C.concat(w.triplesContext)):("path"===(z={subject:w,predicate:Q[0],object:Q[1]}).predicate.token&&"element"===z.predicate.kind&&(z.predicate=z.predicate.value),C.push(z))}(y={token:"triplessamesubject"}).triplesContext=C,y.chainSubject=w,w=y}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e;if(w===e){for(w=n,y=[],C=K();C!==e;)y.push(C),C=K();if(y!==e)if((C=De())!==e){for(P=[],y=K();y!==e;)P.push(y),y=K();if(P!==e){var pe,Ge,Ye,ut,ht,Ct,Qt,Ht;if(R++,R++,Q=n,(z=tr())===e&&(z=mr()),z!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if((P=It())!==e){for(y=[],pe=n,Ge=[],Ye=K();Ye!==e;)Ge.push(Ye),Ye=K();if(Ge!==e)if(59===M.charCodeAt(n)?(Ye=sn,n++):(Ye=e,0===R&&s(Kr)),Ye!==e){for(ut=[],ht=K();ht!==e;)ut.push(ht),ht=K();if(ut!==e){if(ht=n,(Ct=tr())===e&&(Ct=mr()),Ct!==e){for(Qt=[],Ht=K();Ht!==e;)Qt.push(Ht),Ht=K();Qt!==e?(Ht=St())!==e?ht=Ct=[Ct,Qt,Ht]:(n=ht,ht=e):(n=ht,ht=e)}else n=ht,ht=e;ht===e&&(ht=null),ht!==e?pe=Ge=[Ge,Ye,ut,ht]:(n=pe,pe=e)}else n=pe,pe=e}else n=pe,pe=e;else n=pe,pe=e;for(;pe!==e;){for(y.push(pe),pe=n,Ge=[],Ye=K();Ye!==e;)Ge.push(Ye),Ye=K();if(Ge!==e)if(59===M.charCodeAt(n)?(Ye=sn,n++):(Ye=e,0===R&&s(Kr)),Ye!==e){for(ut=[],ht=K();ht!==e;)ut.push(ht),ht=K();if(ut!==e){if(ht=n,(Ct=tr())===e&&(Ct=mr()),Ct!==e){for(Qt=[],Ht=K();Ht!==e;)Qt.push(Ht),Ht=K();Qt!==e?(Ht=St())!==e?ht=Ct=[Ct,Qt,Ht]:(n=ht,ht=e):(n=ht,ht=e)}else n=ht,ht=e;ht===e&&(ht=null),ht!==e?pe=Ge=[Ge,Ye,ut,ht]:(n=pe,pe=e)}else n=pe,pe=e}else n=pe,pe=e;else n=pe,pe=e}if(y!==e){for(Ge=z,Ye=P,P={token:"propertylist"},Q=[],z=[],pe=0;pe<Ye.length;pe++)null!=Ye[pe].triplesContext?(Q=Q.concat(Ye[pe].triplesContext),"triplesnodecollection"===Ye[pe].token&&null!=Ye[pe].chainSubject.length?z.push([Ge,Ye[pe].chainSubject[0]]):z.push([Ge,Ye[pe].chainSubject])):z.push([Ge,Ye[pe]]);for(pe=0;pe<y.length;pe++)for(Ge=(Ye=y[pe][3])[0],Ye=Ye[2]||[],ut=0;ut<Ye.length;ut++)null!=Ye[ut].triplesContext?(Q=Q.concat(Ye[ut].triplesContext),z.push([Ge,Ye[ut].chainSubject])):z.push([Ge,Ye[ut]]);P.pairs=z,P.triplesContext=Q,Q=P}else n=Q,Q=e}else n=Q,Q=e;else n=Q,Q=e}else n=Q,Q=e;if(R--,Q===e&&0===R&&s(Cu),(y=Q)===e&&(y=null),R--,y===e&&0===R&&s(_u),y!==e){if(P=y,C=(w=C).triplesContext,y=w.chainSubject,null!=P&&null!=P.pairs)for(Q=0;Q<P.pairs.length;Q++)if(null!=(z=P.pairs[Q])[1].length&&(z[1]=z[1][0]),"triplesnodecollection"===w.token)for(pe=0;pe<y.length;pe++)null!=(Ge=y[pe]).triplesContext?(Ye={subject:Ge.chainSubject,predicate:z[0],object:z[1]},C.concat(Ge.triplesContext)):(Ye={subject:y[pe],predicate:z[0],object:z[1]},C.push(Ye));else Ye={subject:y,predicate:z[0],object:z[1]},C.push(Ye);(w={token:"triplessamesubject"}).triplesContext=C,w.chainSubject=y}else n=w,w=e}else n=w,w=e}else n=w,w=e;else n=w,w=e}if(R--,w===e&&0===R&&s(Su),(C=w)!==e){for(w=n,y=[],P=K();P!==e;)y.push(P),P=K();y!==e?(46===M.charCodeAt(n)?(P=ar,n++):(P=e,0===R&&s(Tr)),P!==e?((Q=st())===e&&(Q=null),Q!==e?w=y=[y,P,Q]:(n=w,w=e)):(n=w,w=e)):(n=w,w=e),w===e&&(w=null),w!==e?(o=C.triplesContext,null!=w&&"object"==typeof w&&null!=w&&null!=w.length&&null!=w[2]&&null!=w[2].triplesContext&&(o=o.concat(w[2].triplesContext)),o=C={token:"triplespattern",triplesContext:o}):(n=o,o=e)}else n=o,o=e;return R--,o===e&&0===R&&s(Qs),o}function dt(){var o,C,w,y,P,Q,z,pe;if(R++,R++,C=n,(w=et())!==e){for(o=[],y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(M.substr(n,5)===Er?(Q=Er,n+=5):(Q=e,0===R&&s(Gt)),Q===e&&(M.substr(n,5)===Ur?(Q=Ur,n+=5):(Q=e,0===R&&s(Tn))),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=et())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;for(;y!==e;){for(o.push(y),y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(M.substr(n,5)===Er?(Q=Er,n+=5):(Q=e,0===R&&s(Gt)),Q===e&&(M.substr(n,5)===Ur?(Q=Ur,n+=5):(Q=e,0===R&&s(Tn))),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=et())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e}if(o!==e){if(0!==o.length){for(C={token:"graphunionpattern",value:[w]},w=0;w<o.length;w++)w==o.length-1?C.value.push(o[w][3]):(C.value.push(o[w][3]),C={token:"graphunionpattern",value:[C]});w=C}C=w}else n=C,C=e}else n=C,C=e;if(R--,C===e&&0===R&&s(du),(o=C)===e){for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(M.substr(n,8)===cu?(w=cu,n+=8):(w=e,0===R&&s(Gs)),w===e&&(M.substr(n,8)===Jo?(w=Jo,n+=8):(w=e,0===R&&s(hu))),w!==e){for(C=[],w=K();w!==e;)C.push(w),w=K();C!==e?(w=et())!==e?o=C={token:"optionalgraphpattern",value:w}:(n=o,o=e):(n=o,o=e)}else n=o,o=e;else n=o,o=e;if(R--,o===e&&0===R&&s(Us),o===e){if(R++,o=n,M.substr(n,5)===lo?(C=lo,n+=5):(C=e,0===R&&s(Ln)),C===e&&(M.substr(n,5)===Ws?(C=Ws,n+=5):(C=e,0===R&&s(La))),C!==e){for(C=[],w=K();w!==e;)C.push(w),w=K();C!==e?(w=et())!==e?o=C={token:"minusgraphpattern",status:"todo",value:w}:(n=o,o=e):(n=o,o=e)}else n=o,o=e;if(R--,o===e&&0===R&&s(Aa),o===e){for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(M.substr(n,5)===fi?(w=fi,n+=5):(w=e,0===R&&s(qo)),w===e&&(M.substr(n,5)===ci?(w=ci,n+=5):(w=e,0===R&&s(Ps))),w!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if((C=ae())!==e){for(y=[],w=K();w!==e;)y.push(w),w=K();if(y!==e)if((w=et())!==e){for(o=C,C=w,w=0;w<C.patterns.length;w++)for(y=C.patterns[w],P=0;P<y.triplesContext.length;P++)y.triplesContext[P].graph=o;C.token="groupgraphpattern",o=C}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e;if(R--,o===e&&0===R&&s(pu),o===e&&(R++,o=n,M.substr(n,7)===Xs?(C=Xs,n+=7):(C=e,0===R&&s(so)),C!==e?(C=ae())!==e?(w=et())!==e?o=C={token:"servicegraphpattern",status:"todo",value:[C,w]}:(n=o,o=e):(n=o,o=e):(n=o,o=e),R--,o===e&&0===R&&s(Hs),o===e)){for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(M.substr(n,6)===qs?(w=qs,n+=6):(w=e,0===R&&s(zs)),w===e&&(M.substr(n,6)===Js?(w=Js,n+=6):(w=e,0===R&&s(Ta))),w!==e){for(C=[],w=K();w!==e;)C.push(w),w=K();C!==e?(w=xt())!==e?o=C={token:"filter",value:w}:(n=o,o=e):(n=o,o=e)}else n=o,o=e;else n=o,o=e;if(R--,o===e&&0===R&&s(Xn),o===e){for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(M.substr(n,4)===Ai?(w=Ai,n+=4):(w=e,0===R&&s(gu)),w===e&&(M.substr(n,4)===Ko?(w=Ko,n+=4):(w=e,0===R&&s(Wn))),w!==e){for(C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(40===M.charCodeAt(n)?(w=jt,n++):(w=e,0===R&&s(Ot)),w!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if((C=te())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(M.substr(n,2)===On?(y=On,n+=2):(y=e,0===R&&s(Xi)),y===e&&(M.substr(n,2)===Cn?(y=Cn,n+=2):(y=e,0===R&&s(To))),y!==e){for(y=[],w=K();w!==e;)y.push(w),w=K();if(y!==e)if((w=ne())!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();y!==e?(41===M.charCodeAt(n)?(P=Et,n++):(P=e,0===R&&s(Dt)),P!==e?o=C={token:"bind",expression:C,as:w}:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e;if(R--,o===e&&0===R&&s(Ks),o===e){for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(M.substr(n,6)===Po?(w=Po,n+=6):(w=e,0===R&&s(Es)),w===e&&(M.substr(n,6)===Zi?(w=Zi,n+=6):(w=e,0===R&&s(xi))),w!==e){for(C=[],w=K();w!==e;)C.push(w),w=K();C!==e?(w=Pt())!==e?o=w:(n=o,o=e):(n=o,o=e)}else n=o,o=e;else n=o,o=e;R--,o===e&&0===R&&s(yu)}}}}}}return R--,o===e&&0===R&&s(fu),o}function xt(){var o;return R++,(o=je())===e&&((o=Re())===e&&(o=tt())),R--,o===e&&0===R&&s(vu),o}function Pt(){var o,C,w,y;for(R++,R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if((w=ne())!==e){for(C=[],y=K();y!==e;)C.push(y),y=K();if(C!==e)if(123===M.charCodeAt(n)?(y=Jr,n++):(y=e,0===R&&s(Pr)),y!==e){for(y=[],C=K();C!==e;)y.push(C),C=K();if(y!==e){for(C=[],y=Wt();y!==e;)C.push(y),y=Wt();C!==e?(125===M.charCodeAt(n)?(y=Sr,n++):(y=e,0===R&&s(Ar)),y!==e?o=C={token:"inlineData",values:[{var:w,value:C}]}:(n=o,o=e)):(n=o,o=e)}else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e;if(R--,o===e&&0===R&&s(Vo),o===e){var P,Q,z,pe,Ge,Ye,ut;for(R++,o=n,w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e){if((y=Br())===e)if(y=n,40===M.charCodeAt(n)?(P=jt,n++):(P=e,0===R&&s(Ot)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e){for(z=[],w=ne();w!==e;)z.push(w),w=ne();if(z!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();w!==e?(41===M.charCodeAt(n)?(C=Et,n++):(C=e,0===R&&s(Dt)),C!==e?y=P=[P,Q,z,w,C]:(n=y,y=e)):(n=y,y=e)}else n=y,y=e}else n=y,y=e}else n=y,y=e;if(y!==e){for(P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(123===M.charCodeAt(n)?(Q=Jr,n++):(Q=e,0===R&&s(Pr)),Q!==e){for(z=[],w=K();w!==e;)z.push(w),w=K();if(z!==e){for(w=[],C=n,y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if(40===M.charCodeAt(n)?(P=jt,n++):(P=e,0===R&&s(Ot)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e){for(z=[],pe=Wt();pe!==e;)z.push(pe),pe=Wt();if(z!==e){for(pe=[],Ge=K();Ge!==e;)pe.push(Ge),Ge=K();if(pe!==e)if(41===M.charCodeAt(n)?(Ge=Et,n++):(Ge=e,0===R&&s(Dt)),Ge!==e){for(Ye=[],ut=K();ut!==e;)Ye.push(ut),ut=K();Ye!==e?C=y=[y,P,Q,z,pe,Ge,Ye]:(n=C,C=e)}else n=C,C=e;else n=C,C=e}else n=C,C=e}else n=C,C=e}else n=C,C=e;else n=C,C=e;for(C===e&&(C=Br());C!==e;){for(w.push(C),C=n,y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if(40===M.charCodeAt(n)?(P=jt,n++):(P=e,0===R&&s(Ot)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e){for(z=[],pe=Wt();pe!==e;)z.push(pe),pe=Wt();if(z!==e){for(pe=[],Ge=K();Ge!==e;)pe.push(Ge),Ge=K();if(pe!==e)if(41===M.charCodeAt(n)?(Ge=Et,n++):(Ge=e,0===R&&s(Dt)),Ge!==e){for(Ye=[],ut=K();ut!==e;)Ye.push(ut),ut=K();Ye!==e?C=y=[y,P,Q,z,pe,Ge,Ye]:(n=C,C=e)}else n=C,C=e;else n=C,C=e}else n=C,C=e}else n=C,C=e}else n=C,C=e;else n=C,C=e;C===e&&(C=Br())}if(w!==e){for(C=[],y=K();y!==e;)C.push(y),y=K();C!==e?(125===M.charCodeAt(n)?(y=Sr,n++):(y=e,0===R&&s(Ar)),y!==e?o=w={token:"inlineData",values:[],todo:!0}:(n=o,o=e)):(n=o,o=e)}else n=o,o=e}else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e}else n=o,o=e;R--,o===e&&0===R&&s(Vs)}return R--,o===e&&0===R&&s(Ea),o}function Wt(){var o,C,w,y;for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if((w=Nt())===e&&((w=He())===e&&((w=Ze())===e&&((w=Ft())===e&&(M.substr(n,5)===Yi?(w=Yi,n+=5):(w=e,0===R&&s(ql)))))),w!==e){for(C=[],y=K();y!==e;)C.push(y),y=K();C!==e?o=w:(n=o,o=e)}else n=o,o=e;else n=o,o=e;return R--,o===e&&0===R&&s(mu),o}function tt(){var o,C,w,y;if(R++,o=n,(C=wt())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?(y=it())!==e?((o={token:"expression",expressionType:"irireforfunction"}).iriref=C,o.args=y.value):(n=o,o=e):(n=o,o=e)}else n=o,o=e;return R--,o===e&&0===R&&s(Ia),o}function it(){var o,C,w,y,P,Q,z,pe;if(R++,(C=Br())!==e&&(C={token:"args",value:[]}),(o=C)===e)if(o=n,40===M.charCodeAt(n)?(C=jt,n++):(C=e,0===R&&s(Ot)),C!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if(M.substr(n,8)===Jt?(C=Jt,n+=8):(C=e,0===R&&s(xn)),C===e&&(M.substr(n,8)===kr?(C=kr,n+=8):(C=e,0===R&&s(qr))),C===e&&(C=null),C!==e){for(y=[],w=K();w!==e;)y.push(w),w=K();if(y!==e)if((w=te())!==e){for(P=[],y=K();y!==e;)P.push(y),y=K();if(P!==e){if(y=[],P=n,44===M.charCodeAt(n)?(Q=gr,n++):(Q=e,0===R&&s(vr)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=te())!==e?P=Q=[Q,z,pe]:(n=P,P=e):(n=P,P=e)}else n=P,P=e;for(;P!==e;)if(y.push(P),P=n,44===M.charCodeAt(n)?(Q=gr,n++):(Q=e,0===R&&s(vr)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=te())!==e?P=Q=[Q,z,pe]:(n=P,P=e):(n=P,P=e)}else n=P,P=e;if(y!==e)if(41===M.charCodeAt(n)?(P=Et,n++):(P=e,0===R&&s(Dt)),P!==e){for(o=C,C=w,w=[],P=0;P<y.length;P++)w.push(y[P][2]);(y={token:"args"}).value=[C].concat(w),null!=o&&"DISTINCT"===o.toUpperCase()?y.distinct=!0:y.distinct=!1,o=y}else n=o,o=e;else n=o,o=e}else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(wu),o}function vt(){var o,C,w,y,P,Q,z;if(R++,(C=Br())!==e&&(C={token:"args",value:[]}),(o=C)===e)if(o=n,40===M.charCodeAt(n)?(C=jt,n++):(C=e,0===R&&s(Ot)),C!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if((C=wt())===e&&(C=te()),C!==e){for(y=[],w=K();w!==e;)y.push(w),w=K();if(y!==e){if(w=[],y=n,44===M.charCodeAt(n)?(P=gr,n++):(P=e,0===R&&s(vr)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?((z=wt())===e&&(z=te()),z!==e?y=P=[P,Q,z]:(n=y,y=e)):(n=y,y=e)}else n=y,y=e;for(;y!==e;)if(w.push(y),y=n,44===M.charCodeAt(n)?(P=gr,n++):(P=e,0===R&&s(vr)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?((z=wt())===e&&(z=te()),z!==e?y=P=[P,Q,z]:(n=y,y=e)):(n=y,y=e)}else n=y,y=e;if(w!==e)if(41===M.charCodeAt(n)?(y=Et,n++):(y=e,0===R&&s(Dt)),y!==e){for(o=C,C=[],y=0;y<w.length;y++)C.push(w[y][2]);(w={token:"args"}).value=[o].concat(C),o=w}else n=o,o=e;else n=o,o=e}else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(Yo),o}function ct(){var o,C,w,y,P,Q,z;if(R++,o=n,(C=At())!==e){for(w=n,y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if(46===M.charCodeAt(n)?(P=ar,n++):(P=e,0===R&&s(Tr)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?((z=ct())===e&&(z=null),z!==e?w=y=[y,P,Q,z]:(n=w,w=e)):(n=w,w=e)}else n=w,w=e;else n=w,w=e;w===e&&(w=null),w!==e?(o=C.triplesContext,null!=w&&"object"==typeof w&&null!=w.length&&null!=w[3]&&null!=w[3].triplesContext&&(o=o.concat(w[3].triplesContext)),o=C={token:"triplestemplate",triplesContext:o}):(n=o,o=e)}else n=o,o=e;return R--,o===e&&0===R&&s(Na),o}function At(){var o,C,w,y;for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if((w=X())!==e){for(y=[],C=K();C!==e;)y.push(C),C=K();if(y!==e)if((C=yt())!==e){if(o=C.triplesContext,C.pairs)for(y=0;y<C.pairs.length;y++){var P=C.pairs[y],Q=null;null!=P[1].length&&(P[1]=P[1][0]),w.token&&"triplesnodecollection"===w.token?(Q={subject:w.chainSubject[0],predicate:P[0],object:P[1]},o.push(Q),o=o.concat(w.triplesContext)):(Q={subject:w,predicate:P[0],object:P[1]},o.push(Q))}(C={token:"triplessamesubject"}).triplesContext=o,C.chainSubject=w,o=C}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e;if(o===e){for(o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if((w=Qe())!==e){for(y=[],C=K();C!==e;)y.push(C),C=K();if(y!==e)if(R++,(C=yt())===e&&(C=null),R--,C===e&&0===R&&s(Ys),C!==e){if(y=C,o=w.triplesContext,C=w.chainSubject,y.pairs)for(P=0;P<y.pairs.length;P++)if(null!=(Q=y.pairs[P])[1].length&&(Q[1]=Q[1][0]),"triplesnodecollection"===w.token)for(var z=0;z<C.length;z++){var pe=C[z];if(null!=pe.triplesContext){var Ge={subject:pe.chainSubject,predicate:Q[0],object:Q[1]};o.concat(pe.triplesContext)}else Ge={subject:C[z],predicate:Q[0],object:Q[1]},o.push(Ge)}else Ge={subject:C,predicate:Q[0],object:Q[1]},o.push(Ge);(w={token:"triplessamesubject"}).triplesContext=o,w.chainSubject=C,o=w}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}return R--,o===e&&0===R&&s(Ma),o}function yt(){var o,C,w,y,P,Q,z,pe,Ge,Ye,ut,ht;if(R++,o=n,(C=Rr())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if((y=St())!==e){for(w=[],P=n,Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e)if(59===M.charCodeAt(n)?(z=sn,n++):(z=e,0===R&&s(Kr)),z!==e){for(pe=[],Ge=K();Ge!==e;)pe.push(Ge),Ge=K();if(pe!==e){if(Ge=n,(Ye=Rr())!==e){for(ut=[],ht=K();ht!==e;)ut.push(ht),ht=K();ut!==e?(ht=St())!==e?Ge=Ye=[Ye,ut,ht]:(n=Ge,Ge=e):(n=Ge,Ge=e)}else n=Ge,Ge=e;Ge===e&&(Ge=null),Ge!==e?P=Q=[Q,z,pe,Ge]:(n=P,P=e)}else n=P,P=e}else n=P,P=e;else n=P,P=e;for(;P!==e;){for(w.push(P),P=n,Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e)if(59===M.charCodeAt(n)?(z=sn,n++):(z=e,0===R&&s(Kr)),z!==e){for(pe=[],Ge=K();Ge!==e;)pe.push(Ge),Ge=K();if(pe!==e){if(Ge=n,(Ye=Rr())!==e){for(ut=[],ht=K();ht!==e;)ut.push(ht),ht=K();ut!==e?(ht=St())!==e?Ge=Ye=[Ye,ut,ht]:(n=Ge,Ge=e):(n=Ge,Ge=e)}else n=Ge,Ge=e;Ge===e&&(Ge=null),Ge!==e?P=Q=[Q,z,pe,Ge]:(n=P,P=e)}else n=P,P=e}else n=P,P=e;else n=P,P=e}if(w!==e){for(Q=C,z=y,y={token:"propertylist"},o=[],C=[],P=0;P<z.length;P++)null!=z[P].triplesContext?(o=o.concat(z[P].triplesContext),"triplesnodecollection"===z[P].token&&null!=z[P].chainSubject.length?C.push([Q,z[P].chainSubject[0]]):C.push([Q,z[P].chainSubject])):C.push([Q,z[P]]);for(P=0;P<w.length;P++)for(Q=(z=w[P][3])[0],z=z[2]||[],pe=0;pe<z.length;pe++)null!=z[pe].triplesContext?(o=o.concat(z[pe].triplesContext),C.push([Q,z[pe].chainSubject])):C.push([Q,z[pe]]);y.pairs=C,y.triplesContext=o,o=y}else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(Li),o}function It(){var o,C,w,y,P,Q,z;if(R++,o=n,(C=Ut())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e){if(y=[],w=n,44===M.charCodeAt(n)?(P=gr,n++):(P=e,0===R&&s(vr)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?(z=Ut())!==e?w=P=[P,Q,z]:(n=w,w=e):(n=w,w=e)}else n=w,w=e;for(;w!==e;)if(y.push(w),w=n,44===M.charCodeAt(n)?(P=gr,n++):(P=e,0===R&&s(vr)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?(z=Ut())!==e?w=P=[P,Q,z]:(n=w,w=e):(n=w,w=e)}else n=w,w=e;if(y!==e){for(o=y,(y=[]).push(C),C=0;C<o.length;C++)for(w=0;w<o[C].length;w++)"object"==typeof o[C][w]&&null!=o[C][w].token&&y.push(o[C][w]);o=y}else n=o,o=e}else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(Zo),o}function St(){var o,C,w,y,P,Q,z;if(R++,o=n,(C=Xr())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e){if(y=[],w=n,44===M.charCodeAt(n)?(P=gr,n++):(P=e,0===R&&s(vr)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?(z=Xr())!==e?w=P=[P,Q,z]:(n=w,w=e):(n=w,w=e)}else n=w,w=e;for(;w!==e;)if(y.push(w),w=n,44===M.charCodeAt(n)?(P=gr,n++):(P=e,0===R&&s(vr)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?(z=Xr())!==e?w=P=[P,Q,z]:(n=w,w=e):(n=w,w=e)}else n=w,w=e;if(y!==e){for(o=y,(y=[]).push(C),C=0;C<o.length;C++)for(w=0;w<o[C].length;w++)"object"==typeof o[C][w]&&null!=o[C][w].token&&y.push(o[C][w]);o=y}else n=o,o=e}else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(bu),o}function Ut(){var o;return R++,o=G(),R--,o===e&&0===R&&s(Zs),o}function Xr(){var o;return R++,o=J(),R--,o===e&&0===R&&s(ku),o}function Rr(){var o;return R++,(o=ae())===e&&(97===M.charCodeAt(n)?(o=uo,n++):(o=e,0===R&&s(fr)),o!==e&&(o=ao())),R--,o===e&&0===R&&s(ja),o}function cr(){var o,C,w,y,P,Q,z,pe,Ge,Ye,ut;if(R++,o=n,(C=tr())===e&&(C=mr()),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if((y=It())!==e){for(w=[],P=n,Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e)if(59===M.charCodeAt(n)?(z=sn,n++):(z=e,0===R&&s(Kr)),z!==e){for(pe=[],Ge=K();Ge!==e;)pe.push(Ge),Ge=K();pe!==e?(Ge=n,(Ye=tr())===e&&(Ye=mr()),Ye!==e?(ut=St())!==e?Ge=Ye=[Ye,ut]:(n=Ge,Ge=e):(n=Ge,Ge=e),Ge===e&&(Ge=null),Ge!==e?P=Q=[Q,z,pe,Ge]:(n=P,P=e)):(n=P,P=e)}else n=P,P=e;else n=P,P=e;for(;P!==e;){for(w.push(P),P=n,Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e)if(59===M.charCodeAt(n)?(z=sn,n++):(z=e,0===R&&s(Kr)),z!==e){for(pe=[],Ge=K();Ge!==e;)pe.push(Ge),Ge=K();pe!==e?(Ge=n,(Ye=tr())===e&&(Ye=mr()),Ye!==e?(ut=St())!==e?Ge=Ye=[Ye,ut]:(n=Ge,Ge=e):(n=Ge,Ge=e),Ge===e&&(Ge=null),Ge!==e?P=Q=[Q,z,pe,Ge]:(n=P,P=e)):(n=P,P=e)}else n=P,P=e;else n=P,P=e}if(w!==e){for(Q=C,z=y,y={token:"propertylist"},o=[],C=[],P=0;P<z.length;P++)null!=z[P].triplesContext?(o=o.concat(z[P].triplesContext),"triplesnodecollection"===z[P].token&&null!=z[P].chainSubject.length?C.push([Q,z[P].chainSubject[0]]):C.push([Q,z[P].chainSubject])):C.push([Q,z[P]]);for(P=0;P<w.length;P++)for(Q=(z=w[P][3])[0],z=z[1]||[],pe=0;pe<z.length;pe++)null!=z[pe].triplesContext?(o=o.concat(z[pe].triplesContext),C.push([Q,z[pe].chainSubject])):C.push([Q,z[pe]]);y.pairs=C,y.triplesContext=o,o=y}else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(Fu),o}function tr(){var o;return R++,o=Xe(),R--,o===e&&0===R&&s(Ti),o}function mr(){var o;return R++,o=ne(),R--,o===e&&0===R&&s($o),o}function Xe(){var o,C,w,y,P,Q;if(R++,R++,C=n,(w=Je())!==e){for(o=[],y=n,124===M.charCodeAt(n)?(P=fo,n++):(P=e,0===R&&s(En)),P!==e?(Q=Je())!==e?y=P=[P,Q]:(n=y,y=e):(n=y,y=e);y!==e;)o.push(y),y=n,124===M.charCodeAt(n)?(P=fo,n++):(P=e,0===R&&s(En)),P!==e?(Q=Je())!==e?y=P=[P,Q]:(n=y,y=e):(n=y,y=e);if(o!==e){if(null!=o&&0!==o.length){for(C=[],w=0;w<o.length;w++)C.push(o[1]);(o={token:"path",kind:"alternative"}).value=C,w=o}C=w}else n=C,C=e}else n=C,C=e;return R--,C===e&&0===R&&s(Lu),R--,(o=C)===e&&0===R&&s(Au),o}function Je(){var o,C,w,y,P,Q;if(R++,o=n,(C=ie())!==e){for(w=[],y=n,47===M.charCodeAt(n)?(P=dn,n++):(P=e,0===R&&s(qn)),P!==e?(Q=ie())!==e?y=P=[P,Q]:(n=y,y=e):(n=y,y=e);y!==e;)w.push(y),y=n,47===M.charCodeAt(n)?(P=dn,n++):(P=e,0===R&&s(qn)),P!==e?(Q=ie())!==e?y=P=[P,Q]:(n=y,y=e):(n=y,y=e);if(w!==e){if(null!=w&&0!==w.length){for(o=[C],C=0;C<w.length;C++)o.push(w[C][1]);(w={token:"path",kind:"sequence"}).value=o,C=w}o=C}else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(Tu),o}function Pe(){var o,C,w,y;if(R++,o=n,R++,(C=wt())===e&&(97===M.charCodeAt(n)?(w=uo,n++):(w=e,0===R&&s(fr)),w!==e&&(w=ao()),(C=w)===e)){if(C=n,33===M.charCodeAt(n)?(w=ts,n++):(w=e,0===R&&s(el)),w!==e){var P,Q,z,pe,Ge,Ye,ut;if((y=be())===e)if(y=n,40===M.charCodeAt(n)?(P=jt,n++):(P=e,0===R&&s(Ot)),P!==e){if(Q=n,(z=be())!==e){for(pe=[],Ge=n,124===M.charCodeAt(n)?(Ye=fo,n++):(Ye=e,0===R&&s(En)),Ye!==e?(ut=be())!==e?Ge=Ye=[Ye,ut]:(n=Ge,Ge=e):(n=Ge,Ge=e);Ge!==e;)pe.push(Ge),Ge=n,124===M.charCodeAt(n)?(Ye=fo,n++):(Ye=e,0===R&&s(En)),Ye!==e?(ut=be())!==e?Ge=Ye=[Ye,ut]:(n=Ge,Ge=e):(n=Ge,Ge=e);pe!==e?Q=z=[z,pe]:(n=Q,Q=e)}else n=Q,Q=e;Q===e&&(Q=null),Q!==e?(41===M.charCodeAt(n)?(z=Et,n++):(z=e,0===R&&s(Dt)),z!==e?y=P=[P,Q,z]:(n=y,y=e)):(n=y,y=e)}else n=y,y=e;y!==e?C=w=[w,y]:(n=C,C=e)}else n=C,C=e;C===e&&(C=n,40===M.charCodeAt(n)?(w=jt,n++):(w=e,0===R&&s(Ot)),w!==e?(y=Xe())!==e?(41===M.charCodeAt(n)?(w=Et,n++):(w=e,0===R&&s(Dt)),w!==e?C=y:(n=C,C=e)):(n=C,C=e):(n=C,C=e))}if(R--,C===e&&0===R&&s(ho),C!==e)if(R++,42===M.charCodeAt(n)?(w=bn,n++):(w=e,0===R&&s(zr)),w===e&&(63===M.charCodeAt(n)?(w=es,n++):(w=e,0===R&&s(di)),w===e&&(43===M.charCodeAt(n)?(w=Yr,n++):(w=e,0===R&&s(Zr)),w===e&&(w=n,123===M.charCodeAt(n)?(y=Jr,n++):(y=e,0===R&&s(Pr)),y!==e?(P=n,(Q=Te())!==e?(z=n,44===M.charCodeAt(n)?(pe=gr,n++):(pe=e,0===R&&s(vr)),pe!==e?(125===M.charCodeAt(n)?(Ge=Sr,n++):(Ge=e,0===R&&s(Ar)),Ge===e&&(Ge=n,(Ye=Te())!==e?(125===M.charCodeAt(n)?(ut=Sr,n++):(ut=e,0===R&&s(Ar)),ut!==e?Ge=Ye=[Ye,ut]:(n=Ge,Ge=e)):(n=Ge,Ge=e)),Ge!==e?z=pe=[pe,Ge]:(n=z,z=e)):(n=z,z=e),z===e&&(125===M.charCodeAt(n)?(z=Sr,n++):(z=e,0===R&&s(Ar))),z!==e?P=Q=[Q,z]:(n=P,P=e)):(n=P,P=e),P===e&&(P=n,44===M.charCodeAt(n)?(Q=gr,n++):(Q=e,0===R&&s(vr)),Q!==e?(z=Te())!==e?(125===M.charCodeAt(n)?(pe=Sr,n++):(pe=e,0===R&&s(Ar)),pe!==e?P=Q=[Q,z,pe]:(n=P,P=e)):(n=P,P=e):(n=P,P=e)),P!==e?w=y=[y,P]:(n=w,w=e)):(n=w,w=e)))),R--,w===e&&0===R&&s(Eu),w===e&&(w=null),w!==e){if(o=C,C=w,o.token&&"path"!=o.token&&""==C)C=o;else if(o.token&&o.token!=ht&&""!=C){var ht={token:"path",kind:"element"};ht.value=o,ht.modifier=C,C=ht}else o.modifier=C,C=o;o=C}else n=o,o=e;else n=o,o=e;return R--,o===e&&0===R&&s(co),o}function ie(){var o,C;return R++,(o=Pe())===e&&(o=n,94===M.charCodeAt(n)?(C=pi,n++):(C=e,0===R&&s($s)),C!==e?(C=Pe())!==e?(o={token:"path",kind:"inversePath"}).value=C:(n=o,o=e):(n=o,o=e)),R--,o===e&&0===R&&s(Oa),o}function be(){var o,C,w;return R++,(o=wt())===e&&(97===M.charCodeAt(n)?(o=uo,n++):(o=e,0===R&&s(fr)),o===e&&(o=n,94===M.charCodeAt(n)?(C=pi,n++):(C=e,0===R&&s($s)),C!==e?((w=wt())===e&&(97===M.charCodeAt(n)?(w=uo,n++):(w=e,0===R&&s(fr))),w!==e?o=C=[C,w]:(n=o,o=e)):(n=o,o=e))),R--,o===e&&0===R&&s(Iu),o}function Te(){var o;return R++,o=Rt(),R--,o===e&&0===R&&s(zn),o}function De(){var o,C,w,y;for(R++,R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(40===M.charCodeAt(n)?(w=jt,n++):(w=e,0===R&&s(Ot)),w!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e){if(C=[],(w=G())!==e)for(;w!==e;)C.push(w),w=G();else C=e;if(C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(41===M.charCodeAt(n)?(y=Et,n++):(y=e,0===R&&s(Dt)),y!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?o=C:(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e}else n=o,o=e}else n=o,o=e;else n=o,o=e;if(R--,o===e&&0===R&&s(Nu),o!==e){C=[],w=[];var P=null;for(y=0;y<o.length;y++)Hr++,P=null,null==o[y].chainSubject&&null==o[y].triplesContext?P=o[y]:(P=o[y].chainSubject,C=C.concat(o[y].triplesContext)),P={subject:{token:"blank",value:"_:"+Hr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:P},0==y&&w.push(P.subject),C.push(P),P=y===o.length-1?{subject:{token:"blank",value:"_:"+Hr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Hr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Hr+1)}},C.push(P);o={token:"triplesnodecollection",triplesContext:C,chainSubject:w}}if(o===e){for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(91===M.charCodeAt(n)?(w=rs,n++):(w=e,0===R&&s(tl)),w!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if((C=cr())!==e)if(93===M.charCodeAt(n)?(w=rl,n++):(w=e,0===R&&s(nl)),w!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e){for(o=C,C={token:"blank",value:"_:"+ ++Hr},w=[],y=0;y<o.pairs.length;y++){P=o.pairs[y];var Q={};Q.subject=C,Q.predicate=P[0],null!=P[1].length&&(P[1]=P[1][0]),Q.object=P[1],w.push(Q)}o=C={token:"triplesnode",kind:"blanknodepropertylist",triplesContext:o.triplesContext.concat(w),chainSubject:C}}else n=o,o=e}else n=o,o=e;else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e;R--,o===e&&0===R&&s(Da)}return R--,o===e&&0===R&&s(Ei),o}function Qe(){var o,C,w,y;for(R++,R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(40===M.charCodeAt(n)?(w=jt,n++):(w=e,0===R&&s(Ot)),w!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e){if(C=[],(w=J())!==e)for(;w!==e;)C.push(w),w=J();else C=e;if(C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(41===M.charCodeAt(n)?(y=Et,n++):(y=e,0===R&&s(Dt)),y!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?o=C:(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e}else n=o,o=e}else n=o,o=e;else n=o,o=e;if(R--,o===e&&0===R&&s(Ra),o!==e){C=[],w=[];var P=null;for(y=0;y<o.length;y++)Hr++,P=null,null==o[y].chainSubject&&null==o[y].triplesContext?P=o[y]:(P=o[y].chainSubject,C=C.concat(P.triplesContext)),P={subject:{token:"blank",value:"_:"+Hr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:P},0==y&&w.push(P.subject),C.push(P),P=y===o.length-1?{subject:{token:"blank",value:"_:"+Hr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Hr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Hr+1)}},C.push(P);o={token:"triplesnodecollection",triplesContext:C,chainSubject:w}}if(o===e){for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(91===M.charCodeAt(n)?(w=rs,n++):(w=e,0===R&&s(tl)),w!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if((C=yt())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(93===M.charCodeAt(n)?(y=rl,n++):(y=e,0===R&&s(nl)),y!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e){for(o=C,C={token:"blank",value:"_:"+ ++Hr},w=[],y=0;y<o.pairs.length;y++){P=o.pairs[y];var Q={};Q.subject=C,Q.predicate=P[0],null!=P[1].length&&(P[1]=P[1][0]),Q.object=P[1],w.push(Q)}o=C={token:"triplesnode",kind:"blanknodepropertylist",triplesContext:o.triplesContext.concat(w),chainSubject:C}}else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e;R--,o===e&&0===R&&s(Dr)}return R--,o===e&&0===R&&s(po),o}function G(){var o,C,w,y,P;for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if((w=X())!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();y!==e?o=C=[C,w,y]:(n=o,o=e)}else n=o,o=e;else n=o,o=e;if(o===e){for(o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if((w=De())!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();y!==e?o=C=[C,w,y]:(n=o,o=e)}else n=o,o=e;else n=o,o=e}return o!==e&&(o=o[1]),R--,o===e&&0===R&&s(Ba),o}function J(){var o,C,w,y,P;for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if((w=X())!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();y!==e?o=C=[C,w,y]:(n=o,o=e)}else n=o,o=e;else n=o,o=e;if(o===e){for(o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if((w=Qe())!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();y!==e?o=C=[C,w,y]:(n=o,o=e)}else n=o,o=e;else n=o,o=e}return o!==e&&(o=o[1]),R--,o===e&&0===R&&s(Pa),o}function X(){var o;if(R++,(o=ne())===e){if(R++,(o=wt())===e&&((o=He())===e&&((o=Ze())===e&&(o=Ft())===e))){var C;if(R++,R++,o=n,M.substr(n,2)===If?(C=If,n+=2):(C=e,0===R&&s(Hc)),C!==e?(C=Wr())!==e?o=C:(n=o,o=e):(n=o,o=e),R--,o===e&&0===R&&s(Gc),o!==e&&(o={token:"blank",value:o}),o===e){var w,y;if(R++,o=n,91===M.charCodeAt(n)?(C=rs,n++):(C=e,0===R&&s(tl)),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?(93===M.charCodeAt(n)?(y=rl,n++):(y=e,0===R&&s(nl)),y!==e?o=C=[C,w,y]:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;R--,o===e&&0===R&&s(Fh),o!==e&&(o={token:"blank",value:"_:"+ ++Hr})}R--,o===e&&0===R&&s(Bc),o===e&&(o=Br())}R--,o===e&&0===R&&s(Qa)}return R--,o===e&&0===R&&s(Mu),o}function ae(){var o;return R++,(o=ne())===e&&(o=wt()),R--,o===e&&0===R&&s(ju),o}function ne(){var o,C,w,y;for(R++,o=n,C=[],w=K();w!==e;)C.push(w),w=K();if(C!==e)if(R++,w=n,63===M.charCodeAt(n)?(C=es,n++):(C=e,0===R&&s(di)),C!==e?(C=Qi())!==e?w=C:(n=w,w=e):(n=w,w=e),R--,w===e&&0===R&&s(Xc),w===e&&(R++,w=n,36===M.charCodeAt(n)?(C=Nf,n++):(C=e,0===R&&s(Mf)),C!==e?(C=Qi())!==e?w=C:(n=w,w=e):(n=w,w=e),R--,w===e&&0===R&&s(Wc)),w!==e){for(C=[],y=K();y!==e;)C.push(y),y=K();C!==e?(o={token:"var"}).value=w:(n=o,o=e)}else n=o,o=e;else n=o,o=e;return R--,o===e&&0===R&&s(Ou),o}function te(){var o,C,w,y,P,Q,z,pe;if(R++,R++,C=n,(w=ue())!==e){for(o=[],y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(M.substr(n,2)===ln?(Q=ln,n+=2):(Q=e,0===R&&s(Ii)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=ue())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;for(;y!==e;){for(o.push(y),y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(M.substr(n,2)===ln?(Q=ln,n+=2):(Q=e,0===R&&s(Ii)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=ue())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e}if(o!==e){if(0!==o.length){for(C={token:"expression",expressionType:"conditionalor"},w=[w],y=0;y<o.length;y++)w.push(o[y][3]);C.operands=w,w=C}C=w}else n=C,C=e}else n=C,C=e;return R--,C===e&&0===R&&s(Ga),R--,(o=C)===e&&0===R&&s(Ua),o}function ue(){var o,C,w,y,P,Q,z,pe;if(R++,o=n,(C=we())!==e){for(w=[],y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(M.substr(n,2)===Jn?(Q=Jn,n+=2):(Q=e,0===R&&s(gn)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=we())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;for(;y!==e;){for(w.push(y),y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(M.substr(n,2)===Jn?(Q=Jn,n+=2):(Q=e,0===R&&s(gn)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=we())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e}if(w!==e){if(0!==w.length){for(o={token:"expression",expressionType:"conditionaland"},C=[C],y=0;y<w.length;y++)C.push(w[y][3]);o.operands=C,C=o}o=C}else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(ns),o}function we(){var o,C,w,y,P,Q,z,pe,Ge,Ye,ut,ht,Ct;if(R++,R++,C=n,(w=Le())!==e){for(o=[],y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(61===M.charCodeAt(n)?(Q=In,n++):(Q=e,0===R&&s(go)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Le())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(M.substr(n,2)===vo?(Q=vo,n+=2):(Q=e,0===R&&s(il)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Le())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(60===M.charCodeAt(n)?(Q=Ni,n++):(Q=e,0===R&&s(Kn)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Le())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(62===M.charCodeAt(n)?(Q=yo,n++):(Q=e,0===R&&s(mo)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Le())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(M.substr(n,2)===Mi?(Q=Mi,n+=2):(Q=e,0===R&&s(Du)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Le())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(M.substr(n,2)===Vn?(Q=Vn,n+=2):(Q=e,0===R&&s(ol)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Le())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(73===M.charCodeAt(n)?(Q=is,n++):(Q=e,0===R&&s(wo)),Q===e&&(105===M.charCodeAt(n)?(Q=gi,n++):(Q=e,0===R&&s(os))),Q!==e)if(78===M.charCodeAt(n)?(z=ji,n++):(z=e,0===R&&s(vn)),z===e&&(110===M.charCodeAt(n)?(z=vi,n++):(z=e,0===R&&s(yi))),z!==e){for(pe=[],Ge=K();Ge!==e;)pe.push(Ge),Ge=K();pe!==e?(Ge=vt())!==e?y=P=[P,Q,z,pe,Ge]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(78===M.charCodeAt(n)?(Q=ji,n++):(Q=e,0===R&&s(vn)),Q===e&&(110===M.charCodeAt(n)?(Q=vi,n++):(Q=e,0===R&&s(yi))),Q!==e)if(79===M.charCodeAt(n)?(z=Ru,n++):(z=e,0===R&&s(ss)),z===e&&(111===M.charCodeAt(n)?(z=sl,n++):(z=e,0===R&&s(Bu))),z!==e)if(84===M.charCodeAt(n)?(pe=ll,n++):(pe=e,0===R&&s(ul)),pe===e&&(116===M.charCodeAt(n)?(pe=Pu,n++):(pe=e,0===R&&s(ls))),pe!==e){for(Ge=[],Ye=K();Ye!==e;)Ge.push(Ye),Ye=K();if(Ge!==e)if(73===M.charCodeAt(n)?(Ye=is,n++):(Ye=e,0===R&&s(wo)),Ye===e&&(105===M.charCodeAt(n)?(Ye=gi,n++):(Ye=e,0===R&&s(os))),Ye!==e)if(78===M.charCodeAt(n)?(ut=ji,n++):(ut=e,0===R&&s(vn)),ut===e&&(110===M.charCodeAt(n)?(ut=vi,n++):(ut=e,0===R&&s(yi))),ut!==e){for(ht=[],Ct=K();Ct!==e;)ht.push(Ct),Ct=K();ht!==e?(Ct=vt())!==e?y=P=[P,Q,z,pe,Ge,Ye,ut,ht,Ct]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;else n=y,y=e}else n=y,y=e;else n=y,y=e;else n=y,y=e;else n=y,y=e}}}}}}}for(;y!==e;){for(o.push(y),y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(61===M.charCodeAt(n)?(Q=In,n++):(Q=e,0===R&&s(go)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Le())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(M.substr(n,2)===vo?(Q=vo,n+=2):(Q=e,0===R&&s(il)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Le())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(60===M.charCodeAt(n)?(Q=Ni,n++):(Q=e,0===R&&s(Kn)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Le())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(62===M.charCodeAt(n)?(Q=yo,n++):(Q=e,0===R&&s(mo)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Le())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(M.substr(n,2)===Mi?(Q=Mi,n+=2):(Q=e,0===R&&s(Du)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Le())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(M.substr(n,2)===Vn?(Q=Vn,n+=2):(Q=e,0===R&&s(ol)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Le())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(73===M.charCodeAt(n)?(Q=is,n++):(Q=e,0===R&&s(wo)),Q===e&&(105===M.charCodeAt(n)?(Q=gi,n++):(Q=e,0===R&&s(os))),Q!==e)if(78===M.charCodeAt(n)?(z=ji,n++):(z=e,0===R&&s(vn)),z===e&&(110===M.charCodeAt(n)?(z=vi,n++):(z=e,0===R&&s(yi))),z!==e){for(pe=[],Ge=K();Ge!==e;)pe.push(Ge),Ge=K();pe!==e?(Ge=vt())!==e?y=P=[P,Q,z,pe,Ge]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(78===M.charCodeAt(n)?(Q=ji,n++):(Q=e,0===R&&s(vn)),Q===e&&(110===M.charCodeAt(n)?(Q=vi,n++):(Q=e,0===R&&s(yi))),Q!==e)if(79===M.charCodeAt(n)?(z=Ru,n++):(z=e,0===R&&s(ss)),z===e&&(111===M.charCodeAt(n)?(z=sl,n++):(z=e,0===R&&s(Bu))),z!==e)if(84===M.charCodeAt(n)?(pe=ll,n++):(pe=e,0===R&&s(ul)),pe===e&&(116===M.charCodeAt(n)?(pe=Pu,n++):(pe=e,0===R&&s(ls))),pe!==e){for(Ge=[],Ye=K();Ye!==e;)Ge.push(Ye),Ye=K();if(Ge!==e)if(73===M.charCodeAt(n)?(Ye=is,n++):(Ye=e,0===R&&s(wo)),Ye===e&&(105===M.charCodeAt(n)?(Ye=gi,n++):(Ye=e,0===R&&s(os))),Ye!==e)if(78===M.charCodeAt(n)?(ut=ji,n++):(ut=e,0===R&&s(vn)),ut===e&&(110===M.charCodeAt(n)?(ut=vi,n++):(ut=e,0===R&&s(yi))),ut!==e){for(ht=[],Ct=K();Ct!==e;)ht.push(Ct),Ct=K();ht!==e?(Ct=vt())!==e?y=P=[P,Q,z,pe,Ge,Ye,ut,ht,Ct]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;else n=y,y=e}else n=y,y=e;else n=y,y=e;else n=y,y=e;else n=y,y=e}}}}}}}}if(o!==e){if(C=w,0===o.length)w=C;else if("i"===o[0][1]||"I"===o[0][1]||"n"===o[0][1]||"N"===o[0][1]){for(w={},"i"===o[0][1]||"I"===o[0][1]?(y="=",w.expressionType="conditionalor"):(y="!=",w.expressionType="conditionaland"),P=[],Q=0;Q<o[0].length;Q++)if("args"===o[0][Q].token){P=o[0][Q].value;break}for(w.token="expression",w.operands=[],o=0;o<P.length;o++)(Q={token:"expression",expressionType:"relationalexpression"}).operator=y,Q.op1=C,Q.op2=P[o],w.operands.push(Q)}else(w={expressionType:"relationalexpression"}).operator=o[0][1],w.op1=C,w.op2=o[0][3],w.token="expression";C=w}else n=C,C=e}else n=C,C=e;return R--,C===e&&0===R&&s(Xa),R--,(o=C)===e&&0===R&&s(Ha),o}function Le(){var o,C,w,y,P,Q,z,pe,Ge,Ye;if(R++,R++,C=n,(w=Ie())!==e){for(o=[],y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(43===M.charCodeAt(n)?(Q=Yr,n++):(Q=e,0===R&&s(Zr)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Ie())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(45===M.charCodeAt(n)?(Q=yn,n++):(Q=e,0===R&&s(un)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Ie())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e)if(y=n,(P=Ke())===e&&(P=Ke()),P!==e){for(Q=n,z=[],pe=K();pe!==e;)z.push(pe),pe=K();if(z!==e)if(42===M.charCodeAt(n)?(pe=bn,n++):(pe=e,0===R&&s(zr)),pe!==e){for(Ge=[],Ye=K();Ye!==e;)Ge.push(Ye),Ye=K();Ge!==e?(Ye=Me())!==e?Q=z=[z,pe,Ge,Ye]:(n=Q,Q=e):(n=Q,Q=e)}else n=Q,Q=e;else n=Q,Q=e;if(Q===e){for(Q=n,z=[],pe=K();pe!==e;)z.push(pe),pe=K();if(z!==e)if(47===M.charCodeAt(n)?(pe=dn,n++):(pe=e,0===R&&s(qn)),pe!==e){for(Ge=[],Ye=K();Ye!==e;)Ge.push(Ye),Ye=K();Ge!==e?(Ye=Me())!==e?Q=z=[z,pe,Ge,Ye]:(n=Q,Q=e):(n=Q,Q=e)}else n=Q,Q=e;else n=Q,Q=e}Q===e&&(Q=null),Q!==e?y=P=[P,Q]:(n=y,y=e)}else n=y,y=e}for(;y!==e;){for(o.push(y),y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(43===M.charCodeAt(n)?(Q=Yr,n++):(Q=e,0===R&&s(Zr)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Ie())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(45===M.charCodeAt(n)?(Q=yn,n++):(Q=e,0===R&&s(un)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Ie())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e)if(y=n,(P=Ke())===e&&(P=Ke()),P!==e){for(Q=n,z=[],pe=K();pe!==e;)z.push(pe),pe=K();if(z!==e)if(42===M.charCodeAt(n)?(pe=bn,n++):(pe=e,0===R&&s(zr)),pe!==e){for(Ge=[],Ye=K();Ye!==e;)Ge.push(Ye),Ye=K();Ge!==e?(Ye=Me())!==e?Q=z=[z,pe,Ge,Ye]:(n=Q,Q=e):(n=Q,Q=e)}else n=Q,Q=e;else n=Q,Q=e;if(Q===e){for(Q=n,z=[],pe=K();pe!==e;)z.push(pe),pe=K();if(z!==e)if(47===M.charCodeAt(n)?(pe=dn,n++):(pe=e,0===R&&s(qn)),pe!==e){for(Ge=[],Ye=K();Ye!==e;)Ge.push(Ye),Ye=K();Ge!==e?(Ye=Me())!==e?Q=z=[z,pe,Ge,Ye]:(n=Q,Q=e):(n=Q,Q=e)}else n=Q,Q=e;else n=Q,Q=e}Q===e&&(Q=null),Q!==e?y=P=[P,Q]:(n=y,y=e)}else n=y,y=e}}if(o!==e){if(0!==o.length){for((C={token:"expression",expressionType:"additiveexpression"}).summand=w,C.summands=[],w=0;w<o.length;w++)y={},4==(P=o[w]).length&&"string"==typeof P[1]?(y.operator=P[1],y.expression=P[3]):(P={},Q=y[0],z=y[1][1],pe=y[1][3],z=null,0>Q.value?(y.operator="-",Q.value=-Q.value):y.operator="+",P.token="expression",P.expressionType="multiplicativeexpression",P.operator=Q,P.factors=[{operator:z,expression:pe}],y.expression=P),C.summands.push(y);w=C}C=w}else n=C,C=e}else n=C,C=e;return R--,C===e&&0===R&&s(Co),R--,(o=C)===e&&0===R&&s(xo),o}function Ie(){var o,C,w,y,P,Q,z,pe;if(R++,o=n,(C=Me())!==e){for(w=[],y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(42===M.charCodeAt(n)?(Q=bn,n++):(Q=e,0===R&&s(zr)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Me())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(47===M.charCodeAt(n)?(Q=dn,n++):(Q=e,0===R&&s(qn)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Me())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e}for(;y!==e;){for(w.push(y),y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(42===M.charCodeAt(n)?(Q=bn,n++):(Q=e,0===R&&s(zr)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Me())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e;if(y===e){for(y=n,P=[],Q=K();Q!==e;)P.push(Q),Q=K();if(P!==e)if(47===M.charCodeAt(n)?(Q=dn,n++):(Q=e,0===R&&s(qn)),Q!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=Me())!==e?y=P=[P,Q,z,pe]:(n=y,y=e):(n=y,y=e)}else n=y,y=e;else n=y,y=e}}if(w!==e){if(0!==w.length){for((o={token:"expression",expressionType:"multiplicativeexpression"}).factor=C,o.factors=[],C=0;C<w.length;C++)y=w[C],(P={}).operator=y[1],P.expression=y[3],o.factors.push(P);C=o}o=C}else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(Wa),o}function Me(){var o,C,w;if(R++,o=n,33===M.charCodeAt(n)?(C=ts,n++):(C=e,0===R&&s(el)),C!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();w!==e?(C=Ne())!==e?(o={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"}).expression=C:(n=o,o=e):(n=o,o=e)}else n=o,o=e;if(o===e){if(o=n,43===M.charCodeAt(n)?(C=Yr,n++):(C=e,0===R&&s(Zr)),C!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();w!==e?(C=Ne())!==e?(o={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"}).expression=C:(n=o,o=e):(n=o,o=e)}else n=o,o=e;if(o===e){if(o=n,45===M.charCodeAt(n)?(C=yn,n++):(C=e,0===R&&s(un)),C!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();w!==e?(C=Ne())!==e?(o={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"}).expression=C:(n=o,o=e):(n=o,o=e)}else n=o,o=e;o===e&&(o=Ne())}}return R--,o===e&&0===R&&s(qa),o}function Ne(){var o;if(R++,(o=je())===e&&(o=Re())===e){var C,w,y;if(R++,C=n,(o=wt())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?((y=it())===e&&(y=null),y!==e?(C=y,(w={token:"expression",expressionType:"irireforfunction"}).iriref=o,w.args=null!=C?C.value:C,C=w):(n=C,C=e)):(n=C,C=e)}else n=C,C=e;if(R--,C===e&&0===R&&s(kc),(o=C)===e&&((o=He())!==e&&((C={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"}).value=o,o=C),o===e&&((o=Ze())!==e&&((C={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"}).value=o,o=C),o===e&&((o=Ft())!==e&&((C={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"}).value=o,o=C),o===e)))){var P,Q,z,pe,Ge,Ye,ut,ht,Ct;if(R++,w=n,M.substr(n,5)===cf?(o=cf,n+=5):(o=e,0===R&&s(fc)),o===e&&(M.substr(n,5)===hf?(o=hf,n+=5):(o=e,0===R&&s(cc))),o!==e){for(o=[],C=K();C!==e;)o.push(C),C=K();if(o!==e)if(40===M.charCodeAt(n)?(C=jt,n++):(C=e,0===R&&s(Ot)),C!==e){for(C=[],o=K();o!==e;)C.push(o),o=K();if(C!==e)if(M.substr(n,8)===Jt?(o=Jt,n+=8):(o=e,0===R&&s(xn)),o===e&&(M.substr(n,8)===kr?(o=kr,n+=8):(o=e,0===R&&s(qr))),o===e&&(o=null),o!==e){for(y=[],C=K();C!==e;)y.push(C),C=K();if(y!==e)if(42===M.charCodeAt(n)?(C=bn,n++):(C=e,0===R&&s(zr)),C===e&&(C=te()),C!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if(41===M.charCodeAt(n)?(P=Et,n++):(P=e,0===R&&s(Dt)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?((w={token:"expression",expressionType:"aggregate",aggregateType:"count"}).distinct=""!=o&&null!=o?"DISTINCT":o,w.expression=C):(n=w,w=e)}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;if(w===e){if(w=n,M.substr(n,12)===pf?(o=pf,n+=12):(o=e,0===R&&s(hc)),o===e&&(M.substr(n,12)===df?(o=df,n+=12):(o=e,0===R&&s(pc))),o!==e){for(o=[],C=K();C!==e;)o.push(C),C=K();if(o!==e)if(40===M.charCodeAt(n)?(C=jt,n++):(C=e,0===R&&s(Ot)),C!==e){for(C=[],o=K();o!==e;)C.push(o),o=K();if(C!==e)if(M.substr(n,8)===Jt?(o=Jt,n+=8):(o=e,0===R&&s(xn)),o===e&&(M.substr(n,8)===kr?(o=kr,n+=8):(o=e,0===R&&s(qr))),o===e&&(o=null),o!==e){for(y=[],C=K();C!==e;)y.push(C),C=K();if(y!==e)if((C=te())!==e){if(y=n,59===M.charCodeAt(n)?(P=sn,n++):(P=e,0===R&&s(Kr)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e)if(M.substr(n,9)===gf?(z=gf,n+=9):(z=e,0===R&&s(dc)),z!==e){for(pe=[],Ge=K();Ge!==e;)pe.push(Ge),Ge=K();if(pe!==e)if(61===M.charCodeAt(n)?(Ge=In,n++):(Ge=e,0===R&&s(go)),Ge!==e){for(Ye=[],ut=K();ut!==e;)Ye.push(ut),ut=K();if(Ye!==e)if((ut=mt())!==e){for(ht=[],Ct=K();Ct!==e;)ht.push(Ct),Ct=K();ht!==e?y=P=[P,Q,z,pe,Ge,Ye,ut,ht]:(n=y,y=e)}else n=y,y=e;else n=y,y=e}else n=y,y=e;else n=y,y=e}else n=y,y=e;else n=y,y=e}else n=y,y=e;if(y===e&&(y=null),y!==e)if(41===M.charCodeAt(n)?(P=Et,n++):(P=e,0===R&&s(Dt)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?((w={token:"expression",expressionType:"aggregate",aggregateType:"group_concat"}).distinct=""!=o&&null!=o?"DISTINCT":o,w.expression=C,w.separator=y):(n=w,w=e)}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;if(w===e){if(w=n,M.substr(n,3)===vf?(o=vf,n+=3):(o=e,0===R&&s(gc)),o===e&&(M.substr(n,3)===yf?(o=yf,n+=3):(o=e,0===R&&s(vc))),o!==e){for(o=[],C=K();C!==e;)o.push(C),C=K();if(o!==e)if(40===M.charCodeAt(n)?(C=jt,n++):(C=e,0===R&&s(Ot)),C!==e){for(C=[],o=K();o!==e;)C.push(o),o=K();if(C!==e)if(M.substr(n,8)===Jt?(o=Jt,n+=8):(o=e,0===R&&s(xn)),o===e&&(M.substr(n,8)===kr?(o=kr,n+=8):(o=e,0===R&&s(qr))),o===e&&(o=null),o!==e){for(y=[],C=K();C!==e;)y.push(C),C=K();if(y!==e)if((C=te())!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if(41===M.charCodeAt(n)?(P=Et,n++):(P=e,0===R&&s(Dt)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?((w={token:"expression",expressionType:"aggregate",aggregateType:"sum"}).distinct=""!=o&&null!=o?"DISTINCT":o,w.expression=C):(n=w,w=e)}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;if(w===e){if(w=n,M.substr(n,3)===mf?(o=mf,n+=3):(o=e,0===R&&s(yc)),o===e&&(M.substr(n,3)===wf?(o=wf,n+=3):(o=e,0===R&&s(mc))),o!==e){for(o=[],C=K();C!==e;)o.push(C),C=K();if(o!==e)if(40===M.charCodeAt(n)?(C=jt,n++):(C=e,0===R&&s(Ot)),C!==e){for(C=[],o=K();o!==e;)C.push(o),o=K();if(C!==e)if(M.substr(n,8)===Jt?(o=Jt,n+=8):(o=e,0===R&&s(xn)),o===e&&(M.substr(n,8)===kr?(o=kr,n+=8):(o=e,0===R&&s(qr))),o===e&&(o=null),o!==e){for(y=[],C=K();C!==e;)y.push(C),C=K();if(y!==e)if((C=te())!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if(41===M.charCodeAt(n)?(P=Et,n++):(P=e,0===R&&s(Dt)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?((w={token:"expression",expressionType:"aggregate",aggregateType:"min"}).distinct=""!=o&&null!=o?"DISTINCT":o,w.expression=C):(n=w,w=e)}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;if(w===e){if(w=n,M.substr(n,3)===xf?(o=xf,n+=3):(o=e,0===R&&s(wc)),o===e&&(M.substr(n,3)===Cf?(o=Cf,n+=3):(o=e,0===R&&s(xc))),o!==e){for(o=[],C=K();C!==e;)o.push(C),C=K();if(o!==e)if(40===M.charCodeAt(n)?(C=jt,n++):(C=e,0===R&&s(Ot)),C!==e){for(C=[],o=K();o!==e;)C.push(o),o=K();if(C!==e)if(M.substr(n,8)===Jt?(o=Jt,n+=8):(o=e,0===R&&s(xn)),o===e&&(M.substr(n,8)===kr?(o=kr,n+=8):(o=e,0===R&&s(qr))),o===e&&(o=null),o!==e){for(y=[],C=K();C!==e;)y.push(C),C=K();if(y!==e)if((C=te())!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if(41===M.charCodeAt(n)?(P=Et,n++):(P=e,0===R&&s(Dt)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?((w={token:"expression",expressionType:"aggregate",aggregateType:"max"}).distinct=""!=o&&null!=o?"DISTINCT":o,w.expression=C):(n=w,w=e)}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;if(w===e)if(w=n,M.substr(n,3)===bf?(o=bf,n+=3):(o=e,0===R&&s(Cc)),o===e&&(M.substr(n,3)===kf?(o=kf,n+=3):(o=e,0===R&&s(bc))),o!==e){for(o=[],C=K();C!==e;)o.push(C),C=K();if(o!==e)if(40===M.charCodeAt(n)?(C=jt,n++):(C=e,0===R&&s(Ot)),C!==e){for(C=[],o=K();o!==e;)C.push(o),o=K();if(C!==e)if(M.substr(n,8)===Jt?(o=Jt,n+=8):(o=e,0===R&&s(xn)),o===e&&(M.substr(n,8)===kr?(o=kr,n+=8):(o=e,0===R&&s(qr))),o===e&&(o=null),o!==e){for(y=[],C=K();C!==e;)y.push(C),C=K();if(y!==e)if((C=te())!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if(41===M.charCodeAt(n)?(P=Et,n++):(P=e,0===R&&s(Dt)),P!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?((w={token:"expression",expressionType:"aggregate",aggregateType:"avg"}).distinct=""!=o&&null!=o?"DISTINCT":o,w.expression=C):(n=w,w=e)}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e;else n=w,w=e}else n=w,w=e}}}}R--,w===e&&0===R&&s(ac),(o=w)===e&&((o=ne())!==e&&((C={token:"expression",expressionType:"atomic",primaryexpression:"var"}).value=o,o=C))}}return R--,o===e&&0===R&&s(za),o}function je(){var o,C,w,y;if(R++,o=n,40===M.charCodeAt(n)?(C=jt,n++):(C=e,0===R&&s(Ot)),C!==e){for(w=[],C=K();C!==e;)w.push(C),C=K();if(w!==e)if((C=te())!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?(41===M.charCodeAt(n)?(y=Et,n++):(y=e,0===R&&s(Dt)),y!==e?o=C:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;return R--,o===e&&0===R&&s(Ja),o}function Re(){var o,C,w,y,P,Q,z,pe;if(R++,o=n,M.substr(n,3)===Uu?(C=Uu,n+=3):(C=e,0===R&&s(Ka)),C===e&&(M.substr(n,3)===al?(C=al,n+=3):(C=e,0===R&&s(fl))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(40===M.charCodeAt(n)?(y=jt,n++):(y=e,0===R&&s(Ot)),y!==e){for(P=[],C=K();C!==e;)P.push(C),C=K();if(P!==e)if((C=te())!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?(41===M.charCodeAt(n)?(z=Et,n++):(z=e,0===R&&s(Dt)),z!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"str"}).args=[C]:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;if(o===e){if(o=n,M.substr(n,4)===cl?(C=cl,n+=4):(C=e,0===R&&s(Va)),C===e&&(M.substr(n,4)===hl?(C=hl,n+=4):(C=e,0===R&&s(Oi))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(40===M.charCodeAt(n)?(y=jt,n++):(y=e,0===R&&s(Ot)),y!==e){for(P=[],C=K();C!==e;)P.push(C),C=K();if(P!==e)if((C=te())!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?(41===M.charCodeAt(n)?(z=Et,n++):(z=e,0===R&&s(Dt)),z!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"lang"}).args=[C]:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;if(o===e){if(o=n,M.substr(n,11)===pl?(C=pl,n+=11):(C=e,0===R&&s(us)),C===e&&(M.substr(n,11)===Gu?(C=Gu,n+=11):(C=e,0===R&&s(Ya))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(40===M.charCodeAt(n)?(y=jt,n++):(y=e,0===R&&s(Ot)),y!==e){for(P=[],C=K();C!==e;)P.push(C),C=K();if(P!==e)if((C=te())!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e)if(44===M.charCodeAt(n)?(z=gr,n++):(z=e,0===R&&s(vr)),z!==e){for(pe=[],y=K();y!==e;)pe.push(y),y=K();if(pe!==e)if((y=te())!==e){for(w=[],z=K();z!==e;)w.push(z),z=K();w!==e?(41===M.charCodeAt(n)?(z=Et,n++):(z=e,0===R&&s(Dt)),z!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"langmatches"}).args=[C,y]:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;if(o===e){if(o=n,M.substr(n,8)===Hu?(C=Hu,n+=8):(C=e,0===R&&s(Kt)),C===e&&(M.substr(n,8)===Xu?(C=Xu,n+=8):(C=e,0===R&&s(dl))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(40===M.charCodeAt(n)?(y=jt,n++):(y=e,0===R&&s(Ot)),y!==e){for(P=[],C=K();C!==e;)P.push(C),C=K();if(P!==e)if((C=te())!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?(41===M.charCodeAt(n)?(z=Et,n++):(z=e,0===R&&s(Dt)),z!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"datatype"}).args=[C]:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;if(o===e){if(o=n,M.substr(n,5)===Di?(C=Di,n+=5):(C=e,0===R&&s(an)),C===e&&(M.substr(n,5)===bo?(C=bo,n+=5):(C=e,0===R&&s(gl))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(40===M.charCodeAt(n)?(y=jt,n++):(y=e,0===R&&s(Ot)),y!==e){for(P=[],C=K();C!==e;)P.push(C),C=K();if(P!==e)if((C=ne())!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?(41===M.charCodeAt(n)?(z=Et,n++):(z=e,0===R&&s(Dt)),z!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"bound"}).args=[C]:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;if(o===e){if(o=n,M.substr(n,3)===vl?(C=vl,n+=3):(C=e,0===R&&s(Wu)),C===e&&(M.substr(n,3)===yl?(C=yl,n+=3):(C=e,0===R&&s(qu))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(40===M.charCodeAt(n)?(y=jt,n++):(y=e,0===R&&s(Ot)),y!==e){for(P=[],C=K();C!==e;)P.push(C),C=K();if(P!==e)if((C=te())!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?(41===M.charCodeAt(n)?(z=Et,n++):(z=e,0===R&&s(Dt)),z!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"iri"}).args=[C]:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;if(o===e){if(o=n,M.substr(n,3)===ml?(C=ml,n+=3):(C=e,0===R&&s(Za)),C===e&&(M.substr(n,3)===as?(C=as,n+=3):(C=e,0===R&&s(zu))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(40===M.charCodeAt(n)?(y=jt,n++):(y=e,0===R&&s(Ot)),y!==e){for(P=[],C=K();C!==e;)P.push(C),C=K();if(P!==e)if((C=te())!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?(41===M.charCodeAt(n)?(z=Et,n++):(z=e,0===R&&s(Dt)),z!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"uri"}).args=[C]:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;if(o===e){if(o=n,M.substr(n,5)===Xt?(C=Xt,n+=5):(C=e,0===R&&s(Ju)),C===e&&(M.substr(n,5)===Ku?(C=Ku,n+=5):(C=e,0===R&&s(Ri))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e){if(y=n,40===M.charCodeAt(n)?(P=jt,n++):(P=e,0===R&&s(Ot)),P!==e){for(C=[],Q=K();Q!==e;)C.push(Q),Q=K();if(C!==e)if((Q=te())!==e){for(z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(41===M.charCodeAt(n)?(pe=Et,n++):(pe=e,0===R&&s(Dt)),pe!==e?y=P=[P,C,Q,z,pe]:(n=y,y=e)):(n=y,y=e)}else n=y,y=e;else n=y,y=e}else n=y,y=e;y===e&&(y=Br()),y!==e?(C=y,(o={token:"expression",expressionType:"builtincall",builtincall:"bnode"}).args=5===C.length?[C[2]]:null):(n=o,o=e)}else n=o,o=e}else n=o,o=e;if(o===e){if(o=n,M.substr(n,8)===Vu?(C=Vu,n+=8):(C=e,0===R&&s(fs)),C===e&&(M.substr(n,8)===Yu?(C=Yu,n+=8):(C=e,0===R&&s(rr))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();w!==e?(y=vt())!==e?((C={token:"expression",expressionType:"builtincall",builtincall:"coalesce"}).args=y,o=C):(n=o,o=e):(n=o,o=e)}else n=o,o=e;if(o===e){if(o=n,M.substr(n,2)===Zu?(C=Zu,n+=2):(C=e,0===R&&s($a)),C===e&&(M.substr(n,2)===$u?(C=$u,n+=2):(C=e,0===R&&s(cs))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(40===M.charCodeAt(n)?(y=jt,n++):(y=e,0===R&&s(Ot)),y!==e){for(P=[],C=K();C!==e;)P.push(C),C=K();if(P!==e)if((C=te())!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e)if(44===M.charCodeAt(n)?(z=gr,n++):(z=e,0===R&&s(vr)),z!==e){for(pe=[],y=K();y!==e;)pe.push(y),y=K();if(pe!==e)if((y=te())!==e){for(w=[],z=K();z!==e;)w.push(z),z=K();if(w!==e)if(44===M.charCodeAt(n)?(z=gr,n++):(z=e,0===R&&s(vr)),z!==e){for(z=[],w=K();w!==e;)z.push(w),w=K();if(z!==e)if((w=te())!==e){for(z=[],Q=K();Q!==e;)z.push(Q),Q=K();z!==e?(41===M.charCodeAt(n)?(Q=Et,n++):(Q=e,0===R&&s(Dt)),Q!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"if"}).args=[C,y,w]:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;if(o===e){if(o=n,M.substr(n,9)===t?(C=t,n+=9):(C=e,0===R&&s(i)),C===e&&(M.substr(n,9)===L?(C=L,n+=9):(C=e,0===R&&s(_)),C===e&&(M.substr(n,9)===N?(C=N,n+=9):(C=e,0===R&&s(U)))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(40===M.charCodeAt(n)?(y=jt,n++):(y=e,0===R&&s(Ot)),y!==e){for(P=[],C=K();C!==e;)P.push(C),C=K();if(P!==e)if((C=te())!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?(41===M.charCodeAt(n)?(z=Et,n++):(z=e,0===R&&s(Dt)),z!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"isliteral"}).args=[C]:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;if(o===e){if(o=n,M.substr(n,7)===re?(C=re,n+=7):(C=e,0===R&&s(fe)),C===e&&(M.substr(n,7)===ve?(C=ve,n+=7):(C=e,0===R&&s(xe)),C===e&&(M.substr(n,7)===Oe?(C=Oe,n+=7):(C=e,0===R&&s(Ue)))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(40===M.charCodeAt(n)?(y=jt,n++):(y=e,0===R&&s(Ot)),y!==e){for(P=[],C=K();C!==e;)P.push(C),C=K();if(P!==e)if((C=te())!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?(41===M.charCodeAt(n)?(z=Et,n++):(z=e,0===R&&s(Dt)),z!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"isblank"}).args=[C]:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;if(o===e){if(o=n,M.substr(n,8)===Ve?(C=Ve,n+=8):(C=e,0===R&&s(ze)),C===e&&(M.substr(n,8)===rt?(C=rt,n+=8):(C=e,0===R&&s(nt))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(40===M.charCodeAt(n)?(y=jt,n++):(y=e,0===R&&s(Ot)),y!==e){for(P=[],C=K();C!==e;)P.push(C),C=K();if(P!==e)if((C=te())!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e)if(44===M.charCodeAt(n)?(z=gr,n++):(z=e,0===R&&s(vr)),z!==e){for(pe=[],y=K();y!==e;)pe.push(y),y=K();if(pe!==e)if((y=te())!==e){for(w=[],z=K();z!==e;)w.push(z),z=K();w!==e?(41===M.charCodeAt(n)?(z=Et,n++):(z=e,0===R&&s(Dt)),z!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"sameterm"}).args=[C,y]:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;if(o===e){if(o=n,M.substr(n,5)===lt?(C=lt,n+=5):(C=e,0===R&&s(at)),C===e&&(M.substr(n,5)===pt?(C=pt,n+=5):(C=e,0===R&&s(ft)),C===e&&(M.substr(n,5)===gt?(C=gt,n+=5):(C=e,0===R&&s(_t)),C===e&&(M.substr(n,5)===kt?(C=kt,n+=5):(C=e,0===R&&s(Mt)),C===e&&(M.substr(n,5)===zt?(C=zt,n+=5):(C=e,0===R&&s(yr)),C===e&&(M.substr(n,5)===Vt?(C=Vt,n+=5):(C=e,0===R&&s(Gr))))))),C!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if(40===M.charCodeAt(n)?(y=jt,n++):(y=e,0===R&&s(Ot)),y!==e){for(P=[],C=K();C!==e;)P.push(C),C=K();if(P!==e)if((C=te())!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();Q!==e?(41===M.charCodeAt(n)?(z=Et,n++):(z=e,0===R&&s(Dt)),z!==e?(o={token:"expression",expressionType:"builtincall",builtincall:"isuri"}).args=[C]:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e;if(o===e){if(o=n,M.substr(n,7)===Ir?(C=Ir,n+=7):(C=e,0===R&&s(lr)),C===e&&(M.substr(n,7)===Nr?(C=Nr,n+=7):(C=e,0===R&&s(Cr))),C!==e){if(w=[],ur.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(nr)),y!==e)for(;y!==e;)w.push(y),ur.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(nr));else w=e;if(w!==e){for(y=[],P=K();P!==e;)y.push(P),P=K();if(y!==e)if(40===M.charCodeAt(n)?(P=jt,n++):(P=e,0===R&&s(Ot)),P!==e){for(C=[],Q=n,z=[],pe=K();pe!==e;)z.push(pe),pe=K();for(z!==e?(pe=te())!==e?(44===M.charCodeAt(n)?(y=gr,n++):(y=e,0===R&&s(vr)),y!==e?Q=z=[z,pe,y]:(n=Q,Q=e)):(n=Q,Q=e):(n=Q,Q=e);Q!==e;){for(C.push(Q),Q=n,z=[],pe=K();pe!==e;)z.push(pe),pe=K();z!==e?(pe=te())!==e?(44===M.charCodeAt(n)?(y=gr,n++):(y=e,0===R&&s(vr)),y!==e?Q=z=[z,pe,y]:(n=Q,Q=e)):(n=Q,Q=e):(n=Q,Q=e)}if(C!==e){for(Q=[],z=K();z!==e;)Q.push(z),z=K();if(Q!==e)if((z=te())!==e){for(pe=[],y=K();y!==e;)pe.push(y),y=K();if(pe!==e)if(41===M.charCodeAt(n)?(y=Et,n++):(y=e,0===R&&s(Dt)),y!==e){for(o=z,(y={token:"expression",expressionType:"custom"}).name=w.join(""),w=[],z=0;z<C.length;z++)w.push(C[z][1]);w.push(o),y.args=w,o=y}else n=o,o=e;else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e}else n=o,o=e;else n=o,o=e}else n=o,o=e}else n=o,o=e;if(o===e){if(R++,C=n,M.substr(n,5)===Mr?(o=Mr,n+=5):(o=e,0===R&&s(Bi)),o===e&&(M.substr(n,5)===Nn?(o=Nn,n+=5):(o=e,0===R&&s(Fr))),o!==e){for(o=[],y=K();y!==e;)o.push(y),y=K();if(o!==e)if(40===M.charCodeAt(n)?(y=jt,n++):(y=e,0===R&&s(Ot)),y!==e){for(y=[],o=K();o!==e;)y.push(o),o=K();if(y!==e)if((o=te())!==e){for(y=[],w=K();w!==e;)y.push(w),w=K();if(y!==e)if(44===M.charCodeAt(n)?(w=gr,n++):(w=e,0===R&&s(vr)),w!==e){for(w=[],y=K();y!==e;)w.push(y),y=K();if(w!==e)if((y=te())!==e){for(z=[],w=K();w!==e;)z.push(w),w=K();if(z!==e){if(w=n,44===M.charCodeAt(n)?(z=gr,n++):(z=e,0===R&&s(vr)),z!==e){for(Q=[],pe=K();pe!==e;)Q.push(pe),pe=K();Q!==e?(pe=te())!==e?w=z=[z,Q,pe]:(n=w,w=e):(n=w,w=e)}else n=w,w=e;if(w===e&&(w=null),w!==e){for(z=[],Q=K();Q!==e;)z.push(Q),Q=K();z!==e?(41===M.charCodeAt(n)?(Q=Et,n++):(Q=e,0===R&&s(Dt)),Q!==e?(C=w,(w={token:"expression",expressionType:"regex"}).text=o,w.pattern=y,null!=C&&(w.flags=C[2]),C=w):(n=C,C=e)):(n=C,C=e)}else n=C,C=e}else n=C,C=e}else n=C,C=e;else n=C,C=e}else n=C,C=e;else n=C,C=e}else n=C,C=e;else n=C,C=e}else n=C,C=e;else n=C,C=e}else n=C,C=e;if(R--,C===e&&0===R&&s(er),(o=C)===e){if(R++,C=n,M.substr(n,6)===ir?(o=ir,n+=6):(o=e,0===R&&s(hs)),o===e&&(M.substr(n,6)===$r?(o=$r,n+=6):(o=e,0===R&&s(Yn))),o!==e){for(y=[],o=K();o!==e;)y.push(o),o=K();y!==e?(o=et())!==e?(C={token:"expression",expressionType:"builtincall",builtincall:"exists"}).args=[o]:(n=C,C=e):(n=C,C=e)}else n=C,C=e;if(R--,C===e&&0===R&&s(mn),(o=C)===e){if(R++,C=n,M.substr(n,3)===_r?(o=_r,n+=3):(o=e,0===R&&s(Pi)),o===e&&(M.substr(n,3)===ps?(o=ps,n+=3):(o=e,0===R&&s(uc))),o!==e){for(o=[],y=K();y!==e;)o.push(y),y=K();if(o!==e)if(M.substr(n,6)===ir?(y=ir,n+=6):(y=e,0===R&&s(hs)),y===e&&(M.substr(n,6)===$r?(y=$r,n+=6):(y=e,0===R&&s(Yn))),y!==e){for(y=[],o=K();o!==e;)y.push(o),o=K();y!==e?(o=et())!==e?(C={token:"expression",expressionType:"builtincall",builtincall:"notexists"}).args=[o]:(n=C,C=e):(n=C,C=e)}else n=C,C=e;else n=C,C=e}else n=C,C=e;R--,C===e&&0===R&&s(mi),o=C}}}}}}}}}}}}}}}}}return R--,o===e&&0===R&&s(Qu),o}function He(){var o,C,w,y,P;if(R++,o=n,(C=mt())!==e){var Q,z,pe,Ge;if(R++,w=n,64===M.charCodeAt(n)?(y=jf,n++):(y=e,0===R&&s(Of)),y!==e){if(P=[],Df.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(Rf)),y!==e)for(;y!==e;)P.push(y),Df.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(Rf));else P=e;if(P!==e){if(y=[],Q=n,45===M.charCodeAt(n)?(z=yn,n++):(z=e,0===R&&s(un)),z!==e){if(pe=[],ta.test(M.charAt(n))?(Ge=M.charAt(n),n++):(Ge=e,0===R&&s(ra)),Ge!==e)for(;Ge!==e;)pe.push(Ge),ta.test(M.charAt(n))?(Ge=M.charAt(n),n++):(Ge=e,0===R&&s(ra));else pe=e;pe!==e?Q=z=[z,pe]:(n=Q,Q=e)}else n=Q,Q=e;for(;Q!==e;)if(y.push(Q),Q=n,45===M.charCodeAt(n)?(z=yn,n++):(z=e,0===R&&s(un)),z!==e){if(pe=[],ta.test(M.charAt(n))?(Ge=M.charAt(n),n++):(Ge=e,0===R&&s(ra)),Ge!==e)for(;Ge!==e;)pe.push(Ge),ta.test(M.charAt(n))?(Ge=M.charAt(n),n++):(Ge=e,0===R&&s(ra));else pe=e;pe!==e?Q=z=[z,pe]:(n=Q,Q=e)}else n=Q,Q=e;y!==e?(w=P,w=y=0===y.length?("@"+w.join("")).toLowerCase():("@"+w.join("")+"-"+y[0][1].join("")).toLowerCase()):(n=w,w=e)}else n=w,w=e}else n=w,w=e;R--,w===e&&0===R&&s(qc),w===e&&(w=n,M.substr(n,2)===Sf?(y=Sf,n+=2):(y=e,0===R&&s(Fc)),y!==e?(P=wt())!==e?w=y=[y,P]:(n=w,w=e):(n=w,w=e)),w===e&&(w=null),w!==e?(o=C,"string"==typeof(C=w)&&0<C.length?C={token:"literal",value:o.value,lang:C.slice(1),type:null}:null!=C&&"object"==typeof C?(C.shift(),C={token:"literal",value:o.value,lang:null,type:C[0]}):C={token:"literal",value:o.value,lang:null,type:null},o=C):(n=o,o=e)}else n=o,o=e;return R--,o===e&&0===R&&s(Sc),o}function Ze(){var o,C;(R++,R++,(o=br())===e&&((o=Zt())===e&&(o=Rt())),R--,o===e&&0===R&&s(Ac),o===e)&&(R++,R++,o=n,43===M.charCodeAt(n)?(C=Yr,n++):(C=e,0===R&&s(Zr)),C!==e?(C=br())!==e?o=C=Bf(C):(n=o,o=e):(n=o,o=e),R--,o===e&&0===R&&s(Zc),o===e&&(R++,o=n,43===M.charCodeAt(n)?(C=Yr,n++):(C=e,0===R&&s(Zr)),C!==e?(C=Zt())!==e?o=C=Bf(C):(n=o,o=e):(n=o,o=e),R--,o===e&&0===R&&s(Yc),o===e&&(R++,o=n,43===M.charCodeAt(n)?(C=Yr,n++):(C=e,0===R&&s(Zr)),C!==e?(C=Rt())!==e?(C.value="+"+C.value,o=C):(n=o,o=e):(n=o,o=e),R--,o===e&&0===R&&s(Vc))),R--,o===e&&0===R&&s(Lc),o===e&&(o=Ke()));return R--,o===e&&0===R&&s(_c),o}function Ke(){var o,C;return R++,R++,o=n,45===M.charCodeAt(n)?(C=yn,n++):(C=e,0===R&&s(un)),C!==e?(C=br())!==e?o=C=ef(C):(n=o,o=e):(n=o,o=e),R--,o===e&&0===R&&s(th),o===e&&(R++,o=n,45===M.charCodeAt(n)?(C=yn,n++):(C=e,0===R&&s(un)),C!==e?(C=Zt())!==e?o=C=ef(C):(n=o,o=e):(n=o,o=e),R--,o===e&&0===R&&s(eh),o===e&&(R++,o=n,45===M.charCodeAt(n)?(C=yn,n++):(C=e,0===R&&s(un)),C!==e?(C=Rt())!==e?o=C=ef(C):(n=o,o=e):(n=o,o=e),R--,o===e&&0===R&&s($c))),R--,o===e&&0===R&&s(Tc),o}function Ft(){var o;return R++,M.substr(n,4)===Ff?(o=Ff,n+=4):(o=e,0===R&&s(Ic)),o===e&&(M.substr(n,4)===_f?(o=_f,n+=4):(o=e,0===R&&s(Nc))),o!==e&&(o={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}),o===e&&(M.substr(n,5)===Af?(o=Af,n+=5):(o=e,0===R&&s(Mc)),o===e&&(M.substr(n,5)===Lf?(o=Lf,n+=5):(o=e,0===R&&s(jc))),o!==e&&(o={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1})),R--,o===e&&0===R&&s(Ec),o}function mt(){var o,C,w;if(R++,R++,o=n,M.substr(n,3)===na?(C=na,n+=3):(C=e,0===R&&s(Wf)),C!==e){for(C=[],qf.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(zf)),w===e&&(w=wr());w!==e;)C.push(w),qf.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(zf)),w===e&&(w=wr());C!==e?(M.substr(n,3)===na?(w=na,n+=3):(w=e,0===R&&s(Wf)),w!==e?o=C=Mn(C):(n=o,o=e)):(n=o,o=e)}else n=o,o=e;if(R--,o===e&&0===R&&s(ah),o!==e&&(o=ea(o)),o===e){if(R++,o=n,M.substr(n,3)===ia?(C=ia,n+=3):(C=e,0===R&&s(Jf)),C!==e){for(C=[],Kf.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(Vf)),w===e&&(w=wr());w!==e;)C.push(w),Kf.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(Vf)),w===e&&(w=wr());C!==e?(M.substr(n,3)===ia?(w=ia,n+=3):(w=e,0===R&&s(Jf)),w!==e?o=C=Mn(C):(n=o,o=e)):(n=o,o=e)}else n=o,o=e;if(R--,o===e&&0===R&&s(fh),o!==e&&(o=ea(o)),o===e){if(R++,o=n,39===M.charCodeAt(n)?(C=tf,n++):(C=e,0===R&&s(rf)),C!==e){for(C=[],Pf.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(Qf)),w===e&&(w=wr());w!==e;)C.push(w),Pf.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(Qf)),w===e&&(w=wr());C!==e?(39===M.charCodeAt(n)?(w=tf,n++):(w=e,0===R&&s(rf)),w!==e?o=C=Mn(C):(n=o,o=e)):(n=o,o=e)}else n=o,o=e;if(R--,o===e&&0===R&&s(lh),o!==e&&(o=ea(o)),o===e){if(R++,o=n,34===M.charCodeAt(n)?(C=Uf,n++):(C=e,0===R&&s(Gf)),C!==e){for(C=[],Hf.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(Xf)),w===e&&(w=wr());w!==e;)C.push(w),Hf.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(Xf)),w===e&&(w=wr());C!==e?(34===M.charCodeAt(n)?(w=Uf,n++):(w=e,0===R&&s(Gf)),w!==e?o=C=Mn(C):(n=o,o=e)):(n=o,o=e)}else n=o,o=e;R--,o===e&&0===R&&s(uh),o!==e&&(o=ea(o))}}}return R--,o===e&&0===R&&s(Oc),o}function wt(){var o,C,w;(R++,(o=Nt())!==e&&(o={token:"uri",prefix:null,suffix:null,value:o}),o===e)&&(R++,R++,o=n,(C=Bt())!==e?(w=Wr())!==e?o=C=[C,w]:(n=o,o=e):(n=o,o=e),R--,o===e&&0===R&&s(Uc),o!==e&&(o={token:"uri",prefix:o[0],suffix:o[1],value:null}),o===e&&((o=Bt())!==e&&(o={token:"uri",prefix:o,suffix:"",value:null})),R--,o===e&&0===R&&s(Rc));return R--,o===e&&0===R&&s(Dc),o}function Nt(){var o,C,w;if(R++,o=n,60===M.charCodeAt(n)?(C=Ni,n++):(C=e,0===R&&s(Kn)),C!==e){for(C=[],Tf.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(Ef));w!==e;)C.push(w),Tf.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(Ef));C!==e?(62===M.charCodeAt(n)?(w=yo,n++):(w=e,0===R&&s(mo)),w!==e?o=C=C.join(""):(n=o,o=e)):(n=o,o=e)}else n=o,o=e;return R--,o===e&&0===R&&s(Pc),o}function Bt(){var o,C,w,y,P;if(R++,o=n,R++,C=n,(w=xr())!==e){for(y=[],(P=fn())===e&&(46===M.charCodeAt(n)?(P=ar,n++):(P=e,0===R&&s(Tr)));P!==e;)y.push(P),(P=fn())===e&&(46===M.charCodeAt(n)?(P=ar,n++):(P=e,0===R&&s(Tr)));if(y!==e){if("."==y[y.length-1])throw Error("Wrong PN_PREFIX, cannot finish with '.'");C=w+=y.join("")}else n=C,C=e}else n=C,C=e;return R--,C===e&&0===R&&s(ip),C===e&&(C=null),C!==e?(58===M.charCodeAt(n)?(w=wl,n++):(w=e,0===R&&s(xl)),w!==e?o=C:(n=o,o=e)):(n=o,o=e),R--,o===e&&0===R&&s(Qc),o}function Rt(){var o,C;if(R++,o=[],or.test(M.charAt(n))?(C=M.charAt(n),n++):(C=e,0===R&&s(sr)),C!==e)for(;C!==e;)o.push(C),or.test(M.charAt(n))?(C=M.charAt(n),n++):(C=e,0===R&&s(sr));else o=e;return o!==e&&((C={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"}).value=Mn(o),o=C),R--,o===e&&0===R&&s(zc),o}function Zt(){var o,C,w,y,P;if(R++,o=n,C=[],or.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(sr)),w!==e)for(;w!==e;)C.push(w),or.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(sr));else C=e;if(C!==e)if(46===M.charCodeAt(n)?(w=ar,n++):(w=e,0===R&&s(Tr)),w!==e){for(y=[],or.test(M.charAt(n))?(P=M.charAt(n),n++):(P=e,0===R&&s(sr));P!==e;)y.push(P),or.test(M.charAt(n))?(P=M.charAt(n),n++):(P=e,0===R&&s(sr));y!==e?(o={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"}).value=Mn([C,w,y]):(n=o,o=e)}else n=o,o=e;else n=o,o=e;if(o===e)if(o=n,46===M.charCodeAt(n)?(C=ar,n++):(C=e,0===R&&s(Tr)),C!==e){if(w=[],or.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(sr)),y!==e)for(;y!==e;)w.push(y),or.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(sr));else w=e;w!==e?((y={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"}).value=Mn([C,w]),o=y):(n=o,o=e)}else n=o,o=e;return R--,o===e&&0===R&&s(Jc),o}function br(){var o,C,w,y,P;if(R++,o=n,C=[],or.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(sr)),w!==e)for(;w!==e;)C.push(w),or.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(sr));else C=e;if(C!==e)if(46===M.charCodeAt(n)?(w=ar,n++):(w=e,0===R&&s(Tr)),w!==e){for(y=[],or.test(M.charAt(n))?(P=M.charAt(n),n++):(P=e,0===R&&s(sr));P!==e;)y.push(P),or.test(M.charAt(n))?(P=M.charAt(n),n++):(P=e,0===R&&s(sr));y!==e?(P=jr())!==e?(o={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"}).value=Mn([C,w,y,P]):(n=o,o=e):(n=o,o=e)}else n=o,o=e;else n=o,o=e;if(o===e){if(o=n,46===M.charCodeAt(n)?(C=ar,n++):(C=e,0===R&&s(Tr)),C!==e){if(w=[],or.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(sr)),y!==e)for(;y!==e;)w.push(y),or.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(sr));else w=e;w!==e?(y=jr())!==e?((P={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"}).value=Mn([C,w,y]),o=P):(n=o,o=e):(n=o,o=e)}else n=o,o=e;if(o===e){if(o=n,C=[],or.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(sr)),w!==e)for(;w!==e;)C.push(w),or.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(sr));else C=e;C!==e?(w=jr())!==e?((y={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"}).value=Mn([C,w]),o=y):(n=o,o=e):(n=o,o=e)}}return R--,o===e&&0===R&&s(Kc),o}function jr(){var o,C,w,y,P;if(R++,o=n,nh.test(M.charAt(n))?(C=M.charAt(n),n++):(C=e,0===R&&s(ih)),C!==e)if(oh.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(sh)),w===e&&(w=null),w!==e){if(y=[],or.test(M.charAt(n))?(P=M.charAt(n),n++):(P=e,0===R&&s(sr)),P!==e)for(;P!==e;)y.push(P),or.test(M.charAt(n))?(P=M.charAt(n),n++):(P=e,0===R&&s(sr));else y=e;y!==e?o=C=Mn([C,w,y]):(n=o,o=e)}else n=o,o=e;else n=o,o=e;return R--,o===e&&0===R&&s(rh),o}function wr(){var o,C,w;return R++,o=n,92===M.charCodeAt(n)?(C=Yf,n++):(C=e,0===R&&s(Zf)),C!==e?(hh.test(M.charAt(n))?(w=M.charAt(n),n++):(w=e,0===R&&s(ph)),w!==e?o=C=[C,w]:(n=o,o=e)):(n=o,o=e),R--,o===e&&0===R&&s(ch),o}function Br(){var o,C,w;if(R++,o=n,40===M.charCodeAt(n)?(C=jt,n++):(C=e,0===R&&s(Ot)),C!==e){for(C=[],w=K();w!==e;)C.push(w),w=K();C!==e?(41===M.charCodeAt(n)?(w=Et,n++):(w=e,0===R&&s(Dt)),w!==e?o=C={token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:(n=o,o=e)):(n=o,o=e)}else n=o,o=e;return R--,o===e&&0===R&&s(dh),o}function K(){var o;if(R++,vh.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(yh)),o===e&&(mh.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(wh)),o===e&&(xh.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(Ch)),o===e&&(bh.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(kh)),o===e)))){var C,w,y;if(R++,o=n,35===M.charCodeAt(n)?(C=$f,n++):(C=e,0===R&&s(ec)),C!==e){for(w=[],tc.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(rc));y!==e;)w.push(y),tc.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(rc));w!==e?o=C=[C,w]:(n=o,o=e)}else n=o,o=e;R--,o===e&&0===R&&s(Sh)}return R--,o===e&&0===R&&s(gh),o}function xr(){var o;return R++,Ah.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(Lh)),o===e&&(Th.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(Eh)),o===e&&(Ih.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(Nh)),o===e&&(Mh.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(jh)),o===e&&(Oh.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(Dh)),o===e&&(Rh.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(Bh)),o===e&&(Ph.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(Qh)),o===e&&(Uh.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(Gh)),o===e&&(Hh.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(Xh)),o===e&&(Wh.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(qh)),o===e&&(zh.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(Jh)),o===e&&(Kh.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(Vh)),o===e&&(Yh.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(Zh)),o===e&&($h.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(ep))))))))))))))),R--,o===e&&0===R&&s(_h),o}function en(){var o;return R++,(o=xr())===e&&(95===M.charCodeAt(n)?(o=nc,n++):(o=e,0===R&&s(ic))),R--,o===e&&0===R&&s(tp),o}function Qi(){var o,C,w,y;if(R++,o=n,(C=en())===e&&(or.test(M.charAt(n))?(C=M.charAt(n),n++):(C=e,0===R&&s(sr))),C!==e){for(w=[],(y=en())===e&&(or.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(sr)),y===e&&(nf.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(of)),y===e&&(sf.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(lf)),y===e&&(uf.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(af))))));y!==e;)w.push(y),(y=en())===e&&(or.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(sr)),y===e&&(nf.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(of)),y===e&&(sf.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(lf)),y===e&&(uf.test(M.charAt(n))?(y=M.charAt(n),n++):(y=e,0===R&&s(af))))));w!==e?o=C+=w.join(""):(n=o,o=e)}else n=o,o=e;return R--,o===e&&0===R&&s(rp),o}function fn(){var o;return R++,(o=en())===e&&(45===M.charCodeAt(n)?(o=yn,n++):(o=e,0===R&&s(un)),o===e&&(or.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(sr)),o===e&&(nf.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(of)),o===e&&(sf.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(lf)),o===e&&(uf.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(af))))))),R--,o===e&&0===R&&s(np),o}function Wr(){var o,C,w,y;if(R++,o=n,(C=en())===e&&(or.test(M.charAt(n))?(C=M.charAt(n),n++):(C=e,0===R&&s(sr)),C===e&&(58===M.charCodeAt(n)?(C=wl,n++):(C=e,0===R&&s(xl)),C===e&&(C=cn()))),C!==e){for(w=[],(y=fn())===e&&(46===M.charCodeAt(n)?(y=ar,n++):(y=e,0===R&&s(Tr)),y===e&&(58===M.charCodeAt(n)?(y=wl,n++):(y=e,0===R&&s(xl)),y===e&&(y=cn())));y!==e;)w.push(y),(y=fn())===e&&(46===M.charCodeAt(n)?(y=ar,n++):(y=e,0===R&&s(Tr)),y===e&&(58===M.charCodeAt(n)?(y=wl,n++):(y=e,0===R&&s(xl)),y===e&&(y=cn())));w!==e?o=C+=(w||[]).join(""):(n=o,o=e)}else n=o,o=e;return R--,o===e&&0===R&&s(op),o}function cn(){var o,C,w,y;return R++,R++,o=n,37===M.charCodeAt(n)?(C=oc,n++):(C=e,0===R&&s(sc)),C!==e?(w=Ui())!==e?(y=Ui())!==e?o=C=[C,w,y]:(n=o,o=e):(n=o,o=e):(n=o,o=e),o!==e&&(o=o.join("")),R--,o===e&&0===R&&s(lp),o===e&&(R++,o=n,92===M.charCodeAt(n)?(C=Yf,n++):(C=e,0===R&&s(Zf)),C!==e?(95===M.charCodeAt(n)?(C=nc,n++):(C=e,0===R&&s(ic)),C===e&&(126===M.charCodeAt(n)?(C=dp,n++):(C=e,0===R&&s(gp)),C===e&&(46===M.charCodeAt(n)?(C=ar,n++):(C=e,0===R&&s(Tr)),C===e&&(45===M.charCodeAt(n)?(C=yn,n++):(C=e,0===R&&s(un)),C===e&&(33===M.charCodeAt(n)?(C=ts,n++):(C=e,0===R&&s(el)),C===e&&(36===M.charCodeAt(n)?(C=Nf,n++):(C=e,0===R&&s(Mf)),C===e&&(38===M.charCodeAt(n)?(C=vp,n++):(C=e,0===R&&s(yp)),C===e&&(39===M.charCodeAt(n)?(C=tf,n++):(C=e,0===R&&s(rf)),C===e&&(40===M.charCodeAt(n)?(C=jt,n++):(C=e,0===R&&s(Ot)),C===e&&(41===M.charCodeAt(n)?(C=Et,n++):(C=e,0===R&&s(Dt)),C===e&&(42===M.charCodeAt(n)?(C=bn,n++):(C=e,0===R&&s(zr)),C===e&&(43===M.charCodeAt(n)?(C=Yr,n++):(C=e,0===R&&s(Zr)),C===e&&(44===M.charCodeAt(n)?(C=gr,n++):(C=e,0===R&&s(vr)),C===e&&(59===M.charCodeAt(n)?(C=sn,n++):(C=e,0===R&&s(Kr)),C===e&&(58===M.charCodeAt(n)?(C=wl,n++):(C=e,0===R&&s(xl)),C===e&&(61===M.charCodeAt(n)?(C=In,n++):(C=e,0===R&&s(go)),C===e&&(47===M.charCodeAt(n)?(C=dn,n++):(C=e,0===R&&s(qn)),C===e&&(63===M.charCodeAt(n)?(C=es,n++):(C=e,0===R&&s(di)),C===e&&(35===M.charCodeAt(n)?(C=$f,n++):(C=e,0===R&&s(ec)),C===e&&(64===M.charCodeAt(n)?(C=jf,n++):(C=e,0===R&&s(Of)),C===e&&(37===M.charCodeAt(n)?(C=oc,n++):(C=e,0===R&&s(sc)))))))))))))))))))))),C!==e?o="\\"+C:(n=o,o=e)):(n=o,o=e),R--,o===e&&0===R&&s(pp)),R--,o===e&&0===R&&s(sp),o}function Ui(){var o;return R++,or.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(sr)),o===e&&(ap.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(fp)),o===e&&(cp.test(M.charAt(n))?(o=M.charAt(n),n++):(o=e,0===R&&s(hp)))),R--,o===e&&0===R&&s(up),o}T=void 0!==T?T:{};var sa,e={},wn={DOCUMENT:D},Gi=D,$t=I("[1] QueryUnit"),bt=I("[2] Query"),$n=I("[3] Prologue"),ds=I("[4] BaseDecl"),tn="BASE",qt=E("BASE",!1),jn="base",Hi=E("base",!1),gs=I("[5] PrefixDecl"),ot="PREFIX",Tt=E("PREFIX",!1),ko="prefix",vs=E("prefix",!1),So=I("[6] SelectQuery"),Fo=I("[7] SubSelect"),Cl=I("[8] SelectClause"),Lt="SELECT",la=E("SELECT",!1),ys="select",_o=E("select",!1),Jt="DISTINCT",xn=E("DISTINCT",!1),kr="distinct",qr=E("distinct",!1),Ao="REDUCED",bl=E("REDUCED",!1),Lo="reduced",kl=E("reduced",!1),jt="(",Ot=E("(",!1),Cn="AS",To=E("AS",!1),On="as",Xi=E("as",!1),Et=")",Dt=E(")",!1),bn="*",zr=E("*",!1),Wi=I("[9] ConstructQuery"),Eo="CONSTRUCT",Sl=E("CONSTRUCT",!1),Io="construct",Fl=E("construct",!1),hn="WHERE",qi=E("WHERE",!1),Dn="where",zi=E("where",!1),Jr="{",Pr=E("{",!1),Sr="}",Ar=E("}",!1),_l=I("[10] DescribeQuery"),ms="DESCRIBE",No=E("DESCRIBE",!1),ua=I("[11] AskQuery"),ws="ASK",rn=E("ASK",!1),Al="ask",aa=E("ask",!1),xs=I("[12] DatasetClause"),Cs="FROM",Rn=E("FROM",!1),Mo="from",kn=E("from",!1),jo=I("[13] DefaultGraphClause"),bs=I("[14] NamedGraphClause"),nn="NAMED",ks=E("NAMED",!1),wi="named",Ss=E("named",!1),fa=I("[15] SourceSelector"),Ll=I("[16] WhereClause"),Tl=I("[17] SolutionModifier"),ca=I("[18] GroupClause"),El="GROUP",ha=E("GROUP",!1),Il="group",Nl=E("group",!1),Oo="BY",Fs=E("BY",!1),ei="by",ti=E("by",!1),pa=I("[19] GroupCondition"),da=I("[20] HavingClause"),Ml="HAVING",Ji=E("HAVING",!1),hr=I("[21] HavingCondition"),ga=I("[22] OrderClause"),_s="ORDER",Ki=E("ORDER",!1),jl="order",Ol=E("order",!1),va=I("[23] OrderCondition"),Do="ASC",Dl=E("ASC",!1),Rl="asc",ya=E("asc",!1),As="DESC",Bl=E("DESC",!1),Pl="desc",Vi=E("desc",!1),Sn=I("[24] LimitOffsetClauses"),Ro=I("[25] LimitClause"),Bo="LIMIT",Ql=E("LIMIT",!1),on="limit",ri=E("limit",!1),Ls=I("[26] OffsetClause"),Ul="OFFSET",Gl=E("OFFSET",!1),Hl="offset",Xl=E("offset",!1),Ts=I("[27] BindingsClause"),ni="BINDINGS",pn=E("BINDINGS",!1),Wl=I("[28] BindingValue"),Yi="UNDEF",ql=E("UNDEF",!1),ma=I("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),Po="VALUES",Es=E("VALUES",!1),Zi="values",xi=E("values",!1),zl=I("[29] UpdateUnit"),Jl=I("[30] Update"),sn=";",Kr=E(";",!1),Kl=I("[31] Update1"),Qo=I("[32] Load"),Vr="LOAD",Vl=E("LOAD",!1),Uo="load",Is=E("load",!1),Ns="INTO",Yl=E("INTO",!1),Go="into",wa=E("into",!1),xa=I("[33] Clear"),Zl="CLEAR",ii=E("CLEAR",!1),oi="clear",Ci=E("clear",!1),Bn="SILENT",$i=E("SILENT",!1),si="silent",eo=E("silent",!1),li=I("[34] Drop"),Pn="DROP",Or=E("DROP",!1),Fn="drop",Qn=E("drop",!1),Ho=I("[35] Create"),$l="CREATE",eu=E("CREATE",!1),bi="create",tu=E("create",!1),Ms=I("[36] InsertData"),ui="INSERT",ru=E("INSERT",!1),ki="insert",js=E("insert",!1),Si="DATA",Xo=E("DATA",!1),_n="data",to=E("data",!1),nu=I("[37] DeleteData"),An="DELETE",Os=E("DELETE",!1),Fi="delete",Ds=E("delete",!1),Rs=I("[38] DeleteWhere"),Bs=I("[39] Modify"),ai="WITH",ro=E("WITH",!1),iu="with",Wo=E("with",!1),ou=I("[40] DeleteClause"),no=I("[41] InsertClause"),su=I("[42] UsingClause"),Un="USING",io=E("USING",!1),Gn="using",oo=E("using",!1),_i=I("[43] GraphRef"),fi="GRAPH",qo=E("GRAPH",!1),ci="graph",Ps=E("graph",!1),hi=I("[44] GraphRefAll"),Hn="DEFAULT",Ca=E("DEFAULT",!1),lu="default",ba=E("default",!1),uu="ALL",ka=E("ALL",!1),au="all",Qr=E("all",!1),pr=I("[45] QuadPattern"),Lr=I("[46] QuadData"),dr=I("[47] Quads"),ar=".",Tr=E(".",!1),zo=I("[48] QuadsNotTriples"),Sa=I("[49] TriplesTemplate"),Fa=I("[50] GroupGraphPattern"),_a=I("[51] GroupGraphPatternSub"),Qs=I("[54] TriplesBlock"),fu=I("[53] GraphPatternNotTriples"),Us=I("[54] OptionalGraphPattern"),cu="OPTIONAL",Gs=E("OPTIONAL",!1),Jo="optional",hu=E("optional",!1),pu=I("[55] GraphGraphPattern"),Hs=I("[56] ServiceGraphPattern"),Xs="SERVICE",so=E("SERVICE",!1),Aa=I("[57] MinusGraphPattern"),lo="MINUS",Ln=E("MINUS",!1),Ws="minus",La=E("minus",!1),du=I("[58] GroupOrUnionGraphPattern"),Er="UNION",Gt=E("UNION",!1),Ur="union",Tn=E("union",!1),Xn=I("[59] Filter"),qs="FILTER",zs=E("FILTER",!1),Js="filter",Ta=E("filter",!1),Ks=I("[60] Bind"),Ai="BIND",gu=E("BIND",!1),Ko="bind",Wn=E("bind",!1),vu=I("[60] Constraint"),yu=I("[61] InlineData"),Ea=I("[62] DataBlock"),Vo=I("[63] InlineDataOneVar"),Vs=I("[64] InlineDataFull"),mu=I("[65] DataBlockValue"),Ia=I("[61] FunctionCall"),wu=I("[62] ArgList"),gr=",",vr=E(",",!1),Yo=I("[63] ExpressionList"),xu=I("[64] ConstructTemplate"),Na=I("[65] ConstructTriples"),Ma=I("[66] TriplesSameSubject"),Cu=I("[83] PropertyListPathNotEmpty"),Li=I("[67] PropertyListNotEmpty"),Ys=I("[68] PropertyList"),Zo=I("[86] ObjectListPath"),bu=I("[69] ObjectList"),Zs=I("[87] ObjectPath"),ku=I("[70] Object"),ja=I("[71] Verb"),uo="a",fr=E("a",!1),ao=function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}},Su=I("[72] TriplesSameSubjectPath"),Fu=I("[73] PropertyListNotEmptyPath"),_u=I("[74] PropertyListPath"),Ti=I("[75]"),$o=I("[76] VerbSimple"),Au=I("[77] Path"),Lu=I("[78] PathAlternative"),fo="|",En=E("|",!1),Tu=I("[79] PathSequence"),dn="/",qn=E("/",!1),co=I("[88] PathElt"),Oa=I("[81] PathEltOrInverse"),pi="^",$s=E("^",!1),Eu=I("[82] PathMod"),es="?",di=E("?",!1),Yr="+",Zr=E("+",!1),ho=I("[83] PathPrimary"),ts="!",el=E("!",!1),Iu=I("[85] PathOneInPropertySet"),zn=I("[86] Integer"),Ei=I("[100] TriplesNodePath"),po=I("[87] TriplesNode"),Da=I("[101] BlankNodePropertyListPath"),rs="[",tl=E("[",!1),rl="]",nl=E("]",!1),Dr=I("[88] BlankNodePropertyList"),Nu=I("[103] CollectionPath"),Ra=I("[89] Collection"),Ba=I("[105] GraphNodePath"),Pa=I("[90] GraphNode"),Mu=I("[91] VarOrTerm"),ju=I("[92] VarOrIRIref"),Ou=I("[93] Var"),Qa=I("[94] GraphTerm"),Ua=I("[95] Expression"),Ga=I("[96] ConditionalOrExpression"),ln="||",Ii=E("||",!1),ns=I("[97] ConditionalAndExpression"),Jn="&&",gn=E("&&",!1),Ha=I("[98] ValueLogical"),Xa=I("[99] RelationalExpression"),In="=",go=E("=",!1),vo="!=",il=E("!=",!1),Ni="<",Kn=E("<",!1),yo=">",mo=E(">",!1),Mi="<=",Du=E("<=",!1),Vn=">=",ol=E(">=",!1),is="I",wo=E("I",!1),gi="i",os=E("i",!1),ji="N",vn=E("N",!1),vi="n",yi=E("n",!1),Ru="O",ss=E("O",!1),sl="o",Bu=E("o",!1),ll="T",ul=E("T",!1),Pu="t",ls=E("t",!1),xo=I("[100] NumericExpression"),Co=I("[101] AdditiveExpression"),yn="-",un=E("-",!1),Wa=I("[102] MultiplicativeExpression"),qa=I("[103] UnaryExpression"),za=I("[104] PrimaryExpression"),Ja=I("[105] BrackettedExpression"),Qu=I("[106] BuiltInCall"),Uu="STR",Ka=E("STR",!1),al="str",fl=E("str",!1),cl="LANG",Va=E("LANG",!1),hl="lang",Oi=E("lang",!1),pl="LANGMATCHES",us=E("LANGMATCHES",!1),Gu="langmatches",Ya=E("langmatches",!1),Hu="DATATYPE",Kt=E("DATATYPE",!1),Xu="datatype",dl=E("datatype",!1),Di="BOUND",an=E("BOUND",!1),bo="bound",gl=E("bound",!1),vl="IRI",Wu=E("IRI",!1),yl="iri",qu=E("iri",!1),ml="URI",Za=E("URI",!1),as="uri",zu=E("uri",!1),Xt="BNODE",Ju=E("BNODE",!1),Ku="bnode",Ri=E("bnode",!1),Vu="COALESCE",fs=E("COALESCE",!1),Yu="coalesce",rr=E("coalesce",!1),Zu="IF",$a=E("IF",!1),$u="if",cs=E("if",!1),t="ISLITERAL",i=E("ISLITERAL",!1),L="isliteral",_=E("isliteral",!1),N="isLITERAL",U=E("isLITERAL",!1),re="ISBLANK",fe=E("ISBLANK",!1),ve="isblank",xe=E("isblank",!1),Oe="isBLANK",Ue=E("isBLANK",!1),Ve="SAMETERM",ze=E("SAMETERM",!1),rt="sameterm",nt=E("sameterm",!1),lt="ISURI",at=E("ISURI",!1),pt="isuri",ft=E("isuri",!1),gt="isURI",_t=E("isURI",!1),kt="ISIRI",Mt=E("ISIRI",!1),zt="isiri",yr=E("isiri",!1),Vt="isIRI",Gr=E("isIRI",!1),Ir="custom:",lr=E("custom:",!1),Nr="CUSTOM:",Cr=E("CUSTOM:",!1),ur=/^[a-zA-Z0-9_]/,nr=F([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),er=I("[107] RegexExpression"),Mr="REGEX",Bi=E("REGEX",!1),Nn="regex",Fr=E("regex",!1),mn=I("[108] ExistsFunc"),ir="EXISTS",hs=E("EXISTS",!1),$r="exists",Yn=E("exists",!1),mi=I("[109] NotExistsFunc"),_r="NOT",Pi=E("NOT",!1),ps="not",uc=E("not",!1),ac=I("[110] Aggregate"),cf="COUNT",fc=E("COUNT",!1),hf="count",cc=E("count",!1),pf="GROUP_CONCAT",hc=E("GROUP_CONCAT",!1),df="group_concat",pc=E("group_concat",!1),gf="SEPARATOR",dc=E("SEPARATOR",!1),vf="SUM",gc=E("SUM",!1),yf="sum",vc=E("sum",!1),mf="MIN",yc=E("MIN",!1),wf="min",mc=E("min",!1),xf="MAX",wc=E("MAX",!1),Cf="max",xc=E("max",!1),bf="AVG",Cc=E("AVG",!1),kf="avg",bc=E("avg",!1),kc=I("[117] IRIrefOrFunction"),Sc=I("[112] RDFLiteral"),Sf="^^",Fc=E("^^",!1),_c=I("[113] NumericLiteral"),Ac=I("[114] NumericLiteralUnsigned"),Lc=I("[115] NumericLiteralPositive"),Tc=I("[116] NumericLiteralNegative"),Ec=I("[117] BooleanLiteral"),Ff="TRUE",Ic=E("TRUE",!1),_f="true",Nc=E("true",!1),Af="FALSE",Mc=E("FALSE",!1),Lf="false",jc=E("false",!1),Oc=I("[118] String"),ea=function(o){return{token:"string",value:o}},Dc=I("[119] IRIref"),Rc=I("[120] PrefixedName"),Bc=I("[121] BlankNode"),Pc=I("[122] IRI_REF"),Tf=/^[^<>"{}|\^`\\]/,Ef=F('<>"{}|^`\\'.split(""),!0,!1),Qc=I("[123] PNAME_NS"),wl=":",xl=E(":",!1),Uc=I("[124] PNAME_LN"),Gc=I("[125] BLANK_NODE_LABEL"),If="_:",Hc=E("_:",!1),Xc=I("[126] VAR1"),Wc=I("[127] VAR2"),Nf="$",Mf=E("$",!1),qc=I("[128] LANGTAG"),jf="@",Of=E("@",!1),Df=/^[a-zA-Z]/,Rf=F([["a","z"],["A","Z"]],!1,!1),ta=/^[a-zA-Z0-9]/,ra=F([["a","z"],["A","Z"],["0","9"]],!1,!1),zc=I("[129] INTEGER"),or=/^[0-9]/,sr=F([["0","9"]],!1,!1),Jc=I("[130] DECIMAL"),Kc=I("[131] DOUBLE"),Vc=I("[132] INTEGER_POSITIVE"),Yc=I("[133] DECIMAL_POSITIVE"),Bf=function(o){return o.value="+"+o.value,o},Zc=I("[134] DOUBLE_POSITIVE"),$c=I("[135] INTEGER_NEGATIVE"),ef=function(o){return o.value="-"+o.value,o},eh=I("[136] DECIMAL_NEGATIVE"),th=I("[137] DOUBLE_NEGATIVE"),rh=I("[138] EXPONENT"),nh=/^[eE]/,ih=F(["e","E"],!1,!1),oh=/^[+\-]/,sh=F(["+","-"],!1,!1),lh=I("[139] STRING_LITERAL1"),tf="'",rf=E("'",!1),Pf=/^[^'\\\n\r]/,Qf=F(["'","\\","\n","\r"],!0,!1),uh=I("[140] STRING_LITERAL2"),Uf='"',Gf=E('"',!1),Hf=/^[^"\\\n\r]/,Xf=F(['"',"\\","\n","\r"],!0,!1),ah=I("[141] STRING_LITERAL_LONG1"),na="'''",Wf=E("'''",!1),qf=/^[^'\\]/,zf=F(["'","\\"],!0,!1),fh=I("[142] STRING_LITERAL_LONG2"),ia='"""',Jf=E('"""',!1),Kf=/^[^"\\]/,Vf=F(['"',"\\"],!0,!1),ch=I("[143] ECHAR"),Yf="\\",Zf=E("\\",!1),hh=/^[tbnrf"']/,ph=F("tbnrf\"'".split(""),!1,!1),dh=I("[144] NIL"),gh=I("[145] WS"),vh=/^[ ]/,yh=F([" "],!1,!1),mh=/^[\t]/,wh=F(["\t"],!1,!1),xh=/^[\r]/,Ch=F(["\r"],!1,!1),bh=/^[\n]/,kh=F(["\n"],!1,!1),Sh=I(" COMMENT"),$f="#",ec=E("#",!1),tc=/^[^\n\r]/,rc=F(["\n","\r"],!0,!1),Fh=I("[146] ANON"),_h=I("[147] PN_CHARS_BASE"),Ah=/^[A-Z]/,Lh=F([["A","Z"]],!1,!1),Th=/^[a-z]/,Eh=F([["a","z"]],!1,!1),Ih=/^[\xC0-\xD6]/,Nh=F([["\xc0","\xd6"]],!1,!1),Mh=/^[\xD8-\xF6]/,jh=F([["\xd8","\xf6"]],!1,!1),Oh=/^[\xF8-\u02FF]/,Dh=F([["\xf8","\u02ff"]],!1,!1),Rh=/^[\u0370-\u037D]/,Bh=F([["\u0370","\u037d"]],!1,!1),Ph=/^[\u037F-\u1FFF]/,Qh=F([["\u037f","\u1fff"]],!1,!1),Uh=/^[\u200C-\u200D]/,Gh=F([["\u200c","\u200d"]],!1,!1),Hh=/^[\u2070-\u218F]/,Xh=F([["\u2070","\u218f"]],!1,!1),Wh=/^[\u2C00-\u2FEF]/,qh=F([["\u2c00","\u2fef"]],!1,!1),zh=/^[\u3001-\uD7FF]/,Jh=F([["\u3001","\ud7ff"]],!1,!1),Kh=/^[\uF900-\uFDCF]/,Vh=F([["\uf900","\ufdcf"]],!1,!1),Yh=/^[\uFDF0-\uFFFD]/,Zh=F([["\ufdf0","\ufffd"]],!1,!1),$h=/^[\u1000-\uEFFF]/,ep=F([["\u1000","\uefff"]],!1,!1),tp=I("[148] PN_CHARS_U"),nc="_",ic=E("_",!1),rp=I("[149] VARNAME"),nf=/^[\xB7]/,of=F(["\xb7"],!1,!1),sf=/^[\u0300-\u036F]/,lf=F([["\u0300","\u036f"]],!1,!1),uf=/^[\u203F-\u2040]/,af=F([["\u203f","\u2040"]],!1,!1),np=I("[150] PN_CHARS"),ip=I("[151] PN_PREFIX"),op=I("[152] PN_LOCAL"),sp=I("[170] PLX"),lp=I("[171] PERCENT"),oc="%",sc=E("%",!1),up=I("[172] HEX"),ap=/^[A-F]/,fp=F([["A","F"]],!1,!1),cp=/^[a-f]/,hp=F([["a","f"]],!1,!1),pp=I("[173] PN_LOCAL_ESC"),dp="~",gp=E("~",!1),vp="&",yp=E("&",!1),n=0,oa=[{line:1,column:1}],Zn=0,ff=[],R=0;if("startRule"in T){if(!(T.startRule in wn))throw Error("Can't start parsing from rule \""+T.startRule+'".');Gi=wn[T.startRule]}var o,C,w,Mn=function(o){for(var C="",w=0;w<o.length;w++)C="string"==typeof o[w]?C+o[w]:C+o[w].join("");return C},Hr=0,lc=function(o){var C="";if(null==o)return null;for(var w=0;w<o.length;w++)C+=o[w];return C.toUpperCase()};if((sa=Gi())!==e&&n===M.length)return sa;throw sa!==e&&n<M.length&&s({type:"end"}),o=ff,C=Zn<M.length?M.charAt(Zn):null,w=Zn<M.length?j(Zn,Zn+1):j(Zn,Zn),new ye(ye.buildMessage(o,C),o,C,w)}}}()},{}],47:[function(Ce,Ee,Be){Ce("./btree");var ye=Ce("./utils"),M=Ce("./lexicon").Lexicon;PersistentLexicon=function(T,E){var F=this;ye.registerIndexedDB(F),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,F.dbName=E||"rdfstorejs";var I=F.indexedDB.open(this.dbName+"_lexicon",1);I.onerror=function(O){T(null,Error("Error opening IndexedDB: "+O.target.errorCode))},I.onsuccess=function(O){F.db=O.target.result,T(F)},I.onupgradeneeded=function(O){F.db=O.target.result,F.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),F.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(T,E,F){if(T!=this.defaultGraphOid){var I=this.db.transaction(["knownGraphs"],"readwrite");I.onerror=function(j){F(null,Error(j.target.statusCode))};var O=I.objectStore("knownGraphs");O.get(E).onsuccess=function(j){j.target.result?F(!0):O.add({oid:T,uriToken:E}).onsuccess=function(s){F(!0)}}}else F()},PersistentLexicon.prototype.registeredGraphs=function(T,E){var F=[],I=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs").openCursor();I.onsuccess=function(O){(O=O.target.result)?(!0===T?F.push(O.value.uriToken):F.push(O.value.oid),O.continue()):E(F)},I.onerror=function(O){E(null,Error("Error retrieving data from the cursor: "+O.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(T,E){if(T===this.defaultGraphUri)E(this.defaultGraphOid);else{var F=this.db.transaction(["components"],"readwrite").objectStore("components"),I=F.index("value").get("_u:"+T);I.onsuccess=function(O){if(O=O.target.result){O.counter++;var j=O.id;(O=F.put(O)).onsuccess=function(s){E(j)},O.onerror=function(s){E(null,Error("Error updating the URI data"+s.target.errorCode))}}else(O=F.add({value:"_u:"+T,counter:0,uri:!0})).onsuccess=function(s){E(s.target.result)},O.onerror=function(s){E(null,Error("Error inserting the URI data"+s.target.errorCode))}},I.onerror=function(O){E(null,Error("Error retrieving the URI data"+O.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(T,E){if(T===this.defaultGraphUri)E(this.defaultGraphOid);else{var F=this.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+T);F.onsuccess=function(I){null!=I.target.result?E(I.target.result.id):E(-1)},F.onerror=function(I){E(null,Error("Error retrieving uri data "+I.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(T,E){if(T===this.defaultGraphUri)E(0);else{var F=that.db.transaction(["components"]).objectStore("components").index("value").get("_u:"+T);F.onsuccess=function(I){null!=I.target.result?E(I.target.result.cost):E(-1)},F.onerror=function(I){E(null,Error("Error retrieving uri data "+I.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(T){var E=guid();(E=this.db.transaction(["components"],"readwrite").objectStore("components").add({value:"_b:"+E,counter:0,label:!0})).onsuccess=function(F){T(F.target.result)},E.onerror=function(F){T(null,Error("Error inserting the URI data"+F.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(T,E){E(0)},PersistentLexicon.prototype.registerLiteral=function(T,E){var F=this.db.transaction(["components"],"readwrite").objectStore("components"),I=F.index("value").get("_l:"+T);I.onsuccess=function(O){if(O=O.target.result){O.counter++;var j=O.id;(O=F.put(O)).onsuccess=function(s){E(j)},O.onerror=function(s){E(null,Error("Error updating the literal data"+s.target.errorCode))}}else(O=F.add({value:"_l:"+T,counter:0,literal:!0})).onsuccess=function(s){E(s.target.result)},O.onerror=function(s){E(null,Error("Error inserting the literal data"+s.target.errorCode))}},I.onerror=function(O){E(null,Error("Error retrieving the literal data"+O.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(T,E){var F=that.db.transaction(["components"]).objectStore("components").index("value").get("_l:"+T);F.onsuccess=function(I){null!=I.target.result?E(I.target.result.id):E(-1)},F.onerror=function(I){E(null,Error("Error retrieving literal data "+I.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(T,E){var F=that.db.transaction(["components"]).objectStore("components").index("components").get(T);F.onsuccess=function(I){null!=I.target.result?E(I.target.result.cost):E(-1)},F.onerror=function(I){E(null,Error("Error retrieving literal data "+I.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(T){return M.prototype.parseLiteral(T)},PersistentLexicon.prototype.parseUri=function(T){return M.prototype.parseUri(T)},PersistentLexicon.prototype.retrieve=function(T,E){var I,F=this;T===this.defaultGraphOid?E({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):((I=(I=F.db.transaction(["components"])).objectStore("components").get(T)).onsuccess=function(O){null!=O.target.result?null!=O.target.result.label?E({token:"blank",value:"_:"+O.target.result.id}):null!=O.target.result.uri?E(F.parseUri(O.target.result.value.slice(3,O.target.result.value.length))):null!=O.target.result.literal?E(F.parseLiteral(O.target.result.value.slice(3,O.target.result.value.length))):(console.log(O.target.result),E(null,Error("Unknown type of component "+O.target.result))):E(null,null)},I.onerror=function(O){E(null,Error("Error searching in blanks data "+O.target.errorCode))})},PersistentLexicon.prototype.clear=function(T){this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var E,F=function(){null!=T&&T()};(E=this.db.transaction(["components"],"readwrite").objectStore("components").clear()).onsuccess=F,E.onerror=F},PersistentLexicon.prototype.unregister=function(T,E,F){var I=this;ye.seq(function(O){I._unregisterTerm(T.subject.token,E.subject,O)},function(O){I._unregisterTerm(T.predicate.token,E.predicate,O)},function(O){I._unregisterTerm(T.object.token,E.object,O)},function(O){null!=T.graph?I._unregisterTerm(T.graph.token,E.graph,O):O()})(function(){F(!0)})},PersistentLexicon.prototype._unregisterTerm=function(T,E,F){var I=this.db.transaction(["components","knownGraphs"],"readwrite");"uri"===T?E!=this.defaultGraphOid?(T=I.objectStore("components").delete(E)).onsuccess=void(I.objectStore("knownGraphs").delete(E).onsuccess=function(){F()}):F():(T=I.objectStore("components").delete(E)).onsuccess=function(){F()}},Ee.exports={PersistentLexicon}},{"./btree":40,"./lexicon":44,"./utils":57}],48:[function(Ce,Ee,Be){var ye=Ce("./utils");PersistentQuadBackend=function(M,T){var E=this;if(0!==arguments){for(var F in ye.registerIndexedDB(E),this.indexMap={},this.indices="S P O G SP SO SG PO PG OG SPO SPG SOG POG SPOG".split(" "),this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={},this.componentOrders){var I=this.componentOrders[F].slice(0,F.length).sort().join(".");this.componentOrdersMap[I]=F}E.dbName=M.name||"rdfstorejs",(F=E.indexedDB.open(this.dbName+"_db",1)).onerror=function(O){T(null,Error("Error opening IndexedDB: "+O.target.errorCode))},F.onsuccess=function(O){E.db=O.target.result,T(E)},F.onupgradeneeded=function(O){var j=O.target.result.createObjectStore(E.dbName,{keyPath:"SPOG"});ye.each(E.indices,function(s){"SPOG"!==s&&j.createIndex(s,s,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(M,T){var E=this;ye.each(this.indices,function(I){M[I]=E._genMinIndexKey(M,I)});var F=E.db.transaction([E.dbName],"readwrite");F.oncomplete=function(I){},F.onerror=function(I){T(null,Error(I.target.statusCode))},F.objectStore(E.dbName).add(M).onsuccess=function(I){T(!0)}},PersistentQuadBackend.prototype.range=function(M,T){var E=this.db.transaction([this.dbName]).objectStore(this.dbName),F=this._indexForPattern(M),O=this._genMinIndexKey(M,F),I=this._genMaxIndexKey(M,F),j=(O=this.IDBKeyRange.bound(O,I,!1,!1),[]);("SPOG"===F?E:E.index(F)).openCursor(O).onsuccess=function(s){(s=s.target.result)?(j.push(s.value),s.continue()):T(j)}},PersistentQuadBackend.prototype.search=function(M,T){var F=this.db.transaction([this.dbName]).objectStore(this.dbName),E=this._genMinIndexKey(M,"SPOG");(F=F.get(E)).onerror=function(I){T(null,Error(I.target.statusCode))},F.onsuccess=function(I){T(null!=I.target.result)}},PersistentQuadBackend.prototype.delete=function(M,T){var E=this._genMinIndexKey(M,"SPOG");(E=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).delete(E)).onsuccess=function(){T(!0)},E.onerror=function(F){T(null,Error(F.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(M,T){return ye.map(this.componentOrders[T],function(E){return"string"==typeof M[E]||null==M[E]?"0":M[E]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(M,T){for(var E=this.componentOrders[T],F=[],I=0;I<E.length;I++){var O=M[E[I]];F[I]="string"==typeof O?"z":O}return ye.map(F,function(j){return""+j}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(M){M=M.indexKey.sort().join(".");var T=this.componentOrdersMap[M];if(null==T)throw Error("Error, cannot find index for indexKey "+M);return T},PersistentQuadBackend.prototype.clear=function(M){var T;(T=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).clear()).onsuccess=function(){M()},T.onerror=function(){M()}},Ee.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":57}],49:[function(Ce,Ee,Be){var ye=Ce("./quad_index").QuadIndex,M=Ce("./utils");QuadBackend=function(T,E){this.indexMap={},this.treeOrder=T.treeOrder,this.indices=T.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var F=this;M.eachSeries(this.indices,function(I,O){new ye({order:F.treeOrder,componentOrder:F.componentOrders[I]},function(j){F.indexMap[I]=j,O()})},function(){E(F)})},QuadBackend.allIndices="SPOG GP OGS POG GSP OS".split(" "),QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(T){T=T.indexKey;for(var E=0;E<QuadBackend.allIndices.length;E++)for(var F=QuadBackend.allIndices[E],I=QuadBackend.componentOrders[F],O=0;O<I.length&&!1!==M.include(T,I[O]);O++)if(O==T.length-1)return F;return"SPOG"},QuadBackend.prototype.index=function(T,E){var F=this;M.eachSeries(this.indices,function(I,O){F.indexMap[I].insert(T,function(){O()})},function(){E(!0)})},QuadBackend.prototype.range=function(T,E){var F=this._indexForPattern(T);null!=(F=this.indexMap[F])&&F.range(T,function(I){E(I)})},QuadBackend.prototype.search=function(T,E){var F=this.indexMap.SPOG;null!=F&&F.search(T,function(I){E(null!=I)})},QuadBackend.prototype.delete=function(T,E){var F=this;M.eachSeries(this.indices,function(I,O){F.indexMap[I].delete(T,function(){O()})},function(){E(!0)})},QuadBackend.prototype.clear=function(T){var E=this;M.eachSeries(this.indices,function(F,I){new ye({order:E.treeOrder,componentOrder:E.componentOrders[F]},function(O){E.indexMap[F]=O,I()})},function(){T(!0)})},Ee.exports.QuadBackend=QuadBackend},{"./quad_index":50,"./utils":57}],50:[function(Ce,Ee,Be){var ye=Ce("./btree").Tree,M=Ce("./utils"),T=Ce("./utils");NodeKey=function(E,F){this.subject=E.subject,this.predicate=E.predicate,this.object=E.object,this.graph=E.graph,this.order=F},NodeKey.prototype.comparator=function(E){for(var F=0;F<this.order.length;F++){var I=this.order[F];if(null==E[I])break;if(this[I]<E[I])return-1;if(this[I]>E[I])return 1}return 0},Pattern=function(E){this.subject=E.subject,this.predicate=E.predicate,this.object=E.object,this.graph=E.graph,this.indexKey=[],this.keyComponents={};var F=[],I=[],O=this;M.forEach(["subject","predicate","object","graph"],function(j){"string"==typeof O[j]?(I.push(j),O.keyComponents[j]=null):(F.push(j),O.keyComponents[j]=O[j],O.indexKey.push(j))}),this.order=F.concat(I),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(E,F){0!=arguments&&(this.componentOrder=E.componentOrder,ye.call(this,E.order,function(I){I.comparator=function(O,j){for(var s=0;s<I.componentOrder.length;s++){var q,D=O[q=I.componentOrder[s]];if(D<(q=j[q]))return-1;if(D>q)return 1}return 0},I.rangeComparator=function(O,j){for(var s=0;s<I.componentOrder.length;s++){var D=I.componentOrder[s];if(null==j[D]||null==O[D])break;if(O[D]<j[D])return-1;if(O[D]>j[D])return 1}return 0},F(I)}))},QuadIndex.prototype=M.create(ye.prototype,{constructor:ye}),QuadIndex.prototype.insert=function(E,F){ye.prototype.insert.call(this,E,null,function(I){F(I)})},QuadIndex.prototype.search=function(E,F){ye.prototype.search.call(this,E,function(I){F(I)},!0)},QuadIndex.prototype.range=function(E,F){this._rangeTraverse(this,this.root,E,F)},QuadIndex.prototype._rangeTraverse=function(E,F,I,O){var j=I.key,s=[],D=[F];T.whilst(function(){return 0<D.length},function(q){for(var Z=D.shift(),H=0;H<Z.numberActives&&-1===E.rangeComparator(Z.keys[H].key,j);)H++;if(!0===Z.isLeaf){for(var ce=H;ce<Z.numberActives&&0===E.rangeComparator(Z.keys[ce].key,j);)s.push(Z.keys[ce].key),ce++;q()}else E._diskRead(Z.children[H],function(le){D.push(le);var ee=H;T.whilst(function(){return ee<Z.numberActives&&0===E.rangeComparator(Z.keys[ee].key,j)},function(se){s.push(Z.keys[ee].key),ee++,E._diskRead(Z.children[ee],function(de){D.push(de),se()})},function(){q()})})},function(){O(s)})},Ee.exports={QuadIndex,Pattern,NodeKey}},{"./btree":40,"./utils":57}],51:[function(Ce,Ee,Be){function ye(H,ce,le){this.name="BindExpressionError",this.bind=ce,this.error=le,this.message=H}var M=Ce("./abstract_query_tree").AbstractQueryTree,T=Ce("./abstract_query_tree").NonSupportedSparqlFeatureError,E=Ce("./utils"),F=Ce("./quad_index"),I=Ce("./query_plan").QueryPlan,O=Ce("./query_filters").QueryFilters,j=Ce("./rdf_model"),s=Ce("./rdf_loader").RDFLoader,D=Ce("./graph_callbacks").CallbacksBackend,q=Ce("./utils"),Z=Ce("./utils");ye.prototype=Error(),ye.constructor=ye,QueryEngine=function(H){0!=arguments.length&&(this.backend=H.backend,this.lexicon=H.lexicon,this.eventsOnBatchLoad=H.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new M,this.rdfLoader=new s(H.communication),this.callbacksBackend=new D(this),this.customFns=H.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(H){this.customFns=H},QueryEngine.prototype.registerNsInEnvironment=function(H,ce){var le=[];null!=H&&null!=H.prefixes&&(le=H.prefixes);var se,ee={};for(se in this.defaultPrefixes)ee[se]=this.defaultPrefixes[se];for(se=0;se<le.length;se++){var de=le[se];"prefix"===de.token&&(ee[de.prefix]=de.local)}ce.namespaces=ee,ce.base=null!=H&&H.base&&"object"==typeof H.base?H.base.value:null},QueryEngine.prototype.applyModifier=function(H,ce){if("DISTINCT"==H){for(var le={},ee=[],se=0;se<ce.length;se++){var V,de=ce[se],he="";for(V in de){var W=de[V];null==W?he=he+V+"null":"literal"==W.token?(null!=W.value&&(he+=W.value),null!=W.lang&&(he+=W.lang),null!=W.type&&(he+=W.type)):he=W.value?he+V+W.value:he+V+W}null==le[he]&&(ee.push(de),le[he]=!0)}return ee}return ce},QueryEngine.prototype.applyLimitOffset=function(H,ce,le){return null==ce&&null==H?le:(null==H&&(H=0),ce=null==ce?le.length:H+ce,le.slice(H,ce))},QueryEngine.prototype.applySingleOrderBy=function(H,ce,le,ee,se){var de=[],he=this;q.eachSeries(H,function(V,W){O.collect(V.expression,[ce],le,ee,he,function(Y){de.push(Y[0].value),W()})},function(){se({binding:ce,value:de})})},QueryEngine.prototype.applyOrderBy=function(H,ce,le,ee,se){var de=this,he=[];null!=H&&0<H.length?q.eachSeries(ce,function(V,W){de.applySingleOrderBy(H,V,le,ee,function(Y){he.push(Y),W()})},function(){he.sort(function(Y,ge){return de.compareFilteredBindings(Y,ge,H,ee)});for(var V=[],W=0;W<he.length;W++)V.push(he[W].binding);se(V)}):se(ce)},QueryEngine.prototype.compareFilteredBindings=function(H,ce,le,ee){for(var se=0;;){if(se==H.value.length)return 0;var de=le[se].direction;if(null!=H.value[se]||null!=ce.value[se]){if(null==H.value[se])H={value:!1};else if(null==ce.value[se])H={value:!0};else{if("blank"===H.value[se].token&&"blank"===ce.value[se].token){se++;continue}if("blank"===H.value[se].token)H={value:!1};else if("blank"===ce.value[se].token)H={value:!0};else if("uri"===H.value[se].token&&"uri"===ce.value[se].token){if(1==O.runEqualityFunction(H.value[se],ce.value[se],[],this,ee).value){se++;continue}H=O.runTotalGtFunction(H.value[se],ce.value[se],[])}else if("uri"===H.value[se].token)H={value:!1};else if("uri"===ce.value[se].token)H={value:!0};else if("literal"===H.value[se].token&&"literal"===ce.value[se].token&&null==H.value[se].type&&null==ce.value[se].type){if(1==O.runEqualityFunction(H.value[se],ce.value[se],[],this,ee).value){se++;continue}H=O.runTotalGtFunction(H.value[se],ce.value[se],[])}else if("literal"===H.value[se].token&&null==H.value[se].type)H={value:!1};else if("literal"===ce.value[se].token&&null==ce.value[se].type)H={value:!0};else{if(1==O.runEqualityFunction(H.value[se],ce.value[se],[],this,ee).value){se++;continue}H=O.runTotalGtFunction(H.value[se],ce.value[se],[])}}return 1==H.value?"ASC"===de?1:-1:"ASC"===de?-1:1}se++}},QueryEngine.prototype.removeDefaultGraphBindings=function(H,ce){for(var le=[],ee={},se=0;se<ce.named.length;se++)ee[ce.named[se].oid]=!0;for(se=0;se<ce.implicit.length;se++)null==ee[ce.implicit[se].oid]&&le.push(ce.implicit[se].oid);for(le=[],se=0;se<H.length;se++){var V,de=H[se],he=!1;for(V in de){for(var W=0;W<ee.length;W++)if(de[V]===ee[W]){he=!0;break}if(he)break}he||le.push(de)}return le},QueryEngine.prototype.aggregateBindings=function(H,ce,le,ee,se){this.copyDenormalizedBindings(ce,ee.outCache,function(de){for(var he={},V=0;V<H.length;V++){var W=O.runAggregator(H[V],de,this,le,ee);H[V].alias?he[H[V].alias.value]=W:he[H[V].value.value]=W}se(he)})},QueryEngine.prototype.projectBindings=function(H,ce,le){if("*"===H[0].kind)return ce;for(var ee=[],se=0;se<ce.length;se++){for(var de=ce[se],he={},V=!0,W=0;W<H.length;W++)if("variable"==H[W].token&&"aliased"!=H[W].kind)he[H[W].value.value]=de[H[W].value.value];else if("variable"==H[W].token&&"aliased"==H[W].kind){var Y=O.runFilter(H[W].expression,de,this,le,{blanks:{},outCache:{}});if(O.isEbvError(Y)){V=!1;break}he[H[W].alias.value]=Y}!0===V&&ee.push(he)}return ee},QueryEngine.prototype.resolveNsInEnvironment=function(H,ce){return ce.namespaces[H]},QueryEngine.prototype.normalizeTerm=function(H,ce,le,ee){if("uri"===H.token)null==(H=E.lexicalFormBaseUri(H,ce))?ee(null):le?this.lexicon.registerUri(H,ee):this.lexicon.resolveUri(H,ee);else if("literal"===H.token)H=E.lexicalFormLiteral(H,ce),le?this.lexicon.registerLiteral(H,ee):this.lexicon.resolveLiteral(H,ee);else if("blank"===H.token){var se=H.value;null!=(H=ce.blanks[se])?ee(H):le?this.lexicon.registerBlank(function(de){ce.blanks[se]=de,ee(de)}):this.lexicon.resolveBlank(function(de){ce.blanks[se]=de,ee(de)})}else"var"===H.token?ee(H.value):ee(null)},QueryEngine.prototype.normalizeDatasets=function(H,ce,le){var ee=this;q.eachSeries(H,function(se,de){se.value===ee.lexicon.defaultGraphUri?(se.oid=ee.lexicon.defaultGraphOid,de()):ee.normalizeTerm(se,ce,!1,function(he){null!=he&&(se.oid=he),de()})},function(){le(!0)})},QueryEngine.prototype.normalizeQuad=function(H,ce,le,ee){var se=null,de=null,he=null,V=null,W=this,Y=!1;q.seq(function(ge){if(null==H.graph||H.graph.value===W.lexicon.defaultGraphUri)V=0,ge();else{var ke=E.lexicalFormBaseUri(H.graph,ce);W.normalizeTerm(H.graph,ce,le,function(_e){null!=_e?(V=_e,!0===le&&"var"!=H.graph.token?W.lexicon.registerGraph(_e,ke,function(){ge()}):ge()):(Y=!0,ge())})}},function(ge){!1===Y?W.normalizeTerm(H.subject,ce,le,function(ke){null!=ke?se=ke:Y=!0,ge()}):ge()},function(ge){!1===Y?W.normalizeTerm(H.predicate,ce,le,function(ke){null!=ke?de=ke:Y=!0,ge()}):ge()},function(ge){!1===Y?W.normalizeTerm(H.object,ce,le,function(ke){null!=ke?he=ke:Y=!0,ge()}):ge()})(function(){ee(!0===Y?null:{subject:se,predicate:de,object:he,graph:V})})},QueryEngine.prototype.denormalizeBindingsList=function(H,ce,le){var ee=this,se=[];q.eachSeries(H,function(de,he){ee.denormalizeBindings(de,ce,function(V){se.push(V),he()})},function(){le(se)})},QueryEngine.prototype.copyDenormalizedBindings=function(H,ce,le){var ee=this,se=[];q.eachSeries(H,function(de,he){var V={},W=Z.keys(de);q.eachSeries(W,function(Y,ge){var ke=de[Y];if(null==ke)V[Y]=null,ge();else if("object"==typeof ke)V[Y]=ke,ge();else{var _e=ce[ke];null!=_e?(V[Y]=_e,ge()):ee.lexicon.retrieve(ke,function(Se){ce[ke]=Se,V[Y]=Se,ge()})}},function(){se.push(V),he()})},function(){le(se)})},QueryEngine.prototype.denormalizeBindings=function(H,ce,le){var ee=Z.keys(H),se=ce.outCache,de=this;q.eachSeries(ee,function(he,V){var W=H[he];null==W?(H[he]=null,V()):"object"==typeof W?V():null!=se[W]?(H[he]=se[W],V()):de.lexicon.retrieve(W,function(Y){H[he]=Y,"blank"===Y.token&&(ce.blanks[Y.value]=W),V()})},function(){le(H)})},QueryEngine.prototype.execute=function(H,ce,le,ee){if(H=E.normalizeUnicodeLiterals(H),null==(H=this.abstractQueryTree.parseQueryString(H)))ce(!1,"Error parsing query string");else if("query"===H.token&&"update"==H.kind){this.callbacksBackend.startGraphModification();var se=this;this.executeUpdate(H,function(de,he){se.lexicon.updateAfterWrite&&se.lexicon.updateAfterWrite(),de?(se.callbacksBackend.cancelGraphModification(),ce(de,he)):se.callbacksBackend.endGraphModification(function(){ce(de,he)})})}else"query"===H.token&&"query"==H.kind&&this.executeQuery(H,ce,le,ee)},QueryEngine.prototype.executeQuery=function(H,ce,le,ee){var se=H.units,de=this,he={blanks:{},outCache:{}};this.registerNsInEnvironment(H.prologue,he);var V=de.abstractQueryTree.parseExecutableUnit(se[0]);"select"===V.kind?this.executeSelect(V,he,le,ee,function(W,Y){null==W?"object"==typeof Y&&!0===Y.denorm?ce(null,Y.bindings):de.denormalizeBindingsList(Y,he,function(ge){ce(null,ge)}):ce(W)}):"ask"===V.kind?(V.projection=[{token:"variable",kind:"*"}],this.executeSelect(V,he,le,ee,function(W,Y){null==W?0<Y.length?ce(null,!0):ce(null,!1):ce(W)})):"construct"===V.kind&&(V.projection=[{token:"variable",kind:"*"}],de=this,this.executeSelect(V,he,le,ee,function(W,Y){null==W?de.denormalizeBindingsList(Y,he,function(ge){if(null!=ge){var ke=new j.Graph;null==V.template&&(V.template={triplesContext:V.pattern});for(var _e=1,Se=[],We=0;We<ge.length;We++){for(var $e=ge[We],Fe=0;Fe<Se.length;Fe++)delete Se[Fe].valuetmp;for(Fe=0;Fe<V.template.triplesContext.length;Fe++){for(var oe=["subject","predicate","object"],me=V.template.triplesContext[Fe],Ae=0;Ae<oe.length;Ae++){var qe=oe[Ae];if("blank"===me[qe].token&&(!me[qe].valuetmp||null==me[qe].valuetmp)){var et="_:b"+_e;_e++,me[qe].valuetmp=et,Se.push(me[qe])}}oe=j.buildRDFResource(me.subject,$e,de,he),Ae=j.buildRDFResource(me.predicate,$e,de,he),me=j.buildRDFResource(me.object,$e,de,he),null!=oe&&null!=Ae&&null!=me&&(Ae=new j.Triple(oe,Ae,me),ke.add(Ae))}}ce(null,ke)}else ce(Error("Error denormalizing bindings."))}):ce(W)}))},QueryEngine.prototype.executeSelect=function(H,ce,le,ee,se){if("select"===H.kind||"ask"===H.kind||"construct"===H.kind||"modify"===H.kind){var de=H.projection,he=H.dataset,V=H.modifier,W=H.limit,Y=H.offset,ge=H.order,ke=this;(null!=le||null!=ee)&&(he.implicit=le||[],he.named=ee||[]),null!=he.implicit&&0===he.implicit.length&&null!=he.named&&0===he.named.length&&he.implicit.push(this.lexicon.defaultGraphUriTerm),ke.normalizeDatasets(he.implicit.concat(he.named),ce,function(){try{ke.executeSelectUnit(de,he,H.pattern,ce,function(_e){if(null!=_e){if(null!=H.group&&""===H.group){for(var Se=!1,We=0;We<H.projection.length;We++)if(null!=H.projection[We].expression&&"aggregate"===H.projection[We].expression.expressionType){Se=!0;break}!0===Se&&(H.group="singleGroup")}H.group&&""!=H.group?ke.checkGroupSemantics(H.group,de)?ke.groupSolution(_e,H.group,he,ce,function($e){var Fe=[];q.eachSeries($e,function(oe,me){ke.aggregateBindings(de,oe,he,ce,function(Ae){Fe.push(Ae),me()})},function(){se(null,{bindings:Fe,denorm:!0})})}):se(Error("Incompatible Group and Projection variables")):ke.applyOrderBy(ge,_e,he,ce,function($e){$e=ke.projectBindings(de,$e,he),$e=ke.applyModifier(V,$e),$e=ke.applyLimitOffset(Y,W,$e),$e=ke.removeDefaultGraphBindings($e,he),se(null,$e)})}else se(Error("Error executing SELECT query."))})}catch(_e){se(_e)}})}else se(Error("Cannot execute "+H.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(H,ce,le,ee,se){var de=[],he=[],V=!1,W=this;"singleGroup"===ce?se([H]):q.eachSeries(H,function(Y,ge){var ke=!0;q.eachSeries(ce,function(_e,Se){var We=null;if("var"===_e.token)We=_e.value,0==V&&de.push(We),Se();else if("aliased_expression"===_e.token){if(We=_e.alias.value,0==V&&de.push(We),"var"===_e.expression.primaryexpression)Y[_e.alias.value]=Y[_e.expression.value.value];else{var $e=W.copyDenormalizedBindings([Y],ee.outCache);$e=O.runFilter(_e.expression,$e[0],W,le,ee);O.isEbvError($e)?ke=!1:(null!=$e.value&&($e.value=""+$e.value),Y[_e.alias.value]=$e)}Se()}else W.copyDenormalizedBindings([Y],ee.outCache,function(Fe){Fe=O.runFilter(_e,Fe[0],W,ee),O.isEbvError(Fe)?ke=!1:(Y["groupCondition"+env._i]=Fe,We="groupCondition"+env._i,0==V&&de.push(We)),Se()})},function(){0==V&&(V=!0),!0===ke&&he.push(Y),ge()})},function(){for(var Y={},We=0;We<he.length;We++){for(var ge=he[We],Se="",ke=0;ke<de.length;ke++){var _e=ge[de[ke]];Se="object"==typeof _e?Se+_e.value:Se+_e}null==Y[Se]?Y[Se]=[ge]:Y[Se].push(ge)}var $e;We=[];for($e in Y)We.push(Y[$e]);se(We)})},QueryEngine.prototype.executeSelectUnit=function(H,ce,le,ee,se){if("BGP"===le.kind)this.executeAndBGP(H,ce,le,ee,se);else if("UNION"===le.kind)this.executeUNION(H,ce,le.value,ee,se);else if("JOIN"===le.kind)this.executeJOIN(H,ce,le,ee,se);else if("LEFT_JOIN"===le.kind)this.executeLEFT_JOIN(H,ce,le,ee,se);else if("FILTER"===le.kind){var de=this;this.executeSelectUnit(H,ce,le.value,ee,function(he){null!=he?O.checkFilters(le,he,!1,ce,ee,de,se):se([])})}else{if("EMPTY_PATTERN"!==le.kind)throw new T(le.kind);se([])}},QueryEngine.prototype.executeUNION=function(H,ce,le,ee,se){var W,Y,de=le[0],he=le[1],V=null;if(2!=le.length)throw"SPARQL algebra UNION with more than two components";var ge=this;q.seq(function(ke){try{ge.executeSelectUnit(H,ce,de,ee,function(_e){W=_e,ke()})}catch(_e){V=_e,ke()}},function(ke){if(null==V)try{ge.executeSelectUnit(H,ce,he,ee,function(_e){Y=_e,ke()})}catch(_e){V=_e,ke()}else ke()})(function(){if(null!=V)se(V);else{var ke=I.unionBindings(W,Y);ge.runBinds(le.binds,ke,ce,ee,function(_e,Se){if(null!=_e)throw new ye("Error processing bind expressions",le.binds,_e);O.checkFilters(le,Se,!1,ce,ee,ge,se)})}})},QueryEngine.prototype.executeAndBGP=function(H,ce,le,ee,se){var de=this;I.executeAndBGPsDPSize(le.value,ce,this,ee,function(he){null!=he?de.runBinds(le.binds,he,ce,ee,function(V,W){if(null!=V)throw new ye("Error processing bind expressions",le.binds,V);O.checkFilters(le,W,!1,ce,ee,de,se)}):se(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(H,ce,le,ee,se){var de=le.lvalue,he=le.rvalue;if("EMPTY_PATTERN"===de.kind)this.executeSelectUnit(H,ce,he,ee,se);else{var ke,_e,V=null,W=null,Y=null,ge=this;q.seq(function(Se){try{ge.executeSelectUnit(H,ce,de,ee,function(We){V=We,Se()})}catch(We){Y=We,Se()}},function(Se){if(null!=Y)Se();else try{ge.executeSelectUnit(H,ce,he,ee,function(We){W=We,Se()})}catch(We){Y=We,Se()}})(function(){if(null!=Y)se(Y);else{var Se=I.leftOuterJoinBindings(V,W);ge.runBinds(le.binds,Se,ce,ee,function(We,$e){if(null!=We)throw new ye("Error processing bind expressions",le.binds,We);O.checkFilters(le,Se,!0,ce,ee,ge,function(Fe){if(1<V.length&&1<W.length){var Ae,oe=[],me={};for(Ae in V[0])me[Ae]=!0;for(Ae in W[0])1!=me[Ae]&&oe.push(Ae);for(ke=[],_e={},me=0;me<Fe.length;me++)if(!0===Fe[me].__nullify__){for(var qe=0;qe<oe.length;qe++)Fe[me].bindings[oe[qe]]=null;qe=[];var et=[];for(Ae in Fe[me].bindings)null!=Fe[me].bindings[Ae]&&(qe.push(Ae+Fe[me].bindings[Ae]),qe.sort(),et.push(qe.join("")));if(null==_e[qe.join("")]){for(qe=0;qe<et.length;qe++)_e[et[qe]]=!0;ke.push(Fe[me].bindings)}}else for(Ae in ke.push(Fe[me]),qe=[],Fe[me])qe.push(Ae+Fe[me][Ae]),qe.sort(),_e[qe.join("")]=!0;se(ke)}else se(Fe)})})}})}},QueryEngine.prototype.executeJOIN=function(H,ce,le,ee,se){var de=le.lvalue,he=le.rvalue,V=null,W=null,Y=null,ge=this;q.seq(function(ke){try{ge.executeSelectUnit(H,ce,de,ee,function(_e){V=_e,ke()})}catch(_e){Y=_e,ke()}},function(ke){if(null!=Y)ke();else try{ge.executeSelectUnit(H,ce,he,ee,function(_e){W=_e,ke()})}catch(_e){Y=_e,ke()}})(function(){var ke=null;if(null!=Y)se(Y);else if(0===V.length||0===W.length)se([]);else{ke={};var Se,_e=[];for(Se in V[0])ke[Se]=!1;for(Se in W[0])!1===ke[Se]&&_e.push(Se);ke=0==_e.length||ge.abstractQueryTree.treeWithUnion(de)||ge.abstractQueryTree.treeWithUnion(he)?I.joinBindings(V,W):I.joinBindings2(_e,V,W),ge.runBinds(le.binds,ke,ce,ee,function($e,Fe){if(null!=$e)throw new ye("Error processing bind expressions",le.binds,$e);O.checkFilters(le,Fe,!1,ce,ee,ge,se)})}})},QueryEngine.prototype.rangeQuery=function(H,ce,le){var ee=this;ee.normalizeQuad(H,ce,!1,function(se){null!=se?ee.backend.range(new F.Pattern(se),function(de){null==de||0==de.length?le([]):le(de)}):le(null)})},QueryEngine.prototype.executeUpdate=function(H,ce){var le=H.units,ee=this,se={blanks:{},outCache:{}};this.registerNsInEnvironment(H.prologue,se);for(var de=0;de<le.length;de++){var he=ee.abstractQueryTree.parseExecutableUnit(le[de]);if("insertdata"===he.kind){var V=null;q.eachSeries(he.quads,function(Y,ge){null===V?ee._executeQuadInsert(Y,se,function(ke){null!=ke&&(V=ke),ge()}):ge()},function(){null===V?ce(null,!0):ce(V)})}else if("deletedata"===he.kind)V=null,q.eachSeries(he.quads,function(Y,ge){null===V?ee._executeQuadDelete(Y,se,function(ke){null!=ke&&(V=ke),ge()}):ge()},function(){null===V?ce(null,!0):ce(V)});else if("modify"===he.kind)this._executeModifyQuery(he,se,ce);else if("create"===he.kind)ce(!0);else if("load"===he.kind){var W={uri:E.lexicalFormBaseUri(he.sourceGraph,se)};null!=he.destinyGraph&&(W={uri:E.lexicalFormBaseUri(he.destinyGraph,se)}),ee=this,this.rdfLoader.load(he.sourceGraph.value,W,function(Y,ge){Y?ce(Error("error batch loading quads")):ee.batchLoad(ge,function(ke){null!==ke?ce(null,ke):ce(Error("Error batch loading quads"))})})}else if("drop"===he.kind)this._executeClearGraph(he.destinyGraph,se,ce);else{if("clear"!==he.kind)throw Error("not supported execution unit");this._executeClearGraph(he.destinyGraph,se,ce)}}},QueryEngine.prototype.batchLoad=function(H,ce){var le=0,ee={},se=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();q.eachSeries(H,function(he,V){var W={};q.eachSeries(["subject","predicate","object","graph"],function(Y,ge){!function(he,V,W,Y){var ge;if(he[V].uri||"uri"===he[V].token){var ke=he[V].uri||he[V].value;se.lexicon.registerUri(ke,function(_e){var Se=function(){null!=he[V].uri&&(he[V]={token:"uri",value:he[V].uri},delete he[V].uri),W[V]=_e,Y()};"graph"===V?se.lexicon.registerGraph(_e,ke,function(){Se()}):Se()})}else he[V].literal||"literal"===he[V].token?se.lexicon.registerLiteral(he[V].literal||he[V].value,function(_e){null!=he[V].literal&&(he[V]=se.lexicon.parseLiteral(he[V].literal),delete he[V].literal),W[V]=_e,Y()}):null==(ge=ee[he[V].blank||he[V].value])?se.lexicon.registerBlank(function(_e){ee[he[V].blank||he[V].value]=_e,null==he[V].token&&(he[V].token="blank",he[V].value=he[V].blank,delete he[V].blank),W[V]=_e,Y()}):(null==he[V].token&&(he[V].token="blank",he[V].value=he[V].blank,delete he[V].blank),W[V]=ge,Y())}(he,Y,W,ge)},function(){var Y=he;he=W;var ge=new F.NodeKey(he);se.backend.search(ge,function(ke){ke?V():se.backend.index(ge,function(_e){_e&&(se.eventsOnBatchLoad&&se.callbacksBackend.nextGraphModification(D.added,[Y,he]),le+=1),V()})})})},function(){null!=se.lexicon.updateAfterWrite&&se.lexicon.updateAfterWrite();var he=function(){ce(le)};se.eventsOnBatchLoad?se.callbacksBackend.endGraphModification(he()):he()})},QueryEngine.prototype._executeModifyQuery=function(H,ce,le){var ee=this,se=!0,de=Error("Error executing modify query"),he=null,V=["subject","predicate","object","graph"];H.insert=null==H.insert?[]:H.insert,H.delete=null==H.delete?[]:H.delete,q.seq(function(W){var Y=[],ge=[];if(null!=H.with&&Y.push(H.with),null!=H.using){ge=[];for(var ke=0;ke<H.using.length;ke++){var _e=H.using[ke];"named"===_e.kind?ge.push(_e.uri):Y.push(_e.uri)}}H.dataset={},H.projection=[{token:"variable",kind:"*"}],ee.executeSelect(H,ce,Y,ge,function(Se,We){if(Se)return de=Se,se=!1,W();ee.denormalizeBindingsList(We,ce,function($e){null!=$e?he=$e:(de=Error("Error denormalizing bindings list"),se=!1),W()})})},function(W){var Y=H.with;if(se){for(var ge=[],ke=0;ke<H.delete.length;ke++)for(var _e=H.delete[ke],Se=0;Se<he.length;Se++){for(var We={},$e=he[Se],Fe=0;Fe<V.length;Fe++){var oe=V[Fe];"graph"==oe&&null==_e[oe]?We.graph=Y:We[oe]="var"===_e[oe].token?$e[_e[oe].value]:_e[oe]}ge.push(We)}q.eachSeries(ge,function(me,Ae){ee._executeQuadDelete(me,ce,function(){Ae()})},function(){W()})}else W()},function(W){var Y=H.with;if(se){for(var ge=[],ke=0;ke<H.insert.length;ke++)for(var _e=H.insert[ke],Se=0;Se<he.length;Se++){for(var We={},$e=he[Se],Fe=0;Fe<V.length;Fe++){var oe=V[Fe];"graph"==oe&&null==_e[oe]?We.graph=Y:We[oe]="var"===_e[oe].token?$e[_e[oe].value]:_e[oe]}ge.push(We)}q.eachSeries(ge,function(me,Ae){ee._executeQuadInsert(me,ce,function(){Ae()})},function(){W()})}else W()})(function(){le(se?null:de)})},QueryEngine.prototype._executeQuadInsert=function(H,ce,le){var se,ee=this,de=!1,he=null;q.seq(function(V){ee.normalizeQuad(H,ce,!0,function(W){null!=W?se=W:(de=!0,he="Error normalizing quad."),V()})},function(V){if(!1===de){var W=new F.NodeKey(se);ee.backend.search(W,function(Y){!0===Y?V():ee.backend.index(W,function(){ee.callbacksBackend.nextGraphModification(D.added,[H,se]),V()})})}else V()})(function(){de?le(Error(he)):le(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(H,ce,le){var se,he,V,ee=this,de=!1;q.seq(function(W){ee.normalizeQuad(H,ce,!0,function(Y){null!=Y?se=Y:(de=!0,he="Error normalizing quad."),W()})},function(W){!1===de?(V=new F.NodeKey(se),ee.backend.delete(V,function(){W()})):W()},function(W){!1===de?ee.lexicon.unregister(H,V,function(){ee.callbacksBackend.nextGraphModification(D.deleted,[H,se]),W()}):W()})(function(){de?le(Error(he)):le(null,!0)})},QueryEngine.prototype._executeClearGraph=function(H,ce,le){var ee=this;"default"===H?this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",le):"named"===H?ee.lexicon.registeredGraphs(!0,function(se){if(null!=se){var de=!1;q.eachSeries(se,function(he,V){de?V():ee.execute("DELETE { GRAPH <"+he+"> { ?s ?p ?o } } WHERE { GRAPH <"+he+"> { ?s ?p ?o } }",function(W,Y){W?(de=W,V()):ee.lexicon.resolveUri(he,function(ge){-1!=ge?ee.lexicon.knownGraphs.delete(ge,function(){V()}):(de="Cannot find graph "+he+" to clear it",V())})})},function(){le(!de)})}else le(!1,"Error deleting named graphs")}):"all"===H?(ee=this,this.execute("CLEAR DEFAULT",function(se,de){se?le(!1,de):ee.execute("CLEAR NAMED",le)})):"uri"==H.token?null!=(H=E.lexicalFormBaseUri(H,ce))?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+H+"> { ?s ?p ?o } } WHERE { GRAPH <"+H+"> { ?s ?p ?o } }",function(se){ee.callbacksBackend.ongoingModification=!1,le(se)})):le(!1,"wrong graph URI"):le(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(H,ce){if("singleGroup"===H)return!0;for(var le={},ee=0;ee<H.length;ee++){var se=H[ee];"var"===se.token?le[se.value]=!0:"aliased_expression"===se.token&&(le[se.alias.value]=!0)}for(ee=0;ee<ce.length;ee++)if("var"===(se=ce[ee]).kind){if(null==le[se.value.value])return!1}else if("aliased"===se.kind&&se.expression&&"var"===se.expression.primaryexpression&&null==le[se.expression.value.value])return!1;return!0},QueryEngine.prototype.runBinds=function(H,ce,le,ee,se){var de=this;null!=H&&0<H.length?de.copyDenormalizedBindings(ce,ee.outCache,function(he){for(var V=0;V<ce.length;V++)for(var W=0;W<H.length;W++){var Y=H[W],ge=O.runFilter(Y.expression,he[V],de,le,ee);O.isEbvError(ge)?se(ge):ce[V][Y.as.value]=ge}se(null,ce)}):se(null,ce)},QueryEngine.prototype.computeCosts=function(H,ce,le){for(var ee=0;ee<H.length;ee++)H[ee]._cost=this.quadCost(H[ee],ce);le(H)},QueryEngine.prototype.quadCost=function(H,ce){return 1},QueryEngine.prototype.registerDefaultNamespace=function(H,ce){this.defaultPrefixes[H]=ce},Ee.exports={QueryEngine}},{"./abstract_query_tree":39,"./graph_callbacks":42,"./quad_index":50,"./query_filters":52,"./query_plan":53,"./rdf_loader":54,"./rdf_model":55,"./utils":57}],52:[function(Ce,Ee,Be){var ye=Ce("./utils"),M=Ce("./utils");QueryFilters={checkFilters:function(T,E,F,I,O,j,s){var D=[];T.filter&&"function"!=typeof T.filter&&(D=T.filter);var q=[];if(null==D||0===D.length||null!=T.length)return s(E);QueryFilters.preprocessExistentialFilters(D,E,j,I,O,function(Z){M.eachSeries(Z,function(H,ce){QueryFilters.run(H.value,E,F,I,O,j,function(le){for(var ee=[],se=0;se<le.length;se++){var de=le[se];null!=de.__nullify__?q.push(de):ee.push(de)}E=ee,ce()})},function(){s(E.concat(q))})})},preprocessExistentialFilters:function(T,E,F,I,O,j){var s=[];M.eachSeries(T,function(D,q){if("builtincall"!==D.value.expressionType||"exists"!==D.value.builtincall&&"notexists"!==D.value.builtincall)if("conditionalor"===D.value.expressionType||"conditionaland"===D.value.expressionType){var Z=ye.map(D.value.operands,function(ee){return{value:ee}});QueryFilters.preprocessExistentialFilters(Z,E,F,I,O,function(ee){D.value.operands=ee.map(function(se){return se.value}),s.push(D),q()})}else"multiplicativeexpression"===D.value.expressionType?(Z=ye.map(D.value.factors,function(ee){return{value:ee}}),QueryFilters.preprocessExistentialFilters(Z,E,F,I,O,function(ee){D.value.factors=ee.map(function(se){return se.value}),s.push(D),q()})):"additiveexpression"===D.value.expressionType?(Z=ye.map(D.value.summands,function(ee){return{value:ee}}),QueryFilters.preprocessExistentialFilters(Z,E,F,I,O,function(ee){D.value.summands=ee.map(function(se){return se.value}),s.push(D),q()})):"relationalexpression"===D.value.expressionType?(Z=[{value:D.value.op1},{value:D.value.op2}],QueryFilters.preprocessExistentialFilters(Z,E,F,I,O,function(ee){D.value.op1=ee[0].value,D.value.op2=ee[1].value,s.push(D),q()})):"irireforfunction"!==D.value.expressionType&&"custom"!==D.value.expressionType||null==D.value.args?(s.push(D),q()):(Z=ye.map(D.value.args,function(ee){return{value:ee}}),QueryFilters.preprocessExistentialFilters(Z,E,F,I,O,function(ee){D.value.args=ee.map(function(se){return se.value}),s.push(D),q()}));else{var H=D.value.builtincall,ce=D.value.args,le={};F.copyDenormalizedBindings(E,O.outCache,function(ee){M.eachSeries(ee,function(se,de){var he=ye.clone(ce[0],!0);he=F.abstractQueryTree.parseSelect({pattern:he},se),he=F.abstractQueryTree.bind(he.pattern,se);F.executeSelectUnit([{kind:"*"}],I,he,O,function(V){var W="exists"===H?QueryFilters.ebvBoolean(0!==V.length):QueryFilters.ebvBoolean(0===V.length);for(var Y in V=[],se)V.push(JSON.stringify(se[Y]));V=V.sort().join(""),le[V]=W,de()})},function(){D.value.origArgs=D.value.args,D.value.args=le,s.push(D),q()})})}},function(){j(s)})},boundVars:function(T){if(null==T.expressionType)throw"Cannot find bound expressions in a no expression token";if("relationalexpression"==(E=T.expressionType))return E=T.op2,QueryFilters.boundVars(T.op1)+QueryFilters.boundVars(E);if("conditionalor"==E||"conditionaland"==E){for(var F=[],E=0;E<T.operands;E++)F=F.concat(QueryFilters.boundVars(T.operands[E]));return F}if("builtincall"==E){if(null==T.args)return[];for(F=[],E=0;E<T.args.length;E++)F=F.concat(QueryFilters.boundVars(T.args[E]));return F}if("multiplicativeexpression"==E){for(F=QueryFilters.boundVars(T.factor),E=0;E<T.factors.length;E++)F=F.concat(QueryFilters.boundVars(T.factors[E].expression));return F}if("additiveexpression"==E){for(F=QueryFilters.boundVars(T.summand),E=0;E<T.summands.length;E++)F=F.concat(QueryFilters.boundVars(T.summands[E].expression));return F}return"regex"==E?(F=QueryFilters.boundVars(T.expression1)).concat(QueryFilters.boundVars(T.expression2)):"unaryexpression"==E?QueryFilters.boundVars(T.expression):"atomic"==E?"var"==T.primaryexpression?[T.value]:[]:void 0},run:function(T,E,F,I,O,j,s){j.copyDenormalizedBindings(E,O.outCache,function(D){for(var q=[],Z=0;Z<E.length;Z++){var H=QueryFilters.runFilter(T,D[Z],j,I,O);H=QueryFilters.ebv(H);QueryFilters.isEbvError(H)?F&&(H={__nullify__:!0,bindings:E[Z]},q.push(H)):!0===H?q.push(E[Z]):F&&(H={__nullify__:!0,bindings:E[Z]},q.push(H))}s(q)})},collect:function(T,E,F,I,O,j){O.copyDenormalizedBindings(E,I.outCache,function(s){for(var D=[],q=0;q<s.length;q++){var Z=QueryFilters.runFilter(T,s[q],O,F,I);D.push({binding:E[q],value:Z})}return j(D)})},runDistinct:function(T,E){},runAggregator:function(T,E,F,I,O){if(null==E||0===E.length)return QueryFilters.ebvError();if("variable"===T.token&&"var"==T.kind)return E[0][T.value.value];if("variable"===T.token&&"aliased"===T.kind){if("atomic"===T.expression.expressionType&&"var"===T.expression.primaryexpression)return E[0][T.expression.value.value];if("aggregate"===T.expression.expressionType){if("max"===T.expression.aggregateType){for(var j=null,s=0;s<E.length;s++){var D=E[s];D=QueryFilters.runFilter(T.expression.expression,D,F,I,O);QueryFilters.isEbvError(D)||(null===j||!0===QueryFilters.runLtFunction(j,D).value)&&(j=D)}return null===j?QueryFilters.ebvError():j}if("min"===T.expression.aggregateType){for(j=null,s=0;s<E.length;s++)D=E[s],D=QueryFilters.runFilter(T.expression.expression,D,F,I,O),QueryFilters.isEbvError(D)||(null===j||!0===QueryFilters.runGtFunction(j,D).value)&&(j=D);return null===j?QueryFilters.ebvError():j}if("count"===T.expression.aggregateType){j={};var q=0;if("*"===T.expression.expression)if(null!=T.expression.distinct&&""!=T.expression.distinct)for(s=0;s<E.length;s++){D=E[s];var Z=ye.hashTerm(D);null==j[Z]&&(j[Z]=!0,q++)}else q=E.length;else for(s=0;s<E.length;s++)D=E[s],D=QueryFilters.runFilter(T.expression.expression,D,F,I,O),QueryFilters.isEbvError(D)||(null!=T.expression.distinct&&""!=T.expression.distinct?null==j[Z=ye.hashTerm(D)]&&(j[Z]=!0,q++):q++);return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+q}}if("avg"===T.expression.aggregateType){j={};var H={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"};for(s=q=0;s<E.length;s++)D=E[s],D=QueryFilters.runFilter(T.expression.expression,D,F,I,O),QueryFilters.isEbvError(D)||(null!=T.expression.distinct&&""!=T.expression.distinct?null==j[Z=ye.hashTerm(D)]&&(j[Z]=!0,QueryFilters.isNumeric(D)&&(H=QueryFilters.runSumFunction(H,D),q++)):QueryFilters.isNumeric(D)&&(H=QueryFilters.runSumFunction(H,D),q++));return(T=QueryFilters.runDivFunction(H,{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+q})).value=""+T.value,T}if("sum"===T.expression.aggregateType){for(j={},H={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"},s=0;s<E.length;s++)D=E[s],D=QueryFilters.runFilter(T.expression.expression,D,F,I,O),QueryFilters.isEbvError(D)||(null!=T.expression.distinct&&""!=T.expression.distinct?null==j[Z=ye.hashTerm(D)]&&(j[Z]=!0,QueryFilters.isNumeric(D)&&(H=QueryFilters.runSumFunction(H,D))):QueryFilters.isNumeric(D)&&(H=QueryFilters.runSumFunction(H,D)));return H.value=""+H.value,H}return QueryFilters.runFilter(aggregate.expression,E[0],I,{blanks:{},outCache:{}})}}},runFilter:function(T,E,F,I,O){if(null!=T.expressionType){if("relationalexpression"==(j=T.expressionType)){var j=QueryFilters.runFilter(T.op1,E,F,I,O),s=QueryFilters.runFilter(T.op2,E,F,I,O);return QueryFilters.runRelationalFilter(T,j,s,E,F,I,O)}if("conditionalor"==j)return QueryFilters.runOrFunction(T,E,F,I,O);if("conditionaland"==j)return QueryFilters.runAndFunction(T,E,F,I,O);if("additiveexpression"==j)return QueryFilters.runAddition(T.summand,T.summands,E,F,I,O);if("builtincall"==j)return QueryFilters.runBuiltInCall(T.builtincall,T.args,E,F,I,O);if("multiplicativeexpression"==j)return QueryFilters.runMultiplication(T.factor,T.factors,E,F,I,O);if("unaryexpression"==j)return QueryFilters.runUnaryExpression(T.unaryexpression,T.expression,E,F,I,O);if("irireforfunction"==j)return QueryFilters.runIriRefOrFunction(T.iriref,T.args,E,F,I,O);if("regex"==j)return QueryFilters.runRegex(T.text,T.pattern,T.flags,E,F,I,O);if("custom"==j)return QueryFilters.runBuiltInCall(T.name,T.args,E,F,I,O);if("atomic"==j)return"var"==T.primaryexpression?E[T.value.value]:("object"==typeof T.value&&null!=T.value.type&&"object"==typeof T.value.type&&(T.value.type=ye.lexicalFormBaseUri(T.value.type,O)),T.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},isRDFTerm:function(T){return null!=T&&!!(T.token&&"literal"==T.token||T.token&&"uri"==T.token||T.token&&"blank"==T.token)},RDFTermEquality:function(T,E,F,I){return"literal"===T.token&&"literal"===E.token?T.lang==E.lang&&T.type==E.type&&T.value==E.value||!!(null!=T.type&&null!=E.type||QueryFilters.isSimpleLiteral(T)&&null!=E.type||QueryFilters.isSimpleLiteral(E)&&null!=T.type)&&QueryFilters.ebvError():"uri"===T.token&&"uri"===E.token?ye.lexicalFormBaseUri(T,I)==ye.lexicalFormBaseUri(E,I):"blank"===T.token&&"blank"===E.token&&T.value==E.value},isInteger:function(T){return null!=T&&("literal"===T.token&&("http://www.w3.org/2001/XMLSchema#integer"==T.type||"http://www.w3.org/2001/XMLSchema#decimal"==T.type||"http://www.w3.org/2001/XMLSchema#double"==T.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==T.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==T.type||"http://www.w3.org/2001/XMLSchema#long"==T.type||"http://www.w3.org/2001/XMLSchema#int"==T.type||"http://www.w3.org/2001/XMLSchema#short"==T.type||"http://www.w3.org/2001/XMLSchema#byte"==T.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==T.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==T.type))},isFloat:function(T){return null!=T&&("literal"===T.token&&"http://www.w3.org/2001/XMLSchema#float"==T.type)},isDecimal:function(T){return null!=T&&("literal"===T.token&&"http://www.w3.org/2001/XMLSchema#decimal"==T.type)},isDouble:function(T){return null!=T&&("literal"===T.token&&"http://www.w3.org/2001/XMLSchema#double"==T.type)},isNumeric:function(T){return null!=T&&("literal"===T.token&&("http://www.w3.org/2001/XMLSchema#integer"==T.type||"http://www.w3.org/2001/XMLSchema#decimal"==T.type||"http://www.w3.org/2001/XMLSchema#float"==T.type||"http://www.w3.org/2001/XMLSchema#double"==T.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==T.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==T.type||"http://www.w3.org/2001/XMLSchema#long"==T.type||"http://www.w3.org/2001/XMLSchema#int"==T.type||"http://www.w3.org/2001/XMLSchema#short"==T.type||"http://www.w3.org/2001/XMLSchema#byte"==T.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==T.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==T.type))},isSimpleLiteral:function(T){return!(!T||"literal"!=T.token)&&(null==T.type&&null==T.lang)},isXsdType:function(T,E){return!(!E||"literal"!=E.token)&&E.type=="http://www.w3.org/2001/XMLSchema#"+T},ebv:function(T){if(null==T||QueryFilters.isEbvError(T))return QueryFilters.ebvError();if(T.token&&"literal"===T.token){if("http://www.w3.org/2001/XMLSchema#integer"==T.type||"http://www.w3.org/2001/XMLSchema#decimal"==T.type||"http://www.w3.org/2001/XMLSchema#double"==T.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==T.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==T.type||"http://www.w3.org/2001/XMLSchema#long"==T.type||"http://www.w3.org/2001/XMLSchema#int"==T.type||"http://www.w3.org/2001/XMLSchema#short"==T.type||"http://www.w3.org/2001/XMLSchema#byte"==T.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==T.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==T.type){var E=parseFloat(T.value);return!isNaN(E)&&0!=parseFloat(T.value)}return"http://www.w3.org/2001/XMLSchema#boolean"===T.type?"true"===T.value||!0===T.value||"True"===T.value:"http://www.w3.org/2001/XMLSchema#string"===T.type?""!=T.value:"http://www.w3.org/2001/XMLSchema#dateTime"===T.type?null!=new Date(T.value):QueryFilters.isEbvError(T)?T:null==T.type?""!=T.value:QueryFilters.ebvError()}return!0===T.value}},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(T){return"object"==typeof T&&null!=T&&"https://github.com/antoniogarrote/js-tools/types#error"===T.type},QueryFilters.ebvBoolean=function(T){return QueryFilters.isEbvError(T)?T:!0===T?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(T,E,F,I,O,j,s){if("="===(T=T.operator))return QueryFilters.runEqualityFunction(E,F,I,O,j,s);if("!="===T)return E=QueryFilters.runEqualityFunction(E,F,I,O,j,s),QueryFilters.isEbvError(E)||(E.value=!E.value),E;if("<"===T)return QueryFilters.runLtFunction(E,F,I);if(">"===T)return QueryFilters.runGtFunction(E,F,I);if("<="===T)return QueryFilters.runLtEqFunction(E,F,I);if(">="===T)return QueryFilters.runGtEqFunction(E,F,I);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(T){if("literal"!=T.token)throw console.log("not implemented yet"),console.log(T),"value not supported in operations yet";if("http://www.w3.org/2001/XMLSchema#integer"==T.type)return parseInt(T.value);if("http://www.w3.org/2001/XMLSchema#decimal"==T.type||"http://www.w3.org/2001/XMLSchema#float"==T.type||"http://www.w3.org/2001/XMLSchema#double"==T.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==T.type)return parseFloat(T.value);if("http://www.w3.org/2001/XMLSchema#negativeInteger"==T.type||"http://www.w3.org/2001/XMLSchema#long"==T.type||"http://www.w3.org/2001/XMLSchema#int"==T.type||"http://www.w3.org/2001/XMLSchema#short"==T.type||"http://www.w3.org/2001/XMLSchema#byte"==T.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==T.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==T.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==T.type)return parseInt(T.value);if("http://www.w3.org/2001/XMLSchema#date"!=T.type&&"http://www.w3.org/2001/XMLSchema#dateTime"!=T.type)return"http://www.w3.org/2001/XMLSchema#boolean"==T.type?!0===T.value||"true"===T.value||"1"===T.value||1===T.value||!0===T.value||!1!==T.value&&"false"!==T.value&&"0"!==T.value&&0!==T.value&&!1!==T.value&&void 0:"http://www.w3.org/2001/XMLSchema#string"==T.type?null===T.value||void 0===T.value?void 0:""+T.value:T.value;try{return ye.parseISO8601(T.value)}catch(E){return null}},QueryFilters.runOrFunction=function(T,E,F,I,O){for(var j=null,s=0;s<T.operands.length;s++){var D=QueryFilters.runFilter(T.operands[s],E,F,I,O);0==QueryFilters.isEbvError(D)&&(D=QueryFilters.ebv(D)),null==j?j=D:QueryFilters.isEbvError(D)?j=QueryFilters.isEbvError(j)?QueryFilters.ebvError():!0===j||QueryFilters.ebvError():!0===D?j=!0:QueryFilters.isEbvError(j)&&(j=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(j)},QueryFilters.runAndFunction=function(T,E,F,I,O){for(var j=null,s=0;s<T.operands.length;s++){var D=QueryFilters.runFilter(T.operands[s],E,F,I,O);0==QueryFilters.isEbvError(D)&&(D=QueryFilters.ebv(D)),null==j?j=D:QueryFilters.isEbvError(D)?j=!(!QueryFilters.isEbvError(j)&&!0!==j)&&QueryFilters.ebvError():!0===D?QueryFilters.isEbvError(j)&&(j=QueryFilters.ebvError()):j=!1}return QueryFilters.ebvBoolean(j)},QueryFilters.runEqualityFunction=function(T,E,F,I,O,j){return QueryFilters.isEbvError(T)||QueryFilters.isEbvError(E)?QueryFilters.ebvError():QueryFilters.isNumeric(T)&&QueryFilters.isNumeric(E)?(F=QueryFilters.effectiveTypeValue(T),O=QueryFilters.effectiveTypeValue(E),isNaN(F)||isNaN(O)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(T,E,I,j)):QueryFilters.ebvBoolean(F==O)):(QueryFilters.isSimpleLiteral(T)||QueryFilters.isXsdType("string",T))&&(QueryFilters.isSimpleLiteral(E)||QueryFilters.isXsdType("string",E))||QueryFilters.isXsdType("boolean",T)&&QueryFilters.isXsdType("boolean",E)?QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(T)==QueryFilters.effectiveTypeValue(E)):(QueryFilters.isXsdType("dateTime",T)||QueryFilters.isXsdType("date",T))&&(QueryFilters.isXsdType("dateTime",E)||QueryFilters.isXsdType("date",E))?QueryFilters.isXsdType("dateTime",T)&&QueryFilters.isXsdType("date",E)||QueryFilters.isXsdType("date",T)&&QueryFilters.isXsdType("dateTime",E)?QueryFilters.ebvFalse():null!=(T=ye.compareDateComponents(T.value,E.value))?0==T?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError():QueryFilters.isRDFTerm(T)&&QueryFilters.isRDFTerm(E)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(T,E,I,j)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(T,E,F){return QueryFilters.isEbvError(T)||QueryFilters.isEbvError(E)?QueryFilters.ebvError():QueryFilters.isNumeric(T)&&QueryFilters.isNumeric(E)||QueryFilters.isSimpleLiteral(T)&&QueryFilters.isSimpleLiteral(E)||QueryFilters.isXsdType("string",T)&&QueryFilters.isXsdType("string",E)||QueryFilters.isXsdType("boolean",T)&&QueryFilters.isXsdType("boolean",E)?QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(T)>QueryFilters.effectiveTypeValue(E)):(QueryFilters.isXsdType("dateTime",T)||QueryFilters.isXsdType("date",T))&&(QueryFilters.isXsdType("dateTime",E)||QueryFilters.isXsdType("date",E))?QueryFilters.isXsdType("dateTime",T)&&QueryFilters.isXsdType("date",E)||QueryFilters.isXsdType("date",T)&&QueryFilters.isXsdType("dateTime",E)?QueryFilters.ebvFalse():null!=(T=ye.compareDateComponents(T.value,E.value))?1==T?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError():QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(T,E){return QueryFilters.isEbvError(T)||QueryFilters.isEbvError(E)?QueryFilters.ebvError():QueryFilters.isNumeric(T)&&QueryFilters.isNumeric(E)||QueryFilters.isSimpleLiteral(T)&&QueryFilters.isSimpleLiteral(E)||QueryFilters.isXsdType("string",T)&&QueryFilters.isSimpleLiteral("string",E)||QueryFilters.isXsdType("boolean",T)&&QueryFilters.isSimpleLiteral("boolean",E)||QueryFilters.isXsdType("dateTime",T)&&QueryFilters.isSimpleLiteral("dateTime",E)?QueryFilters.runGtFunction(T,E,[]):T.token&&"uri"===T.token&&E.token&&"uri"===E.token?QueryFilters.ebvBoolean(T.value>E.value):T.token&&"literal"===T.token&&E.token&&"literal"===E.token?QueryFilters.ebvBoolean(""+T.value+T.type+T.lang>""+E.value+E.type+E.lang):T.token&&"blank"===T.token&&E.token&&"blank"===E.token||T.value&&E.value?QueryFilters.ebvBoolean(T.value>E.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(T,E,F){return QueryFilters.isEbvError(T)||QueryFilters.isEbvError(E)?QueryFilters.ebvError():QueryFilters.isNumeric(T)&&QueryFilters.isNumeric(E)||QueryFilters.isSimpleLiteral(T)&&QueryFilters.isSimpleLiteral(E)||QueryFilters.isXsdType("string",T)&&QueryFilters.isXsdType("string",E)||QueryFilters.isXsdType("boolean",T)&&QueryFilters.isXsdType("boolean",E)?QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(T)<QueryFilters.effectiveTypeValue(E)):(QueryFilters.isXsdType("dateTime",T)||QueryFilters.isXsdType("date",T))&&(QueryFilters.isXsdType("dateTime",E)||QueryFilters.isXsdType("date",E))?QueryFilters.isXsdType("dateTime",T)&&QueryFilters.isXsdType("date",E)||QueryFilters.isXsdType("date",T)&&QueryFilters.isXsdType("dateTime",E)?QueryFilters.ebvFalse():null!=(T=ye.compareDateComponents(T.value,E.value))?-1==T?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError():QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(T,E,F){return QueryFilters.isEbvError(T)||QueryFilters.isEbvError(E)?QueryFilters.ebvError():QueryFilters.isNumeric(T)&&QueryFilters.isNumeric(E)||QueryFilters.isSimpleLiteral(T)&&QueryFilters.isSimpleLiteral(E)||QueryFilters.isXsdType("string",T)&&QueryFilters.isXsdType("string",E)||QueryFilters.isXsdType("boolean",T)&&QueryFilters.isXsdType("boolean",E)?QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(T)>=QueryFilters.effectiveTypeValue(E)):(QueryFilters.isXsdType("dateTime",T)||QueryFilters.isXsdType("date",T))&&(QueryFilters.isXsdType("dateTime",E)||QueryFilters.isXsdType("date",E))?QueryFilters.isXsdType("dateTime",T)&&QueryFilters.isXsdType("date",E)||QueryFilters.isXsdType("date",T)&&QueryFilters.isXsdType("dateTime",E)?QueryFilters.ebvFalse():null!=(T=ye.compareDateComponents(T.value,E.value))?-1!=T?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError():QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(T,E,F){return QueryFilters.isEbvError(T)||QueryFilters.isEbvError(E)?QueryFilters.ebvError():QueryFilters.isNumeric(T)&&QueryFilters.isNumeric(E)||QueryFilters.isSimpleLiteral(T)&&QueryFilters.isSimpleLiteral(E)||QueryFilters.isXsdType("string",T)&&QueryFilters.isXsdType("string",E)||QueryFilters.isXsdType("boolean",T)&&QueryFilters.isXsdType("boolean",E)?QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(T)<=QueryFilters.effectiveTypeValue(E)):(QueryFilters.isXsdType("dateTime",T)||QueryFilters.isXsdType("date",T))&&(QueryFilters.isXsdType("dateTime",E)||QueryFilters.isXsdType("date",E))?QueryFilters.isXsdType("dateTime",T)&&QueryFilters.isXsdType("date",E)||QueryFilters.isXsdType("date",T)&&QueryFilters.isXsdType("dateTime",E)?QueryFilters.ebvFalse():null!=(T=ye.compareDateComponents(T.value,E.value))?1!=T?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError():QueryFilters.ebvFalse()},QueryFilters.runAddition=function(T,E,F,I,O,j){var s=QueryFilters.runFilter(T,F,I,O,j);if(QueryFilters.isEbvError(s))return QueryFilters.ebvError();if(T=s,QueryFilters.isNumeric(s)){for(s=0;s<E.length;s++){var D=QueryFilters.runFilter(E[s].expression,F,I,O,j);if(!QueryFilters.isNumeric(D))return QueryFilters.ebvFalse();"+"===E[s].operator?T=QueryFilters.runSumFunction(T,D):"-"===E[s].operator&&(T=QueryFilters.runSubFunction(T,D))}return T}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(T,E){if(QueryFilters.isEbvError(T)||QueryFilters.isEbvError(E))return QueryFilters.ebvError();var F=QueryFilters.effectiveTypeValue(T)+QueryFilters.effectiveTypeValue(E);return QueryFilters.isDouble(T)||QueryFilters.isDouble(E)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:F}:QueryFilters.isFloat(T)||QueryFilters.isFloat(E)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:F}:QueryFilters.isDecimal(T)||QueryFilters.isDecimal(E)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:F}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:F}},QueryFilters.runSubFunction=function(T,E){if(QueryFilters.isEbvError(T)||QueryFilters.isEbvError(E))return QueryFilters.ebvError();var F=QueryFilters.effectiveTypeValue(T)-QueryFilters.effectiveTypeValue(E);return QueryFilters.isDouble(T)||QueryFilters.isDouble(E)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:F}:QueryFilters.isFloat(T)||QueryFilters.isFloat(E)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:F}:QueryFilters.isDecimal(T)||QueryFilters.isDecimal(E)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:F}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:F}},QueryFilters.runMultiplication=function(T,E,F,I,O,j){if(T=QueryFilters.runFilter(T,F,I,O,j),QueryFilters.isEbvError(T))return T;var s=T;if(QueryFilters.isNumeric(T)){for(var D=0;D<E.length;D++){var q=QueryFilters.runFilter(E[D].expression,F,I,O,j);if(QueryFilters.isEbvError(q))return T;if(!QueryFilters.isNumeric(q))return QueryFilters.ebvFalse();"*"===E[D].operator?s=QueryFilters.runMulFunction(s,q):"/"===E[D].operator&&(s=QueryFilters.runDivFunction(s,q))}return s}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(T,E){if(QueryFilters.isEbvError(T)||QueryFilters.isEbvError(E))return QueryFilters.ebvError();var F=QueryFilters.effectiveTypeValue(T)*QueryFilters.effectiveTypeValue(E);return QueryFilters.isDouble(T)||QueryFilters.isDouble(E)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:F}:QueryFilters.isFloat(T)||QueryFilters.isFloat(E)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:F}:QueryFilters.isDecimal(T)||QueryFilters.isDecimal(E)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:F}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:F}},QueryFilters.runDivFunction=function(T,E){if(QueryFilters.isEbvError(T)||QueryFilters.isEbvError(E))return QueryFilters.ebvError();var F=QueryFilters.effectiveTypeValue(T)/QueryFilters.effectiveTypeValue(E);return QueryFilters.isDouble(T)||QueryFilters.isDouble(E)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:F}:QueryFilters.isFloat(T)||QueryFilters.isFloat(E)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:F}:QueryFilters.isDecimal(T)||QueryFilters.isDecimal(E)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:F}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:F}},QueryFilters.runBuiltInCall=function(T,E,F,I,O,j){if("notexists"===T||"exists"===T){for(var s in T=[],F)T.push(JSON.stringify(F[s]));return E[T=T.sort().join("")]}s=[];for(var D=0;D<E.length;D++)if("var"===E[D].token)s.push(E[D]);else{var q=QueryFilters.runFilter(E[D],F,I,O,j);if(QueryFilters.isEbvError(q))return q;s.push(q)}if("str"===T)return"literal"===s[0].token?{token:"literal",type:null,value:""+s[0].value}:"uri"===s[0].token?{token:"literal",type:null,value:s[0].value}:QueryFilters.ebvFalse();if("lang"===T)return"literal"===s[0].token?null!=s[0].lang?{token:"literal",value:""+s[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===T)return"literal"===s[0].token?null!=(F=s[0]).type?"string"==typeof F.type?{token:"uri",value:F.type,prefix:null,suffix:null}:F.type:null==F.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError():QueryFilters.ebvError();if("isliteral"===T)return"literal"===s[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===T)return"blank"===s[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===T||"isiri"===T)return"uri"===s[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===T)return F=QueryFilters.RDFTermEquality(s[0],s[1],I,j),QueryFilters.isEbvError(F)&&(F=!1),QueryFilters.ebvBoolean(F);if("langmatches"===T)return F=s[0],E=s[1],"literal"===F.token&&"literal"===E.token?"*"===E.value&&""!=F.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===F.value.toLowerCase().indexOf(E.value.toLowerCase())):QueryFilters.ebvError();if("bound"===T)return null==(E=s[0].value)?QueryFilters.ebvError():null!=F[E]?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if(null!=I.customFns[T])return I.customFns[T](QueryFilters,s);throw"Builtin call "+T+" not implemented yet"},QueryFilters.runUnaryExpression=function(T,E,F,I,O,j){if(E=QueryFilters.runFilter(E,F,I,O,j),QueryFilters.isEbvError(E))return E;if("!"===T){var s=QueryFilters.ebv(E);return QueryFilters.isEbvError(s)?QueryFilters.ebvFalse():QueryFilters.ebvBoolean(!s)}if("+"===T)return QueryFilters.isNumeric(E)?E:QueryFilters.ebvError();if("-"===T){if(QueryFilters.isNumeric(E)){for(s in T={},E)T[s]=E[s];return T.value=-T.value,T}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(T,E,F,I,O,j,s){if(null==T)return QueryFilters.ebvError();if(T=QueryFilters.runFilter(T,I,O,j,s),null==E)return QueryFilters.ebvError();if(E=QueryFilters.runFilter(E,I,O,j,s),null!=F&&(F=QueryFilters.runFilter(F,I,O,j,s)),null==E||"literal"!==E.token||null!=F&&"literal"!==F.token)return QueryFilters.ebvError();if(E=E.value,F=null==F?null:F.value,null!=T&&"var"==T.token){if(null==I[T.value])return QueryFilters.ebvError();T=I[T.value]}else{if(null==T||"literal"!==T.token)return QueryFilters.ebvError();if(null!=T.type&&!QueryFilters.isXsdType("string",T))return QueryFilters.ebvError();T=T.value}return(null==F?new RegExp(E):new RegExp(E,F.toLowerCase())).exec(T)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(T,E,F){return null!=T.value.type&&"object"==typeof T.value.type&&(T.value.type=ye.lexicalFormBaseUri(T.value.type,F)),T},QueryFilters.runIriRefOrFunction=function(T,E,F,I,O,j){if(null==E)return T;for(var s=[],D=0;D<E.length;D++)s.push(QueryFilters.runFilter(E[D],F,I,O,j));if("http://www.w3.org/2001/XMLSchema#integer"==(T=ye.lexicalFormBaseUri(T,j))||"http://www.w3.org/2001/XMLSchema#decimal"==T||"http://www.w3.org/2001/XMLSchema#double"==T||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==T||"http://www.w3.org/2001/XMLSchema#negativeInteger"==T||"http://www.w3.org/2001/XMLSchema#long"==T||"http://www.w3.org/2001/XMLSchema#int"==T||"http://www.w3.org/2001/XMLSchema#short"==T||"http://www.w3.org/2001/XMLSchema#byte"==T||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==T||"http://www.w3.org/2001/XMLSchema#unsignedLong"==T||"http://www.w3.org/2001/XMLSchema#unsignedInt"==T||"http://www.w3.org/2001/XMLSchema#unsignedShort"==T||"http://www.w3.org/2001/XMLSchema#unsignedByte"==T||"http://www.w3.org/2001/XMLSchema#positiveInteger"==T){if("literal"!==(s=s[0]).token)return QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#integer"==(s=QueryFilters.normalizeLiteralDatatype(s,I,j)).type||"http://www.w3.org/2001/XMLSchema#decimal"==s.type||"http://www.w3.org/2001/XMLSchema#double"==s.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==s.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==s.type||"http://www.w3.org/2001/XMLSchema#long"==s.type||"http://www.w3.org/2001/XMLSchema#int"==s.type||"http://www.w3.org/2001/XMLSchema#short"==s.type||"http://www.w3.org/2001/XMLSchema#byte"==s.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==s.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==s.type)return s.type=T,s;if("http://www.w3.org/2001/XMLSchema#boolean"==s.type)return 1==QueryFilters.ebv(s)?(s.type=T,s.value=1):(s.type=T,s.value=0),s;if("http://www.w3.org/2001/XMLSchema#float"==s.type||"http://www.w3.org/2001/XMLSchema#double"==s.type)return s.type=T,s.value=parseInt(s.value),s;if("http://www.w3.org/2001/XMLSchema#string"!=s.type&&null!=s.type)return QueryFilters.ebvError();if(2<s.value.split(".").length||2<s.value.split("-").length||2<s.value.split("/").length||2<s.value.split("+").length||"http://www.w3.org/2001/XMLSchema#decimal"==T&&(-1!=s.value.indexOf("e")||-1!=s.value.indexOf("E"))||("http://www.w3.org/2001/XMLSchema#int"==T||"http://www.w3.org/2001/XMLSchema#integer"==T)&&(-1!=s.value.indexOf("e")||-1!=s.value.indexOf("E")||-1!=s.value.indexOf(".")))return QueryFilters.ebvError();try{return s.value=parseInt(parseFloat(s.value)),isNaN(s.value)?QueryFilters.ebvError():(s.type=T,s)}catch(q){return QueryFilters.ebvError()}}else{if("http://www.w3.org/2001/XMLSchema#boolean"==T)return"literal"===(s=s[0]).token&&null==s.type?"true"===s.value||"1"===s.value?QueryFilters.ebvTrue():"false"===s.value||"0"===s.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===s.token?QueryFilters.isEbvError(s)?s:QueryFilters.ebvBoolean(s):QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#string"==T)return"literal"===(s=s[0]).token?"http://www.w3.org/2001/XMLSchema#integer"==(s=QueryFilters.normalizeLiteralDatatype(s,I,j)).type||"http://www.w3.org/2001/XMLSchema#decimal"==s.type||"http://www.w3.org/2001/XMLSchema#double"==s.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==s.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==s.type||"http://www.w3.org/2001/XMLSchema#long"==s.type||"http://www.w3.org/2001/XMLSchema#int"==s.type||"http://www.w3.org/2001/XMLSchema#short"==s.type||"http://www.w3.org/2001/XMLSchema#byte"==s.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==s.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==s.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==s.type||"http://www.w3.org/2001/XMLSchema#float"==s.type?(s.type=T,s.value=""+s.value,s):"http://www.w3.org/2001/XMLSchema#string"==s.type?s:"http://www.w3.org/2001/XMLSchema#boolean"==s.type?(QueryFilters.ebv(s)?(s.type=T,s.value="true"):(s.type=T,s.value="false"),s):"http://www.w3.org/2001/XMLSchema#dateTime"==s.type||"http://www.w3.org/2001/XMLSchema#date"==s.type?(s.type=T,"string"!=typeof s.value&&(s.value=ye.iso8601(s.value)),s):null==s.type?(s.value=""+s.value,s.type=T,s):QueryFilters.ebvError():"uri"===s.token?{token:"literal",value:ye.lexicalFormBaseUri(s,j),type:T,lang:null}:QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#dateTime"==T||"http://www.w3.org/2001/XMLSchema#date"==T){if("http://www.w3.org/2001/XMLSchema#dateTime"==(s=s[0]).type||"http://www.w3.org/2001/XMLSchema#date"==s.type)return s;if("http://www.w3.org/2001/XMLSchema#string"!=s.type&&null!=s.type)return QueryFilters.ebvError();try{return s.value=ye.iso8601(ye.parseISO8601(s.value)),s.type=T,s}catch(q){return QueryFilters.ebvError()}}else{if("http://www.w3.org/2001/XMLSchema#float"!=T)return null!=I.customFns[T]?I.customFns[T](QueryFilters,s):QueryFilters.ebvError();if("literal"!==(s=s[0]).token)return QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#decimal"==(s=QueryFilters.normalizeLiteralDatatype(s,I,j)).type||"http://www.w3.org/2001/XMLSchema#int"==s.type)return s.type=T,s.value=parseFloat(s.value),s;if("http://www.w3.org/2001/XMLSchema#boolean"==s.type)return 1==QueryFilters.ebv(s)?(s.type=T,s.value=1):(s.type=T,s.value=0),s;if("http://www.w3.org/2001/XMLSchema#float"==s.type||"http://www.w3.org/2001/XMLSchema#double"==s.type)return s.type=T,s.value=parseFloat(s.value),s;if("http://www.w3.org/2001/XMLSchema#string"==s.type)try{return s.value=parseFloat(s.value),isNaN(s.value)?QueryFilters.ebvError():(s.type=T,s)}catch(q){return QueryFilters.ebvError()}else{if(null!=s.type)return QueryFilters.ebvError();if(2<s.value.split(".").length||2<s.value.split("-").length||2<s.value.split("/").length||2<s.value.split("+").length)return QueryFilters.ebvError();try{return s.value=parseFloat(s.value),isNaN(s.value)?QueryFilters.ebvError():(s.type=T,s)}catch(q){return QueryFilters.ebvError()}}}}},Ee.exports={QueryFilters}},{"./utils":57}],53:[function(Ce,Ee,Be){var ye=Ce("./utils"),M=Ce("./utils"),T={variablesInBGP:function(E){if(I=E.variables)return I;var O,F=E.value||E,I=[];for(O in F)F[O]&&"var"===F[O].token?I.push(F[O].value):F[O]&&"blank"===F[O].token&&I.push("blank:"+F[O].value);return E.variables=I},connected:function(E,F){for(var I="/"+E.vars.join("/")+"/",O=0;O<F.vars.length;O++)if(-1!=I.indexOf("/"+F.vars[O]+"/"))return!0;return!1},variablesIntersectionBGP:function(E,F){for(var I=T.variablesInBGP(E),s=T.variablesInBGP(F),O={},j=0;j<I.lenght;j++)O[I[j]]=1;for(j=0;j<s.length;j++)I=O[s[j]]||0,I++,O[s[j]]=I;var D;s=[];for(D in O)2==O[D]&&s.push(O[D]);return s},executeAndBGPsGroups:function(E){for(var F={},I={},O=0,j=function(se,de){for(var he=0;he<se.length;he++)if(-1!=de.indexOf("/"+se[he]+"/"))return!0;return!1},s=function(se,de,he,V){var ke,W=[],Y="",ge="";for(ke in de)Y+=ke,W=W.concat(F[ke]),ge+=I[ke];ge=ge+ce.join("/")+"/",W.push(se),he[Y]=W,V[Y]=ge},D=0;D<E.length;D++){var ee,q=E[D],Z={},H={},ce=T.variablesInBGP(q),le={};for(ee in I)j(ce,I[ee])?le[ee]=!0:(Z[ee]=F[ee],H[ee]=I[ee]);0===ye.size(le)?(Z["g"+O]=[q],H["g"+O]="/"+ce.join("/")+"/",O++):s(q,le,Z,H),F=Z,I=H}return ye.values(F)},intersectionSize:function(E,F){for(var I=F.i.split("_"),O=0;O<I.length;O++)if(""!=I[O]&&-1!=E.i.indexOf("_"+I[O]+"_"))return 1;return 0},createJoinTree:function(E,F){for(var I="/"+E.vars.join("/")+"/",O=E.vars.concat([]),j=[],s=0;s<F.vars.length;s++)-1!=I.indexOf("/"+F.vars[s]+"/")?0==F.vars[s].indexOf("_:")?j.push("blank:"+F.vars[s]):j.push(F.vars[s]):O.push(F.vars[s]);I=F.i.split("_");var D=E.i.split("_"),q={};for(s=0;s<I.length;s++)""!=I[s]&&(q[I[s]]=!0);for(s=0;s<D.length;s++)""!=D[s]&&(q[D[s]]=!0);return s=ye.keys(q),{left:E,right:F,cost:E.cost+F.cost,i:"_"+s.sort().join("_")+"_",vars:O,join:j}},executeBushyTree:function(E,F,I,O,j){null==E.left?T.executeEmptyJoinBGP(E.right,F,I,O,j):null==E.right?T.executeEmptyJoinBGP(E.left,F,I,O,j):T.executeBushyTree(E.left,F,I,O,function(s){null!=s?T.executeBushyTree(E.right,F,I,O,function(D){j(null!=D?T.joinBindings2(E.join,s,D):null)}):j(null)})},executeAndBGPsDPSize:function(E,F,I,O,j){E=T.executeAndBGPsGroups(E);var s=[];M.eachSeries(E,function(D,q){I.computeCosts(D,O,function(Z){var H={},ce={},le={},ee=1,se=null,de={};le[1]=[];for(var he=0;he<Z.length;he++){for(var V in ee=[],delete Z[he].variables,Z[he])"_cost"!=V&&("var"===Z[he][V].token||"blank"===Z[he][V].token)&&ee.push(Z[he][V].value);ce["_"+he+"_"]={left:Z[he],right:null,cost:Z[he]._cost,i:"_"+he+"_",vars:ee},ee={left:Z[he],right:null,cost:Z[he]._cost,i:"_"+he+"_",vars:ee},H["_"+he+"_"]=ee,delete Z[he]._cost,de["_"+he+"_"]=!0,le[1].push("_"+he+"_"),(null==se||se.cost>ee.cost)&&(se=ee)}for(V=2;V<=Z.length;V++)for(var W=1;W<V;W++){var Y=le[""+W]||[],ge=le[""+(V-W)]||[];for(he=0;he<Y.length;he++)for(var ke=0;ke<ge.length;ke++)if(Y[he]!==ge[ke]){var _e=ce[Y[he]],Se=ce[ge[ke]];if(0==T.intersectionSize(_e,Se)&&T.connected(_e,Se)&&(ee=V,!de[(_e=T.createJoinTree(H[_e.i],H[Se.i])).i])){de[_e.i]=!0,Se=_e.cost+1,null!=H[_e.i]&&(Se=H[_e.i].cost);var We=le[V]||[];We.push(_e.i),ce[_e.i]=_e,le[V]=We,Se>_e.cost&&(ee===V&&(se=_e),H[_e.i]=_e)}}}s.push(se),q()})},function(){var D=null;M.eachSeries(s,function(q,Z){T.executeBushyTree(q,F,I,O,function(H){H?(D=null==D?H:T.crossProductBindings(D,H),Z()):Z("Error executing bushy tree")})},function(q){q?j(null,q):j(D)})})},executeEmptyJoinBGP:function(E,F,I,O,j){return T.executeBGPDatasets(E,F,I,O,j)},executeBGPDatasets:function(E,F,I,O,j){var s={};if(null==E.graph){var D=[];M.eachSeries(F.implicit,function(Z,H){null==s[Z.oid]?(s[Z.oid]=!0,E.graph=Z,I.rangeQuery(E,O,function(ce){ce=T.buildBindingsFromRange(ce,E),D.push(ce),H()})):H()},function(){var Z=T.unionManyBindings(D);j(Z)})}else if("var"===E.graph.token){var q=E.graph.value;D=[];M.eachSeries(F.named,function(H,ce){null==s[H.oid]?(s[H.oid]=!0,E.graph=H,null!=D?I.rangeQuery(E,O,function(le){if(null!=le){le=T.buildBindingsFromRange(le,E);for(var ee=0;ee<le.length;ee++)le[ee][q]=H.oid;D.push(le)}else D=null;ce()}):ce()):ce()},function(){if(null==D)j(null);else{var H=T.unionManyBindings(D);j(H)}})}else I.rangeQuery(E,O,function(Z){null!=Z?(Z=T.buildBindingsFromRange(Z,E),j(Z)):j(null)})},buildBindingsFromRange:function(E,F){T.variablesInBGP(F);var I=F.value||F,O={};for(Z in I)I[Z]&&"var"===I[Z].token?O[Z]=I[Z].value:I[Z]&&"blank"===I[Z].token&&(O[Z]="blank:"+I[Z].value);if(I=[],null!=E)for(var j=0;j<E.length;j++){var Z,s={},D=E[j],q=!1;for(Z in O){var H=D[Z];if(null!=s[O[Z]]&&s[O[Z]]!==H){q=!0;break}s[O[Z]]=H}q||I.push(s)}return I},areCompatibleBindings:function(E,F){for(var I in E)if(null!=F[I]&&F[I]!=E[I])return!1;return!0},mergeBindings:function(E,F){var O,I={};for(O in E)I[O]=E[O];for(O in F)I[O]=F[O];return I},joinBindings2:function(E,F,I){for(var j,s,D,q,O={},Z=[],H=0;H<F.length;H++){j=F[H],q=O;for(var ce=0;ce<E.length;ce++)s=j[s=E[ce]],ce==E.length-1?((D=q[s]||[]).push(j),q[s]=D):(D=q[s]||{},q=q[s]=D)}for(H=0;H<I.length;H++)for(j=I[H],q=O,ce=0;ce<E.length;ce++)if(null!=q[s=j[s=E[ce]]])if(ce==E.length-1)for(F=0;F<q[s].length;F++)Z.push(T.mergeBindings(q[s][F],j));else q=q[s];return Z},joinBindings:function(E,F){for(var I=[],O=0;O<E.length;O++)for(var j=E[O],s=0;s<F.length;s++){var D=F[s];T.areCompatibleBindings(j,D)&&I.push(T.mergeBindings(j,D))}return I},augmentMissingBindings:function(E,F){for(var I in F)null==E[I]&&(E[I]=null);return E},leftOuterJoinBindings:function(E,F){for(var I=[],O=0;O<E.length;O++){for(var j=E[O],s=!1,D=0;D<F.length;D++){var q=F[D];T.areCompatibleBindings(j,q)&&(s=!0,I.push(T.mergeBindings(j,q)))}!1===s&&(T.augmentMissingBindings(j,q),I.push(j))}return I},crossProductBindings:function(E,F){for(var I=[],O=0;O<E.length;O++)for(var j=E[O],s=0;s<F.length;s++)I.push(T.mergeBindings(j,F[s]));return I},unionBindings:function(E,F){return E.concat(F)},unionManyBindings:function(E){for(var F=[],I=0;I<E.length;I++)F=T.unionBindings(F,E[I]);return F}};Ee.exports={QueryPlan:T}},{"./utils":57}],54:[function(Ce,Ee,Be){var ye=Ce("./network_transport").NetworkTransport,M=Ce("./rvn3_parser").RVN3Parser,T=Ce("./jsonld_parser").JSONLDParser,E=Ce("./utils");(Be=function(F){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":M.parser,"text/n3":M.parser,"application/ld+json":T.parser,"application/json":T.parser},"undefined"!=typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=F)for(var I in F.parsers)this.parsers[I]=F.parsers[I];if(F&&null!=F.precedences)for(I in this.precedences=F.precedences,F.parsers)E.include(this.precedences,I)||this.precedences.push(I);for(this.acceptHeaderValue="",F=0;F<this.precedences.length;F++)this.acceptHeaderValue=0!=F?this.acceptHeaderValue+","+this.precedences[F]:this.acceptHeaderValue+this.precedences[F]}).prototype.registerParser=function(F,I){this.parsers[F]=I,this.precedences.push(F)},Be.prototype.unregisterParser=function(F){delete this.parsers[F];for(var I=[],O=0;O<this.precedences.length;O++)this.precedences[O]!=F&&I.push(this.precedences[O]);this.precedences=I},Be.prototype.setAcceptHeaderPrecedence=function(F){this.precedences=F},Be.prototype.load=function(F,I,O){var j=this;ye.load(F,this.acceptHeaderValue,function(s,D){if(s)O(s);else{var q=D.headers["Content-Type"]||D.headers["content-type"],Z=D.data;if(null!=q){var H;q=q.split(";")[0];for(H in j.parsers)if(-1!=H.indexOf("/")){var ce=H.split("/");if("*"===ce[1]){if(-1!=q.indexOf(ce[0]))return j.tryToParse(j.parsers[H],I,Z,{documentURI:F},O)}else if(-1!=q.indexOf(H)||-1!=q.indexOf(ce[1]))return j.tryToParse(j.parsers[H],I,Z,{documentURI:F},O)}else if(-1!=q.indexOf(H))return j.tryToParse(j.parsers[H],I,Z,{documentURI:F},O);O(Error("Unknown media type : "+q))}else O(Error("Uknown media type"))}})},Be.prototype.loadFromFile=function(F,I,O,j){try{var s=this;Ce("fs").readFile(O.split("file:/")[1],function(D,q){D?j(D):(q=q.toString("utf8"),s.tryToParse(F,I,q,{documentURI:O},j))})}catch(D){j(D)}},Be.prototype.tryToParse=function(F,I,O,j,s){try{"string"==typeof O&&(O=E.normalizeUnicodeLiterals(O)),F.parse(O,I,j,s)}catch(D){console.log(D.message),console.log(D.stack),s(D)}},Ee.exports={RDFLoader:Be}},{"./jsonld_parser":43,"./network_transport":45,"./rvn3_parser":56,"./utils":57,fs:5}],55:[function(Ce,Ee,Be){var ye=Ce("./utils"),M=Ce("./query_filters").QueryFilters;RDFModel={defaultContext:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},UrisMap:function(){this.defaultNs="",this.interfaceProperties="get remove set setDefault addAll resolve shrink".split(" ")}},RDFModel.UrisMap.prototype.values=function(){var E,T={};for(E in this)ye.include(this.interfaceProperties,E)||"function"==typeof this[E]||"defaultNs"===E||"interfaceProperties"===E||(T[E]=this[E]);return T},RDFModel.UrisMap.prototype.get=function(T){if(-1!=T.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[T]},RDFModel.UrisMap.prototype.remove=function(T){if(-1!=T.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[T],null},RDFModel.UrisMap.prototype.set=function(T,E){if(-1!=T.indexOf(" "))throw"Prefix must not contain any whitespaces";this[T]=E},RDFModel.UrisMap.prototype.setDefault=function(T){this.defaultNs=T},RDFModel.UrisMap.prototype.addAll=function(T,E){for(var F in T)ye.include(this.interfaceProperties,F)||(null!=this[F]?!0===E&&(this[F]=T[F]):this[F]=T[F]);return this},RDFModel.UrisMap.prototype.resolve=function(T){var E=T.split(":");return T=E[0],E=E[1],""===T?null==this.defaultNs?null:this.defaultNs+E:null!=this[T]?this[T]+E:null},RDFModel.UrisMap.prototype.shrink=function(T){for(var E in this){var F=this[E];if(0===T.indexOf(F)&&""!==F&&"defaultNs"!=E)return E+":"+(T=T.split(F)[1])}return T},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(T,E){this.prefixes.addAll(T.prefixes,E),this.terms.addAll(T.terms,E)},RDFModel.Profile.prototype.resolve=function(T){return-1!=T.indexOf(":")?this.prefixes.resolve(T):null!=this.terms[T]?this.terms.resolve(T):null},RDFModel.Profile.prototype.setDefaultPrefix=function(T){this.prefixes.setDefault(T)},RDFModel.Profile.prototype.setDefaultVocabulary=function(T){this.terms.setDefault(T)},RDFModel.Profile.prototype.setPrefix=function(T,E){this.prefixes.set(T,E)},RDFModel.Profile.prototype.setTerm=function(T,E){this.terms.set(T,E)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var T=this;for(var E in this.filters={s:function(F){return function(I){return I.subject.equals(F)}},p:function(F){return function(I){return I.predicate.equals(F)}},o:function(F){return function(I){return I.object.equals(F)}},sp:function(F,I){return function(O){return O.subject.equals(F)&&O.predicate.equals(I)}},so:function(F,I){return function(O){return O.subject.equals(F)&&O.object.equals(I)}},po:function(F,I){return function(O){return O.predicate.equals(F)&&O.object.equals(I)}},spo:function(F,I,O){return function(j){return j.subject.equals(F)&&j.predicate.equals(I)&&j.object.equals(O)}},describes:function(F){return function(I){return I.subject.equals(F)||I.object.equals(F)}},type:function(F){var I=T.resolve("rdf:type");return function(O){return O.predicate.equals(I)&&O.object.equals(F)}}},RDFModel.defaultContext)this.prefixes.set(E,RDFModel.defaultContext[E])},RDFModel.RDFEnvironment.prototype=ye.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var T=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,T},RDFModel.RDFEnvironment.prototype.createNamedNode=function(T){var E=this.resolve(T);return null!=E?new RDFModel.NamedNode(E):new RDFModel.NamedNode(T)},RDFModel.RDFEnvironment.prototype.createLiteral=function(T,E,F){return null!=F?new RDFModel.Literal(T,E,F.toString()):new RDFModel.Literal(T,E,F)},RDFModel.RDFEnvironment.prototype.createTriple=function(T,E,F){return new RDFModel.Triple(T,E,F)},RDFModel.RDFEnvironment.prototype.createGraph=function(T){var E=new RDFModel.Graph;if(null!=T)for(var F=0;F<T.length;F++)E.add(T[F]);return E},RDFModel.RDFEnvironment.prototype.createAction=function(T,E){return function(F){return T(F)?E(F):F}},RDFModel.RDFEnvironment.prototype.createProfile=function(T){return!0===T?new RDFModel.RDFEnvironment.Profile:((T=new RDFModel.RDFEnvironment.Profile).importProfile(this),T)},RDFModel.RDFEnvironment.prototype.createTermMap=function(T){if(!0===T)return new RDFModel.UrisMap;T=this.terms.values();var F,E=new RDFModel.UrisMap;for(F in T)E[F]=T[F];return E},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(T){if(!0===T)return new RDFModel.UrisMap;T=this.prefixes.values();var F,E=new RDFModel.UrisMap;for(F in T)E[F]=T[F];return E},RDFModel.RDFNode=function(T){this.interfaceName=T,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(T){if(null==T.interfaceName)return this.valueOf()==T;for(var E in this.attributes){var F=this.attributes[E];if(this[F]!=T[F])return!1}return!0},RDFModel.BlankNode=function(T){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+T,this.bnodeId=T},RDFModel.BlankNode.prototype=ye.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(T,E,F){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=T,null!=E?this.language=E:null!=F&&(this.datatype=F)},RDFModel.Literal.prototype=ye.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var T='"'+this.nominalValue+'"';return null!=this.language?T=T+"@"+this.language:(null!=this.datatype||this.type)&&(T=T+"^^<"+(this.datatype||this.type)+">"),T},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return M.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(T){RDFModel.RDFNode.call(this,"NamedNode"),this.nominalValue=null!=T.value?T.value:T},RDFModel.NamedNode.prototype=ye.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(T,E,F){this.subject=T,this.predicate=E,this.object=F},RDFModel.Triple.prototype.equals=function(T){return this.subject.equals(T.subject)&&this.predicate.equals(T.predicate)&&this.object.equals(T.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(T){for(var E=0;E<this.actions.length;E++)T=this.actions[E](T);return E=T.subject.toString()+T.predicate.toString()+T.object.toString(),this.duplicates[E]||(this.duplicates[E]=!0,this.triples.push(T)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(T,E){if(this.actions.push(T),1==E)for(var F=0;F<this.triples.length;F++)this.triples[F]=T(this.triples[F]);return this},RDFModel.Graph.prototype.addAll=function(T){T=T.toArray();for(var E=0;E<T.length;E++)this.add(T[E]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(T){for(var E=null,F=0;F<this.triples.length;F++)if(this.triples[F].equals(T)){delete this.duplicates[T.subject.toString()+T.predicate.toString()+T.object.toString()],E=F;break}return null!=E&&this.triples.splice(E,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(T){for(var E=0;E<this.triples.length;E++)if(!0===T(this.triples[E],this))return!0;return!1},RDFModel.Graph.prototype.every=function(T){for(var E=0;E<this.triples.length;E++)if(!1===T(this.triples[E],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(T){for(var E=new RDFModel.Graph,F=0;F<this.triples.length;F++)!0===T(this.triples[F],this)&&E.add(this.triples[F]);return E},RDFModel.Graph.prototype.forEach=function(T){for(var E=0;E<this.triples.length;E++)T(this.triples[E],this)},RDFModel.Graph.prototype.merge=function(T){T=new RDFModel.Graph;for(var E=0;E<this.triples.length;E++)T.add(this.triples[E]);return T},RDFModel.Graph.prototype.match=function(T,E,F,I){for(var O=new RDFModel.Graph,j=0,s=0;s<this.triples.length;s++){var D=this.triples[s];if((null==T||D.subject.equals(T))&&(null==E||D.predicate.equals(E))&&(null==F||D.object.equals(F))){if(!(null==I||j<I))break;j++,O.add(D)}}return O},RDFModel.Graph.prototype.removeMatches=function(T,E,F){for(var I=[],O=0;O<this.triples.length;O++){var j=this.triples[O];(null==T||j.subject.equals(T))&&(null!=E&&!j.predicate.equals(E)||null!=F&&!j.object.equals(F)||I.push(j))}for(O=0;O<I.length;O++)this.remove(I[O]);return this},RDFModel.Graph.prototype.toNT=function(){var T="";return this.forEach(function(E){T+=E.toString()}),T},RDFModel.buildRDFResource=function(T,E,F,I){return"blank"===T.token?RDFModel.buildBlankNode(T,E,F,I):"literal"===T.token?RDFModel.buildLiteral(T,E,F,I):"uri"===T.token?RDFModel.buildNamedNode(T,E,F,I):"var"===T.token?null!=(T=E[T.value])?RDFModel.buildRDFResource(T,E,F,I):null:null},RDFModel.buildBlankNode=function(T,E,F,I){return null!=T.valuetmp&&(T.value=T.valuetmp),0===T.value.indexOf("_:")&&(T.value=T.value.split("_:")[1]),new RDFModel.BlankNode(T.value)},RDFModel.buildLiteral=function(T,E,F,I){return new RDFModel.Literal(T.value,T.lang,T.type)},RDFModel.buildNamedNode=function(T,E,F,I){return null==T.value&&null!=T.prefix&&(E=F.resolveNsInEnvironment(T.prefix,I),T.value=E+T.suffix),new RDFModel.NamedNode(T)},RDFModel.rdf=new RDFModel.RDFEnvironment,Ee.exports=RDFModel},{"./query_filters":52,"./utils":57}],56:[function(Ce,Ee,Be){function ye(T){switch(T[0]){case'"':return 0<T.indexOf("^^")?{literal:(T=T.split("^^"))[0]+"^^<"+T[1]+">"}:{literal:T};case"_":return{blank:T.replace("b","")};default:return{token:"uri",value:T,prefix:null,suffix:null}}}var M=Ce("n3").Parser;Ee.exports={RVN3Parser:{parser:{async:!0,parse:function(T,E,F,I){I||(I=F,F=E,E=null),E&&"string"==typeof E&&(E={token:"uri",value:E,prefix:null,suffix:null}),F&&F.baseURI&&(F.documentIRI=F.baseURI);var O=[];new M(F).parse(T,function(j,s){j?I(j):s?O.push({subject:ye(s.subject),predicate:ye(s.predicate),object:ye(s.object),graph:E}):I(!1,O)})},resetBlankNodeIds:function(){M._resetBlankNodeIds()}}}}},{n3:27}],57:[function(x,B,A){(function(m){var h=void 0!==m&&m.nextTick?m.nextTick:"undefined"!=typeof window&&window.setImmediate?window.setImmediate:function(Ce){setTimeout(Ce,0)},c=0,b=100,a=function(Ce){++c<b?Ce():(c=0,h(Ce))},f=function(Ce){try{if(null==Ce)return"";if("uri"===Ce.token)return"u"+Ce.value;if("blank"===Ce.token)return"b"+Ce.value;var Ee;if("literal"===Ce.token)return(Ee=(Ee="l"+Ce.value)+(Ce.type||""))+(Ce.lang||"")}catch(Be){if("object"==typeof Ce){for(p in Ee="",Ce)Ee=Ee+p+Ce[p];return Ee}return Ce}};parseISO8601=function(Ce){return Date.parse(Ce)},Date.prototype.toISOString||function(){function Ce(Ee){return 10>Ee?"0"+Ee:Ee}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+Ce(this.getUTCMonth()+1)+"-"+Ce(this.getUTCDate())+"T"+Ce(this.getUTCHours())+":"+Ce(this.getUTCMinutes())+":"+Ce(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(Ce){return Ce.toISOString()},compareDateComponents=function(Ce,Ee){var Be=parseISO8601(Ce),ye=parseISO8601(Ee);return Be==ye?0:Be<ye?-1:1},lexicalFormLiteral=function(Ce,Ee){var Be=Ce.value,ye=Ce.lang,M=Ce.type,T=null;return null!=Be&&null!=M&&"string"!=typeof M?(null==(Be=M.value)&&(Be=M.suffix,M=Ee.namespaces[M.prefix],Ce.type=M+Be,Be=M+Be),T=-1!=Be.indexOf("hexBinary")?'"'+Ce.value.toLowerCase()+'"^^<'+Be+">":'"'+Ce.value+'"^^<'+Be+">"):T=null==ye&&null==M?'"'+Be+'"':null==M?'"'+Be+'"@'+ye:-1!=M.indexOf("hexBinary")?'"'+Ce.value.toLowerCase()+'"^^<'+M+">":'"'+Ce.value+'"^^<'+M+">",T},normalizeUnicodeLiterals=function(a){for(var b=a.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],c={},d=0;d<b.length;d++)null==c[b[d]]&&(c[b[d]]=!0,a=a.replace(new RegExp("\\"+b[d],"g"),eval("'"+b[d]+"'")));return a},registerIndexedDB=function(Ce){if("undefined"==typeof window&&void 0!==m&&!1===m.browser){var Ee=x("sqlite3"),Be=x("indexeddb-js");Ee=new Ee.Database(":memory:"),Be=Be.makeScope("sqlite3",Ee);Ce.indexedDB=Be.indexedDB,Ce.IDBKeyRange=Be.IDBKeyRange}else(Be="undefined"==typeof window?self:window).indexedDB=Be.indexedDB||Be.mozIndexedDB||Be.webkitIndexedDB||Be.msIndexedDB,Be.IDBKeyRange=Be.IDBKeyRange||Be.webkitIDBKeyRange||Be.msIDBKeyRange,Be.indexedDB?(Ce.indexedDB=Be.indexedDB,Ce.IDBKeyRange=Be.IDBKeyRange):console.log("The browser does not support IndexDB.")},guid=function(){function Ce(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return Ce()+Ce()+"-"+Ce()+"-"+Ce()+"-"+Ce()+"-"+Ce()+Ce()+Ce()};var f=function(Ce){try{if(null==Ce)return"";if("uri"===Ce.token)return"u"+Ce.value;if("blank"===Ce.token)return"b"+Ce.value;var Ee;if("literal"===Ce.token)return(Ee=(Ee="l"+Ce.value)+(Ce.type||""))+(Ce.lang||"")}catch(Be){if("object"==typeof Ce){for(p in Ee="",Ce)Ee=Ee+p+Ce[p];return Ee}return Ce}},k=function(Ce,Ee){for(var Be=[],ye=0;ye<Ce.length;ye++)Ee(Ce[ye])&&Be.push(Ce[ye]);return Be},r=function(Ce,Ee){if(Ce.forEach)Ce.forEach(Ee);else for(var Be=0;Be<Ce.length;Be++)Ee(Ce[Be])};clone=function(Ce){return JSON.parse(JSON.stringify(Ce))};var d=function(){function Ce(){}return function(Ee){var Be=typeof Ee;if("function"==Be||Ee&&"object"==Be){Ce.prototype=Ee;var ye=new Ce;Ce.prototype=null}return ye||void 0}}(),l=function(Ce,Ee,Be){Ce()?Ee(function(ye){if(ye)return Be(ye);l(Ce,Ee,Be)}):Be()},v=function(Ce,Ee,Be){if(Be=Be||function(){},!Ce.length)return Be();var ye=0,M=function(){Ee(Ce[ye],function(T){T?(Be(T),Be=function(){}):(ye+=1)>=Ce.length?Be():a(M)})};M()},u=function(Ce,Ee,Be,ye){v(Ce,function(M,T){Be(Ee,M,function(E,F){Ee=F,T(E)})},function(M){ye(M,Ee)})};B.exports={isWorker:function(){return(void 0===m||!0===m.browser)&&"undefined"==typeof window},nextTick:a,hasTerm:f,lexicalFormBaseUri:function(Ce,Ee){var M=null;if(Ee=Ee||{},null==Ce.value){M=Ce.prefix;var Be=Ce.suffix,ye=Ee.namespaces[M];M=null!=ye?ye+Be:M+":"+Be}else M=Ce.value;return null===M?null:(-1==M.indexOf(":")&&(M=(Ee.base||"")+M),M)},parseISO8601,compareDateComponents,iso8601,normalizeUnicodeLiterals,lexicalFormLiteral,registerIndexedDB,guid,hashTerm:f,keys:function(Ce){var Be,Ee=[];for(Be in Ce)Ee.push(Be);return Ee},values:function(Ce){var Be,Ee=[];for(Be in Ce)Ee.push(Ce[Be]);return Ee},size:function(Ce){if(Ce.length)return Ce.length;var Be,Ee=0;for(Be in Ce)Ee++;return Ee},map:function(Ce,Ee){if(Ce.map)return Ce.map(Ee);for(var Be=[],ye=0;ye<Ce.length;ye++)Be[ye]=Ee(Ce[ye]);return Be},each:r,forEach:r,include:function(Ce,Ee){for(var Be=0;Be<Ce.length;Be++)if(Ce[Be]===Ee)return!0;return!1},reject:k,remove:k,clone,create:d,whilst:l,eachSeries:v,eachParallel:function(Ce,Ee,Be){if(Be=Be||function(){},!Ce.length)return Be();for(var ye=!1,M=0,T=function(F){if(F)throw ye=!0,Error(F);ye||++M===Ce.length&&Be()},E=0;E<Ce.length;E++)!function(F,I,O,j){a(function(){try{j(F[I],function(){O()})}catch(s){O(s)}})}(Ce,E,T,Ee)},seq:function(){var Ce=arguments;return function(){var Ee=this,Be=Array.prototype.slice.call(arguments),ye=Be.pop();u(Ce,Be,function(M,T,E){T.apply(Ee,M.concat([function(){var F=arguments[0],I=Array.prototype.slice.call(arguments,1);E(F,I)}]))},function(M,T){ye.apply(Ee,[M].concat(T))})}},yieldFrequency:function(Ce){b=Ce}}}).call(this,x("7YKIPe"))},{"7YKIPe":10}]},{},[41])(41)}),function(Ce,Ee){"object"==typeof exports&&"undefined"!=typeof module?module.exports=Ee():"function"==typeof define&&define.amd?define(Ee):(Ce=Ce||self).CodeMirror=Ee()}(this,function(){"use strict";var Ce=navigator.userAgent,Ee=navigator.platform,Be=/gecko\/\d/i.test(Ce),ye=/MSIE \d/.test(Ce),M=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ce),T=/Edge\/(\d+)/.exec(Ce),E=ye||M||T,F=E&&(ye?document.documentMode||6:+(T||M)[1]),I=!T&&/WebKit\//.test(Ce),O=I&&/Qt\/\d+\.\d+/.test(Ce),j=!T&&/Chrome\//.test(Ce),s=/Opera\//.test(Ce),D=/Apple Computer/.test(navigator.vendor),q=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Ce),Z=/PhantomJS/.test(Ce),H=D&&(/Mobile\/\w+/.test(Ce)||navigator.maxTouchPoints>2),ce=/Android/.test(Ce),le=H||ce||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Ce),ee=H||/Mac/.test(Ee),se=/\bCrOS\b/.test(Ce),de=/win/i.test(Ee),he=s&&Ce.match(/Version\/(\d*\.\d*)/);he&&(he=Number(he[1])),he&&he>=15&&(s=!1,I=!0);var V=ee&&(O||s&&(null==he||he<12.11)),W=Be||E&&F>=9;function Y(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var $e,ge=function(t,i){var L=t.className,_=Y(i).exec(L);if(_){var N=L.slice(_.index+_[0].length);t.className=L.slice(0,_.index)+(N?_[1]+N:"")}};function ke(t){for(var i=t.childNodes.length;i>0;--i)t.removeChild(t.firstChild);return t}function _e(t,i){return ke(t).appendChild(i)}function Se(t,i,L,_){var N=document.createElement(t);if(L&&(N.className=L),_&&(N.style.cssText=_),"string"==typeof i)N.appendChild(document.createTextNode(i));else if(i)for(var U=0;U<i.length;++U)N.appendChild(i[U]);return N}function We(t,i,L,_){var N=Se(t,i,L,_);return N.setAttribute("role","presentation"),N}function Fe(t,i){if(3==i.nodeType&&(i=i.parentNode),t.contains)return t.contains(i);do{if(11==i.nodeType&&(i=i.host),i==t)return!0}while(i=i.parentNode)}function oe(){var t;try{t=document.activeElement}catch(i){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function me(t,i){var L=t.className;Y(i).test(L)||(t.className+=(L?" ":"")+i)}function Ae(t,i){for(var L=t.split(" "),_=0;_<L.length;_++)L[_]&&!Y(L[_]).test(i)&&(i+=" "+L[_]);return i}$e=document.createRange?function(t,i,L,_){var N=document.createRange();return N.setEnd(_||t,L),N.setStart(t,i),N}:function(t,i,L){var _=document.body.createTextRange();try{_.moveToElementText(t.parentNode)}catch(N){return _}return _.collapse(!0),_.moveEnd("character",L),_.moveStart("character",i),_};var qe=function(t){t.select()};function et(t){var i=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,i)}}function st(t,i,L){for(var _ in i||(i={}),t)t.hasOwnProperty(_)&&(!1!==L||!i.hasOwnProperty(_))&&(i[_]=t[_]);return i}function dt(t,i,L,_,N){null==i&&(-1==(i=t.search(/[^\s\u00a0]/))&&(i=t.length));for(var U=_||0,re=N||0;;){var fe=t.indexOf("\t",U);if(fe<0||fe>=i)return re+(i-U);re+=fe-U,re+=L-re%L,U=fe+1}}H?qe=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:E&&(qe=function(t){try{t.select()}catch(i){}});var xt=function(){this.id=null,this.f=null,this.time=0,this.handler=et(this.onTimeout,this)};function Pt(t,i){for(var L=0;L<t.length;++L)if(t[L]==i)return L;return-1}xt.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},xt.prototype.set=function(t,i){this.f=i;var L=+new Date+t;(!this.id||L<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=L)};var tt={toString:function(){return"CodeMirror.Pass"}},it={scroll:!1},vt={origin:"*mouse"},ct={origin:"+move"};function At(t,i,L){for(var _=0,N=0;;){var U=t.indexOf("\t",_);-1==U&&(U=t.length);var re=U-_;if(U==t.length||N+re>=i)return _+Math.min(re,i-N);if(N+=U-_,_=U+1,(N+=L-N%L)>=i)return _}}var yt=[""];function It(t){for(;yt.length<=t;)yt.push(St(yt)+" ");return yt[t]}function St(t){return t[t.length-1]}function Ut(t,i){for(var L=[],_=0;_<t.length;_++)L[_]=i(t[_],_);return L}function Rr(){}function cr(t,i){var L;return Object.create?L=Object.create(t):(Rr.prototype=t,L=new Rr),i&&st(i,L),L}var tr=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function mr(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||tr.test(t))}function Xe(t,i){return i?!!(i.source.indexOf("\\w")>-1&&mr(t))||i.test(t):mr(t)}function Je(t){for(var i in t)if(t.hasOwnProperty(i)&&t[i])return!1;return!0}var Pe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(t){return t.charCodeAt(0)>=768&&Pe.test(t)}function be(t,i,L){for(;(L<0?i>0:i<t.length)&&ie(t.charAt(i));)i+=L;return i}function Te(t,i,L){for(var _=i>L?-1:1;;){if(i==L)return i;var N=(i+L)/2,U=_<0?Math.ceil(N):Math.floor(N);if(U==i)return t(U)?i:L;t(U)?L=U:i=U+_}}var Qe=null;function G(t,i,L){var _;Qe=null;for(var N=0;N<t.length;++N){var U=t[N];if(U.from<i&&U.to>i)return N;U.to==i&&(U.from!=U.to&&"before"==L?_=N:Qe=N),U.from==i&&(U.from!=U.to&&"before"!=L?_=N:Qe=N)}return null!=_?_:Qe}var J=function(){function L(xe){return xe<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(xe):1424<=xe&&xe<=1524?"R":1536<=xe&&xe<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(xe-1536):1774<=xe&&xe<=2220?"r":8192<=xe&&xe<=8203?"w":8204==xe?"b":"L"}var _=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,N=/[stwN]/,U=/[LRr]/,re=/[Lb1n]/,fe=/[1n]/;function ve(xe,Oe,Ue){this.level=xe,this.from=Oe,this.to=Ue}return function(xe,Oe){var Ue="ltr"==Oe?"L":"R";if(0==xe.length||"ltr"==Oe&&!_.test(xe))return!1;for(var Ve=xe.length,ze=[],rt=0;rt<Ve;++rt)ze.push(L(xe.charCodeAt(rt)));for(var nt=0,lt=Ue;nt<Ve;++nt){var at=ze[nt];"m"==at?ze[nt]=lt:lt=at}for(var pt=0,ft=Ue;pt<Ve;++pt){var gt=ze[pt];"1"==gt&&"r"==ft?ze[pt]="n":U.test(gt)&&(ft=gt,"r"==gt&&(ze[pt]="R"))}for(var _t=1,kt=ze[0];_t<Ve-1;++_t){var Mt=ze[_t];"+"==Mt&&"1"==kt&&"1"==ze[_t+1]?ze[_t]="1":","==Mt&&kt==ze[_t+1]&&("1"==kt||"n"==kt)&&(ze[_t]=kt),kt=Mt}for(var zt=0;zt<Ve;++zt){var yr=ze[zt];if(","==yr)ze[zt]="N";else if("%"==yr){var Vt=void 0;for(Vt=zt+1;Vt<Ve&&"%"==ze[Vt];++Vt);for(var Gr=zt&&"!"==ze[zt-1]||Vt<Ve&&"1"==ze[Vt]?"1":"N",Ir=zt;Ir<Vt;++Ir)ze[Ir]=Gr;zt=Vt-1}}for(var lr=0,Nr=Ue;lr<Ve;++lr){var Cr=ze[lr];"L"==Nr&&"1"==Cr?ze[lr]="L":U.test(Cr)&&(Nr=Cr)}for(var ur=0;ur<Ve;++ur)if(N.test(ze[ur])){var nr=void 0;for(nr=ur+1;nr<Ve&&N.test(ze[nr]);++nr);for(var er="L"==(ur?ze[ur-1]:Ue),Bi=er==("L"==(nr<Ve?ze[nr]:Ue))?er?"L":"R":Ue,Nn=ur;Nn<nr;++Nn)ze[Nn]=Bi;ur=nr-1}for(var mn,Fr=[],ir=0;ir<Ve;)if(re.test(ze[ir])){var hs=ir;for(++ir;ir<Ve&&re.test(ze[ir]);++ir);Fr.push(new ve(0,hs,ir))}else{var $r=ir,Yn=Fr.length,mi="rtl"==Oe?1:0;for(++ir;ir<Ve&&"L"!=ze[ir];++ir);for(var _r=$r;_r<ir;)if(fe.test(ze[_r])){$r<_r&&(Fr.splice(Yn,0,new ve(1,$r,_r)),Yn+=mi);var Pi=_r;for(++_r;_r<ir&&fe.test(ze[_r]);++_r);Fr.splice(Yn,0,new ve(2,Pi,_r)),Yn+=mi,$r=_r}else++_r;$r<ir&&Fr.splice(Yn,0,new ve(1,$r,ir))}return"ltr"==Oe&&(1==Fr[0].level&&(mn=xe.match(/^\s+/))&&(Fr[0].from=mn[0].length,Fr.unshift(new ve(0,0,mn[0].length))),1==St(Fr).level&&(mn=xe.match(/\s+$/))&&(St(Fr).to-=mn[0].length,Fr.push(new ve(0,Ve-mn[0].length,Ve)))),"rtl"==Oe?Fr.reverse():Fr}}();function X(t,i){var L=t.order;return null==L&&(L=t.order=J(t.text,i)),L}var ae=[],ne=function(t,i,L){if(t.addEventListener)t.addEventListener(i,L,!1);else if(t.attachEvent)t.attachEvent("on"+i,L);else{var _=t._handlers||(t._handlers={});_[i]=(_[i]||ae).concat(L)}};function te(t,i){return t._handlers&&t._handlers[i]||ae}function ue(t,i,L){if(t.removeEventListener)t.removeEventListener(i,L,!1);else if(t.detachEvent)t.detachEvent("on"+i,L);else{var _=t._handlers,N=_&&_[i];if(N){var U=Pt(N,L);U>-1&&(_[i]=N.slice(0,U).concat(N.slice(U+1)))}}}function we(t,i){var L=te(t,i);if(L.length)for(var _=Array.prototype.slice.call(arguments,2),N=0;N<L.length;++N)L[N].apply(null,_)}function Le(t,i,L){return"string"==typeof i&&(i={type:i,preventDefault:function(){this.defaultPrevented=!0}}),we(t,L||i.type,t,i),He(i)||i.codemirrorIgnore}function Ie(t){var i=t._handlers&&t._handlers.cursorActivity;if(i)for(var L=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),_=0;_<i.length;++_)-1==Pt(L,i[_])&&L.push(i[_])}function Me(t,i){return te(t,i).length>0}function Ne(t){t.prototype.on=function(i,L){ne(this,i,L)},t.prototype.off=function(i,L){ue(this,i,L)}}function je(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Re(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function He(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Ze(t){je(t),Re(t)}function Ke(t){return t.target||t.srcElement}function Ft(t){var i=t.which;return null==i&&(1&t.button?i=1:2&t.button?i=3:4&t.button&&(i=2)),ee&&t.ctrlKey&&1==i&&(i=3),i}var wt,Bt,mt=function(){if(E&&F<9)return!1;var t=Se("div");return"draggable"in t||"dragDrop"in t}();function Nt(t){if(null==wt){var i=Se("span","\u200b");_e(t,Se("span",[i,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(wt=i.offsetWidth<=1&&i.offsetHeight>2&&!(E&&F<8))}var L=wt?Se("span","\u200b"):Se("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return L.setAttribute("cm-text",""),L}function Rt(t){if(null!=Bt)return Bt;var i=_e(t,document.createTextNode("A\u062eA")),L=$e(i,0,1).getBoundingClientRect(),_=$e(i,1,2).getBoundingClientRect();return ke(t),!(!L||L.left==L.right)&&(Bt=_.right-L.right<3)}var t,Zt=3!="\n\nb".split(/\n/).length?function(t){for(var i=0,L=[],_=t.length;i<=_;){var N=t.indexOf("\n",i);-1==N&&(N=t.length);var U=t.slice(i,"\r"==t.charAt(N-1)?N-1:N),re=U.indexOf("\r");-1!=re?(L.push(U.slice(0,re)),i+=re+1):(L.push(U),i=N+1)}return L}:function(t){return t.split(/\r\n?|\n/)},br=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(i){return!1}}:function(t){var i;try{i=t.ownerDocument.selection.createRange()}catch(L){}return!(!i||i.parentElement()!=t)&&0!=i.compareEndPoints("StartToEnd",i)},jr="oncopy"in(t=Se("div"))||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy),wr=null;var K={},xr={};function en(t,i){arguments.length>2&&(i.dependencies=Array.prototype.slice.call(arguments,2)),K[t]=i}function fn(t){if("string"==typeof t&&xr.hasOwnProperty(t))t=xr[t];else if(t&&"string"==typeof t.name&&xr.hasOwnProperty(t.name)){var i=xr[t.name];"string"==typeof i&&(i={name:i}),(t=cr(i,t)).name=i.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return fn("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return fn("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Wr(t,i){i=fn(i);var L=K[i.name];if(!L)return Wr(t,"text/plain");var _=L(t,i);if(cn.hasOwnProperty(i.name)){var N=cn[i.name];for(var U in N)!N.hasOwnProperty(U)||(_.hasOwnProperty(U)&&(_["_"+U]=_[U]),_[U]=N[U])}if(_.name=i.name,i.helperType&&(_.helperType=i.helperType),i.modeProps)for(var re in i.modeProps)_[re]=i.modeProps[re];return _}var cn={};function Ui(t,i){st(i,cn.hasOwnProperty(t)?cn[t]:cn[t]={})}function e(t,i){if(!0===i)return i;if(t.copyState)return t.copyState(i);var L={};for(var _ in i){var N=i[_];N instanceof Array&&(N=N.concat([])),L[_]=N}return L}function wn(t,i){for(var L;t.innerMode&&((L=t.innerMode(i))&&L.mode!=t);)i=L.state,t=L.mode;return L||{mode:t,state:i}}function Gi(t,i,L){return!t.startState||t.startState(i,L)}var $t=function(t,i,L){this.pos=this.start=0,this.string=t,this.tabSize=i||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=L};function bt(t,i){if((i-=t.first)<0||i>=t.size)throw new Error("There is no line "+(i+t.first)+" in the document.");for(var L=t;!L.lines;)for(var _=0;;++_){var N=L.children[_],U=N.chunkSize();if(i<U){L=N;break}i-=U}return L.lines[i]}function $n(t,i,L){var _=[],N=i.line;return t.iter(i.line,L.line+1,function(U){var re=U.text;N==L.line&&(re=re.slice(0,L.ch)),N==i.line&&(re=re.slice(i.ch)),_.push(re),++N}),_}function ds(t,i,L){var _=[];return t.iter(i,L,function(N){_.push(N.text)}),_}function tn(t,i){var L=i-t.height;if(L)for(var _=t;_;_=_.parent)_.height+=L}function qt(t){if(null==t.parent)return null;for(var i=t.parent,L=Pt(i.lines,t),_=i.parent;_;i=_,_=_.parent)for(var N=0;_.children[N]!=i;++N)L+=_.children[N].chunkSize();return L+i.first}function jn(t,i){var L=t.first;e:do{for(var _=0;_<t.children.length;++_){var N=t.children[_],U=N.height;if(i<U){t=N;continue e}i-=U,L+=N.chunkSize()}return L}while(!t.lines);for(var re=0;re<t.lines.length;++re){var ve=t.lines[re].height;if(i<ve)break;i-=ve}return L+re}function Hi(t,i){return i>=t.first&&i<t.first+t.size}function gs(t,i){return String(t.lineNumberFormatter(i+t.firstLineNumber))}function ot(t,i,L){if(void 0===L&&(L=null),!(this instanceof ot))return new ot(t,i,L);this.line=t,this.ch=i,this.sticky=L}function Tt(t,i){return t.line-i.line||t.ch-i.ch}function ko(t,i){return t.sticky==i.sticky&&0==Tt(t,i)}function vs(t){return ot(t.line,t.ch)}function So(t,i){return Tt(t,i)<0?i:t}function Fo(t,i){return Tt(t,i)<0?t:i}function Cl(t,i){return Math.max(t.first,Math.min(i,t.first+t.size-1))}function Lt(t,i){if(i.line<t.first)return ot(t.first,0);var L=t.first+t.size-1;return i.line>L?ot(L,bt(t,L).text.length):function la(t,i){var L=t.ch;return null==L||L>i?ot(t.line,i):L<0?ot(t.line,0):t}(i,bt(t,i.line).text.length)}function ys(t,i){for(var L=[],_=0;_<i.length;_++)L[_]=Lt(t,i[_]);return L}$t.prototype.eol=function(){return this.pos>=this.string.length},$t.prototype.sol=function(){return this.pos==this.lineStart},$t.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},$t.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},$t.prototype.eat=function(t){var i=this.string.charAt(this.pos);if("string"==typeof t?i==t:i&&(t.test?t.test(i):t(i)))return++this.pos,i},$t.prototype.eatWhile=function(t){for(var i=this.pos;this.eat(t););return this.pos>i},$t.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},$t.prototype.skipToEnd=function(){this.pos=this.string.length},$t.prototype.skipTo=function(t){var i=this.string.indexOf(t,this.pos);if(i>-1)return this.pos=i,!0},$t.prototype.backUp=function(t){this.pos-=t},$t.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=dt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?dt(this.string,this.lineStart,this.tabSize):0)},$t.prototype.indentation=function(){return dt(this.string,null,this.tabSize)-(this.lineStart?dt(this.string,this.lineStart,this.tabSize):0)},$t.prototype.match=function(t,i,L){if("string"!=typeof t){var U=this.string.slice(this.pos).match(t);return U&&U.index>0?null:(U&&!1!==i&&(this.pos+=U[0].length),U)}var _=function(re){return L?re.toLowerCase():re};if(_(this.string.substr(this.pos,t.length))==_(t))return!1!==i&&(this.pos+=t.length),!0},$t.prototype.current=function(){return this.string.slice(this.start,this.pos)},$t.prototype.hideFirstChars=function(t,i){this.lineStart+=t;try{return i()}finally{this.lineStart-=t}},$t.prototype.lookAhead=function(t){var i=this.lineOracle;return i&&i.lookAhead(t)},$t.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var _o=function(t,i){this.state=t,this.lookAhead=i},Jt=function(t,i,L,_){this.state=i,this.doc=t,this.line=L,this.maxLookAhead=_||0,this.baseTokens=null,this.baseTokenPos=1};function xn(t,i,L,_){var N=[t.state.modeGen],U={};Cn(t,i.text,t.doc.mode,L,function(xe,Oe){return N.push(xe,Oe)},U,_);for(var re=L.state,fe=function(xe){L.baseTokens=N;var Oe=t.state.overlays[xe],Ue=1,Ve=0;L.state=!0,Cn(t,i.text,Oe.mode,L,function(ze,rt){for(var nt=Ue;Ve<ze;){var lt=N[Ue];lt>ze&&N.splice(Ue,1,ze,N[Ue+1],lt),Ue+=2,Ve=Math.min(ze,lt)}if(rt)if(Oe.opaque)N.splice(nt,Ue-nt,ze,"overlay "+rt),Ue=nt+2;else for(;nt<Ue;nt+=2){var at=N[nt+1];N[nt+1]=(at?at+" ":"")+"overlay "+rt}},U),L.state=re,L.baseTokens=null,L.baseTokenPos=1},ve=0;ve<t.state.overlays.length;++ve)fe(ve);return{styles:N,classes:U.bgClass||U.textClass?U:null}}function kr(t,i,L){if(!i.styles||i.styles[0]!=t.state.modeGen){var _=qr(t,qt(i)),N=i.text.length>t.options.maxHighlightLength&&e(t.doc.mode,_.state),U=xn(t,i,_);N&&(_.state=N),i.stateAfter=_.save(!N),i.styles=U.styles,U.classes?i.styleClasses=U.classes:i.styleClasses&&(i.styleClasses=null),L===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return i.styles}function qr(t,i,L){var _=t.doc,N=t.display;if(!_.mode.startState)return new Jt(_,!0,i);var U=function To(t,i,L){for(var _,N,U=t.doc,re=L?-1:i-(t.doc.mode.innerMode?1e3:100),fe=i;fe>re;--fe){if(fe<=U.first)return U.first;var ve=bt(U,fe-1),xe=ve.stateAfter;if(xe&&(!L||fe+(xe instanceof _o?xe.lookAhead:0)<=U.modeFrontier))return fe;var Oe=dt(ve.text,null,t.options.tabSize);(null==N||_>Oe)&&(N=fe-1,_=Oe)}return N}(t,i,L),re=U>_.first&&bt(_,U-1).stateAfter,fe=re?Jt.fromSaved(_,re,U):new Jt(_,Gi(_.mode),U);return _.iter(U,i,function(ve){Ao(t,ve.text,fe);var xe=fe.line;ve.stateAfter=xe==i-1||xe%5==0||xe>=N.viewFrom&&xe<N.viewTo?fe.save():null,fe.nextLine()}),L&&(_.modeFrontier=fe.line),fe}function Ao(t,i,L,_){var N=t.doc.mode,U=new $t(i,t.options.tabSize,L);for(U.start=U.pos=_||0,""==i&&bl(N,L.state);!U.eol();)Lo(N,U,L.state),U.start=U.pos}function bl(t,i){if(t.blankLine)return t.blankLine(i);if(t.innerMode){var L=wn(t,i);if(L.mode.blankLine)return L.mode.blankLine(L.state)}}function Lo(t,i,L,_){for(var N=0;N<10;N++){_&&(_[0]=wn(t,L).mode);var U=t.token(i,L);if(i.pos>i.start)return U}throw new Error("Mode "+t.name+" failed to advance stream.")}Jt.prototype.lookAhead=function(t){var i=this.doc.getLine(this.line+t);return null!=i&&t>this.maxLookAhead&&(this.maxLookAhead=t),i},Jt.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var i=this.baseTokens[this.baseTokenPos+1];return{type:i&&i.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},Jt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Jt.fromSaved=function(t,i,L){return i instanceof _o?new Jt(t,e(t.mode,i.state),L,i.lookAhead):new Jt(t,e(t.mode,i),L)},Jt.prototype.save=function(t){var i=!1!==t?e(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new _o(i,this.maxLookAhead):i};var kl=function(t,i,L){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=i||null,this.state=L};function jt(t,i,L,_){var re,Oe,N=t.doc,U=N.mode,fe=bt(N,(i=Lt(N,i)).line),ve=qr(t,i.line,L),xe=new $t(fe.text,t.options.tabSize,ve);for(_&&(Oe=[]);(_||xe.pos<i.ch)&&!xe.eol();)xe.start=xe.pos,re=Lo(U,xe,ve.state),_&&Oe.push(new kl(xe,re,e(N.mode,ve.state)));return _?Oe:new kl(xe,re,ve.state)}function Ot(t,i){if(t)for(;;){var L=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!L)break;t=t.slice(0,L.index)+t.slice(L.index+L[0].length);var _=L[1]?"bgClass":"textClass";null==i[_]?i[_]=L[2]:new RegExp("(?:^|\\s)"+L[2]+"(?:$|\\s)").test(i[_])||(i[_]+=" "+L[2])}return t}function Cn(t,i,L,_,N,U,re){var fe=L.flattenSpans;null==fe&&(fe=t.options.flattenSpans);var Ue,ve=0,xe=null,Oe=new $t(i,t.options.tabSize,_),Ve=t.options.addModeClass&&[null];for(""==i&&Ot(bl(L,_.state),U);!Oe.eol();){if(Oe.pos>t.options.maxHighlightLength?(fe=!1,re&&Ao(t,i,_,Oe.pos),Oe.pos=i.length,Ue=null):Ue=Ot(Lo(L,Oe,_.state,Ve),U),Ve){var ze=Ve[0].name;ze&&(Ue="m-"+(Ue?ze+" "+Ue:ze))}if(!fe||xe!=Ue){for(;ve<Oe.start;)N(ve=Math.min(Oe.start,ve+5e3),xe);xe=Ue}Oe.start=Oe.pos}for(;ve<Oe.pos;){var rt=Math.min(Oe.pos,ve+5e3);N(rt,xe),ve=rt}}var Xi=!1,Et=!1;function zr(t,i,L){this.marker=t,this.from=i,this.to=L}function Wi(t,i){if(t)for(var L=0;L<t.length;++L){var _=t[L];if(_.marker==i)return _}}function Eo(t,i){for(var L,_=0;_<t.length;++_)t[_]!=i&&(L||(L=[])).push(t[_]);return L}function hn(t,i){if(i.full)return null;var L=Hi(t,i.from.line)&&bt(t,i.from.line).markedSpans,_=Hi(t,i.to.line)&&bt(t,i.to.line).markedSpans;if(!L&&!_)return null;var N=i.from.ch,U=i.to.ch,re=0==Tt(i.from,i.to),fe=function Io(t,i,L){var _;if(t)for(var N=0;N<t.length;++N){var U=t[N],re=U.marker;if(null==U.from||(re.inclusiveLeft?U.from<=i:U.from<i)||U.from==i&&"bookmark"==re.type&&(!L||!U.marker.insertLeft)){var ve=null==U.to||(re.inclusiveRight?U.to>=i:U.to>i);(_||(_=[])).push(new zr(re,U.from,ve?null:U.to))}}return _}(L,N,re),ve=function Fl(t,i,L){var _;if(t)for(var N=0;N<t.length;++N){var U=t[N],re=U.marker;if(null==U.to||(re.inclusiveRight?U.to>=i:U.to>i)||U.from==i&&"bookmark"==re.type&&(!L||U.marker.insertLeft)){var ve=null==U.from||(re.inclusiveLeft?U.from<=i:U.from<i);(_||(_=[])).push(new zr(re,ve?null:U.from-i,null==U.to?null:U.to-i))}}return _}(_,U,re),xe=1==i.text.length,Oe=St(i.text).length+(xe?N:0);if(fe)for(var Ue=0;Ue<fe.length;++Ue){var Ve=fe[Ue];if(null==Ve.to){var ze=Wi(ve,Ve.marker);ze?xe&&(Ve.to=null==ze.to?null:ze.to+Oe):Ve.to=N}}if(ve)for(var rt=0;rt<ve.length;++rt){var nt=ve[rt];if(null!=nt.to&&(nt.to+=Oe),null==nt.from)Wi(fe,nt.marker)||(nt.from=Oe,xe&&(fe||(fe=[])).push(nt));else nt.from+=Oe,xe&&(fe||(fe=[])).push(nt)}fe&&(fe=qi(fe)),ve&&ve!=fe&&(ve=qi(ve));var at=[fe];if(!xe){var ft,pt=i.text.length-2;if(pt>0&&fe)for(var gt=0;gt<fe.length;++gt)null==fe[gt].to&&(ft||(ft=[])).push(new zr(fe[gt].marker,null,null));for(var _t=0;_t<pt;++_t)at.push(ft);at.push(ve)}return at}function qi(t){for(var i=0;i<t.length;++i){var L=t[i];null!=L.from&&L.from==L.to&&!1!==L.marker.clearWhenEmpty&&t.splice(i--,1)}return t.length?t:null}function zi(t){var i=t.markedSpans;if(i){for(var L=0;L<i.length;++L)i[L].marker.detachLine(t);t.markedSpans=null}}function Jr(t,i){if(i){for(var L=0;L<i.length;++L)i[L].marker.attachLine(t);t.markedSpans=i}}function Pr(t){return t.inclusiveLeft?-1:0}function Sr(t){return t.inclusiveRight?1:0}function Ar(t,i){var L=t.lines.length-i.lines.length;if(0!=L)return L;var _=t.find(),N=i.find(),U=Tt(_.from,N.from)||Pr(t)-Pr(i);return U?-U:Tt(_.to,N.to)||Sr(t)-Sr(i)||i.id-t.id}function _l(t,i){var _,L=Et&&t.markedSpans;if(L)for(var N=void 0,U=0;U<L.length;++U)(N=L[U]).marker.collapsed&&null==(i?N.from:N.to)&&(!_||Ar(_,N.marker)<0)&&(_=N.marker);return _}function ms(t){return _l(t,!0)}function No(t){return _l(t,!1)}function ua(t,i){var _,L=Et&&t.markedSpans;if(L)for(var N=0;N<L.length;++N){var U=L[N];U.marker.collapsed&&(null==U.from||U.from<i)&&(null==U.to||U.to>i)&&(!_||Ar(_,U.marker)<0)&&(_=U.marker)}return _}function ws(t,i,L,_,N){var U=bt(t,i),re=Et&&U.markedSpans;if(re)for(var fe=0;fe<re.length;++fe){var ve=re[fe];if(ve.marker.collapsed){var xe=ve.marker.find(0),Oe=Tt(xe.from,L)||Pr(ve.marker)-Pr(N),Ue=Tt(xe.to,_)||Sr(ve.marker)-Sr(N);if(!(Oe>=0&&Ue<=0||Oe<=0&&Ue>=0)&&(Oe<=0&&(ve.marker.inclusiveRight&&N.inclusiveLeft?Tt(xe.to,L)>=0:Tt(xe.to,L)>0)||Oe>=0&&(ve.marker.inclusiveRight&&N.inclusiveLeft?Tt(xe.from,_)<=0:Tt(xe.from,_)<0)))return!0}}}function rn(t){for(var i;i=ms(t);)t=i.find(-1,!0).line;return t}function xs(t,i){var L=bt(t,i),_=rn(L);return L==_?i:qt(_)}function Cs(t,i){if(i>t.lastLine())return i;var _,L=bt(t,i);if(!Rn(t,L))return i;for(;_=No(L);)L=_.find(1,!0).line;return qt(L)+1}function Rn(t,i){var L=Et&&i.markedSpans;if(L)for(var _=void 0,N=0;N<L.length;++N)if((_=L[N]).marker.collapsed){if(null==_.from)return!0;if(!_.marker.widgetNode&&0==_.from&&_.marker.inclusiveLeft&&Mo(t,i,_))return!0}}function Mo(t,i,L){if(null==L.to){var _=L.marker.find(1,!0);return Mo(t,_.line,Wi(_.line.markedSpans,L.marker))}if(L.marker.inclusiveRight&&L.to==i.text.length)return!0;for(var N=void 0,U=0;U<i.markedSpans.length;++U)if((N=i.markedSpans[U]).marker.collapsed&&!N.marker.widgetNode&&N.from==L.to&&(null==N.to||N.to!=L.from)&&(N.marker.inclusiveLeft||L.marker.inclusiveRight)&&Mo(t,i,N))return!0}function kn(t){for(var i=0,L=(t=rn(t)).parent,_=0;_<L.lines.length;++_){var N=L.lines[_];if(N==t)break;i+=N.height}for(var U=L.parent;U;U=(L=U).parent)for(var re=0;re<U.children.length;++re){var fe=U.children[re];if(fe==L)break;i+=fe.height}return i}function jo(t){if(0==t.height)return 0;for(var L,i=t.text.length,_=t;L=ms(_);){var N=L.find(0,!0);_=N.from.line,i+=N.from.ch-N.to.ch}for(_=t;L=No(_);){var U=L.find(0,!0);i-=_.text.length-U.from.ch,i+=(_=U.to.line).text.length-U.to.ch}return i}function bs(t){var i=t.display,L=t.doc;i.maxLine=bt(L,L.first),i.maxLineLength=jo(i.maxLine),i.maxLineChanged=!0,L.iter(function(_){var N=jo(_);N>i.maxLineLength&&(i.maxLineLength=N,i.maxLine=_)})}var nn=function(t,i,L){this.text=t,Jr(this,i),this.height=L?L(this):1};function wi(t){t.parent=null,zi(t)}nn.prototype.lineNo=function(){return qt(this)},Ne(nn);var Ss={},fa={};function Ll(t,i){if(!t||/^\s*$/.test(t))return null;var L=i.addModeClass?fa:Ss;return L[t]||(L[t]=t.replace(/\S+/g,"cm-$&"))}function Tl(t,i){var L=We("span",null,null,I?"padding-right: .1px":null),_={pre:We("pre",[L],"CodeMirror-line"),content:L,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};i.measure={};for(var N=0;N<=(i.rest?i.rest.length:0);N++){var U=N?i.rest[N-1]:i.line,re=void 0;_.pos=0,_.addToken=El,Rt(t.display.measure)&&(re=X(U,t.doc.direction))&&(_.addToken=Il(_.addToken,re)),_.map=[],Oo(U,_,kr(t,U,i!=t.display.externalMeasured&&qt(U))),U.styleClasses&&(U.styleClasses.bgClass&&(_.bgClass=Ae(U.styleClasses.bgClass,_.bgClass||"")),U.styleClasses.textClass&&(_.textClass=Ae(U.styleClasses.textClass,_.textClass||""))),0==_.map.length&&_.map.push(0,0,_.content.appendChild(Nt(t.display.measure))),0==N?(i.measure.map=_.map,i.measure.cache={}):((i.measure.maps||(i.measure.maps=[])).push(_.map),(i.measure.caches||(i.measure.caches=[])).push({}))}if(I){var ve=_.content.lastChild;(/\bcm-tab\b/.test(ve.className)||ve.querySelector&&ve.querySelector(".cm-tab"))&&(_.content.className="cm-tab-wrap-hack")}return we(t,"renderLine",t,i.line,_.pre),_.pre.className&&(_.textClass=Ae(_.pre.className,_.textClass||"")),_}function ca(t){var i=Se("span","\u2022","cm-invalidchar");return i.title="\\u"+t.charCodeAt(0).toString(16),i.setAttribute("aria-label",i.title),i}function El(t,i,L,_,N,U,re){if(i){var Oe,fe=t.splitSpaces?function ha(t,i){if(t.length>1&&!/  /.test(t))return t;for(var L=i,_="",N=0;N<t.length;N++){var U=t.charAt(N);" "==U&&L&&(N==t.length-1||32==t.charCodeAt(N+1))&&(U="\xa0"),_+=U,L=" "==U}return _}(i,t.trailingSpace):i,ve=t.cm.state.specialChars,xe=!1;if(ve.test(i)){Oe=document.createDocumentFragment();for(var Ue=0;;){ve.lastIndex=Ue;var Ve=ve.exec(i),ze=Ve?Ve.index-Ue:i.length-Ue;if(ze){var rt=document.createTextNode(fe.slice(Ue,Ue+ze));E&&F<9?Oe.appendChild(Se("span",[rt])):Oe.appendChild(rt),t.map.push(t.pos,t.pos+ze,rt),t.col+=ze,t.pos+=ze}if(!Ve)break;Ue+=ze+1;var nt=void 0;if("\t"==Ve[0]){var lt=t.cm.options.tabSize,at=lt-t.col%lt;(nt=Oe.appendChild(Se("span",It(at),"cm-tab"))).setAttribute("role","presentation"),nt.setAttribute("cm-text","\t"),t.col+=at}else"\r"==Ve[0]||"\n"==Ve[0]?((nt=Oe.appendChild(Se("span","\r"==Ve[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",Ve[0]),t.col+=1):((nt=t.cm.options.specialCharPlaceholder(Ve[0])).setAttribute("cm-text",Ve[0]),E&&F<9?Oe.appendChild(Se("span",[nt])):Oe.appendChild(nt),t.col+=1);t.map.push(t.pos,t.pos+1,nt),t.pos++}}else t.col+=i.length,Oe=document.createTextNode(fe),t.map.push(t.pos,t.pos+i.length,Oe),E&&F<9&&(xe=!0),t.pos+=i.length;if(t.trailingSpace=32==fe.charCodeAt(i.length-1),L||_||N||xe||U||re){var pt=L||"";_&&(pt+=_),N&&(pt+=N);var ft=Se("span",[Oe],pt,U);if(re)for(var gt in re)re.hasOwnProperty(gt)&&"style"!=gt&&"class"!=gt&&ft.setAttribute(gt,re[gt]);return t.content.appendChild(ft)}t.content.appendChild(Oe)}}function Il(t,i){return function(L,_,N,U,re,fe,ve){N=N?N+" cm-force-border":"cm-force-border";for(var xe=L.pos,Oe=xe+_.length;;){for(var Ue=void 0,Ve=0;Ve<i.length&&!((Ue=i[Ve]).to>xe&&Ue.from<=xe);Ve++);if(Ue.to>=Oe)return t(L,_,N,U,re,fe,ve);t(L,_.slice(0,Ue.to-xe),N,U,null,fe,ve),U=null,_=_.slice(Ue.to-xe),xe=Ue.to}}}function Nl(t,i,L,_){var N=!_&&L.widgetNode;N&&t.map.push(t.pos,t.pos+i,N),!_&&t.cm.display.input.needsContentAttribute&&(N||(N=t.content.appendChild(document.createElement("span"))),N.setAttribute("cm-marker",L.id)),N&&(t.cm.display.input.setUneditable(N),t.content.appendChild(N)),t.pos+=i,t.trailingSpace=!1}function Oo(t,i,L){var _=t.markedSpans,N=t.text,U=0;if(_)for(var Ue,Ve,rt,nt,lt,at,pt,fe=N.length,ve=0,xe=1,Oe="",ze=0;;){if(ze==ve){rt=nt=lt=Ve="",pt=null,at=null,ze=1/0;for(var ft=[],gt=void 0,_t=0;_t<_.length;++_t){var kt=_[_t],Mt=kt.marker;if("bookmark"==Mt.type&&kt.from==ve&&Mt.widgetNode)ft.push(Mt);else if(kt.from<=ve&&(null==kt.to||kt.to>ve||Mt.collapsed&&kt.to==ve&&kt.from==ve)){if(null!=kt.to&&kt.to!=ve&&ze>kt.to&&(ze=kt.to,nt=""),Mt.className&&(rt+=" "+Mt.className),Mt.css&&(Ve=(Ve?Ve+";":"")+Mt.css),Mt.startStyle&&kt.from==ve&&(lt+=" "+Mt.startStyle),Mt.endStyle&&kt.to==ze&&(gt||(gt=[])).push(Mt.endStyle,kt.to),Mt.title&&((pt||(pt={})).title=Mt.title),Mt.attributes)for(var zt in Mt.attributes)(pt||(pt={}))[zt]=Mt.attributes[zt];Mt.collapsed&&(!at||Ar(at.marker,Mt)<0)&&(at=kt)}else kt.from>ve&&ze>kt.from&&(ze=kt.from)}if(gt)for(var yr=0;yr<gt.length;yr+=2)gt[yr+1]==ze&&(nt+=" "+gt[yr]);if(!at||at.from==ve)for(var Vt=0;Vt<ft.length;++Vt)Nl(i,0,ft[Vt]);if(at&&(at.from||0)==ve){if(Nl(i,(null==at.to?fe+1:at.to)-ve,at.marker,null==at.from),null==at.to)return;at.to==ve&&(at=!1)}}if(ve>=fe)break;for(var Gr=Math.min(fe,ze);;){if(Oe){var Ir=ve+Oe.length;if(!at){var lr=Ir>Gr?Oe.slice(0,Gr-ve):Oe;i.addToken(i,lr,Ue?Ue+rt:rt,lt,ve+lr.length==ze?nt:"",Ve,pt)}if(Ir>=Gr){Oe=Oe.slice(Gr-ve),ve=Gr;break}ve=Ir,lt=""}Oe=N.slice(U,U=L[xe++]),Ue=Ll(L[xe++],i.cm.options)}}else for(var re=1;re<L.length;re+=2)i.addToken(i,N.slice(U,U=L[re]),Ll(L[re+1],i.cm.options))}function Fs(t,i,L){this.line=i,this.rest=function aa(t){for(var i,L;i=No(t);)t=i.find(1,!0).line,(L||(L=[])).push(t);return L}(i),this.size=this.rest?qt(St(this.rest))-L+1:1,this.node=this.text=null,this.hidden=Rn(t,i)}function ei(t,i,L){for(var N,_=[],U=i;U<L;U=N){var re=new Fs(t.doc,bt(t.doc,U),U);N=U+re.size,_.push(re)}return _}var ti=null;var Ji=null;function hr(t,i){var L=te(t,i);if(L.length){var N,_=Array.prototype.slice.call(arguments,2);ti?N=ti.delayedCallbacks:Ji?N=Ji:(N=Ji=[],setTimeout(ga,0));for(var U=function(fe){N.push(function(){return L[fe].apply(null,_)})},re=0;re<L.length;++re)U(re)}}function ga(){var t=Ji;Ji=null;for(var i=0;i<t.length;++i)t[i]()}function _s(t,i,L,_){for(var N=0;N<i.changes.length;N++){var U=i.changes[N];"text"==U?va(t,i):"gutter"==U?Dl(t,i,L,_):"class"==U?Do(t,i):"widget"==U&&Rl(t,i,_)}i.changes=null}function Ki(t){return t.node==t.text&&(t.node=Se("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),E&&F<8&&(t.node.style.zIndex=2)),t.node}function Ol(t,i){var L=t.display.externalMeasured;return L&&L.line==i.line?(t.display.externalMeasured=null,i.measure=L.measure,L.built):Tl(t,i)}function va(t,i){var L=i.text.className,_=Ol(t,i);i.text==i.node&&(i.node=_.pre),i.text.parentNode.replaceChild(_.pre,i.text),i.text=_.pre,_.bgClass!=i.bgClass||_.textClass!=i.textClass?(i.bgClass=_.bgClass,i.textClass=_.textClass,Do(t,i)):L&&(i.text.className=L)}function Do(t,i){(function jl(t,i){var L=i.bgClass?i.bgClass+" "+(i.line.bgClass||""):i.line.bgClass;if(L&&(L+=" CodeMirror-linebackground"),i.background)L?i.background.className=L:(i.background.parentNode.removeChild(i.background),i.background=null);else if(L){var _=Ki(i);i.background=_.insertBefore(Se("div",null,L),_.firstChild),t.display.input.setUneditable(i.background)}})(t,i),i.line.wrapClass?Ki(i).className=i.line.wrapClass:i.node!=i.text&&(i.node.className="");var L=i.textClass?i.textClass+" "+(i.line.textClass||""):i.line.textClass;i.text.className=L||""}function Dl(t,i,L,_){if(i.gutter&&(i.node.removeChild(i.gutter),i.gutter=null),i.gutterBackground&&(i.node.removeChild(i.gutterBackground),i.gutterBackground=null),i.line.gutterClass){var N=Ki(i);i.gutterBackground=Se("div",null,"CodeMirror-gutter-background "+i.line.gutterClass,"left: "+(t.options.fixedGutter?_.fixedPos:-_.gutterTotalWidth)+"px; width: "+_.gutterTotalWidth+"px"),t.display.input.setUneditable(i.gutterBackground),N.insertBefore(i.gutterBackground,i.text)}var U=i.line.gutterMarkers;if(t.options.lineNumbers||U){var re=Ki(i),fe=i.gutter=Se("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?_.fixedPos:-_.gutterTotalWidth)+"px");if(fe.setAttribute("aria-hidden","true"),t.display.input.setUneditable(fe),re.insertBefore(fe,i.text),i.line.gutterClass&&(fe.className+=" "+i.line.gutterClass),t.options.lineNumbers&&(!U||!U["CodeMirror-linenumbers"])&&(i.lineNumber=fe.appendChild(Se("div",gs(t.options,L),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+_.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),U)for(var ve=0;ve<t.display.gutterSpecs.length;++ve){var xe=t.display.gutterSpecs[ve].className,Oe=U.hasOwnProperty(xe)&&U[xe];Oe&&fe.appendChild(Se("div",[Oe],"CodeMirror-gutter-elt","left: "+_.gutterLeft[xe]+"px; width: "+_.gutterWidth[xe]+"px"))}}}function Rl(t,i,L){i.alignable&&(i.alignable=null);for(var _=Y("CodeMirror-linewidget"),N=i.node.firstChild,U=void 0;N;N=U)U=N.nextSibling,_.test(N.className)&&i.node.removeChild(N);As(t,i,L)}function ya(t,i,L,_){var N=Ol(t,i);return i.text=i.node=N.pre,N.bgClass&&(i.bgClass=N.bgClass),N.textClass&&(i.textClass=N.textClass),Do(t,i),Dl(t,i,L,_),As(t,i,_),i.node}function As(t,i,L){if(Bl(t,i.line,i,L,!0),i.rest)for(var _=0;_<i.rest.length;_++)Bl(t,i.rest[_],i,L,!1)}function Bl(t,i,L,_,N){if(i.widgets)for(var U=Ki(L),re=0,fe=i.widgets;re<fe.length;++re){var ve=fe[re],xe=Se("div",[ve.node],"CodeMirror-linewidget"+(ve.className?" "+ve.className:""));ve.handleMouseEvents||xe.setAttribute("cm-ignore-events","true"),Pl(ve,xe,L,_),t.display.input.setUneditable(xe),N&&ve.above?U.insertBefore(xe,L.gutter||L.text):U.appendChild(xe),hr(ve,"redraw")}}function Pl(t,i,L,_){if(t.noHScroll){(L.alignable||(L.alignable=[])).push(i);var N=_.wrapperWidth;i.style.left=_.fixedPos+"px",t.coverGutter||(N-=_.gutterTotalWidth,i.style.paddingLeft=_.gutterTotalWidth+"px"),i.style.width=N+"px"}t.coverGutter&&(i.style.zIndex=5,i.style.position="relative",t.noHScroll||(i.style.marginLeft=-_.gutterTotalWidth+"px"))}function Vi(t){if(null!=t.height)return t.height;var i=t.doc.cm;if(!i)return 0;if(!Fe(document.body,t.node)){var L="position: relative;";t.coverGutter&&(L+="margin-left: -"+i.display.gutters.offsetWidth+"px;"),t.noHScroll&&(L+="width: "+i.display.wrapper.clientWidth+"px;"),_e(i.display.measure,Se("div",[t.node],null,L))}return t.height=t.node.parentNode.offsetHeight}function Sn(t,i){for(var L=Ke(i);L!=t.wrapper;L=L.parentNode)if(!L||1==L.nodeType&&"true"==L.getAttribute("cm-ignore-events")||L.parentNode==t.sizer&&L!=t.mover)return!0}function Ro(t){return t.lineSpace.offsetTop}function Bo(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Ql(t){if(t.cachedPaddingH)return t.cachedPaddingH;var i=_e(t.measure,Se("pre","x","CodeMirror-line-like")),L=window.getComputedStyle?window.getComputedStyle(i):i.currentStyle,_={left:parseInt(L.paddingLeft),right:parseInt(L.paddingRight)};return!isNaN(_.left)&&!isNaN(_.right)&&(t.cachedPaddingH=_),_}function on(t){return 50-t.display.nativeBarWidth}function ri(t){return t.display.scroller.clientWidth-on(t)-t.display.barWidth}function Ls(t){return t.display.scroller.clientHeight-on(t)-t.display.barHeight}function Gl(t,i,L){if(t.line==i)return{map:t.measure.map,cache:t.measure.cache};if(t.rest){for(var _=0;_<t.rest.length;_++)if(t.rest[_]==i)return{map:t.measure.maps[_],cache:t.measure.caches[_]};for(var N=0;N<t.rest.length;N++)if(qt(t.rest[N])>L)return{map:t.measure.maps[N],cache:t.measure.caches[N],before:!0}}}function Xl(t,i,L,_){return pn(t,ni(t,i),L,_)}function Ts(t,i){if(i>=t.display.viewFrom&&i<t.display.viewTo)return t.display.view[Pn(t,i)];var L=t.display.externalMeasured;return L&&i>=L.lineN&&i<L.lineN+L.size?L:void 0}function ni(t,i){var L=qt(i),_=Ts(t,L);_&&!_.text?_=null:_&&_.changes&&(_s(t,_,L,Bn(t)),t.curOp.forceUpdate=!0),_||(_=function Hl(t,i){var L=qt(i=rn(i)),_=t.display.externalMeasured=new Fs(t.doc,i,L);_.lineN=L;var N=_.built=Tl(t,_);return _.text=N.pre,_e(t.display.lineMeasure,N.pre),_}(t,i));var N=Gl(_,i,L);return{line:i,view:_,rect:null,map:N.map,cache:N.cache,before:N.before,hasHeights:!1}}function pn(t,i,L,_,N){i.before&&(L=-1);var re,U=L+(_||"");return i.cache.hasOwnProperty(U)?re=i.cache[U]:(i.rect||(i.rect=i.view.text.getBoundingClientRect()),i.hasHeights||(function Ul(t,i,L){var _=t.options.lineWrapping,N=_&&ri(t);if(!i.measure.heights||_&&i.measure.width!=N){var U=i.measure.heights=[];if(_){i.measure.width=N;for(var re=i.text.firstChild.getClientRects(),fe=0;fe<re.length-1;fe++){var ve=re[fe],xe=re[fe+1];Math.abs(ve.bottom-xe.bottom)>2&&U.push((ve.bottom+xe.top)/2-L.top)}}U.push(L.bottom-L.top)}}(t,i.view,i.rect),i.hasHeights=!0),re=function ma(t,i,L,_){var xe,N=Yi(i.map,L,_),U=N.node,re=N.start,fe=N.end,ve=N.collapse;if(3==U.nodeType){for(var Oe=0;Oe<4;Oe++){for(;re&&ie(i.line.text.charAt(N.coverStart+re));)--re;for(;N.coverStart+fe<N.coverEnd&&ie(i.line.text.charAt(N.coverStart+fe));)++fe;if((xe=E&&F<9&&0==re&&fe==N.coverEnd-N.coverStart?U.parentNode.getBoundingClientRect():ql($e(U,re,fe).getClientRects(),_)).left||xe.right||0==re)break;fe=re,re-=1,ve="right"}E&&F<11&&(xe=function Po(t,i){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function Br(t){if(null!=wr)return wr;var i=_e(t,Se("span","x")),L=i.getBoundingClientRect(),_=$e(i,0,1).getBoundingClientRect();return wr=Math.abs(L.left-_.left)>1}(t))return i;var L=screen.logicalXDPI/screen.deviceXDPI,_=screen.logicalYDPI/screen.deviceYDPI;return{left:i.left*L,right:i.right*L,top:i.top*_,bottom:i.bottom*_}}(t.display.measure,xe))}else{var Ue;re>0&&(ve=_="right"),xe=t.options.lineWrapping&&(Ue=U.getClientRects()).length>1?Ue["right"==_?Ue.length-1:0]:U.getBoundingClientRect()}if(E&&F<9&&!re&&(!xe||!xe.left&&!xe.right)){var Ve=U.parentNode.getClientRects()[0];xe=Ve?{left:Ve.left,right:Ve.left+Ci(t.display),top:Ve.top,bottom:Ve.bottom}:Wl}for(var ze=xe.top-i.rect.top,rt=xe.bottom-i.rect.top,nt=(ze+rt)/2,lt=i.view.measure.heights,at=0;at<lt.length-1&&!(nt<lt[at]);at++);var pt=at?lt[at-1]:0,ft=lt[at],gt={left:("right"==ve?xe.right:xe.left)-i.rect.left,right:("left"==ve?xe.left:xe.right)-i.rect.left,top:pt,bottom:ft};return!xe.left&&!xe.right&&(gt.bogus=!0),t.options.singleCursorHeightPerLine||(gt.rtop=ze,gt.rbottom=rt),gt}(t,i,L,_),re.bogus||(i.cache[U]=re)),{left:re.left,right:re.right,top:N?re.rtop:re.top,bottom:N?re.rbottom:re.bottom}}var ii,Wl={left:0,right:0,top:0,bottom:0};function Yi(t,i,L){for(var _,N,U,re,fe,ve,xe=0;xe<t.length;xe+=3)if(fe=t[xe],ve=t[xe+1],i<fe?(N=0,U=1,re="left"):i<ve?U=(N=i-fe)+1:(xe==t.length-3||i==ve&&t[xe+3]>i)&&(N=(U=ve-fe)-1,i>=ve&&(re="right")),null!=N){if(_=t[xe+2],fe==ve&&L==(_.insertLeft?"left":"right")&&(re=L),"left"==L&&0==N)for(;xe&&t[xe-2]==t[xe-3]&&t[xe-1].insertLeft;)_=t[2+(xe-=3)],re="left";if("right"==L&&N==ve-fe)for(;xe<t.length-3&&t[xe+3]==t[xe+4]&&!t[xe+5].insertLeft;)_=t[(xe+=3)+2],re="right";break}return{node:_,start:N,end:U,collapse:re,coverStart:fe,coverEnd:ve}}function ql(t,i){var L=Wl;if("left"==i)for(var _=0;_<t.length&&(L=t[_]).left==L.right;_++);else for(var N=t.length-1;N>=0&&(L=t[N]).left==L.right;N--);return L}function Es(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var i=0;i<t.rest.length;i++)t.measure.caches[i]={}}function Zi(t){t.display.externalMeasure=null,ke(t.display.lineMeasure);for(var i=0;i<t.display.view.length;i++)Es(t.display.view[i])}function xi(t){Zi(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function zl(){return j&&ce?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Jl(){return j&&ce?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function sn(t){var L=rn(t).widgets,_=0;if(L)for(var N=0;N<L.length;++N)L[N].above&&(_+=Vi(L[N]));return _}function Kr(t,i,L,_,N){if(!N){var U=sn(i);L.top+=U,L.bottom+=U}if("line"==_)return L;_||(_="local");var re=kn(i);if("local"==_?re+=Ro(t.display):re-=t.display.viewOffset,"page"==_||"window"==_){var fe=t.display.lineSpace.getBoundingClientRect();re+=fe.top+("window"==_?0:Jl());var ve=fe.left+("window"==_?0:zl());L.left+=ve,L.right+=ve}return L.top+=re,L.bottom+=re,L}function Kl(t,i,L){if("div"==L)return i;var _=i.left,N=i.top;if("page"==L)_-=zl(),N-=Jl();else if("local"==L||!L){var U=t.display.sizer.getBoundingClientRect();_+=U.left,N+=U.top}var re=t.display.lineSpace.getBoundingClientRect();return{left:_-re.left,top:N-re.top}}function Qo(t,i,L,_,N){return _||(_=bt(t.doc,i.line)),Kr(t,_,Xl(t,_,i.ch,N),L)}function Vr(t,i,L,_,N,U){function re(rt,nt){var lt=pn(t,N,rt,nt?"right":"left",U);return nt?lt.left=lt.right:lt.right=lt.left,Kr(t,_,lt,L)}_=_||bt(t.doc,i.line),N||(N=ni(t,_));var fe=X(_,t.doc.direction),ve=i.ch,xe=i.sticky;if(ve>=_.text.length?(ve=_.text.length,xe="before"):ve<=0&&(ve=0,xe="after"),!fe)return re("before"==xe?ve-1:ve,"before"==xe);function Oe(rt,nt,lt){return re(lt?rt-1:rt,1==fe[nt].level!=lt)}var Ue=G(fe,ve,xe),Ve=Qe,ze=Oe(ve,Ue,"before"==xe);return null!=Ve&&(ze.other=Oe(ve,Ve,"before"!=xe)),ze}function Vl(t,i){var L=0;i=Lt(t.doc,i),t.options.lineWrapping||(L=Ci(t.display)*i.ch);var _=bt(t.doc,i.line),N=kn(_)+Ro(t.display);return{left:L,right:L,top:N,bottom:N+_.height}}function Uo(t,i,L,_,N){var U=ot(t,i,L);return U.xRel=N,_&&(U.outside=_),U}function Is(t,i,L){var _=t.doc;if((L+=t.display.viewOffset)<0)return Uo(_.first,0,null,-1,-1);var N=jn(_,L),U=_.first+_.size-1;if(N>U)return Uo(_.first+_.size-1,bt(_,U).text.length,null,1,1);i<0&&(i=0);for(var re=bt(_,N);;){var fe=wa(t,re,N,i,L),ve=ua(re,fe.ch+(fe.xRel>0||fe.outside>0?1:0));if(!ve)return fe;var xe=ve.find(1);if(xe.line==N)return xe;re=bt(_,N=xe.line)}}function Ns(t,i,L,_){_-=sn(i);var N=i.text.length,U=Te(function(re){return pn(t,L,re-1).bottom<=_},N,0);return{begin:U,end:N=Te(function(re){return pn(t,L,re).top>_},U,N)}}function Yl(t,i,L,_){return L||(L=ni(t,i)),Ns(t,i,L,Kr(t,i,pn(t,L,_),"line").top)}function Go(t,i,L,_){return!(t.bottom<=L)&&(t.top>L||(_?t.left:t.right)>i)}function wa(t,i,L,_,N){N-=kn(i);var U=ni(t,i),re=sn(i),fe=0,ve=i.text.length,xe=!0,Oe=X(i,t.doc.direction);if(Oe){var Ue=(t.options.lineWrapping?Zl:xa)(t,i,L,U,Oe,_,N);fe=(xe=1!=Ue.level)?Ue.from:Ue.to-1,ve=xe?Ue.to:Ue.from-1}var nt,lt,Ve=null,ze=null,rt=Te(function(_t){var kt=pn(t,U,_t);return kt.top+=re,kt.bottom+=re,!!Go(kt,_,N,!1)&&(kt.top<=N&&kt.left<=_&&(Ve=_t,ze=kt),!0)},fe,ve),at=!1;if(ze){var pt=_-ze.left<ze.right-_,ft=pt==xe;rt=Ve+(ft?0:1),lt=ft?"after":"before",nt=pt?ze.left:ze.right}else{!xe&&(rt==ve||rt==fe)&&rt++,lt=0==rt?"after":rt==i.text.length?"before":pn(t,U,rt-(xe?1:0)).bottom+re<=N==xe?"after":"before";var gt=Vr(t,ot(L,rt,lt),"line",i,U);nt=gt.left,at=N<gt.top?-1:N>=gt.bottom?1:0}return Uo(L,rt=be(i.text,rt,1),lt,at,_-nt)}function xa(t,i,L,_,N,U,re){var fe=Te(function(Ue){var Ve=N[Ue],ze=1!=Ve.level;return Go(Vr(t,ot(L,ze?Ve.to:Ve.from,ze?"before":"after"),"line",i,_),U,re,!0)},0,N.length-1),ve=N[fe];if(fe>0){var xe=1!=ve.level,Oe=Vr(t,ot(L,xe?ve.from:ve.to,xe?"after":"before"),"line",i,_);Go(Oe,U,re,!0)&&Oe.top>re&&(ve=N[fe-1])}return ve}function Zl(t,i,L,_,N,U,re){var fe=Ns(t,i,_,re),ve=fe.begin,xe=fe.end;/\s/.test(i.text.charAt(xe-1))&&xe--;for(var Oe=null,Ue=null,Ve=0;Ve<N.length;Ve++){var ze=N[Ve];if(!(ze.from>=xe||ze.to<=ve)){var nt=pn(t,_,1!=ze.level?Math.min(xe,ze.to)-1:Math.max(ve,ze.from)).right,lt=nt<U?U-nt+1e9:nt-U;(!Oe||Ue>lt)&&(Oe=ze,Ue=lt)}}return Oe||(Oe=N[N.length-1]),Oe.from<ve&&(Oe={from:ve,to:Oe.to,level:Oe.level}),Oe.to>xe&&(Oe={from:Oe.from,to:xe,level:Oe.level}),Oe}function oi(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==ii){ii=Se("pre",null,"CodeMirror-line-like");for(var i=0;i<49;++i)ii.appendChild(document.createTextNode("x")),ii.appendChild(Se("br"));ii.appendChild(document.createTextNode("x"))}_e(t.measure,ii);var L=ii.offsetHeight/50;return L>3&&(t.cachedTextHeight=L),ke(t.measure),L||1}function Ci(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var i=Se("span","xxxxxxxxxx"),L=Se("pre",[i],"CodeMirror-line-like");_e(t.measure,L);var _=i.getBoundingClientRect(),N=(_.right-_.left)/10;return N>2&&(t.cachedCharWidth=N),N||10}function Bn(t){for(var i=t.display,L={},_={},N=i.gutters.clientLeft,U=i.gutters.firstChild,re=0;U;U=U.nextSibling,++re){var fe=t.display.gutterSpecs[re].className;L[fe]=U.offsetLeft+U.clientLeft+N,_[fe]=U.clientWidth}return{fixedPos:$i(i),gutterTotalWidth:i.gutters.offsetWidth,gutterLeft:L,gutterWidth:_,wrapperWidth:i.wrapper.clientWidth}}function $i(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function si(t){var i=oi(t.display),L=t.options.lineWrapping,_=L&&Math.max(5,t.display.scroller.clientWidth/Ci(t.display)-3);return function(N){if(Rn(t.doc,N))return 0;var U=0;if(N.widgets)for(var re=0;re<N.widgets.length;re++)N.widgets[re].height&&(U+=N.widgets[re].height);return L?U+(Math.ceil(N.text.length/_)||1)*i:U+i}}function eo(t){var i=t.doc,L=si(t);i.iter(function(_){var N=L(_);N!=_.height&&tn(_,N)})}function li(t,i,L,_){var N=t.display;if(!L&&"true"==Ke(i).getAttribute("cm-not-content"))return null;var U,re,fe=N.lineSpace.getBoundingClientRect();try{U=i.clientX-fe.left,re=i.clientY-fe.top}catch(Ue){return null}var xe,ve=Is(t,U,re);if(_&&ve.xRel>0&&(xe=bt(t.doc,ve.line).text).length==ve.ch){var Oe=dt(xe,xe.length,t.options.tabSize)-xe.length;ve=ot(ve.line,Math.max(0,Math.round((U-Ql(t.display).left)/Ci(t.display))-Oe))}return ve}function Pn(t,i){if(i>=t.display.viewTo||(i-=t.display.viewFrom)<0)return null;for(var L=t.display.view,_=0;_<L.length;_++)if((i-=L[_].size)<0)return _}function Or(t,i,L,_){null==i&&(i=t.doc.first),null==L&&(L=t.doc.first+t.doc.size),_||(_=0);var N=t.display;if(_&&L<N.viewTo&&(null==N.updateLineNumbers||N.updateLineNumbers>i)&&(N.updateLineNumbers=i),t.curOp.viewChanged=!0,i>=N.viewTo)Et&&xs(t.doc,i)<N.viewTo&&Qn(t);else if(L<=N.viewFrom)Et&&Cs(t.doc,L+_)>N.viewFrom?Qn(t):(N.viewFrom+=_,N.viewTo+=_);else if(i<=N.viewFrom&&L>=N.viewTo)Qn(t);else if(i<=N.viewFrom){var U=Ho(t,L,L+_,1);U?(N.view=N.view.slice(U.index),N.viewFrom=U.lineN,N.viewTo+=_):Qn(t)}else if(L>=N.viewTo){var re=Ho(t,i,i,-1);re?(N.view=N.view.slice(0,re.index),N.viewTo=re.lineN):Qn(t)}else{var fe=Ho(t,i,i,-1),ve=Ho(t,L,L+_,1);fe&&ve?(N.view=N.view.slice(0,fe.index).concat(ei(t,fe.lineN,ve.lineN)).concat(N.view.slice(ve.index)),N.viewTo+=_):Qn(t)}var xe=N.externalMeasured;xe&&(L<xe.lineN?xe.lineN+=_:i<xe.lineN+xe.size&&(N.externalMeasured=null))}function Fn(t,i,L){t.curOp.viewChanged=!0;var _=t.display,N=t.display.externalMeasured;if(N&&i>=N.lineN&&i<N.lineN+N.size&&(_.externalMeasured=null),!(i<_.viewFrom||i>=_.viewTo)){var U=_.view[Pn(t,i)];if(null!=U.node){var re=U.changes||(U.changes=[]);-1==Pt(re,L)&&re.push(L)}}}function Qn(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function Ho(t,i,L,_){var U,N=Pn(t,i),re=t.display.view;if(!Et||L==t.doc.first+t.doc.size)return{index:N,lineN:L};for(var fe=t.display.viewFrom,ve=0;ve<N;ve++)fe+=re[ve].size;if(fe!=i){if(_>0){if(N==re.length-1)return null;U=fe+re[N].size-i,N++}else U=fe-i;i+=U,L+=U}for(;xs(t.doc,L)!=L;){if(N==(_<0?0:re.length-1))return null;L+=_*re[N-(_<0?1:0)].size,N+=_}return{index:N,lineN:L}}function eu(t){for(var i=t.display.view,L=0,_=0;_<i.length;_++){var N=i[_];!N.hidden&&(!N.node||N.changes)&&++L}return L}function bi(t){t.display.input.showSelection(t.display.input.prepareSelection())}function tu(t,i){void 0===i&&(i=!0);var L=t.doc,_={},N=_.cursors=document.createDocumentFragment(),U=_.selection=document.createDocumentFragment(),re=t.options.$customCursor;re&&(i=!0);for(var fe=0;fe<L.sel.ranges.length;fe++)if(i||fe!=L.sel.primIndex){var ve=L.sel.ranges[fe];if(!(ve.from().line>=t.display.viewTo||ve.to().line<t.display.viewFrom)){var xe=ve.empty();if(re){var Oe=re(t,ve);Oe&&Ms(t,Oe,N)}else(xe||t.options.showCursorWhenSelecting)&&Ms(t,ve.head,N);xe||ru(t,ve,U)}}return _}function Ms(t,i,L){var _=Vr(t,i,"div",null,null,!t.options.singleCursorHeightPerLine),N=L.appendChild(Se("div","\xa0","CodeMirror-cursor"));if(N.style.left=_.left+"px",N.style.top=_.top+"px",N.style.height=Math.max(0,_.bottom-_.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var U=Qo(t,i,"div",null,null),re=U.right-U.left;N.style.width=(re>0?re:t.defaultCharWidth())+"px"}if(_.other){var fe=L.appendChild(Se("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));fe.style.display="",fe.style.left=_.other.left+"px",fe.style.top=_.other.top+"px",fe.style.height=.85*(_.other.bottom-_.other.top)+"px"}}function ui(t,i){return t.top-i.top||t.left-i.left}function ru(t,i,L){var _=t.display,N=t.doc,U=document.createDocumentFragment(),re=Ql(t.display),fe=re.left,ve=Math.max(_.sizerWidth,ri(t)-_.sizer.offsetLeft)-re.right,xe="ltr"==N.direction;function Oe(ft,gt,_t,kt){gt<0&&(gt=0),gt=Math.round(gt),kt=Math.round(kt),U.appendChild(Se("div",null,"CodeMirror-selected","position: absolute; left: "+ft+"px;\n                             top: "+gt+"px; width: "+(null==_t?ve-ft:_t)+"px;\n                             height: "+(kt-gt)+"px"))}function Ue(ft,gt,_t){var zt,yr,kt=bt(N,ft),Mt=kt.text.length;function Vt(lr,Nr){return Qo(t,ot(ft,lr),"div",kt,Nr)}function Gr(lr,Nr,Cr){var ur=Yl(t,kt,null,lr),nr="ltr"==Nr==("after"==Cr)?"left":"right";return Vt("after"==Cr?ur.begin:ur.end-(/\s/.test(kt.text.charAt(ur.end-1))?2:1),nr)[nr]}var Ir=X(kt,N.direction);return function De(t,i,L,_){if(!t)return _(i,L,"ltr",0);for(var N=!1,U=0;U<t.length;++U){var re=t[U];(re.from<L&&re.to>i||i==L&&re.to==i)&&(_(Math.max(re.from,i),Math.min(re.to,L),1==re.level?"rtl":"ltr",U),N=!0)}N||_(i,L,"ltr")}(Ir,gt||0,null==_t?Mt:_t,function(lr,Nr,Cr,ur){var nr="ltr"==Cr,er=Vt(lr,nr?"left":"right"),Mr=Vt(Nr-1,nr?"right":"left"),Bi=null==gt&&0==lr,Nn=null==_t&&Nr==Mt,Fr=0==ur,mn=!Ir||ur==Ir.length-1;if(Mr.top-er.top<=3){var hs=(xe?Nn:Bi)&&mn,$r=(xe?Bi:Nn)&&Fr?fe:(nr?er:Mr).left,Yn=hs?ve:(nr?Mr:er).right;Oe($r,er.top,Yn-$r,er.bottom)}else{var mi,_r,Pi,ps;nr?(mi=xe&&Bi&&Fr?fe:er.left,_r=xe?ve:Gr(lr,Cr,"before"),Pi=xe?fe:Gr(Nr,Cr,"after"),ps=xe&&Nn&&mn?ve:Mr.right):(mi=xe?Gr(lr,Cr,"before"):fe,_r=!xe&&Bi&&Fr?ve:er.right,Pi=!xe&&Nn&&mn?fe:Mr.left,ps=xe?Gr(Nr,Cr,"after"):ve),Oe(mi,er.top,_r-mi,er.bottom),er.bottom<Mr.top&&Oe(fe,er.bottom,null,Mr.top),Oe(Pi,Mr.top,ps-Pi,Mr.bottom)}(!zt||ui(er,zt)<0)&&(zt=er),ui(Mr,zt)<0&&(zt=Mr),(!yr||ui(er,yr)<0)&&(yr=er),ui(Mr,yr)<0&&(yr=Mr)}),{start:zt,end:yr}}var Ve=i.from(),ze=i.to();if(Ve.line==ze.line)Ue(Ve.line,Ve.ch,ze.ch);else{var rt=bt(N,Ve.line),nt=bt(N,ze.line),lt=rn(rt)==rn(nt),at=Ue(Ve.line,Ve.ch,lt?rt.text.length+1:null).end,pt=Ue(ze.line,lt?0:null,ze.ch).start;lt&&(at.top<pt.top-2?(Oe(at.right,at.top,null,at.bottom),Oe(fe,pt.top,pt.left,pt.bottom)):Oe(at.right,at.top,pt.left-at.right,at.bottom)),at.bottom<pt.top&&Oe(fe,at.bottom,null,pt.top)}L.appendChild(U)}function ki(t){if(t.state.focused){var i=t.display;clearInterval(i.blinker);var L=!0;i.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?i.blinker=setInterval(function(){t.hasFocus()||_n(t),i.cursorDiv.style.visibility=(L=!L)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(i.cursorDiv.style.visibility="hidden")}}function js(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||Xo(t))}function Si(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&_n(t))},100)}function Xo(t,i){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(we(t,"focus",t,i),t.state.focused=!0,me(t.display.wrapper,"CodeMirror-focused"),!t.curOp&&t.display.selForContextMenu!=t.doc.sel&&(t.display.input.reset(),I&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),ki(t))}function _n(t,i){t.state.delayingBlurEvent||(t.state.focused&&(we(t,"blur",t,i),t.state.focused=!1,ge(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function to(t){for(var i=t.display,L=i.lineDiv.offsetTop,_=Math.max(0,i.scroller.getBoundingClientRect().top),N=i.lineDiv.getBoundingClientRect().top,U=0,re=0;re<i.view.length;re++){var fe=i.view[re],ve=t.options.lineWrapping,xe=void 0,Oe=0;if(!fe.hidden){if(N+=fe.line.height,E&&F<8){var Ue=fe.node.offsetTop+fe.node.offsetHeight;xe=Ue-L,L=Ue}else{var Ve=fe.node.getBoundingClientRect();xe=Ve.bottom-Ve.top,!ve&&fe.text.firstChild&&(Oe=fe.text.firstChild.getBoundingClientRect().right-Ve.left-1)}var ze=fe.line.height-xe;if((ze>.005||ze<-.005)&&(N<_&&(U-=ze),tn(fe.line,xe),nu(fe.line),fe.rest))for(var rt=0;rt<fe.rest.length;rt++)nu(fe.rest[rt]);if(Oe>t.display.sizerWidth){var nt=Math.ceil(Oe/Ci(t.display));nt>t.display.maxLineLength&&(t.display.maxLineLength=nt,t.display.maxLine=fe.line,t.display.maxLineChanged=!0)}}}Math.abs(U)>2&&(i.scroller.scrollTop+=U)}function nu(t){if(t.widgets)for(var i=0;i<t.widgets.length;++i){var L=t.widgets[i],_=L.node.parentNode;_&&(L.height=_.offsetHeight)}}function An(t,i,L){var _=L&&null!=L.top?Math.max(0,L.top):t.scroller.scrollTop;_=Math.floor(_-Ro(t));var N=L&&null!=L.bottom?L.bottom:_+t.wrapper.clientHeight,U=jn(i,_),re=jn(i,N);if(L&&L.ensure){var fe=L.ensure.from.line,ve=L.ensure.to.line;fe<U?(U=fe,re=jn(i,kn(bt(i,fe))+t.wrapper.clientHeight)):Math.min(ve,i.lastLine())>=re&&(U=jn(i,kn(bt(i,ve))-t.wrapper.clientHeight),re=ve)}return{from:U,to:Math.max(re,U+1)}}function Rs(t,i){var L=t.display,_=oi(t.display);i.top<0&&(i.top=0);var N=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:L.scroller.scrollTop,U=Ls(t),re={};i.bottom-i.top>U&&(i.bottom=i.top+U);var fe=t.doc.height+Bo(L),ve=i.top<_,xe=i.bottom>fe-_;if(i.top<N)re.scrollTop=ve?0:i.top;else if(i.bottom>N+U){var Oe=Math.min(i.top,(xe?fe:i.bottom)-U);Oe!=N&&(re.scrollTop=Oe)}var Ue=t.options.fixedGutter?0:L.gutters.offsetWidth,Ve=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:L.scroller.scrollLeft-Ue,ze=ri(t)-L.gutters.offsetWidth,rt=i.right-i.left>ze;return rt&&(i.right=i.left+ze),i.left<10?re.scrollLeft=0:i.left<Ve?re.scrollLeft=Math.max(0,i.left+Ue-(rt?0:10)):i.right>ze+Ve-3&&(re.scrollLeft=i.right+(rt?0:10)-ze),re}function Bs(t,i){null!=i&&(Wo(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+i)}function ai(t){Wo(t);var i=t.getCursor();t.curOp.scrollToPos={from:i,to:i,margin:t.options.cursorScrollMargin}}function ro(t,i,L){(null!=i||null!=L)&&Wo(t),null!=i&&(t.curOp.scrollLeft=i),null!=L&&(t.curOp.scrollTop=L)}function Wo(t){var i=t.curOp.scrollToPos;i&&(t.curOp.scrollToPos=null,ou(t,Vl(t,i.from),Vl(t,i.to),i.margin))}function ou(t,i,L,_){var N=Rs(t,{left:Math.min(i.left,L.left),top:Math.min(i.top,L.top)-_,right:Math.max(i.right,L.right),bottom:Math.max(i.bottom,L.bottom)+_});ro(t,N.scrollLeft,N.scrollTop)}function no(t,i){Math.abs(t.doc.scrollTop-i)<2||(Be||Us(t,{top:i}),su(t,i,!0),Be&&Us(t),ar(t,100))}function su(t,i,L){i=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,i)),(t.display.scroller.scrollTop!=i||L)&&(t.doc.scrollTop=i,t.display.scrollbars.setScrollTop(i),t.display.scroller.scrollTop!=i&&(t.display.scroller.scrollTop=i))}function Un(t,i,L,_){i=Math.max(0,Math.min(i,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(!(L?i==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-i)<2)||_)&&(t.doc.scrollLeft=i,hu(t),t.display.scroller.scrollLeft!=i&&(t.display.scroller.scrollLeft=i),t.display.scrollbars.setScrollLeft(i))}function io(t){var i=t.display,L=i.gutters.offsetWidth,_=Math.round(t.doc.height+Bo(t.display));return{clientHeight:i.scroller.clientHeight,viewHeight:i.wrapper.clientHeight,scrollWidth:i.scroller.scrollWidth,clientWidth:i.scroller.clientWidth,viewWidth:i.wrapper.clientWidth,barLeft:t.options.fixedGutter?L:0,docHeight:_,scrollHeight:_+on(t)+i.barHeight,nativeBarWidth:i.nativeBarWidth,gutterWidth:L}}var Gn=function(t,i,L){this.cm=L;var _=this.vert=Se("div",[Se("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),N=this.horiz=Se("div",[Se("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");_.tabIndex=N.tabIndex=-1,t(_),t(N),ne(_,"scroll",function(){_.clientHeight&&i(_.scrollTop,"vertical")}),ne(N,"scroll",function(){N.clientWidth&&i(N.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,E&&F<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Gn.prototype.update=function(t){var i=t.scrollWidth>t.clientWidth+1,L=t.scrollHeight>t.clientHeight+1,_=t.nativeBarWidth;if(L){this.vert.style.display="block",this.vert.style.bottom=i?_+"px":"0";var N=t.viewHeight-(i?_:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+N)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(i){this.horiz.style.display="block",this.horiz.style.right=L?_+"px":"0",this.horiz.style.left=t.barLeft+"px";var U=t.viewWidth-t.barLeft-(L?_:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+U)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==_&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:L?_:0,bottom:i?_:0}},Gn.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Gn.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Gn.prototype.zeroWidthHack=function(){var t=ee&&!q?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new xt,this.disableVert=new xt},Gn.prototype.enableZeroWidthBar=function(t,i,L){t.style.pointerEvents="auto",i.set(1e3,function _(){var N=t.getBoundingClientRect();("vert"==L?document.elementFromPoint(N.right-1,(N.top+N.bottom)/2):document.elementFromPoint((N.right+N.left)/2,N.bottom-1))!=t?t.style.pointerEvents="none":i.set(1e3,_)})},Gn.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var oo=function(){};function _i(t,i){i||(i=io(t));var L=t.display.barWidth,_=t.display.barHeight;fi(t,i);for(var N=0;N<4&&L!=t.display.barWidth||_!=t.display.barHeight;N++)L!=t.display.barWidth&&t.options.lineWrapping&&to(t),fi(t,io(t)),L=t.display.barWidth,_=t.display.barHeight}function fi(t,i){var L=t.display,_=L.scrollbars.update(i);L.sizer.style.paddingRight=(L.barWidth=_.right)+"px",L.sizer.style.paddingBottom=(L.barHeight=_.bottom)+"px",L.heightForcer.style.borderBottom=_.bottom+"px solid transparent",_.right&&_.bottom?(L.scrollbarFiller.style.display="block",L.scrollbarFiller.style.height=_.bottom+"px",L.scrollbarFiller.style.width=_.right+"px"):L.scrollbarFiller.style.display="",_.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(L.gutterFiller.style.display="block",L.gutterFiller.style.height=_.bottom+"px",L.gutterFiller.style.width=i.gutterWidth+"px"):L.gutterFiller.style.display=""}oo.prototype.update=function(){return{bottom:0,right:0}},oo.prototype.setScrollLeft=function(){},oo.prototype.setScrollTop=function(){},oo.prototype.clear=function(){};var qo={native:Gn,null:oo};function ci(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&ge(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new qo[t.options.scrollbarStyle](function(i){t.display.wrapper.insertBefore(i,t.display.scrollbarFiller),ne(i,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),i.setAttribute("cm-not-content","true")},function(i,L){"horizontal"==L?Un(t,i):no(t,i)},t),t.display.scrollbars.addClass&&me(t.display.wrapper,t.display.scrollbars.addClass)}var Ps=0;function hi(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ps,markArrays:null},function pa(t){ti?ti.ops.push(t):t.ownsGroup=ti={ops:[t],delayedCallbacks:[]}}(t.curOp)}function Hn(t){var i=t.curOp;i&&function Ml(t,i){var L=t.ownsGroup;if(L)try{!function da(t){var i=t.delayedCallbacks,L=0;do{for(;L<i.length;L++)i[L].call(null);for(var _=0;_<t.ops.length;_++){var N=t.ops[_];if(N.cursorActivityHandlers)for(;N.cursorActivityCalled<N.cursorActivityHandlers.length;)N.cursorActivityHandlers[N.cursorActivityCalled++].call(null,N.cm)}}while(L<i.length)}(L)}finally{ti=null,i(L)}}(i,function(L){for(var _=0;_<L.ops.length;_++)L.ops[_].cm.curOp=null;!function Ca(t){for(var i=t.ops,L=0;L<i.length;L++)lu(i[L]);for(var _=0;_<i.length;_++)ba(i[_]);for(var N=0;N<i.length;N++)uu(i[N]);for(var U=0;U<i.length;U++)ka(i[U]);for(var re=0;re<i.length;re++)au(i[re])}(L)})}function lu(t){var i=t.cm,L=i.display;(function Sa(t){var i=t.display;!i.scrollbarsClipped&&i.scroller.offsetWidth&&(i.nativeBarWidth=i.scroller.offsetWidth-i.scroller.clientWidth,i.heightForcer.style.height=on(t)+"px",i.sizer.style.marginBottom=-i.nativeBarWidth+"px",i.sizer.style.borderRightWidth=on(t)+"px",i.scrollbarsClipped=!0)})(i),t.updateMaxLine&&bs(i),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<L.viewFrom||t.scrollToPos.to.line>=L.viewTo)||L.maxLineChanged&&i.options.lineWrapping,t.update=t.mustUpdate&&new zo(i,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function ba(t){t.updatedDisplay=t.mustUpdate&&Qs(t.cm,t.update)}function uu(t){var i=t.cm,L=i.display;t.updatedDisplay&&to(i),t.barMeasure=io(i),L.maxLineChanged&&!i.options.lineWrapping&&(t.adjustWidthTo=Xl(i,L.maxLine,L.maxLine.text.length).left+3,i.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(L.scroller.clientWidth,L.sizer.offsetLeft+t.adjustWidthTo+on(i)+i.display.barWidth),t.maxScrollLeft=Math.max(0,L.sizer.offsetLeft+t.adjustWidthTo-ri(i))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=L.input.prepareSelection())}function ka(t){var i=t.cm;null!=t.adjustWidthTo&&(i.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<i.doc.scrollLeft&&Un(i,Math.min(i.display.scroller.scrollLeft,t.maxScrollLeft),!0),i.display.maxLineChanged=!1);var L=t.focus&&t.focus==oe();t.preparedSelection&&i.display.input.showSelection(t.preparedSelection,L),(t.updatedDisplay||t.startHeight!=i.doc.height)&&_i(i,t.barMeasure),t.updatedDisplay&&Jo(i,t.barMeasure),t.selectionChanged&&ki(i),i.state.focused&&t.updateInput&&i.display.input.reset(t.typing),L&&js(t.cm)}function au(t){var i=t.cm,L=i.display,_=i.doc;if(t.updatedDisplay&&fu(i,t.update),null!=L.wheelStartX&&(null!=t.scrollTop||null!=t.scrollLeft||t.scrollToPos)&&(L.wheelStartX=L.wheelStartY=null),null!=t.scrollTop&&su(i,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&Un(i,t.scrollLeft,!0,!0),t.scrollToPos){var N=function Fi(t,i,L,_){var N;null==_&&(_=0),!t.options.lineWrapping&&i==L&&(L="before"==i.sticky?ot(i.line,i.ch+1,"before"):i,i=i.ch?ot(i.line,"before"==i.sticky?i.ch-1:i.ch,"after"):i);for(var U=0;U<5;U++){var re=!1,fe=Vr(t,i),ve=L&&L!=i?Vr(t,L):fe,xe=Rs(t,N={left:Math.min(fe.left,ve.left),top:Math.min(fe.top,ve.top)-_,right:Math.max(fe.left,ve.left),bottom:Math.max(fe.bottom,ve.bottom)+_}),Oe=t.doc.scrollTop,Ue=t.doc.scrollLeft;if(null!=xe.scrollTop&&(no(t,xe.scrollTop),Math.abs(t.doc.scrollTop-Oe)>1&&(re=!0)),null!=xe.scrollLeft&&(Un(t,xe.scrollLeft),Math.abs(t.doc.scrollLeft-Ue)>1&&(re=!0)),!re)break}return N}(i,Lt(_,t.scrollToPos.from),Lt(_,t.scrollToPos.to),t.scrollToPos.margin);!function Os(t,i){if(!Le(t,"scrollCursorIntoView")){var L=t.display,_=L.sizer.getBoundingClientRect(),N=null;if(i.top+_.top<0?N=!0:i.bottom+_.top>(window.innerHeight||document.documentElement.clientHeight)&&(N=!1),null!=N&&!Z){var U=Se("div","\u200b",null,"position: absolute;\n                         top: "+(i.top-L.viewOffset-Ro(t.display))+"px;\n                         height: "+(i.bottom-i.top+on(t)+L.barHeight)+"px;\n                         left: "+i.left+"px; width: "+Math.max(2,i.right-i.left)+"px;");t.display.lineSpace.appendChild(U),U.scrollIntoView(N),t.display.lineSpace.removeChild(U)}}}(i,N)}var U=t.maybeHiddenMarkers,re=t.maybeUnhiddenMarkers;if(U)for(var fe=0;fe<U.length;++fe)U[fe].lines.length||we(U[fe],"hide");if(re)for(var ve=0;ve<re.length;++ve)re[ve].lines.length&&we(re[ve],"unhide");L.wrapper.offsetHeight&&(_.scrollTop=i.display.scroller.scrollTop),t.changeObjs&&we(i,"changes",i,t.changeObjs),t.update&&t.update.finish()}function Qr(t,i){if(t.curOp)return i();hi(t);try{return i()}finally{Hn(t)}}function pr(t,i){return function(){if(t.curOp)return i.apply(t,arguments);hi(t);try{return i.apply(t,arguments)}finally{Hn(t)}}}function Lr(t){return function(){if(this.curOp)return t.apply(this,arguments);hi(this);try{return t.apply(this,arguments)}finally{Hn(this)}}}function dr(t){return function(){var i=this.cm;if(!i||i.curOp)return t.apply(this,arguments);hi(i);try{return t.apply(this,arguments)}finally{Hn(i)}}}function ar(t,i){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(i,et(Tr,t))}function Tr(t){var i=t.doc;if(!(i.highlightFrontier>=t.display.viewTo)){var L=+new Date+t.options.workTime,_=qr(t,i.highlightFrontier),N=[];i.iter(_.line,Math.min(i.first+i.size,t.display.viewTo+500),function(U){if(_.line>=t.display.viewFrom){var re=U.styles,fe=U.text.length>t.options.maxHighlightLength?e(i.mode,_.state):null,ve=xn(t,U,_,!0);fe&&(_.state=fe),U.styles=ve.styles;var xe=U.styleClasses,Oe=ve.classes;Oe?U.styleClasses=Oe:xe&&(U.styleClasses=null);for(var Ue=!re||re.length!=U.styles.length||xe!=Oe&&(!xe||!Oe||xe.bgClass!=Oe.bgClass||xe.textClass!=Oe.textClass),Ve=0;!Ue&&Ve<re.length;++Ve)Ue=re[Ve]!=U.styles[Ve];Ue&&N.push(_.line),U.stateAfter=_.save(),_.nextLine()}else U.text.length<=t.options.maxHighlightLength&&Ao(t,U.text,_),U.stateAfter=_.line%5==0?_.save():null,_.nextLine();if(+new Date>L)return ar(t,t.options.workDelay),!0}),i.highlightFrontier=_.line,i.modeFrontier=Math.max(i.modeFrontier,_.line),N.length&&Qr(t,function(){for(var U=0;U<N.length;U++)Fn(t,N[U],"text")})}}var zo=function(t,i,L){var _=t.display;this.viewport=i,this.visible=An(_,t.doc,i),this.editorIsHidden=!_.wrapper.offsetWidth,this.wrapperHeight=_.wrapper.clientHeight,this.wrapperWidth=_.wrapper.clientWidth,this.oldDisplayWidth=ri(t),this.force=L,this.dims=Bn(t),this.events=[]};function Qs(t,i){var L=t.display,_=t.doc;if(i.editorIsHidden)return Qn(t),!1;if(!i.force&&i.visible.from>=L.viewFrom&&i.visible.to<=L.viewTo&&(null==L.updateLineNumbers||L.updateLineNumbers>=L.viewTo)&&L.renderedView==L.view&&0==eu(t))return!1;pu(t)&&(Qn(t),i.dims=Bn(t));var N=_.first+_.size,U=Math.max(i.visible.from-t.options.viewportMargin,_.first),re=Math.min(N,i.visible.to+t.options.viewportMargin);L.viewFrom<U&&U-L.viewFrom<20&&(U=Math.max(_.first,L.viewFrom)),L.viewTo>re&&L.viewTo-re<20&&(re=Math.min(N,L.viewTo)),Et&&(U=xs(t.doc,U),re=Cs(t.doc,re));var fe=U!=L.viewFrom||re!=L.viewTo||L.lastWrapHeight!=i.wrapperHeight||L.lastWrapWidth!=i.wrapperWidth;(function $l(t,i,L){var _=t.display;0==_.view.length||i>=_.viewTo||L<=_.viewFrom?(_.view=ei(t,i,L),_.viewFrom=i):(_.viewFrom>i?_.view=ei(t,i,_.viewFrom).concat(_.view):_.viewFrom<i&&(_.view=_.view.slice(Pn(t,i))),_.viewFrom=i,_.viewTo<L?_.view=_.view.concat(ei(t,_.viewTo,L)):_.viewTo>L&&(_.view=_.view.slice(0,Pn(t,L)))),_.viewTo=L})(t,U,re),L.viewOffset=kn(bt(t.doc,L.viewFrom)),t.display.mover.style.top=L.viewOffset+"px";var ve=eu(t);if(!fe&&0==ve&&!i.force&&L.renderedView==L.view&&(null==L.updateLineNumbers||L.updateLineNumbers>=L.viewTo))return!1;var xe=function Fa(t){if(t.hasFocus())return null;var i=oe();if(!i||!Fe(t.display.lineDiv,i))return null;var L={activeElt:i};if(window.getSelection){var _=window.getSelection();_.anchorNode&&_.extend&&Fe(t.display.lineDiv,_.anchorNode)&&(L.anchorNode=_.anchorNode,L.anchorOffset=_.anchorOffset,L.focusNode=_.focusNode,L.focusOffset=_.focusOffset)}return L}(t);return ve>4&&(L.lineDiv.style.display="none"),function cu(t,i,L){var _=t.display,N=t.options.lineNumbers,U=_.lineDiv,re=U.firstChild;function fe(rt){var nt=rt.nextSibling;return I&&ee&&t.display.currentWheelTarget==rt?rt.style.display="none":rt.parentNode.removeChild(rt),nt}for(var ve=_.view,xe=_.viewFrom,Oe=0;Oe<ve.length;Oe++){var Ue=ve[Oe];if(!Ue.hidden)if(Ue.node&&Ue.node.parentNode==U){for(;re!=Ue.node;)re=fe(re);var ze=N&&null!=i&&i<=xe&&Ue.lineNumber;Ue.changes&&(Pt(Ue.changes,"gutter")>-1&&(ze=!1),_s(t,Ue,xe,L)),ze&&(ke(Ue.lineNumber),Ue.lineNumber.appendChild(document.createTextNode(gs(t.options,xe)))),re=Ue.node.nextSibling}else{var Ve=ya(t,Ue,xe,L);U.insertBefore(Ve,re)}xe+=Ue.size}for(;re;)re=fe(re)}(t,L.updateLineNumbers,i.dims),ve>4&&(L.lineDiv.style.display=""),L.renderedView=L.view,function _a(t){if(t&&t.activeElt&&t.activeElt!=oe()&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&Fe(document.body,t.anchorNode)&&Fe(document.body,t.focusNode))){var i=window.getSelection(),L=document.createRange();L.setEnd(t.anchorNode,t.anchorOffset),L.collapse(!1),i.removeAllRanges(),i.addRange(L),i.extend(t.focusNode,t.focusOffset)}}(xe),ke(L.cursorDiv),ke(L.selectionDiv),L.gutters.style.height=L.sizer.style.minHeight=0,fe&&(L.lastWrapHeight=i.wrapperHeight,L.lastWrapWidth=i.wrapperWidth,ar(t,400)),L.updateLineNumbers=null,!0}function fu(t,i){for(var L=i.viewport,_=!0;;_=!1){if(_&&t.options.lineWrapping&&i.oldDisplayWidth!=ri(t))_&&(i.visible=An(t.display,t.doc,L));else if(L&&null!=L.top&&(L={top:Math.min(t.doc.height+Bo(t.display)-Ls(t),L.top)}),i.visible=An(t.display,t.doc,L),i.visible.from>=t.display.viewFrom&&i.visible.to<=t.display.viewTo)break;if(!Qs(t,i))break;to(t);var N=io(t);bi(t),_i(t,N),Jo(t,N),i.force=!1}i.signal(t,"update",t),(t.display.viewFrom!=t.display.reportedViewFrom||t.display.viewTo!=t.display.reportedViewTo)&&(i.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function Us(t,i){var L=new zo(t,i);if(Qs(t,L)){to(t),fu(t,L);var _=io(t);bi(t),_i(t,_),Jo(t,_),L.finish()}}function Gs(t){var i=t.gutters.offsetWidth;t.sizer.style.marginLeft=i+"px",hr(t,"gutterChanged",t)}function Jo(t,i){t.display.sizer.style.minHeight=i.docHeight+"px",t.display.heightForcer.style.top=i.docHeight+"px",t.display.gutters.style.height=i.docHeight+t.display.barHeight+on(t)+"px"}function hu(t){var i=t.display,L=i.view;if(i.alignWidgets||i.gutters.firstChild&&t.options.fixedGutter){for(var _=$i(i)-i.scroller.scrollLeft+t.doc.scrollLeft,N=i.gutters.offsetWidth,U=_+"px",re=0;re<L.length;re++)if(!L[re].hidden){t.options.fixedGutter&&(L[re].gutter&&(L[re].gutter.style.left=U),L[re].gutterBackground&&(L[re].gutterBackground.style.left=U));var fe=L[re].alignable;if(fe)for(var ve=0;ve<fe.length;ve++)fe[ve].style.left=U}t.options.fixedGutter&&(i.gutters.style.left=_+N+"px")}}function pu(t){if(!t.options.lineNumbers)return!1;var i=t.doc,L=gs(t.options,i.first+i.size-1),_=t.display;if(L.length!=_.lineNumChars){var N=_.measure.appendChild(Se("div",[Se("div",L)],"CodeMirror-linenumber CodeMirror-gutter-elt")),U=N.firstChild.offsetWidth,re=N.offsetWidth-U;return _.lineGutter.style.width="",_.lineNumInnerWidth=Math.max(U,_.lineGutter.offsetWidth-re)+1,_.lineNumWidth=_.lineNumInnerWidth+re,_.lineNumChars=_.lineNumInnerWidth?L.length:-1,_.lineGutter.style.width=_.lineNumWidth+"px",Gs(t.display),!0}return!1}function Hs(t,i){for(var L=[],_=!1,N=0;N<t.length;N++){var U=t[N],re=null;if("string"!=typeof U&&(re=U.style,U=U.className),"CodeMirror-linenumbers"==U){if(!i)continue;_=!0}L.push({className:U,style:re})}return i&&!_&&L.push({className:"CodeMirror-linenumbers",style:null}),L}function Xs(t){var i=t.gutters,L=t.gutterSpecs;ke(i),t.lineGutter=null;for(var _=0;_<L.length;++_){var N=L[_],U=N.className,re=N.style,fe=i.appendChild(Se("div",null,"CodeMirror-gutter "+U));re&&(fe.style.cssText=re),"CodeMirror-linenumbers"==U&&(t.lineGutter=fe,fe.style.width=(t.lineNumWidth||1)+"px")}i.style.display=L.length?"":"none",Gs(t)}function so(t){Xs(t.display),Or(t),hu(t)}function Aa(t,i,L,_){var N=this;this.input=L,N.scrollbarFiller=Se("div",null,"CodeMirror-scrollbar-filler"),N.scrollbarFiller.setAttribute("cm-not-content","true"),N.gutterFiller=Se("div",null,"CodeMirror-gutter-filler"),N.gutterFiller.setAttribute("cm-not-content","true"),N.lineDiv=We("div",null,"CodeMirror-code"),N.selectionDiv=Se("div",null,null,"position: relative; z-index: 1"),N.cursorDiv=Se("div",null,"CodeMirror-cursors"),N.measure=Se("div",null,"CodeMirror-measure"),N.lineMeasure=Se("div",null,"CodeMirror-measure"),N.lineSpace=We("div",[N.measure,N.lineMeasure,N.selectionDiv,N.cursorDiv,N.lineDiv],null,"position: relative; outline: none");var U=We("div",[N.lineSpace],"CodeMirror-lines");N.mover=Se("div",[U],null,"position: relative"),N.sizer=Se("div",[N.mover],"CodeMirror-sizer"),N.sizerWidth=null,N.heightForcer=Se("div",null,null,"position: absolute; height: 50px; width: 1px;"),N.gutters=Se("div",null,"CodeMirror-gutters"),N.lineGutter=null,N.scroller=Se("div",[N.sizer,N.heightForcer,N.gutters],"CodeMirror-scroll"),N.scroller.setAttribute("tabIndex","-1"),N.wrapper=Se("div",[N.scrollbarFiller,N.gutterFiller,N.scroller],"CodeMirror"),N.wrapper.setAttribute("translate","no"),E&&F<8&&(N.gutters.style.zIndex=-1,N.scroller.style.paddingRight=0),!I&&!(Be&&le)&&(N.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(N.wrapper):t(N.wrapper)),N.viewFrom=N.viewTo=i.first,N.reportedViewFrom=N.reportedViewTo=i.first,N.view=[],N.renderedView=null,N.externalMeasured=null,N.viewOffset=0,N.lastWrapHeight=N.lastWrapWidth=0,N.updateLineNumbers=null,N.nativeBarWidth=N.barHeight=N.barWidth=0,N.scrollbarsClipped=!1,N.lineNumWidth=N.lineNumInnerWidth=N.lineNumChars=null,N.alignWidgets=!1,N.cachedCharWidth=N.cachedTextHeight=N.cachedPaddingH=null,N.maxLine=null,N.maxLineLength=0,N.maxLineChanged=!1,N.wheelDX=N.wheelDY=N.wheelStartX=N.wheelStartY=null,N.shift=!1,N.selForContextMenu=null,N.activeTouch=null,N.gutterSpecs=Hs(_.gutters,_.lineNumbers),Xs(N),L.init(N)}zo.prototype.signal=function(t,i){Me(t,i)&&this.events.push(arguments)},zo.prototype.finish=function(){for(var t=0;t<this.events.length;t++)we.apply(null,this.events[t])};var lo=0,Ln=null;function Ws(t){var i=t.wheelDeltaX,L=t.wheelDeltaY;return null==i&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(i=t.detail),null==L&&t.detail&&t.axis==t.VERTICAL_AXIS?L=t.detail:null==L&&(L=t.wheelDelta),{x:i,y:L}}function La(t){var i=Ws(t);return i.x*=Ln,i.y*=Ln,i}function du(t,i){var L=Ws(i),_=L.x,N=L.y,U=Ln;0===i.deltaMode&&(_=i.deltaX,N=i.deltaY,U=1);var re=t.display,fe=re.scroller,ve=fe.scrollWidth>fe.clientWidth,xe=fe.scrollHeight>fe.clientHeight;if(_&&ve||N&&xe){if(N&&ee&&I)e:for(var Oe=i.target,Ue=re.view;Oe!=fe;Oe=Oe.parentNode)for(var Ve=0;Ve<Ue.length;Ve++)if(Ue[Ve].node==Oe){t.display.currentWheelTarget=Oe;break e}if(_&&!Be&&!s&&null!=U)return N&&xe&&no(t,Math.max(0,fe.scrollTop+N*U)),Un(t,Math.max(0,fe.scrollLeft+_*U)),(!N||N&&xe)&&je(i),void(re.wheelStartX=null);if(N&&null!=U){var ze=N*U,rt=t.doc.scrollTop,nt=rt+re.wrapper.clientHeight;ze<0?rt=Math.max(0,rt+ze-50):nt=Math.min(t.doc.height,nt+ze+50),Us(t,{top:rt,bottom:nt})}lo<20&&0!==i.deltaMode&&(null==re.wheelStartX?(re.wheelStartX=fe.scrollLeft,re.wheelStartY=fe.scrollTop,re.wheelDX=_,re.wheelDY=N,setTimeout(function(){if(null!=re.wheelStartX){var lt=fe.scrollLeft-re.wheelStartX,at=fe.scrollTop-re.wheelStartY,pt=at&&re.wheelDY&&at/re.wheelDY||lt&&re.wheelDX&&lt/re.wheelDX;re.wheelStartX=re.wheelStartY=null,pt&&(Ln=(Ln*lo+pt)/(lo+1),++lo)}},200)):(re.wheelDX+=_,re.wheelDY+=N))}}E?Ln=-.53:Be?Ln=15:j?Ln=-.7:D&&(Ln=-1/3);var Er=function(t,i){this.ranges=t,this.primIndex=i};Er.prototype.primary=function(){return this.ranges[this.primIndex]},Er.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var i=0;i<this.ranges.length;i++){var L=this.ranges[i],_=t.ranges[i];if(!ko(L.anchor,_.anchor)||!ko(L.head,_.head))return!1}return!0},Er.prototype.deepCopy=function(){for(var t=[],i=0;i<this.ranges.length;i++)t[i]=new Gt(vs(this.ranges[i].anchor),vs(this.ranges[i].head));return new Er(t,this.primIndex)},Er.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},Er.prototype.contains=function(t,i){i||(i=t);for(var L=0;L<this.ranges.length;L++){var _=this.ranges[L];if(Tt(i,_.from())>=0&&Tt(t,_.to())<=0)return L}return-1};var Gt=function(t,i){this.anchor=t,this.head=i};function Ur(t,i,L){var _=t&&t.options.selectionsMayTouch,N=i[L];i.sort(function(Ve,ze){return Tt(Ve.from(),ze.from())}),L=Pt(i,N);for(var U=1;U<i.length;U++){var re=i[U],fe=i[U-1],ve=Tt(fe.to(),re.from());if(_&&!re.empty()?ve>0:ve>=0){var xe=Fo(fe.from(),re.from()),Oe=So(fe.to(),re.to()),Ue=fe.empty()?re.from()==re.head:fe.from()==fe.head;U<=L&&--L,i.splice(--U,2,new Gt(Ue?Oe:xe,Ue?xe:Oe))}}return new Er(i,L)}function Tn(t,i){return new Er([new Gt(t,i||t)],0)}function Xn(t){return t.text?ot(t.from.line+t.text.length-1,St(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function qs(t,i){if(Tt(t,i.from)<0)return t;if(Tt(t,i.to)<=0)return Xn(i);var L=t.line+i.text.length-(i.to.line-i.from.line)-1,_=t.ch;return t.line==i.to.line&&(_+=Xn(i).ch-i.to.ch),ot(L,_)}function zs(t,i){for(var L=[],_=0;_<t.sel.ranges.length;_++){var N=t.sel.ranges[_];L.push(new Gt(qs(N.anchor,i),qs(N.head,i)))}return Ur(t.cm,L,t.sel.primIndex)}function Js(t,i,L){return t.line==i.line?ot(L.line,t.ch-i.ch+L.ch):ot(L.line+(t.line-i.line),t.ch)}function Ks(t){t.doc.mode=Wr(t.options,t.doc.modeOption),Ai(t)}function Ai(t){t.doc.iter(function(i){i.stateAfter&&(i.stateAfter=null),i.styles&&(i.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,ar(t,100),t.state.modeGen++,t.curOp&&Or(t)}function gu(t,i){return 0==i.from.ch&&0==i.to.ch&&""==St(i.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Ko(t,i,L,_){function N(pt){return L?L[pt]:null}function U(pt,ft,gt){(function ks(t,i,L,_){t.text=i,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),zi(t),Jr(t,L);var N=_?_(t):1;N!=t.height&&tn(t,N)})(pt,ft,gt,_),hr(pt,"change",pt,i)}function re(pt,ft){for(var gt=[],_t=pt;_t<ft;++_t)gt.push(new nn(xe[_t],N(_t),_));return gt}var fe=i.from,ve=i.to,xe=i.text,Oe=bt(t,fe.line),Ue=bt(t,ve.line),Ve=St(xe),ze=N(xe.length-1),rt=ve.line-fe.line;if(i.full)t.insert(0,re(0,xe.length)),t.remove(xe.length,t.size-xe.length);else if(gu(t,i)){var nt=re(0,xe.length-1);U(Ue,Ue.text,ze),rt&&t.remove(fe.line,rt),nt.length&&t.insert(fe.line,nt)}else if(Oe==Ue)if(1==xe.length)U(Oe,Oe.text.slice(0,fe.ch)+Ve+Oe.text.slice(ve.ch),ze);else{var lt=re(1,xe.length-1);lt.push(new nn(Ve+Oe.text.slice(ve.ch),ze,_)),U(Oe,Oe.text.slice(0,fe.ch)+xe[0],N(0)),t.insert(fe.line+1,lt)}else if(1==xe.length)U(Oe,Oe.text.slice(0,fe.ch)+xe[0]+Ue.text.slice(ve.ch),N(0)),t.remove(fe.line+1,rt);else{U(Oe,Oe.text.slice(0,fe.ch)+xe[0],N(0)),U(Ue,Ve+Ue.text.slice(ve.ch),ze);var at=re(1,xe.length-1);rt>1&&t.remove(fe.line+1,rt-1),t.insert(fe.line+1,at)}hr(t,"change",t,i)}function Wn(t,i,L){!function _(N,U,re){if(N.linked)for(var fe=0;fe<N.linked.length;++fe){var ve=N.linked[fe];if(ve.doc!=U){var xe=re&&ve.sharedHist;L&&!xe||(i(ve.doc,xe),_(ve.doc,N,xe))}}}(t,null,!0)}function vu(t,i){if(i.cm)throw new Error("This document is already in use.");t.doc=i,i.cm=t,eo(t),Ks(t),yu(t),t.options.direction=i.direction,t.options.lineWrapping||bs(t),t.options.mode=i.modeOption,Or(t)}function yu(t){("rtl"==t.doc.direction?me:ge)(t.display.lineDiv,"CodeMirror-rtl")}function Vo(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function Vs(t,i){var L={from:vs(i.from),to:Xn(i),text:$n(t,i.from,i.to)};return xu(t,L,i.from.line,i.to.line+1),Wn(t,function(_){return xu(_,L,i.from.line,i.to.line+1)},!0),L}function mu(t){for(;t.length;){if(!St(t).ranges)break;t.pop()}}function wu(t,i,L,_){var N=t.history;N.undone.length=0;var re,fe,U=+new Date;if((N.lastOp==_||N.lastOrigin==i.origin&&i.origin&&("+"==i.origin.charAt(0)&&N.lastModTime>U-(t.cm?t.cm.options.historyEventDelay:500)||"*"==i.origin.charAt(0)))&&(re=function Ia(t,i){return i?(mu(t.done),St(t.done)):t.done.length&&!St(t.done).ranges?St(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),St(t.done)):void 0}(N,N.lastOp==_)))fe=St(re.changes),0==Tt(i.from,i.to)&&0==Tt(i.from,fe.to)?fe.to=Xn(i):re.changes.push(Vs(t,i));else{var ve=St(N.done);for((!ve||!ve.ranges)&&Yo(t.sel,N.done),re={changes:[Vs(t,i)],generation:N.generation},N.done.push(re);N.done.length>N.undoDepth;)N.done.shift(),N.done[0].ranges||N.done.shift()}N.done.push(L),N.generation=++N.maxGeneration,N.lastModTime=N.lastSelTime=U,N.lastOp=N.lastSelOp=_,N.lastOrigin=N.lastSelOrigin=i.origin,fe||we(t,"historyAdded")}function vr(t,i,L,_){var N=t.history,U=_&&_.origin;L==N.lastSelOp||U&&N.lastSelOrigin==U&&(N.lastModTime==N.lastSelTime&&N.lastOrigin==U||function gr(t,i,L,_){var N=i.charAt(0);return"*"==N||"+"==N&&L.ranges.length==_.ranges.length&&L.somethingSelected()==_.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,U,St(N.done),i))?N.done[N.done.length-1]=i:Yo(i,N.done),N.lastSelTime=+new Date,N.lastSelOrigin=U,N.lastSelOp=L,_&&!1!==_.clearRedo&&mu(N.undone)}function Yo(t,i){var L=St(i);L&&L.ranges&&L.equals(t)||i.push(t)}function xu(t,i,L,_){var N=i["spans_"+t.id],U=0;t.iter(Math.max(t.first,L),Math.min(t.first+t.size,_),function(re){re.markedSpans&&((N||(N=i["spans_"+t.id]={}))[U]=re.markedSpans),++U})}function Na(t){if(!t)return null;for(var i,L=0;L<t.length;++L)t[L].marker.explicitlyCleared?i||(i=t.slice(0,L)):i&&i.push(t[L]);return i?i.length?i:null:t}function Cu(t,i){var L=function Ma(t,i){var L=i["spans_"+t.id];if(!L)return null;for(var _=[],N=0;N<i.text.length;++N)_.push(Na(L[N]));return _}(t,i),_=hn(t,i);if(!L)return _;if(!_)return L;for(var N=0;N<L.length;++N){var U=L[N],re=_[N];if(U&&re)e:for(var fe=0;fe<re.length;++fe){for(var ve=re[fe],xe=0;xe<U.length;++xe)if(U[xe].marker==ve.marker)continue e;U.push(ve)}else re&&(L[N]=re)}return L}function Li(t,i,L){for(var _=[],N=0;N<t.length;++N){var U=t[N];if(U.ranges)_.push(L?Er.prototype.deepCopy.call(U):U);else{var re=U.changes,fe=[];_.push({changes:fe});for(var ve=0;ve<re.length;++ve){var xe=re[ve],Oe=void 0;if(fe.push({from:xe.from,to:xe.to,text:xe.text}),i)for(var Ue in xe)(Oe=Ue.match(/^spans_(\d+)$/))&&Pt(i,Number(Oe[1]))>-1&&(St(fe)[Ue]=xe[Ue],delete xe[Ue])}}}return _}function Ys(t,i,L,_){if(_){var N=t.anchor;if(L){var U=Tt(i,N)<0;U!=Tt(L,N)<0?(N=i,i=L):U!=Tt(i,L)<0&&(i=L)}return new Gt(N,i)}return new Gt(L||i,i)}function Zo(t,i,L,_,N){null==N&&(N=t.cm&&(t.cm.display.shift||t.extend)),fr(t,new Er([Ys(t.sel.primary(),i,L,N)],0),_)}function bu(t,i,L){for(var _=[],N=t.cm&&(t.cm.display.shift||t.extend),U=0;U<t.sel.ranges.length;U++)_[U]=Ys(t.sel.ranges[U],i[U],null,N);fr(t,Ur(t.cm,_,t.sel.primIndex),L)}function Zs(t,i,L,_){var N=t.sel.ranges.slice(0);N[i]=L,fr(t,Ur(t.cm,N,t.sel.primIndex),_)}function ku(t,i,L,_){fr(t,Tn(i,L),_)}function uo(t,i,L){var _=t.history.done,N=St(_);N&&N.ranges?(_[_.length-1]=i,ao(t,i,L)):fr(t,i,L)}function fr(t,i,L){ao(t,i,L),vr(t,t.sel,t.cm?t.cm.curOp.id:NaN,L)}function ao(t,i,L){(Me(t,"beforeSelectionChange")||t.cm&&Me(t.cm,"beforeSelectionChange"))&&(i=function ja(t,i,L){var _={ranges:i.ranges,update:function(N){this.ranges=[];for(var U=0;U<N.length;U++)this.ranges[U]=new Gt(Lt(t,N[U].anchor),Lt(t,N[U].head))},origin:L&&L.origin};return we(t,"beforeSelectionChange",t,_),t.cm&&we(t.cm,"beforeSelectionChange",t.cm,_),_.ranges!=i.ranges?Ur(t.cm,_.ranges,_.ranges.length-1):i}(t,i,L));var _=L&&L.bias||(Tt(i.primary().head,t.sel.primary().head)<0?-1:1);Su(t,_u(t,i,_,!0)),(!L||!1!==L.scroll)&&t.cm&&"nocursor"!=t.cm.getOption("readOnly")&&ai(t.cm)}function Su(t,i){i.equals(t.sel)||(t.sel=i,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,Ie(t.cm)),hr(t,"cursorActivity",t))}function Fu(t){Su(t,_u(t,t.sel,null,!1))}function _u(t,i,L,_){for(var N,U=0;U<i.ranges.length;U++){var re=i.ranges[U],fe=i.ranges.length==t.sel.ranges.length&&t.sel.ranges[U],ve=$o(t,re.anchor,fe&&fe.anchor,L,_),xe=$o(t,re.head,fe&&fe.head,L,_);(N||ve!=re.anchor||xe!=re.head)&&(N||(N=i.ranges.slice(0,U)),N[U]=new Gt(ve,xe))}return N?Ur(t.cm,N,i.primIndex):i}function Ti(t,i,L,_,N){var U=bt(t,i.line);if(U.markedSpans)for(var re=0;re<U.markedSpans.length;++re){var fe=U.markedSpans[re],ve=fe.marker,xe="selectLeft"in ve?!ve.selectLeft:ve.inclusiveLeft,Oe="selectRight"in ve?!ve.selectRight:ve.inclusiveRight;if((null==fe.from||(xe?fe.from<=i.ch:fe.from<i.ch))&&(null==fe.to||(Oe?fe.to>=i.ch:fe.to>i.ch))){if(N&&(we(ve,"beforeCursorEnter"),ve.explicitlyCleared)){if(U.markedSpans){--re;continue}break}if(!ve.atomic)continue;if(L){var Ue=ve.find(_<0?1:-1),Ve=void 0;if((_<0?Oe:xe)&&(Ue=Au(t,Ue,-_,Ue&&Ue.line==i.line?U:null)),Ue&&Ue.line==i.line&&(Ve=Tt(Ue,L))&&(_<0?Ve<0:Ve>0))return Ti(t,Ue,i,_,N)}var ze=ve.find(_<0?-1:1);return(_<0?xe:Oe)&&(ze=Au(t,ze,_,ze.line==i.line?U:null)),ze?Ti(t,ze,i,_,N):null}}return i}function $o(t,i,L,_,N){var U=_||1;return Ti(t,i,L,U,N)||!N&&Ti(t,i,L,U,!0)||Ti(t,i,L,-U,N)||!N&&Ti(t,i,L,-U,!0)||(t.cantEdit=!0,ot(t.first,0))}function Au(t,i,L,_){return L<0&&0==i.ch?i.line>t.first?Lt(t,ot(i.line-1)):null:L>0&&i.ch==(_||bt(t,i.line)).text.length?i.line<t.first+t.size-1?ot(i.line+1,0):null:new ot(i.line,i.ch+L)}function Lu(t){t.setSelection(ot(t.firstLine(),0),ot(t.lastLine()),it)}function fo(t,i,L){var _={canceled:!1,from:i.from,to:i.to,text:i.text,origin:i.origin,cancel:function(){return _.canceled=!0}};return L&&(_.update=function(N,U,re,fe){N&&(_.from=Lt(t,N)),U&&(_.to=Lt(t,U)),re&&(_.text=re),void 0!==fe&&(_.origin=fe)}),we(t,"beforeChange",t,_),t.cm&&we(t.cm,"beforeChange",t.cm,_),_.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:_.from,to:_.to,text:_.text,origin:_.origin}}function En(t,i,L){if(t.cm){if(!t.cm.curOp)return pr(t.cm,En)(t,i,L);if(t.cm.state.suppressEdits)return}if(!(Me(t,"beforeChange")||t.cm&&Me(t.cm,"beforeChange"))||(i=fo(t,i,!0))){var _=Xi&&!L&&function Dn(t,i,L){var _=null;if(t.iter(i.line,L.line+1,function(ze){if(ze.markedSpans)for(var rt=0;rt<ze.markedSpans.length;++rt){var nt=ze.markedSpans[rt].marker;nt.readOnly&&(!_||-1==Pt(_,nt))&&(_||(_=[])).push(nt)}}),!_)return null;for(var N=[{from:i,to:L}],U=0;U<_.length;++U)for(var re=_[U],fe=re.find(0),ve=0;ve<N.length;++ve){var xe=N[ve];if(!(Tt(xe.to,fe.from)<0||Tt(xe.from,fe.to)>0)){var Oe=[ve,1],Ue=Tt(xe.from,fe.from),Ve=Tt(xe.to,fe.to);(Ue<0||!re.inclusiveLeft&&!Ue)&&Oe.push({from:xe.from,to:fe.from}),(Ve>0||!re.inclusiveRight&&!Ve)&&Oe.push({from:fe.to,to:xe.to}),N.splice.apply(N,Oe),ve+=Oe.length-3}}return N}(t,i.from,i.to);if(_)for(var N=_.length-1;N>=0;--N)Tu(t,{from:_[N].from,to:_[N].to,text:N?[""]:i.text,origin:i.origin});else Tu(t,i)}}function Tu(t,i){if(1!=i.text.length||""!=i.text[0]||0!=Tt(i.from,i.to)){var L=zs(t,i);wu(t,i,L,t.cm?t.cm.curOp.id:NaN),co(t,i,L,hn(t,i));var _=[];Wn(t,function(N,U){!U&&-1==Pt(_,N.history)&&(es(N.history,i),_.push(N.history)),co(N,i,null,hn(N,i))})}}function dn(t,i,L){var _=t.cm&&t.cm.state.suppressEdits;if(!_||L){for(var U,N=t.history,re=t.sel,fe="undo"==i?N.done:N.undone,ve="undo"==i?N.undone:N.done,xe=0;xe<fe.length&&(U=fe[xe],!(L?U.ranges&&!U.equals(t.sel):!U.ranges));xe++);if(xe!=fe.length){for(N.lastOrigin=N.lastSelOrigin=null;;){if(!(U=fe.pop()).ranges){if(_)return void fe.push(U);break}if(Yo(U,ve),L&&!U.equals(t.sel))return void fr(t,U,{clearRedo:!1});re=U}var Oe=[];Yo(re,ve),ve.push({changes:Oe,generation:N.generation}),N.generation=U.generation||++N.maxGeneration;for(var Ue=Me(t,"beforeChange")||t.cm&&Me(t.cm,"beforeChange"),Ve=function(nt){var lt=U.changes[nt];if(lt.origin=i,Ue&&!fo(t,lt,!1))return fe.length=0,{};Oe.push(Vs(t,lt));var at=nt?zs(t,lt):St(fe);co(t,lt,at,Cu(t,lt)),!nt&&t.cm&&t.cm.scrollIntoView({from:lt.from,to:Xn(lt)});var pt=[];Wn(t,function(ft,gt){!gt&&-1==Pt(pt,ft.history)&&(es(ft.history,lt),pt.push(ft.history)),co(ft,lt,null,Cu(ft,lt))})},ze=U.changes.length-1;ze>=0;--ze){var rt=Ve(ze);if(rt)return rt.v}}}}function qn(t,i){if(0!=i&&(t.first+=i,t.sel=new Er(Ut(t.sel.ranges,function(N){return new Gt(ot(N.anchor.line+i,N.anchor.ch),ot(N.head.line+i,N.head.ch))}),t.sel.primIndex),t.cm)){Or(t.cm,t.first,t.first-i,i);for(var L=t.cm.display,_=L.viewFrom;_<L.viewTo;_++)Fn(t.cm,_,"gutter")}}function co(t,i,L,_){if(t.cm&&!t.cm.curOp)return pr(t.cm,co)(t,i,L,_);if(i.to.line<t.first)qn(t,i.text.length-1-(i.to.line-i.from.line));else if(!(i.from.line>t.lastLine())){if(i.from.line<t.first){var N=i.text.length-1-(t.first-i.from.line);qn(t,N),i={from:ot(t.first,0),to:ot(i.to.line+N,i.to.ch),text:[St(i.text)],origin:i.origin}}var U=t.lastLine();i.to.line>U&&(i={from:i.from,to:ot(U,bt(t,U).text.length),text:[i.text[0]],origin:i.origin}),i.removed=$n(t,i.from,i.to),L||(L=zs(t,i)),t.cm?function Oa(t,i,L){var _=t.doc,N=t.display,U=i.from,re=i.to,fe=!1,ve=U.line;t.options.lineWrapping||(ve=qt(rn(bt(_,U.line))),_.iter(ve,re.line+1,function(ze){if(ze==N.maxLine)return fe=!0,!0})),_.sel.contains(i.from,i.to)>-1&&Ie(t),Ko(_,i,L,si(t)),t.options.lineWrapping||(_.iter(ve,U.line+i.text.length,function(ze){var rt=jo(ze);rt>N.maxLineLength&&(N.maxLine=ze,N.maxLineLength=rt,N.maxLineChanged=!0,fe=!1)}),fe&&(t.curOp.updateMaxLine=!0)),function On(t,i){if(t.modeFrontier=Math.min(t.modeFrontier,i),!(t.highlightFrontier<i-10)){for(var L=t.first,_=i-1;_>L;_--){var N=bt(t,_).stateAfter;if(N&&(!(N instanceof _o)||_+N.lookAhead<i)){L=_+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,L)}}(_,U.line),ar(t,400);var xe=i.text.length-(re.line-U.line)-1;i.full?Or(t):U.line!=re.line||1!=i.text.length||gu(t.doc,i)?Or(t,U.line,re.line+1,xe):Fn(t,U.line,"text");var Oe=Me(t,"changes"),Ue=Me(t,"change");if(Ue||Oe){var Ve={from:U,to:re,text:i.text,removed:i.removed,origin:i.origin};Ue&&hr(t,"change",t,Ve),Oe&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(Ve)}t.display.selForContextMenu=null}(t.cm,i,_):Ko(t,i,_),ao(t,L,it),t.cantEdit&&$o(t,ot(t.firstLine(),0))&&(t.cantEdit=!1)}}function pi(t,i,L,_,N){var U;_||(_=L),Tt(_,L)<0&&(L=(U=[_,L])[0],_=U[1]),"string"==typeof i&&(i=t.splitLines(i)),En(t,{from:L,to:_,text:i,origin:N})}function $s(t,i,L,_){L<t.line?t.line+=_:i<t.line&&(t.line=i,t.ch=0)}function Eu(t,i,L,_){for(var N=0;N<t.length;++N){var U=t[N],re=!0;if(U.ranges){U.copied||((U=t[N]=U.deepCopy()).copied=!0);for(var fe=0;fe<U.ranges.length;fe++)$s(U.ranges[fe].anchor,i,L,_),$s(U.ranges[fe].head,i,L,_)}else{for(var ve=0;ve<U.changes.length;++ve){var xe=U.changes[ve];if(L<xe.from.line)xe.from=ot(xe.from.line+_,xe.from.ch),xe.to=ot(xe.to.line+_,xe.to.ch);else if(i<=xe.to.line){re=!1;break}}re||(t.splice(0,N+1),N=0)}}}function es(t,i){var L=i.from.line,_=i.to.line,N=i.text.length-(_-L)-1;Eu(t.done,L,_,N),Eu(t.undone,L,_,N)}function di(t,i,L,_){var N=i,U=i;return"number"==typeof i?U=bt(t,Cl(t,i)):N=qt(i),null==N?null:(_(U,N)&&t.cm&&Fn(t.cm,N,L),U)}function Yr(t){this.lines=t,this.parent=null;for(var i=0,L=0;L<t.length;++L)t[L].parent=this,i+=t[L].height;this.height=i}function Zr(t){this.children=t;for(var i=0,L=0,_=0;_<t.length;++_){var N=t[_];i+=N.chunkSize(),L+=N.height,N.parent=this}this.size=i,this.height=L,this.parent=null}Gt.prototype.from=function(){return Fo(this.anchor,this.head)},Gt.prototype.to=function(){return So(this.anchor,this.head)},Gt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Yr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,i){for(var L=t,_=t+i;L<_;++L){var N=this.lines[L];this.height-=N.height,wi(N),hr(N,"delete")}this.lines.splice(t,i)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,i,L){this.height+=L,this.lines=this.lines.slice(0,t).concat(i).concat(this.lines.slice(t));for(var _=0;_<i.length;++_)i[_].parent=this},iterN:function(t,i,L){for(var _=t+i;t<_;++t)if(L(this.lines[t]))return!0}},Zr.prototype={chunkSize:function(){return this.size},removeInner:function(t,i){this.size-=i;for(var L=0;L<this.children.length;++L){var _=this.children[L],N=_.chunkSize();if(t<N){var U=Math.min(i,N-t),re=_.height;if(_.removeInner(t,U),this.height-=re-_.height,N==U&&(this.children.splice(L--,1),_.parent=null),0==(i-=U))break;t=0}else t-=N}if(this.size-i<25&&(this.children.length>1||!(this.children[0]instanceof Yr))){var fe=[];this.collapse(fe),this.children=[new Yr(fe)],this.children[0].parent=this}},collapse:function(t){for(var i=0;i<this.children.length;++i)this.children[i].collapse(t)},insertInner:function(t,i,L){this.size+=i.length,this.height+=L;for(var _=0;_<this.children.length;++_){var N=this.children[_],U=N.chunkSize();if(t<=U){if(N.insertInner(t,i,L),N.lines&&N.lines.length>50){for(var re=N.lines.length%25+25,fe=re;fe<N.lines.length;){var ve=new Yr(N.lines.slice(fe,fe+=25));N.height-=ve.height,this.children.splice(++_,0,ve),ve.parent=this}N.lines=N.lines.slice(0,re),this.maybeSpill()}break}t-=U}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var L=new Zr(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=L.size,t.height-=L.height;var N=Pt(t.parent.children,t);t.parent.children.splice(N+1,0,L)}else{var _=new Zr(t.children);_.parent=t,t.children=[_,L],t=_}L.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,i,L){for(var _=0;_<this.children.length;++_){var N=this.children[_],U=N.chunkSize();if(t<U){var re=Math.min(i,U-t);if(N.iterN(t,re,L))return!0;if(0==(i-=re))break;t=0}else t-=U}}};var ho=function(t,i,L){if(L)for(var _ in L)L.hasOwnProperty(_)&&(this[_]=L[_]);this.doc=t,this.node=i};function ts(t,i,L){kn(i)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Bs(t,L)}ho.prototype.clear=function(){var t=this.doc.cm,i=this.line.widgets,L=this.line,_=qt(L);if(null!=_&&i){for(var N=0;N<i.length;++N)i[N]==this&&i.splice(N--,1);i.length||(L.widgets=null);var U=Vi(this);tn(L,Math.max(0,L.height-U)),t&&(Qr(t,function(){ts(t,L,-U),Fn(t,_,"widget")}),hr(t,"lineWidgetCleared",t,this,_))}},ho.prototype.changed=function(){var t=this,i=this.height,L=this.doc.cm,_=this.line;this.height=null;var N=Vi(this)-i;!N||(Rn(this.doc,_)||tn(_,_.height+N),L&&Qr(L,function(){L.curOp.forceUpdate=!0,ts(L,_,N),hr(L,"lineWidgetChanged",L,t,qt(_))}))},Ne(ho);var Iu=0,zn=function(t,i){this.lines=[],this.type=i,this.doc=t,this.id=++Iu};function Ei(t,i,L,_,N){if(_&&_.shared)return function Da(t,i,L,_,N){(_=st(_)).shared=!1;var U=[Ei(t,i,L,_,N)],re=U[0],fe=_.widgetNode;return Wn(t,function(ve){fe&&(_.widgetNode=fe.cloneNode(!0)),U.push(Ei(ve,Lt(ve,i),Lt(ve,L),_,N));for(var xe=0;xe<ve.linked.length;++xe)if(ve.linked[xe].isParent)return;re=St(U)}),new po(U,re)}(t,i,L,_,N);if(t.cm&&!t.cm.curOp)return pr(t.cm,Ei)(t,i,L,_,N);var U=new zn(t,N),re=Tt(i,L);if(_&&st(_,U,!1),re>0||0==re&&!1!==U.clearWhenEmpty)return U;if(U.replacedWith&&(U.collapsed=!0,U.widgetNode=We("span",[U.replacedWith],"CodeMirror-widget"),_.handleMouseEvents||U.widgetNode.setAttribute("cm-ignore-events","true"),_.insertLeft&&(U.widgetNode.insertLeft=!0)),U.collapsed){if(ws(t,i.line,i,L,U)||i.line!=L.line&&ws(t,L.line,i,L,U))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function bn(){Et=!0}()}U.addToHistory&&wu(t,{from:i,to:L,origin:"markText"},t.sel,NaN);var xe,fe=i.line,ve=t.cm;if(t.iter(fe,L.line+1,function(Ue){ve&&U.collapsed&&!ve.options.lineWrapping&&rn(Ue)==ve.display.maxLine&&(xe=!0),U.collapsed&&fe!=i.line&&tn(Ue,0),function Sl(t,i,L){var _=L&&window.WeakSet&&(L.markedSpans||(L.markedSpans=new WeakSet));_&&t.markedSpans&&_.has(t.markedSpans)?t.markedSpans.push(i):(t.markedSpans=t.markedSpans?t.markedSpans.concat([i]):[i],_&&_.add(t.markedSpans)),i.marker.attachLine(t)}(Ue,new zr(U,fe==i.line?i.ch:null,fe==L.line?L.ch:null),t.cm&&t.cm.curOp),++fe}),U.collapsed&&t.iter(i.line,L.line+1,function(Ue){Rn(t,Ue)&&tn(Ue,0)}),U.clearOnEnter&&ne(U,"beforeCursorEnter",function(){return U.clear()}),U.readOnly&&(function Dt(){Xi=!0}(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),U.collapsed&&(U.id=++Iu,U.atomic=!0),ve){if(xe&&(ve.curOp.updateMaxLine=!0),U.collapsed)Or(ve,i.line,L.line+1);else if(U.className||U.startStyle||U.endStyle||U.css||U.attributes||U.title)for(var Oe=i.line;Oe<=L.line;Oe++)Fn(ve,Oe,"text");U.atomic&&Fu(ve.doc),hr(ve,"markerAdded",ve,U)}return U}zn.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,i=t&&!t.curOp;if(i&&hi(t),Me(this,"clear")){var L=this.find();L&&hr(this,"clear",L.from,L.to)}for(var _=null,N=null,U=0;U<this.lines.length;++U){var re=this.lines[U],fe=Wi(re.markedSpans,this);t&&!this.collapsed?Fn(t,qt(re),"text"):t&&(null!=fe.to&&(N=qt(re)),null!=fe.from&&(_=qt(re))),re.markedSpans=Eo(re.markedSpans,fe),null==fe.from&&this.collapsed&&!Rn(this.doc,re)&&t&&tn(re,oi(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var ve=0;ve<this.lines.length;++ve){var xe=rn(this.lines[ve]),Oe=jo(xe);Oe>t.display.maxLineLength&&(t.display.maxLine=xe,t.display.maxLineLength=Oe,t.display.maxLineChanged=!0)}null!=_&&t&&this.collapsed&&Or(t,_,N+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Fu(t.doc)),t&&hr(t,"markerCleared",t,this,_,N),i&&Hn(t),this.parent&&this.parent.clear()}},zn.prototype.find=function(t,i){null==t&&"bookmark"==this.type&&(t=1);for(var L,_,N=0;N<this.lines.length;++N){var U=this.lines[N],re=Wi(U.markedSpans,this);if(null!=re.from&&(L=ot(i?U:qt(U),re.from),-1==t))return L;if(null!=re.to&&(_=ot(i?U:qt(U),re.to),1==t))return _}return L&&{from:L,to:_}},zn.prototype.changed=function(){var t=this,i=this.find(-1,!0),L=this,_=this.doc.cm;!i||!_||Qr(_,function(){var N=i.line,U=qt(i.line),re=Ts(_,U);if(re&&(Es(re),_.curOp.selectionChanged=_.curOp.forceUpdate=!0),_.curOp.updateMaxLine=!0,!Rn(L.doc,N)&&null!=L.height){var fe=L.height;L.height=null;var ve=Vi(L)-fe;ve&&tn(N,N.height+ve)}hr(_,"markerChanged",_,t)})},zn.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var i=this.doc.cm.curOp;(!i.maybeHiddenMarkers||-1==Pt(i.maybeHiddenMarkers,this))&&(i.maybeUnhiddenMarkers||(i.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},zn.prototype.detachLine=function(t){if(this.lines.splice(Pt(this.lines,t),1),!this.lines.length&&this.doc.cm){var i=this.doc.cm.curOp;(i.maybeHiddenMarkers||(i.maybeHiddenMarkers=[])).push(this)}},Ne(zn);var po=function(t,i){this.markers=t,this.primary=i;for(var L=0;L<t.length;++L)t[L].parent=this};function rs(t){return t.findMarks(ot(t.first,0),t.clipPos(ot(t.lastLine())),function(i){return i.parent})}function rl(t){for(var i=function(_){var N=t[_],U=[N.primary.doc];Wn(N.primary.doc,function(ve){return U.push(ve)});for(var re=0;re<N.markers.length;re++){var fe=N.markers[re];-1==Pt(U,fe.doc)&&(fe.parent=null,N.markers.splice(re--,1))}},L=0;L<t.length;L++)i(L)}po.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();hr(this,"clear")}},po.prototype.find=function(t,i){return this.primary.find(t,i)},Ne(po);var nl=0,Dr=function(t,i,L,_,N){if(!(this instanceof Dr))return new Dr(t,i,L,_,N);null==L&&(L=0),Zr.call(this,[new Yr([new nn("",null)])]),this.first=L,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=L;var U=ot(L,0);this.sel=Tn(U),this.history=new Vo(null),this.id=++nl,this.modeOption=i,this.lineSep=_,this.direction="rtl"==N?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Ko(this,{from:U,to:U,text:t}),fr(this,Tn(U),it)};Dr.prototype=cr(Zr.prototype,{constructor:Dr,iter:function(t,i,L){L?this.iterN(t-this.first,i-t,L):this.iterN(this.first,this.first+this.size,t)},insert:function(t,i){for(var L=0,_=0;_<i.length;++_)L+=i[_].height;this.insertInner(t-this.first,i,L)},remove:function(t,i){this.removeInner(t-this.first,i)},getValue:function(t){var i=ds(this,this.first,this.first+this.size);return!1===t?i:i.join(t||this.lineSeparator())},setValue:dr(function(t){var i=ot(this.first,0),L=this.first+this.size-1;En(this,{from:i,to:ot(L,bt(this,L).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&ro(this.cm,0,0),fr(this,Tn(i),it)}),replaceRange:function(t,i,L,_){pi(this,t,i=Lt(this,i),L=L?Lt(this,L):i,_)},getRange:function(t,i,L){var _=$n(this,Lt(this,t),Lt(this,i));return!1===L?_:""===L?_.join(""):_.join(L||this.lineSeparator())},getLine:function(t){var i=this.getLineHandle(t);return i&&i.text},getLineHandle:function(t){if(Hi(this,t))return bt(this,t)},getLineNumber:function(t){return qt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=bt(this,t)),rn(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return Lt(this,t)},getCursor:function(t){var i=this.sel.primary();return null==t||"head"==t?i.head:"anchor"==t?i.anchor:"end"==t||"to"==t||!1===t?i.to():i.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:dr(function(t,i,L){ku(this,Lt(this,"number"==typeof t?ot(t,i||0):t),null,L)}),setSelection:dr(function(t,i,L){ku(this,Lt(this,t),Lt(this,i||t),L)}),extendSelection:dr(function(t,i,L){Zo(this,Lt(this,t),i&&Lt(this,i),L)}),extendSelections:dr(function(t,i){bu(this,ys(this,t),i)}),extendSelectionsBy:dr(function(t,i){bu(this,ys(this,Ut(this.sel.ranges,t)),i)}),setSelections:dr(function(t,i,L){if(t.length){for(var _=[],N=0;N<t.length;N++)_[N]=new Gt(Lt(this,t[N].anchor),Lt(this,t[N].head||t[N].anchor));null==i&&(i=Math.min(t.length-1,this.sel.primIndex)),fr(this,Ur(this.cm,_,i),L)}}),addSelection:dr(function(t,i,L){var _=this.sel.ranges.slice(0);_.push(new Gt(Lt(this,t),Lt(this,i||t))),fr(this,Ur(this.cm,_,_.length-1),L)}),getSelection:function(t){for(var L,i=this.sel.ranges,_=0;_<i.length;_++){var N=$n(this,i[_].from(),i[_].to());L=L?L.concat(N):N}return!1===t?L:L.join(t||this.lineSeparator())},getSelections:function(t){for(var i=[],L=this.sel.ranges,_=0;_<L.length;_++){var N=$n(this,L[_].from(),L[_].to());!1!==t&&(N=N.join(t||this.lineSeparator())),i[_]=N}return i},replaceSelection:function(t,i,L){for(var _=[],N=0;N<this.sel.ranges.length;N++)_[N]=t;this.replaceSelections(_,i,L||"+input")},replaceSelections:dr(function(t,i,L){for(var _=[],N=this.sel,U=0;U<N.ranges.length;U++){var re=N.ranges[U];_[U]={from:re.from(),to:re.to(),text:this.splitLines(t[U]),origin:L}}for(var fe=i&&"end"!=i&&function Ta(t,i,L){for(var _=[],N=ot(t.first,0),U=N,re=0;re<i.length;re++){var fe=i[re],ve=Js(fe.from,N,U),xe=Js(Xn(fe),N,U);if(N=fe.to,U=xe,"around"==L){var Oe=t.sel.ranges[re],Ue=Tt(Oe.head,Oe.anchor)<0;_[re]=new Gt(Ue?xe:ve,Ue?ve:xe)}else _[re]=new Gt(ve,ve)}return new Er(_,t.sel.primIndex)}(this,_,i),ve=_.length-1;ve>=0;ve--)En(this,_[ve]);fe?uo(this,fe):this.cm&&ai(this.cm)}),undo:dr(function(){dn(this,"undo")}),redo:dr(function(){dn(this,"redo")}),undoSelection:dr(function(){dn(this,"undo",!0)}),redoSelection:dr(function(){dn(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,i=0,L=0,_=0;_<t.done.length;_++)t.done[_].ranges||++i;for(var N=0;N<t.undone.length;N++)t.undone[N].ranges||++L;return{undo:i,redo:L}},clearHistory:function(){var t=this;this.history=new Vo(this.history),Wn(this,function(i){return i.history=t.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Li(this.history.done),undone:Li(this.history.undone)}},setHistory:function(t){var i=this.history=new Vo(this.history);i.done=Li(t.done.slice(0),null,!0),i.undone=Li(t.undone.slice(0),null,!0)},setGutterMarker:dr(function(t,i,L){return di(this,t,"gutter",function(_){var N=_.gutterMarkers||(_.gutterMarkers={});return N[i]=L,!L&&Je(N)&&(_.gutterMarkers=null),!0})}),clearGutter:dr(function(t){var i=this;this.iter(function(L){L.gutterMarkers&&L.gutterMarkers[t]&&di(i,L,"gutter",function(){return L.gutterMarkers[t]=null,Je(L.gutterMarkers)&&(L.gutterMarkers=null),!0})})}),lineInfo:function(t){var i;if("number"==typeof t){if(!Hi(this,t)||(i=t,!(t=bt(this,t))))return null}else if(null==(i=qt(t)))return null;return{line:i,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:dr(function(t,i,L){return di(this,t,"gutter"==i?"gutter":"class",function(_){var N="text"==i?"textClass":"background"==i?"bgClass":"gutter"==i?"gutterClass":"wrapClass";if(_[N]){if(Y(L).test(_[N]))return!1;_[N]+=" "+L}else _[N]=L;return!0})}),removeLineClass:dr(function(t,i,L){return di(this,t,"gutter"==i?"gutter":"class",function(_){var N="text"==i?"textClass":"background"==i?"bgClass":"gutter"==i?"gutterClass":"wrapClass",U=_[N];if(!U)return!1;if(null==L)_[N]=null;else{var re=U.match(Y(L));if(!re)return!1;var fe=re.index+re[0].length;_[N]=U.slice(0,re.index)+(re.index&&fe!=U.length?" ":"")+U.slice(fe)||null}return!0})}),addLineWidget:dr(function(t,i,L){return function el(t,i,L,_){var N=new ho(t,L,_),U=t.cm;return U&&N.noHScroll&&(U.display.alignWidgets=!0),di(t,i,"widget",function(re){var fe=re.widgets||(re.widgets=[]);if(null==N.insertAt?fe.push(N):fe.splice(Math.min(fe.length,Math.max(0,N.insertAt)),0,N),N.line=re,U&&!Rn(t,re)){var ve=kn(re)<t.scrollTop;tn(re,re.height+Vi(N)),ve&&Bs(U,N.height),U.curOp.forceUpdate=!0}return!0}),U&&hr(U,"lineWidgetAdded",U,N,"number"==typeof i?i:qt(i)),N}(this,t,i,L)}),removeLineWidget:function(t){t.clear()},markText:function(t,i,L){return Ei(this,Lt(this,t),Lt(this,i),L,L&&L.type||"range")},setBookmark:function(t,i){var L={replacedWith:i&&(null==i.nodeType?i.widget:i),insertLeft:i&&i.insertLeft,clearWhenEmpty:!1,shared:i&&i.shared,handleMouseEvents:i&&i.handleMouseEvents};return Ei(this,t=Lt(this,t),t,L,"bookmark")},findMarksAt:function(t){var i=[],L=bt(this,(t=Lt(this,t)).line).markedSpans;if(L)for(var _=0;_<L.length;++_){var N=L[_];(null==N.from||N.from<=t.ch)&&(null==N.to||N.to>=t.ch)&&i.push(N.marker.parent||N.marker)}return i},findMarks:function(t,i,L){t=Lt(this,t),i=Lt(this,i);var _=[],N=t.line;return this.iter(t.line,i.line+1,function(U){var re=U.markedSpans;if(re)for(var fe=0;fe<re.length;fe++){var ve=re[fe];!(null!=ve.to&&N==t.line&&t.ch>=ve.to||null==ve.from&&N!=t.line||null!=ve.from&&N==i.line&&ve.from>=i.ch)&&(!L||L(ve.marker))&&_.push(ve.marker.parent||ve.marker)}++N}),_},getAllMarks:function(){var t=[];return this.iter(function(i){var L=i.markedSpans;if(L)for(var _=0;_<L.length;++_)null!=L[_].from&&t.push(L[_].marker)}),t},posFromIndex:function(t){var i,L=this.first,_=this.lineSeparator().length;return this.iter(function(N){var U=N.text.length+_;if(U>t)return i=t,!0;t-=U,++L}),Lt(this,ot(L,i))},indexFromPos:function(t){var i=(t=Lt(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var L=this.lineSeparator().length;return this.iter(this.first,t.line,function(_){i+=_.text.length+L}),i},copy:function(t){var i=new Dr(ds(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return i.scrollTop=this.scrollTop,i.scrollLeft=this.scrollLeft,i.sel=this.sel,i.extend=!1,t&&(i.history.undoDepth=this.history.undoDepth,i.setHistory(this.getHistory())),i},linkedDoc:function(t){t||(t={});var i=this.first,L=this.first+this.size;null!=t.from&&t.from>i&&(i=t.from),null!=t.to&&t.to<L&&(L=t.to);var _=new Dr(ds(this,i,L),t.mode||this.modeOption,i,this.lineSep,this.direction);return t.sharedHist&&(_.history=this.history),(this.linked||(this.linked=[])).push({doc:_,sharedHist:t.sharedHist}),_.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function tl(t,i){for(var L=0;L<i.length;L++){var _=i[L],N=_.find(),U=t.clipPos(N.from),re=t.clipPos(N.to);if(Tt(U,re)){var fe=Ei(t,U,re,_.primary,_.primary.type);_.markers.push(fe),fe.parent=_}}}(_,rs(this)),_},unlinkDoc:function(t){if(t instanceof Kt&&(t=t.doc),this.linked)for(var i=0;i<this.linked.length;++i){if(this.linked[i].doc==t){this.linked.splice(i,1),t.unlinkDoc(this),rl(rs(this));break}}if(t.history==this.history){var _=[t.id];Wn(t,function(N){return _.push(N.id)},!0),t.history=new Vo(null),t.history.done=Li(this.history.done,_),t.history.undone=Li(this.history.undone,_)}},iterLinkedDocs:function(t){Wn(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Zt(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:dr(function(t){"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(i){return i.order=null}),this.cm&&function Ea(t){Qr(t,function(){yu(t),Or(t)})}(this.cm))})}),Dr.prototype.eachLine=Dr.prototype.iter;var Nu=0;function Ra(t){var i=this;if(Mu(i),!Le(i,t)&&!Sn(i.display,t)){je(t),E&&(Nu=+new Date);var L=li(i,t,!0),_=t.dataTransfer.files;if(L&&!i.isReadOnly())if(_&&_.length&&window.FileReader&&window.File)for(var N=_.length,U=Array(N),re=0,fe=function(){++re==N&&pr(i,function(){var ze={from:L=Lt(i.doc,L),to:L,text:i.doc.splitLines(U.filter(function(rt){return null!=rt}).join(i.doc.lineSeparator())),origin:"paste"};En(i.doc,ze),uo(i.doc,Tn(Lt(i.doc,L),Lt(i.doc,Xn(ze))))})()},ve=function(ze,rt){if(i.options.allowDropFileTypes&&-1==Pt(i.options.allowDropFileTypes,ze.type))fe();else{var nt=new FileReader;nt.onerror=function(){return fe()},nt.onload=function(){var lt=nt.result;/[\x00-\x08\x0e-\x1f]{2}/.test(lt)||(U[rt]=lt),fe()},nt.readAsText(ze)}},xe=0;xe<_.length;xe++)ve(_[xe],xe);else{if(i.state.draggingText&&i.doc.sel.contains(L)>-1)return i.state.draggingText(t),void setTimeout(function(){return i.display.input.focus()},20);try{var Oe=t.dataTransfer.getData("Text");if(Oe){var Ue;if(i.state.draggingText&&!i.state.draggingText.copy&&(Ue=i.listSelections()),ao(i.doc,Tn(L,L)),Ue)for(var Ve=0;Ve<Ue.length;++Ve)pi(i.doc,"",Ue[Ve].anchor,Ue[Ve].head,"drag");i.replaceSelection(Oe,"around","paste"),i.display.input.focus()}}catch(ze){}}}}function Mu(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function ju(t){if(document.getElementsByClassName){for(var i=document.getElementsByClassName("CodeMirror"),L=[],_=0;_<i.length;_++){var N=i[_].CodeMirror;N&&L.push(N)}L.length&&L[0].operation(function(){for(var U=0;U<L.length;U++)t(L[U])})}}var Ou=!1;function Qa(){Ou||(function Ua(){var t;ne(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,ju(Ga)},100))}),ne(window,"blur",function(){return ju(_n)})}(),Ou=!0)}function Ga(t){var i=t.display;i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.scrollbarsClipped=!1,t.setSize()}for(var ln={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ii=0;Ii<10;Ii++)ln[Ii+48]=ln[Ii+96]=String(Ii);for(var ns=65;ns<=90;ns++)ln[ns]=String.fromCharCode(ns);for(var Jn=1;Jn<=12;Jn++)ln[Jn+111]=ln[Jn+63235]="F"+Jn;var gn={};function Ha(t){var i=t.split(/-(?!$)/);t=i[i.length-1];for(var L,_,N,U,re=0;re<i.length-1;re++){var fe=i[re];if(/^(cmd|meta|m)$/i.test(fe))U=!0;else if(/^a(lt)?$/i.test(fe))L=!0;else if(/^(c|ctrl|control)$/i.test(fe))_=!0;else{if(!/^s(hift)?$/i.test(fe))throw new Error("Unrecognized modifier name: "+fe);N=!0}}return L&&(t="Alt-"+t),_&&(t="Ctrl-"+t),U&&(t="Cmd-"+t),N&&(t="Shift-"+t),t}function Xa(t){var i={};for(var L in t)if(t.hasOwnProperty(L)){var _=t[L];if(/^(name|fallthrough|(de|at)tach)$/.test(L))continue;if("..."==_){delete t[L];continue}for(var N=Ut(L.split(" "),Ha),U=0;U<N.length;U++){var re=void 0,fe=void 0;U==N.length-1?(fe=N.join(" "),re=_):(fe=N.slice(0,U+1).join(" "),re="...");var ve=i[fe];if(ve){if(ve!=re)throw new Error("Inconsistent bindings for "+fe)}else i[fe]=re}delete t[L]}for(var xe in i)t[xe]=i[xe];return t}function In(t,i,L,_){var N=(i=Ni(i)).call?i.call(t,_):i[t];if(!1===N)return"nothing";if("..."===N)return"multi";if(null!=N&&L(N))return"handled";if(i.fallthrough){if("[object Array]"!=Object.prototype.toString.call(i.fallthrough))return In(t,i.fallthrough,L,_);for(var U=0;U<i.fallthrough.length;U++){var re=In(t,i.fallthrough[U],L,_);if(re)return re}}}function go(t){var i="string"==typeof t?t:ln[t.keyCode];return"Ctrl"==i||"Alt"==i||"Shift"==i||"Mod"==i}function vo(t,i,L){var _=t;return i.altKey&&"Alt"!=_&&(t="Alt-"+t),(V?i.metaKey:i.ctrlKey)&&"Ctrl"!=_&&(t="Ctrl-"+t),(V?i.ctrlKey:i.metaKey)&&"Mod"!=_&&(t="Cmd-"+t),!L&&i.shiftKey&&"Shift"!=_&&(t="Shift-"+t),t}function il(t,i){if(s&&34==t.keyCode&&t.char)return!1;var L=ln[t.keyCode];return null!=L&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(L=t.code),vo(L,t,i))}function Ni(t){return"string"==typeof t?gn[t]:t}function Kn(t,i){for(var L=t.doc.sel.ranges,_=[],N=0;N<L.length;N++){for(var U=i(L[N]);_.length&&Tt(U.from,St(_).to)<=0;){var re=_.pop();if(Tt(re.from,U.from)<0){U.from=re.from;break}}_.push(U)}Qr(t,function(){for(var fe=_.length-1;fe>=0;fe--)pi(t.doc,"",_[fe].from,_[fe].to,"+delete");ai(t)})}function yo(t,i,L){var _=be(t.text,i+L,L);return _<0||_>t.text.length?null:_}function mo(t,i,L){var _=yo(t,i.ch,L);return null==_?null:new ot(i.line,_,L<0?"after":"before")}function Mi(t,i,L,_,N){if(t){"rtl"==i.doc.direction&&(N=-N);var U=X(L,i.doc.direction);if(U){var xe,re=N<0?St(U):U[0],ve=N<0==(1==re.level)?"after":"before";if(re.level>0||"rtl"==i.doc.direction){var Oe=ni(i,L);xe=N<0?L.text.length-1:0;var Ue=pn(i,Oe,xe).top;xe=Te(function(Ve){return pn(i,Oe,Ve).top==Ue},N<0==(1==re.level)?re.from:re.to-1,xe),"before"==ve&&(xe=yo(L,xe,1))}else xe=N<0?re.to:re.from;return new ot(_,xe,ve)}}return new ot(_,N<0?L.text.length:0,N<0?"before":"after")}gn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},gn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},gn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},gn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},gn.default=ee?gn.macDefault:gn.pcDefault;var Vn={selectAll:Lu,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),it)},killLine:function(t){return Kn(t,function(i){if(i.empty()){var L=bt(t.doc,i.head.line).text.length;return i.head.ch==L&&i.head.line<t.lastLine()?{from:i.head,to:ot(i.head.line+1,0)}:{from:i.head,to:ot(i.head.line,L)}}return{from:i.from(),to:i.to()}})},deleteLine:function(t){return Kn(t,function(i){return{from:ot(i.from().line,0),to:Lt(t.doc,ot(i.to().line+1,0))}})},delLineLeft:function(t){return Kn(t,function(i){return{from:ot(i.from().line,0),to:i.from()}})},delWrappedLineLeft:function(t){return Kn(t,function(i){var L=t.charCoords(i.head,"div").top+5;return{from:t.coordsChar({left:0,top:L},"div"),to:i.from()}})},delWrappedLineRight:function(t){return Kn(t,function(i){var L=t.charCoords(i.head,"div").top+5,_=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:L},"div");return{from:i.from(),to:_}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(ot(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(ot(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(i){return ol(t,i.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(i){return wo(t,i.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(i){return function is(t,i){var L=bt(t.doc,i),_=function Al(t){for(var i;i=No(t);)t=i.find(1,!0).line;return t}(L);return _!=L&&(i=qt(_)),Mi(!0,t,L,i,-1)}(t,i.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(i){var L=t.cursorCoords(i.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:L},"div")},ct)},goLineLeft:function(t){return t.extendSelectionsBy(function(i){var L=t.cursorCoords(i.head,"div").top+5;return t.coordsChar({left:0,top:L},"div")},ct)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(i){var L=t.cursorCoords(i.head,"div").top+5,_=t.coordsChar({left:0,top:L},"div");return _.ch<t.getLine(_.line).search(/\S/)?wo(t,i.head):_},ct)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var i=[],L=t.listSelections(),_=t.options.tabSize,N=0;N<L.length;N++){var U=L[N].from(),re=dt(t.getLine(U.line),U.ch,_);i.push(It(_-re%_))}t.replaceSelections(i)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Qr(t,function(){for(var i=t.listSelections(),L=[],_=0;_<i.length;_++)if(i[_].empty()){var N=i[_].head,U=bt(t.doc,N.line).text;if(U)if(N.ch==U.length&&(N=new ot(N.line,N.ch-1)),N.ch>0)N=new ot(N.line,N.ch+1),t.replaceRange(U.charAt(N.ch-1)+U.charAt(N.ch-2),ot(N.line,N.ch-2),N,"+transpose");else if(N.line>t.doc.first){var re=bt(t.doc,N.line-1).text;re&&(N=new ot(N.line,1),t.replaceRange(U.charAt(0)+t.doc.lineSeparator()+re.charAt(re.length-1),ot(N.line-1,re.length-1),N,"+transpose"))}L.push(new Gt(N,N))}t.setSelections(L)})},newlineAndIndent:function(t){return Qr(t,function(){for(var i=t.listSelections(),L=i.length-1;L>=0;L--)t.replaceRange(t.doc.lineSeparator(),i[L].anchor,i[L].head,"+input");i=t.listSelections();for(var _=0;_<i.length;_++)t.indentLine(i[_].from().line,null,!0);ai(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function ol(t,i){var L=bt(t.doc,i),_=rn(L);return _!=L&&(i=qt(_)),Mi(!0,t,_,i,1)}function wo(t,i){var L=ol(t,i.line),_=bt(t.doc,L.line),N=X(_,t.doc.direction);if(!N||0==N[0].level){var U=Math.max(L.ch,_.text.search(/\S/)),re=i.line==L.line&&i.ch<=U&&i.ch;return ot(L.line,re?0:U,L.sticky)}return L}function gi(t,i,L){if("string"==typeof i&&!(i=Vn[i]))return!1;t.display.input.ensurePolled();var _=t.display.shift,N=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),L&&(t.display.shift=!1),N=i(t)!=tt}finally{t.display.shift=_,t.state.suppressEdits=!1}return N}var ji=new xt;function vn(t,i,L,_){var N=t.state.keySeq;if(N){if(go(i))return"handled";if(/\'$/.test(i)?t.state.keySeq=null:ji.set(50,function(){t.state.keySeq==N&&(t.state.keySeq=null,t.display.input.reset())}),vi(t,N+" "+i,L,_))return!0}return vi(t,i,L,_)}function vi(t,i,L,_){var N=function os(t,i,L){for(var _=0;_<t.state.keyMaps.length;_++){var N=In(i,t.state.keyMaps[_],L,t);if(N)return N}return t.options.extraKeys&&In(i,t.options.extraKeys,L,t)||In(i,t.options.keyMap,L,t)}(t,i,_);return"multi"==N&&(t.state.keySeq=i),"handled"==N&&hr(t,"keyHandled",t,i,L),("handled"==N||"multi"==N)&&(je(L),ki(t)),!!N}function yi(t,i){var L=il(i,!0);return!!L&&(i.shiftKey&&!t.state.keySeq?vn(t,"Shift-"+L,i,function(_){return gi(t,_,!0)})||vn(t,L,i,function(_){if("string"==typeof _?/^go[A-Z]/.test(_):_.motion)return gi(t,_)}):vn(t,L,i,function(_){return gi(t,_)}))}var ss=null;function sl(t){var i=this;if(!(t.target&&t.target!=i.display.input.getField()||(i.curOp.focus=oe(),Le(i,t)))){E&&F<11&&27==t.keyCode&&(t.returnValue=!1);var L=t.keyCode;i.display.shift=16==L||t.shiftKey;var _=yi(i,t);s&&(ss=_?L:null,!_&&88==L&&!jr&&(ee?t.metaKey:t.ctrlKey)&&i.replaceSelection("",null,"cut")),Be&&!ee&&!_&&46==L&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==L&&!/\bCodeMirror-crosshair\b/.test(i.display.lineDiv.className)&&function Bu(t){var i=t.display.lineDiv;function L(_){(18==_.keyCode||!_.altKey)&&(ge(i,"CodeMirror-crosshair"),ue(document,"keyup",L),ue(document,"mouseover",L))}me(i,"CodeMirror-crosshair"),ne(document,"keyup",L),ne(document,"mouseover",L)}(i)}}function ll(t){16==t.keyCode&&(this.doc.sel.shift=!1),Le(this,t)}function ul(t){var i=this;if(!(t.target&&t.target!=i.display.input.getField()||Sn(i.display,t)||Le(i,t)||t.ctrlKey&&!t.altKey||ee&&t.metaKey)){var L=t.keyCode,_=t.charCode;if(s&&L==ss)return ss=null,void je(t);if(!s||t.which&&!(t.which<10)||!yi(i,t)){var N=String.fromCharCode(null==_?L:_);"\b"!=N&&(function Ru(t,i,L){return vn(t,"'"+L+"'",i,function(_){return gi(t,_,!0)})}(i,t,N)||i.display.input.onKeyPress(t))}}}var xo,Co,ls=function(t,i,L){this.time=t,this.pos=i,this.button=L};function un(t){var i=this,L=i.display;if(!(Le(i,t)||L.activeTouch&&L.input.supportsTouch())){if(L.input.ensurePolled(),L.shift=t.shiftKey,Sn(L,t))return void(I||(L.scroller.draggable=!1,setTimeout(function(){return L.scroller.draggable=!0},100)));if(!fl(i,t)){var _=li(i,t),N=Ft(t),U=_?function yn(t,i){var L=+new Date;return Co&&Co.compare(L,t,i)?(xo=Co=null,"triple"):xo&&xo.compare(L,t,i)?(Co=new ls(L,t,i),xo=null,"double"):(xo=new ls(L,t,i),Co=null,"single")}(_,N):"single";window.focus(),1==N&&i.state.selectingText&&i.state.selectingText(t),(!_||!function Wa(t,i,L,_,N){var U="Click";return"double"==_?U="Double"+U:"triple"==_&&(U="Triple"+U),vn(t,vo(U=(1==i?"Left":2==i?"Middle":"Right")+U,N),N,function(re){if("string"==typeof re&&(re=Vn[re]),!re)return!1;var fe=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),fe=re(t,L)!=tt}finally{t.state.suppressEdits=!1}return fe})}(i,N,_,U,t))&&(1==N?_?function za(t,i,L,_){E?setTimeout(et(js,t),0):t.curOp.focus=oe();var re,N=function qa(t,i,L){var _=t.getOption("configureMouse"),N=_?_(t,i,L):{};if(null==N.unit){var U=se?L.shiftKey&&L.metaKey:L.altKey;N.unit=U?"rectangle":"single"==i?"char":"double"==i?"word":"line"}return(null==N.extend||t.doc.extend)&&(N.extend=t.doc.extend||L.shiftKey),null==N.addNew&&(N.addNew=ee?L.metaKey:L.ctrlKey),null==N.moveOnDrag&&(N.moveOnDrag=!(ee?L.altKey:L.ctrlKey)),N}(t,L,_),U=t.doc.sel;t.options.dragDrop&&mt&&!t.isReadOnly()&&"single"==L&&(re=U.contains(i))>-1&&(Tt((re=U.ranges[re]).from(),i)<0||i.xRel>0)&&(Tt(re.to(),i)>0||i.xRel<0)?function Ja(t,i,L,_){var N=t.display,U=!1,re=pr(t,function(xe){I&&(N.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:Si(t)),ue(N.wrapper.ownerDocument,"mouseup",re),ue(N.wrapper.ownerDocument,"mousemove",fe),ue(N.scroller,"dragstart",ve),ue(N.scroller,"drop",re),U||(je(xe),_.addNew||Zo(t.doc,L,null,null,_.extend),I&&!D||E&&9==F?setTimeout(function(){N.wrapper.ownerDocument.body.focus({preventScroll:!0}),N.input.focus()},20):N.input.focus())}),fe=function(xe){U=U||Math.abs(i.clientX-xe.clientX)+Math.abs(i.clientY-xe.clientY)>=10},ve=function(){return U=!0};I&&(N.scroller.draggable=!0),t.state.draggingText=re,re.copy=!_.moveOnDrag,ne(N.wrapper.ownerDocument,"mouseup",re),ne(N.wrapper.ownerDocument,"mousemove",fe),ne(N.scroller,"dragstart",ve),ne(N.scroller,"drop",re),t.state.delayingBlurEvent=!0,setTimeout(function(){return N.input.focus()},20),N.scroller.dragDrop&&N.scroller.dragDrop()}(t,_,i,N):function Uu(t,i,L,_){E&&Si(t);var N=t.display,U=t.doc;je(i);var re,fe,ve=U.sel,xe=ve.ranges;if(_.addNew&&!_.extend?re=(fe=U.sel.contains(L))>-1?xe[fe]:new Gt(L,L):(re=U.sel.primary(),fe=U.sel.primIndex),"rectangle"==_.unit)_.addNew||(re=new Gt(L,L)),L=li(t,i,!0,!0),fe=-1;else{var Oe=Qu(t,L,_.unit);re=_.extend?Ys(re,Oe.anchor,Oe.head,_.extend):Oe}_.addNew?-1==fe?(fe=xe.length,fr(U,Ur(t,xe.concat([re]),fe),{scroll:!1,origin:"*mouse"})):xe.length>1&&xe[fe].empty()&&"char"==_.unit&&!_.extend?(fr(U,Ur(t,xe.slice(0,fe).concat(xe.slice(fe+1)),0),{scroll:!1,origin:"*mouse"}),ve=U.sel):Zs(U,fe,re,vt):(fe=0,fr(U,new Er([re],0),vt),ve=U.sel);var Ue=L;function Ve(ft){if(0!=Tt(Ue,ft))if(Ue=ft,"rectangle"==_.unit){for(var gt=[],_t=t.options.tabSize,kt=dt(bt(U,L.line).text,L.ch,_t),Mt=dt(bt(U,ft.line).text,ft.ch,_t),zt=Math.min(kt,Mt),yr=Math.max(kt,Mt),Vt=Math.min(L.line,ft.line),Gr=Math.min(t.lastLine(),Math.max(L.line,ft.line));Vt<=Gr;Vt++){var Ir=bt(U,Vt).text,lr=At(Ir,zt,_t);zt==yr?gt.push(new Gt(ot(Vt,lr),ot(Vt,lr))):Ir.length>lr&&gt.push(new Gt(ot(Vt,lr),ot(Vt,At(Ir,yr,_t))))}gt.length||gt.push(new Gt(L,L)),fr(U,Ur(t,ve.ranges.slice(0,fe).concat(gt),fe),{origin:"*mouse",scroll:!1}),t.scrollIntoView(ft)}else{var nr,Nr=re,Cr=Qu(t,ft,_.unit),ur=Nr.anchor;Tt(Cr.anchor,ur)>0?(nr=Cr.head,ur=Fo(Nr.from(),Cr.anchor)):(nr=Cr.anchor,ur=So(Nr.to(),Cr.head));var er=ve.ranges.slice(0);er[fe]=function Ka(t,i){var L=i.anchor,_=i.head,N=bt(t.doc,L.line);if(0==Tt(L,_)&&L.sticky==_.sticky)return i;var U=X(N);if(!U)return i;var re=G(U,L.ch,L.sticky),fe=U[re];if(fe.from!=L.ch&&fe.to!=L.ch)return i;var xe,ve=re+(fe.from==L.ch==(1!=fe.level)?0:1);if(0==ve||ve==U.length)return i;if(_.line!=L.line)xe=(_.line-L.line)*("ltr"==t.doc.direction?1:-1)>0;else{var Oe=G(U,_.ch,_.sticky),Ue=Oe-re||(_.ch-L.ch)*(1==fe.level?-1:1);xe=Oe==ve-1||Oe==ve?Ue<0:Ue>0}var Ve=U[ve+(xe?-1:0)],ze=xe==(1==Ve.level),rt=ze?Ve.from:Ve.to,nt=ze?"after":"before";return L.ch==rt&&L.sticky==nt?i:new Gt(new ot(L.line,rt,nt),_)}(t,new Gt(Lt(U,ur),nr)),fr(U,Ur(t,er,fe),vt)}}var ze=N.wrapper.getBoundingClientRect(),rt=0;function nt(ft){var gt=++rt,_t=li(t,ft,!0,"rectangle"==_.unit);if(_t)if(0!=Tt(_t,Ue)){t.curOp.focus=oe(),Ve(_t);var kt=An(N,U);(_t.line>=kt.to||_t.line<kt.from)&&setTimeout(pr(t,function(){rt==gt&&nt(ft)}),150)}else{var Mt=ft.clientY<ze.top?-20:ft.clientY>ze.bottom?20:0;Mt&&setTimeout(pr(t,function(){rt==gt&&(N.scroller.scrollTop+=Mt,nt(ft))}),50)}}function lt(ft){t.state.selectingText=!1,rt=1/0,ft&&(je(ft),N.input.focus()),ue(N.wrapper.ownerDocument,"mousemove",at),ue(N.wrapper.ownerDocument,"mouseup",pt),U.history.lastSelOrigin=null}var at=pr(t,function(ft){0!==ft.buttons&&Ft(ft)?nt(ft):lt(ft)}),pt=pr(t,lt);t.state.selectingText=pt,ne(N.wrapper.ownerDocument,"mousemove",at),ne(N.wrapper.ownerDocument,"mouseup",pt)}(t,_,i,N)}(i,_,U,t):Ke(t)==L.scroller&&je(t):2==N?(_&&Zo(i.doc,_),setTimeout(function(){return L.input.focus()},20)):3==N&&(W?i.display.input.onContextMenu(t):Si(i)))}}}function Qu(t,i,L){if("char"==L)return new Gt(i,i);if("word"==L)return t.findWordAt(i);if("line"==L)return new Gt(ot(i.line,0),Lt(t.doc,ot(i.line+1,0)));var _=L(t,i);return new Gt(_.from,_.to)}function al(t,i,L,_){var N,U;if(i.touches)N=i.touches[0].clientX,U=i.touches[0].clientY;else try{N=i.clientX,U=i.clientY}catch(Ve){return!1}if(N>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;_&&je(i);var re=t.display,fe=re.lineDiv.getBoundingClientRect();if(U>fe.bottom||!Me(t,L))return He(i);U-=fe.top-re.viewOffset;for(var ve=0;ve<t.display.gutterSpecs.length;++ve){var xe=re.gutters.childNodes[ve];if(xe&&xe.getBoundingClientRect().right>=N)return we(t,L,t,jn(t.doc,U),t.display.gutterSpecs[ve].className,i),He(i)}}function fl(t,i){return al(t,i,"gutterClick",!0)}function cl(t,i){Sn(t.display,i)||function Va(t,i){return!!Me(t,"gutterContextMenu")&&al(t,i,"gutterContextMenu",!1)}(t,i)||Le(t,i,"contextmenu")||W||t.display.input.onContextMenu(i)}function hl(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),xi(t)}ls.prototype.compare=function(t,i,L){return this.time+400>t&&0==Tt(i,this.pos)&&L==this.button};var Oi={toString:function(){return"CodeMirror.Init"}},pl={},us={};function Ya(t,i,L){if(!i!=!(L&&L!=Oi)){var N=t.display.dragFunctions,U=i?ne:ue;U(t.display.scroller,"dragstart",N.start),U(t.display.scroller,"dragenter",N.enter),U(t.display.scroller,"dragover",N.over),U(t.display.scroller,"dragleave",N.leave),U(t.display.scroller,"drop",N.drop)}}function Hu(t){t.options.lineWrapping?(me(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(ge(t.display.wrapper,"CodeMirror-wrap"),bs(t)),eo(t),Or(t),xi(t),setTimeout(function(){return _i(t)},100)}function Kt(t,i){var L=this;if(!(this instanceof Kt))return new Kt(t,i);this.options=i=i?st(i):{},st(pl,i,!1);var _=i.value;"string"==typeof _?_=new Dr(_,i.mode,null,i.lineSeparator,i.direction):i.mode&&(_.modeOption=i.mode),this.doc=_;var N=new Kt.inputStyles[i.inputStyle](this),U=this.display=new Aa(t,_,N,i);for(var re in U.wrapper.CodeMirror=this,hl(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ci(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new xt,keySeq:null,specialChars:null},i.autofocus&&!le&&U.input.focus(),E&&F<11&&setTimeout(function(){return L.display.input.reset(!0)},20),function Xu(t){var i=t.display;ne(i.scroller,"mousedown",pr(t,un)),ne(i.scroller,"dblclick",E&&F<11?pr(t,function(ve){if(!Le(t,ve)){var xe=li(t,ve);if(xe&&!fl(t,ve)&&!Sn(t.display,ve)){je(ve);var Oe=t.findWordAt(xe);Zo(t.doc,Oe.anchor,Oe.head)}}}):function(ve){return Le(t,ve)||je(ve)}),ne(i.scroller,"contextmenu",function(ve){return cl(t,ve)}),ne(i.input.getField(),"contextmenu",function(ve){i.scroller.contains(ve.target)||cl(t,ve)});var L,_={end:0};function N(){i.activeTouch&&(L=setTimeout(function(){return i.activeTouch=null},1e3),(_=i.activeTouch).end=+new Date)}function U(ve){if(1!=ve.touches.length)return!1;var xe=ve.touches[0];return xe.radiusX<=1&&xe.radiusY<=1}function re(ve,xe){if(null==xe.left)return!0;var Oe=xe.left-ve.left,Ue=xe.top-ve.top;return Oe*Oe+Ue*Ue>400}ne(i.scroller,"touchstart",function(ve){if(!Le(t,ve)&&!U(ve)&&!fl(t,ve)){i.input.ensurePolled(),clearTimeout(L);var xe=+new Date;i.activeTouch={start:xe,moved:!1,prev:xe-_.end<=300?_:null},1==ve.touches.length&&(i.activeTouch.left=ve.touches[0].pageX,i.activeTouch.top=ve.touches[0].pageY)}}),ne(i.scroller,"touchmove",function(){i.activeTouch&&(i.activeTouch.moved=!0)}),ne(i.scroller,"touchend",function(ve){var xe=i.activeTouch;if(xe&&!Sn(i,ve)&&null!=xe.left&&!xe.moved&&new Date-xe.start<300){var Ue,Oe=t.coordsChar(i.activeTouch,"page");Ue=!xe.prev||re(xe,xe.prev)?new Gt(Oe,Oe):!xe.prev.prev||re(xe,xe.prev.prev)?t.findWordAt(Oe):new Gt(ot(Oe.line,0),Lt(t.doc,ot(Oe.line+1,0))),t.setSelection(Ue.anchor,Ue.head),t.focus(),je(ve)}N()}),ne(i.scroller,"touchcancel",N),ne(i.scroller,"scroll",function(){i.scroller.clientHeight&&(no(t,i.scroller.scrollTop),Un(t,i.scroller.scrollLeft,!0),we(t,"scroll",t))}),ne(i.scroller,"mousewheel",function(ve){return du(t,ve)}),ne(i.scroller,"DOMMouseScroll",function(ve){return du(t,ve)}),ne(i.wrapper,"scroll",function(){return i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),i.dragFunctions={enter:function(ve){Le(t,ve)||Ze(ve)},over:function(ve){Le(t,ve)||(function Pa(t,i){var L=li(t,i);if(L){var _=document.createDocumentFragment();Ms(t,L,_),t.display.dragCursor||(t.display.dragCursor=Se("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),_e(t.display.dragCursor,_)}}(t,ve),Ze(ve))},start:function(ve){return function Ba(t,i){if(E&&(!t.state.draggingText||+new Date-Nu<100))Ze(i);else if(!Le(t,i)&&!Sn(t.display,i)&&(i.dataTransfer.setData("Text",t.getSelection()),i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setDragImage&&!D)){var L=Se("img",null,null,"position: fixed; left: 0; top: 0;");L.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",s&&(L.width=L.height=1,t.display.wrapper.appendChild(L),L._top=L.offsetTop),i.dataTransfer.setDragImage(L,0,0),s&&L.parentNode.removeChild(L)}}(t,ve)},drop:pr(t,Ra),leave:function(ve){Le(t,ve)||Mu(t)}};var fe=i.input.getField();ne(fe,"keyup",function(ve){return ll.call(t,ve)}),ne(fe,"keydown",pr(t,sl)),ne(fe,"keypress",pr(t,ul)),ne(fe,"focus",function(ve){return Xo(t,ve)}),ne(fe,"blur",function(ve){return _n(t,ve)})}(this),Qa(),hi(this),this.curOp.forceUpdate=!0,vu(this,_),i.autofocus&&!le||this.hasFocus()?setTimeout(function(){L.hasFocus()&&!L.state.focused&&Xo(L)},20):_n(this),us)us.hasOwnProperty(re)&&us[re](this,i[re],Oi);pu(this),i.finishInit&&i.finishInit(this);for(var fe=0;fe<dl.length;++fe)dl[fe](this);Hn(this),I&&i.lineWrapping&&"optimizelegibility"==getComputedStyle(U.lineDiv).textRendering&&(U.lineDiv.style.textRendering="auto")}Kt.defaults=pl,Kt.optionHandlers=us;var dl=[];function Di(t,i,L,_){var U,N=t.doc;null==L&&(L="add"),"smart"==L&&(N.mode.indent?U=qr(t,i).state:L="prev");var re=t.options.tabSize,fe=bt(N,i),ve=dt(fe.text,null,re);fe.stateAfter&&(fe.stateAfter=null);var Oe,xe=fe.text.match(/^\s*/)[0];if(_||/\S/.test(fe.text)){if("smart"==L&&((Oe=N.mode.indent(U,fe.text.slice(xe.length),fe.text))==tt||Oe>150)){if(!_)return;L="prev"}}else Oe=0,L="not";"prev"==L?Oe=i>N.first?dt(bt(N,i-1).text,null,re):0:"add"==L?Oe=ve+t.options.indentUnit:"subtract"==L?Oe=ve-t.options.indentUnit:"number"==typeof L&&(Oe=ve+L),Oe=Math.max(0,Oe);var Ue="",Ve=0;if(t.options.indentWithTabs)for(var ze=Math.floor(Oe/re);ze;--ze)Ve+=re,Ue+="\t";if(Ve<Oe&&(Ue+=It(Oe-Ve)),Ue!=xe)return pi(N,Ue,ot(i,0),ot(i,xe.length),"+input"),fe.stateAfter=null,!0;for(var rt=0;rt<N.sel.ranges.length;rt++){var nt=N.sel.ranges[rt];if(nt.head.line==i&&nt.head.ch<xe.length){var lt=ot(i,xe.length);Zs(N,rt,new Gt(lt,lt));break}}}Kt.defineInitHook=function(t){return dl.push(t)};var an=null;function bo(t){an=t}function gl(t,i,L,_,N){var U=t.doc;t.display.shift=!1,_||(_=U.sel);var re=+new Date-200,fe="paste"==N||t.state.pasteIncoming>re,ve=Zt(i),xe=null;if(fe&&_.ranges.length>1)if(an&&an.text.join("\n")==i){if(_.ranges.length%an.text.length==0){xe=[];for(var Oe=0;Oe<an.text.length;Oe++)xe.push(U.splitLines(an.text[Oe]))}}else ve.length==_.ranges.length&&t.options.pasteLinesPerSelection&&(xe=Ut(ve,function(at){return[at]}));for(var Ue=t.curOp.updateInput,Ve=_.ranges.length-1;Ve>=0;Ve--){var ze=_.ranges[Ve],rt=ze.from(),nt=ze.to();ze.empty()&&(L&&L>0?rt=ot(rt.line,rt.ch-L):t.state.overwrite&&!fe?nt=ot(nt.line,Math.min(bt(U,nt.line).text.length,nt.ch+St(ve).length)):fe&&an&&an.lineWise&&an.text.join("\n")==ve.join("\n")&&(rt=nt=ot(rt.line,0)));var lt={from:rt,to:nt,text:xe?xe[Ve%xe.length]:ve,origin:N||(fe?"paste":t.state.cutIncoming>re?"cut":"+input")};En(t.doc,lt),hr(t,"inputRead",t,lt)}i&&!fe&&Wu(t,i),ai(t),t.curOp.updateInput<2&&(t.curOp.updateInput=Ue),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function vl(t,i){var L=t.clipboardData&&t.clipboardData.getData("Text");if(L)return t.preventDefault(),!i.isReadOnly()&&!i.options.disableInput&&i.hasFocus()&&Qr(i,function(){return gl(i,L,0,null,"paste")}),!0}function Wu(t,i){if(t.options.electricChars&&t.options.smartIndent)for(var L=t.doc.sel,_=L.ranges.length-1;_>=0;_--){var N=L.ranges[_];if(!(N.head.ch>100||_&&L.ranges[_-1].head.line==N.head.line)){var U=t.getModeAt(N.head),re=!1;if(U.electricChars){for(var fe=0;fe<U.electricChars.length;fe++)if(i.indexOf(U.electricChars.charAt(fe))>-1){re=Di(t,N.head.line,"smart");break}}else U.electricInput&&U.electricInput.test(bt(t.doc,N.head.line).text.slice(0,N.head.ch))&&(re=Di(t,N.head.line,"smart"));re&&hr(t,"electricInput",t,N.head.line)}}}function yl(t){for(var i=[],L=[],_=0;_<t.doc.sel.ranges.length;_++){var N=t.doc.sel.ranges[_].head.line,U={anchor:ot(N,0),head:ot(N+1,0)};L.push(U),i.push(t.getRange(U.anchor,U.head))}return{text:i,ranges:L}}function qu(t,i,L,_){t.setAttribute("autocorrect",L?"":"off"),t.setAttribute("autocapitalize",_?"":"off"),t.setAttribute("spellcheck",!!i)}function ml(){var t=Se("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),i=Se("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return I?t.style.width="1000px":t.setAttribute("wrap","off"),H&&(t.style.border="1px solid black"),qu(t),i}function as(t,i,L,_,N){var U=i,re=L,fe=bt(t,i.line),ve=N&&"rtl"==t.direction?-L:L;function Oe(pt){var ft;if("codepoint"==_){var gt=fe.text.charCodeAt(i.ch+(L>0?0:-1));if(isNaN(gt))ft=null;else{var _t=L>0?gt>=55296&&gt<56320:gt>=56320&&gt<57343;ft=new ot(i.line,Math.max(0,Math.min(fe.text.length,i.ch+L*(_t?2:1))),-L)}}else ft=N?function Du(t,i,L,_){var N=X(i,t.doc.direction);if(!N)return mo(i,L,_);L.ch>=i.text.length?(L.ch=i.text.length,L.sticky="before"):L.ch<=0&&(L.ch=0,L.sticky="after");var U=G(N,L.ch,L.sticky),re=N[U];if("ltr"==t.doc.direction&&re.level%2==0&&(_>0?re.to>L.ch:re.from<L.ch))return mo(i,L,_);var ve,fe=function(at,pt){return yo(i,at instanceof ot?at.ch:at,pt)},xe=function(at){return t.options.lineWrapping?(ve=ve||ni(t,i),Yl(t,i,ve,at)):{begin:0,end:i.text.length}},Oe=xe("before"==L.sticky?fe(L,-1):L.ch);if("rtl"==t.doc.direction||1==re.level){var Ue=1==re.level==_<0,Ve=fe(L,Ue?1:-1);if(null!=Ve&&(Ue?Ve<=re.to&&Ve<=Oe.end:Ve>=re.from&&Ve>=Oe.begin)){var ze=Ue?"before":"after";return new ot(L.line,Ve,ze)}}var rt=function(at,pt,ft){for(;at>=0&&at<N.length;at+=pt){var _t=N[at],kt=pt>0==(1!=_t.level),Mt=kt?ft.begin:fe(ft.end,-1);if(_t.from<=Mt&&Mt<_t.to||(Mt=kt?_t.from:fe(_t.to,-1),ft.begin<=Mt&&Mt<ft.end))return zt=Mt,kt?new ot(L.line,fe(zt,1),"before"):new ot(L.line,zt,"after")}var zt},nt=rt(U+_,_,Oe);if(nt)return nt;var lt=_>0?Oe.end:fe(Oe.begin,-1);return null==lt||_>0&&lt==i.text.length||!(nt=rt(_>0?0:N.length-1,_,xe(lt)))?null:nt}(t.cm,fe,i,L):mo(fe,i,L);if(null==ft){if(pt||!function xe(){var pt=i.line+ve;return!(pt<t.first||pt>=t.first+t.size)&&(i=new ot(pt,i.ch,i.sticky),fe=bt(t,pt))}())return!1;i=Mi(N,t.cm,fe,i.line,ve)}else i=ft;return!0}if("char"==_||"codepoint"==_)Oe();else if("column"==_)Oe(!0);else if("word"==_||"group"==_)for(var Ue=null,Ve="group"==_,ze=t.cm&&t.cm.getHelper(i,"wordChars"),rt=!0;!(L<0)||Oe(!rt);rt=!1){var nt=fe.text.charAt(i.ch)||"\n",lt=Xe(nt,ze)?"w":Ve&&"\n"==nt?"n":!Ve||/\s/.test(nt)?null:"p";if(Ve&&!rt&&!lt&&(lt="s"),Ue&&Ue!=lt){L<0&&(L=1,Oe(),i.sticky="after");break}if(lt&&(Ue=lt),L>0&&!Oe(!rt))break}var at=$o(t,i,U,re,!0);return ko(U,at)&&(at.hitSide=!0),at}function zu(t,i,L,_){var re,xe,N=t.doc,U=i.left;if("page"==_){var fe=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),ve=Math.max(fe-.5*oi(t.display),3);re=(L>0?i.bottom:i.top)+L*ve}else"line"==_&&(re=L>0?i.bottom+3:i.top-3);for(;(xe=Is(t,U,re)).outside;){if(L<0?re<=0:re>=N.height){xe.hitSide=!0;break}re+=5*L}return xe}var Xt=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new xt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ju(t,i){var L=Ts(t,i.line);if(!L||L.hidden)return null;var _=bt(t.doc,i.line),N=Gl(L,_,i.line),U=X(_,t.doc.direction),re="left";U&&(re=G(U,i.ch)%2?"right":"left");var ve=Yi(N.map,i.ch,re);return ve.offset="right"==ve.collapse?ve.end:ve.start,ve}function Ri(t,i){return i&&(t.bad=!0),t}function fs(t,i,L){var _;if(i==t.display.lineDiv){if(!(_=t.display.lineDiv.childNodes[L]))return Ri(t.clipPos(ot(t.display.viewTo-1)),!0);i=null,L=0}else for(_=i;;_=_.parentNode){if(!_||_==t.display.lineDiv)return null;if(_.parentNode&&_.parentNode==t.display.lineDiv)break}for(var N=0;N<t.display.view.length;N++){var U=t.display.view[N];if(U.node==_)return Yu(U,i,L)}}function Yu(t,i,L){var _=t.text.firstChild,N=!1;if(!i||!Fe(_,i))return Ri(ot(qt(t.line),0),!0);if(i==_&&(N=!0,i=_.childNodes[L],L=0,!i)){var U=t.rest?St(t.rest):t.line;return Ri(ot(qt(U),U.text.length),N)}var re=3==i.nodeType?i:null,fe=i;for(!re&&1==i.childNodes.length&&3==i.firstChild.nodeType&&(re=i.firstChild,L&&(L=re.nodeValue.length));fe.parentNode!=_;)fe=fe.parentNode;var ve=t.measure,xe=ve.maps;function Oe(lt,at,pt){for(var ft=-1;ft<(xe?xe.length:0);ft++)for(var gt=ft<0?ve.map:xe[ft],_t=0;_t<gt.length;_t+=3){var kt=gt[_t+2];if(kt==lt||kt==at){var Mt=qt(ft<0?t.line:t.rest[ft]),zt=gt[_t]+pt;return(pt<0||kt!=lt)&&(zt=gt[_t+(pt?1:0)]),ot(Mt,zt)}}}var Ue=Oe(re,fe,L);if(Ue)return Ri(Ue,N);for(var Ve=fe.nextSibling,ze=re?re.nodeValue.length-L:0;Ve;Ve=Ve.nextSibling){if(Ue=Oe(Ve,Ve.firstChild,0))return Ri(ot(Ue.line,Ue.ch-ze),N);ze+=Ve.textContent.length}for(var rt=fe.previousSibling,nt=L;rt;rt=rt.previousSibling){if(Ue=Oe(rt,rt.firstChild,-1))return Ri(ot(Ue.line,Ue.ch+nt),N);nt+=rt.textContent.length}}Xt.prototype.init=function(t){var i=this,L=this,_=L.cm,N=L.div=t.lineDiv;function U(fe){for(var ve=fe.target;ve;ve=ve.parentNode){if(ve==N)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(ve.className))break}return!1}function re(fe){if(U(fe)&&!Le(_,fe)){if(_.somethingSelected())bo({lineWise:!1,text:_.getSelections()}),"cut"==fe.type&&_.replaceSelection("",null,"cut");else{if(!_.options.lineWiseCopyCut)return;var ve=yl(_);bo({lineWise:!0,text:ve.text}),"cut"==fe.type&&_.operation(function(){_.setSelections(ve.ranges,0,it),_.replaceSelection("",null,"cut")})}if(fe.clipboardData){fe.clipboardData.clearData();var xe=an.text.join("\n");if(fe.clipboardData.setData("Text",xe),fe.clipboardData.getData("Text")==xe)return void fe.preventDefault()}var Oe=ml(),Ue=Oe.firstChild;_.display.lineSpace.insertBefore(Oe,_.display.lineSpace.firstChild),Ue.value=an.text.join("\n");var Ve=oe();qe(Ue),setTimeout(function(){_.display.lineSpace.removeChild(Oe),Ve.focus(),Ve==N&&L.showPrimarySelection()},50)}}N.contentEditable=!0,qu(N,_.options.spellcheck,_.options.autocorrect,_.options.autocapitalize),ne(N,"paste",function(fe){!U(fe)||Le(_,fe)||vl(fe,_)||F<=11&&setTimeout(pr(_,function(){return i.updateFromDOM()}),20)}),ne(N,"compositionstart",function(fe){i.composing={data:fe.data,done:!1}}),ne(N,"compositionupdate",function(fe){i.composing||(i.composing={data:fe.data,done:!1})}),ne(N,"compositionend",function(fe){i.composing&&(fe.data!=i.composing.data&&i.readFromDOMSoon(),i.composing.done=!0)}),ne(N,"touchstart",function(){return L.forceCompositionEnd()}),ne(N,"input",function(){i.composing||i.readFromDOMSoon()}),ne(N,"copy",re),ne(N,"cut",re)},Xt.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},Xt.prototype.prepareSelection=function(){var t=tu(this.cm,!1);return t.focus=oe()==this.div,t},Xt.prototype.showSelection=function(t,i){!t||!this.cm.display.view.length||((t.focus||i)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Xt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Xt.prototype.showPrimarySelection=function(){var t=this.getSelection(),i=this.cm,L=i.doc.sel.primary(),_=L.from(),N=L.to();if(i.display.viewTo==i.display.viewFrom||_.line>=i.display.viewTo||N.line<i.display.viewFrom)t.removeAllRanges();else{var U=fs(i,t.anchorNode,t.anchorOffset),re=fs(i,t.focusNode,t.focusOffset);if(!U||U.bad||!re||re.bad||0!=Tt(Fo(U,re),_)||0!=Tt(So(U,re),N)){var fe=i.display.view,ve=_.line>=i.display.viewFrom&&Ju(i,_)||{node:fe[0].measure.map[2],offset:0},xe=N.line<i.display.viewTo&&Ju(i,N);if(!xe){var Oe=fe[fe.length-1].measure,Ue=Oe.maps?Oe.maps[Oe.maps.length-1]:Oe.map;xe={node:Ue[Ue.length-1],offset:Ue[Ue.length-2]-Ue[Ue.length-3]}}if(!ve||!xe)return void t.removeAllRanges();var ze,Ve=t.rangeCount&&t.getRangeAt(0);try{ze=$e(ve.node,ve.offset,xe.offset,xe.node)}catch(rt){}ze&&(!Be&&i.state.focused?(t.collapse(ve.node,ve.offset),ze.collapsed||(t.removeAllRanges(),t.addRange(ze))):(t.removeAllRanges(),t.addRange(ze)),Ve&&null==t.anchorNode?t.addRange(Ve):Be&&this.startGracePeriod()),this.rememberSelection()}}},Xt.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},Xt.prototype.showMultipleSelections=function(t){_e(this.cm.display.cursorDiv,t.cursors),_e(this.cm.display.selectionDiv,t.selection)},Xt.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Xt.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var i=t.getRangeAt(0).commonAncestorContainer;return Fe(this.div,i)},Xt.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||oe()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Xt.prototype.blur=function(){this.div.blur()},Xt.prototype.getField=function(){return this.div},Xt.prototype.supportsTouch=function(){return!0},Xt.prototype.receivedFocus=function(){var t=this,i=this;this.selectionInEditor()?setTimeout(function(){return t.pollSelection()},20):Qr(this.cm,function(){return i.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function L(){i.cm.state.focused&&(i.pollSelection(),i.polling.set(i.cm.options.pollInterval,L))})},Xt.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Xt.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),i=this.cm;if(ce&&j&&this.cm.display.gutterSpecs.length&&function Ku(t){for(var i=t;i;i=i.parentNode)if(/CodeMirror-gutter-wrapper/.test(i.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var L=fs(i,t.anchorNode,t.anchorOffset),_=fs(i,t.focusNode,t.focusOffset);L&&_&&Qr(i,function(){fr(i.doc,Tn(L,_),it),(L.bad||_.bad)&&(i.curOp.selectionChanged=!0)})}}},Xt.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var U,re,fe,t=this.cm,i=t.display,L=t.doc.sel.primary(),_=L.from(),N=L.to();if(0==_.ch&&_.line>t.firstLine()&&(_=ot(_.line-1,bt(t.doc,_.line-1).length)),N.ch==bt(t.doc,N.line).text.length&&N.line<t.lastLine()&&(N=ot(N.line+1,0)),_.line<i.viewFrom||N.line>i.viewTo-1)return!1;_.line==i.viewFrom||0==(U=Pn(t,_.line))?(re=qt(i.view[0].line),fe=i.view[0].node):(re=qt(i.view[U].line),fe=i.view[U-1].node.nextSibling);var xe,Oe,ve=Pn(t,N.line);if(ve==i.view.length-1?(xe=i.viewTo-1,Oe=i.lineDiv.lastChild):(xe=qt(i.view[ve+1].line)-1,Oe=i.view[ve+1].node.previousSibling),!fe)return!1;for(var Ue=t.doc.splitLines(function Vu(t,i,L,_,N){var U="",re=!1,fe=t.doc.lineSeparator(),ve=!1;function xe(ze){return function(rt){return rt.id==ze}}function Oe(){re&&(U+=fe,ve&&(U+=fe),re=ve=!1)}function Ue(ze){ze&&(Oe(),U+=ze)}function Ve(ze){if(1==ze.nodeType){var rt=ze.getAttribute("cm-text");if(rt)return void Ue(rt);var lt,nt=ze.getAttribute("cm-marker");if(nt){var at=t.findMarks(ot(_,0),ot(N+1,0),xe(+nt));return void(at.length&&(lt=at[0].find(0))&&Ue($n(t.doc,lt.from,lt.to).join(fe)))}if("false"==ze.getAttribute("contenteditable"))return;var pt=/^(pre|div|p|li|table|br)$/i.test(ze.nodeName);if(!/^br$/i.test(ze.nodeName)&&0==ze.textContent.length)return;pt&&Oe();for(var ft=0;ft<ze.childNodes.length;ft++)Ve(ze.childNodes[ft]);/^(pre|p)$/i.test(ze.nodeName)&&(ve=!0),pt&&(re=!0)}else 3==ze.nodeType&&Ue(ze.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ve(i),i!=L;)i=i.nextSibling,ve=!1;return U}(t,fe,Oe,re,xe)),Ve=$n(t.doc,ot(re,0),ot(xe,bt(t.doc,xe).text.length));Ue.length>1&&Ve.length>1;)if(St(Ue)==St(Ve))Ue.pop(),Ve.pop(),xe--;else{if(Ue[0]!=Ve[0])break;Ue.shift(),Ve.shift(),re++}for(var ze=0,rt=0,nt=Ue[0],lt=Ve[0],at=Math.min(nt.length,lt.length);ze<at&&nt.charCodeAt(ze)==lt.charCodeAt(ze);)++ze;for(var pt=St(Ue),ft=St(Ve),gt=Math.min(pt.length-(1==Ue.length?ze:0),ft.length-(1==Ve.length?ze:0));rt<gt&&pt.charCodeAt(pt.length-rt-1)==ft.charCodeAt(ft.length-rt-1);)++rt;if(1==Ue.length&&1==Ve.length&&re==_.line)for(;ze&&ze>_.ch&&pt.charCodeAt(pt.length-rt-1)==ft.charCodeAt(ft.length-rt-1);)ze--,rt++;Ue[Ue.length-1]=pt.slice(0,pt.length-rt).replace(/^\u200b+/,""),Ue[0]=Ue[0].slice(ze).replace(/\u200b+$/,"");var _t=ot(re,ze),kt=ot(xe,Ve.length?St(Ve).length-rt:0);return Ue.length>1||Ue[0]||Tt(_t,kt)?(pi(t.doc,Ue,_t,kt,"+input"),!0):void 0},Xt.prototype.ensurePolled=function(){this.forceCompositionEnd()},Xt.prototype.reset=function(){this.forceCompositionEnd()},Xt.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Xt.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},Xt.prototype.updateFromDOM=function(){var t=this;(this.cm.isReadOnly()||!this.pollContent())&&Qr(this.cm,function(){return Or(t.cm)})},Xt.prototype.setUneditable=function(t){t.contentEditable="false"},Xt.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||pr(this.cm,gl)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},Xt.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},Xt.prototype.onContextMenu=function(){},Xt.prototype.resetPosition=function(){},Xt.prototype.needsContentAttribute=!0;var rr=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new xt,this.hasSelection=!1,this.composing=null};rr.prototype.init=function(t){var i=this,L=this,_=this.cm;this.createField(t);var N=this.textarea;function U(re){if(!Le(_,re)){if(_.somethingSelected())bo({lineWise:!1,text:_.getSelections()});else{if(!_.options.lineWiseCopyCut)return;var fe=yl(_);bo({lineWise:!0,text:fe.text}),"cut"==re.type?_.setSelections(fe.ranges,null,it):(L.prevInput="",N.value=fe.text.join("\n"),qe(N))}"cut"==re.type&&(_.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),H&&(N.style.width="0px"),ne(N,"input",function(){E&&F>=9&&i.hasSelection&&(i.hasSelection=null),L.poll()}),ne(N,"paste",function(re){Le(_,re)||vl(re,_)||(_.state.pasteIncoming=+new Date,L.fastPoll())}),ne(N,"cut",U),ne(N,"copy",U),ne(t.scroller,"paste",function(re){if(!Sn(t,re)&&!Le(_,re)){if(!N.dispatchEvent)return _.state.pasteIncoming=+new Date,void L.focus();var fe=new Event("paste");fe.clipboardData=re.clipboardData,N.dispatchEvent(fe)}}),ne(t.lineSpace,"selectstart",function(re){Sn(t,re)||je(re)}),ne(N,"compositionstart",function(){var re=_.getCursor("from");L.composing&&L.composing.range.clear(),L.composing={start:re,range:_.markText(re,_.getCursor("to"),{className:"CodeMirror-composing"})}}),ne(N,"compositionend",function(){L.composing&&(L.poll(),L.composing.range.clear(),L.composing=null)})},rr.prototype.createField=function(t){this.wrapper=ml(),this.textarea=this.wrapper.firstChild},rr.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},rr.prototype.prepareSelection=function(){var t=this.cm,i=t.display,L=t.doc,_=tu(t);if(t.options.moveInputWithCursor){var N=Vr(t,L.sel.primary().head,"div"),U=i.wrapper.getBoundingClientRect(),re=i.lineDiv.getBoundingClientRect();_.teTop=Math.max(0,Math.min(i.wrapper.clientHeight-10,N.top+re.top-U.top)),_.teLeft=Math.max(0,Math.min(i.wrapper.clientWidth-10,N.left+re.left-U.left))}return _},rr.prototype.showSelection=function(t){var L=this.cm.display;_e(L.cursorDiv,t.cursors),_e(L.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},rr.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var i=this.cm;if(i.somethingSelected()){this.prevInput="";var L=i.getSelection();this.textarea.value=L,i.state.focused&&qe(this.textarea),E&&F>=9&&(this.hasSelection=L)}else t||(this.prevInput=this.textarea.value="",E&&F>=9&&(this.hasSelection=null))}},rr.prototype.getField=function(){return this.textarea},rr.prototype.supportsTouch=function(){return!1},rr.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!le||oe()!=this.textarea))try{this.textarea.focus()}catch(t){}},rr.prototype.blur=function(){this.textarea.blur()},rr.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},rr.prototype.receivedFocus=function(){this.slowPoll()},rr.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},rr.prototype.fastPoll=function(){var t=!1,i=this;i.pollingFast=!0,i.polling.set(20,function L(){i.poll()||t?(i.pollingFast=!1,i.slowPoll()):(t=!0,i.polling.set(60,L))})},rr.prototype.poll=function(){var t=this,i=this.cm,L=this.textarea,_=this.prevInput;if(this.contextMenuPending||!i.state.focused||br(L)&&!_&&!this.composing||i.isReadOnly()||i.options.disableInput||i.state.keySeq)return!1;var N=L.value;if(N==_&&!i.somethingSelected())return!1;if(E&&F>=9&&this.hasSelection===N||ee&&/[\uf700-\uf7ff]/.test(N))return i.display.input.reset(),!1;if(i.doc.sel==i.display.selForContextMenu){var U=N.charCodeAt(0);if(8203==U&&!_&&(_="\u200b"),8666==U)return this.reset(),this.cm.execCommand("undo")}for(var re=0,fe=Math.min(_.length,N.length);re<fe&&_.charCodeAt(re)==N.charCodeAt(re);)++re;return Qr(i,function(){gl(i,N.slice(re),_.length-re,null,t.composing?"*compose":null),N.length>1e3||N.indexOf("\n")>-1?L.value=t.prevInput="":t.prevInput=N,t.composing&&(t.composing.range.clear(),t.composing.range=i.markText(t.composing.start,i.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},rr.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},rr.prototype.onKeyPress=function(){E&&F>=9&&(this.hasSelection=null),this.fastPoll()},rr.prototype.onContextMenu=function(t){var i=this,L=i.cm,_=L.display,N=i.textarea;i.contextMenuPending&&i.contextMenuPending();var U=li(L,t),re=_.scroller.scrollTop;if(U&&!s){L.options.resetSelectionOnContextMenu&&-1==L.doc.sel.contains(U)&&pr(L,fr)(L.doc,Tn(U),it);var Ue,ve=N.style.cssText,xe=i.wrapper.style.cssText,Oe=i.wrapper.offsetParent.getBoundingClientRect();if(i.wrapper.style.cssText="position: static",N.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-Oe.top-5)+"px; left: "+(t.clientX-Oe.left-5)+"px;\n      z-index: 1000; background: "+(E?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",I&&(Ue=window.scrollY),_.input.focus(),I&&window.scrollTo(null,Ue),_.input.reset(),L.somethingSelected()||(N.value=i.prevInput=" "),i.contextMenuPending=ze,_.selForContextMenu=L.doc.sel,clearTimeout(_.detectingSelectAll),E&&F>=9&&Ve(),W){Ze(t);var rt=function(){ue(window,"mouseup",rt),setTimeout(ze,20)};ne(window,"mouseup",rt)}else setTimeout(ze,50)}function Ve(){if(null!=N.selectionStart){var nt=L.somethingSelected(),lt="\u200b"+(nt?N.value:"");N.value="\u21da",N.value=lt,i.prevInput=nt?"":"\u200b",N.selectionStart=1,N.selectionEnd=lt.length,_.selForContextMenu=L.doc.sel}}function ze(){if(i.contextMenuPending==ze&&(i.contextMenuPending=!1,i.wrapper.style.cssText=xe,N.style.cssText=ve,E&&F<9&&_.scrollbars.setScrollTop(_.scroller.scrollTop=re),null!=N.selectionStart)){(!E||E&&F<9)&&Ve();var nt=0,lt=function(){_.selForContextMenu==L.doc.sel&&0==N.selectionStart&&N.selectionEnd>0&&"\u200b"==i.prevInput?pr(L,Lu)(L):nt++<10?_.detectingSelectAll=setTimeout(lt,500):(_.selForContextMenu=null,_.input.reset())};_.detectingSelectAll=setTimeout(lt,200)}}},rr.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},rr.prototype.setUneditable=function(){},rr.prototype.needsContentAttribute=!1,function Gu(t){var i=t.optionHandlers;function L(_,N,U,re){t.defaults[_]=N,U&&(i[_]=re?function(fe,ve,xe){xe!=Oi&&U(fe,ve,xe)}:U)}t.defineOption=L,t.Init=Oi,L("value","",function(_,N){return _.setValue(N)},!0),L("mode",null,function(_,N){_.doc.modeOption=N,Ks(_)},!0),L("indentUnit",2,Ks,!0),L("indentWithTabs",!1),L("smartIndent",!0),L("tabSize",4,function(_){Ai(_),xi(_),Or(_)},!0),L("lineSeparator",null,function(_,N){if(_.doc.lineSep=N,N){var U=[],re=_.doc.first;_.doc.iter(function(ve){for(var xe=0;;){var Oe=ve.text.indexOf(N,xe);if(-1==Oe)break;xe=Oe+N.length,U.push(ot(re,Oe))}re++});for(var fe=U.length-1;fe>=0;fe--)pi(_.doc,N,U[fe],ot(U[fe].line,U[fe].ch+N.length))}}),L("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(_,N,U){_.state.specialChars=new RegExp(N.source+(N.test("\t")?"":"|\t"),"g"),U!=Oi&&_.refresh()}),L("specialCharPlaceholder",ca,function(_){return _.refresh()},!0),L("electricChars",!0),L("inputStyle",le?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),L("spellcheck",!1,function(_,N){return _.getInputField().spellcheck=N},!0),L("autocorrect",!1,function(_,N){return _.getInputField().autocorrect=N},!0),L("autocapitalize",!1,function(_,N){return _.getInputField().autocapitalize=N},!0),L("rtlMoveVisually",!de),L("wholeLineUpdateBefore",!0),L("theme","default",function(_){hl(_),so(_)},!0),L("keyMap","default",function(_,N,U){var re=Ni(N),fe=U!=Oi&&Ni(U);fe&&fe.detach&&fe.detach(_,re),re.attach&&re.attach(_,fe||null)}),L("extraKeys",null),L("configureMouse",null),L("lineWrapping",!1,Hu,!0),L("gutters",[],function(_,N){_.display.gutterSpecs=Hs(N,_.options.lineNumbers),so(_)},!0),L("fixedGutter",!0,function(_,N){_.display.gutters.style.left=N?$i(_.display)+"px":"0",_.refresh()},!0),L("coverGutterNextToScrollbar",!1,function(_){return _i(_)},!0),L("scrollbarStyle","native",function(_){ci(_),_i(_),_.display.scrollbars.setScrollTop(_.doc.scrollTop),_.display.scrollbars.setScrollLeft(_.doc.scrollLeft)},!0),L("lineNumbers",!1,function(_,N){_.display.gutterSpecs=Hs(_.options.gutters,N),so(_)},!0),L("firstLineNumber",1,so,!0),L("lineNumberFormatter",function(_){return _},so,!0),L("showCursorWhenSelecting",!1,bi,!0),L("resetSelectionOnContextMenu",!0),L("lineWiseCopyCut",!0),L("pasteLinesPerSelection",!0),L("selectionsMayTouch",!1),L("readOnly",!1,function(_,N){"nocursor"==N&&(_n(_),_.display.input.blur()),_.display.input.readOnlyChanged(N)}),L("screenReaderLabel",null,function(_,N){N=""===N?null:N,_.display.input.screenReaderLabelChanged(N)}),L("disableInput",!1,function(_,N){N||_.display.input.reset()},!0),L("dragDrop",!0,Ya),L("allowDropFileTypes",null),L("cursorBlinkRate",530),L("cursorScrollMargin",0),L("cursorHeight",1,bi,!0),L("singleCursorHeightPerLine",!0,bi,!0),L("workTime",100),L("workDelay",100),L("flattenSpans",!0,Ai,!0),L("addModeClass",!1,Ai,!0),L("pollInterval",100),L("undoDepth",200,function(_,N){return _.doc.history.undoDepth=N}),L("historyEventDelay",1250),L("viewportMargin",10,function(_){return _.refresh()},!0),L("maxHighlightLength",1e4,Ai,!0),L("moveInputWithCursor",!0,function(_,N){N||_.display.input.resetPosition()}),L("tabindex",null,function(_,N){return _.display.input.getField().tabIndex=N||""}),L("autofocus",null),L("direction","ltr",function(_,N){return _.doc.setDirection(N)},!0),L("phrases",null)}(Kt),function Za(t){var i=t.optionHandlers,L=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(_,N){var U=this.options,re=U[_];U[_]==N&&"mode"!=_||(U[_]=N,i.hasOwnProperty(_)&&pr(this,i[_])(this,N,re),we(this,"optionChange",this,_))},getOption:function(_){return this.options[_]},getDoc:function(){return this.doc},addKeyMap:function(_,N){this.state.keyMaps[N?"push":"unshift"](Ni(_))},removeKeyMap:function(_){for(var N=this.state.keyMaps,U=0;U<N.length;++U)if(N[U]==_||N[U].name==_)return N.splice(U,1),!0},addOverlay:Lr(function(_,N){var U=_.token?_:t.getMode(this.options,_);if(U.startState)throw new Error("Overlays may not be stateful.");(function Xr(t,i,L){for(var _=0,N=L(i);_<t.length&&L(t[_])<=N;)_++;t.splice(_,0,i)})(this.state.overlays,{mode:U,modeSpec:_,opaque:N&&N.opaque,priority:N&&N.priority||0},function(re){return re.priority}),this.state.modeGen++,Or(this)}),removeOverlay:Lr(function(_){for(var N=this.state.overlays,U=0;U<N.length;++U){var re=N[U].modeSpec;if(re==_||"string"==typeof _&&re.name==_)return N.splice(U,1),this.state.modeGen++,void Or(this)}}),indentLine:Lr(function(_,N,U){"string"!=typeof N&&"number"!=typeof N&&(N=null==N?this.options.smartIndent?"smart":"prev":N?"add":"subtract"),Hi(this.doc,_)&&Di(this,_,N,U)}),indentSelection:Lr(function(_){for(var N=this.doc.sel.ranges,U=-1,re=0;re<N.length;re++){var fe=N[re];if(fe.empty())fe.head.line>U&&(Di(this,fe.head.line,_,!0),U=fe.head.line,re==this.doc.sel.primIndex&&ai(this));else{var ve=fe.from(),xe=fe.to(),Oe=Math.max(U,ve.line);U=Math.min(this.lastLine(),xe.line-(xe.ch?0:1))+1;for(var Ue=Oe;Ue<U;++Ue)Di(this,Ue,_);var Ve=this.doc.sel.ranges;0==ve.ch&&N.length==Ve.length&&Ve[re].from().ch>0&&Zs(this.doc,re,new Gt(ve,Ve[re].to()),it)}}}),getTokenAt:function(_,N){return jt(this,_,N)},getLineTokens:function(_,N){return jt(this,ot(_),N,!0)},getTokenTypeAt:function(_){_=Lt(this.doc,_);var ve,N=kr(this,bt(this.doc,_.line)),U=0,re=(N.length-1)/2,fe=_.ch;if(0==fe)ve=N[2];else for(;;){var xe=U+re>>1;if((xe?N[2*xe-1]:0)>=fe)re=xe;else{if(!(N[2*xe+1]<fe)){ve=N[2*xe+2];break}U=xe+1}}var Oe=ve?ve.indexOf("overlay "):-1;return Oe<0?ve:0==Oe?null:ve.slice(0,Oe-1)},getModeAt:function(_){var N=this.doc.mode;return N.innerMode?t.innerMode(N,this.getTokenAt(_).state).mode:N},getHelper:function(_,N){return this.getHelpers(_,N)[0]},getHelpers:function(_,N){var U=[];if(!L.hasOwnProperty(N))return U;var re=L[N],fe=this.getModeAt(_);if("string"==typeof fe[N])re[fe[N]]&&U.push(re[fe[N]]);else if(fe[N])for(var ve=0;ve<fe[N].length;ve++){var xe=re[fe[N][ve]];xe&&U.push(xe)}else fe.helperType&&re[fe.helperType]?U.push(re[fe.helperType]):re[fe.name]&&U.push(re[fe.name]);for(var Oe=0;Oe<re._global.length;Oe++){var Ue=re._global[Oe];Ue.pred(fe,this)&&-1==Pt(U,Ue.val)&&U.push(Ue.val)}return U},getStateAfter:function(_,N){var U=this.doc;return qr(this,(_=Cl(U,null==_?U.first+U.size-1:_))+1,N).state},cursorCoords:function(_,N){var re=this.doc.sel.primary();return Vr(this,null==_?re.head:"object"==typeof _?Lt(this.doc,_):_?re.from():re.to(),N||"page")},charCoords:function(_,N){return Qo(this,Lt(this.doc,_),N||"page")},coordsChar:function(_,N){return Is(this,(_=Kl(this,_,N||"page")).left,_.top)},lineAtHeight:function(_,N){return _=Kl(this,{top:_,left:0},N||"page").top,jn(this.doc,_+this.display.viewOffset)},heightAtLine:function(_,N,U){var fe,re=!1;if("number"==typeof _){var ve=this.doc.first+this.doc.size-1;_<this.doc.first?_=this.doc.first:_>ve&&(_=ve,re=!0),fe=bt(this.doc,_)}else fe=_;return Kr(this,fe,{top:0,left:0},N||"page",U||re).top+(re?this.doc.height-kn(fe):0)},defaultTextHeight:function(){return oi(this.display)},defaultCharWidth:function(){return Ci(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(_,N,U,re,fe){var ve=this.display,xe=(_=Vr(this,Lt(this.doc,_))).bottom,Oe=_.left;if(N.style.position="absolute",N.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(N),ve.sizer.appendChild(N),"over"==re)xe=_.top;else if("above"==re||"near"==re){var Ue=Math.max(ve.wrapper.clientHeight,this.doc.height),Ve=Math.max(ve.sizer.clientWidth,ve.lineSpace.clientWidth);("above"==re||_.bottom+N.offsetHeight>Ue)&&_.top>N.offsetHeight?xe=_.top-N.offsetHeight:_.bottom+N.offsetHeight<=Ue&&(xe=_.bottom),Oe+N.offsetWidth>Ve&&(Oe=Ve-N.offsetWidth)}N.style.top=xe+"px",N.style.left=N.style.right="","right"==fe?(Oe=ve.sizer.clientWidth-N.offsetWidth,N.style.right="0px"):("left"==fe?Oe=0:"middle"==fe&&(Oe=(ve.sizer.clientWidth-N.offsetWidth)/2),N.style.left=Oe+"px"),U&&function Ds(t,i){var L=Rs(t,i);null!=L.scrollTop&&no(t,L.scrollTop),null!=L.scrollLeft&&Un(t,L.scrollLeft)}(this,{left:Oe,top:xe,right:Oe+N.offsetWidth,bottom:xe+N.offsetHeight})},triggerOnKeyDown:Lr(sl),triggerOnKeyPress:Lr(ul),triggerOnKeyUp:ll,triggerOnMouseDown:Lr(un),execCommand:function(_){if(Vn.hasOwnProperty(_))return Vn[_].call(null,this)},triggerElectric:Lr(function(_){Wu(this,_)}),findPosH:function(_,N,U,re){var fe=1;N<0&&(fe=-1,N=-N);for(var ve=Lt(this.doc,_),xe=0;xe<N&&!(ve=as(this.doc,ve,fe,U,re)).hitSide;++xe);return ve},moveH:Lr(function(_,N){var U=this;this.extendSelectionsBy(function(re){return U.display.shift||U.doc.extend||re.empty()?as(U.doc,re.head,_,N,U.options.rtlMoveVisually):_<0?re.from():re.to()},ct)}),deleteH:Lr(function(_,N){var U=this.doc.sel,re=this.doc;U.somethingSelected()?re.replaceSelection("",null,"+delete"):Kn(this,function(fe){var ve=as(re,fe.head,_,N,!1);return _<0?{from:ve,to:fe.head}:{from:fe.head,to:ve}})}),findPosV:function(_,N,U,re){var fe=1,ve=re;N<0&&(fe=-1,N=-N);for(var xe=Lt(this.doc,_),Oe=0;Oe<N;++Oe){var Ue=Vr(this,xe,"div");if(null==ve?ve=Ue.left:Ue.left=ve,(xe=zu(this,Ue,fe,U)).hitSide)break}return xe},moveV:Lr(function(_,N){var U=this,re=this.doc,fe=[],ve=!this.display.shift&&!re.extend&&re.sel.somethingSelected();if(re.extendSelectionsBy(function(Oe){if(ve)return _<0?Oe.from():Oe.to();var Ue=Vr(U,Oe.head,"div");null!=Oe.goalColumn&&(Ue.left=Oe.goalColumn),fe.push(Ue.left);var Ve=zu(U,Ue,_,N);return"page"==N&&Oe==re.sel.primary()&&Bs(U,Qo(U,Ve,"div").top-Ue.top),Ve},ct),fe.length)for(var xe=0;xe<re.sel.ranges.length;xe++)re.sel.ranges[xe].goalColumn=fe[xe]}),findWordAt:function(_){var U=bt(this.doc,_.line).text,re=_.ch,fe=_.ch;if(U){var ve=this.getHelper(_,"wordChars");"before"!=_.sticky&&fe!=U.length||!re?++fe:--re;for(var xe=U.charAt(re),Oe=Xe(xe,ve)?function(Ue){return Xe(Ue,ve)}:/\s/.test(xe)?function(Ue){return/\s/.test(Ue)}:function(Ue){return!/\s/.test(Ue)&&!Xe(Ue)};re>0&&Oe(U.charAt(re-1));)--re;for(;fe<U.length&&Oe(U.charAt(fe));)++fe}return new Gt(ot(_.line,re),ot(_.line,fe))},toggleOverwrite:function(_){null!=_&&_==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?me(this.display.cursorDiv,"CodeMirror-overwrite"):ge(this.display.cursorDiv,"CodeMirror-overwrite"),we(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==oe()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Lr(function(_,N){ro(this,_,N)}),getScrollInfo:function(){var _=this.display.scroller;return{left:_.scrollLeft,top:_.scrollTop,height:_.scrollHeight-on(this)-this.display.barHeight,width:_.scrollWidth-on(this)-this.display.barWidth,clientHeight:Ls(this),clientWidth:ri(this)}},scrollIntoView:Lr(function(_,N){null==_?(_={from:this.doc.sel.primary().head,to:null},null==N&&(N=this.options.cursorScrollMargin)):"number"==typeof _?_={from:ot(_,0),to:null}:null==_.from&&(_={from:_,to:null}),_.to||(_.to=_.from),_.margin=N||0,null!=_.from.line?function iu(t,i){Wo(t),t.curOp.scrollToPos=i}(this,_):ou(this,_.from,_.to,_.margin)}),setSize:Lr(function(_,N){var U=this,re=function(ve){return"number"==typeof ve||/^\d+$/.test(String(ve))?ve+"px":ve};null!=_&&(this.display.wrapper.style.width=re(_)),null!=N&&(this.display.wrapper.style.height=re(N)),this.options.lineWrapping&&Zi(this);var fe=this.display.viewFrom;this.doc.iter(fe,this.display.viewTo,function(ve){if(ve.widgets)for(var xe=0;xe<ve.widgets.length;xe++)if(ve.widgets[xe].noHScroll){Fn(U,fe,"widget");break}++fe}),this.curOp.forceUpdate=!0,we(this,"refresh",this)}),operation:function(_){return Qr(this,_)},startOperation:function(){return hi(this)},endOperation:function(){return Hn(this)},refresh:Lr(function(){var _=this.display.cachedTextHeight;Or(this),this.curOp.forceUpdate=!0,xi(this),ro(this,this.doc.scrollLeft,this.doc.scrollTop),Gs(this.display),(null==_||Math.abs(_-oi(this.display))>.5||this.options.lineWrapping)&&eo(this),we(this,"refresh",this)}),swapDoc:Lr(function(_){var N=this.doc;return N.cm=null,this.state.selectingText&&this.state.selectingText(),vu(this,_),xi(this),this.display.input.reset(),ro(this,_.scrollLeft,_.scrollTop),this.curOp.forceScroll=!0,hr(this,"swapDoc",this,N),N}),phrase:function(_){var N=this.options.phrases;return N&&Object.prototype.hasOwnProperty.call(N,_)?N[_]:_},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ne(t),t.registerHelper=function(_,N,U){L.hasOwnProperty(_)||(L[_]=t[_]={_global:[]}),L[_][N]=U},t.registerGlobalHelper=function(_,N,U,re){t.registerHelper(_,N,re),L[_]._global.push({pred:U,val:re})}}(Kt);var $u="iter insert remove copy getEditor constructor".split(" ");for(var cs in Dr.prototype)Dr.prototype.hasOwnProperty(cs)&&Pt($u,cs)<0&&(Kt.prototype[cs]=function(t){return function(){return t.apply(this.doc,arguments)}}(Dr.prototype[cs]));return Ne(Dr),Kt.inputStyles={textarea:rr,contenteditable:Xt},Kt.defineMode=function(t){!Kt.defaults.mode&&"null"!=t&&(Kt.defaults.mode=t),en.apply(this,arguments)},Kt.defineMIME=function Qi(t,i){xr[t]=i},Kt.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),Kt.defineMIME("text/plain","null"),Kt.defineExtension=function(t,i){Kt.prototype[t]=i},Kt.defineDocExtension=function(t,i){Dr.prototype[t]=i},Kt.fromTextArea=function Zu(t,i){if((i=i?st(i):{}).value=t.value,!i.tabindex&&t.tabIndex&&(i.tabindex=t.tabIndex),!i.placeholder&&t.placeholder&&(i.placeholder=t.placeholder),null==i.autofocus){var L=oe();i.autofocus=L==t||null!=t.getAttribute("autofocus")&&L==document.body}function _(){t.value=fe.getValue()}var N;if(t.form&&(ne(t.form,"submit",_),!i.leaveSubmitMethodAlone)){var U=t.form;N=U.submit;try{var re=U.submit=function(){_(),U.submit=N,U.submit(),U.submit=re}}catch(ve){}}i.finishInit=function(ve){ve.save=_,ve.getTextArea=function(){return t},ve.toTextArea=function(){ve.toTextArea=isNaN,_(),t.parentNode.removeChild(ve.getWrapperElement()),t.style.display="",t.form&&(ue(t.form,"submit",_),!i.leaveSubmitMethodAlone&&"function"==typeof t.form.submit&&(t.form.submit=N))}},t.style.display="none";var fe=Kt(function(ve){return t.parentNode.insertBefore(ve,t.nextSibling)},i);return fe},function $a(t){t.off=ue,t.on=ne,t.wheelEventPixels=La,t.Doc=Dr,t.splitLines=Zt,t.countColumn=dt,t.findColumn=At,t.isWordChar=mr,t.Pass=tt,t.signal=we,t.Line=nn,t.changeEnd=Xn,t.scrollbarModel=qo,t.Pos=ot,t.cmpPos=Tt,t.modes=K,t.mimeModes=xr,t.resolveMode=fn,t.getMode=Wr,t.modeExtensions=cn,t.extendMode=Ui,t.copyState=e,t.startState=Gi,t.innerMode=wn,t.commands=Vn,t.keyMap=gn,t.keyName=il,t.isModifierKey=go,t.lookupKey=In,t.normalizeKeyMap=Xa,t.StringStream=$t,t.SharedTextMarker=po,t.TextMarker=zn,t.LineWidget=ho,t.e_preventDefault=je,t.e_stopPropagation=Re,t.e_stop=Ze,t.addClass=me,t.contains=Fe,t.rmClass=ge,t.keyNames=ln}(Kt),Kt.version="5.65.4",Kt}),function(Ce){"object"==typeof exports&&"object"==typeof module?Ce(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],Ce):Ce(CodeMirror)}(function(Ce){"use strict";Ce.defineMode("turtle",function(Ee){var ye,Be=Ee.indentUnit;function M(D){return new RegExp("^(?:"+D.join("|")+")$","i")}M([]);var E=M(["@prefix","@base","a"]),F=/[*+\-<>=&|]/;function I(D,q){var Z=D.next();if(ye=null,"<"==Z&&!D.match(/^[\s\u00a0=]/,!1))return D.match(/^[^\s\u00a0>]*>?/),"atom";if('"'==Z||"'"==Z)return q.tokenize=function O(D){return function(q,Z){for(var ce,H=!1;null!=(ce=q.next());){if(ce==D&&!H){Z.tokenize=I;break}H=!H&&"\\"==ce}return"string"}}(Z),q.tokenize(D,q);if(/[{}\(\),\.;\[\]]/.test(Z))return ye=Z,null;if("#"==Z)return D.skipToEnd(),"comment";if(F.test(Z))return D.eatWhile(F),null;if(":"==Z)return"operator";if(D.eatWhile(/[_\w\d]/),":"==D.peek())return"variable-3";var H=D.current();return E.test(H)?"meta":Z>="A"&&Z<="Z"?"comment":"keyword"}function j(D,q,Z){D.context={prev:D.context,indent:D.indent,col:Z,type:q}}function s(D){D.indent=D.context.indent,D.context=D.context.prev}return{startState:function(){return{tokenize:I,context:null,indent:0,col:0}},token:function(D,q){if(D.sol()&&(q.context&&null==q.context.align&&(q.context.align=!1),q.indent=D.indentation()),D.eatSpace())return null;var Z=q.tokenize(D,q);if("comment"!=Z&&q.context&&null==q.context.align&&"pattern"!=q.context.type&&(q.context.align=!0),"("==ye)j(q,")",D.column());else if("["==ye)j(q,"]",D.column());else if("{"==ye)j(q,"}",D.column());else if(/[\]\}\)]/.test(ye)){for(;q.context&&"pattern"==q.context.type;)s(q);q.context&&ye==q.context.type&&s(q)}else"."==ye&&q.context&&"pattern"==q.context.type?s(q):/atom|string|variable/.test(Z)&&q.context&&(/[\}\]]/.test(q.context.type)?j(q,"pattern",D.column()):"pattern"==q.context.type&&!q.context.align&&(q.context.align=!0,q.context.col=D.column()));return Z},indent:function(D,q){var Z=q&&q.charAt(0),H=D.context;if(/[\]\}]/.test(Z))for(;H&&"pattern"==H.type;)H=H.prev;var ce=H&&Z==H.type;return H?"pattern"==H.type?H.col:H.align?H.col+(ce?0:1):H.indent+(ce?0:Be):0},lineComment:"#"}}),Ce.defineMIME("text/turtle","turtle")}),function(Ce){"object"==typeof exports&&"object"==typeof module?Ce(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],Ce):Ce(CodeMirror)}(function(Ce){"use strict";Ce.defineMode("sparql",function(Ee){var ye,Be=Ee.indentUnit;function M(q){return new RegExp("^(?:"+q.join("|")+")$","i")}var T=M(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","iri","uri","bnode","count","sum","min","max","avg","sample","group_concat","rand","abs","ceil","floor","round","concat","substr","strlen","replace","ucase","lcase","encode_for_uri","contains","strstarts","strends","strbefore","strafter","year","month","day","hours","minutes","seconds","timezone","tz","now","uuid","struuid","md5","sha1","sha256","sha384","sha512","coalesce","if","strlang","strdt","isnumeric","regex","exists","isblank","isliteral","a","bind"]),E=M(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc","as","having","undef","values","group","minus","in","not","service","silent","using","insert","delete","union","true","false","with","data","copy","to","move","add","create","drop","clear","load"]),F=/[*+\-<>=&|\^\/!\?]/;function I(q,Z){var H=q.next();if(ye=null,"$"==H||"?"==H)return"?"==H&&q.match(/\s/,!1)?"operator":(q.match(/^[A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][A-Za-z0-9_\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]*/),"variable-2");if("<"==H&&!q.match(/^[\s\u00a0=]/,!1))return q.match(/^[^\s\u00a0>]*>?/),"atom";if('"'==H||"'"==H)return Z.tokenize=function j(q){return function(Z,H){for(var le,ce=!1;null!=(le=Z.next());){if(le==q&&!ce){H.tokenize=I;break}ce=!ce&&"\\"==le}return"string"}}(H),Z.tokenize(q,Z);if(/[{}\(\),\.;\[\]]/.test(H))return ye=H,"bracket";if("#"==H)return q.skipToEnd(),"comment";if(F.test(H))return"operator";if(":"==H)return O(q),"atom";if("@"==H)return q.eatWhile(/[a-z\d\-]/i),"meta";if(q.eatWhile(/[_\w\d]/),q.eat(":"))return O(q),"atom";var ce=q.current();return T.test(ce)?"builtin":E.test(ce)?"keyword":"variable"}function O(q){q.match(/(\.(?=[\w_\-\\%])|[:\w_-]|\\[-\\_~.!$&'()*+,;=/?#@%]|%[a-f\d][a-f\d])+/i)}function s(q,Z,H){q.context={prev:q.context,indent:q.indent,col:H,type:Z}}function D(q){q.indent=q.context.indent,q.context=q.context.prev}return{startState:function(){return{tokenize:I,context:null,indent:0,col:0}},token:function(q,Z){if(q.sol()&&(Z.context&&null==Z.context.align&&(Z.context.align=!1),Z.indent=q.indentation()),q.eatSpace())return null;var H=Z.tokenize(q,Z);if("comment"!=H&&Z.context&&null==Z.context.align&&"pattern"!=Z.context.type&&(Z.context.align=!0),"("==ye)s(Z,")",q.column());else if("["==ye)s(Z,"]",q.column());else if("{"==ye)s(Z,"}",q.column());else if(/[\]\}\)]/.test(ye)){for(;Z.context&&"pattern"==Z.context.type;)D(Z);Z.context&&ye==Z.context.type&&(D(Z),"}"==ye&&Z.context&&"pattern"==Z.context.type&&D(Z))}else"."==ye&&Z.context&&"pattern"==Z.context.type?D(Z):/atom|string|variable/.test(H)&&Z.context&&(/[\}\]]/.test(Z.context.type)?s(Z,"pattern",q.column()):"pattern"==Z.context.type&&!Z.context.align&&(Z.context.align=!0,Z.context.col=q.column()));return H},indent:function(q,Z){var H=Z&&Z.charAt(0),ce=q.context;if(/[\]\}]/.test(H))for(;ce&&"pattern"==ce.type;)ce=ce.prev;var le=ce&&H==ce.type;return ce?"pattern"==ce.type?ce.col:ce.align?ce.col+(le?0:1):ce.indent+(le?0:Be):0},lineComment:"#"}}),Ce.defineMIME("application/sparql-query","sparql")});