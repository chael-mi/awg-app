"use strict";(self.webpackChunkawg_app=self.webpackChunkawg_app||[]).push([[672],{2672:(s,Q,a)=>{a.r(Q),a.d(Q,{DataViewModule:()=>W});var h=a(655),n=a(5e3),z=a(9822),X=a(5856),Z=a(264);let w=class{constructor(){this.resourceRequest=new n.vpe}navigateToResource(e){!e||(e=e.toString(),this.resourceRequest.emit(e))}};w.propDecorators={header:[{type:n.IIB}],resourceUrl:[{type:n.IIB}],resourceRequest:[{type:n.r_U}]},w=(0,h.gn)([(0,n.wA2)({selector:"awg-resource-detail-header",template:X,changeDetection:n.n4l.OnPush,styles:[Z]})],w);var Y=a(1117),K=a(8796);let R=class{constructor(){this.gndRequest=new n.vpe,this.resourceRequest=new n.vpe}exposeGnd(e){!e||!e.type||this.gndRequest.emit(e)}navigateToResource(e){!e||(e=e.toString(),this.resourceRequest.emit(e))}};R.propDecorators={resourceDetailData:[{type:n.IIB}],gndRequest:[{type:n.r_U}],resourceRequest:[{type:n.r_U}]},R=(0,h.gn)([(0,n.wA2)({selector:"awg-resource-detail-html",template:Y,changeDetection:n.n4l.OnPush,styles:[K]})],R);var _=a(626),ee=a(8209);let S=class{constructor(){this.gndRequest=new n.vpe,this.resourceRequest=new n.vpe}exposeGnd(e){!e||!e.type||this.gndRequest.emit(e)}navigateToResource(e){!e||(e=e.toString(),this.resourceRequest.emit(e))}};S.propDecorators={content:[{type:n.IIB}],gndRequest:[{type:n.r_U}],resourceRequest:[{type:n.r_U}]},S=(0,h.gn)([(0,n.wA2)({selector:"awg-resource-detail-html-content",template:_,changeDetection:n.n4l.OnPush,styles:[ee]})],S);var te=a(5453),re=a(8928),ne=a(1658);let C=class{constructor(){this.galleryOptions=[new ne.WB({width:"100%",imageSize:"contain",thumbnailSize:"contain",thumbnailMargin:5,thumbnailsMargin:0,previewCloseOnClick:!0,previewCloseOnEsc:!0,previewZoom:!0,previewRotate:!0,linkTarget:"_blank"})]}};C.propDecorators={images:[{type:n.IIB}]},C=(0,h.gn)([(0,n.wA2)({selector:"awg-resource-detail-html-content-imageobjects",template:te,changeDetection:n.n4l.OnPush,styles:[re]})],C);var se=a(4980),ae=a(3533);let I=class{constructor(){this.resourceRequest=new n.vpe}get totalNumber(){return this._getNestedArraysTotalItems(this.incomingGroups)||0}navigateToResource(e){!e||(e=e.toString(),this.resourceRequest.emit(e))}_getNestedArraysTotalItems(e){if(!e)return;return e.map(r=>r.links.length).reduce((r,o)=>r+o,0)}};I.propDecorators={incomingGroups:[{type:n.IIB}],resourceRequest:[{type:n.r_U}]},I=(0,h.gn)([(0,n.wA2)({selector:"awg-resource-detail-html-content-linkedobjects",template:se,changeDetection:n.n4l.OnPush,styles:[ae]})],I);var oe=a(2630),ie=a(8580),V=a(2834);let x=class{constructor(){this.gndRequest=new n.vpe,this.resourceRequest=new n.vpe,this.metaBreakLine="Versionsdatum"}ngOnChanges(e){e.props&&this._checkForGND(e.props)}exposeGnd(e){!e||!e.type||this.gndRequest.emit(e)}navigateToResource(e){!e||(e=e.toString(),this.resourceRequest.emit(e))}ngOnDestroy(){this._removeGnd()}_checkForGND(e){const t=e.currentValue.filter(r=>"856"===r.pid&&r.values&&r.values.length>0);this._removeGnd(),t.length>0&&t.forEach(r=>{r.values.forEach(o=>{this._setGnd(o)})})}_setGnd(e){const t=new V.zI(V.G0.SET,e);this.exposeGnd(t)}_removeGnd(){const e=new V.zI(V.G0.REMOVE,null);this.exposeGnd(e)}};x.propDecorators={props:[{type:n.IIB}],gndRequest:[{type:n.r_U}],resourceRequest:[{type:n.r_U}]},x=(0,h.gn)([(0,n.wA2)({selector:"awg-resource-detail-html-content-props",template:oe,changeDetection:n.n4l.OnPush,styles:[ie]})],x);var le=a(6877),ce=a(4141);let D=class{};D.propDecorators={resourceJsonConvertedData:[{type:n.IIB}]},D=(0,h.gn)([(0,n.wA2)({selector:"awg-resource-detail-json-converted",template:le,changeDetection:n.n4l.OnPush,styles:[ce]})],D);var he=a(166),de=a(9403);let P=class{};P.propDecorators={resourceJsonRawData:[{type:n.IIB}]},P=(0,h.gn)([(0,n.wA2)({selector:"awg-resource-detail-json-raw",template:he,changeDetection:n.n4l.OnPush,styles:[de]})],P);let M=class{};M=(0,h.gn)([(0,n.LVF)({imports:[z.m],declarations:[w,R,S,C,I,x,D,P],exports:[w,R,S,C,I,x,D,P]})],M);var pe=a(5291),ue=a(3016),m=a(3075),T=a(7579),g=a(2722),b=a(801),l=a(9952),v=a(520),p=a(3756),c=a(8490);let G=class extends p.sM{constructor(e){super(e),this.projectId="6",this.resTypeId="126",this.bibShortTitlePropertyId="614",this.resourcesRoute="resources/",this.searchRoute="search/",this.serviceName="BibliographyService"}getBibliographyList(){const e=this.searchRoute,t=(new v.LE).set("searchtype","extended").set("property_id",this.bibShortTitlePropertyId).set("compop","EXISTS").set("filter_by_project",this.projectId).set("filter_by_restype",this.resTypeId);return this.getApiResponse(c.vX,e,t)}getBibliographyItemDetail(e){const t=this.resourcesRoute+e,r=new v.LE;return this.getApiResponse(c.wB,t,r)}};G.ctorParameters=()=>[{type:v.eN}],G=(0,h.gn)([(0,n.GSi)({providedIn:"root"})],G);var $=a(9646),ge=a(4128),q=a(6590),y=a(4004);let f=class extends p.sM{constructor(e,t){super(e),this.conversionService=t,this.projectId="6",this.vocabularyId="4",this.defaultLanguage="de",this.resourceSuffix="_-_local",this.routes={propertylists:"propertylists/",resources:"resources/",resourcetypes:"resourcetypes/",search:"search/"},this.serviceName="DataApiService"}getPropertyListsByResourceType(e){return e?this._getResourceDataResponseFromApi(c.wU,e).pipe((0,q.d)(new c.wU),(0,y.U)(r=>r)):(0,$.of)(new c.wU)}getResourceData(e){if(!e)return;const t=this._getResourceDataResponseFromApi(c.wB,e),r=this._getResourceDataResponseFromApi(c.QX,e);return(0,ge.D)([t,r]).pipe((0,q.d)([new c.wB,new c.QX]),(0,y.U)(o=>this._prepareResourceData(o,e)))}getResourceTypes(){return this._getResourceDataResponseFromApi(c.k1,"").pipe((0,q.d)(new c.k1),(0,y.U)(t=>t))}getSearchData(e){if(!e||!e.query)return(0,$.of)(new c.vX);if("object"==typeof e.query&&!e.query.filterByRestype)return(0,$.of)(new c.vX);const t={query:e.query,nRows:e.nRows||"-1",startAt:e.startAt||"0",view:e.view||l.tD.table};return this._getResourceDataResponseFromApi(c.vX,"",t).pipe((0,q.d)(new c.vX),(0,y.U)(o=>this.conversionService.convertFullTextSearchResults(o)))}_createSearchQueryParamsForApi(e){let t=(new v.LE).set("filter_by_project",this.projectId).set("lang",this.defaultLanguage).set("show_nrows",e.nRows).set("start_at",e.startAt);return"string"==typeof e.query?t=t.append("searchtype","fulltext"):"object"==typeof e.query&&(t=t.append("searchtype","extended"),t=t.append("filter_by_restype",e.query.filterByRestype),e.query.propertyId&&e.query.propertyId.length>0&&e.query.compop&&e.query.compop.length>0&&(e.query.propertyId.forEach(r=>{t=t.append("property_id",r)}),e.query.compop.forEach(r=>{t=t.append("compop",r)}),e.query.searchval&&e.query.searchval.length>0&&e.query.searchval.forEach(r=>{t=t.append("searchval",r)}))),t}_prepareResourceData(e,t){const r=this.conversionService.convertResourceData(e,t);return new l.Li(e[0],r)}_getResourceDataResponseFromApi(e,t,r){let o,i;switch(e){case c.wU:o=this.routes.propertylists,i=(new v.LE).set("restype",t);break;case c.QX:o=this.routes.resources+t+this.resourceSuffix,i=(new v.LE).set("reqtype","context");break;case c.wB:o=this.routes.resources+t+this.resourceSuffix,i=new v.LE;break;case c.k1:o=this.routes.resourcetypes,i=(new v.LE).set("vocabulary",this.vocabularyId).set("lang",this.defaultLanguage);break;case c.vX:o=this.routes.search,"string"==typeof r.query&&(o+=r.query),i=this._createSearchQueryParamsForApi(r)}return this.getApiResponse(e,o,i)}};f.ctorParameters=()=>[{type:v.eN},{type:p.re}],f=(0,h.gn)([(0,n.GSi)({providedIn:"root"})],f);let A=class{constructor(e,t){this.dataApiService=e,this.formBuilder=t,this.searchRequest=new n.vpe,this.faPlus=b.r8p,this.faSearch=b.wn1,this.faTrash=b.$aW,this.extendedSearchParams=new l.Rs,this.selectedCompopSets=[[]],this.defaultFormString="---",this.searchFormStrings={label:"Search Input",placeholder:"Volltextsuche in der Webern-Datenbank \u2026",errorMessage:"Es wird ein Suchbegriff mit mindestens 3 Zeichen ben\xf6tigt!"},this._destroyed$=new T.x}get restypeControl(){return this.extendedSearchForm.get("restypeControl")}get propertiesControls(){return this.extendedSearchForm.get("propertiesControls")}ngOnInit(){this.createExtendedSearchForm(),this.getResourcetypes()}createExtendedSearchForm(){this.extendedSearchForm=this.formBuilder.group({restypeControl:["",m.kI.required],propertiesControls:this.formBuilder.array([])}),this.addPropertiesControl()}addPropertiesControl(){const e=this.formBuilder.group({propertyIdControl:["",[m.kI.required]],compopControl:["",[m.kI.required]],searchvalControl:[""]});this.propertiesControls.push(e)}removePropertiesControl(e){e>-1&&this.propertiesControls.removeAt(e)}getCompopoControlAtIndex(e){return this._getFormArrayControlAtIndex("compopControl",e)}getCompopSetByValueType(e,t){let r=[];const o=l.rA.typeList.filter(i=>i.id===e);if(!o||1!==o.length||!o[0].id)return[];{const i=o[0].id;r="1"===i||"6"===i&&"14"===t||"14"===i?l.G9.compopList[5].compopSet:"2"===i||"3"===i?l.G9.compopList[4].compopSet:"4"===i||"5"===i?l.G9.compopList[3].compopSet:"13"===i?l.G9.compopList[2].compopSet:"6"===i&&("3"===t||"6"===t)||"7"===i||"11"===i||"12"===i||"15"===i?l.G9.compopList[1].compopSet:l.G9.compopList[0].compopSet}return r}getPopertyListEntryById(e){return this.propertyListsResponse.properties.filter(t=>t.id===e)}getPropertyIdControlAtIndex(e){return this.listenToUserPropertyChange(e),this._getFormArrayControlAtIndex("propertyIdControl",e)}getPropertyLists(e){this.dataApiService.getPropertyListsByResourceType(e).pipe((0,g.R)(this._destroyed$)).subscribe({next:t=>{this.propertyListsResponse=t},error:t=>{console.error(t)}})}getResourcetypes(){this.dataApiService.getResourceTypes().pipe((0,g.R)(this._destroyed$)).subscribe({next:e=>{this.restypesResponse=e,this.listenToUserResourcetypeChange()},error:e=>{console.error(e)}})}getSearchvalControlAtIndex(e){return""===this.isSearchvalControlDisabled(e)&&this._getFormArrayControlAtIndex("searchvalControl",e).setValue(""),this._getFormArrayControlAtIndex("searchvalControl",e)}getSearchvalPlaceholder(e){let t="Suchbegriff";return this.isSearchvalControlDisabled(e)&&(t=this.defaultFormString),t}isAddButtonDisabled(e){var t;const r=this.getCompopoControlAtIndex(e).value;return this._isPropertyIdOrCompopMissing(e)||"EXISTS"!==r&&this._isSearchvalMissing(e)||(null===(t=this.getSearchvalControlAtIndex(e).errors)||void 0===t?void 0:t.minlength)||this._isNotLastProperty(e)?"":null}isCompopControlDisabled(e){return this.isPropertyIdControlDisabled()||this._isPropertyIdMissing(e)?"":null}isPropertyIdControlDisabled(){return this._isResourecetypeMissing()?"":null}isSearchvalControlDisabled(e){const t=this.getCompopoControlAtIndex(e).value;return this._isResourecetypeMissing()||this._isPropertyIdOrCompopMissing(e)||"EXISTS"===t?"":null}listenToUserResourcetypeChange(){this.restypeControl.valueChanges.pipe((0,g.R)(this._destroyed$)).subscribe({next:e=>{this.selectedResourcetype=this.restypesResponse.resourcetypes.find(t=>t.id===e),this._clearPropertiesControls(),this.selectedResourcetype&&this.getPropertyLists(this.selectedResourcetype.id)},error:e=>{console.error(e)}})}listenToUserPropertyChange(e){this._getFormArrayControlAtIndex("propertyIdControl",e).valueChanges.pipe((0,g.R)(this._destroyed$)).subscribe({next:t=>{const r=this.getPopertyListEntryById(t)[0],o=r.guielement_id,i=r.valuetype_id;this.getCompopoControlAtIndex(e).setValue(""),this.getSearchvalControlAtIndex(e).setValue(""),this.selectedCompopSets[e]=this.getCompopSetByValueType(i,o)},error:t=>{console.error(t)}})}onReset(){alert("Gesamte Suchmaske zur\xfccksetzen?"),this._resetForm()}onSearch(){this.extendedSearchForm.valid&&(this.extendedSearchParams={filterByRestype:this.extendedSearchForm.value.restypeControl,propertyId:[],compop:[],searchval:[]},this.extendedSearchForm.value.propertiesControls.forEach(e=>{this.extendedSearchParams.propertyId.push(e.propertyIdControl),this.extendedSearchParams.compop.push(e.compopControl),this.extendedSearchParams.searchval.push(e.searchvalControl)}),this.searchRequest.emit(this.extendedSearchParams))}ngOnDestroy(){this._destroyed$.next(!0),this._destroyed$.complete()}_clearPropertiesControls(){this.propertiesControls.clear(),this.addPropertiesControl()}_getFormArrayControlAtIndex(e,t){return this.propertiesControls.controls[t].get(e)}_isNotLastProperty(e){return this.propertiesControls.controls.length-1>e}_isResourecetypeMissing(){const e=this.restypeControl.value;return!e||e===this.defaultFormString}_isPropertyIdMissing(e){return this._isFormControlValueMissing("propertyIdControl",e)}_isCompopMissing(e){return this._isFormControlValueMissing("compopControl",e)}_isPropertyIdOrCompopMissing(e){return this._isPropertyIdMissing(e)||this._isCompopMissing(e)}_isSearchvalMissing(e){return this._isFormControlValueMissing("searchvalControl",e)}_isFormControlValueMissing(e,t){const r=this._getFormArrayControlAtIndex(e,t).value;return!r||r===this.defaultFormString}_resetForm(){return this.extendedSearchForm.reset()}};A.ctorParameters=()=>[{type:f},{type:m.qu}],A.propDecorators={searchRequest:[{type:n.r_U}]},A=(0,h.gn)([(0,n.wA2)({selector:"awg-extended-search-form",template:pe,styles:[ue]})],A);var me=a(8940),ve=a(5408),U=a(9300),ye=a(8372),be=a(1884);let j=class{constructor(e){this.formBuilder=e,this.searchRequest=new n.vpe,this.faSearch=b.wn1,this.searchFormStrings={label:"Input f\xfcr Volltextsuche",placeholder:"Volltextsuche in der Webern-Datenbank \u2026",errorMessage:"Es wird ein Suchbegriff mit mindestens 3 Zeichen ben\xf6tigt!"},this._destroyed$=new T.x}get searchvalControl(){return this.searchForm.get("searchvalControl")}ngOnInit(){this.createFulltextSearchForm(),this.listenToUserInputChange()}ngOnChanges(e){e.searchValue&&!e.searchValue.isFirstChange()&&"string"==typeof e.searchValue.currentValue&&this.setSearchvalFromInput()}createFulltextSearchForm(){this.searchForm=this.formBuilder.group({searchvalControl:["",m.kI.compose([m.kI.required,m.kI.minLength(3)])]})}isFulltextSearchInputInvalid(){return this.searchvalControl.hasError("required")||this.searchvalControl.errors&&this.searchvalControl.errors.minlength}listenToUserInputChange(){this.searchvalControl.valueChanges.pipe((0,U.h)(e=>e.length>=3),(0,ye.b)(500),(0,be.x)(),(0,g.R)(this._destroyed$)).subscribe({next:e=>this.onSearch(e)})}setSearchvalFromInput(){this.searchvalControl.setValue(this.searchValue)}onSearch(e){this.searchForm.valid&&this.searchRequest.emit(e)}ngOnDestroy(){this._destroyed$.next(!0),this._destroyed$.complete()}};j.ctorParameters=()=>[{type:m.qu}],j.propDecorators={searchValue:[{type:n.IIB}],searchRequest:[{type:n.r_U}]},j=(0,h.gn)([(0,n.wA2)({selector:"awg-fulltext-search-form",template:me,changeDetection:n.n4l.OnPush,styles:[ve]})],j);var fe=a(6388),we=a(5638),u=a(8755),Re=a(6203);let F=class{constructor(e,t,r,o,i){this.formBuilder=e,this.router=t,this.conversionService=r,this.dataStreamerService=o,this.sideInfoService=i,this.pageChangeRequest=new n.vpe,this.rowNumberChangeRequest=new n.vpe,this.viewChangeRequest=new n.vpe,this.errorMessage=void 0,this.rowNumbers=[5,10,25,50,100,200],this.faGripHorizontal=b.BUU,this.faTable=b.B3e,this._destroyed$=new T.x}get searchResultViewControl(){return this.searchResultControlForm.get("searchResultViewControl")}ngOnInit(){this.getSearchResponseWithQueryData(),this.searchParams.view&&(this.searchParams.view===l.tD.table||this.searchParams.view===l.tD.grid)&&this.createFormGroup(this.searchParams.view)}createFormGroup(e){this.searchResultControlForm=this.formBuilder.group({searchResultViewControl:l.tD[e]}),this.listenToUserInputChange()}listenToUserInputChange(){this.searchResultViewControl.valueChanges.pipe((0,g.R)(this._destroyed$)).subscribe({next:e=>{this.onViewChange(e)}})}isActiveResource(e){return this._selectedResourceId===e}isGridView(){return this.searchParams.view===l.tD.grid}isNoResults(){return 0==+this.searchResponseWithQuery.data.nhits}navigateToResource(e){this._selectedResourceId=e,this.router.navigate(["/data/resource",this._selectedResourceId])}onPageChange(e){const t=+this.searchParams.nRows,r=e*t-t;this.pageChangeRequest.emit(String(r))}onRowNumberChange(e){this.rowNumberChangeRequest.emit(String(e))}onViewChange(e){this.viewChangeRequest.emit(e)}setPagination(){const e=+this.searchParams.nRows,t=+this.searchParams.startAt;this.pageSize=e,this.page=Math.floor(t/e)+1}getSearchResponseWithQueryData(){this.dataStreamerService.getSearchResponseWithQuery().pipe((0,g.R)(this._destroyed$)).subscribe({next:t=>{this.updateSearchParams(t),this.setPagination()},error:t=>{this.errorMessage=t,console.error("SearchResultList# searchResultData subscription error: ",this.errorMessage)}})}trackById(e){return e.obj_id}updateSearchParams(e){if(!e)return;this.searchResponseWithQuery=Object.assign({},e),this.searchResultText=this.conversionService.prepareFullTextSearchResultText(e,this.searchUrl);const t=new Re.W(this.searchResponseWithQuery.query,this.searchResultText);this.sideInfoService.updateSearchInfoData(t)}ngOnDestroy(){this.sideInfoService.clearSearchInfoData(),this._destroyed$.next(!0),this._destroyed$.complete()}};F.ctorParameters=()=>[{type:m.qu},{type:u.F0},{type:p.re},{type:p.k$},{type:p.Iu}],F.propDecorators={searchUrl:[{type:n.IIB}],searchParams:[{type:n.IIB}],pageChangeRequest:[{type:n.r_U}],rowNumberChangeRequest:[{type:n.r_U}],viewChangeRequest:[{type:n.r_U}]},F=(0,h.gn)([(0,n.wA2)({selector:"awg-search-result-list",template:fe,changeDetection:n.n4l.Default,styles:[we]})],F);var Se=a(4238),Ce=a(3502);let k=class{constructor(e){this.router=e,this.searchTitle="Suche",this.searchId="search"}ngOnInit(){this.routeToSidenav()}routeToSidenav(){this.router.navigate([{outlets:{side:"searchInfo"}}],{preserveFragment:!0,queryParamsHandling:"preserve"})}};k.ctorParameters=()=>[{type:u.F0}],k=(0,h.gn)([(0,n.wA2)({selector:"awg-data",template:Se,styles:[Ce]})],k);var Ie=a(5112),xe=a(3173),J=a(3900);let N=class{constructor(e,t,r,o,i,H){this.route=e,this.router=t,this.dataApiService=r,this.dataStreamerService=o,this.gndService=i,this.loadingService=H,this.errorMessage=void 0,this.resourceDetailTabTitles={html:"Detail",raw:"JSON (raw)",converted:"JSON (converted)"},this._destroyed$=new T.x}get httpGetUrl(){return this.dataApiService.httpGetUrl}get isLoading$(){return this.loadingService.getLoadingStatus()}ngOnInit(){this.routeToSidenav(),this.getResourceData()}getResourceData(){this.router.events.pipe((0,U.h)(e=>e instanceof u.m2),(0,y.U)(()=>this.route),(0,J.w)(e=>{const r=this.route.snapshot.paramMap.get("id");for(;e.firstChild;)e=e.firstChild;return this.selectedResourceDetailTabId=e.snapshot.url[0].path,this.updateResourceId(r),this.dataApiService.getResourceData(r)}),(0,g.R)(this._destroyed$)).subscribe({next:e=>{this.resourceData=e},error:e=>this.errorMessage=e})}onResourceDetailTabChange(e){const t=e.nextId;this.router.navigate([t],{relativeTo:this.route})}updateResourceId(e){this.resourceId=e,this.dataStreamerService.updateResourceId(e)}navigateToResource(e){const t=e||(this.oldId?this.oldId:this.resourceId);this.oldId=this.resourceId,this.router.navigate(["/data/resource",+t])}exposeGnd(e){!e||this.gndService.exposeGnd(e)}routeToSidenav(){this.router.navigate([{outlets:{side:"resourceInfo"}}],{preserveFragment:!0,queryParamsHandling:"preserve"})}ngOnDestroy(){this._destroyed$.next(!0),this._destroyed$.complete()}};N.ctorParameters=()=>[{type:u.gz},{type:u.F0},{type:f},{type:p.k$},{type:p.dW},{type:p.bz}],N=(0,h.gn)([(0,n.wA2)({selector:"awg-resource-detail",template:Ie,changeDetection:n.n4l.Default,styles:[xe]})],N);var De=a(7106),Pe=a(6679),L=a(849);let B=class{constructor(e,t){this.sideInfoService=e,this.route=t}ngOnInit(){this.setButtons(),this.updateSearchInfoTitleFromPath()}setButtons(){this.searchRouterLinkButtons=[new L.v("/data","search","Suche",!1),new L.v("/data","timeline","Timeline",!0),new L.v("/data","bibliography","Bibliographie",!0)]}updateSearchInfoTitleFromPath(){const e=this.route.snapshot.url[0].path,t=this.searchRouterLinkButtons.filter(r=>r.link===e);1===t.length&&this.sideInfoService.updateSearchInfoTitle(t[0].label)}onButtonSelect(e){const t=e instanceof L.v;!e||!t||!e.label||(this.sideInfoService.clearSearchInfoData(),this.sideInfoService.updateSearchInfoTitle(e.label))}};B.ctorParameters=()=>[{type:p.Iu},{type:u.gz}],B=(0,h.gn)([(0,n.wA2)({selector:"awg-search-overview",template:De,styles:[Pe]})],B);var Te=a(6503),Ae=a(636),je=a(515);let O=class{constructor(e,t,r,o,i,H){this.route=e,this.router=t,this.conversionService=r,this.dataApiService=o,this.dataStreamerService=i,this.loadingService=H,this.errorMessage=void 0,this.searchTabs={fulltext:{id:"fulltext",title:"Volltext-Suche"},extended:{id:"extended",title:"Erweiterte Suche"}},this.viewChanged=!1,this._destroyed$=new T.x}get httpGetUrl(){return this.dataApiService.httpGetUrl}get isLoading$(){return this.loadingService.getLoadingStatus()}ngOnInit(){this.resetSearchParams(),this.getSearchData()}getSearchData(){this.router.events.pipe((0,U.h)(e=>e instanceof u.m2),(0,y.U)(()=>this.route),(0,y.U)(e=>{let t=e;for(;t.firstChild;)t=t.firstChild;return this._isValidTabIdInRoute(t)&&(this.selectedSearchTabId=t.snapshot.url[0].path),e}),(0,J.w)(e=>{const t=e.snapshot.queryParamMap;if(t!==this.currentQueryParams)if(this.currentQueryParams=t,t.keys.length<4)this.updateSearchParamsFromRoute(t,!0);else if(this.updateSearchParamsFromRoute(t,!1),!this.viewChanged){if(this.searchParams.query&&"string"==typeof this.searchParams.query)return this.dataApiService.getSearchData(this.searchParams);if("object"==typeof this.searchParams.query&&this.searchParams.query.filterByRestype)return this.dataApiService.getSearchData(this.searchParams)}return je.E}),(0,g.R)(this._destroyed$)).subscribe({next:e=>{this.searchResponseWithQuery=new l.PY(e,this.searchParams.query),this.dataStreamerService.updateSearchResponseWithQuery(this.searchResponseWithQuery)},error:e=>{this.errorMessage=e,console.error("SearchPanel# getSearchData subscription error: ",this.errorMessage)}})}onPageChange(e){e!==this.searchParams.startAt&&(this.viewChanged=!1,this.searchParams={query:this.searchParams.query,nRows:this.searchParams.nRows,startAt:e,view:this.searchParams.view},this._routeToSelf(this.searchParams))}onRowNumberChange(e){e!==this.searchParams.nRows&&(this.viewChanged=!1,this.searchParams={query:this.searchParams.query,nRows:e,startAt:"0",view:this.searchParams.view},this._routeToSelf(this.searchParams))}onSearch(e){e!==this.searchParams.query&&(this.viewChanged=!1,this.searchParams={query:e,nRows:this.searchParams.nRows,startAt:this.searchParams.startAt,view:this.searchParams.view},this._routeToSelf(this.searchParams))}onSearchTabChange(e){const t=e.nextId;this.resetSearchParams(t),this.resetSearchResponse(),this.errorMessage=void 0,this._routeToSelf(this.searchParams,t)}onViewChange(e){e!==this.searchParams.view&&(this.viewChanged=!0,this.searchParams={query:this.searchParams.query,nRows:this.searchParams.nRows,startAt:this.searchParams.startAt,view:l.tD[e]},this._routeToSelf(this.searchParams))}resetSearchParams(e){let t;e&&e!==this.searchTabs.fulltext.id?e===this.searchTabs.extended.id&&(t=new l.Rs,t.filterByRestype="",t.propertyId=[],t.compop=[],t.searchval=[]):t="",this.searchParams={query:t,nRows:"25",startAt:"0",view:l.tD.table}}resetSearchResponse(){this.searchResponseWithQuery=new l.PY(new c.vX,""),this.dataStreamerService.updateSearchResponseWithQuery(this.searchResponseWithQuery)}updateSearchParamsFromRoute(e,t){if(!e)return;let r;this.selectedSearchTabId&&this.selectedSearchTabId!==this.searchTabs.fulltext.id&&"string"!=typeof this.searchParams.query?(this.selectedSearchTabId===this.searchTabs.extended.id||"object"==typeof this.searchParams.query)&&(r=new l.Rs,r.filterByRestype=e.get("filterByRestype")||this.searchParams.query.filterByRestype,r.propertyId=e.getAll("propertyId")||this.searchParams.query.propertyId,r.compop=e.getAll("compop")||this.searchParams.query.compop,r.searchval=e.getAll("searchval")||this.searchParams.query.searchval):r=e.get("query")||this.searchParams.query,this.searchParams={query:r,nRows:e.get("nrows")||this.searchParams.nRows,startAt:e.get("startAt")||this.searchParams.startAt,view:l.tD[e.get("view")]||this.searchParams.view},t&&this._routeToSelf(this.searchParams)}getSearchQueryType(e){return"string"==typeof e||"object"==typeof e?e:void 0}isSearchResultListShown(){return this.dataStreamerService.getSearchResponseWithQuery().pipe((0,g.R)(this._destroyed$)).subscribe({next:e=>console.log(e)}),!0}ngOnDestroy(){this._destroyed$.next(!0),this._destroyed$.complete()}_routeToSelf(e,t){const r=t?[t]:[],o=this._createRouterQueryParams(e);this.router.navigate(r,{relativeTo:this.route,queryParams:o})}_createRouterQueryParams(e){const t={},r=this.getSearchQueryType(e.query);return"string"==typeof r?t.query=e.query:"object"==typeof r&&(t.filterByRestype=r.filterByRestype||"",r.propertyId&&(t.propertyId=r.propertyId||[],t.compop=r.compop||[],t.searchval=r.searchval||[])),t.nrows=e.nRows,t.startAt=e.startAt,t.view=e.view,t}_isValidTabIdInRoute(e){return e.snapshot.url&&e.snapshot.url.length>0&&Object.values(this.searchTabs).filter(t=>t.id===e.snapshot.url[0].path).length>0}};O.ctorParameters=()=>[{type:u.gz},{type:u.F0},{type:p.re},{type:f},{type:p.k$},{type:p.bz}],O=(0,h.gn)([(0,n.wA2)({selector:"awg-search-panel",template:Te,styles:[Ae]})],O);const Fe=[{path:"",component:k,children:[{path:"",pathMatch:"full",redirectTo:"search"},{path:"search",component:B,children:[{path:"",component:O,children:[{path:"",pathMatch:"full",redirectTo:"fulltext"},{path:"fulltext",data:{title:"AWG Online Edition \u2013 Fulltext Search"}},{path:"extended",data:{title:"AWG Online Edition \u2013 Extended Search"}},{path:"detail/:id",redirectTo:"resource/:id"}]}]}]},{path:"resource/:id",component:N,data:{title:"AWG Online Edition \u2013 Resource Detail"},children:[{path:"",pathMatch:"full",redirectTo:"html"},{path:"html",data:{title:"AWG Online Edition \u2013 Resource Detail HTML"}},{path:"converted-json",data:{title:"AWG Online Edition \u2013 Resource Detail JSON Converted"}},{path:"raw-json",data:{title:"AWG Online Edition \u2013 Resource Detail JSON Raw"}}]}],ke=[k,B,O,N];let E=class{};E=(0,h.gn)([(0,n.LVF)({imports:[u.Bz.forChild(Fe)],exports:[u.Bz]})],E);let W=class{};W=(0,h.gn)([(0,n.LVF)({imports:[z.m,M,E],declarations:[ke,A,j,F]})],W)},264:s=>{s.exports='@charset "UTF-8";\n/************************************************\n *\n *               CREDITS\n *\n * This code is inspired, adapted or taken from:\n *\n * ARACHNE \u2013 Objektdatenbank des Deutschen Arch\xe4ologischen Instituts (DAI)\n * https://arachne.dainst.org/entity/1121229**]\n * 20.11.2017\n *\n *\n *\n************************************************/\n/* resource header */\n.resource-header {\n  margin: 1rem 0 0 0;\n  border-bottom: 1px solid #ddd;\n}\n/* resource header title */\n.resource-title .title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.resource-title .title:hover {\n  white-space: normal;\n  width: inherit;\n  height: auto;\n}\n/* resource header link */\n.resource-link {\n  margin: 2rem 0;\n}\n/* resource header table */\n/* remove top border from table */\n.resource-header table.resource-header-table tr:first-of-type th,\n.resource-header table.resource-header-table tr:first-of-type td {\n  border-top: none;\n}'},8928:s=>{s.exports="/* slider container */\n.awg-image-slider {\n  height: 300px;\n}\n.awg-image-slider .ngx-gallery {\n  display: inline-block;\n}\n:host::ng-deep ngx-gallery {\n  /* image preview */\n  /* arrows */\n  /* thumbnails */\n}\n:host::ng-deep ngx-gallery .ngx-gallery-image-wrapper {\n  background-color: #e7e7e7;\n}\n:host::ng-deep ngx-gallery .ngx-gallery-arrow {\n  color: #676767;\n}\n:host::ng-deep ngx-gallery .ngx-gallery-arrow .ngx-gallery-disabled {\n  opacity: 0.3;\n}\n:host::ng-deep ngx-gallery .ngx-gallery-thumbnail {\n  opacity: 0.5;\n}\n:host::ng-deep ngx-gallery .ngx-gallery-thumbnail:hover {\n  opacity: 1;\n}"},3533:s=>{s.exports='@charset "UTF-8";\n/************************************************\n *\n *               CREDITS\n *\n * This code is inspired, adapted or taken from:\n *\n * ARACHNE \u2013 Objektdatenbank des Deutschen Arch\xe4ologischen Instituts (DAI)\n * https://arachne.dainst.org/entity/1121229**]\n * 20.11.2017\n *\n *\n *\n ************************************************/\nul.awg-linked-obj-list {\n  padding-left: 0;\n}\nul.awg-linked-obj-list li:hover {\n  background-color: #e7e7e7;\n}\nul.awg-linked-obj-list li a {\n  width: inherit;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: block;\n}\nul.awg-linked-obj-list li hr {\n  margin-top: 0.75rem;\n  margin-bottom: 0.75rem;\n}\n/* link objects */\n.awg-linked-obj-link {\n  cursor: pointer;\n  color: #333 !important;\n}\n.awg-linked-obj-link:hover {\n  border-bottom: none !important;\n}'},8580:s=>{s.exports='@charset "UTF-8";\n/************************************************\n*\n*               CREDITS\n*\n* This code is inspired, adapted or taken from:\n*\n* ARACHNE \u2013 Objektdatenbank des Deutschen Arch\xe4ologischen Instituts (DAI)\n* https://arachne.dainst.org/entity/1121229**]\n* 20.11.2017\n*\n*\n*\n************************************************/\n/* props */\n.awg-props ul {\n  padding-left: 0;\n  margin-top: 0.5rem;\n  margin-bottom: 0.25rem;\n}\n.awg-props li {\n  list-style: none;\n  padding: 0.25rem 0;\n}\n.awg-props .awg-prop .awg-prop-label {\n  margin-top: 8px;\n  margin-bottom: -4px;\n  display: block;\n  font-size: 21px;\n  font-weight: 400;\n}\n.awg-props .awg-prop .awg-prop-value {\n  padding: 3px 0;\n  margin-left: 1rem;\n}'},8209:s=>{s.exports=""},8796:s=>{s.exports=""},4141:s=>{s.exports=""},9403:s=>{s.exports=""},3173:s=>{s.exports="@charset \"UTF-8\";\n/************************************************\n*\n*               CREDITS\n*\n* This code is inspired, adapted or taken from:\n*\n* ARACHNE \u2013 Objektdatenbank des Deutschen Arch\xe4ologischen Instituts (DAI)\n* https://arachne.dainst.org/entity/1121229**]\n* 20.11.2017\n*\n*\n*\n************************************************/\n/* for resource-header see 'resource-detail-html-header.component.scss' */\n/* for resource-html-props see 'props.component.scss' */\n/* tabs */\n/* adjust tab size on larger screens */\n@media screen and (min-width: 768px) {\n  /* set auto width for long tab */\n  .awg-resource-detail-long-tab {\n    width: auto !important;\n  }\n\n  /* avoid line wrap in link text */\n  .awg-resource-detail-short-tab > a {\n    white-space: nowrap;\n  }\n}\n::ng-deep .tab-content .tab-pane.active {\n  margin: 2rem 0;\n}"},6679:s=>{s.exports=""},3016:s=>{s.exports=""},5408:s=>{s.exports=".awg-form-floating-group input {\n  border-bottom-left-radius: 0;\n  border-top-left-radius: 0;\n}"},636:s=>{s.exports=""},5638:s=>{s.exports=".awg-search-results .awg-search-result-table tbody tr {\n  cursor: pointer;\n}\n\n.awg-search-results .awg-search-result-table tbody tr:hover {\n  background-color: #e7e7e7;\n}\n\n.awg-search-results .awg-search-result-table tbody tr.active td {\n  background-color: #d7d7d7;\n}"},3502:s=>{s.exports=""},5856:s=>{s.exports='\x3c!-- resource detail header --\x3e\n<div class="resource-header">\n    <div class="row">\n        <div class="col-lg-8">\n            <h2 class="resource-title">\n                <div class="title">\n                    <span [compile-html]="header?.title" [compile-html-ref]="this"></span>\n                </div>\n                <div class="subtitle">\n                    <small></small>\n                </div>\n            </h2>\n            <div class="resource-link">\n                <small>\n                    API-Request:\n                    <a href="{{ resourceUrl }}">{{ resourceUrl }}</a>\n                    \x3c!-- TODO: (resource-detail-html-header): change then to stable URL for resource --\x3e\n                </small>\n            </div>\n        </div>\n        <div class="col-lg-4">\n            <table aria-label="Table with resource detail metadata" class="table table-sm resource-header-table">\n                <tbody>\n                    <tr>\n                        <th scope="row">Salsah-ID:</th>\n                        <td id="header?.objID">{{ header?.objID }}</td>\n                    </tr>\n                    <tr>\n                        <th scope="row">Kategorie</th>\n                        <td>\n                            <span class="resource-type">{{ header?.type }}</span\n                            >&nbsp;<span class="resource-icon"><img [src]="header?.icon" alt="icon" /></span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <th scope="row">Zuletzt bearbeitet:</th>\n                        <td>\n                            <span class="resource-lastmod">{{ header?.lastmod }}</span> (UTC)\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>\n'},5453:s=>{s.exports='\x3c!--\n/************************************************\n*\n*               CREDITS\n*\n* This code is inspired, adapted or taken from:\n*\n* ARACHNE \u2013 Objektdatenbank des Deutschen Arch\xe4ologischen Instituts (DAI)\n* https://arachne.dainst.org/entity/1121229**]\n* 20.11.2017\n*\n*\n*\n************************************************/ --\x3e\n\x3c!-- resourceDetailData content: image objects --\x3e\n<div class="awg-image-obj mb-3" *ngIf="images?.length > 0">\n    \x3c!-- header --\x3e\n    <h5>\n        Abbildungen (<span id="awg-image-number">{{ images?.length }}</span\n        >)\n    </h5>\n\n    \x3c!-- image slider --\x3e\n    <div class="card awg-image-slider">\n        <ngx-gallery class="ngx-gallery" [options]="galleryOptions" [images]="images"></ngx-gallery>\n    </div>\n    \x3c!-- end DIV image-slider --\x3e\n</div>\n\x3c!-- end DIV image-obj --\x3e\n'},4980:s=>{s.exports='\x3c!--\n/************************************************\n*\n*               CREDITS\n*\n* This code is inspired, adapted or taken from:\n*\n* ARACHNE \u2013 Objektdatenbank des Deutschen Arch\xe4ologischen Instituts (DAI)\n* https://arachne.dainst.org/entity/1121229**]\n* 20.11.2017\n*\n*\n*\n************************************************/ --\x3e\n\x3c!-- resourceDetailData content: linked objects --\x3e\n<div class="awg-linked-obj">\n    <h5>\n        \x3c!-- TODO: link to linked objects overview\n        <a (click)="navigateToSearchResults()">\n        --\x3e\n        Verkn\xfcpfte Objekte (<span id="awg-incoming-size" *ngIf="incomingGroups">{{ totalNumber }}</span\n        >)\n        \x3c!--\n        </a>\n        --\x3e\n    </h5>\n\n    <ngb-accordion [closeOthers]="true">\n        <ngb-panel\n            id="incoming-linkgroup-{{ i }}"\n            class="awg-linked-obj-incoming-linkgroup"\n            *ngFor="let restypeGroup of incomingGroups; let i = index">\n            <ng-template ngbPanelTitle>\n                <span class="awg-linked-obj-title-group single-line">\n                    <span class="badge badge-info me-2">{{ restypeGroup?.links?.length }}</span>\n                    <span class="awg-linked-obj-title">{{ restypeGroup?.restypeLabel }}</span>\n                </span>\n            </ng-template>\n            <ng-template ngbPanelContent>\n                <ul class="awg-linked-obj-list nobullets mb-0">\n                    <li *ngFor="let link of restypeGroup.links; last as isLast">\n                        <a class="awg-linked-obj-link" (click)="navigateToResource(link?.id)">\n                            <img [src]="link?.restype?.icon" alt="icon" />\n                            &nbsp;[<span class="awg-linked-obj-link-id">{{ link?.id }}</span\n                            >]&nbsp;\n                            <span class="awg-linked-obj-link-value">{{ link?.value }}</span>\n                        </a>\n                        <hr *ngIf="!isLast" />\n                    </li>\n                </ul>\n            </ng-template>\n        </ngb-panel>\n    </ngb-accordion>\n</div>\n\x3c!-- end DIV linkedObj --\x3e\n'},2630:s=>{s.exports='\x3c!-- resource detail data content: props --\x3e\n<section class="awg-props">\n    <h4 class="awg-props-title ms-0">Objektdaten</h4>\n    <ul *ngFor="let prop of props">\n        <li id="breakLine" *ngIf="prop.label === metaBreakLine">\n            <hr />\n        </li>\n        <li class="awg-prop" *ngIf="prop!.values[0]">\n            \x3c!-- value label --\x3e\n            <strong class="awg-prop-label" *ngIf="prop.label">\n                {{ prop.label }}\n            </strong>\n            \x3c!-- value content --\x3e\n            <ul *ngFor="let value of prop.values">\n                <li class="awg-prop-value" *ngIf="value">\n                    <span [compile-html]="value" [compile-html-ref]="this"></span>\n                </li>\n            </ul>\n        </li>\n    </ul>\n</section>\n'},626:s=>{s.exports='\x3c!--\n/************************************************\n*\n*               CREDITS\n*\n* This code is inspired, adapted or taken from:\n*\n* ARACHNE \u2013 Objektdatenbank des Deutschen Arch\xe4ologischen Instituts (DAI)\n* https://arachne.dainst.org/entity/1121229**]\n* 20.11.2017\n*\n*\n*\n************************************************/ --\x3e\n\x3c!-- resourceDetailData content --\x3e\n<div class="awg-resource-content">\n    <div class="row">\n        \x3c!-- object properties --\x3e\n        <div class="col-lg-8">\n            <awg-resource-detail-html-content-props\n                [props]="content?.props"\n                (gndRequest)="exposeGnd($event)"\n                (resourceRequest)="navigateToResource($event)">\n            </awg-resource-detail-html-content-props>\n        </div>\n\n        \x3c!-- right side nav objects --\x3e\n        <div class="col-lg-4 mt-3 mt-lg-0 mb-3">\n            <div class="sidenav-right">\n                \x3c!-- image objects --\x3e\n                <awg-resource-detail-html-content-imageobjects [images]="content?.images">\n                </awg-resource-detail-html-content-imageobjects>\n\n                \x3c!-- connected objects --\x3e\n                <awg-resource-detail-html-content-linkedobjects\n                    [incomingGroups]="content?.incoming"\n                    (resourceRequest)="navigateToResource($event)">\n                </awg-resource-detail-html-content-linkedobjects>\n            </div>\n        </div>\n    </div>\n</div>\n'},1117:s=>{s.exports='\x3c!-- resourceDetailData content --\x3e\n<awg-resource-detail-html-content\n    *ngIf="resourceDetailData?.content"\n    [content]="resourceDetailData?.content"\n    (gndRequest)="exposeGnd($event)"\n    (resourceRequest)="navigateToResource($event)">\n</awg-resource-detail-html-content>\n'},6877:s=>{s.exports='<awg-json-viewer\n    jsonViewerHeader="Converted JSON response from Salsah-API"\n    [jsonViewerData]="resourceJsonConvertedData">\n</awg-json-viewer>\n'},166:s=>{s.exports='<awg-json-viewer jsonViewerHeader="Raw JSON response from Salsah-API" [jsonViewerData]="resourceJsonRawData">\n</awg-json-viewer>\n'},5112:s=>{s.exports='\x3c!-- resource detail box --\x3e\n\n\x3c!-- loading spinner --\x3e\n<div *ngIf="isLoading$ | async; else notLoading">\n    <awg-twelve-tone-spinner></awg-twelve-tone-spinner>\n</div>\n\n<ng-template #notLoading>\n    \x3c!-- error message --\x3e\n    <div class="errorMessage" *ngIf="errorMessage">\n        <p>Die Anfrage "{{ errorMessage?.route }}" ist fehlgeschlagen.</p>\n        <p>Fehlermeldung: "{{ errorMessage?.statusText || errorMessage }}".</p>\n        <p>M\xf6glicherweise gab es ein Problem mit der Internetverbindung oder dem verwendeten Suchbegriff.</p>\n    </div>\n\n    \x3c!-- async data --\x3e\n    <div class="awg-resource-detail-tabs" *ngIf="resourceData">\n        \x3c!-- resourceDetailData header --\x3e\n        <awg-resource-detail-header\n            *ngIf="resourceData.detail.header"\n            [header]="resourceData.detail.header"\n            [resourceUrl]="httpGetUrl"\n            (resourceRequest)="navigateToResource($event)"></awg-resource-detail-header>\n\n        \x3c!-- resourceDetailData body --\x3e\n        <nav\n            ngbNav\n            #resourceDetailNav="ngbNav"\n            class="nav-tabs"\n            [activeId]="selectedResourceDetailTabId"\n            (navChange)="onResourceDetailTabChange($event)">\n            <ng-container ngbNavItem="html">\n                <a ngbNavLink class="awg-resource-detail-long-tab">{{ resourceDetailTabTitles?.html }}</a>\n                <ng-template ngbNavContent>\n                    \x3c!-- html visualisation --\x3e\n                    <awg-resource-detail-html\n                        [resourceDetailData]="resourceData.detail"\n                        (gndRequest)="exposeGnd($event)"\n                        (resourceRequest)="navigateToResource($event)">\n                    </awg-resource-detail-html>\n                </ng-template>\n            </ng-container>\n            <ng-container ngbNavItem="converted-json">\n                <a ngbNavLink class="ms-auto">{{ resourceDetailTabTitles?.converted }}</a>\n                <ng-template ngbNavContent>\n                    \x3c!-- converted json visualisation --\x3e\n                    <awg-resource-detail-json-converted [resourceJsonConvertedData]="resourceData.jsonConverted">\n                    </awg-resource-detail-json-converted>\n                </ng-template>\n            </ng-container>\n            <ng-container ngbNavItem="raw-json">\n                <a ngbNavLink>{{ resourceDetailTabTitles?.raw }}</a>\n                <ng-template ngbNavContent>\n                    \x3c!-- raw json visualisation --\x3e\n                    <awg-resource-detail-json-raw [resourceJsonRawData]="resourceData.jsonRaw">\n                    </awg-resource-detail-json-raw>\n                </ng-template>\n            </ng-container>\n        </nav>\n        <div [ngbNavOutlet]="resourceDetailNav"></div>\n    </div>\n\n    \x3c!--\n    TODO: remove\n    <ul class="nav nav-tabs nav-justified" role="tablist">\n        <li class="active awg-resource-detail-long-tab"><a data-toggle="tab" href="#html">{{ tabTitles?.html }}</a></li>\n        <li class="dropdown awg-resource-detail-short-tab">\n            <a href="#" data-toggle="dropdown" class="dropdown-toggle">\n                {{ \'{\' }} JSON {{ \'}\' }} <b class="caret"></b>\n            </a>\n            <ul class="dropdown-menu dropdown-menu-right">\n                <li><a data-toggle="tab" href="#converted">{{ tabTitles?.converted }}</a></li>\n                <li><a data-toggle="tab" href="#raw">{{ tabTitles?.raw }}</a></li>\n            </ul>\n        </li>\n    </ul>\n    --\x3e\n</ng-template>\n'},7106:s=>{s.exports='<awg-router-link-button-group\n    *ngIf="searchRouterLinkButtons"\n    [routerLinkButtons]="searchRouterLinkButtons"\n    [queryParamsHandling]="\'preserve\'"\n    (selectButtonRequest)="onButtonSelect($event)">\n</awg-router-link-button-group>\n\n<router-outlet></router-outlet>\n'},5291:s=>{s.exports='<form [formGroup]="extendedSearchForm" (ngSubmit)="onSearch()" *ngIf="extendedSearchForm" class="p-3 border">\n    <div class="form-floating awg-form-floating-group flex-grow-1 mt-3 mb-3">\n        <select\n            class="form-select"\n            id="awg-extended-search-resourcetype-input"\n            aria-label="Extended search restype control"\n            formControlName="restypeControl"\n            required>\n            <option value="" disabled hidden>{{ defaultFormString }}</option>\n            <option *ngFor="let resourcetype of restypesResponse?.resourcetypes" [ngValue]="resourcetype.id">\n                {{ resourcetype.id }} | {{ resourcetype.label }}\n            </option>\n        </select>\n        <label for="awg-extended-search-resourcetype-input" class="text-muted">Resource type</label>\n    </div>\n\n    <ng-container formArrayName="propertiesControls">\n        <div *ngFor="let propCtrl of propertiesControls.controls; index as idx" class="row mb-4 ms-4 g-2">\n            <ng-container [formGroupName]="idx">\n                <div class="form-floating col-md-4">\n                    <select\n                        id="awg-extended-search-property-{{ idx }}"\n                        class="form-select"\n                        [formControl]="getPropertyIdControlAtIndex(idx)"\n                        [attr.disabled]="isPropertyIdControlDisabled()"\n                        required>\n                        <option value="" disabled hidden>{{ defaultFormString }}</option>\n                        <ng-container *ngIf="selectedResourcetype">\n                            <option\n                                *ngFor="let property of selectedResourcetype?.properties"\n                                [value]="property.id"\n                                [title]="property.label">\n                                {{ property.id }} | {{ property.label }}\n                            </option>\n                        </ng-container>\n                    </select>\n                    <label class="text-muted" for="awg-extended-search-property-{{ idx }}">Property</label>\n                </div>\n                <div class="form-floating col-md-2">\n                    <select\n                        id="awg-extended-search-compop"\n                        class="form-select"\n                        formControlName="compopControl"\n                        [attr.disabled]="isCompopControlDisabled(idx)"\n                        required>\n                        <option value="" disabled hidden>{{ defaultFormString }}</option>\n                        <ng-container>\n                            <option\n                                *ngFor="let compop of selectedCompopSets[idx]"\n                                [ngValue]="compop.value"\n                                [title]="compop.title"\n                                [innerHtml]="compop.label"></option>\n                        </ng-container>\n                    </select>\n                    <label class="text-muted" for="awg-extended-search-compop">Operator</label>\n                </div>\n                <div class="form-floating col-md-4">\n                    <input\n                        title="Extended Search - Search Value"\n                        type="search"\n                        id="awg-extended-search-searchValue"\n                        class="form-control"\n                        [formControl]="getSearchvalControlAtIndex(idx)"\n                        [attr.disabled]="isSearchvalControlDisabled(idx)"\n                        placeholder="{{ getSearchvalPlaceholder(idx) }}" />\n                    <label class="text-muted" for="awg-extended-search-searchValue">Search value</label>\n                </div>\n\n                <div class="btn-toolbar col-2" role="toolbar" aria-label="Toolbar for property inputs">\n                    <div class="btn-group" role="group" aria-label="Group of handle buttons">\n                        <button\n                            type="button"\n                            class="btn btn-outline-danger"\n                            *ngIf="propertiesControls.controls.length > 1"\n                            (click)="removePropertiesControl(idx)">\n                            <fa-icon [icon]="faTrash"></fa-icon>\n                        </button>\n                        <button\n                            type="button"\n                            class="btn btn-outline-info"\n                            (click)="addPropertiesControl()"\n                            [attr.disabled]="isAddButtonDisabled(idx)">\n                            <fa-icon [icon]="faPlus"></fa-icon>\n                        </button>\n                    </div>\n                </div>\n            </ng-container>\n            <div\n                *ngIf="getSearchvalControlAtIndex(idx).invalid && !getSearchvalControlAtIndex(idx).pristine"\n                class="alert alert-danger">\n                <p *ngIf="getSearchvalControlAtIndex(idx).errors"></p>\n                {{ searchFormStrings.errorMessage }}\n            </div>\n        </div>\n    </ng-container>\n    <div class="mb-4">\n        <button class="btn btn-outline-info" type="submit" [disabled]="!extendedSearchForm.valid">\n            <fa-icon [icon]="faSearch"></fa-icon>\n            Suche\n        </button>\n        <button class="btn btn-outline-danger" (click)="onReset()" [disabled]="!restypeControl.valid">Reset</button>\n    </div>\n</form>\n'},8940:s=>{s.exports='<form [formGroup]="searchForm" novalidate class="p-3 border">\n    <div class="input-group mt-3 mb-3">\n        <div class="input-group-text" id="search-icon" style="max-height: 3.63rem">\n            <fa-icon [icon]="faSearch"></fa-icon>\n        </div>\n        <div class="form-floating awg-form-floating-group flex-grow-1">\n            <input\n                title="{{ searchFormStrings.label }}"\n                type="search"\n                id="awg-fulltext-search-searchValue"\n                class="form-control"\n                [ngClass]="{\n                    \'is-invalid\': isFulltextSearchInputInvalid()\n                }"\n                formControlName="searchvalControl"\n                [attr.aria-label]="searchFormStrings.label"\n                aria-describedby="search-icon"\n                placeholder="{{ searchFormStrings.placeholder }}"\n                required />\n            <label for="awg-fulltext-search-searchValue" class="text-muted">{{ searchFormStrings.placeholder }}</label>\n            <div *ngIf="searchvalControl.invalid && !searchvalControl.pristine" class="invalid-feedback">\n                <p *ngIf="isFulltextSearchInputInvalid()">\n                    {{ searchFormStrings.errorMessage }}\n                </p>\n            </div>\n        </div>\n    </div>\n</form>\n'},6503:s=>{s.exports='\x3c!-- content: search panel --\x3e\n<div class="awg-search-tabs">\n    <nav\n        ngbNav\n        #searchNav="ngbNav"\n        class="nav-tabs nav-fill"\n        [activeId]="selectedSearchTabId"\n        (navChange)="onSearchTabChange($event)">\n        \x3c!-- TODO: see https://github.com/ng-bootstrap/ng-bootstrap/issues/1632 --\x3e\n        <ng-container [ngbNavItem]="searchTabs?.fulltext.id">\n            <a ngbNavLink id="fulltext" class="awg-fulltext-search-tab">{{ searchTabs?.fulltext.title }}</a>\n            <ng-template ngbNavContent>\n                \x3c!-- full text search --\x3e\n                <awg-fulltext-search-form\n                    [searchValue]="getSearchQueryType(searchParams?.query)"\n                    (searchRequest)="onSearch($event)">\n                </awg-fulltext-search-form>\n            </ng-template>\n        </ng-container>\n        <ng-container [ngbNavItem]="searchTabs.extended.id">\n            <a ngbNavLink class="awg-extended-search-tab">{{ searchTabs?.extended.title }}</a>\n            <ng-template ngbNavContent>\n                \x3c!-- extended search --\x3e\n                <awg-extended-search-form (searchRequest)="onSearch($event)"></awg-extended-search-form>\n            </ng-template>\n        </ng-container>\n    </nav>\n    <div [ngbNavOutlet]="searchNav"></div>\n</div>\n\n\x3c!-- loading spinner --\x3e\n<div *ngIf="isLoading$ | async; else notLoading">\n    <awg-twelve-tone-spinner></awg-twelve-tone-spinner>\n</div>\n\n\x3c!-- search results --\x3e\n<ng-template #notLoading>\n    <div class="errorMessage" *ngIf="errorMessage">\n        <p>Die Anfrage "{{ errorMessage?.route }}" ist fehlgeschlagen.</p>\n        <p>Fehlermeldung: "{{ errorMessage?.statusText || errorMessage }}".</p>\n        <p>M\xf6glicherweise gab es ein Problem mit der Internetverbindung oder der Suchanfrage.</p>\n    </div>\n\n    <awg-search-result-list\n        *ngIf="searchResponseWithQuery?.query"\n        [searchParams]="searchParams"\n        [searchUrl]="httpGetUrl"\n        (pageChangeRequest)="onPageChange($event)"\n        (rowNumberChangeRequest)="onRowNumberChange($event)"\n        (viewChangeRequest)="onViewChange($event)">\n    </awg-search-result-list>\n</ng-template>\n'},6388:s=>{s.exports='\x3c!-- content: search results --\x3e\n\n\x3c!-- TODO Use shared generic table component to display search results\n<awg-table\n    tableTitle="{{ searchResponseWithQuery?.query | json }}"\n    [headerInputData]="test.head.vars"\n    [rowInputData]="test.body.bindings"></awg-table>\n--\x3e\n\n<div class="awg-search-results p-3 border rounded-bottom" *ngIf="searchResponseWithQuery?.data">\n    \x3c!-- header --\x3e\n    <div class="row d-flex justify-content-between mb-4 awg-search-results-header">\n        <div class="col-6 me-auto awg-search-results-header-icons">\n            <div class="btn-group" role="group">\n                <form [formGroup]="searchResultControlForm">\n                    <div\n                        class="btn-group"\n                        role="group"\n                        name="searchResultView"\n                        aria-label="Search result view toggle button group">\n                        <input\n                            type="radio"\n                            [formControl]="searchResultViewControl"\n                            value="table"\n                            class="btn-check"\n                            id="tableViewButton"\n                            autocomplete="off"\n                            [disabled]="isNoResults()" />\n                        <label class="btn btn-outline-info" for="tableViewButton" ngbTooltip="Table view"\n                            ><fa-icon [icon]="faTable"></fa-icon\n                        ></label>\n\n                        <input\n                            type="radio"\n                            [formControl]="searchResultViewControl"\n                            value="grid"\n                            class="btn-check"\n                            id="gridViewButton"\n                            autocomplete="off"\n                            [disabled]="isNoResults()" />\n                        <label class="btn btn-outline-info" for="gridViewButton" ngbTooltip="Grid view"\n                            ><fa-icon [icon]="faGripHorizontal"></fa-icon>\n                        </label>\n                    </div>\n                </form>\n                <div class="btn-group" role="group">\n                    <button type="button" class="btn btn-outline-info" disabled aria-disabled="true">\n                        <span class="d-none d-lg-inline">Hits per page: </span>{{ searchParams?.nRows }}\n                    </button>\n                    <div\n                        ngbDropdown\n                        class="btn-group"\n                        role="group"\n                        aria-label="Button group with nested dropdown for row number">\n                        <button\n                            class="btn btn-info dropdown-toggle-split"\n                            ngbDropdownToggle\n                            [disabled]="isNoResults()"></button>\n                        <div class="dropdown-menu" ngbDropdownMenu>\n                            <button\n                                class="dropdown-item"\n                                *ngFor="let rowNumber of rowNumbers"\n                                (click)="onRowNumberChange(rowNumber)">\n                                {{ rowNumber }}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="col-6 my-auto text-center awg-search-results-header-text">\n            {{ searchResultText }}\n        </div>\n    </div>\n\n    <ng-container *ngIf="searchResponseWithQuery?.data?.subjects && !isNoResults()">\n        \x3c!-- top pagination --\x3e\n        <ngb-pagination\n            class="d-flex justify-content-center"\n            [(page)]="page"\n            [pageSize]="pageSize"\n            [collectionSize]="+searchResponseWithQuery?.data?.nhits"\n            [maxSize]="4"\n            [boundaryLinks]="true"\n            (pageChange)="onPageChange($event)">\n        </ngb-pagination>\n\n        \x3c!-- table with searchResults --\x3e\n        <div *ngIf="!isGridView()" class="table-responsive">\n            <table aria-label="Table with search results" class="table table-sm awg-search-result-table">\n                <thead>\n                    <tr class="d-flex">\n                        <th scope="col" class="col-6 col-sm-4 col-md-5 col-lg-4 col-xl-3">Typ</th>\n                        <th scope="col" class="col-6 col-sm-8 col-md-7 col-lg-8 col-xl-9">Ressource</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    \x3c!-- show searchResultDetail by clicking on single entry --\x3e\n                    <tr\n                        class="d-flex"\n                        *ngFor="let subject of searchResponseWithQuery?.data?.subjects; trackBy: trackById"\n                        (click)="navigateToResource(subject?.obj_id)"\n                        [class.active]="isActiveResource(subject?.obj_id)">\n                        <td class="col-6 col-sm-4 col-md-5 col-lg-4 col-xl-3">\n                            <span class="badge">\n                                <img [attr.src]="subject?.iconsrc" alt="iconsrc" />\n                                <small>&nbsp;{{ subject?.iconlabel }}</small>\n                            </span>\n                        </td>\n                        <td class="col-6 col-sm-8 col-md-7 col-lg-8 col-xl-9">\n                            <span\n                                ><em>{{ subject!.valuelabel[0] }}:&nbsp;</em></span\n                            ><span [compile-html]="subject!.value[0]" [compile-html-ref]="this"></span>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        \x3c!-- grid with searchResults --\x3e\n        <div *ngIf="isGridView()" class="row row-cols-1 row-cols-sm-3 row-cols-xl-5 g-4 mb-4">\n            <div class="col" *ngFor="let subject of searchResponseWithQuery?.data?.subjects; trackBy: trackById">\n                <div class="card h-100">\n                    <div class="card-header">\n                        <img [attr.src]="subject?.iconsrc" alt="iconsrc" />\n                        &nbsp;{{ subject?.iconlabel }}\n                    </div>\n                    <div class="card-body">\n                        <h5 class="card-title">\n                            <span [compile-html]="subject!.value[0]" [compile-html-ref]="this"></span>\n                        </h5>\n                    </div>\n                    <div class="card-footer text-end">\n                        <a (click)="navigateToResource(subject?.obj_id)" class="btn btn-outline-info">Mehr... </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- bottom pagination --\x3e\n        <ngb-pagination\n            class="d-flex justify-content-center"\n            [(page)]="page"\n            [pageSize]="pageSize"\n            [collectionSize]="+searchResponseWithQuery?.data?.nhits"\n            [maxSize]="4"\n            [boundaryLinks]="true"\n            (pageChange)="onPageChange($event)">\n        </ngb-pagination>\n    </ng-container>\n</div>\n'},4238:s=>{s.exports='\x3c!-- content: search --\x3e\n\n\x3c!-- heading --\x3e\n<awg-heading [title]="searchTitle" [id]="searchId"></awg-heading>\n\n\x3c!-- help-block --\x3e\n<div class="help-block">BETA: Suche momentan noch mit eingeschr\xe4nkter Funktionalit\xe4t</div>\n\n\x3c!-- data (search) routes --\x3e\n<router-outlet></router-outlet>\n'}}]);